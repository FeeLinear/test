var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,g){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,g):$jscomp.polyfillUnisolated(a,b,c,g))};$jscomp.polyfillUnisolated=function(a,b,c,g){c=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var k=a[g];if(!(k in c))return;c=c[k]}a=a[a.length-1];g=c[a];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,g){var k=a.split(".");a=1===k.length;g=k[0];g=!a&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var q=0;q<k.length-1;q++){var f=k[q];if(!(f in g))return;g=g[f]}k=k[k.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?g[k]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,k,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[k]&&($jscomp.propertyToPolyfillSymbol[k]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(k):
$jscomp.POLYFILL_PREFIX+k),$jscomp.defineProperty(g,$jscomp.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,c,g){var k=this.length||0;0>c&&(c=Math.max(0,k+c));if(null==g||g>k)g=k;g=Number(g);0>g&&(g=Math.max(0,k+g));for(c=Number(c||0);c<g;c++)this[c]=b;return this}},"es6","es3");$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};
$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(k,q){this.$jscomp$symbol$id_=k;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:q})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,g=function(k){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(k||"")+"_"+c++,k)};return g},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var g=$jscomp.global[b[c]];"function"===typeof g&&"function"!=typeof g.prototype[a]&&$jscomp.defineProperty(g.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,g=!1,k={next:function(){if(!g&&c<a.length){var q=c++;return{value:b(q,a[q]),done:!1}}g=!0;return{done:!0,value:void 0}}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var g=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var k=g.length,q=b.length;c=Math.max(0,Math.min(c|0,g.length));for(var f=0;f<q&&c<k;)if(g[c++]!=b[f++])return!1;return f>=q}},"es6","es3");$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a?a:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(a){return a?a:function(b){var c=[],g=Object.getOwnPropertyNames(b);b=Object.getOwnPropertySymbols(b);for(var k=0;k<g.length;k++)("jscomp_symbol_"==g[k].substring(0,14)?b:c).push(g[k]);return c.concat(b)}},"es6","es5");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var g=a.length,k=0;k<g;k++){var q=a[k];if(b.call(c,q,k,a))return{i:k,v:q}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(b,c){var g=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===c&&(c=g.length);c=Math.max(0,Math.min(c|0,g.length));for(var k=b.length;0<k&&0<c;)if(g[--c]!=b[--k])return!1;return 0>=k}},"es6","es3");
$jscomp.polyfill("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var g=arguments[c];if(g)for(var k in g)$jscomp.owns(g,k)&&(a[k]=g[k])}return a};
$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("String.prototype.trimRight",function(a){function b(){return this.replace(/[\s\xa0]+$/,"")}return a||b},"es_2019","es3");
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(f){return f instanceof k?f:new k(function(p,v){p(f)})}if(a&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return a;b.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var p=this;this.asyncExecuteFunction(function(){p.executeBatch_()})}this.batch_.push(f)};
var g=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(f){g(f,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=this.batch_;this.batch_=[];for(var p=0;p<f.length;++p){var v=f[p];f[p]=null;try{v()}catch(A){this.asyncThrow_(A)}}}this.batch_=null};b.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var k=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var p=this.createResolveAndReject_();
try{f(p.resolve,p.reject)}catch(v){p.reject(v)}};k.prototype.createResolveAndReject_=function(){function f(A){return function(r){v||(v=!0,A.call(p,r))}}var p=this,v=!1;return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};k.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof k)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var p=null!=f;break a;case "function":p=!0;break a;default:p=!1}p?this.resolveToNonPromiseObj_(f):
this.fulfill_(f)}};k.prototype.resolveToNonPromiseObj_=function(f){var p=void 0;try{p=f.then}catch(v){this.reject_(v);return}"function"==typeof p?this.settleSameAsThenable_(p,f):this.fulfill_(f)};k.prototype.reject_=function(f){this.settle_(2,f)};k.prototype.fulfill_=function(f){this.settle_(1,f)};k.prototype.settle_=function(f,p){if(0!=this.state_)throw Error("Cannot settle("+f+", "+p+"): Promise already settled in state"+this.state_);this.state_=f;this.result_=p;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};k.prototype.scheduleUnhandledRejectionCheck_=function(){var f=this;g(function(){if(f.notifyUnhandledRejection_()){var p=$jscomp.global.console;"undefined"!==typeof p&&p.error(f.result_)}},1)};k.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var f=$jscomp.global.CustomEvent,p=$jscomp.global.Event,v=$jscomp.global.dispatchEvent;if("undefined"===typeof v)return!0;"function"===typeof f?f=new f("unhandledrejection",{cancelable:!0}):
"function"===typeof p?f=new p("unhandledrejection",{cancelable:!0}):(f=$jscomp.global.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f));f.promise=this;f.reason=this.result_;return v(f)};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=0;f<this.onSettledCallbacks_.length;++f)q.asyncExecute(this.onSettledCallbacks_[f]);this.onSettledCallbacks_=null}};var q=new b;k.prototype.settleSameAsPromise_=function(f){var p=this.createResolveAndReject_();
f.callWhenSettled_(p.resolve,p.reject)};k.prototype.settleSameAsThenable_=function(f,p){var v=this.createResolveAndReject_();try{f.call(p,v.resolve,v.reject)}catch(A){v.reject(A)}};k.prototype.then=function(f,p){function v(z,H){return"function"==typeof z?function(C){try{A(z(C))}catch(U){r(U)}}:H}var A,r,u=new k(function(z,H){A=z;r=H});this.callWhenSettled_(v(f,A),v(p,r));return u};k.prototype.catch=function(f){return this.then(void 0,f)};k.prototype.callWhenSettled_=function(f,p){function v(){switch(A.state_){case 1:f(A.result_);
break;case 2:p(A.result_);break;default:throw Error("Unexpected state: "+A.state_);}}var A=this;null==this.onSettledCallbacks_?q.asyncExecute(v):this.onSettledCallbacks_.push(v);this.isRejectionHandled_=!0};k.resolve=c;k.reject=function(f){return new k(function(p,v){v(f)})};k.race=function(f){return new k(function(p,v){for(var A=$jscomp.makeIterator(f),r=A.next();!r.done;r=A.next())c(r.value).callWhenSettled_(p,v)})};k.all=function(f){var p=$jscomp.makeIterator(f),v=p.next();return v.done?c([]):new k(function(A,
r){function u(C){return function(U){z[C]=U;H--;0==H&&A(z)}}var z=[],H=0;do z.push(void 0),H++,c(v.value).callWhenSettled_(u(z.length-1),r),v=p.next();while(!v.done)})};return k},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var g=this;g instanceof String&&(g=String(g));var k=g.length;c=c||0;for(0>c&&(c=Math.max(c+k,0));c<k;c++){var q=g[c];if(q===b||Object.is(q,b))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,g,k){return c==a&&"q"==g&&k==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var A=Object.seal({}),r=Object.seal({}),u=new a([[A,2],[r,3]]);if(2!=u.get(A)||3!=u.get(r))return!1;u.delete(A);u.set(r,4);return!u.has(A)&&4==u.get(r)}catch(z){return!1}}function c(){}function g(A){var r=typeof A;return"object"===r&&null!==A||"function"===r}function k(A){if(!$jscomp.owns(A,f)){var r=new c;$jscomp.defineProperty(A,f,{value:r})}}function q(A){if(!$jscomp.ISOLATE_POLYFILLS){var r=Object[A];r&&(Object[A]=
function(u){if(u instanceof c)return u;Object.isExtensible(u)&&k(u);return r(u)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var f="$jscomp_hidden_"+Math.random();q("freeze");q("preventExtensions");q("seal");var p=0,v=function(A){this.id_=(p+=Math.random()+1).toString();if(A){A=$jscomp.makeIterator(A);for(var r;!(r=A.next()).done;)r=r.value,this.set(r[0],r[1])}};v.prototype.set=function(A,r){if(!g(A))throw Error("Invalid WeakMap key");
k(A);if(!$jscomp.owns(A,f))throw Error("WeakMap key fail: "+A);A[f][this.id_]=r;return this};v.prototype.get=function(A){return g(A)&&$jscomp.owns(A,f)?A[f][this.id_]:void 0};v.prototype.has=function(A){return g(A)&&$jscomp.owns(A,f)&&$jscomp.owns(A[f],this.id_)};v.prototype.delete=function(A){return g(A)&&$jscomp.owns(A,f)&&$jscomp.owns(A[f],this.id_)?delete A[f][this.id_]:!1};return v},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var v=Object.seal({x:4}),A=new a($jscomp.makeIterator([[v,"s"]]));if("s"!=A.get(v)||1!=A.size||A.get({x:4})||A.set({x:4},"t")!=A||2!=A.size)return!1;var r=A.entries(),u=r.next();if(u.done||u.value[0]!=v||"s"!=u.value[1])return!1;u=r.next();return u.done||4!=u.value[0].x||"t"!=u.value[1]||!r.next().done?!1:!0}catch(z){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,g=function(v){this.data_={};this.head_=f();this.size=0;if(v){v=$jscomp.makeIterator(v);for(var A;!(A=v.next()).done;)A=A.value,this.set(A[0],A[1])}};g.prototype.set=function(v,A){v=0===v?0:v;var r=k(this,v);r.list||(r.list=this.data_[r.id]=[]);r.entry?r.entry.value=A:(r.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:v,value:A},r.list.push(r.entry),
this.head_.previous.next=r.entry,this.head_.previous=r.entry,this.size++);return this};g.prototype.delete=function(v){v=k(this,v);return v.entry&&v.list?(v.list.splice(v.index,1),v.list.length||delete this.data_[v.id],v.entry.previous.next=v.entry.next,v.entry.next.previous=v.entry.previous,v.entry.head=null,this.size--,!0):!1};g.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};g.prototype.has=function(v){return!!k(this,v).entry};g.prototype.get=function(v){return(v=
k(this,v).entry)&&v.value};g.prototype.entries=function(){return q(this,function(v){return[v.key,v.value]})};g.prototype.keys=function(){return q(this,function(v){return v.key})};g.prototype.values=function(){return q(this,function(v){return v.value})};g.prototype.forEach=function(v,A){for(var r=this.entries(),u;!(u=r.next()).done;)u=u.value,v.call(A,u[1],u[0],this)};g.prototype[Symbol.iterator]=g.prototype.entries;var k=function(v,A){var r=A&&typeof A;"object"==r||"function"==r?c.has(A)?r=c.get(A):
(r=""+ ++p,c.set(A,r)):r="p_"+A;var u=v.data_[r];if(u&&$jscomp.owns(v.data_,r))for(v=0;v<u.length;v++){var z=u[v];if(A!==A&&z.key!==z.key||A===z.key)return{id:r,list:u,index:v,entry:z}}return{id:r,list:u,index:-1,entry:void 0}},q=function(v,A){var r=v.head_;return $jscomp.iteratorPrototype(function(){if(r){for(;r.head!=v.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:A(r)};r=null}return{done:!0,value:void 0}})},f=function(){var v={};return v.previous=v.next=v.head=v},p=0;
return g},"es6","es3");formula_drawBackground.remark=function(){return"\u586b\u5145\u80cc\u666f.\n    \u7528\u6cd5:\n    DRAWGBK(COND,COLOR1,COLOR2,\u662f\u5426\u6a2a\u5411\u6e10\u8fdb,'BMP\u6216PNG\u6587\u4ef6\u540d',\u662f\u5426\u62c9\u5347BMP\u6216PNG\u6587\u4ef6\u540d),\u5f53\u6761\u4ef6COND\u6ee1\u8db3\u65f6\u586b\u5145\u80cc\u666f,\u5982\u679cCOLOR1\u548cCOLOR2\u6709\u4e00\u4e2a\u4e0d\u4e3a0,\u5219\u4ee5COLOR1\u5230COLOR2\u7684\u6e10\u53d8\u8272\u4e3a\u80cc\u666f,\u5426\u5219\u753bT0002\u76ee\u5f55\u4e0b\u9762\u7684signals\u76ee\u5f55\u4e0b\u9762\u7684'Bmp\u6216Png\u6587\u4ef6\u540d'(\u4f18\u5148\u4f7f\u7528BMP\u6587\u4ef6).\n    \u4f8b\u5982:\n    DRAWGBK(O>C,RGB(0,255,0),RGB(255,0,0),0,'\u80cc\u666f\u56fe',0);"};
function formula_drawBackground(a,b,c,g,k,q){this.draw=function(f,p,v,A,r,u){}};formula_drawBand.remark=function(){return"\u753b\u51fa\u5e26\u72b6\u7ebf.\n    \u7528\u6cd5:\n     DRAWBAND(VAL1,COLOR1,VAL2,COLOR2),\u5f53VAL1>VAL2\u65f6,\u5728VAL1\u548cVAL2\u4e4b\u95f4\u586b\u5145COLOR1;\u5f53VAL1<VAL2\u65f6,\u586b\u5145COLOR2,\u8fd9\u91cc\u7684\u989c\u8272\u5747\u4f7f\u7528RGB\u51fd\u6570\u8ba1\u7b97\u5f97\u5230.\n    \u4f8b\u5982:\n     DRAWBAND(OPEN,RGB(0,224,224),CLOSE,RGB(255,96,96));"};
function formula_drawBand(a,b,c,g,k){var q,f,p,v;this.getLocateValueAtIndex=function(A){A>a.length-1&&(A=a.length-1);0>A&&(A=0);return a[A]};this.calcMaxMin=function(A,r){q=A;f=r;A=q;0>A&&(A=0);if(void 0!=a)for(r=A;r<a.length&&r<q+f;r++)void 0!=a[r]&&(void 0==p?p=v=a[r]:p<a[r]?p=a[r]:v>a[r]&&(v=a[r]));if(void 0!=c)for(r=A;r<c.length&&r<q+f;r++)void 0!=c[r]&&(void 0==p?p=v=c[r]:p<c[r]?p=c[r]:v>c[r]&&(v=c[r]));return{max:p,min:v}};this.draw=function(A,r,u,z,H,C){if(void 0!=a&&void 0!=c){A.save();A.lineWidth=
1;r=a.length;var U=q;0>U&&(U=0);A.beginPath();var J=C(p),G=C(v);u=A.createLinearGradient(u.left,J,u.left,G);u.addColorStop(0,getChartGraphColor(b,z));u.addColorStop(1,getChartGraphColor(g,z));A.fillStyle=u;z=1;for(G=U;G<q+f&&G<r;G++)void 0==a[G]?z=1:(u=H(G),J=C(a[G]),1==z?(A.moveTo(u,J),z=0):A.lineTo(u,J));for(G--;G>=U;G--)void 0==a[G]?z=1:(u=H(G),J=C(c[G]),1==z?(A.moveTo(u,J),z=0):A.lineTo(u,J));A.globalAlpha=.5;A.fill();A.closePath();A.restore()}}};formula_drawBar.remark=function(){return"\u753b\u67f1\u72b6\u56fe.\n    \u7528\u6cd5:\n    drawBar(value, colors, format, widthRatiom barAlig, textColor, mode, showValue, top)"};function createIndex(a,b){return b[1]-a[1]}
function formula_drawBar(a,b,c,g,k,q,f,p,v,A,r,u){A=void 0===A?!1:A;var z=void 0===f?"normal":f,H=void 0===p?!0:p,C=void 0===g?.6:g,U=void 0===k?"center":k,J=void 0===q?"color3":q,G=[];if("stack"==z)for(g=0;g<a.length;g++)for(var B=0;B<a[g].length;B++)null==G[B]?G[B]=a[g][B]:a[g][B]&&(G[B]+=a[g][B]);else for(g=0;g<a.length;g++)for(B=1;B<a[g].length;B++)null==G[B]?G[B]=a[g][B]:null!=a[g][B]&&G[B]<a[g][B]&&(G[B]=a[g][B]);var L=0,ba,N,E;this.getLocateValueAtIndex=function(F){F>b.length-1&&(F=b.length-
1);0>F&&(F=0);return b[F]};this.getClosestValueAtIndex=function(F,M,X,aa){return 0<=F&&F<a[0].length&&null!=a[0][F]&&(X=aa(a[0][F]),X<=M+3&&X>=M-3)?a[0][F]:null};this.calcMaxMin=function(F,M){if(0==a.length)E=N=null;else{L=F;ba=M;F=L;0>F&&(F=0);if("stack"==z)for(E=N=G[F]?G[F]:null,M=F+1;M<G.length&&M<L+ba;M++)G[M]&&(void 0==N||N<G[M])&&(N=G[M]),G[M]&&(void 0==E||E>G[M])&&(E=G[M]);else{E=N=a[0][F]?a[0][F]:null;for(var X=0;X<a.length;X++)for(M=F;M<G.length&&M<L+ba;M++)a[X][M]&&(void 0==N||N<a[X][M])&&
(N=a[X][M]),a[X][M]&&(void 0==E||E>a[X][M])&&(E=a[X][M])}0>N&&(N=0);0<E&&(E=0);return{max:N,min:E,top:0,bottom:0<=E?0:24}}};var V=function(F,M,X){if(null!=F){if("Number"==F.constructor.name){var aa;r&&u&&(aa={unit:r,unitName:u});F=getValueFormatStringWithProp(F,M,X,null,aa)}else null!=X&&(F=getValueFormatString(F,M,X,null));return F}};this.draw=function(F,M,X,aa,ia,fa){if(0!=a.length){var T=[];for(X=0;X<b.length;X++)T[X]=getChartGraphColor(b[X],aa);F.save();F.lineWidth=1;X=a[0].length;var Y=L;0>Y&&
(Y=0);var O=ia(),K=O*C;O*=C;F.fontSize=12;2>M&&(K=Math.floor(K),1<K&&1==K%2&&K++);var Z=fa(0);M=0;"left"==U?M=-O/2-2:"right"==U&&(M=O/2+2);F.beginPath();switch(z){case "stack":for(B=Y;B<L+ba&&B<X;B++){K=ia(B)-O/2;var pa=0;var oa=Z;for(var Aa=0;Aa<a.length;Aa++){F.fillStyle=T[Aa];var ta=fa(pa+a[Aa][B]);F.fillRect(K+M,oa,O,ta-oa);F.fill();oa=ta;pa+=a[Aa][B]}}if(H)for(aa=getChartGraphColor(J,aa),F.fillStyle=aa,F.textAlign="center",F.textBaseline="middle",B=Y;B<L+ba&&B<X;B++)for(K=ia(B),Aa=pa=0;Aa<a.length;Aa++)ta=
fa(pa+a[Aa][B]),aa=null==c||null==c[Aa]?"%0.1%K":c[Aa],T="f",aa=V(pa+a[Aa][B],T,aa),F.fillText(aa,K+M,ta-7),pa+=a[Aa][B];break;case "detach":pa=O/a.length;for(B=Y;B<L+ba&&B<X;B++)for(Aa=0;Aa<a.length;Aa++)F.fillStyle=T[Aa],K=ia(B)-O/2,ta=fa(a[Aa][B]),F.fillRect(K+M+pa*Aa+.1*pa,Z,.8*pa,ta-Z),F.fill();if(H)for(aa=getChartGraphColor(J,aa),F.fillStyle=aa,F.textAlign="center",F.textBaseline="middle",Aa=0;Aa<a.length;Aa++)for(B=Y;B<L+ba&&B<X;B++)K=ia(B)-O/2,ta=fa(a[Aa][B]),aa=null==c||null==c[Aa]?"%0.1%K":
c[Aa],T="f",aa=V(a[Aa][B],T,aa),0<=a[Aa][B]?F.fillText(aa,K+M+pa*Aa+.1*pa+.8*pa/2,ta-7):F.fillText(aa,K+M+pa*Aa+.1*pa+.8*pa/2,ta+7);break;default:for(B=Y;B<L+ba&&B<X;B++){pa=[[0],[1]];if(2==a.length)1<a.length&&a[0][B]<a[1][B]&&(pa=[[1],[0]]);else if(2<a.length){pa=[];for(K=0;K<a.length;K++)pa[K]=[K,a[K][B]];pa.sort(createIndex)}for(Aa=0;Aa<a.length;Aa++)F.fillStyle=A?0<a[Aa][B]?aa.graph.colorShine:aa.graph.colorShade:T[pa[Aa][0]],K=ia(B)-O/2,ta=fa(a[pa[Aa][0]][B]),F.fillRect(K+M,Z,O,ta-Z),F.fill()}if(H)for(aa=
getChartGraphColor(J,aa),F.fillStyle=aa,F.textAlign="center",F.textBaseline="middle",Aa=0;Aa<a.length;Aa++)for(B=Y;B<L+ba&&B<X;B++)K=ia(B),ta=fa(a[Aa][B]),aa=null==c||null==c[Aa]?"%0.1%K":c[Aa],T="f",aa=V(a[Aa][B],T,aa),0<=a[Aa][B]?F.fillText(aa,K+M,ta-7):F.fillText(aa,K+M,ta+7)}F.closePath();F.restore()}};this.onMouseMove=function(F){}};formula_drawBmp.remark=function(){return"\u753b\u51fa\u56fe\u7247.\n    \u7528\u6cd5:\n     DRAWBMP(COND,PRICE,'Bmp\u6587\u4ef6\u540d'),\u5f53\u6761\u4ef6COND\u6ee1\u8db3\u65f6,\u5728PRICE\u4f4d\u7f6e\u753bT0002\u76ee\u5f55\u4e0b\u9762\u7684signals\u76ee\u5f55\u4e0b\u9762\u7684\"Bmp\u6587\u4ef6\u540d\";\n    \u4f8b\u5982:\n     DRAWBMP(O>C,CLOSE,'\u9ad8\u5f00');"};function formula_drawBmp(a,b){this.draw=function(c,g,k,q,f,p){}};formula_drawGradient.remark=function(){return"\u663e\u793a\u6e10\u53d8\u8272\u533a\u57df.\n    \u7528\u6cd5:\n     drawGradient(A, color1, B, color2, aAlpha). \u4ece\u503cA\u5230B\u7528\u6e10\u53d8\u8272\u586b\u5145\u6e10\uff0c\u989c\u8272\u4ececolor1\u5230color2\u6e10\u53d8\uff0c\u900f\u660e\u5ea6\u4e3aalpha(0-1)\n    \u4f8b\u5982:\n     drawGradient(High, colorRed, Low, colorGreen, 0.5);"};
function formula_drawGradient(a,b,c,g,k){var q=0,f,p,v;this.getLocateValueAtIndex=function(A){A>a.length-1&&(A=a.length-1);0>A&&(A=0);return a[A]};this.calcMaxMin=function(A,r){q=A;f=r;A=q;0>A&&(A=0);v=p=void 0;if(void 0!=a&&void 0!=c){if("number"==typeof a)p=v=a;else if("string"!=typeof a)for(r=A;r<a.length&&r<q+f;r++)void 0!=a[r]&&(void 0==p?p=v=a[r]:p<a[r]?p=a[r]:v>a[r]&&(v=a[r]));if("number"==typeof c)void 0==p?p=v=c:(p<c&&(p=c),v>c&&(v=c));else if("string"!=typeof c)for(r=A;r<c.length&&r<q+f;r++)void 0!=
c[r]&&(void 0==p?p=v=c[r]:p<c[r]?p=c[r]:v>c[r]&&(v=c[r]))}return{max:p,min:v}};this.draw=function(A,r,u,z,H,C){if(void 0!=a&&void 0!=c){A.save();A.lineWidth=1;r=a.length;var U=q;0>U&&(U=0);var J=C(p);if("top"==a||null==J||null==p)J=u.top;var G=C(v);if("bottom"==c||null==G||null==v)G=u.top+u.height;J=A.createLinearGradient(u.left,J,u.left,G);J.addColorStop(0,getChartGraphColor(b,z));J.addColorStop(1,getChartGraphColor(g,z));A.globalAlpha=k;A.fillStyle=J;z=0;J=H(U+1)-H(U);J=.5<J?1:Math.floor(1/J);if("number"==
typeof a&&"number"==typeof c){A.beginPath();var B=H(U);u=C(a);A.moveTo(B,u);B=H(U+f);A.lineTo(B,u);u=C(c);A.lineTo(B,u);B=H(U);A.lineTo(B,u);u=C(a);A.moveTo(B,u);A.fill();A.closePath()}else if("number"==typeof a||"number"==typeof c||"string"==typeof a||"string"==typeof c){if("number"==typeof a||"string"==typeof a){var L=a;G=c}else L=c,G=a;for(L="top"==L?u.top:"bottom"==L?u.top+u.height:C(L);U<q+f&&U<r;U+=J)if(void 0==G[U])0<z&&(A.lineTo(B,L),A.lineTo(ba,L),A.fill(),A.closePath()),z=0;else{B=H(U);
u=C(G[U]);if(0==z){var ba=B;A.beginPath();A.moveTo(B,u)}else A.lineTo(B,u);z++}0<z&&(A.lineTo(B,L),A.lineTo(ba,L),A.fill(),A.closePath())}else{for(;U<q+f&&U<r;U+=J)if(void 0==a[U]||void 0==c[U]){if(0<z)for(ba=1;ba<z;ba+=J)B=H(U-ba),u=C(c[U-ba]),A.lineTo(B,u),A.fill(),A.closePath();z=0}else B=H(U),u=C(a[U]),0==z?(A.beginPath(),A.moveTo(B,u)):A.lineTo(B,u),z++;if(0<z)for(ba=1;ba<z;ba+=J)B=H(U-ba),u=C(c[U-ba]),A.lineTo(B,u),A.fill(),A.closePath()}A.restore()}}};formula_drawIcon.remark=function(){return"\u7ed8\u5236\u5c0f\u56fe\u6807.\n    \u7528\u6cd5:\n     DRAWICON(COND,PRICE,TYPE),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE\u4f4d\u7f6e\u753bTYPE\u53f7\u56fe\u6807(TYPE\u4e3a1--46).\n    \u4f8b\u5982:\n     DRAWICON(CLOSE>OPEN,LOW,1)\u8868\u793a\u5f53\u6536\u9633\u65f6\u5728\u6700\u4f4e\u4ef7\u4f4d\u7f6e\u753b1\u53f7\u56fe\u6807."};function formula_drawIcon(a,b,c){this.draw=function(g,k,q,f,p,v){}};formula_drawKLine.remark=function(){return"DRAWKLINE(HIGH,OPEN,LOW,CLOSE).\n    \u7528\u6cd5:\n     \u4ee5HIGH\u4e3a\u6700\u9ad8\u4ef7,OPEN\u4e3a\u5f00\u76d8\u4ef7,LOW\u4e3a\u6700\u4f4e,CLOSE\u6536\u76d8\u753bK\u7ebf"};
function formula_drawKLine(a,b,c,g,k,q,f,p){p=void 0===p?"colorKText":p;var v=void 0===q?"colorShine":q,A=void 0===f?"colorShade":f,r=void 0===k?null:k,u=0,z,H,C,U,J,G=2;a.type&&(k=/x/g.exec(a.type))&&(G=Number(a.type[k.index+1]));this.getLocateValueAtIndex=function(B){if(g)return B>g.length-1&&(B=g.length-1),0>B&&(B=0),g[B]};this.getOpen=function(){return a};this.getClosestValueAtIndex=function(B,L,ba,N){for(var E=0;4>E;E++)if(ba=0==E?b:1==E?c:2==E?g:a,0<=B&&B<ba.length&&null!=ba[B]){var V=N(ba[B]);
if(V<=L+3&&V>=L-3)return ba[B]}return null};this.calcMaxMin=function(B,L){if(null==b||null==c)C=H=null;else{u=B;z=L;B=u;0>B&&(B=0);H=b[B]?b[B]:null;C=c[B]?c[B]:null;U=J=B;for(B+=1;B<a.length&&B<u+z;B++)a[B]&&b[B]&&c[B]?(b[B]&&(void 0==H||H<b[B])&&(H=b[B],U=B),c[B]&&(void 0==C||C>c[B])&&(C=c[B],J=B)):g[B]&&(void 0==H||H<g[B])?(H=g[B],U=B):g[B]&&(void 0==C||C>g[B])&&(C=g[B],J=B);return{max:H,min:C,top:20,bottom:20}}};this.draw=function(B,L,ba,N,E,V){if(null!=a&&null!=H&&null!=C){var F=!0;r?F="empty"==
r?!0:!1:1==xGlobal.emptyK&&(F=!0);ba=[];ba[0]=getChartGraphColor(v,N);ba[1]=getChartGraphColor(A,N);ba[2]=getChartGraphColor(p,N);B.save();B.lineWidth=1;var M=a.length,X=u;0>X&&(X=0);var aa=E(),ia=.6*aa,fa=ia/2;2>L&&(ia=parseInt(ia),1<ia&&(1==ia%2&&(ia++,ia>=aa&&(ia-=2)),fa=Math.floor(ia/2),1>fa&&(ia=1)));if(1>=ia)for(aa=2;0<=aa;aa--){B.beginPath();B.strokeStyle=ba[aa];for(var T=0,Y=X;Y<u+z&&Y<M;Y++)if(g[Y]&&a[Y]&&!(0==aa&&(g[Y]<a[Y]||g[Y]==a[Y])||1==aa&&(g[Y]>a[Y]||g[Y]==a[Y])||2==aa&&g[Y]!=a[Y])){var O=
E(Y);if(a[Y]&&b[Y]&&c[Y]){0<T&&(T=0,B.stroke(),B.closePath(),B.beginPath());var K=V(b[Y]),Z=V(c[Y]);K==Z?(B.moveTo(O,K),B.lineTo(O,Z+1)):(B.moveTo(O,K),B.lineTo(O,Z))}else K=V(g[Y]),0==T?(B.closePath(),B.beginPath(),B.moveTo(O,K)):B.lineTo(O,K),T++}B.stroke();B.closePath()}else{var pa=0;for(aa=2;0<=aa;aa--){B.beginPath();B.strokeStyle=ba[aa];B.fillStyle=ba[aa];T=0;for(Y=X;Y<u+z&&Y<M;Y++)if(g[Y]&&a[Y]&&!(0==aa&&(g[Y]<a[Y]||g[Y]==a[Y])||1==aa&&(g[Y]>a[Y]||g[Y]==a[Y])||2==aa&&g[Y]!=a[Y])){O=E(Y);var oa=
V(g[Y]);if(a[Y]&&b[Y]&&c[Y]){0<T&&(T=0,B.stroke(),B.closePath(),B.beginPath());var Aa=a[Y]?V(a[Y]):oa;K=b[Y]?V(b[Y]):oa;Z=c[Y]?V(c[Y]):oa;F&&g[Y]>a[Y]?(B.moveTo(O,K),B.lineTo(O,oa),B.moveTo(O,Aa),B.lineTo(O,Z),B.rect(O-fa,Aa,ia,oa-Aa)):(B.moveTo(O,K),B.lineTo(O,Z),2==aa&&g[Y]==a[Y]?(B.moveTo(O-fa,Aa),B.lineTo(O+fa,Aa),B.stroke()):Aa==oa?2>L?(B.moveTo(O-fa-.5,Aa),B.lineTo(O-fa-.5+ia+1,Aa)):(B.moveTo(O-fa,Aa-.5),B.lineTo(O-fa+ia+1,Aa)):2>L?B.fillRect(O-fa-.5,Aa-.5,ia+1,oa-Aa+1):B.fillRect(O-fa,Aa,ia,
oa-Aa))}else pa++,0==T?(B.closePath(),B.beginPath(),B.moveTo(O,oa)):B.lineTo(O,oa),T++}B.stroke();B.closePath()}if(0<pa)for(aa=1;0<=aa;aa--){B.beginPath();B.strokeStyle=ba[aa];B.fillStyle=ba[aa];T=0;for(Y=X;Y<u+z&&Y<M;Y++)!g[Y]||!a[Y]||0==aa&&(g[Y]<a[Y]||g[Y]==a[Y]&&(0==Y||0<Y&&g[Y]<g[Y-1]))||1==aa&&(g[Y]>a[Y]||g[Y]==a[Y]&&0<Y&&g[Y]>g[Y-1])||(O=E(Y),oa=V(g[Y]),a[Y]&&b[Y]&&c[Y]?0<T&&(T=0,B.stroke(),B.closePath(),B.beginPath()):(0==T?(B.closePath(),B.beginPath(),B.moveTo(O,oa)):B.lineTo(O,oa),T++));
B.stroke();B.closePath()}}B.restore();null!=ba[2]&&(B.save(),B.font="12px "+xGlobal.systemFont,B.fillStyle=ba[0],L=E(U),F=V(H),M=B.measureText(H.toFixed(G)),F=1==N.scale.scaleReverse?F+4:F-18,0>L-M.width/2-2&&(L=M.width/2+2),fillRoundRect(B,L-M.width/2-2,F,M.width+4,14,2,N.chart.backgroundColor,ba[0]),B.fillStyle=ba[1],E=E(J),V=V(C),M=B.measureText(C.toFixed(G)),V=1==N.scale.scaleReverse?V-18:V+4,0>E-M.width/2-2&&(E=M.width/2+2),fillRoundRect(B,E-M.width/2-2,V,M.width+4,14,2,N.chart.backgroundColor,
ba[1]),B.shadowBlur=0,B.textBaseline="middle",B.textAlign="center",B.fillStyle=ba[0],B.fillText(H.toFixed(G),L,F+7),B.fillStyle=ba[1],B.fillText(C.toFixed(G),E,V+7),B.restore())}}};formula_drawLastValue.remark=function(){return"\u663e\u793a\u6700\u65b0\u503c.\n    \u7528\u6cd5:\n     drawLastValue(X, Text, color, fontName, fontSize, fontBold, fontItalic, backgroundColor, format, showValue)\n    \u4f8b\u5982:\n     "};
function formula_drawLastValue(a,b,c,g,k,q,f,p,v,A){var r=void 0==c?"#f00":c,u=void 0==g?xGlobal.systemFont:g,z=void 0==k?12:parseInt(k),H=void 0==A?!0:A;this.calcMaxMin=function(C,U){C=0;a&&(C=a[a.length-1]);return{max:C,min:C}};this.draw=function(C,U,J,G,B,L){if(void 0!=a){C.save();C.font=""+z+"px "+u;J=0;a&&(J=a[a.length-1]);L=L(J);if(void 0!=L){var ba=a.length,N=U="";N=null!=v?N+getValueFormatString(J,"",v,null):N+J;b&&(U=b+","+N);0==H&&(U=b);if(null==U)return;B=B(ba)+1;J=C.measureText(U).width;
ba=getChartGraphColor(r,G);void 0!=p&&(J={left:B-2,top:L-z/2-2,width:J+4,height:z+4},G=getChartGraphColor(p,G),fillRoundRect(C,J.left,J.top,J.width,J.height,2,G,ba,{backgroundColorAlpha:.75}));C.beginPath();C.fillStyle=ba;C.textAlign="left";C.textBaseline="middle";C.fillText(U,B,L);C.closePath()}C.restore()}}};formula_drawLine.remark=function(){return"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u7ed8\u5236\u76f4\u7ebf\u6bb5.\n    \u7528\u6cd5:\n     DRAWLINE(COND1,PRICE1,COND2,PRICE2,EXPAND),\u5f53COND1\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE1\u4f4d\u7f6e\u753b\u76f4\u7ebf\u8d77\u70b9,\u5f53COND2\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE2\u4f4d\u7f6e\u753b\u76f4\u7ebf\u7ec8\u70b9,EXPAND\u4e3a\u5ef6\u957f\u7c7b\u578b.\n    \u4f8b\u5982:\n     DRAWLINE(HIGH>=HHV(HIGH,20),HIGH,LOW<=LLV(LOW,20),LOW,1)\u8868\u793a\u5728\u521b20\u5929\u65b0\u9ad8\u4e0e\u521b20\u5929\u65b0\u4f4e\u4e4b\u95f4\u753b\u76f4\u7ebf\u5e76\u4e14\u5411\u53f3\u5ef6\u957f.\n    "};
function formula_drawLine(a,b,c,g,k,q,f,p,v,A,r,u){g=void 0===g?2:g;var z=a;f=void 0===f?0:f;var H=this,C=0,U;this.name=b;this.dec=g;this.checked=void 0===r?!0:r;this.lineColor=void 0===c?"#f00":c;this.lineWidth=void 0===k?1:k;this.lineType=void 0===q?"solid":q;(this.beginValue=void 0===p?null:p)&&"Array"==this.beginValue.constructor.name&&1==this.beginValue.length&&null==this.beginValue[0]&&(this.beginValue=null);this.segmentIndex=void 0===u?null:u;this.format=void 0===v?null:v;this.boundParam=void 0===
A?null:A;this.param=null;if(0<f&&void 0!=z)if(f>z.length)z=void 0;else{for(b=z.length-1;0<=b;b--)z[b+f]=z[b];for(b=0;b<f;b++)z[b]=void 0}this.getName=function(){return H.name};this.getValueAtIndex=function(J){return void 0==z?{value:null,dec:0,color:H.lineColor,flag:null}:void 0===z[J]?{value:null,dec:null,color:H.lineColor,flag:0}:{value:z[J],dec:this.getDec(),color:H.lineColor,flag:z[J]>z[J-1]?1:-1}};this.getDec=function(){return g=-1==H.dec?a&&a.type?parseInt(a.type[1]):2:H.dec};this.getValue=
function(){return z};this.getClosestValueAtIndex=function(J,G,B,L){return z&&0<=J&&J<z.length&&null!=z[J]&&(B=L(z[J]),B<=G+3&&B>=G-3)?z[J]:null};this.getLocateValueAtIndex=function(J){if(void 0!=z)return J>z.length-1&&(J=z.length-1),0>J&&(J=0),z[J]};this.setBoundParamValue=function(J){this.param=J};this.calcMaxMin=function(J,G){var B=H.lineType.toLowerCase();if(void 0!=z&&0!==H.lineColor&&"noline"!=B.toLowerCase()&&"nodraw"!=B.toLowerCase()&&0!=H.checked){var L;C=J;U=G;J=C;0>J&&(J=0);if(void 0!=H.beginValue){var ba=
L=H.beginValue[0];for(G=1;G<H.beginValue.length;G++)ba<H.beginValue[G]&&(ba=H.beginValue[G]),L>H.beginValue[G]&&(L=H.beginValue[G])}for(G=J;G<z.length&&G<C+U;G++)void 0!=z[G]&&(void 0==ba?ba=L=z[G]:ba<z[G]?ba=z[G]:L>z[G]&&(L=z[G]));return{max:ba,min:L}}};this.draw=function(J,G,B,L,ba,N){var E=H.lineType.toLowerCase();if(void 0!=z&&0!==H.lineColor&&"noline"!=E&&"nodraw"!=E&&""!=E&&0!=H.checked){J.save();J.lineWidth=H.lineWidth;G=z.length;var V=C;0>V&&(V=0);var F=1,M=ba(),X=5;J.beginPath();var aa=getChartGraphColor(H.lineColor,
L);J.strokeStyle=aa;J.fillStyle=aa;J.lineJoin="bevel";switch(E){case "colorstick":var ia=N(0);ia>B.top+B.height?ia=B.top+B.height:ia<B.top&&(ia=B.top);B=[];B[0]=getChartGraphColor("colorShine",L);B[1]=getChartGraphColor("colorShade",L);for(X=0;2>X;X++){J.beginPath();J.strokeStyle=B[X];for(aa=V;aa<C+U&&aa<G;aa++)if(void 0!=z[aa]){var fa=ba(aa);var T=N(z[aa]);if(0==X&&0<z[aa]||1==X&&0>z[aa])J.moveTo(fa,ia),J.lineTo(fa,T)}J.stroke();J.closePath()}break;case "cross":case "crossdot":X=.6*M;5<X&&(X=5);
for(aa=V;aa<C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.moveTo(fa-X/2,T-X/2),J.lineTo(fa+X,T+X),J.moveTo(fa-X/2,T+X),J.lineTo(fa+X,T-X/2));break;case "circledot":X=.6*M;5<X&&(X=5);for(aa=V;aa<C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.moveTo(fa+X/2,T),J.arc(fa,T,X/2,0,2*Math.PI));break;case "pointdot":case "ball":L.chart&&(J.strokeStyle=L.chart.backgroundColor);J.lineWidth=1;X=.6*M;5<X&&(X=5);for(aa=V;aa<C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.beginPath(),J.arc(fa,
T,(X+H.lineWidth)/2,0,2*Math.PI),J.fill(),J.stroke(),J.closePath());break;case "square":for(aa=V;aa<C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.moveTo(fa-X/2,T),J.lineTo(fa,T-X/2),J.lineTo(fa+X/2,T),J.lineTo(fa,T+X/2),J.lineTo(fa-X/2,T),J.lineTo(fa,T-X/2));break;case "triangle":for(aa=V;aa<C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.moveTo(fa-X/2,T+X/2),J.lineTo(fa,T-X/2),J.lineTo(fa+X/2,T+X/2),J.lineTo(fa-X/2,T+X/2),J.lineTo(fa,T-X/2));break;case "invertedtriangle":for(aa=V;aa<
C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.moveTo(fa-X/2,T-X/2),J.lineTo(fa,T+X/2),J.lineTo(fa+X/2,T-X/2),J.lineTo(fa-X/2,T-X/2),J.lineTo(fa,T+X/2));break;case "horiline":for(aa=V;aa<C+U&&aa<G;aa++)void 0!=z[aa]&&(fa=ba(aa),T=N(z[aa]),J.moveTo(fa-X/2,T),J.lineTo(fa+X/2,T));break;case "linestock":if(this.segmentIndex&&1<this.segmentIndex.length)for(X=1,aa=V;aa<C+U&&aa<G;aa++){if(X<this.segmentIndex.length&&aa==this.segmentIndex[X][1]){if(void 0!=H.beginValue){var Y=0<aa?ba(aa)-M/2:B.left;
ia=N(H.beginValue[X]);var O=H.beginValue[X]}X++}void 0==z[aa]?O=H.beginValue[0]:(fa=ba(aa),T=N(z[aa]),void 0!=O&&(J.beginPath(),J.strokeStyle=z[aa]>O?getChartGraphColor("colorUp",L):z[aa]<O?getChartGraphColor("colorDown",L):getChartGraphColor("colorHold",L),J.moveTo(Y,ia),J.lineTo(fa,T),J.stroke(),J.closePath()),Y=fa,ia=T,O=z[aa])}else for(void 0!=H.beginValue&&(Y=B.left,ia=N(H.beginValue[0]),O=H.beginValue[0]),aa=V;aa<C+U&&aa<G;aa++)void 0==z[aa]?O=void 0:(fa=ba(aa),T=N(z[aa]),void 0!=O&&(J.beginPath(),
J.strokeStyle=z[aa]>O?getChartGraphColor("colorUp",L):z[aa]<O?getChartGraphColor("colorDown",L):getChartGraphColor("colorHold",L),J.moveTo(Y,ia),J.lineTo(fa,T),J.stroke(),J.closePath()),Y=fa,ia=T,O=z[aa]);break;default:switch(E){case "linedash":J.setLineDash([5,3]);break;case "linedashdot":J.setLineDash([5,4,2,4]);break;case "linedot":J.setLineDash([2]);break;default:J.setLineDash([0])}if(this.segmentIndex&&1<this.segmentIndex.length)for(X=1,aa=V;aa<C+U&&aa<G;aa++)X<this.segmentIndex.length&&aa==
this.segmentIndex[X][1]&&(L=null!=H.beginValue&&null!=H.beginValue[X]?H.beginValue[X]:z[aa],fa=0<aa?ba(aa)-M/2:B.left,T=N(L),J.moveTo(fa,T),F=0,X++),void 0==z[aa]?"chain"!=E&&(F=1):(fa=ba(aa),T=N(z[aa]),1==F?(J.moveTo(fa,T),F=0):J.lineTo(fa,T));else{void 0!=H.beginValue&&(fa=B.left,T=N(H.beginValue[0]?H.beginValue[0]:H.beginValue),J.moveTo(fa,T),F=0);for(aa=V;aa<C+U&&aa<G;aa++)void 0==z[aa]?"chain"!=E&&(F=1):(fa=ba(aa),T=N(z[aa]),1==F?(J.moveTo(fa,T),F++):J.lineTo(fa,T));2==F&&J.lineTo(fa+.5,T)}}J.stroke();
J.closePath();J.restore()}}};formula_drawMarkLine.remark=function(){return""};var getLineSet=function(a){var b=1;a=a.split(" ");a[0]&&"1"<=a[0][0]&&"9">=a[0][0]&&(b=parseInt(a[0][0]));return{width:b,type:a[1],color:a[2]?a[2]:"#888"}};
function formula_drawMarkLine(a,b,c,g,k,q){var f=void 0===g?"center":g,p=void 0===q?null:q,v,A,r,u;this.getLocateValueAtIndex=function(z){return a[a.length-1]};this.getClosestValueAtIndex=function(z,H,C,U){return a[a.length-1]};this.setGraphicRect=function(z){r=z.left;u=z.left+z.width};this.calcMaxMin=function(z,H){if(null==a||0==a.length)A=v=null;else return v=a[a.length-1],A=a[a.length-1],{max:v,min:A,top:0,bottom:0}};this.draw=function(z,H,C,U,J,G){null!=a&&0!=a.length&&(H=getLineSet(c),z.save(),
z.lineWidth=H.width,C=a[a.length-1],z.beginPath(),z.strokeStyle=H.color,G=G(C),z.moveTo(r,G),z.lineTo(u,G),z.stroke(),z.closePath(),"right"==f?(z.moveTo(u+1,G),z.lineTo(u+6,G-8),z.lineTo(u+60,G-8),z.lineTo(u+60,G+8),z.lineTo(u+6,G+8),z.lineTo(u+1,G),z.fillStyle=H.color,z.fill(),z.fillStyle=U.graph.backgroundColor,z.textBaseline="middle",z.textAlign="left",U=getValueFormatString(C,null,p),z.fillText(U,u+6,G)):"left"==f&&(z.moveTo(r-1,G),z.lineTo(r-6,G-8),z.lineTo(r-60,G-8),z.lineTo(r-60,G+8),z.lineTo(r-
6,G+8),z.lineTo(r-1,G),z.fillStyle=H.color,z.fill(),z.fillStyle=U.graph.backgroundColor,z.textBaseline="middle",z.textAlign="right",U=getValueFormatString(C,null,p),z.fillText(U,r-6,G)),z.restore())}};formula_drawNumberFix.remark=function(){return"\u56fa\u5b9a\u4f4d\u7f6e\u663e\u793a\u6570\u5b57.\n    \u7528\u6cd5:\n     DRAWNUMBER_FIX(COND,X,Y,TYPE,NUMBER),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728\u5f53\u524d\u6307\u6807\u7a97\u53e3\u5185(X,Y)\u4f4d\u7f6e\u4e66\u5199\u6570\u5b57NUMBER,X,Y\u4e3a\u4e66\u5199\u70b9\u5728\u7a97\u53e3\u4e2d\u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u767e\u5206\u6bd4,TYPE:0\u4e3a\u5de6\u5bf9\u9f50,1\u4e3a\u53f3\u5bf9\u9f50.\n    \u4f8b\u5982:\n     DRAWNUMBER_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,C)\u8868\u793a\u6700\u540e\u4e00\u4e2a\u4ea4\u6613\u65e5\u5b9e\u4f53\u9633\u7ebf\u5927\u4e8e8%\u65f6\u5728\u7a97\u53e3\u4e2d\u95f4\u4f4d\u7f6e\u663e\u793a\u6536\u76d8\u4ef7."};
function formula_drawNumberFix(a,b,c,g,k,q,f,p){function v(G,B,L,ba,N){G.beginPath();G.fillStyle=getChartGraphColor(C,N);G.fillText(ba,B,L);G.closePath()}var A=["start","end","center"][g],r=0,u=a,z,H=0,C=void 0==q?"#f00":q,U=void 0==f?12:parseInt(f),J=void 0==p?xGlobal.systemFont:p;"Number"==u.constructor.name&&(H=1,u=u?1:void 0);this.draw=function(G,B,L,ba,N,E){if(void 0!=u&&void 0!=k){C=getChartGraphColor(C,ba);G.save();B=r;0>B&&(B=0);G.font=""+U+"px "+J;G.textAlign=A?A:"center";if("String"==k.constructor.name){k.toLowerCase();
var V=L.top}else"Number"==k.constructor.name&&(V=E(k));if(void 0!=V)if(H)for(N=B;N<r+z;N++)G.measureText(k);else for(E=u.length,N=B;N<r+z&&N<E;N++)void 0!=u[N]&&0!=u[N]&&(G.measureText(k),B=L.left+L.width*b,V=L.top+L.height*c-U/2,v(G,B,V,k,ba));else if(H)for(E=k.length,N=B;N<r+z&&N<E;N++)void 0!=u[N]&&(G.measureText(k),B=L.left+L.width*b,V=L.top+L.height*c-U/2,v(G,B,V,k,ba));else for(E=u.length,N=B;N<r+z&&N<E;N++)void 0!=u[N]&&0!=u[N]&&void 0!=k[N]&&(B=L.left+L.width*b,V=L.top+L.height*c-U/2,v(G,
B,V,k,ba));G.restore()}};this.calcMaxMin=function(G,B){r=G;z=B;var L=r;0>L&&(L=0);G=B=void 0;if(void 0!=u&&null!=k&&"String"!=k.constructor.name)if("Number"==k.constructor.name)G=B=k;else if(H){var ba=k.length;for(L+=1;L<ba&&L<r+z;L++)void 0!=k[L]&&(void 0==G&&(G=B=k[L]),G<k[L]?G=k[L]:B>k[L]&&(B=k[L]))}else for(ba=u.length,L+=1;L<ba&&L<r+z;L++)void 0!=u[L]&&0!=u[L]&&void 0!=k[L]&&(void 0==G&&(G=B=k[L]),G<k[L]?G=k[L]:B>k[L]&&(B=k[L]));return{max:G,min:B}}};formula_drawNumber.remark=function(){return"\u753b\u51fa\u6570\u5b57.\n    \u7528\u6cd5:\n     DRAWNUMBER(COND,PRICE,NUMBER),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE\u4f4d\u7f6e\u4e66\u5199\u6570\u5b57NUMBER.\n    \u4f8b\u5982:\n     DRAWNUMBER(CLOSE/OPEN>1.08,LOW,C)\u8868\u793a\u5f53\u65e5\u5b9e\u4f53\u9633\u7ebf\u5927\u4e8e8%\u65f6\u5728\u6700\u4f4e\u4ef7\u4f4d\u7f6e\u663e\u793a\u6536\u76d8\u4ef7."};
function formula_drawNumber(a,b,c,g){function k(r,u,z,H,C){r.beginPath();r.fillStyle=getChartGraphColor(A,C);r.fillText(H,u,z);r.closePath()}var q=0,f=a,p,v=0,A=void 0==g?"#f00":g;"Number"==f.constructor.name&&(v=1,f=f?1:void 0);this.draw=function(r,u,z,H,C,U){if(void 0!=f&&void 0!=b){A=getChartGraphColor(A,H);r.save();u=q;0>u&&(u=0);if("String"==b.constructor.name){b.toLowerCase();var J=z.top}else"Number"==b.constructor.name&&(J=U(b));if(void 0!=J)if(v)for(var G=u;G<q+p;G++){var B=b[G];void 0!=B&&
(u=C(G),k(r,u,J,B,H))}else for(z=f.length,G=u;G<q+p&&G<z;G++)void 0!=f[G]&&0!=f[G]&&(B=b[G],void 0!=B&&(u=C(G),k(r,u,J,B,H)));else if(v)for(z=b.length,G=u;G<q+p&&G<z;G++)void 0!=b[G]&&(B=t,void 0!=B&&(u=C(G),J=U(b[G]),k(r,u,J,B,H)));else for(z=f.length,G=u;G<q+p&&G<z;G++)void 0!=f[G]&&0!=f[G]&&void 0!=b[G]&&(B=b[G],void 0!=B&&(u=C(G),J=U(b[G]),k(r,u,J,B,H)));r.restore()}};this.calcMaxMin=function(r,u){q=r;p=u;var z=q;0>z&&(z=0);r=u=void 0;if(void 0!=f&&null!=b&&"String"!=b.constructor.name)if("Number"==
b.constructor.name)r=u=b;else if(v){var H=b.length;for(z+=1;z<H&&z<q+p;z++)void 0!=b[z]&&(void 0==r&&(r=u=b[z]),r<b[z]?r=b[z]:u>b[z]&&(u=b[z]))}else for(H=f.length,z+=1;z<H&&z<q+p;z++)void 0!=f[z]&&0!=f[z]&&void 0!=b[z]&&(void 0==r&&(r=u=b[z]),r<b[z]?r=b[z]:u>b[z]&&(u=b[z]));return{max:r,min:u}}};formula_drawPloyLine.remark=function(){return"\u7ed8\u5236\u6298\u7ebf\u6bb5.\n    \u7528\u6cd5:\n     PLOYLINE(COND,PRICE),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u4ee5PRICE\u4f4d\u7f6e\u4e3a\u9876\u70b9\u753b\u6298\u7ebf\u8fde\u63a5.\n    \u4f8b\u5982:\n     PLOYLINE(HIGH>=HHV(HIGH,20),HIGH)\u8868\u793a\u5728\u521b20\u5929\u65b0\u9ad8\u70b9\u4e4b\u95f4\u753b\u6298\u7ebf\n    "};function formula_drawPloyLine(a,b){this.draw=function(c,g,k,q,f,p){}};formula_drawRect.remark=function(){return"\u753b\u77e9\u5f62.\n    \u7528\u6cd5:\n     DRAWRECT(startIndex, topPrice, endIndex, bottomPrice, COLOR).\n    \u4f8b\u5982:\n     DRAWRECT(0, 10.9 , 50, 9.5, RGB(255,255,0))\u8868\u793a\u5728\u56fe\u5f62\u7528\u9ec4\u8272\u7ed8\u5236\u77e9\u5f62."};
function formula_drawRect(a,b,c,g,k){this.draw=function(q,f,p,v,A,r,u){if(null!=k&&null!=a&&null!=c&&null!=b&&null!=g){f=0;var z=15,H=A(1)-A(0);if("left"==a)var C=p.left;else"chartLeft"==a?C=u.left:"Array"==a.constructor.name?(f=a.length,z&=-2):C=A(a)-H/2;if("right"==c&&null!=C)var U=p.width+p.left-C;else"chartRight"==c&&null!=C?U=u.width+u.left-C:"Array"==c.constructor.name?f&&f<c.length&&(f=c.length,z&=-3):null!=C&&(U=A(c)-C+H/2);if("top"==b)var J=p.top;else"chartTop"==b?J=u.top:"Array"==b.constructor.name?
f&&f<b.length&&(f=b.length,z&=-5):J=r(b);if("bottom"==g&&null!=J)var G=p.height;else"chartBottom"==g&&null!=J?G=u.height+u.top-J:"Array"==g.constructor.name?f&&f<g.length&&(f=g.length,z&=-9):null!=J&&(G=J-r(g));q.save();q.beginPath();q.lineWidth=1;var B=C,L=J,ba=U,N=G;q.fillStyle=getChartGraphColor(k,v);if(0==f)q.fillRect(B,L,ba,N);else for(v=0;v<f;v++)null==C&&null!=a[v]&&(B=A(a[v])-H/2,z|=1),null==U&&("right"==c?(ba=p.width+p.left-B+H/2,z|=2):"chartRight"==c?(ba=u.width+u.left-B+H/2,z|=2):null!=
c[v]&&(ba=A(c[v])-B+H/2,z|=2)),null==J&&null!=b[v]&&(L=r(b[v]),z|=4),null==G&&null!=g[v]&&(N=r(g[v])-L,z|=8),15!=z||B>p.left+p.width||B+ba<p.left||(B<p.left&&(ba-=p.left-B,B=p.left),ba+B>p.left+p.width&&(ba=p.left+p.width-B),q.fillRect(B,L,ba,N));q.closePath();q.restore()}}};formula_drawRectRel.remark=function(){return"\u76f8\u5bf9\u4f4d\u7f6e\u4e0a\u753b\u77e9\u5f62.\n    \u7528\u6cd5:\n     DRAWRECTREL(LEFT,TOP,RIGHT,BOTTOM,COLOR),\u4ee5\u56fe\u5f62\u7a97\u53e3(LEFT,TOP)\u4e3a\u5de6\u4e0a\u89d2,(RIGHT,BOTTOM)\u4e3a\u53f3\u4e0b\u89d2\u7ed8\u5236\u77e9\u5f62,\u5750\u6807\u5355\u4f4d\u662f\u7a97\u53e3\u6cbf\u6c34\u5e73\u548c\u5782\u76f4\u65b9\u5411\u76841/1000,\u53d6\u503c\u8303\u56f4\u662f0\u2014999,\u8d85\u51fa\u8303\u56f4\u5219\u53ef\u80fd\u663e\u793a\u5728\u56fe\u5f62\u7a97\u53e3\u5916,\u77e9\u5f62\u4e2d\u95f4\u586b\u5145\u989c\u8272COLOR,COLOR\u4e3a0\u8868\u793a\u4e0d\u586b\u5145.\n    \u4f8b\u5982:\n     DRAWRECTREL(0,0,500,500,RGB(255,255,0))\u8868\u793a\u5728\u56fe\u5f62\u6700\u5de6\u4e0a\u90e81/4\u4f4d\u7f6e\u7528\u9ec4\u8272\u7ed8\u5236\u77e9\u5f62."};
function formula_drawRectRel(a,b,c,g,k){this.draw=function(q,f,p,v,A,r){null!=k&&(q.save(),q.beginPath(),q.lineWidth=1,f=p.left+a,A=p.top+b,r=c/1E3*p.width,p=g/1E3*p.height,q.fillStyle=getChartGraphColor(k,v),q.fillRect(f,A,r,p),q.closePath(),q.restore())}};formula_drawSL.remark=function(){return"\u7ed8\u5236\u659c\u7ebf.\n    \u7528\u6cd5:\n        DRAWSL(COND,PRICE,SLOPE,LEN,DIRECT),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE\u4f4d\u7f6e\u753b\u659c\u7ebf,SLOPE\u4e3a\u659c\u7387,LEN\u4e3a\u957f\u5ea6,DIRECT\u4e3a0\u5411\u53f3\u5ef6\u4f38,1\u5411\u5de6\u5ef6\u4f38,2\u53cc\u5411\u5ef6\u4f38.\n    \u6ce8\u610f:\n    1.K\u7ebf\u95f4\u7684\u7eb5\u5411\u9ad8\u5ea6\u5dee\u4e3aSLOPE;\n    2.SLOPE\u4e3a0\u65f6,\u4e3a\u6c34\u5e73\u7ebf;\n    3.SLOPE\u4e3a10000\u65f6,\u4e3a\u5782\u76f4\u7ebf,LEN\u4e3a\u5411\u4e0a\u7684\u50cf\u7d20\u9ad8\u5ea6,DIRECT\u8868\u793a\u5411\u4e0a\u6216\u5411\u4e0b\u5ef6\u4f38;\n    4.SLOPE\u548cLEN\u652f\u6301\u53d8\u91cf;\n    "};
function formula_drawSL(a,b,c,g,k){this.draw=function(q,f,p,v,A,r){}};formula_stickLine.remark=function(){return"\u7ed8\u5236\u67f1\u7ebf.\n    \u7528\u6cd5:\n     STICKLINE(COND,PRICE1,PRICE2,WIDTH,EMPTY),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE1\u548cPRICE2\u4f4d\u7f6e\u4e4b\u95f4\u753b\u67f1\u72b6\u7ebf,\u5bbd\u5ea6\u4e3aWIDTH(10\u4e3a\u6807\u51c6\u95f4\u8ddd),EMPTY\u4e3a0\u753b\u5b9e\u5fc3\u67f1,-1\u753b\u865a\u7ebf\u7a7a\u5fc3\u67f1,\u5426\u5219\u753b\u5b9e\u7ebf\u7a7a\u5fc3\u67f1.\n    \u4f8b\u5982:\n     STICKLINE(CLOSE>OPEN,CLOSE,OPEN,0.8,1)\u8868\u793a\u753bK\u7ebf\u4e2d\u9633\u7ebf\u7684\u7a7a\u5fc3\u67f1\u4f53\u90e8\u5206."};
function formula_stickLine(a,b,c,g,k,q,f,p){var v=void 0===k?1:k,A=(void 0===g?.6:g)/10,r=this,u=0,z,H,C;this.getClosestValueAtIndex=function(U,J,G,B){return 0<=U&&U<b.length&&null!=b[U]&&(G=B(b[U]),G<=J+3&&G>=J-3)?b[U]:0<=U&&U<c.length&&null!=c[U]&&(G=B(c[U]),G<=J+3&&G>=J-3)?c[U]:null};this.getLocateValueAtIndex=function(U){U>c.length-1&&(U=c.length-1);0>U&&(U=0);return c[U]};this.calcMaxMin=function(U,J){var G;if(void 0!=a&&void 0!=b&&void 0!=c){u=U;z=J;U=u;0>U&&(U=0);if(void 0!=r.beginValue){var B=
G=r.beginValue[0];for(J=1;J<r.beginValue.length;J++)B<r.beginValue[J]&&(B=r.beginValue[J]),G>r.beginValue[J]&&(G=r.beginValue[J])}if("object"!=typeof a){if(0!=a){if("number"==typeof b)B=G=b;else for(J=U;J<b.length&&J<u+z;J++)void 0!=b[J]&&(void 0==B?B=G=b[J]:(B<b[J]&&(B=b[J]),G>b[J]&&(G=b[J])));if("number"==typeof c)void 0==B?B=G=c:(B<c&&(B=c),G>c&&(G=c));else for(J=U;J<c.length&&J<u+z;J++)void 0!=c[J]&&(void 0==B?B=G=c[J]:(B<c[J]&&(B=c[J]),G>c[J]&&(G=c[J])))}}else{if("number"==typeof b)B=G=b;else for(J=
U;J<b.length&&J<u+z;J++)a[J]&&void 0!=b[J]&&(void 0==B?B=G=b[J]:(B<b[J]&&(B=b[J]),G>b[J]&&(G=b[J])));if("number"==typeof c)void 0==B?B=G=c:(B<c&&(B=c),G>c&&(G=c));else for(J=U;J<c.length&&J<u+z;J++)a[J]&&void 0!=c[J]&&(void 0==B?B=G=c[J]:(B<c[J]&&(B=c[J]),G>c[J]&&(G=c[J])))}}return{max:B,min:G}};this.draw=function(U,J,G,B,L,ba){if(void 0!=a&&void 0!=b&&void 0!=c&&0!==q){void 0!=f&&(H=[],C=[]);U.save();var N=a.length;G=u;0>G&&(G=0);U.beginPath();B=getChartGraphColor(q,B);U.strokeStyle=B;U.fillStyle=
B;B=L()*A;2>J&&(B=Math.floor(B),1<B&&(1==B%2&&B++,J=Math.floor(B/2),1>J&&(B=1)));J=B/2;378===v?(J=0,B/=2,B++):-378===v&&(J=B/2+1,B/=2,B++);U.lineWidth=1>B?.5:1;if("object"!=typeof a&&0!=a)if("number"==typeof b&&"number"==typeof c)for(var E=ba(b),V=ba(c),F=G;F<u+z&&F<N;F++){var M=L(F);U.rect(M-J,E,B,V-E)}else if("number"==typeof b)for(E=ba(b),N=c.length,F=G;F<u+z&&F<N;F++){if(void 0!=c[F]&&(M=L(F),V=ba(c[F]),U.rect(M-J,E,B,V-E),G={},G.left=M-J,G.top=E,G.width=B,G.height=V-E,G.index=F,void 0!=H)){if(null!=
f){V=f.tipModel;M=f.tipValue;for(var X=0;X<M.length;X++){var aa=M[X];V=V.replace("{{ "+X+" }}",aa[F]);V=V.replace("{{ "+X+" }}",aa[F])}H[F]=V}C[C.length]=G}}else if("number"==typeof c)for(V=ba(c),N=b.length,F=G;F<u+z&&F<N;F++)void 0!=b[F]&&(M=L(F),E=ba(b[F]),U.rect(M-J,E,B,V-E));else for(N=c.length,F=G;F<u+z&&F<N;F++)void 0!=b[F]&&void 0!=c[F]&&(M=L(F),E=ba(b[F]),V=ba(c[F]),U.rect(M-J,E,B,V-E));else if("number"==typeof b&&"number"==typeof c)for(E=ba(b),V=ba(c),F=G;F<u+z&&F<N;F++)void 0!=a[F]&&0!=
a[F]&&(M=L(F),U.rect(M-J,E,B,V-E));else if("number"==typeof b)for(E=ba(b),N=c.length,F=G;F<u+z&&F<N;F++)void 0!=a[F]&&0!=a[F]&&void 0!=c[F]&&(M=L(F),0!=c[F]||0!=b)&&(V=ba(c[F]),U.rect(M-J,E,B,V-E));else if("number"==typeof c)for(V=ba(c),N=b.length,F=G;F<u+z&&F<N;F++)void 0!=a[F]&&0!=a[F]&&void 0!=b[F]&&(M=L(F),0!=b[F]||0!=c)&&(E=ba(b[F]),U.rect(M-J,E,B,V-E));else for(N=c.length,F=G;F<u+z&&F<N;F++)void 0!=a[F]&&0!=a[F]&&void 0!=b[F]&&void 0!=c[F]&&(M=L(F),E=ba(b[F]),V=ba(c[F]),U.rect(M-J,E,B,V-E));
U.stroke();0==v&&1<B&&U.fill();U.closePath();U.restore()}};this.getTip=function(U,J,G){if(void 0!=a&&void 0!=C)for(U=0;U<C.length;U++)if(J>=C[U].left&&J<=C[U].left+C[U].width&&G>=(0>C[U].height?C[U].top+C[U].height:C[U].top)&&G<=(0>C[U].height?C[U].top:C[U].height+C[U].top))return{pos:p,data:H[C[U].index]}}};formula_drawTextFix.remark=function(){return"\u56fa\u5b9a\u4f4d\u7f6e\u663e\u793a\u6587\u5b57;\u5728\u6307\u6807\u6392\u5e8f\u4e2d\u663e\u793a\u5b57\u7b26\u4e32\u680f\u76ee.\n    \u7528\u6cd5:\n     DRAWTEXT_FIX(COND,X,Y,TYPE,TEXT),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728\u5f53\u524d\u6307\u6807\u7a97\u53e3\u5185(X,Y)\u4f4d\u7f6e\u4e66\u5199\u6587\u5b57TEXT,X,Y\u4e3a\u4e66\u5199\u70b9\u5728\u7a97\u53e3\u4e2d\u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u767e\u5206\u6bd4,TYPE:0\u4e3a\u5de6\u5bf9\u9f50,1\u4e3a\u53f3\u5bf9\u9f50.\n    \u4f8b\u5982:\n     DRAWTEXT_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,'\u5927\u9633\u7ebf')\u8868\u793a\u6700\u540e\u4e00\u4e2a\u4ea4\u6613\u65e5\u5b9e\u4f53\u9633\u7ebf\u5927\u4e8e8%\u65f6\u5728\u7a97\u53e3\u4e2d\u95f4\u4f4d\u7f6e\u663e\u793a'\u5927\u9633\u7ebf'\u5b57\u6837."};
function formula_drawTextFix(a,b){this.draw=function(c,g,k,q,f,p){}};formula_drawText.remark=function(){return"\u663e\u793a\u6587\u5b57;\u5728\u6307\u6807\u6392\u5e8f\u4e2d\u663e\u793a\u5b57\u7b26\u4e32\u680f\u76ee.\n    \u7528\u6cd5:\n     DRAWTEXT(COND,PRICE,TEXT),\u5f53COND\u6761\u4ef6\u6ee1\u8db3\u65f6,\u5728PRICE\u4f4d\u7f6e\u4e66\u5199\u6587\u5b57TEXT.\n    \u4f8b\u5982:\n     DRAWTEXT(CLOSE/OPEN>1.08,LOW,'\u5927\u9633\u7ebf')\u8868\u793a\u5f53\u65e5\u5b9e\u4f53\u9633\u7ebf\u5927\u4e8e8%\u65f6\u5728\u6700\u4f4e\u4ef7\u4f4d\u7f6e\u663e\u793a'\u5927\u9633\u7ebf'\u5b57\u6837."};
function formula_drawText(a,b,c,g,k,q,f,p,v,A,r,u,z,H,C,U,J,G){var B=a,L,ba,N=void 0==k?"left":k,E=void 0==q?"top":q,V=void 0==f?0:parseInt(f),F=void 0==p?"#f00":p,M=void 0==v?2:parseInt(v),X=void 0==A?xGlobal.systemFont:A,aa=void 0==r?12:parseInt(r),ia=0,fa;"Number"==B.constructor.name&&(ia=1,B=B?1:void 0);this.getLocateValueAtIndex=function(O){O>B.length-1&&(O=B.length-1);0>O&&(O=0);return c[O]};this.calcMaxMin=function(O,K){L=O;ba=K;var Z=L;0>Z&&(Z=0);O=K=void 0;if(void 0!=B&&null!=b&&"String"!=
b.constructor.name)if("Number"==b.constructor.name)O=K=b;else if(ia){var pa=b.length;for(Z+=1;Z<pa&&Z<L+ba;Z++)void 0!=b[Z]&&(void 0==O&&(O=K=b[Z]),O<b[Z]?O=b[Z]:K>b[Z]&&(K=b[Z]))}else for(pa=B.length,Z+=1;Z<pa&&Z<L+ba;Z++)void 0!=B[Z]&&0!=B[Z]&&void 0!=b[Z]&&(void 0==O&&(O=K=b[Z]),O<b[Z]?O=b[Z]:K>b[Z]&&(K=b[Z]));return{max:O,min:K}};var T=function(O){if("Number"==O.constructor.name){var K;J&&G&&(K={unit:J,unitName:G});O=getValueFormatStringWithProp(O,"f"+M,C,null,K)}else null!=C&&(O=getValueFormatString(O,
"t",C,null));return O};this.draw=function(O,K,Z,pa,oa,Aa){if(void 0!=B&&void 0!=b&&void 0!=c){void 0!=g&&(fa=[]);O.save();var ta=L;0>ta&&(ta=0);O.font=""+aa+"px "+X;K=0;var Q;"Array"==c.constructor.name&&(K=1);"String"==b.constructor.name?"top"==b.toLowerCase()?Q=Z.top:"bottom"==b.toLowerCase()&&(Q=Z.top+Z.height-15):"Number"==b.constructor.name&&(Q=Aa(b));if(void 0!=Q)if(ia)for(var sa=ta;sa<L+ba;sa++){var ra=1==K?c[sa]:c;void 0!=ra&&(ta=oa(sa),ra=T(ra),Y(O,ta,Q,ra,sa,pa))}else for(Z=B.length,sa=
ta;sa<L+ba&&sa<Z;sa++)void 0!=B[sa]&&0!=B[sa]&&(ra=1==K?c[sa]:c,void 0!=ra&&(ta=oa(sa),ra=T(ra),Y(O,ta,Q,ra,sa,pa)));else if(ia)for(Z=b.length,sa=ta;sa<L+ba&&sa<Z;sa++)void 0!=b[sa]&&(ra=1==K?c[sa]:c,void 0!=ra&&(ta=oa(sa),Q=Aa(b[sa]),Q+=V,ra=T(ra),Y(O,ta,Q,ra,sa,pa)));else for(Z=B.length,sa=ta;sa<L+ba&&sa<Z;sa++)void 0!=B[sa]&&0!=B[sa]&&void 0!=b[sa]&&(ra=1==K?c[sa]:c,void 0!=ra&&(ta=oa(sa),Q=Aa(b[sa]),Q+=V,ra=T(ra),Y(O,ta,Q,ra,sa,pa)));O.restore()}};var Y=function(O,K,Z,pa,oa,Aa){var ta=O.measureText(pa).width;
oa={left:K,top:Z,width:ta+4,height:aa+4,index:oa};"center"==N?oa.left-=oa.width/2-1:"right"==N&&(oa.left-=oa.width-2);"middle"==E?oa.top-=oa.height/2:"bottom"==E&&(oa.top-=oa.height);void 0!=H&&(O.beginPath(),O.fillStyle=getChartGraphColor(H,Aa),O.fillRect(oa.left,oa.top,oa.width,oa.height),O.closePath(),O.fillStyle=getChartGraphColor(F,Aa));O.beginPath();O.fillStyle=getChartGraphColor(F,Aa);void 0!=N&&(O.textAlign=N);void 0!=E&&(O.textBaseline=E);O.fillText(pa,K,Z);O.closePath();void 0!=g&&(fa[fa.length]=
oa)};this.getTip=function(O,K,Z){if(void 0!=B&&void 0!=fa)for(O=0;O<fa.length;O++)if(K>=fa[O].left&&K<=fa[O].left+fa[O].width&&Z>=fa[O].top&&Z<=fa[O].top+fa[O].height)return{pos:U,data:g[fa[O].index]}}};function getChartGraphColor(a,b){return"string"!=typeof a?"#666":"#"==a.substr(0,1)||"transparent"==a||"rgb"==a.slice(0,3).toLowerCase()?a:b.graph[a]}
function getFormulaScript(a){for(var b=0;b<formulaScript.length;b++)if(a==formulaScript[b].id){a="";for(var c=0;c<formulaScript[b].script.length;c++)a=";"!=formulaScript[b].script[c][formulaScript[b].script[c].length-1]?a+(formulaScript[b].script[c]+";\n"):a+(formulaScript[b].script[c]+"\n");var g="";if(formulaScript[b].note)for(c=0;c<formulaScript[b].note.length;c++)g+=formulaScript[b].note[c]+"\n";return{script:a,formulaName:formulaScript[b].name,formulaNote:g}}return""}
function getFormulaForScript(a){if(!a)return"";for(var b="",c=0;c<a.script.length;c++)b+=a.script[c]+"\n";var g="";if(a.note)for(c=0;c<a.note.length;c++)g+=a.note[c]+"\n";return{script:b,formulaName:a.name,formulaNote:g}};var onBulletStop0=function(){xGlobal.fillText.onBulletStop(0)},onBulletStop1=function(){xGlobal.fillText.onBulletStop(1)},onBulletStop2=function(){xGlobal.fillText.onBulletStop(2)},onBulletStop3=function(){xGlobal.fillText.onBulletStop(3)},onBulletStop4=function(){xGlobal.fillText.onBulletStop(4)},onBulletStop5=function(){xGlobal.fillText.onBulletStop(5)};
function xBarrage(a,b){function c(E){var V=document.createElement("style"),F=document.head||document.getElementsByTagName("head")[0];V.type="text/css";if(V.styleSheet){var M=function(){try{V.styleSheet.cssText=E}catch(X){console.log(X)}};V.styleSheet.disabled?setTimeout(M,10):M()}else M=document.createTextNode(E),V.appendChild(M);F.appendChild(V);return V}var g=this,k,q={show:!0,tip:{show:!1,width:200,field:"",padding:"5px",borderRadius:2,zIndex:2E3,backgroundColor:"rgba(25,25,26,1)",border:"1px solid rgba(58,58,63,1)",
color:"#eee",font:"10px Helvetica Neue,sans-serif",boxShadow:"0px 0px 6px #000"},model:"default",backgroundColor:["rgba(255,255,255,0.1)","transparent","transparent","transparent","rgba(255,255,255,0.1)"],border:["transparent","transparent","transparent","transparent","transparent"],padding:"2px 5px;2px 5px;2px 5px;2px 5px;2px 5px;2px 5px;2px 5px".split(";"),borderRadius:[0,0,0,0,0],maxLines:4,time:[40,30,20,10,5],lineHeight:32,top:32,content:[{table:"news1",option:{wheelOnFocus:!1,isFocus:!0,isClick:!1,
isWheel:!1,isKeyDown:!1,canMouseSelected:!1,backgroundColor:"transparent",borderColor:"transparent",color:"#eee",colors:["rgba(255,255,255,1)","#FF503B","#72FFBE","#fff"],cursor:{backgroundColor:"transparent"},fontFamily:xGlobal.systemFont,fontSize:14,lineHeight:16,dragable:!1,marginLeft:1,marginRight:1,marginTop:1,marginBottom:1,enableFocus:!1,setDefaultFocusObject:!1,keyEnenterTab:!1,tabKey:"",enterOrder:[],tabOrder:[],scroller:{scrollerV:"hidden",scrollerH:"hidden",backgroundColor:"#ddd",sliderColor:"#444",
activeSliderColor:"#000"}},grid:[],condition:"type='insert'"}]},f,p,v,A,r=[],u=!1,z;this.flayLayer;this.show=function(){q.show=!0;L()};this.hidden=function(){q.show=!1;for(var E=a.document.getElementById("mainBody"),V=0;V<U.length;V++)null!=U[V]&&(E.removeChild(U[V]),U[V]=null,J[V]=null,r[V]=null);z.width=z.height=1};this.autoChangeState=function(){q.show=1==q.show?!1:!0;1==q.show?g.show():g.hidden()};this.onMouseDown=function(E){g.autoChangeState();H()};var H=function(){var E=z.parentElement.offsetWidth,
V=z.parentElement.offsetHeight;null==k&&(k=z.getContext("2d"));var F=getPixelRatio(k);z.width=E*F;z.height=V*F;z.style.left=0;z.style.top=0;z.style.width=E+"px";z.style.height=V+"px";1<F&&k.setTransform(F,0,0,F,0,0);k.translate(.5,.5);k.beginPath();k.font="12px Helvetica Nenu";k.textBaseline="middle";k.textAlign="center";k.fillStyle=q.colors[0];k.closePath()},C=function(E,V){var F=z.getContext("2d");F.font=V;return F.measureText(E).width},U=[],J=[],G,B=!1;this.destroy=function(){for(var E=0;E<U.length;E++)bdy.removeChild(U[E]);
U=null};this.setQuery=function(E){v=xDeepCopy(E);g.query()};this.setScheme=function(E,V){if(E!=f||V!=p)f=E,p=V,E.xFlyText&&((aOption=E.xFlyText.normal)&&xCopyAllTo(aOption,q),this.chengeShowbulletScheme())};this.chengeShowbulletScheme=function(){for(var E=0;E<U.length;E++)U[E]&&(U[E].style.color=q.colors[E],U[E].style.backgroundColor=q.backgroundColor[E],U[E].style.border=q.border[E]),r[E]&&r[E].grid&&(r[E].grid.setOption(q.content[r[E].grid.tableIndex].option),r[E].grid.draw(!0))};this.setOption=
function(E){xCopyAllTo(E,q);(E=xMe.getSystemScheme())&&g.setScheme(E);1==q.tip.show&&""!=q.tip.field&&(E=a.document.getElementById("xBarrageTipBox"),null==E&&(E=a.document.createElement("div"),E.id="xBarrageTipBox",E.style.display="none",E.style.pointerEvents="none",E.style.zIndex=q.tip.zIndex,E.style.position="absolute",E.style.width=q.tip.width+"px",E.style.backgroundColor=q.tip.backgroundColor,E.style.color=q.tip.color,E.style.border=q.tip.border,E.style.borderRadius=parseInt(q.tip.borderRadius)+
"px",E.style.boxShadow=q.tip.boxShadow,E.style.padding=q.tip.padding,E.style.font=q.tip.font,a.document.getElementById("mainBody").appendChild(E)),g.tip=E)};this.query=function(){for(var E=!1,V=0,F=0;F<v.length;F++)if(null==v[F]||v[F].queryStatus)v[F]&&1==v[F].queryStatus&&(v[F].queryStatus=2);else{var M=[-1,4*q.maxLines],X;if(v[F].server&&""!=v[F].server){var aa=v[F].server.slice(10);b&&b[aa]&&""!=b[aa]&&(X=b[aa])}var ia;v[F].http&&(ia=replaceVariablesValue(v[F].http,b,A));if(v[F].sql&&(null==ia||
"http"!=ia.substr(0,4).toLowerCase()))aa=replaceVariablesValue(v[F].sql,b,A),""==aa||0<=aa.indexOf("{{ ")||v[F].server&&null==X||null!=v[F].query&&v[F].query.script==aa||(E=isSynBound=!0,v[F].queryStatus=1,v[F].query={script:aa,limit:M,server:X});else if(v[F].http&&ia&&""!=ia){v[F].field&&replaceVariablesValue(v[F].field,b,A);var fa=v[F].script?replaceVariablesValue(v[F].script,b,A):replaceVariablesValue(v[F].condition,b,A);null==fa||""==fa||0<=fa.indexOf("{{ ")||(aa=";"+fa,null!=v[F].query&&aa==
v[F].query.script)||(null!=v[F].query&&aa==v[F].query.script||queryId++,v[F].query={script:aa,limit:M,field:"",condition:fa,id:queryId,server:ia},v[F].queryStatus=1,g.callbacks.sendHttpQuery(g.queryIndex,v,F,g.setTable),V++)}}E&&sendMessage("query",xGlobal.frame.getFrameId(),"barrage","0",v,g.setTable)};this.setTable=function(E,V,F){A=xDeepCopy(E);if(v&&A)for(var M=0;M<v.length;M++)v[M]&&A[M]&&A[M].updateCounter!=v[M].updateCounter&&(v[M].updateCounter=A[M].updateCounter,v[M].callback_onMessage&&
v[M].callback_onMessage(A[M],V,F,getCallback_Param(),A),v[M].queryStatus=null,refreshCounter=xGlobal.refreshCounter);if(A&&A[0])var X=A[0].table;if(X&&X.field&&X.data&&0<X.data.length)for(G=[],V=0;V<E.length;V++){var aa=F=void 0;E[V]&&E[V].gid&&E[V].gid.name&&(F=E[V].gid.name);for(M=0;M<q.content.length;M++)if(q.content[M].table==F){q.content[M].condition&&(aa=q.content[M].condition);a:{F=X;var ia=F.info.totalRows-1;if(null!=aa&&(aa=aa.split("="),2<=aa.length)){var fa=aa[0];var T=aa[1]}for(;0<=ia&&
G.length<q.maxLines;){aa={row:G.length,tableIndex:M,data:[],dataStatus:F.dataStatus,field:F.field,flags:F.flags,info:xDeepCopy(F.info)};for(var Y=!0,O=0;O<F.field.length;O++){var K=F.field[O][0],Z=getFieldData({field:K},ia,A,null,null);if(K==fa&&Z.value!=trimSingle(T)){if(ia==F.info.totalRows-1&&1==u){F=!1;break a}Y=!1;break}"col"==aa.info.rank&&(aa.data[O]=[Z.value]);aa[K]=Z}ia--;Y&&(aa.info.begin=0,aa.info.dataBegin=0,aa.info.dataRange=1,aa.info.dataRows=1,aa.info.rows=1,aa.info.thisBegin=1,aa.info.totalRows=
1,G[G.length]=aa)}F=[];M=G.length-1;for(ia=0;0<=M;M--,ia++)F[ia]=G[M],F[ia].row=ia;G=F;F=u=!0}if(0==F)return;L();break}}else G=null;g.query();H()};var L=function(){if(0==B)if(B=!0,"newsModel"==q.model)for(var E=0,V=q.maxLines-1;0<=V;V--){if(null!=G&&null!=G[V]){if(2==E)break;ba(V);E++}}else ba();else if("default"==q.model)for(E=0;E<U.length;E++)null==U[E]&&ba(E);else if("newsModel"==q.model)for(E=q.maxLines-1;0<=E;E--)if(null==U[E]&&null!=G){G[E]=G[G.length-1];ba(E);break}},ba=function(E){if(G&&0<
G.length)for(var V=0;V<G.length;V++){var F=G[V];if(null!=E){if(E==V&&null!=F){N(V,F);break}}else null!=F&&N(V,F)}},N=function(E,V){function F(ra){for(var la=document.getElementsByTagName("head")[0],Na=ra.target.animationCss,Wa=0;Wa<Na.length;Wa++)la.removeChild(Na[Wa]);ra.target.remove();ra=ra.target.bulletRow;J[ra]=null;U[ra]=null;r[ra].cnvs.remove();r[ra].cnvs=null;r[ra].grid.destroy();r[ra].grid=null}if(1==q.show){var M=a.document.getElementById("mainBody"),X=M.offsetWidth;if(!(0>=X)){var aa=q.content[V.tableIndex],
ia=a.document.createElement("canvas");ia.className="xBarrageGrid";var fa=a.document.createAttribute("style");fa.value="position:absolute;margin:0px;padding:0px;left:0px; top:0px; right:0px; bottom:0px;pointer-events:none;";ia.setAttributeNode(fa);fa=new xGrid(a,null,ia);fa.tableIndex=V.tableIndex;fa.setOption(aa.option);for(var T=xDeepCopy(aa.grid),Y=aa.option.fontSize+"px "+aa.option.fontFamily,O=0,K=0;K<T.length;K++)for(var Z=T[K],pa={},oa=0;oa<Z.length;pa={$jscomp$loop$prop$obj$515:pa.$jscomp$loop$prop$obj$515},
oa++){pa.$jscomp$loop$prop$obj$515=Z[oa];if(null!=pa.$jscomp$loop$prop$obj$515.width)O+=pa.$jscomp$loop$prop$obj$515.width;else if(pa.$jscomp$loop$prop$obj$515.field){var Aa=function(ra){return function(la,Na){Na&&(la=getValueFormatString(la.value,la.type,Na,null));la=C(la.value?la.value:la,Y);450<la&&(la=350,ra.$jscomp$loop$prop$obj$515.maxLines=1);ra.$jscomp$loop$prop$obj$515.width=la;O+=la}}(pa),ta=V[pa.$jscomp$loop$prop$obj$515.field.toLowerCase()],Q=pa.$jscomp$loop$prop$obj$515.format;if(ta&&
ta.value&&""!=ta.value)Aa(ta,Q);else if(pa.$jscomp$loop$prop$obj$515.spareField)for(var sa=0;sa<pa.$jscomp$loop$prop$obj$515.spareField.length;sa++)if((ta=V[pa.$jscomp$loop$prop$obj$515.spareField[sa].toLowerCase()])&&ta.value&&""!=ta.value){Aa(ta,Q);break}}else pa.$jscomp$loop$prop$obj$515.title&&(Aa=C(pa.$jscomp$loop$prop$obj$515.title,Y),pa.$jscomp$loop$prop$obj$515.width=Aa,O+=Aa);if("Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform)pa.$jscomp$loop$prop$obj$515.top=
1.5}fa.setGrid({vBox:T});r[E]={cnvs:ia,grid:fa};T=[];Z=q.time[E];K=[.3*X,.3*X,.3*X,.35*X,.4*X,.4*X];null==J[E]&&(J[E]=!0,Z=".barrageBullet"+E+"{\n                animation: barrageBullet"+E+" "+Z+"s;\n                animation-timing-function: linear;\n\n                -webkit-animation: barrageBullet"+E+" "+Z+"s;\n                -webkit-animation-timing-function: linear;\n            }",K=c("@-webkit-keyframes barrageBullet"+E+" \n                        {\n                            from {\n                                opacity:1;\n                                -webkit-transform: translate("+
(X+K[E])+"px,0); \n                                transform: translate("+(X+K[E])+"px,0); \n                            }\n                            to {\n                                opacity:1;\n                                -webkit-transform: translate(0px,0); \n                                transform: translate(0px,0); \n                            }\n                        }"),Z=c(Z),T.push(K),T.push(Z));U[E]=a.document.createElement("div");U[E].style="display:none; overflow:visiable; position:absolute;z-index:2021; text-align:center; left:"+
X+"px;";M.appendChild(U[E]);U[E].appendChild(ia);U[E].animationCss=T;U[E].style.top=q.top+q.lineHeight*E+10*E+"px";U[E].style.height=aa.option.fontSize+6+"px";U[E].style.color=q.colors[E];U[E].style.backgroundColor=q.backgroundColor[E];U[E].style.border=q.border[E];U[E].style.borderRadius=q.borderRadius[E]+"px";U[E].style.padding=q.padding[E];U[E].style.display="block";U[E].style.cursor="default";U[E].style.width=O+6+"px";U[E].style.left=-(O+10)+"px";U[E].bulletRow=E;U[E].rowData=V;U[E].cssText="width:"+
O+"px";U[E].onmousemove=function(ra){ra.target.style.cursor="default";ra.target.style.webkitAnimationPlayState="paused";null!=ra.target.rowData&&null!=g.tip&&g.moveShowTip(ra)};U[E].onmouseout=function(ra){ra.target.style.cursor="default";ra.target.style.webkitAnimationPlayState="running";null!=ra.target.rowData&&null!=g.tip&&g.moveHiddenTip(ra)};U[E].addEventListener("webkitAnimationEnd",F);U[E].addEventListener("animationend",F);fa.setTable([{table:V}]);U[E].className="barrageBullet"+E}}};this.moveShowTip=
function(E){E;var V=E.clientX,F=E.clientY,M=q.tip.field.toLowerCase();E=E.target.rowData[M].value;M=parseInt(g.tip.style.width);var X=document.body.clientWidth;M+V>X&&(V=X-M-40);g.tip.style.left=V+20+"px";g.tip.style.top=F+20+"px";g.tip.innerHTML=E;g.tip.style.display="block";g.tip.style.backgroundColor=q.tip.backgroundColor;g.tip.style.color=q.tip.color;g.tip.style.border=q.tip.border};this.moveHiddenTip=function(E){g.tip.style.display="none"};(function(){g.flayLayer=a.document.createElement("div");
var E=a.document.createAttribute("style");E.value="display:none; overflow:visiable; position:absolute; right:12px; top:13px; width:20px; height:20px; z-index:2020;";g.flayLayer.setAttributeNode(E);a.document.getElementById("mainBody").appendChild(g.flayLayer);z=a.document.createElement("canvas");E=a.document.createAttribute("style");E.value="position:absolute;margin:0px;padding:0px;display:none;";z.setAttributeNode(E);g.flayLayer.appendChild(z);z.addEventListener("mousedown",g.onMouseDown)})()};var getCallbacks=function(){return{openWidthBrowseCenter:function_openWithBrowseCenter}},cellGraphList={drawPie:drawPie.name,drawPilboy:drawPilboy.name,drawSubsection:drawSubsection.name,drawTextAutoLineForCompany:drawTextAutoLineForCompany.name,drawRoundCake:drawRoundCake.name,drawFilingsToolList:drawFilingsToolList.name,sureUI:sureUI.name,drawDashBoard:drawDashBoard.name};
function drawRoundRect(a,b,c,g,k,q,f){a.beginPath();a.arc(b+q,c+q,q,Math.PI,3*Math.PI/2);a.lineTo(g-q+b,c);a.arc(g-q+b,q+c,q,3*Math.PI/2,2*Math.PI);a.lineTo(g+b,k+c-q);a.arc(g-q+b,k-q+c,q,0,1*Math.PI/2);a.lineTo(q+b,k+c);a.arc(q+b,k-q+c,q,1*Math.PI/2,Math.PI);a.lineTo(b,c+q);a.strokeStyle=f;a.stroke();a.closePath()}
function fillRoundRect(a,b,c,g,k,q,f,p,v){a.save();a.beginPath();var A=[];A[0]=v&&null!=v.borderTopLeftRadius?v.borderTopLeftRadius:q;A[1]=v&&null!=v.borderTopRightRadius?v.borderTopRightRadius:q;A[2]=v&&null!=v.borderBottomRightRadius?v.borderBottomRightRadius:q;A[3]=v&&null!=v.borderBottomLeftRadius?v.borderBottomLeftRadius:q;0<A[0]?a.arc(b+A[0],c+A[0],A[0],Math.PI,3*Math.PI/2):a.moveTo(b,c);0<A[1]?a.arc(b+g-A[1],c+A[1],A[1],3*Math.PI/2,2*Math.PI):a.lineTo(b+g,c);0<A[2]?a.arc(g-A[2]+b,k-A[2]+c,
A[2],0,1*Math.PI/2):a.lineTo(b+g,c+k);0<A[3]?a.arc(A[3]+b,k-A[3]+c,A[3],1*Math.PI/2,Math.PI):a.lineTo(b,c+k);0<A[0]?a.lineTo(b,c+A[0]):a.lineTo(b,c);v&&v.boxShadow&&(b=v.boxShadow.split(" "),a.shadowBlur=parseInt(b[2]),a.shadowColor=b[3],a.shadowOffsetX=parseInt(b[0]),a.shadowOffsetY=parseInt(b[1]));v&&v.backgroundColorAlpha&&(a.globalAlpha=v.backgroundColorAlpha);a.fillStyle=f;a.fill();p&&"transparent"!=p&&(a.strokeStyle=p,a.stroke());a.globalAlpha=1;a.shadowBlur=0;a.shadowColor=0;a.shadowOffsetX=
0;a.shadowOffsetY=0;a.closePath();a.restore()}var setLineStyle=function(a,b){if(null!=b&&""!=b){b=b.split(" ");a.lineWidth=parseInt(b[0]);for(var c="",g=2;g<b.length;g++)c+=b[g]+" ";a.strokeStyle=c}};
function drawRect(a,b,c,g,k,q){a.save();a.beginPath();if(q&&q.boxShadow&&""!=q.boxShadow){var f=q.boxShadow.split(" ");a.shadowOffsetX=parseInt(f[0]);a.shadowOffsetY=parseInt(f[1]);a.shadowBlur=parseInt(f[2]);for(var p="",v=3;v<f.length;v++)p+=f[v]+" ";a.shadowColor=p}q&&q.backgroundColor&&""!=q.backgroundColor&&(a.fillStyle=q.backgroundColor);f=0;q&&0<parseInt(q.borderRadius)?(f=parseInt(q.borderRadius),a.arc(b+f,c+f,f,Math.PI,3*Math.PI/2),a.lineTo(g-f+b,c),a.arc(g-f+b,f+c,f,3*Math.PI/2,2*Math.PI),
a.lineTo(g+b,k+c-f),a.arc(g-f+b,k-f+c,f,0,1*Math.PI/2),a.lineTo(f+b,k+c),a.arc(f+b,k-f+c,f,1*Math.PI/2,Math.PI),a.lineTo(b,c+f),a.fill()):a.fillRect(b,c,g,k);q&&(""!=q.borderLeft&&q.borderLeft==q.borderTop&&q.borderLeft==q.borderRight&&q.borderLeft==q.borderBottom?(setLineStyle(a,q.borderLeft),a.stroke()):(a.closePath(),a.beginPath(),q.borderLeft&&""!=q.borderLeft&&(setLineStyle(a,q.borderLeft),a.moveTo(b,c+k-f),a.lineTo(b,c+f),a.stroke()),q.borderTop&&""!=q.borderTop&&(setLineStyle(a,q.borderTop),
a.moveTo(b+f,c),a.lineTo(b+g-f,c),a.stroke()),q.borderRight&&""!=q.borderRight&&(setLineStyle(a,q.borderRight),a.moveTo(b+g,c+f),a.lineTo(b+g,c+k-f),a.stroke()),q.borderBottom&&""!=q.borderBottom&&(setLineStyle(a,q.borderBottom),a.moveTo(b+g-f,c+k),a.lineTo(b+f,c+k),a.stroke())));a.closePath();a.restore()}
function drawBorder(a,b,c,g,k,q){0<q.radius?drawRoundRect(a,b,c,g,k,q.radius,q.left):(q.left&&""!=q.left&&(a.beginPath(),a.lineWidth=q.width,a.strokeStyle=q.left,a.moveTo(b,c+k),a.lineTo(b,c),a.stroke(),a.closePath()),q.top&&""!=q.top&&(a.beginPath(),a.lineWidth=q.width,a.strokeStyle=q.top,a.moveTo(b,c),a.lineTo(b+g,c),a.stroke(),a.closePath()),q.right&&""!=q.right&&(a.beginPath(),a.lineWidth=q.width,a.strokeStyle=q.right,a.moveTo(b+g,c),a.lineTo(b+g,c+k),a.stroke(),a.closePath()),q.bottom&&""!=q.bottom&&
(a.beginPath(),a.lineWidth=q.width,a.strokeStyle=q.bottom,a.moveTo(b+g,c+k),a.lineTo(b,c+k),a.stroke(),a.closePath()))}
var drawCheckBox=function(a,b,c,g,k,q,f,p){var v=b.width,A=b.height,r=b.radius?b.radius:2,u=b.left;b=b.top;v<2*r&&(r=v/2);if(1==p)return v+8;a.save();a.lineWidth=g;a.strokeStyle=k;c?(a.beginPath(),A<2*r&&(r=A/2),a.moveTo(u+r,b),a.arcTo(u+v,b,u+v,b+A,r),a.arcTo(u+v,b+A,u,b+A,r),a.arcTo(u,b+A,u,b,r),a.arcTo(u,b,u+v,b,r),a.fillStyle=void 0==q||null==q?"transparent":q,a.fill(),a.closePath(),a.beginPath(),a.strokeStyle=f,a.moveTo(u+.1*v,b+.5*A),a.lineTo(u+.35*v,b+.725*A),a.lineTo(u+.875*v,b+.225*A)):(a.beginPath(),
A<2*r&&(r=A/2),a.moveTo(u+r,b),a.arcTo(u+v,b,u+v,b+A,r),a.arcTo(u+v,b+A,u,b+A,r),a.arcTo(u,b+A,u,b,r),a.arcTo(u,b,u+v,b,r));a.stroke();a.closePath();a.restore()},isTextType=function(a){return null==a||"c"==a||"t"==a||"t"==a[0]&&"1"<=a[1]&&"9">=a[1]?!0:!1};
function getValueFormatString(a,b,c,g,k){var q=c&&"String"==c.constructor.name?!0:!1;if(null==a||""===a)return"-";if("%S"==c&&0==a)return"";if(g&&3==(g&3))return"-";if(0!=a&&""==a)return a;if("Array"==a.constructor.name){if("ti"==b){c="";for(b=0;b<a.length;b++)c+="["+getValueFormatString(a[b][0],"tm","HH:mm")+","+getValueFormatString(a[b][1],"tm","HH:mm")+"] ";return c}return JSON.stringify(a)}"%d"==c&&(b="i");var f=2;b&&("i"==b[0]?f=0:1<b.length&&(f=parseInt(b.slice(1))));var p=isTextType(b),v="Number"==
a.constructor.name?!0:!1;k&&k.unit&&1<k.unit&&v?(a/=k.unit,k=""+a,v=k.indexOf("."),b=0<=v?2<k.length-v-1?"f2":"f"+(k.length-v-1):"f"):(null==b||p)&&v&&(p=!1,k=""+a,v=k.indexOf("."),0<=v?(b="f"+(k.length-v-1),f=k.length-v-1):(b="f",f=0));k=a;if("function"===typeof c)return c(a);if(q){if(p){if("."==c[0]){if(p=a.indexOf("."),-1!=p)return a.slice(0,p)}else if("["==c[0])return v=parseInt(c.slice(1)),a.slice(0,v);return a}if(0==a&&0<=c.indexOf("%0"))return"-";p=c.indexOf("%B");0<=p&&(k=-1,null!=g&&(k=(g>>
5&7)-1),0>k&&(k=1<b.length?parseInt(b.slice(1)):0),k&&0<k&&(a/=Math.pow(10,k)),0>c.indexOf("%B.")&&(a=Math.round(a)));k=a;var A=c;for(v=0;8>v;v++)if(p=c.indexOf("%."+v),-1!=p){if("string"==typeof a)return q&&0<=c.indexOf("%%")&&a?a+"%":a;k=a.toFixed(v);q&&0<=c.indexOf("%%")&&(k+="%");f=v;break}-1!=c.indexOf("%V")&&(A=xGlobal.integerFormat,null==A&&(A="%5K"));p=A.indexOf("%,");if(0<=p){k+="";a=k.length;for(p=a-1;0<p;p--)if("."==k[p]){a=p;break}if(3<a)for(p=a-3;0<p&&"-"!=k.slice(0,p);p-=3)k=k.slice(0,
p)+","+k.slice(p);return k}p=0<=A.indexOf("%K")?0:0<=A.indexOf("%0K")?0:0<=A.indexOf("%1K")?1:0<=A.indexOf("%2K")?2:0<=A.indexOf("%3K")?3:0<=A.indexOf("%4K")?4:0<=A.indexOf("%5K")?5:0<=A.indexOf("%6K")?6:0<=A.indexOf("%7K")?7:0<=A.indexOf("%8K")?8:-1;if(0<=p){b=!1;0>a&&(a=Math.abs(a),b=!0);c="";1E3>a?(a.toString().indexOf("."),k=a.toFixed(f)):1E6>a?(0<p&&(f=3),k=(a/1E3).toFixed(f),c="K"):1E9>a?(0<p&&(f=3),k=(a/1E6).toFixed(f),c="M"):1E12>a?(0<p&&(f=3),k=(a/1E9).toFixed(f),c="B"):(0<p&&(f=3),k=(a/
1E12).toFixed(f),c="T");0==p||0==f||k.length<=p||f==f+p-k.length+1||(f=f+p-k.length+1,0>f&&(f=0),k=parseFloat(k).toFixed(f));1==b&&(k="-"+k);if(0<f&&1E3<a)for(f=k.length-1;0<f;f--)if("0"!=k[f]){k=k.substr(0,f+1);"."==k[k.length-1]&&(k=k.substr(0,k.length-1));break}return k+c}p=0<=A.indexOf("%W")?0:0<=A.indexOf("%0W")?0:0<=A.indexOf("%1W")?1:0<=A.indexOf("%2W")?2:0<=A.indexOf("%3W")?3:0<=A.indexOf("%4W")?4:0<=A.indexOf("%5W")?5:0<=A.indexOf("%6W")?6:0<=A.indexOf("%7W")?7:0<=A.indexOf("%8W")?8:-1;if("string"==
typeof a)return"-";if(0<=p)return b=!1,0>a&&(a=Math.abs(a),b=!0),c="",1E4>a?k=-1==a.toString().indexOf(".")?a:a.toFixed(f):1E8>a?(0<p&&(f=2),k=(a/1E4).toFixed(f),c="\u4e07"):(0<p&&(f=2),k=(a/1E8).toFixed(f),c="\u4ebf"),k=String(k),0<=f&&1E4>a&&-1E4<a&&-1==A.indexOf("%B.")&&-1<k.indexOf(".")&&(k=String(Math.round(Number(k)))),1==b&&(k="-"+k),k+c}if(void 0!=b){if("f"==b[0]||"x"==b[0])return null!=g&&0<(g>>5&7)&&(f=(g>>5&7)-1),q&&0<=c.indexOf("%+")&&0<=a?k="+"+a.toFixed(f):"number"==typeof a&&(k=a.toFixed(f)),
q&&0<=c.indexOf("%%")&&(k+="%"),k;if("i"==b[0]){if(q&&0<=c.indexOf("%+")&&0<=a)return"+"+k}else{if("d"==b)return a=""+a,a.slice(0,4)+"/"+a.slice(4,6)+"/"+a.slice(6,8);if("th"==b||"tm"==b||"ts"==b||"tms"==b||"dd"==b||"dm"==b||"dq"==b||"dy"==b){if("string"==typeof a)return a;g=!1;f=new Date;q="";29991231>a&&("dd"==b||"dm"==b||"dq"==b||"dy"==b)?(f.setFullYear(parseInt(a/1E4),parseInt(a/100%100)-1,parseInt(a%100)),g=!0):(f.setTime(a),a%=1E3,q=0==a?"000":10>a?"00"+a:100>a?"0"+a:""+a);0==g&&xGlobal.utcTime?
(a=f.getUTCFullYear()+"/"+getValidDateTime(f.getUTCMonth()+1)+"/"+getValidDateTime(f.getUTCDate()),b=getValidDateTime(f.getUTCHours())+":"+getValidDateTime(f.getUTCMinutes())+":"+getValidDateTime(f.getUTCSeconds())):(a=f.getFullYear()+"/"+getValidDateTime(f.getMonth()+1)+"/"+getValidDateTime(f.getDate()),b=getValidDateTime(f.getHours())+":"+getValidDateTime(f.getMinutes())+":"+getValidDateTime(f.getSeconds()));c&&"String"==c.constructor.name?"week_local"==c.toLowerCase()?k=xGlobal.weekString_local[f.getDay()]:
(k=c,0==g&&xGlobal.utcTime?(k=k.replace("YYYY",f.getUTCFullYear()),k=k.replace("YY",getValidDateTime(f.getUTCFullYear()%100)),k=k.replace("MM",getValidDateTime(f.getUTCMonth()+1)),k=k.replace("DD",getValidDateTime(f.getUTCDate())),k=k.replace("HH",getValidDateTime(f.getUTCHours())),k=k.replace("mm",getValidDateTime(f.getUTCMinutes())),k=k.replace("SS",getValidDateTime(f.getUTCSeconds())),k=k.replace("sss",q),k=k.replace("WEEK",xGlobal.weekString_local[f.getUTCDay()])):(k=k.replace("YYYY",f.getFullYear()),
k=k.replace("YY",getValidDateTime(f.getUTCFullYear()%100)),k=k.replace("MM",getValidDateTime(f.getMonth()+1)),k=k.replace("WEEK",xGlobal.weekString_local[f.getUTCDay()]),0==g?(k=k.replace("DD",getValidDateTime(f.getDate())),k=k.replace("HH",getValidDateTime(f.getHours())),k=k.replace("mm",getValidDateTime(f.getMinutes())),k=k.replace("SS",getValidDateTime(f.getSeconds())),k=k.replace("sss",q)):(k=k.replace("DD,",getValidDateTime(f.getDate())),k=k.replace("DD",getValidDateTime(f.getDate())),k=k.replace("HH:",
""),k=k.replace("mm:",""),k=k.replace("SS",""),k=k.replace("HH",""),k=k.replace("mm",""),k=k.replace("sss","")))):k=g?a:a+", "+b;return k}if("ti"==b)for(k="",p=0;p<a.length;p++)b=new Date,b.setTime(a[p][0]),f=new Date,f.setTime(a[p][1]),k+="["+getValidDateTime(b.getHours())+":"+getValidDateTime(b.getMinutes())+","+getValidDateTime(f.getHours())+":"+getValidDateTime(f.getMinutes())+"] "}}"string"==typeof c&&-1<c.indexOf("%S")&&0==Number(k)&&(k="");return k}
function getValueFormatStringWithProp(a,b,c,g,k){a=getValueFormatString(a,b,c,g,k);k&&null!=k.unit&&k.unitName&&(a="\u767e\u5206\u6bd4"==k.unitName?a+"%":a+k.unitName);return a}function getValidDateTime(a){return 10>a?"0"+a:""+a}
var createGrid_Variables=function(a,b,c){b=a.create.title.type.split(".");if(c[b[1]]){grid=[];c=c[b[1]];for(b=0;b<c.length;b++)if(0>=c[b].data.length)grid[b]={};else{grid[b]={title:c[b].title+":"};a.create.mark&&(grid[b].mark={values:[]},a.create.mark.color&&(grid[b].mark.color=a.create.mark.color));for(var g=0;g<c[b].data.length;g++){if(null!=a.create.maxMark&&g>a.create.maxMark-1){grid[b].title+=" ...";grid[b].mark&&(grid[b].mark.values[g]="...");break}grid[b].title+=" "+c[b].data[g].value;grid[b].mark&&
(grid[b].mark.values[g]=c[b].data[g].value)}grid[b].filter={name:c[b].name,value:c[b].value};for(var k in a.create)if("mark"!=k&&"title"!=k&&"tableName"!=k)if("option"==k){grid[b].option={};for(var q in a.create.option)grid[b].option[q]="Array"==a.create.option[q].constructor.name?"actionBounds"==q?xDeepCopy(a.create.option[q]):xDeepCopy(a.create.option[q][b]):a.create.option[q]}else"Array"==a.create[k].constructor.name?a.create[k][b]&&(grid[b][k]=a.create[k][b]):grid[b][k]=a.create[k]}return grid}},
createGrid_TableField=function(a,b){if(null!=b){if(a.create.title.fieldName){for(var c=0,g,k=0;k<a.create.title.fieldName.length;k++){var q=a.create.title.fieldName[k][0].split(".");var f=null;q[0]=q[0].toLowerCase();if(1==q.length)q[1]=q[0],b[0]&&(f=b[0].table);else{q[1]=q[1].toLowerCase();for(var p=0;p<b.length;p++)if(b[p]&&b[p].table&&b[p].table.info&&b[p].table.info.name.toLowerCase()==q[0]){f=b[p].table;break}}if(f)for(p=0;p<f.field.length;p++)if(f.field[p][0].toLowerCase()==q[1]){null==g&&(g=
[]);g[c]={type:a.create.type};g[c].title=null!=a.create.title.fieldName[k][1]?a.create.title.fieldName[k][1]:f.field[p][2]?f.field[p][2]:f.field[p][0];for(var v in a.create)if("option"==v){g[c].option={};for(var A in a.create.option)g[c].option[A]="Array"==a.create.option[A].constructor.name?a.create.option[A][c]:a.create.option[A]}else"title"!=v&&(g[c][v]=a.create[v]);g[c].createIndex=c;c++;break}}return g}if(a.create.tableName)for(p=0;p<b.length;p++){if(b[p]&&b[p].table&&b[p].table.info&&b[p].table.info.name&&
a.create.tableName.toLocaleLowerCase()==b[p].table.info.name.toLocaleLowerCase()){f=b[p].table;break}}else b[0]&&(f=b[0].table);if(f&&"col"!=a.rank){g=[];for(k=c=0;k<b.length;k++)if(null!=b[k]){null==a.create.tableName&&(f=b[k].table);if(f&&1!=f.info.noChartData&&f.field)for(p=0;p<f.field.length;p++)if("i"==f.field[p][1][0]||"f"==f.field[p][1][0]||"x"==f.field[p][1][0]||"t"==f.field[p][1][0]){g[c]={type:a.create.type};g[c].title=f.field[p][2]?f.field[p][2]:f.field[p][0];for(v in a.create)if("option"==
v)for(A in g[c].option={},a.create.option)g[c].option[A]=a.create.option[A]&&"Array"==a.create.option[A].constructor.name?a.create.option[A][c]:a.create.option[A];else"title"!=v&&(g[c][v]=a.create[v]);g[c].createIndex=c;c++}if(a.create.tableName)break}return g}}},createGrid_TableData=function(a,b){var c;if(b)if(a.create.tableName)for(c=0;c<b.length;c++){if(b[c]&&b[c].table&&b[c].table.info&&b[c].table.info.name&&a.create.tableName.toLocaleLowerCase()==b[c].table.info.name.toLocaleLowerCase()){var g=
b[c].table;break}}else b[0]&&(g=b[0].table);if(null!=g){for(c=0;c<g.field.length;c++)if(g.field[c][0].toLocaleLowerCase()==a.create.title.field.toLocaleLowerCase()){var k=g.field[c];break}if(null==k)return null;k=[];var q=0;if(a.create.option&&a.create.option.selector&&a.create.option.selector.all){k[q]={type:a.create.type};k[q].title=a.create.option.selector.all.value.value;for(var f in a.create)if("option"==f){k[q].option={};for(var p in a.create.option)if("all"!=p&&"more"!=p)if("Array"==a.create.option[p].constructor.name)k[q].option[p]=
xDeepCopy(a.create.option[p]);else if("actionBounds"==p||"bounds"==p){if(k[q].option[p]=[xDeepCopy(a.create.option[p])],k[q].option[p][0].field){var v=k[q].option[p][0].field.indexOf("[]");0<v&&(k[q].option[p][0].field=k[q].option[p][0].field.replace("[]","["+row+"]"))}}else k[q].option[p]=a.create.option[p];k[q].option.selector&&(k[q].selectorValue={id:a.create.option.selector.all.id.value,value:a.create.option.selector.all.value.value})}else"title"!=f&&"tableName"!=f&&("Array"==a.create[f].constructor.name?
a.create[f][q]&&(k[q][f]=a.create[f][q]):"bounds"==f?(k[q][f]=[xDeepCopy(a.create[f])],k[q][f][0].field&&(v=k[q][f][0].field.indexOf("[]"),0<v&&(k[q][f][0].field=k[q][f][0].field.replace("[]","["+row+"]")))):k[q][f]=a.create[f]);q++}for(row=0;row<g.data.length;q++,row++)for(f in k[q]={type:a.create.type},k[q].title=g.data[row][c],a.create)if("option"==f){k[q].option={};for(p in a.create.option)if("all"!=p&&"more"!=p)if("actionBounds"==p||"bounds"==p){if(k[q].option[p]="Array"==a.create.option[p].constructor.name?
xDeepCopy(a.create.option[p]):[xDeepCopy(a.create.option[p])],k[q].option[p][0].field)for(var A=0;A<k[q].option[p].length;A++)k[q].option[p].row=q,v=k[q].option[p][A].field.indexOf("[]"),0<v&&(k[q].option[p][A].field=k[q].option[p][A].field.replace("[]","["+row+"]"))}else k[q].option[p]="Array"==a.create.option[p].constructor.name?xDeepCopy(a.create.option[p]):a.create.option[p];k[q].option.selector&&(k[q].selectorValue={id:getTableData(k[q].option.selector.data.id.field,b,row),value:getTableData(k[q].option.selector.data.value.field,
b,row)})}else if("title"!=f&&"tableName"!=f)if("bounds"==f){if(k[q][f]="Array"==a.create[f].constructor.name?xDeepCopy(a.create[f]):[xDeepCopy(a.create[f])],k[q][f][0].field)for(A=0;A<k[q][f].length;A++)v=k[q][f][A].field.indexOf("[]"),0<v&&(k[q][f][A].field=k[q][f][A].field.replace("[]","["+row+"]"))}else"Array"==a.create[f].constructor.name?a.create[f][q]&&(k[q][f]=a.create[f][q]):k[q][f]=a.create[f];if(a.create.option&&a.create.option.selector&&a.create.option.selector.more)for(f in k[q]={type:a.create.type},
k[q].title=a.create.option.selector.more.value.value,k[q].isMore=!0,a.create)if("option"==f){k[q].option={};for(p in a.create.option)"all"!=p&&"more"!=p&&("Array"==a.create.option[p].constructor.name?k[q].option[p]=xDeepCopy(a.create.option[p]):"actionBounds"==p?(k[q].option[p]=[xDeepCopy(a.create.option[p])],k[q].option[p].row=q,k[q].option[p][0].field&&(v=k[q].option[p][0].field.indexOf("[]"),0<v&&(k[q].option[p][0].field=k[q].option[p][0].field.replace("[]","["+row+"]")))):k[q].option[p]=a.create.option[p]);
k[q].option.selector&&(k[q].selectorValue={id:a.create.option.selector.more.id.value,value:a.create.option.selector.more.value.value})}else"title"!=f&&"tableName"!=f&&("Array"==a.create[f].constructor.name?a.create[f][q]&&(k[q][f]=a.create[f][q]):"bounds"==f?(k[q][f]=[xDeepCopy(a.create[f])],k[q][f][0].field&&(v=k[q][f][0].field.indexOf("[]"),0<v&&(k[q][f][0].field=k[q][f][0].field.replace("[]","["+row+"]")))):k[q][f]=a.create[f]);return k}},isDynamicGrid=function(a){if(null==a)return!1;if("Array"==
a.constructor.name)for(var b=0;b<a.length;b++){if(isDynamicGrid(a[b]))return!0}else if(a.create&&a.create.title||a.optionGroup||a.option&&a.option.popupMenu&&a.option.popupMenu.popup)return!0;return!1},createGrid=function(a,b,c){var g;if("Array"==a.constructor.name)for(var k=0;k<a.length;k++){if(null!=a[k]){var q;if(a[k].optionGroup){if(c[a[k].optionGroup]&&a[k].define[c[a[k].optionGroup]]&&(q=createGrid(a[k].define[c[a[k].optionGroup]],b,c))&&0<q.length)for(var f=0;f<q.length;f++)g[g.length]=q[f]}else if(q=
createGrid(a[k],b,c))null==g&&(g=[]),g[g.length]=q}}else if(a.create&&a.create.title)"variables."==a.create.title.type.substr(0,10)?q=createGrid_Variables(a,b,c):"fieldRemark"==a.create.title.type?q=createGrid_TableField(a,b):"tableData"==a.create.title.type&&(q=createGrid_TableData(a,b)),q&&(g={group:q},a.create.size&&(g.size=a.create.size));else if(a.flexGroup)for(k in g={},a)"flexGroup"==k?g.flexGroup=createGrid(a.flexGroup,b,c):g[k]=xDeepCopy(a[k]);else g=xDeepCopy(a);return g},getTableData=function(a,
b,c,g){if(null!=b&&0!=b.length){a=a.split(".");if(1==a.length)if(a[1]=a[0],b[0]&&b[0].table)a[0]=b[0].table.info.name;else return;a[0]=a[0].toLowerCase();a[1]=a[1].toLowerCase();var k=a[1].indexOf("["),q=a[1].indexOf("]"),f=0;k&&q&&0<k&&q>k?(f=""==a[1].substr(k+1,q-k-1)?c:parseInt(a[1].substr(k+1,q-k-1)),a[1]=a[1].substr(0,k)):c&&(f=c);for(k=0;k<b.length;k++)if(null!=b[k]){c=b[k].table;if(b[k].engineData)var p=b[k].engineData;if(c&&c.data&&0<c.data.length&&a[0]==c.info.name.toLowerCase()){for(b=0;b<
c.field.length;b++)if(a[1]==c.field[b][0].toLowerCase()){if(1==g){0>f&&(f=0);if(p&&p[b])for(;0<=f;f--){if(p[b][f])return p[b][f]}else{if("col"==c.info.rank){for(;0<=f;f--)if(c.data[b][f])return c.data[b][f];return}for(;0<=f;f--)if(c.data[f][b])return c.data[f][b]}return}return"col"==c.info.rank?c.data[b][f]:c.data[f][b]}break}}}},getTableValue=function(a,b,c,g){if(null!=b&&0!=b.length){a=a.split(".");if(1==a.length)if(a[1]=a[0],b[0]&&b[0].table)a[0]=b[0].table.info.name;else return;a[0]=a[0].toLowerCase();
a[1]=a[1].toLowerCase();var k=a[1].indexOf("["),q=a[1].indexOf("]"),f=0;k&&q&&0<k&&q>k?(f=""==a[1].substr(k+1,q-k-1)?c:parseInt(a[1].substr(k+1,q-k-1)),a[1]=a[1].substr(0,k)):c&&(f=c);for(k=0;k<b.length;k++)if(null!=b[k]){c=b[k].table;if(b[k].engineData)var p=b[k].engineData;if(c&&c.data&&0<c.data.length&&c.field&&a[0]==c.info.name.toLowerCase()){for(b=0;b<c.field.length;b++)if(a[1]==c.field[b][0].toLowerCase()){if(1==g){0>f&&(f=0);if(p&&p[b])for(;0<=f;f--){if(p[b][f])return{value:p[b][f],valueType:c.field[b][1]}}else{if("col"==
c.info.rank){for(;0<=f;f--)if(void 0!=c.data[b][f])return{value:c.data[b][f],valueType:c.field[b][1]};return}if("row"==c.info.rank){for(;0<=f;f--)if(c.data[f]&&c.data[f][b])return{value:c.data[f][b],valueType:c.field[b][1]};return}for(;0<=f;f--)if(c.data[f][b])return{value:c.data[f][b],valueType:c.field[b][1]}}return}return"col"==c.info.rank?{value:c.data[b][f],valueType:c.field[b][1]}:{value:c.data[f][b],valueType:c.field[b][1]}}break}}}},getFieldIndexFromSet=function(a,b){if(b){var c=-1;if(a.tableName)for(var g=
0;g<b.length;g++){if(b[g]&&b[g].table&&b[g].table.info&&b[g].table.info.name==a.tableName){c=g;break}}else c=0;if(-1!=c&&b[c]&&b[c].table&&b[c].table.field)for(b=b[c].table,g=0;g<b.field.length;g++)if(b.field[g][0].toLowerCase()==a.field)return a.match?{tableIndex:c,fieldIndex:g,match:{matchField:a.match.matchField,toField:a.match.toField,toArrayIndex:a.match.toArrayIndex,toDimensional:a.match.toDimensional}}:null!=a.toArrayIndex?{tableIndex:c,fieldIndex:g,arrayIndex:a.toArrayIndex}:{tableIndex:c,
fieldIndex:g}}return null},getFieldIndex=function(a,b,c){if(null!=b&&null!=b[0]){if(a){if("{{ order number }}"==a)return{tableIndex:0,fieldIndex:"order"};if("{{ check }}"==a)return{tableIndex:0,fieldIndex:"check"};a=parseTableVariable(a,c);if("Array"==a.constructor.name){c=[];for(var g=0;g<a.length;g++)c[g]=getFieldIndexFromSet(a[g],b);return c}return getFieldIndexFromSet(a,b)}return null}};
function getFieldData(a,b,c,g,k){if(null==c||null==c[0])return{type:"c",value:null};a.index=getFieldIndex(a.field,c,g);a.index&&a.statusBound&&"field."==a.statusBound.slice(0,6).toLowerCase()&&(a.index.statusBound=getFieldIndex(a.statusBound.slice(6),c,g));if(a.index&&"Array"==a.index.constructor.name){g=[];for(k=0;k<a.index.length;k++)g[k]=getFieldDataFromIndex(a.index[k],b,c);return g}return getFieldDataFromIndex(a.index,b,c,k)}
function getFieldDataFromIndex(a,b,c,g){var k;c&&c[0]&&c[0].table&&c[0].table.info&&(k=1==g?b==c[0].table.info.totalRows-1?"firstRow":0==b?"lastRow":"":b==c[0].table.info.totalRows-1?"lastRow":0==b?"firstRow":"");if(a&&0<=a.tableIndex&&a.tableIndex<c.length&&0<=b&&0<=a.fieldIndex){g=c[a.tableIndex].table;var q=a.fieldIndex;b-=g.info.dataBegin;if(g.field&&g.data){if(a.match){if(null==a.match.match)for(var f=0;f<g.field.length;f++)if(g.field[f][0].toLowerCase()==a.match.matchField){a.match.match=f;
break}if(null==a.match.to){var p=a.match.toField.indexOf(".");if(0<=p){f=a.match.toField.slice(0,p);p=a.match.toField.slice(p+1);for(var v=0;v<c.length;v++)if(c[v]&&c[v].table&&c[v].table.info.name&&c[v].table.info.name.toLowerCase()==f){a.match.to={};a.match.to.tableIndex=v;if((v=c[v].table)&&v.field){for(f=0;f<v.field.length;f++)if(v.field[f][0].toLowerCase()==p){a.match.to.fieldIndex=f;break}null!=a.match.toDimensional&&(a.match.to.dimensional=a.match.toDimensional)}break}}}}p=g.field[q][0].toLowerCase();
if("row"==g.info.rank)if(null==a.match){if(g.data&&b<g.data.length&&g.data[b]){if(null!=a.arrayIndex){var A;g.flags[p]&&(null!=g.flags[p][a.arrayIndex]?A=g.flags[p][a.arrayIndex]:null!=g.flags[p][0]&&(A=g.flags[p][0]));return{type:g.field[q][1],value:g.data[b]&&g.data[b][q]&&null!=g.data[b][q][a.arrayIndex]?g.data[b][q][a.arrayIndex]:null,flags:A,status:null,row:b+g.info.dataBegin,rowFlag:k}}return{type:g.field[q][1],value:g.data[b][q],flags:g.flags&&g.flags[p]?g.flags[p][b]:void 0,status:g.dataStatus?
g.dataStatus[b]:void 0,statusBound:a.statusBound?getFieldDataFromIndex(a.statusBound,b+g.info.dataBegin,c):null,row:b+g.info.dataBegin,rowFlag:k}}if(g.data&&1==g.data.length)return{type:g.field[q][1],value:g.data[0][q],flags:void 0,status:void 0,row:b+g.info.dataBegin,rowFlag:k}}else{if(a.match.to)if(c=c[a.match.to.tableIndex].table,"row"==c.info.rank)if(q=a.match.to.fieldIndex,null!=q&&a.match&&0<=a.match.toArrayIndex){if(b<c.data.length&&c.data[b]&&c.data[b][q]&&"Array"==c.data[b][q].constructor.name&&
a.match.toArrayIndex<c.data[b][q].length)for(f=c.data[b][q],A=0;A<g.data.length;A++)if(g.data[A]&&(v=g.data[A][a.match.match],v==f[a.match.toArrayIndex].toUpperCase()))return{type:g.field[a.fieldIndex][1],value:g.data[A][a.fieldIndex],flags:g.flags&&g.flags[p]?g.flags[p][A]:void 0,status:g.dataStatus?g.dataStatus[A]:void 0,row:b+g.info.dataBegin,rowFlag:k};if(b<c.data.length&&c.data[b]&&c.data[b][q]&&"String"==c.data[b][q].constructor.name&&a.match.toArrayIndex<c.data[b][q].length&&(f=c.data[b][q],
1==f.startsWith("[")||1==f.startsWith("]")))for(f=eval(f),A=0;A<g.data.length;A++)if(g.data[A]&&(v=g.data[A][a.match.match],f[a.match.toArrayIndex]&&v==f[a.match.toArrayIndex].toUpperCase()))return{type:g.field[a.fieldIndex][1],value:g.data[A][a.fieldIndex],flags:g.flags&&g.flags[p]?g.flags[p][A]:void 0,status:g.dataStatus?g.dataStatus[A]:void 0,row:b+g.info.dataBegin,rowFlag:k}}else{if(null!=q&&c.data&&b<c.data.length)for(A=0;A<g.data.length;A++)if(g.data[A]&&(v=g.data[A][a.match.match],c.data[b]&&
v==c.data[b][q]))return null!=a.match.to.dimensional?{type:g.field[a.fieldIndex][1],value:g.data[A][a.fieldIndex][a.match.to.dimensional],flags:g.flags&&g.flags[p]?g.flags[p][A]:void 0,status:g.dataStatus?g.dataStatus[A]:void 0,row:b+g.info.dataBegin,rowFlag:k}:{type:g.field[a.fieldIndex][1],value:g.data[A][a.fieldIndex],flags:g.flags&&g.flags[p]?g.flags[p][A]:void 0,status:g.dataStatus?g.dataStatus[A]:void 0,row:b+g.info.dataBegin,rowFlag:k}}else if("col"==c.info.rank)if(q=a.match.to.fieldIndex,
null!=q&&a.match&&0<=a.match.toArrayIndex){if(f=b-c.info.begin,c.data[q]&&c.data[q][f]&&0<c.data[q].length)for(A=0;A<g.data.length;A++)if(v=g.data[A][a.match.match],v==c.data[q][f][a.match.toArrayIndex])return{type:g.field[a.fieldIndex][1],value:g.data[A][a.fieldIndex],flags:g.flags&&g.flags[p]?g.flags[p][A]:void 0,status:g.dataStatus?g.dataStatus[A]:void 0,row:b+g.info.dataBegin,rowFlag:k}}else if(null!=q&&c.data[q]&&0<c.data[q].length)for(A=0;A<g.data.length;A++)if(v=g.data[A][a.match.match],v==
c.data[q][b])return{type:g.field[a.fieldIndex][1],value:g.data[A][a.fieldIndex],flags:g.flags&&g.flags[p]?g.flags[p][A]:void 0,status:g.dataStatus?g.dataStatus[A]:void 0,row:b+g.info.dataBegin,rowFlag:k}}else{if(a.arrayIndex&&"col"==a.arrayIndex)return{type:g.field[q][1],value:g.data[q],flags:g.flags&&g.flags[p]?g.flags[p]:void 0,status:g.dataStatus?g.dataStatus[b]:void 0,row:b+g.info.dataBegin,rowFlag:k};if(0<g.data.length&&b<g.data[q].length)return{type:g.field[q][1],value:g.data[q][b],flags:g.flags&&
g.flags[p]?g.flags[p][b]:void 0,status:g.dataStatus?g.dataStatus[b]:void 0,row:b+g.info.dataBegin,rowFlag:k}}}}else if(a&&"order"==a.fieldIndex)return{type:"i",value:b+1,row:b,rowFlag:k};return{type:"c",value:null,row:b,rowFlag:k}}
function getFieldDataWithField(a,b,c,g,k,q){if(null==g||null==g[0])return{type:"c",value:null};b.index=getFieldIndex(a,g,k);b.index&&b.statusBound&&"field."==b.statusBound.slice(0,6).toLowerCase()&&(b.index.statusBound=getFieldIndex(b.statusBound.slice(6),g,repVariables));if(b.index&&"Array"==b.index.constructor.name){a=[];for(k=0;k<b.index.length;k++)a[k]=getFieldDataFromIndex(b.index[k],c,g);return a}return getFieldDataFromIndex(b.index,c,g,q)}
function getFieldDataFromName(a,b,c,g){null==b&&(b=0);if((a=getFieldIndex(a,c,g))&&"Array"==a.constructor.name){a=[];for(g=0;g<cell.index.length;g++)a[g]=getFieldDataFromIndex(cell.index[g],b,c);return a}return getFieldDataFromIndex(a,b,c)}
function xCell(a,b,c,g,k){var q=this,f;this.save=xDeepCopy(b);this.type=b?b.type:"";this.offset={x:0,y:0};this.geometry={left:0,top:0,width:0,height:0};var p,v,A,r,u,z;this.destroy=function(){q.focusObject&&q.focusObject.destroy&&q.focusObject.destroy()};this.show=function(){q.focusObject=q.getFocusObject();q.focusObject&&q.focusObject.show&&q.focusObject.show(!0)};this.hidden=function(){q.focusObject&&q.focusObject.hidden&&q.focusObject.hidden(!0)};this.setOption=function(F){xCopyTo(F,b)};this.getOption=
function(){return b};this.setScheme=function(F,M){b.flexGroup&&(b.type="xSaftButton",null==b.option?b.option={present:"flat"}:b.option.present="flat");b.option&&b.type&&0!=b.option.useSystemScheme&&F[b.type]&&(null!=b.option.schemeName&&(M=b.option.schemeName),F=F[b.type][M]?F[b.type][M]:F[b.type].normal,xCopyAllTo(F,b),q.focusObject&&F&&q.focusObject.setOption(b))};this.setOffset=function(F,M){q.offset.x=F;q.offset.y=M};this.setWidth=function(F){q.geometry.width=F};this.getRefreshCounter=function(){return u};
this.setRefreshCounter=function(F){u=F};var H=function(F){if(b.font)return b.font;F=b&&b.fontFamily?F+"px "+b.fontFamily:f&&f.fontFamily?F+"px "+f.fontFamily:F+"px "+xGlobal.systemFont;if(b&&b.fontBold||f&&f.fontBold){var M=b&&b.fontBold?b.fontBold:null;M||(M=f.fontBold);F=" "+(1==M?"bold":M)+" "+F}return F};this.getParent=function(){return a};this.getFocusObject=function(){"xSaftCalendar"==q.type?null==q.focusObject&&(q.focusObject=new xSaftCalendar(a,f,b,c)):"xSaftButton"==q.type?null==q.focusObject&&
(q.focusObject=new xSaftButton(a,f,b,c,g,k)):"xSaftEdit"==q.type?null==q.focusObject&&(q.focusObject=new xSaftEdit(a,f,b,c)):"xSaftEditNew"==q.type?null==q.focusObject&&(q.focusObject=new xSaftEditNew(a,f,b,c)):"xSaftCombo"==q.type?null==q.focusObject&&(q.focusObject=new xSaftCombo(a,f,b,c,k)):"xSaftDrawPie"==q.type?null==q.focusObject&&(q.focusObject=new xSaftDrawPie(a,f,b,c,k)):"xSaftDrawStair"==q.type?null==q.focusObject&&(q.focusObject=new xSaftDrawStair(a,f,b,c,k)):"xSaftThumbnail"==q.type&&
null==q.focusObject&&(q.focusObject=new xSaftThumbnail(a,f,b,c,k));q.focusObject&&q.focusObject.setValue&&q.focusObject.setValue(q.value);return q.focusObject};var C=function(F,M){var X,aa="#888";b&&b.color?aa=b.color:f&&f.color&&(aa=f.color);var ia="#fff";b&&b.backgroundColor?ia=b.backgroundColor:f&&f.backgroundColor&&(ia=f.backgroundColor);var fa=xGlobal.colors;b&&b.colors?fa=[b.colors[0],b.colors[1],b.colors[2],b.colors[0]]:f&&f.colors&&(fa=[f.colors[0],f.colors[1],f.colors[2],f.colors[0]]);if(b&&
null!=b.borderRadius)var T=b.borderRadius;else f&&f.borderRadius&&(T=f.borderRadius);var Y=q.offset.x+q.geometry.left,O=q.offset.y+q.geometry.top,K=!1,Z=v.left,pa=v.top,oa=v.width,Aa=v.height,ta;b&&b.refreshMode&&(ta="systemMode"==b.refreshMode?xGlobal.systemRefreshMode:b.refreshMode);var Q;null==q.graph&&null!=u&&4>xGlobal.refreshCounter-u&&(Q=xGlobal.refreshColor[xGlobal.refreshCounter-u]);ta&&("background"==ta||2==z)&&Q?null!=b.borderRadius?fillRoundRect(F,p.left,p.top,p.width,p.height,T,Q):(F.beginPath(),
F.fillStyle=Q,F.fillRect(p.left,p.top,p.width,p.height),F.closePath()):b&&b.backgroundColor&&(T?fillRoundRect(F,p.left,p.top,p.width,p.height,T,b.backgroundColor):(K=!0,F.beginPath(),F.fillStyle=ia,"top-left-triangle"==b.position?(F.moveTo(Y,O),F.lineTo(Y,O+q.geometry.size.height),F.lineTo(Y+q.geometry.size.width,O),F.lineTo(Y,O),F.fill(),v.left+=2,v.width-=2,v.top+=2,v.height-=2):"top-right-triangle"==b.position?(F.moveTo(Y+q.geometry.width,O),F.lineTo(Y+q.geometry.width,O+q.geometry.size.height),
F.lineTo(Y+q.geometry.width-+q.geometry.size.width,O),F.lineTo(Y+q.geometry.width,O),F.fill()):"bottom-left-triangle"==b.position?(F.lineTo(Y,O+q.geometry.height),F.lineTo(Y,O+q.geometry.height-q.geometry.size.height),F.lineTo(Y+q.geometry.size.width,O+q.geometry.height),F.lineTo(Y,O+q.geometry.height),F.fill()):"bottom-right-triangle"==b.position?(F.moveTo(Y+q.geometry.width,O+q.geometry.height),F.lineTo(Y+q.geometry.width,O+q.geometry.height-q.geometry.size.height),F.lineTo(Y+q.geometry.width-q.geometry.size.height,
O+q.geometry.height),F.moveTo(Y+q.geometry.width,O+q.geometry.height),F.fill(),Aa=q.geometry.size.height):(F.fillRect(p.left,p.top,p.width,p.height),K=!1),F.closePath()));O=v.top;Y=v.left;T=O;b&&b.bounds&&(q.value={},(X=getBoundsVariableSet(b.bounds,c,null,a))&&null!=c[X.variable]?q.value.value=c[X.variable]:q.value="");q.value&&null==q.value.value&&(q.value.value="");if(q.value&&null!=q.value.value){if(b.font)var sa=parseInt(b.font);else sa=12,b&&b.fontSize?sa=b.fontSize:f&&f.fontSize&&(sa=f.fontSize);
F.font=H(sa);1==K&&(Aa=sa);null!=b&&b.layerType?b&&"normal"==b.layerType.toLowerCase()&&(T=O+xGlobal.systemFontOffsetY+(b.lineHeight?b.lineHeight:Aa)/2):T=O+Aa/2+xGlobal.systemFontOffsetY;var ra=T;b&&b.textBaseline?(F.textBaseline=b.textBaseline,"top"==b.textBaseline?(T=O+1,ra=T+parseFloat(F.font)/2):(T=O+Aa-1,ra=T-parseFloat(F.font)/2)):F.textBaseline="middle";F.textAlign=b&&b.textAlign?b.textAlign:f&&f.textAlign?f.textAlign:"left";var la="center"==F.textAlign?2:"right"==F.textAlign?1:0;if(null!=
q.value.flags){parseInt(q.value.flags,36);var Na=q.value.flags}"number"==typeof q.value.value&&isNaN(q.value.value)&&(q.value.value="-");K=getValueFormatString(q.value.value,q.value.type,b?b.format:null,q.value.flags,b?b.prop:null);b&&b.template&&(K=b.template.replace("{{ data }}",K));if(M)return null==q.value||null==q.value.value?32:F.measureText(K).width;width=xGlobal.isMobile?oa:oa-6;var Wa=F.measureText(K).width;Wa>oa-6&&(Wa=oa-6);if(1==la){M=Y+oa-Wa-6;X=O+Aa/2-sa/2-1;var na=Wa+4;var ha=sa+3}else 2==
la?(M=Y+oa/2-Wa/2,X=O+Aa/2-sa/2-1,na=Wa,ha=sa,xGlobal.isMobile||(M=Y+oa/2-Wa/2,X=O+Aa/2-sa/2-1,na=Wa+4,ha=sa+3)):(M=Y,X=O+Aa/2-sa/2-1,na=Wa+4,ha=sa+3);if(null!=q.value.flags){var ea=Na&3;if(1==ea&&b.udFlag||2==ea&&b.udFlag||b&&null!=b.format&&0<=b.format.indexOf("%A")){aa=2*sa/5;6>aa&&(aa=6);var ja={left:Y+oa-sa+aa,top:O+(Aa-aa)/2,width:aa,height:aa};0!==b.udFlag&&(na+=sa,M-=sa);if(1==la)Y-=sa/2,width-=sa/2;else if(2==la){var da=F.measureText(K);xGlobal.isMobile?O-=ja.width:Y-=ja.width;ja.left=Y+
da.width/2+oa/2+3;width-=sa;0!==b.udFlag&&(na+=sa/2)}else da=F.measureText(K),ja.left=Y+da.width+sa/2,width-=ja.width+sa/2}aa=fa[Na>>2&3]}else b&&b.format&&0<=b.format.indexOf("%z")&&(aa=0<q.value.value?fa[1]:0>q.value.value?fa[2]:fa[0]);if(b&&b.dataBackground){b.dataBackground.color&&"dataflags"==b.dataBackground.color.toLowerCase()?(F.fillStyle=aa,aa=b&&b.color?b.color:f&&f.color?f.color:"#111"):F.fillStyle=b.dataBackground.color;Wa=0;b.dataBackground.margin&&(Wa=parseInt(b.dataBackground.margin));
var Oa=0;b.dataBackground.borderRadius&&(Oa=parseInt(b.dataBackground.borderRadius));Oa?fillRoundRect(F,M-Wa,X-Wa,na+2*Wa,ha+2*Wa,Oa,F.fillStyle):F.fillRect(M-Wa,X-Wa,na+2*Wa,ha+2*Wa)}else ta&&Q&&z?2!=z&&("foreground"==ta?aa=Q:"minBackground"==ta?(F.fillStyle=Q,F.fillRect(M,X,na,ha)):"dataBackground"==ta?(F.fillStyle=null!=q.value.flags?xGlobal.refreshDataColor[Na>>2&3]:xGlobal.refreshDataColor[0],Wa=b.dataMargin||4,ta.dataBackgMargin&&(Wa=ta.dataBackgMargin),Oa=2,null!=ta.dataBackgroundBorderRadius&&
(Oa=ta.dataBackgroundBorderRadius),Oa?fillRoundRect(F,M-Wa,X-Wa,na+2*Wa,ha+2*Wa,Oa,F.fillStyle):F.fillRect(M-Wa,X-Wa,na+2*Wa,ha+2*Wa)):"minBox"==ta?(F.fillStyle=Q,F.rect(M,X,na,ha),F.fill()):"underline"==ta&&(F.strokeStyle=Q,F.moveTo(M,X+ha),F.lineTo(M+na,X+ha),F.moveTo(M,X+ha+1),F.lineTo(M+na,X+ha+1),F.stroke())):b&&b.background&&(F.fillStyle=b.background,F.fillRect(M,X,na,ha));1==ea&&b.udFlag?drawTriangleUp(F,ja,fa[ea%3],fa[ea%3]):2==ea&&b.udFlag&&drawTriangleDown(F,ja,fa[ea%3],fa[ea%3]);b&&b.timeLine&&
(fa=b.lineColor?b.lineColor:aa,ea=b.arcColor?b.arcColor:aa,X=b.timeLine.split(" "),F.save(),F.beginPath(),F.strokeStyle=X[2]?X[2]:fa,F.lineWidth=parseInt(X[0]),F.setLineDash([parseInt(X[1]),parseInt(X[1])]),"firstRow"==q.value.rowFlag?(F.moveTo(Z+8,ra),F.lineTo(Z+8,q.geometry.height+q.offset.y)):"lastRow"==q.value.rowFlag?(F.moveTo(Z+8,q.offset.y),F.lineTo(Z+8,ra)):(F.moveTo(Z+8,q.offset.y),F.lineTo(Z+8,q.geometry.height+q.offset.y)),F.stroke(),F.closePath(),F.restore(),F.beginPath(),F.strokeStyle=
X[2]?X[2]:ea,F.lineWidth=parseInt(X[0]),F.setLineDash([0]),F.moveTo(Z+8+3,ra),F.arc(Z+8,ra,3,0,2*Math.PI),F.fillStyle=ia,F.fill(),F.stroke(),F.closePath(),Y+=16);F.fillStyle=aa;ia={x:null,y:T,width:width,height:Aa};if(b&&b.maxLines){T=null!=xGlobal.systemFontOffsetY?xGlobal.systemFontOffsetY:0;var Pa=-1==b.maxLines?b.lineHeight?b.lineHeight:20:b.lineHeight?b.lineHeight:b.maxLines?Aa/b.maxLines:20;"Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==
navigator.platform?drawTextAutoLine(K,F,Y+1,O+1,Pa,width,Aa,b.maxLines,q,b):drawTextAutoLine(K,F,Y+1,O+T,Pa,width,Aa,b.maxLines,q,b)}else{b&&b.textWidth?da=b.textWidth:b&&b.format&&-1!=b.format.indexOf("...")&&(da=q.geometry.width);if(da&&F.measureText(K).width>da){for(Na=K.length;F.measureText(K).width>da;)K=K.slice(0,Na-1),Na--;K+="...";1==la?(O=Y+oa-4,F.fillText(K,O,T,width),ia.x=Y+oa-4):2==la?(O=Y+oa/2,F.fillText(K,O,T,width),ia.x=Y+oa/2):(O=Y+2,F.fillText(K,O,T,width),ia.x=Y+2)}else{var hb;b&&
b.maxWidth&&(hb=width);1==la?(O=Y+oa-4,null!=hb?F.fillText(K,O,T,hb):F.fillText(K,O,T),ia.x=Y+oa-4,b&&b.highlightChanged&&null!=q.valueChanged&&(null!=hb?F.fillText(q.valueChanged,Y+oa-4,T,hb):F.fillText(q.valueChanged,Y+oa-4,T))):2==la?(O=Y+oa/2,null!=hb?F.fillText(K,O,T,hb):F.fillText(K,O,T),ia.x=Y+oa/2):(O=Y+2,null!=hb?F.fillText(K,O,T,hb):F.fillText(K,O,T),ia.x=Y+2,b&&b.highlightChanged&&null!=q.valueChanged&&null!=u&&5>xGlobal.refreshCounter-u&&(F.fillStyle=q.highlightChanged,F.fillText(q.valueChanged,
Y+2+F.measureText(K).width-F.measureText(q.valueChanged).width,T,hb)));q.value.superscript&&(Y=F.measureText(K).width,1!=la&&2!=la&&(da=sa/2,7>da&&(da=7),F.font=H(da),F.fillText(q.value.superscript,O+Y+1,T-da/2)));Na&16&&!xGlobal.hideSign&&(Na=q.value.sign?q.value.sign:"\u25cf",sa/=2,7>sa&&(sa=7),"right"==F.textAlign?(F.textAlign="left",F.font=H(sa),F.fillText(Na,O,T-sa/2-1)):(Y=F.measureText(K).width,F.textAlign="left",F.font=H(sa),F.fillText(Na,O+Y,T-sa/2-1)))}q.value.markValues?Pa=q.value.markValues:
b&&b.marks&&(Pa=b.marks);if(Pa)for(F.fillStyle=b&&b.mark&&null!=b.mark.color?b.mark.color:"#ff8000",Na=0;Na<Pa.length;Na++)if("string"==typeof K)for(sa="Array"==Pa[Na].constructor.name?Pa[Na]:[Pa[Na]],da=0;da<sa.length;da++)sa[da]&&(hb=K.toLowerCase().indexOf((sa[da]+"").toLowerCase()),0<=hb&&(0==hb?F.fillText(K.slice(0,sa[da].length),O,T,width):(Y=F.measureText(K.slice(0,hb)).width,F.fillText(K.slice(hb,hb+sa[da].length),O+Y,T,width))))}null!=q.linkValue&&(Pa={title:K,cursor:"",rect:ia,link:q.linkValue.value},
q.linkValue.value,T=Pa.rect.x+"-"+Pa.rect.y+"-"+Pa.rect.width+"-"+Pa.rect.height,null==F.canvas.linkList&&(F.canvas.linkList={}),F.canvas.linkList[T]=Pa);ta&&"box"==ta&&Q&&(F.beginPath(),F.strokeStyle=Q,F.rect(Z+1,pa+1,oa-2,Aa-2),F.stroke(),F.closePath())}},U=function(F){if(q.value.value&&3<q.value.value.length){var M=b&&b.colors?[b.colors[0],b.colors[1],b.colors[2],b.colors[0]]:f&&f.colors?[f.colors[0],f.colors[1],f.colors[2],f.colors[0]]:xDeepCopy(xGlobal.colors);var X=q.value.value[2];if(0==q.value.value[1]&&
q.value.value.length==3+X){var aa=X-2;for(var ia=3;ia<X+3;ia++)if(q.value.value[ia][0])aa+=q.value.value[ia][0];else{aa=0;break}if(0<aa){aa=p.width/aa;var fa=0;for(ia=3;ia<X+3;ia++){var T=q.value.value[ia][0],Y=q.value.value[ia][1],O=(p.height-6)/(A-r),K=p.left+aa*fa,Z=p.top+3+(A-q.value.value[ia][2])*O;b&&b.colors&&(M[0]=b.colors[0],M[1]=b.colors[1],M[2]=b.colors[2],M[3]=b.colors[3]);F.strokeStyle=M[0];for(var pa=3;pa<q.value.value[ia].length;pa++){F.beginPath();b.lineWidth&&(F.lineWidth=b.lineWidth);
var oa=p.left+aa*(fa+(pa-2)),Aa=p.top+3+(A-q.value.value[ia][pa])*O;ia-2==X&&(F.strokeStyle=q.value.value[ia][pa]>Y?M[1]:q.value.value[ia][pa]<Y?M[2]:M[3]);F.moveTo(K,Z);F.lineTo(oa,Aa);F.stroke();F.closePath();K=oa;Z=Aa}fa=T}}}}},J=function(F,M){if(1==M)return b.size.width;var X=b.width,aa=b.height;b.size&&(b.size.width&&(X=b.size.width),b.size.height&&(aa=b.size.height));F.save();F.beginPath();var ia=p.left+(p.width-X)/2,fa=p.top+(p.height-aa)/2;if(null!=b.src&&""!=b.src)try{null==q.IMG&&(q.IMG=
new Image,q.IMG.src=b.src),null==q.loaded&&(q.IMG.onload=function(Y){q.loaded=!0;q.IMG&&F.drawImage(q.IMG,ia,fa,X,aa)},q.loaded=!0),1==q.loaded&&q.IMG&&F.drawImage(q.IMG,ia,fa,X,aa)}catch(Y){console.log(Y)}else if(null!=q.value.value&&""!=q.value.value){null==q.IMG&&(q.IMG=new Image);if(""==q.IMG.src||q.IMG.src!=q.value.value)q.IMG.src=q.value.value;null==q.loaded&&(q.IMG.onload=function(Y){q.loaded=!0;q.IMG&&F.drawImage(q.IMG,ia,fa,X,aa)});if(1==q.loaded&&q.IMG)try{F.drawImage(q.IMG,ia,fa,X,aa)}catch(Y){}}if(null!=
q.linkValue){M={x:ia,y:fa,width:X,height:aa};if(null!=b.src)var T=b.src;q.value&&null!=q.value.value&&(T=q.value.value);T={title:T,cursor:"",rect:M,link:q.linkValue.value};M=T.rect.x+"-"+T.rect.y+"-"+T.rect.width+"-"+T.rect.height;null==F.canvas.linkList&&(F.canvas.linkList={});F.canvas.linkList[M]=T}},G=function(F,M){if(1==M)return 100;M="#888";b&&b.splitLineColor?M=b.splitLineColor:f&&f.splitLineColor&&(M=f.splitLineColor);if("transparent"!=M){M=parseLineSet(M);var X=M.width;b&&b.lineWidth?X=b.lineWidth:
f&&f.lineWidth&&(X=f.lineWidth);F.beginPath();F.strokeStyle=M.color;F.lineWidth=X;F.setLineDash(M.dash);F.moveTo(p.left-.5+M.padding,p.top+p.height/2);F.lineTo(p.left+p.width+.5-M.padding,p.top+p.height/2);F.stroke();F.closePath()}},B=function(F,M){if(1==M)return 100;F.beginPath();M="#888";b&&b.borderColor?M=b.borderColor:f&&f.borderColor?M=f.borderColor:b&&b.splitLineColor?M=b.splitLineColor:f&&f.splitLineColor&&(M=f.splitLineColor);var X=1;b&&b.lineWidth?X=b.lineWidth:f&&f.lineWidth&&(X=f.lineWidth);
F.strokeStyle=M;F.lineWidth=X;F.moveTo(p.left-.5,p.top+p.height/2);F.lineTo(p.left+p.width+.5,p.top+p.height/2);F.lineTo(p.left+p.width+.5,p.top+p.height/2+100);F.lineTo(p.left+.5,p.top+p.height/2+100);F.lineTo(p.left-.5,p.top+p.height/2);F.stroke();F.closePath()},L=function(F,M){if(1==M)return 100;F.save();M=xGlobal.colors;b&&b.colors?M=[b.colors[0],b.colors[1],b.colors[2],b.colors[0]]:f&&f.colors&&(M=[f.colors[0],f.colors[1],f.colors[2],f.colors[0]]);var X=q.value.value;0<X?F.fillStyle=M[1]:(F.fillStyle=
M[2],X*=-1);F.globalAlpha=b.alpha?b.alpha:.5;null!=b.factor&&(X*=b.factor);X=p.width*X/100;X>p.width&&(X=p.width);"right"==b.align?F.fillRect(p.left+p.width-X,p.top,X,p.height):F.fillRect(p.left,p.top,X,p.height);F.fill();F.restore()},ba=function(F,M){null==q.focusObject&&(q.focusObject=new xSaftButton(a,f,b,c,g,k));var X={left:p.left,top:p.top,width:p.width,height:f.lineHeight?f.lineHeight:16};null==b.flexStatus&&(b.flexStatus=1);q.focusObject.setPosition(X);X=q.focusObject.draw(F,M);0==X&&(X=C(F,
M));return X+16+8};this.getMargin=function(){var F=0,M=0,X=0,aa=0;b&&(null!=b.margin&&(F=parseFloat(b.margin),M=parseFloat(b.margin),X=parseFloat(b.margin),aa=parseFloat(b.margin)),null!=b.marginLeft&&(F=parseFloat(b.marginLeft)),null!=b.marginRight&&(M=parseFloat(b.marginRight)),null!=b.marginTop&&(X=parseFloat(b.marginTop)),null!=b.marginBottom&&(aa=parseFloat(b.marginBottom)));return{left:F,right:M,top:X,bottom:aa}};var N=function(F,M,X,aa){X={left:F,top:M,width:q.geometry.width,height:q.geometry.height};
aa=q.getMargin();aa.left&&(X.left=F+aa.left,X.width-=aa.left);aa.right&&(X.width-=aa.right);aa.top&&(X.top=M+aa.top,X.height-=aa.top);aa.bottom&&(X.height-=aa.bottom);return X},E=function(F,M,X,aa){F={left:F,top:M,width:X,height:aa};var ia,fa,T;if(f){if(f.padding)var Y=T=fa=ia=f.padding;null!=f.paddingLeft&&(ia=f.paddingLeft);null!=f.paddingRight&&(fa=f.paddingRight);null!=f.paddingTop&&(T=f.paddingTop);null!=f.paddingBottom&&(Y=f.paddingBottom)}b&&(null!=b.padding&&(Y=T=fa=ia=b.padding),null!=b.paddingLeft&&
(ia=b.paddingLeft),null!=b.paddingRight&&(fa=b.paddingRight),null!=b.paddingTop&&(T=b.paddingTop),null!=b.paddingBottom&&(Y=b.paddingBottom));null!=ia&&(F.left+=ia,F.width-=ia);null!=fa&&(F.width-=fa);null!=T&&(F.top+=T,F.height-=T);null!=Y&&(F.height-=Y);return F};this.draw=function(F,M,X){f=M;var aa=q.offset.x+q.geometry.left;M=q.offset.y+q.geometry.top;if(!(0>=q.geometry.width)){p=N(aa,M,q.geometry.width,q.geometry.height);v=E(p.left,p.top,p.width,p.height);F.save();xGlobal.selectedCell==q&&(F.fillStyle=
"#aaa",F.fillRect(p.left,p.top,p.width,p.height),F.fillStyle="#000");width=100;if(b&&b.flexGroup)width=ba(F,X);else if(q.type&&"xSaft"==q.type.substr(0,5))q.focusObject=q.getFocusObject(),q.focusObject.setPosition(p),width=q.focusObject.draw(F,X),0==width&&(width=C(F));else if(q.type&&"xDraw"==q.type.substr(0,5)){M=drawMemory.getInstance().registList;for(var ia=0;ia<M.length;ia++)if(q.type==M[ia].name){q.focusObject=eval("new "+M[ia].classed+"()");q.focusObject.setCtx(F);q.focusObject.setParent(a);
q.focusObject.setGeneral(f);q.focusObject.setOption(b);q.focusObject.setVariables(c);q.focusObject.setCallback_actionBounds(k);if(M[ia].param)for(var fa in M[ia].param)q.focusObject[fa]=M[ia].param[fa];q.focusObject.created();break}q.focusObject&&"undefined"!=typeof q.focusObject.value&&(q.focusObject.setValue(q.value),q.baseValue&&q.focusObject.setBaseValue(q.baseValue));q.focusObject?(q.focusObject.setPosition(v),width=q.focusObject.drawTime(F,X)):width=0}else if("progressBar"==q.type)width=L(F,
X);else if("splitLine"==q.type)width=G(F,X);else if("borderLine"==q.type)width=B(F,X);else if("button"==q.type){if(0<q.src.length&&0==X)for(fa=0;fa<q.src.length;fa++){F.beginPath();try{ia=new Image,ia.src=q.src[fa],F.drawImage(ia,rect.left-fa*(q.imgWidth+9),M,q.imgWidth,q.imgHeight)}catch(Y){console.log(Y)}}}else if("swipBar"==q.type){if(0==X&&q.value)if(0==b.swipType)for(ia=fa=0,aa=1;fa<b.width;fa+=8){F.beginPath();if(fa<b.width/2+100*q.value.value){ia=1<=ia?ia:ia+.1;var T="rgba(255,80,59,"+ia+")"}else aa=
.1>=aa?aa:aa-.06,T="rgba(114,255,190,"+aa+")";F.fillStyle=T;F.rect(fa,M+6,4,4);F.fill()}else 1==b.swipType&&(F.beginPath(),F.fillStyle="#F08820",f.paddingLeft&&(rect.left+=f.paddingLeft,rect.width-=f.paddingLeft,aa=rect.left),f.paddingRight&&(rect.width-=f.paddingRight),"Array"==q.value.constructor.name&&(fa=aa-8+(q.value[2].value-q.value[0].value)/(q.value[1].value-q.value[0].value)*rect.width,F.moveTo(fa,M),F.arc(fa+8,M+8,4,0,360),F.fill(),F.beginPath(),F.strokeStyle="#979797",F.moveTo(fa+8+4*Math.cos(45*
Math.PI/180),M+8+4*Math.sin(45*Math.PI/180)),F.lineTo(fa+8+4*Math.cos(135*Math.PI/180),M+8+4*Math.sin(135*Math.PI/180)),F.lineTo(fa+8,M+8+8),F.fill()),F.beginPath(),F.moveTo(aa,M+rect.height/2),F.lineTo(aa+rect.width,M+rect.height/2),F.lineTo(aa+rect.width,M+rect.height/2+4),F.lineTo(aa,M+rect.height/2+4),F.lineTo(aa,M+rect.height/2),F.stroke(),F.closePath())}else"img"==q.type?width=J(F,X):"text"==q.type?width=C(F,X):"checkbox"==q.type?(M=b.size.width||16,fa=b.size.height||16,width=drawCheckBox(F,
{radius:b.radius||2,left:p.left+.5*(p.width-M),top:p.top+.5*(p.height-fa),width:M,height:fa},q.value&&q.value.value?!0:!1,b.lineWidth,b.color,b.backgroundColor,b.checkedColor,X)):q.type&&"static"!=q.type?0==X&&(rect={left:p.left,top:p.top,width:p.width,height:p.height},V(F,q,rect,f,b,q.value,X)):q.value&&q.value.type&&"g"==q.value.type.slice(0,1)?0==X&&(width=U(F)):width=C(F,X);0==X&&(rect={left:p.left,top:p.top,width:p.width,height:p.height},b&&b.borderLeft&&(F.beginPath(),X=parseLineSet(b.borderLeft,
b.borderLineWidth,null==b.borderColor?f.borderColor:b.borderColor),F.strokeStyle=X.color,F.lineWidth=X.width,F.moveTo(rect.left,rect.top+X.padding),F.lineTo(rect.left,rect.top+rect.height-2*X.padding),F.stroke(),F.closePath()),b&&b.borderRight&&(F.beginPath(),X=parseLineSet(b.borderRight,b.borderLineWidth,null==b.borderColor?f.borderColor:b.borderColor),F.strokeStyle=X.color,F.lineWidth=X.width,F.moveTo(rect.left+rect.width,rect.top+X.padding),F.lineTo(rect.left+rect.width,rect.top+rect.height-2*
X.padding),F.stroke(),F.closePath()),b&&b.borderTop&&(F.beginPath(),X=parseLineSet(b.borderTop,b.borderLineWidth,null==b.borderColor?f.borderColor:b.borderColor),F.strokeStyle=X.color,F.lineWidth=X.width,F.moveTo(rect.left+X.padding,rect.top),F.lineTo(rect.left-2*X.padding+rect.width,rect.top),F.stroke(),F.closePath()),b&&b.borderBottom&&(F.beginPath(),X=parseLineSet(b.borderBottom,b.borderLineWidth,null==b.borderColor?f.borderColor:b.borderColor),F.strokeStyle=X.color,F.lineWidth=X.width,F.moveTo(rect.left+
X.padding,rect.top+rect.height),F.lineTo(rect.left-2*X.padding+rect.width,rect.top+rect.height),F.stroke(),F.closePath()));F.restore();return width}};var V=function(F,M,X,aa,ia,fa){try{eval("new "+cellGraphList[q.type]+"(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])")}catch(T){console.log(T)}};this.setMarkValues=function(F){q.value&&(q.value.markValues=F)};this.setValue=function(F,M){if(null==F||"ti"!=F.type&&"Array"!=F.constructor.name)if(null==F)q.value=null;
else{if(null!=q.value&&q.value.value!=F.value&&void 0!=F.status){if(!q.highlightChanged||"f"!=F.type[0]&&"x"!=F.type[0]&&"i"!=F.type[0])q.valueChanged&&delete q.valueChanged;else if(F.value!=q.value.value){var X=getValueFormatString(q.value.value,q.value.type,q.format,q.value.flags),aa=getValueFormatString(F.value,F.type,q.format,F.flags);if(X.length==aa.length)for(M=0;M<X.length;M++){if(X[M]!=aa[M]){q.valueChanged=aa.slice(M);break}}else q.valueChanged=aa}else q.valueChanged&&delete q.valueChanged;
0!=F.status&&(u=xGlobal.refreshCounter)}else q.valueChanged&&(q.valueChanged=null),null!=q.value&&null!=q.value.value||2!=F.status||(u=xGlobal.refreshCounter);z=1;F.flags&&3==(F.flags&3)&&(u=0);q.value=xDeepCopy(F);null!=F.type&&"f"!=F.type[0]&&"x"!=F.type[0]&&"i"!=F.type[0]||"string"!=typeof F.value||(M=parseInt(F),1==isNaN(M)?q.value.value="-":q.value.value=M);if(null!=F&&F.type&&"g"==F.type.slice(0,1)&&q.value.value&&(r=A=null,3<q.value.value.length&&(F=q.value.value[2],0==q.value.value[1]&&1<
q.value.value[3].length))){A=q.value.value[3][1];r=q.value.value[3][1];for(X=3;X<F+3;X++)if(q.value.value[X])for(M=1;M<q.value.value[X].length;M++)A<q.value.value[X][M]&&(A=q.value.value[X][M]),r>q.value.value[X][M]&&(r=q.value.value[X][M]);A==r&&(A+=1,--r)}}else q.value=xDeepCopy(F)};this.isInCell=function(F,M,X){if((null==b.enable||0!=b.enable)&&p&&F>=p.left&&F<=p.left+p.width&&M>=p.top&&M<=p.top+p.height){if("dblClick"==X&&xGlobal.selectedCell!=q){var aa=xGlobal.selectedCell;xGlobal.selectedCell!=
q&&(xGlobal.selectedCell=q,aa&&(aa=aa.getParent(),aa!=a&&aa.draw&&aa.draw(!0)),1==f.canMouseSelected?a&&a.draw&&a.draw(!0):xGlobal.selectedCell=null)}return q.focusObject&&q.focusObject.isInRect?q.focusObject.isInRect(F,M,X):!0}};this.click=function(){q.focusObject&&q.focusObject&&q.focusObject.doAction&&q.focusObject.doAction()};this.onDblClick=function(F){if(b.callback_dblClick){F=null;a.getActionTarget&&(F=a.getActionTarget());if(null==F||null==F.target)F={target:a,targetButton:q,targetPage:a.getPage()};
var M=getCallbacks();F={option:b,thisOption:null,variables:c,target:F.target,targetButton:F.targetButton,page:F.targetPage,thisPage:a.getPage(),callbacks:M};b.callback_dblClick(F)}};this.synchBoundValue=function(F){q.focusObject&&q.focusObject.synchBoundValue&&q.focusObject.synchBoundValue(F)}}
var parseTableVariable=function(a,b){var c={},g=0,k=0;if("Array"==a.constructor.name){c=[];for(var q=0;q<a.length;q++)c[q]=parseTableVariable(a[q],b)}else{var f=a;if(0<=a.indexOf("{{ ")&&b)for(q in b){a=b[q];var p="{{ "+q+" }}";f=f.replace(p,a);f=f.replace(p,a)}for(q=0;q<f.length;q++)if("."==f[q])0==k&&(c.tableName=f.slice(g,q)),g=q+1,k++;else if("["==f[q])if(null==c.tableName&&0==k&&k++,1==k&&(c.field=f.slice(g,q).toLowerCase()),g=q+1,k++,0<f.indexOf("="))for(;q<f.length;q++){if("="==f[q])for(c.match=
{},c.match.matchField=f.slice(g,q).toLowerCase(),q++,"="==f[q]&&q++,g=q;q<f.length;q++)if("["==f[q]){c.match.toField=f.slice(g,q).toLowerCase();"col"==f.slice(q+1,q+4)?c.match.toArrayIndex="col":c.match.toArrayIndex=parseInt(f.slice(q+1));break}else if("]"==f[q]){c.match.toField=f.slice(g,q).toLowerCase();if(q<f.length)for(b=q+1;b<f.length;b++)if("["==f[b])g=b;else if("]"==f[b]){c.match.toDimensional=parseInt(f.slice(g+1,b));break}break}}else for(;q<f.length;q++)if("["==f[q]){for("col"==f.slice(q+
1,q+4)?c.toArrayIndex="col":c.toArrayIndex=parseInt(f.slice(q+1));q<f.length&&"]"!=f[q];q++);break}null==c.field&&(c.field=f.slice(g,q).toLowerCase())}return c},searchFocusObject=0;
function xCells(a,b,c,g,k,q){var f=this,p=xDeepCopy(b);this.needCalcWidth=!1;this.destroy=function(){if(p)for(var r=0;r<p.length;r++){if(p[r].objects)p[r].objects.destroy();else if(p[r].object&&(p[r].object.destroy(),p[r].flexCell))for(var u=0;u<p[r].flexCell.cells.length;u++)p[r].flexCell.cells[u].objects.destroy();if(p[r].flexCell&&p[r].flexCell.cells)for(u=0;u<p[r].flexCell.cells.length;u++)p[r].flexCell.cells[u].objects.destroy()}};this.showCell=function(r){if(p)for(var u=0;u<p.length;u++){if(p[u].objects){if(1==
p[u].objects.showCell(r))return!0}else if(p[u].object){if(p[u].id==r)return p[u].object.focusObject&&p[u].object.focusObject.show&&p[u].object.focusObject.show(),p[u].show=!0;if(p[u].flexCell)for(var z=0;z<p[u].flexCell.cells.length;z++)if(1==p[u].flexCell.cells[z].objects.showCell(r))return!0}if(p[u].flexCell&&p[u].flexCell.cells)for(z=0;z<p[u].flexCell.cells.length;z++)if(1==p[u].flexCell.cells[z].objects.showCell(r))return!0}};this.hideCell=function(r){if(p)for(var u=0;u<p.length;u++){if(p[u].objects){if(1==
p[u].objects.hideCell(r))return!0}else if(p[u].object){if(p[u].id==r)return p[u].show=!1,!0;if(p[u].flexCell)for(var z=0;z<p[u].flexCell.cells.length;z++)if(1==p[u].flexCell.cells[z].objects.hideCell(r))return!0}if(p[u].flexCell&&p[u].flexCell.cells)for(z=0;z<p[u].flexCell.cells.length;z++)if(1==p[u].flexCell.cells[z].objects.hideCell(r))return!0}};this.show=function(){if(p)for(var r=0;r<p.length;r++){if(p[r].objects)p[r].objects.show();else if(p[r].object&&(p[r].object.show(),p[r].flexCell))for(var u=
0;u<p[r].flexCell.cells.length;u++)p[r].flexCell.cells[u].objects.show();if(p[r].flexCell&&p[r].flexCell.cells)for(u=0;u<p[r].flexCell.cells.length;u++)p[r].flexCell.cells[u].objects.show()}};this.hidden=function(){if(p)for(var r=0;r<p.length;r++){if(p[r].objects)p[r].objects.hidden();else if(p[r].object&&(p[r].object.hidden(),p[r].flexCell))for(var u=0;u<p[r].flexCell.cells.length;u++)p[r].flexCell.cells[u].objects.hidden();if(p[r].flexCell&&p[r].flexCell.cells)for(u=0;u<p[r].flexCell.cells.length;u++)p[r].flexCell.cells[u].objects.hidden()}};
this.setScheme=function(r,u){if(p)for(var z=0;z<p.length;z++){if(p[z].objects)p[z].objects.setScheme(r,u);else if(p[z].object&&(p[z].object.setScheme(r,u),p[z].flexCell))for(var H=0;H<p[z].flexCell.cells.length;H++)p[z].flexCell.cells[H].objects.setScheme(r,u);if(p[z].flexCell&&p[z].flexCell.cells)for(H=0;H<p[z].flexCell.cells.length;H++)p[z].flexCell.cells[H].objects.setScheme(r,u)}};this.getValue=function(){if(null!=p){var r=null;if(1==p.length)return p[0].object.value.value;for(var u=0;u<p.length;u++)if(p[u].objects)r=
null==r?[p[u].objects.getValue()]:r+[p[u].objects.getValue()];else if((null==p[u].show||1==p[u].show)&&p[u].object)if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var z=0;z<p[u].flexCell.cells.length;z++)r=null==r?p[u].flexCell.cells[z].objects.getValue():r+[p[u].flexCell.cells[z].objects.getValue()]}else null==r&&(r=[]),r[r.length]=p[u].object.value&&p[u].object.value.value?p[u].object.value.value:"";return r}};this.getDefaultFocusObject=function(){if(null!=p)for(var r=0;r<p.length;r++)if(p[r].objects){var u=
p[r].objects.getDefaultFocusObject();if(u)return u}else if((null==p[r].show||1==p[r].show)&&p[r].object){if(p[r].object.focusObject&&p[r].object.focusObject.getStatus&&1==p[r].object.focusObject.getStatus())return p[r].object.focusObject;if(p[r].flexGroup){if(-1==p[r].flexStatus)break;for(var z=0;z<p[r].flexCell.cells.length;z++)if(u=p[r].flexCell.cells[z].objects.getDefaultFocusObject())return u}}};this.doCursorAction=function(){for(var r=0;r<p.length;r++)if(p[r].allowCursor){xGlobal.focusObject=
p[r].object.focusObject;p[r].object.focusObject.doAction();break}};this.onKeyDown=function(r){if(40!=r.keyCode&&38!=r.keyCode)return!1;if(xGlobal.focusWidget==a)for(var u=p.length-1;0<=u;u--)if(p[u].objects){if(1==p[u].objects.onKeyDown(r)){if(40==r.keyCode)for(u++;u<p.length;u++){if(p[u].cells)for(r=0;r<p[u].cells.length;r++)if(1==p[u].cells[r].allowCursor)return xGlobal.selectedCellRow=p[u].objects,p[u].objects.doCursorAction(),!0}else if(38==r.keyCode)for(u--;0<=u;u--)if(p[u].cells)for(r=0;r<p[u].cells.length;r++)if(1==
p[u].cells[r].allowCursor)return xGlobal.selectedCellRow=p[u].objects,p[u].objects.doCursorAction(),!0;return!1}}else if(xGlobal.selectedCellRow==this)return!0};this.getCellObjectById=function(r){if(null!=p)for(var u=p.length-1;0<=u;u--)if(p[u].objects){var z=p[u].objects.getCellObjectById(r);if(z)return z}else if(p[u].object){if(p[u].id==r)return p[u].object;if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var H=0;H<p[u].flexCell.cells.length;H++)if(z=p[u].flexCell.cells[H].objects.getCellObjectById(r))return z}}};
this.getCellById=function(r){if(null!=p)for(var u=p.length-1;0<=u;u--)if(p[u].objects){var z=p[u].objects.getCellById(r);if(z)return z}else if(p[u].object){if(p[u].id==r)return p[u];if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var H=0;H<p[u].flexCell.cells.length;H++)if(z=p[u].flexCell.cells[H].objects.getCellById(r))return z}}};this.modifyGridCellSetById=function(r,u){(r=f.getCellById(r))&&xCopyTo(u,r)};this.click=function(r){(r=f.getCellById(r))&&r.click&&r.click()};this.onDblClick=function(r){if(null!=
p)for(var u=p.length-1;0<=u;u--)if(p[u].objects){var z=p[u].objects.onDblClick(r);if(z)return z}else if((null==p[u].show||1==p[u].show)&&p[u].object){if(p[u].object.isInCell(r.offsetX,r.offsetY,"dblClick"))return p[u].object.onDblClick(r),p[u].object;if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var H=0;H<p[u].flexCell.cells.length;H++)if(z=p[u].flexCell.cells[H].objects.onDblClick(r))return z}}};this.doMouseDown=function(r,u){if(null!=p)for(var z=p.length-1;0<=z;z--)if(p[z].objects){var H=
p[z].objects.doMouseDown(r,u);if(H)return H}else if((null==p[z].show||1==p[z].show)&&p[z].object){if(p[z].object.focusObject&&(H=!0,p[z].position&&"absolute"==p[z].position?null==u&&(H=!1):u&&(H=!1),H&&p[z].object.isInCell(r.offsetX,r.offsetY,"down-"+r.button)))return p[z].allowCursor&&(xGlobal.selectedCellRow=this),a&&a.getOption&&1!=a.getOption().isFocus||(r=xGlobal.focusWidget,xGlobal.focusWidget=a,r&&r!=a&&r.draw&&r.draw(!0)),p[z].object.focusObject;if(p[z].flexGroup){if(-1==p[z].flexStatus)break;
for(var C=0;C<p[z].flexCell.cells.length;C++)if(H=p[z].flexCell.cells[C].objects.doMouseDown(r,u))return H}}};this.onMouseDown=function(r){var u=f.doMouseDown(r,"top");return u?u:f.doMouseDown(r)};this.doMouseUp=function(r,u){if(null!=p)for(var z=p.length-1;0<=z;z--)if(p[z].objects){var H=p[z].objects.doMouseUp(r,u);if(H)return H}else if((null==p[z].show||1==p[z].show)&&p[z].object){if(p[z].object.focusObject&&(H=!0,p[z].position&&"absolute"==p[z].position?null==u&&(H=!1):u&&(H=!1),H&&p[z].object.isInCell(r.offsetX,
r.offsetY,"up"+r.button)))return p[z].object.focusObject;if(p[z].flexGroup){if(-1==p[z].flexStatus)break;for(var C=0;C<p[z].flexCell.cells.length;C++)if(H=p[z].flexCell.cells[C].objects.doMouseUp(r,u))return H}}};this.onMouseUp=function(r){var u=f.doMouseUp(r,"top");return u?u:f.doMouseUp(r)};this.doMouseMove=function(r,u){if(null!=p)for(var z=p.length-1;0<=z;z--)if(p[z].objects){var H=p[z].objects.doMouseMove(r,u);if(H)return H}else if((null==p[z].show||1==p[z].show)&&p[z].object){if(p[z].object.focusObject&&
(H=!0,p[z].position&&"absolute"==p[z].position?null==u&&(H=!1):u&&(H=!1),H&&p[z].object.isInCell(r.offsetX,r.offsetY,"over"))){if(p[z].object.focusObject.onMouseMove)p[z].object.focusObject.onMouseMove(r);return p[z].object.focusObject}if(p[z].flexGroup){if(-1==p[z].flexStatus)break;for(var C=0;C<p[z].flexCell.cells.length;C++)if(H=p[z].flexCell.cells[C].objects.doMouseMove(r,u))return H}}};this.onMouseMove=function(r){var u=f.doMouseMove(r,"top");return u?u:f.doMouseMove(r)};this.doGetMouseDownCell=
function(r,u){if(null!=p)for(var z=p.length-1;0<=z;z--)if(p[z].objects){var H=p[z].objects.doGetMouseDownCell(r,u);if(H)return H}else if((null==p[z].show||1==p[z].show)&&p[z].object){if(p[z].object.isInCell(r.offsetX,r.offsetY)){if(p[z].position&&"absolute"==p[z].position){if(null==u)break}else if(u)break;return p[z].object}if(p[z].flexGroup){if(-1==p[z].flexStatus)break;for(var C=0;C<p[z].flexCell.cells.length;C++)if(H=p[z].flexCell.cells[C].objects.doGetMouseDownCell(r,u))return H}}};this.getMouseDownCell=
function(r){var u=f.doGetMouseDownCell(r,"top");return u?u:f.doGetMouseDownCell(r)};this.getIdFromFocusObject=function(r){if(null!=p)for(var u=0;u<p.length;u++)if(p[u].objects){var z=p[u].objects.getIdFromFocusObject(r);if(z)return z}else if((null==p[u].show||1==p[u].show)&&p[u].object){if(p[u].object.focusObject==r)return(r=getBoundsVariableSet(p[u].bounds,g,null,a))?r.id:null;if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(z=0;z<p[u].flexCell.cells.length;z++){var H=p[u].flexCell.cells[u].objects.getIdFromFocusObject(r);
if(H)return H}}}};this.getFocusObjectFromId=function(r){if(null!=p)for(var u=0;u<p.length;u++)if(p[u].objects){var z=p[u].objects.getFocusObjectFromId(r);if(z)return z}else if((null==p[u].show||1==p[u].show)&&p[u].object){if((z=getBoundsVariableSet(p[u].bounds,g,null,a))&&z.id==r)return p[u].object.focusObject;if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var H=0;H<p[u].flexCell.cells.length;H++)if(z=p[u].flexCell.cells[H].objects.getFocusObjectFromId(r))return z}}};this.getFirstFoucsObject=
function(){if(null!=p)for(var r=0;r<p.length;r++)if(p[r].objects){var u=p[r].objects.getFirstFoucsObject();if(u)return u}else if((null==p[r].show||1==p[r].show)&&p[r].object){if(p[r].object.focusObject)return p[r].object.focusObject;if(p[r].flexGroup){if(-1==p[r].flexStatus)break;for(var z=0;z<p[r].flexCell.cells.length;z++)if(u=p[r].flexCell.cells[z].objects.getFirstFoucsObject())return u}}};this.getLastFoucsObject=function(){if(null!=p){for(var r,u=0;u<p.length;u++)if(p[u].objects){var z=p[u].objects.getLastFoucsObject();
z&&(r=z)}else if((null==p[u].show||1==p[u].show)&&p[u].object&&(p[u].object.focusObject&&(r=p[u].object.focusObject),p[u].flexGroup)){if(-1==p[u].flexStatus)break;for(z=0;z<p[u].flexCell.cells.length;z++)if(r=p[u].flexCell.cells[z].objects.getLastFoucsObject())return r}return r}};this.getPrevFoucsObject=function(r){if(null!=p)for(var u=0;u<p.length;u++)if(p[u].objects){var z=p[u].objects.getPrevFoucsObject(r);if(z)return z}else if((null==p[u].show||1==p[u].show)&&p[u].object){if(p[u].object.focusObject){if(p[u].object.focusObject==
r)return searchFocusObject;searchFocusObject=p[u].object.focusObject}if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var H=0;H<p[u].flexCell.cells.length;H++)if(z=p[u].flexCell.cells[H].objects.getPrevFoucsObject(r))return z}}};this.getNextFoucsObject=function(r){if(null!=p)for(var u=0;u<p.length;u++)if(p[u].objects){var z=p[u].objects.getNextFoucsObject(r);if(z)return z}else if((null==p[u].show||1==p[u].show)&&p[u].object){if(p[u].object.focusObject)if(p[u].object.focusObject==r)searchFocusObject=
r;else if(searchFocusObject)return p[u].object.focusObject;if(p[u].flexGroup){if(-1==p[u].flexStatus)break;for(var H=0;H<p[u].flexCell.cells.length;H++)if(z=p[u].flexCell.cells[H].objects.getNextFoucsObject(r))return z}}};this.setCellsPosition=function(r,u){if(u=void 0===u?null:u)return f.calcCellsRect(r,0,u);if(p){var z=0,H=0,C={};for(u=0;u<p.length;u++)if(p[u].objects)p[u].objects.setCellsPosition(r);else if(p[u].object){var U=void 0,J=void 0;p[u].position?(p[u].object.geometry={left:0,top:0,width:r.width,
height:r.height,size:{width:r.width/2,height:r.height/2}},p[u].width&&(p[u].object.geometry.size.width=p[u].width),p[u].height&&(p[u].object.geometry.size.height=p[u].height)):(p[u].object.geometry.left=p[u].left?p[u].left:p[u].right?p[u].width?r.width-p[u].width-p[u].right-p[u].object.getMargin().right:0:0,null!=p[u].top?(U=p[u].top,p[u].object.geometry.top=0>p[u].top?r.height+p[u].top:p[u].top):null!=p[u].bottom?null!=p[u].height&&(p[u].object.geometry.left=r.height-p[u].height-p[u].bottom-p[u].object.getMargin().bottom):
p[u].object.geometry.top=null,p[u].object.geometry.width=null==p[u].width?r.width:p[u].width,null==p[u].height?(p[u].object.geometry.height=null,H++):(p[u].object.geometry.height=p[u].height,J=p[u].height));null!=U&&null!=J&&(C[U]?C[U]<J&&(C[U]=J):C[U]=J)}for(var G in C)z+=C[G];G=0<H?(r.height-z)/H:0;for(u=z=0;u<p.length;u++)p[u].object&&null==p[u].position&&(null==p[u].object.geometry.height&&(p[u].object.geometry.height=G),z+=p[u].object.geometry.height);z=(r.height-z)/2;for(u=0;u<p.length;u++)p[u].object&&
null==p[u].position&&(null==p[u].object.geometry.top&&(p[u].object.geometry.top=z),z=p[u].object.geometry.top+p[u].object.geometry.height)}return{width:r.width,height:r.height}};this.arrangeRowCells=function(r){for(var u=0;u<p.length;u++)p[u].objects?p[u].objects.calcRowCellsWidth(r):p[u].object&&null==p[u].width&&(p[u].object.geometry.width=r.width)};this.calcRowCellsWidth=function(r){for(var u=0,z=0,H=!0,C,U=0;U<p.length;U++)null!=p[U].width&&("auto"==p[U].width?p[U].autoWidth&&(C=p[U].autoWidth+
16,u+=C):u+=p[U].width,z+=1);if(z<p.length)for(C=(r.width-u)/(p.length-z),r=p[0].object.left?p[0].object.left:0,U=0;U<p.length;U++)p[U].object&&(p[U].object.geometry.left=r,null!=p[U].width?"auto"==p[U].width?p[U].autoWidth?p[U].object.geometry.width=p[U].autoWidth+16:H=!1:p[U].object.geometry.width=p[U].width:p[U].object.geometry.width=C,r+=p[U].object.geometry.width);return H};this.getCells=function(){return p};var v=function(r,u){if(u=u.getCells())for(var z=0;z<u.length;z++)if(u[z])if(u[z].cells){var H=
v(r,u[z].objects);if(H)return H}else if(u[z].object&&u[z].type){H=r.object;var C=u[z].object;r.object=null;u[z].object=null;if(xIsSame(r,C.save))return r.object=C;r.object=H;u[z].object=C}},A=function(r,u,z){var H=!1;if(r&&(r=r.getCells()))for(var C=0;C<r.length;C++)if(r[C].cells)A(r[C].objects,u,z);else{var U=v(r[C],u);U&&z==U&&(H=!0)}return H?z:null};this.migrateCellObjects=function(r,u){return A(f,r,u)};this.isSame=function(r){if(null==p||null==r||p.length!=r.length)return!1;for(var u=0;u<p.length;u++){if(p[u].objects&&
1!=p[u].objects.isSame(r[u].cells))return!1;for(var z in p[u])if("autoWidth"!=z&&"object"!=z&&"objects"!=z&&"size"!=z&&"index"!=z&&1!=xLeftIsSame(r[u][z],p[u][z]))return!1}return!0};this.calcCellsRect=function(r,u,z,H){if(null==p)return{h:z.lineHeight,c:0,fw:0,fc:0,d:0,width:r.left+r.width,height:r.top,rows:0};var C={left:r.left,top:r.top,width:r.width,height:r.height},U=0,J=0,G=r.left,B=0,L=0,ba=0;u+=1;0<p.length&&p[p.length-1].isMore&&(p[p.length-1].show=!1,p[p.length-1].more={cells:p});for(var N=
0;N<p.length;N++)if(p[N].objects){if(p[N].objects){"rect"==p[N].type&&(C.left=G,C.width-=G);var E=p[N].objects.calcCellsRect(C,u,z,p[N].size);if("rect"==p[N].type){J+=1;B++;p[N].size&&p[N].size.width?(E.fw=p[N].size.width,G+=E.fw):G=E.fw;p[N].objects.setCellsHeight(C,E.h,z);var V={left:C.left,top:r.top,width:C.width,height:r.height};var F=0;1<J&&(F=(V.width-E.fw)/(J-1),0>F&&(F=0));V=p[N].objects.setCellsWidth(V,F);p[N].objects.needCalcWidth=0==V?!0:!1;U<E.h&&(U=E.h)}else p[N].width&&(E.fw=p[N].width,
E.c=1),J+=E.c,G="hBox"==p[N].type?E.fw:G+E.fw,p[N].objects.setCellsHeight(C,E.h,z),"vBox"==c&&0<J&&(V={left:r.left,top:r.top,width:r.width,height:r.height},F=0,0<J-E.fc&&(F=(V.width-E.fw)/(J-E.fc),0>F&&(F=0)),p[N].width&&(V.width=p[N].width),V=p[N].objects.setCellsWidth(V,F),p[N].objects.needCalcWidth=0==V?!0:!1,J=0),C.top+=+E.h,"vBox"==p[N].type?U<E.h&&(U=E.h):U+=E.h}}else{J+=1;p[N].object&&(p[N].object.geometry.left=G,p[N].object.geometry.width=r.width,p[N].object.geometry.top=r.top+U);null!=p[N].width&&
("auto"==p[N].width?p[N].autoWidth&&(w=p[N].autoWidth+16+5,p[N].object.geometry.width=w,G+=w):(w=p[N].width,p[N].object.geometry.width=w,G+=p[N].width),B+=1);if(p[N].height)if("auto"==p[N].height){E=z.fontSize;var M=z.fontFamily;E=getHeight(a.getContext(),p[N].object.value.value,E+"px "+M,z.lineHeight,p[N].object.geometry.width-18);p[N].object.geometry.height=E;E>U&&(U=E)}else L=p[N].height,p[N].object.geometry.height=L,p[N].height>U&&(U=p[N].height);else z&&(L=z.lineHeight,null==L&&z.option&&z.option.lineHeight?
(L=z.option.lineHeight,p[N].object.geometry.height=L,z.option.lineHeight>U&&(U=z.option.lineHeight)):(p[N].object.geometry.height=L,z.lineHeight>U&&(U=z.lineHeight)));H&&L&&(ba>=H.maxRows?p[N].show=!1:(1!=p[N].isMore&&(p[N].show=!0),E=r.width,H.width&&(E=H.width),p[N].object.geometry.left+w>r.left+E-2&&(ba>=H.maxRows-1?(p[N].show=!1,p[p.length-1].isMore&&0==p[p.length-1].show&&(p[N-1].show=!1,p[p.length-1].object.geometry={left:p[N-1].left,top:p[N-1].top,width:p[N-1].width,height:p[N-1].height},p[p.length-
1].show=!0,p[p.length-1].more.begin=N)):1!=p[N].isMore&&(U+=L,G=r.left+w,p[N].object.geometry.left=G,ba++))),p[N].row=ba);p[N].top&&(U+=p[N].top);if(p[N].flexGroup){C.top+=U;if(null!=p[N].flexStatusBounds&&0<p[N].flexStatusBounds.length)for(E=0;E<p[N].flexStatusBounds.length;E++)M=p[N].flexStatusBounds[E],null!=M.bound&&"variables."==M.bound.slice(0,10).toLowerCase()&&g&&g[M.bound.slice(10)]&&(p[N].flexStatus=g[M.bound.slice(10)]);if(-1==p[N].flexStatus)break;if(p[N].flexCell)for(M=0;M<p[N].flexCell.cells.length;M++)if(E=
p[N].flexCell.cells[M].objects.calcCellsRect(C,u,z))p[N].flexCell.cells[M].objects.setCellsHeight(C,E.h,z),V={left:C.left,top:C.top,width:C.width,height:C.height},F=0,0<E.c-E.fc&&(F=(V.width-E.fw)/(E.c-E.fc),0>F&&(F=0)),V=p[N].flexCell.cells[M].objects.setCellsWidth(V,F),p[N].flexCell.cells[M].objects.needCalcWidth=0==V?!0:!1,C.top+=+E.h,U+=E.h}}return{h:U,c:J,fw:G,fc:B,d:u-1,width:C.width,height:C.top,rows:ba}};this.setCellsHeight=function(r,u,z){for(var H=0;H<p.length;H++)if(p[H].object)if("rect"==
c)0==p[H].show?p[H].object.geometry={left:0,top:0,width:0,height:0}:(p[H].height?h=p[H].height:z&&(z.lineHeight?h=z.lineHeight:z.option&&z.option.lineHeight&&(h=z.option.lineHeight)),p[H].row?(p[H].object.geometry.top=r.top+p[H].row*h,p[H].object.geometry.height=h):p[H].object.geometry={left:r.left,top:r.top,width:r.width,height:h});else if("hBox"==c||"group"==c)if(1==p.length||null==p[H].height||"group"==c?(p[H].object.geometry={left:r.left,top:r.top,width:r.width,height:u},p[0].flexGroup&&(z.lineHeight?
p[H].object.geometry.height=z.lineHeight:z.option&&z.option.lineHeight&&(p[H].object.geometry.height=z.option.lineHeight))):p[H].object.geometry={left:r.left,top:r.top+u/2-p[H].height/2,width:r.width,height:p[H].height},p[H].flexGroup&&-1==p[H].flexStatus)break};this.setCellsWidth=function(r,u,z,H){for(var C=!0,U=0,J=r.left,G=0,B=0,L=0;L<p.length;L++)if(p[L].objects){var ba=r.left;C=p[L].objects.setCellsWidth(r,u,null==p[L].width?z:p[L].width,null==p[L].height?H:p[L].height);"rect"==p[L].type?p[L].size&&
p[L].size.width&&(r.left=ba+p[L].size.width):"vBox"==c?r.left=J:p[L].width&&(r.left=ba+p[L].width)}else{if(p[L].object){p[L].object.geometry.left=r.left;if(null!=p[L].width)if("auto"==p[L].width){if(null==p[L].show||1==p[L].show)p[L].autoWidth?p[L].object.geometry.width=p[L].autoWidth+16+5:C=!1}else p[L].object.geometry.width=p[L].width;else z?p[L].object.geometry.width=z:(p[L].object.geometry.width=0,B++);if("hBox"==c)r.left+=p[L].object.geometry.width;else if("rect"==c){if(null==p[L].show||1==p[L].show)p[L].row&&
p[L].row!=U&&(r.left=J,p[L].object.geometry.left=r.left,U=p[L].row),r.left+=p[L].object.geometry.width}else"group"!=c||null!=p[L].show&&1!=p[L].show||(r.left+=p[L].object.geometry.width);G+=p[L].object.geometry.width}if(p[L].flexGroup&&-1==p[L].flexStatus)break}"vBox"==c&&(r.left+=r.width);if(0<B&&r.width>G)for(r.left=J,L=0;L<p.length;L++)!p[L].objects&&p[L].object&&(p[L].object.geometry.left=r.left,null==p[L].width&&(p[L].object.geometry.width=(r.width-G)/B),r.left+=p[L].object.geometry.width);return C};
this.getCellsSize=function(){if(null==p)return{width:0,height:0};for(var r=0,u=0,z=0;z<p.length;z++)if(p[z].objects){var H=p[z].objects.getCellsSize();H&&(r<H.width&&(r=H.width),u<H.height&&(u=H.height))}else null==p[z].position&&p[z].object&&(r<p[z].object.geometry.left+p[z].object.geometry.width&&(r=p[z].object.geometry.left+p[z].object.geometry.width),u<p[z].object.geometry.top+p[z].object.geometry.height&&(u=p[z].object.geometry.top+p[z].object.geometry.height));return{width:r,height:u}};this.setMarkValues=
function(r){for(var u=0;u<p.length;u++)p[u].cells?p[u].objects&&p[u].objects.setMarkValues(r):null!=p[u]&&p[u].object.setMarkValues(r)};this.setValueText=function(r){null==p[0].object&&(p[0].object=new xCell(a,p[0],g,k,q));p[0].object.setValue({value:r,type:"t"})};this.setValue=function(r,u,z,H,C,U,J,G){U=void 0===U?null:U;J=void 0===J?!1:J;G=void 0===G?!1:G;if(null!=p)for(var B=0;B<p.length;B++)if(p[B].cells)null==p[B].objects&&(p[B].objects=new xCells(a,p[B].cells,p[B].type,g,k,q)),p[B].objects.setValue(r,
u,z,H,C,U);else if(p[B].group)null==p[B].objects&&(p[B].objects=new xCells(a,p[B].group,p[B].type,g,k,q)),p[B].objects.setValue(r,u,z,H,C,U);else{var L=null,ba=null,N=void 0;null!=p[B].href&&(N=getFieldData(p[B].href,r,u,z,G),null==N.value&&null!=p[B].href.link?N={value:p[B].href.link,type:"c"}:null==N.value&&null!=U&&null!=U[r]&&(N={value:U[r][p[B].href.field],type:"c"}));if(p[B].title){if(L={value:p[B].title,type:"c"},g&&L&&L.value&&"String"==L.value.constructor.name&&0<=L.value.indexOf("{{"))for(var E in g){var V=
"{{ "+E+" }}";L.value=L.value.replace(V,g[E])}}else if(p[B].variable){if(V=p[B].variable.split("."),null==V[1]&&(V[1]=V[0]),L={value:g[V[1]],type:"c"},g&&L&&L.value&&"String"==L.value.constructor.name&&0<=L.value.indexOf("{{"))for(E in g)V="{{ "+E+" }}",L.value=L.value.replace(V,g[E])}else if(p[B].field){if(L=getFieldData(p[B],r,u,z,G),p[B].baseField&&(ba=getFieldDataWithField(p[B].baseField,p[B],r,u,z,G)),null==L.value&&null!=U&&null!=U[r]&&(L.value=U[r][p[B].field]),p[B].spareField&&(""==L.value||
""==L.value))for(V=0;V<p[B].spareField.length;V++){var F=p[B].field;p[B].field=p[B].spareField[V];var M=getFieldData(p[B],r,u,z,G);if(M.value&&""!=M.value){L=M;p[B].field=F;break}}}else if(p[B].fieldRemark){if(u)for(V=p[B].fieldRemark.split("["),F=0;F<u.length;F++)if(u[B]&&u[B].table&&u[B].table.field&&V[0].toLowerCase()==u[B].table.info.name&&(M=parseInt(V[1]),0<=M&&M<u[B].table.field.length)){L={type:"t",value:u[B].table.field[M][2]?u[B].table.field[M][2]:u[B].table.field[M][0]};break}}else p[B].value?
L=p[B].value:p[B].type&&("checkbox"==p[B].type?L={value:C,type:"checkbox"}:p[B].option&&"xSaftButton"==p[B].type&&"multiSelect"==p[B].option.type?L={value:C,type:"multiSelect"}:null==p[B].object&&(p[B].object=new xCell(a,p[B],g,k,q),p[B].object.isa=f));L&&(p[B].option&&p[B].option.actionBounds&&null!=p[B].option.actionBounds.row&&(r=p[B].option.actionBounds.row),L.row=r);null==p[B].object&&(p[B].object=new xCell(a,p[B],g,k,q),p[B].object.isa=f);p[B].valueMap?null!=p[B].valueMap[L.value]&&(L.value=
p[B].valueMap[L.value],L.type="t"):p[B].valueMapFunction&&(L.value=p[B].valueMapFunction(L.value));p[B].superscript?L.superscript=p[B].superscript:p[B].subscript&&(L.subscript=p[B].subscript);p[B].sign&&(L.sign=p[B].sign);V=p[B].object.value;p[B].object.setValue(L);ba&&(p[B].object.baseValue=ba);V&&"auto"==p[B].width&&V.value!=L.value&&(f.needCalcWidth=!0,p[B].autoWidth=null);null!=N&&(p[B].object.linkValue=N);if(p[B].bounds)if("Array"==p[B].bounds.constructor.name)for(L=0;L<p[B].bounds.length;L++)p[B].bounds[L].field&&
(p[B].bounds[L].tableData=getTableData(p[B].bounds[L].field,u,r)),p[B].bounds[L].enable&&p[B].bounds[L].enable.field&&(p[B].bounds[L].enable.tableData=getTableData(p[B].bounds[L].enable.field,u,r));else p[B].bounds.field&&(p[B].bounds.tableData=getTableData(p[B].bounds.field,u,B)),p[B].bounds.enable&&p[B].bounds.enable.field&&(p[B].bounds.enable.tableData=getTableData(p[B].bounds.enable.field,u,r));if(1==J&&p[B].option&&p[B].option.selector&&p[B].option.selector.data)for(var X in p[B].option.selector.data)L=
p[B].option.selector.data[X],null!=L.field&&(p[B].selectorValue||(p[B].selectorValue={}),p[B].selectorValue[X]=getTableData(L.field,u,r));if(p[B].flexCell)for(L=0;L<p[B].flexCell.cells.length;L++)null==p[B].flexCell.cells[L].objects&&(p[B].flexCell.cells[L].objects=new xCells(a,p[B].flexCell.cells[L].cells,p[B].flexCell.cells[L].type,g,k,q)),p[B].flexCell.cells[L].objects.setValue(r,u,z,H,C,U)}};this.draw=function(r,u,z,H,C){var U=f.drawCells(r,u,z,H,C);if(U)return U;f.drawCells(r,u,z,H,C,"top")};
this.drawCells=function(r,u,z,H,C,U){if(null==p)return!1;var J=!1;f.rect=C;if(null==U&&xGlobal.selectedCellRow==this&&xGlobal.focusWidget==a){r.fillStyle=u.cursorBackgroundColor;var G=p.length-1;var B=z+p[0].object.geometry.left;var L=H+p[0].object.geometry.top;var ba=p[G].object.geometry.left+p[G].object.geometry.width-p[0].object.geometry.left;G=p[G].object.geometry.height;r.fillRect(B,L,ba,G)}null==U&&xGlobal.selectedCellRow==this&&1==p[0].alwaysCursor&&(r.fillStyle=u.cursorBackgroundColor,G=p.length-
1,B=z+p[0].object.geometry.left,L=H+p[0].object.geometry.top,ba=p[G].object.geometry.left+p[G].object.geometry.width-p[0].object.geometry.left,G=p[G].object.geometry.height,r.fillRect(B,L,ba,G));for(B=0;B<p.length;B++)if(p[B].objects)1==p[B].objects.drawCells(r,u,z,H,C,U)&&(f.calcCellsRect(C,0,u),p[B].objects.drawCells(r,u,z,H,C,U));else if(p[B].object){if(null==p[B].show||1==p[B].show){null!=p[B].title&&null!=p[B].titleProperty&&(L=p[B].titleProperty,null!=xLanguage.langMap[L]&&(p[B].title=xLanguage.langMap[L],
p[B].object.value.value=p[B].title));if(p[B].position&&"absolute"==p[B].position){if(U){p[B].object.setOffset(C.left,C.top);var N=p[B].object.draw(r,u,f.needCalcWidth,U)}}else null==U&&(p[B].object.setOffset(z,H),N=p[B].object.draw(r,u,f.needCalcWidth,U));if(p[B].flexGroup&&-1==p[B].flexStatus)break;1==f.needCalcWidth&&(p[B].autoWidth=N,J=!0)}if(p[B].flexCell)for(L=0;L<p[B].flexCell.cells.length;L++)p[B].flexCell.cells[L].objects.drawCells(r,u,z,H,C,U)}1==f.needCalcWidth&&(f.needCalcWidth=!1);return J};
this.getBoundsFieldData=function(r,u,z,H){if((r=getFieldIndex(r,z,H))&&"Array"==r.constructor.name){H=[];for(var C=0;C<r.length;C++)H[C]=getFieldDataFromIndex(r[C],u,z);return H}return getFieldDataFromIndex(r,u,z)};this.synchBoundValue=function(r){for(var u=0;u<p.length;u++)p[u].objects?p[u].objects.synchBoundValue(r):p[u].object&&p[u].object.synchBoundValue(r)}}
var makeCells=function(a,b,c){b=void 0===b?"hBox":b;if(null!=a){for(var g=[],k=0;k<a.length;k++)a[k].vBox?g[g.length]={type:"vBox",cells:makeCells(a[k].vBox,"hBox",c),width:a[k].width,height:a[k].height}:"Array"==a[k].constructor.name?a[k][0].flexGroup?(g[g.length]={type:"group",cells:makeCells(a[k],"hBox",c)},g[g.length-1].cells[0].callback=c):g[g.length]={type:b,cells:makeCells(a[k],"hBox",c)}:a[k].group?(g[g.length]={type:"rect",cells:makeCells(a[k].group,"group",c)},g[g.length-1].size=a[k].size):
(g[g.length]=xDeepCopy(a[k]),a[k].flexGroup&&(g[g.length-1].flexCell={type:"flexGroup",cells:makeCells(a[k].flexGroup,"hBox",c)}));return g}};var isInRect=function(a,b,c){return c&&a>=c.left&&a<=c.left+c.width&&b>=c.top&&b<=c.top+c.height?!0:!1},getBoundsVariableSet=function(a,b,c,g,k){if(a){null==c&&(c=0);var q,f,p;"Array"==a.constructor.name?c<a.length&&(p=a[c]):p=a;if(p){if(p.variable){var v=p.variable;var A=v.split(".");if(1<A.length)if("variables"==A[0]){if(b)for(k=JSON.parse(JSON.stringify(b)),g=1;g<A.length;g++)k[A[g]]&&("object"==typeof k[A[g]]?k=k[A[g]]:q=k[A[g]])}else if("parent"==A[0]&&g&&3==A.length)"option"==A[1]?g.getOption&&
(q=g.getOption(),q=q[A[2]]):"variables"==A[1]&&g.getVariables&&(q=g.getVariables(),q=q[A[2]]);else if("target"==A[0]&&k&&3==A.length)"option"==A[1]?k.getOption&&(q=k.getOption(),q=q[A[2]]):"variables"==A[1]&&k.getVariables&&(q=k.getVariables(),q=q[A[2]]);else if(k&&(g=k.page.getWidgetByElementId(A[0]),null==g&&(g=k.page.getWidgetByGroupId(A[0],!0)),g))if("option"==A[1]){if(g.getOption)for(q=g.getOption(),q=q[A[2]],g=3;g<A.length;g++)q=q[A[g]]}else"variables"==A[1]&&g.getVariables&&(q=g.getVariables(),
q=q[A[2]])}if(p.field)var r=p.tableData;null==q&&p.value&&(q=p.value);A=p.id;null==A&&(A=p.value);p.enable&&(p.enable.field?p.enable.tableData==p.enable.id&&(f=!0):p.enable.variable&&(v?(k=v.split("."),1==k.length&&(k[1]=k[0]),b[k[1]]&&b[k[1]]==p.enable.id&&(f=!0)):f=!1))}if(v){k=v.split(".");var u=1<k.length?k[1]:k[0]}if(null!=v||null!=u||null!=r||null!=A)return{id:A,boundData:q,variable:u,tableData:r,enable:f}}},drawRadioIcon=function(a,b,c,g){a.beginPath();var k=b.height<b.width?b.height:b.width,
q=b.left+k/2;b=b.top+k/2;a.strokeStyle=c;a.lineWidth=1;a.arc(q,b,k/2*.5,0,2*Math.PI);a.stroke();a.closePath();g&&(a.beginPath(),a.fillStyle=c,a.arc(q,b,k/2*.3,0,2*Math.PI),a.fill(),a.closePath())},drawCheckIcon=function(a,b,c,g){a.beginPath();var k=b.height<b.width?b.height:b.width,q=.5*k;b.left+=.2*k;b.width=q;b.top+=.2*k+1;b.width=q;a.strokeStyle=c;a.globalAlpha=.6;a.lineWidth=1;a.rect(b.left,b.top,q,q);a.stroke();a.closePath();a.globalAlpha=1;g&&(a.beginPath(),a.strokeStyle=c,a.lineWidth=2,a.moveTo(b.left+
2,b.top+q/2),a.lineTo(b.left+q/2-1,b.top+q-3),a.lineTo(b.left+q-2,b.top+2),a.stroke(),a.closePath())};
function xSaftButton(a,b,c,g,k,q){function f(T){if(1==aa()){var Y=r.getPage();Y&&Y.beginQuery("xButton");var O=!1,K=ia(),Z;u.beforeCallback&&u.beforeCallback(K);u.bounds?Z=getBoundsVariableSet(u.bounds,z,0,r,K):u.bound&&(Z=getBoundsVariableSet(u.bound,z,0,r,K));var pa=null;u.option&&"radio"==u.option.type&&z&&Z&&null!=z[Z.variable]&&(pa=z[Z.variable]!=Z.id?!1:!0);if(null!=u.flexStatus&&(u.flexStatus=1==u.flexStatus?-1:1,null!=u.flexStatusBounds&&0<u.flexStatusBounds.length))for(var oa=0;oa<u.flexStatusBounds.length;oa++){var Aa=
u.flexStatusBounds[oa];null!=Aa.bound&&"variables."==Aa.bound.slice(0,10).toLowerCase()&&z&&z[Aa.bound.slice(10)]&&(z[Aa.bound.slice(10)]=u.flexStatus)}if(u.option&&u.option.selector&&u.selectorValue){if("more"==u.selectorValue.id){if(u.option.selector.callback)u.option.selector.callback(u.option.selector);else if(u.more&&u.more.cells)if(null==N){N=new xSaftPopup(window);var ta=12;u&&u.fontSize&&(ta=u.fontSize);K=2*ta+1;25>K&&(K=25);Z=[];for(O=0;O<u.more.cells.length-1;O++)0==u.more.cells[O].show&&
(pa={type:"xSaftButton",textAlign:"left",title:u.more.cells[O].title,callback:v.onMoreSelected,selectorValue:u.more.cells[O].selectorValue,option:{type:u.option?u.option.type:"",borderRadius:0,paddingLeft:3,paddingTop:0,paddingRight:3,paddingBottom:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:1,normal:{color:"#000",backgroundColor:"transparent"},over:{color:"#000",backgroundColor:"#d8d8d8"},focus:{color:"#000",backgroundColor:"#ccc",borderColor:"#888"},focusOver:{color:"#000",backgroundColor:"#ddd",
borderColor:"#888"},push:{color:"#000",backgroundColor:"#aaa",borderColor:"#888"},selector:u.option?u.option.selector:null}},u.option&&(null!=u.option.boundsPage&&(pa.option.boundsPage=u.option.boundsPage),null!=u.option.actionBounds&&(pa.option.actionBounds=xDeepCopy(u.option.actionBounds))),Z[Z.length]=[pa]);N.createLayer({elements:[{element:{class:"xGrid",option:{useSystemScheme:!1,isFocus:!0,backgroundColor:"#fff",borderColor:"#888",color:"#000",colors:["rgba(255,255,255,1)","#FF503B","#72FFBE",
"#fff"],fontFamily:xGlobal.systemFont,margin:5,fontSize:ta,lineHeight:K,tabKey:"ArrowUp,ArrowDown",enableFocus:!1,setDefaultFocusObject:!0,scroller:{scrollerV:"show"}},variables:z,init:{vBox:Z}}}]});O=getScreenXY(r.getParentDiv());ta=O.x+A.left;O=O.y+A.top+A.height+(null==u.option.boxTop?0:u.option.boxTop);pa=null==u.option.boxWidth?A.width+24:u.option.boxWidth;var Q=u.option.boxHeight;null==Q&&(Q=12<Z.length?12*K+10:Z.length*K+10);N.setPosition(ta,O,pa,Q);N.show(!0);xGlobal.saftPopup=v}else v.closeBox();
Y&&Y.endQuery("xButton");return}T=u.option.selector;oa=T.variable.split(".");null==oa[1]&&(oa[1]=oa[0]);if(z[oa[1]]){oa=z[oa[1]];Aa=!1;for(var sa=0;sa<oa.length;sa++)if(oa[sa].name==T.name)for(var ra=0;ra<oa[sa].data.length;ra++)if(oa[sa].data[ra].id==u.selectorValue.id&&oa[sa].data[ra].value==u.selectorValue.value){oa[sa].data.splice(ra,1);Aa=!0;break}if(0==Aa){for(sa=0;sa<oa.length;sa++)if(oa[sa].name==T.name){var la=sa;"all"==u.selectorValue.id?oa[la].data=[]:oa[la].data[0]&&"all"==oa[la].data[0].id&&
(oa[la].data=[]);break}null==la&&(la=oa.length,oa[la]={name:T.name,title:T.title,data:[]});T.data&&("radio"==u.option.type?oa[la].data[0]=u.selectorValue:oa[la].data[oa[la].data.length]=u.selectorValue)}}r&&r.reCreateGrid&&(r.reCreateGrid(),r.query())}else if(u.filter&&r&&r.reCreateGrid&&(oa=u.option.filter.variable.split("."),null==oa[1]&&(oa[1]=oa[0]),z[oa[1]]&&"operatorIcon"==T))for(oa=z[oa[1]],sa=0;sa<oa.length;sa++)if(oa[sa].name==u.filter.name){oa[sa].data=[];r.reCreateGrid();r.query();break}if(xGlobal.browseCenter&&
u.callback_OpenWidthBrowseCenter)xGlobal.browseCenter.openWithBrowseCenter(ia(),u.callback_OpenWidthBrowseCenter);else{u.action&&r&&u.action.trim()&&(r.doAction(u.action),O=!0);if(u.callback){O=ia();O.preChooseSelf=pa;u.option&&u.option.actionBounds&&(r.getQueryData&&(Q=r.getQueryData()),ta=p(Q));O.boundValues=ta;try{r.synchBoundValue&&u.option.boundsAll?(r.synchBoundValue("enter",0,ta),r.page.synchBoundValue("enter",0,xDeepCopy(ta),r)):r.synchBoundValue&&u.option.boundsPage?r.page.synchBoundValue("enter",
0,xDeepCopy(ta),r):r.synchBoundValue&&r.synchBoundValue("enter",0,ta)}catch(Wa){}u.callback(O);O=!0}u.click&&r.submit(u.click);if(u.option&&(u.option.dialog&&(r.createDialog(u.option.dialog),O=!0),u.option.callback_object&&r.onDoCallback&&(r.onDoCallback(u.option.callback_object),O=!0),u.option.actionBounds)){O=!0;var Na;r.getQueryData&&(Na=r.getQueryData());if((ta=p(Na))&&0<ta.length){if(Z&&null!=Z.tableData)for(pa=0;pa<ta.length;pa++)ta[pa].variable=="variables."+Z.variable?ta[pa].value=Z.tableData:
u.bounds&&u.bounds[pa].tableData&&u.bounds[pa].variable==ta[pa].variable?ta[pa].value=u.bounds[pa].tableData:u.bound&&u.bound.tableData&&u.bound.variable==ta[pa].variable&&(ta[pa].value=u.bound.tableData);q&&q(ta,K.page!=K.thisPage?!0:!1);r.synchBoundValue&&u.option.boundsAll?(r.synchBoundValue("enter",0,ta),r.page.synchBoundValue("enter",0,xDeepCopy(ta),r)):r.synchBoundValue&&u.option.boundsPage?r.page.synchBoundValue("enter",0,xDeepCopy(ta),r):r.synchBoundValue&&r.synchBoundValue("enter",0,ta)}}u.option&&
"menuItem"==u.option.present&&xGlobal.popupMenu&&xGlobal.popupMenu.length&&(xGlobal.popupMenu[0].replaceMenuItem(u),xGlobal.popupMenu[0].closeBox(),xGlobal.popupMenu=null,xGlobal.autoPopupMenu=!1);1==O&&r&&r.reCreateGrid&&r.reCreateGrid(1)}Y&&Y.endQuery("xButton")}}function p(T){var Y=[],O=0;if(u.option)var K=u.option.actionBounds;if(null!=K){setCallback_VariablesValue(K,z);if("on-off"==u.option.type){for(var Z=0;Z<K.length;Z++)T=K[Z].variable.split("."),1<T.length&&"variables"==T[0]&&null!=z[T[1]]&&
(z[T[1]]=1==z[T[1]]?!1:!0,Y[O++]={bound:K[Z],value:z[T[1]]});return Y}for(Z=0;Z<K.length;Z++)if(K[Z].field&&3<=K[Z].field.split("[").length&&u.object&&u.object.isa&&null!=u.object.isa.index){var pa=u.object.isa.getBoundsFieldData(K[Z].field,u.object.isa.index,T,null);Y[O++]={bound:K[Z],value:pa.value}}else null!=K[Z].value?Y[O++]={bound:K[Z],value:K[Z].value}:K[Z].field?(pa=getFieldDataFromName(K[Z].field,v.value.row,T,z))&&(Y[O++]={bound:K[Z],value:pa.value}):K[Z].bound?"variables."==K[Z].bound.slice(0,
10).toLowerCase()&&z&&null!=z[K[Z].bound.slice(10)]&&(Y[O++]={bound:K[Z],value:z[K[Z].bound.slice(10)]}):K[Z].variable&&"variables."==K[Z].variable.slice(0,10).toLowerCase()&&z&&null!=z[K[Z].variable.slice(10)]&&(Y[O++]={bound:K[Z],value:z[K[Z].variable.slice(10)]});return Y}}var v=this,A,r=a,u=c,z=g,H=!1,C,U,J,G,B,L,ba,N,E,V=!0,F=null,M=null,X={aiDraw:!1,useSystemScheme:!0,operatorIconBackGround:["transparent"],operatorIconShow:"always",borderRadius:6,paddingLeft:3,paddingTop:3,paddingRight:3,paddingBottom:3,
marginLeft:3,marginTop:3,marginRight:3,marginBottom:3,urlSet:{normal:"",disable:"",over:"",focus:"",focusOver:"",push:"",checked:"",checkedOver:"",flag:""},normal:{color:"#000",backgroundColor:"#eee",borderColor:"#aaa",url:""},disable:{color:"#aaa",backgroundColor:"#eee",borderColor:"#aaa",url:""},over:{color:"#000",backgroundColor:"#d8d8d8",borderColor:"#999",url:""},focus:{color:"#000",backgroundColor:"#ccc",borderColor:"#888",url:""},focusOver:{color:"#000",backgroundColor:"#ddd",borderColor:"#888",
url:""},push:{color:"#000",backgroundColor:"#aaa",borderColor:"#888",url:""},checked:{color:"#000",backgroundColor:"#bbb",borderColor:"#888",url:""},checkedOver:{color:"#000",backgroundColor:"#aaa",borderColor:"#888",url:""},flag:{color:"#000",backgroundColor:"#eee",borderColor:"#888",url:""}};registerOption(xSaftButton,X);this.canUseSystemScheme=function(){return X.useSystemScheme};this.setOption=function(T){T&&T.option&&(0==T.show&&(V=!1),null!=T.option.useSystemScheme&&(X.useSystemScheme=T.option.useSystemScheme),
null!=T.option.padding&&(X.paddingLeft=T.option.padding,X.paddingTop=T.option.padding,X.paddingRight=T.option.padding,X.paddingBottom=T.option.padding),null!=T.option.paddingLeft&&(X.paddingLeft=T.option.paddingLeft),null!=T.option.paddingTop&&(X.paddingTop=T.option.paddingTop),null!=T.option.paddingRight&&(X.paddingRight=T.option.paddingRight),null!=T.option.paddingBottom&&(X.paddingBottom=T.option.paddingBottom),null!=T.option.margin&&(X.marginLeft=T.option.margin,X.marginTop=T.option.margin,X.marginRight=
T.option.margin,X.marginBottom=T.option.margin),null!=T.option.marginLeft&&(X.marginLeft=T.option.marginLeft),null!=T.option.marginTop&&(X.marginTop=T.option.marginTop),null!=T.option.marginRight&&(X.marginRight=T.option.marginRight),null!=T.option.marginBottom&&(X.marginBottom=T.option.marginBottom),null!=T.option.borderRadius&&(X.borderRadius=T.option.borderRadius,H=!0),null!=T.option.borderTopLeftRadius&&(H=!0,X.borderTopLeftRadius=T.option.borderTopLeftRadius),null!=T.option.borderTopRightRadius&&
(H=!0,X.borderTopRightRadius=T.option.borderTopRightRadius),null!=T.option.borderBottomLeftRadius&&(H=!0,X.borderBottomLeftRadius=T.option.borderBottomLeftRadius),null!=T.option.borderBottomRightRadius&&(H=!0,X.borderBottomRightRadius=T.option.borderBottomRightRadius),T.option.fontSize&&(X.fontSize=T.option.fontSize),T.option.fontBold&&(X.fontBold=T.option.fontBold),T.option.fontFamily&&(X.fontFamily=T.option.fontFamily),T.option.normal&&(X.normal=T.option.normal),T.option.disable&&(X.disable=T.option.disable),
T.option.over&&(X.over=T.option.over),T.option.focus&&(X.focus=T.option.focus),T.option.focusOver&&(X.focusOver=T.option.focusOver),T.option.push&&(X.push=T.option.push),T.option.checked&&(X.checked=T.option.checked),T.option.checkedOver&&(X.checkedOver=T.option.checkedOver),T.option.flag&&(X.flag=T.option.flag),T.option.urlSet&&(X.urlSet=T.option.urlSet),T.option.popupMenu&&(X.popupMenu=T.option.popupMenu),X.createIndex=T.createIndex)};this.setPosition=function(T){A={left:T.left,top:T.top,width:T.width,
height:T.height}};this.getOption=function(){return u};this.getParent=function(){return r};this.getThisOption=function(){return X};this.isInRect=function(T,Y,O){if(T>=A.left&&T<=A.left+A.width&&Y>=A.top&&Y<=A.top+A.height){if(B&&isInRect(event.offsetX,event.offsetY,B))1!=ba&&(ba=!0,r&&r.draw&&r.draw(!0));else{if(!u.option||!u.option.operatorIcon||"close"==u.option.operatorIcon||"close-float"==u.option.operatorIcon)if(X.popupMenu&&"down-2"!=O&&"up-2"!=O||X.popupMenu&&X.popupMenu.showRightClick&&"down-2"==
O){var K=!1;if(u.option&&"menuItem"==u.option.present){var Z=0;K=!0}else null==X.popupMenu.popupMode&&(X.popupMenu.popupMode="click-dropdown"),"over"==O?1==xGlobal.autoPopupMenu?(Z=0,K=!0):(Z=X.popupMenu.popupMode.indexOf("over-dropdown"),0<=Z?K=!0:(Z=X.popupMenu.popupMode.indexOf("over-icon"),0<=Z&&L&&T>=L.left&&T<=L.left+L.width&&Y>=A.top&&Y<=A.top+A.height&&(K=!0))):0<=O.indexOf("up")?0==xGlobal.autoPopupMenu?(Z=X.popupMenu.popupMode.indexOf("click-icon"),0<=Z?L&&T>=L.left&&T<=L.left+L.width&&
Y>=A.top&&Y<=A.top+A.height&&(K=xGlobal.autoPopupMenu=!0):K=xGlobal.autoPopupMenu=!0):(K=xGlobal.autoPopupMenu=!1,Z=0):(Z=X.popupMenu.popupMode.indexOf("click-dropdown"),0<=Z?K=!0:(Z=X.popupMenu.popupMode.indexOf("click-icon"),0<=Z&&L&&T>=L.left&&T<=L.left+L.width&&Y>=A.top&&Y<=A.top+A.height&&(K=!0)));if(null==N)if(1==K&&(!X.popupMenu.showRightClick||X.popupMenu.showRightClick&&"down-2"==O))fa();else{if(xGlobal.popupMenu&&0<xGlobal.popupMenu.length)for(T=0;T<xGlobal.popupMenu.length;T++)if(xGlobal.popupMenu[T].isBrother(r)){for(i=
xGlobal.popupMenu.length-1;i>=T;i--)xGlobal.popupMenu[i].closeBox();break}}else!(0==K&&0<=Z)||X&&X.popupMenu&&X.popupMenu.showRightClick&&"up2"==O||(v.closeBox(),"up"==O&&(xGlobal.autoPopupMenu=!1))}else if(xGlobal.popupMenu&&0<xGlobal.popupMenu.length)for(T=0;T<xGlobal.popupMenu.length;T++)if(xGlobal.popupMenu[T].isBrother(r)){for(i=xGlobal.popupMenu.length-1;i>=T;i--)xGlobal.popupMenu[i].closeBox();break}1==ba&&(ba=!1,r&&r.draw&&r.draw(!0))}return!0}("over"!=O||u.option&&"menuItem"==u.option.present||
1==xGlobal.autoPopupMenu)&&v.closeBox()};this.onDblClick=function(T){u.callback_dblClick&&u.callback_dblClick(ia())};this.isBrother=function(T){if(r==T)return!0};this.isSameTargetButton=function(T){var Y=null;r.getActionTarget&&(Y=r.getActionTarget());if(null==Y||null==Y.target)Y={target:r,targetButton:v};return Y&&Y.targetButton==T?!0:!1};this.onMouseOut=function(T,Y){C=!1;if(0!=ba){ba=!1;var O=!0}xGlobal.mouseOverObject==v&&(xGlobal.mouseOverObject=null,u.option&&u.option.cursor&&(r.getCanvas().style.cursor=
"default"),O=!0);O&&r&&r.draw&&r.draw(!0);xGlobal.xTip&&xGlobal.xTip.hidden()};var aa=function(){if(null!=u.enable&&0==u.enable)return!1;if(u.bounds)for(var T=ia(),Y=0;Y<u.bounds.length;Y++){if(u.bounds[Y].enable){var O=getBoundsVariableSet(u.bounds[Y],z,Y,r,T);if(O)return 1==O.enable?!0:!1}}else if(u.bound&&(T=ia(),u.bound.enable&&(O=getBoundsVariableSet(u.bound,z,Y,r,T))))return 1==O.enable?!0:!1;return!0};this.setTitle=function(T){strButton=T};this.draw=function(T,Y){if(0!=V){E=T;var O=A.left,
K=A.top,Z=A.width,pa=A.height,oa=2;if(u.option&&"menuItem"==u.option.present)var Aa=0;else K+=X.marginTop,pa-=X.marginTop+X.marginBottom,O+=X.marginLeft,Z-=X.marginLeft+X.marginRight;T.save();var ta=X.borderRadius;var Q=X.normal;var sa=X.urlSet.normal;var ra="normal";var la=0,Na=!1,Wa=!1;if(v.value&&v.value.statusBound&&(0==v.value.statusBound.value||"N"==v.value.statusBound.value))Q=X.disable,sa=X.urlSet.disable,ra="disable";else if(C)xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?(Q=X.push,
sa=X.urlSet.push,ra="push"):(Q=X.focus,sa=X.urlSet.focus,ra="focus"),la=1,Na=!0;else if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v)Na=!0,xGlobal.focusObject&&xGlobal.focusObject==v?(Q=X.focusOver,sa=X.urlSet.focusOver,ra="focusOver"):(Q=X.over,sa=X.urlSet.over,ra="over",u.option&&u.option.cursor&&(r.getCanvas().style.cursor="pointer"),u.aiDraw&&!this.value.value&&(r.getCanvas().style.cursor="default"));else if(xGlobal.focusObject&&xGlobal.focusObject==v||1==G&&1==U)Na=!0,Q=X.focus,sa=X.urlSet.focus,
ra="focus";X.popupMenu&&X.popupMenu.popupMode&&(0<=X.popupMenu.popupMode.indexOf("-always")||xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v)&&(0<=X.popupMenu.popupMode.indexOf("leftIcon")?Wa=-1:0<=X.popupMenu.popupMode.indexOf("rightIcon")&&(Wa=1));var na=aa();if(0==na)Q=X.disable,sa=X.urlSet.disable,ra="disable";else if(u.option&&("radio"==u.option.type||"check"==u.option.type||"on-off"==u.option.type||"multiSelect"==u.option.type))if(u.option.selector&&u.selectorValue){Aa=u.option.selector;
var ha=Aa.variable.split(".");null==ha[1]&&(ha[1]=ha[0]);if(z[ha[1]]){var ea=z[ha[1]];for(ha=0;ha<ea.length;ha++)if(ea[ha].name==Aa.name){for(Aa=0;Aa<ea[ha].data.length;Aa++)if(ea[ha].data[Aa].id==u.selectorValue.id&&ea[ha].data[Aa].value==u.selectorValue.value){if("flat"==u.option.present||"button"==u.option.present||"menuItem"==u.option.present)xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?(Q=X.checkedOver,sa=X.urlSet.checkedOver):(Q=X.checked,sa=X.urlSet.checked),ra="checked";var ja=!0;break}break}}}else if("on-off"==
u.option.type){if(ja=!1,ea=u.option.actionBounds)for(Aa=0;Aa<ea.length;Aa++)if(ha=ea[Aa].variable.split("."),1<ha.length&&"variables"==ha[0]){ja=null!=z[ha[1]]?z[ha[1]]:!0;1==ja&&(xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?(Q=X.checkedOver,sa=X.urlSet.checkedOver):(Q=X.checked,sa=X.urlSet.checked),ra="checked",Na=!0);break}}else if("multiSelect"==u.option.type)v.value&&v.value.value?(ja=!0,1==ja&&(xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?(Q=X.checkedOver,sa=X.urlSet.checkedOver):
(Q=X.checked,sa=X.urlSet.checked),ra="checked",Na=!0)):ja=!1;else if(null!=u.option.status)"checked"==u.option.status&&(Q=xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?X.checkedOver:X.checked,sa=xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?X.urlSet.checkedOver:X.urlSet.checked,ra="checked",Na=!0),ja="checked"==u.option.status?!0:!1;else if(Aa=ia(),u.bounds?ha=getBoundsVariableSet(u.bounds,z,null,r,Aa):u.bound&&(ha=getBoundsVariableSet(u.bound,z,null,r,Aa)),ha&&ha.boundData){var da=function(rb,
zb,Jb){if(rb&&"Array"==rb.constructor.name)for(var Cb=0;Cb<rb.length;Cb++){var Db=da(rb[Cb],zb,Jb);if(Db)return Db}else if(null!=rb&&(zb.id==rb||zb.tableData==rb))return"flat"==u.option.present||"button"==u.option.present||"radio"==u.option.present||"menuItem"==u.option.present?{checked:!0,colorSet:xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?Jb.checkedOver:Jb.checked,urlSet:xGlobal.mouseOverObject&&xGlobal.mouseOverObject==v?Jb.urlSet.checkedOver:Jb.urlSet.checked,buttonState:"checked",drawBackground:!0}:
{checked:!0}};if(Aa=da(ha.boundData,ha,X))Aa.colorSet&&(Q=Aa.colorSet),Aa.urlSet&&(sa=Aa.urlSet),Aa.buttonState&&(ra=Aa.buttonState),Aa.drawBackground&&(Na=Aa.drawBackground),ja=Aa.checked}1!=ja&&r.preActiveButton==v&&(Q=X.flag,sa=X.urlSet.flag);0==na&&(Q=X.disable,sa=X.urlSet.disable,ra="disable");na=Q.color;Aa=Q.backgroundColor;ha=Q.borderColor;if(null==ha||null==u.option||null==u.option.present&&("radio"==u.option.type||"check"==u.option.type||"on-off"==u.option.type))ha="transparent";0==Y&&(!u.option||
"flat"!=u.option.present&&"menuItem"!=u.option.present?0<ta||1==H?u.aiDraw?this.value.value&&fillRoundRect(T,O,K,Z,pa,ta,Aa,ha,X):fillRoundRect(T,O,K,Z,pa,ta,Aa,ha,X):u.aiDraw?this.value.value&&(T.beginPath(),T.strokeStyle=ha,T.fillStyle=Aa,T.rect(O,K,Z,pa),T.fill(),T.stroke(),T.closePath()):(T.beginPath(),T.strokeStyle=ha,T.fillStyle=Aa,T.rect(O,K,Z,pa),T.fill(),T.stroke(),T.closePath()):1!=Na||"radio"!=u.option.type&&"check"!=u.option.type&&"on-off"!=u.option.type&&"menuItem"!=u.option.present||
(T.beginPath(),T.fillStyle=Aa,T.fillRect(O-1,K,Z+2,pa),T.closePath()));if(u.option&&"transparent"==u.option.present)return T.restore(),0;Q.borderBottom&&0==Y&&(T.beginPath(),ta=Q.borderBottom.split(" "),T.lineWidth=parseInt(ta[0]),T.strokeStyle=ta[2],Na=0,ta[3]&&(Na=parseInt(ta[3]),8>Z-Na&&(Na=Z-8)),T.moveTo(O+Na/2,K+pa),T.lineTo(O+Z-Na/2,K+pa),T.stroke(),T.closePath(),T.lineWidth=1);ta=xGlobal.isMobile?16:12;X.fontSize?ta=X.fontSize:u&&u.fontSize?ta=u.fontSize:b&&b.fontSize&&(ta=b.fontSize);Na="";
if(X.fontBold||u&&u.fontBold||b&&b.fontBold||Q.fontBold)Na+="bold ";Na=X.fontFamily?Na+(ta+"px "+X.fontFamily):u&&u.fontFamily?Na+(ta+"px "+u.fontFamily):b&&b.fontFamily?Na+(ta+"px "+b.fontFamily):Na+(ta+"px "+xGlobal.systemFont);T.font=Na;K+=X.paddingTop;pa-=X.paddingTop+X.paddingBottom;O+=X.paddingLeft;Z-=X.paddingLeft+X.paddingRight;Aa="button";if(u.option&&u.option.type&&"flat"!=u.option.present&&"button"!=u.option.present&&(Aa=u.option.type,null==u.icon&&("check"==Aa||"radio"==Aa))){if(u.option&&
"menuItem"==u.option.present){var Oa={left:O+la+2,top:K+la,width:pa,height:pa};O+=Oa.width+6;Z-=Oa.width+6}else Oa={left:O+la,top:K+la,width:pa,height:pa},O+=Oa.width,Z-=Oa.width;0==Y&&(null!=ja?"check"==Aa?drawCheckIcon(T,Oa,na,ja):drawRadioIcon(T,Oa,na,ja):"check"==Aa?drawCheckIcon(T,Oa,na,0):drawRadioIcon(T,Oa,na,0));oa+=Oa.width}T.fillStyle=na;T.textBaseline=u.textBaseline||"middle";T.textAlign=u.textAlign?u.textAlign:"center";ja=v.value&&v.value.value&&!u.hiddenText?v.value.value:u.title&&!u.hiddenText?
u.title:"";v.value&&"multiSelect"==this.value.type&&(ja="");Na=O;if(u.option&&"menuItem"==u.option.present){if(null!=u.icon||"check"!=Aa&&"radio"!=Aa)Na=O+2,O+=pa+6,Z-=pa;Aa=O;X.popupMenu&&(T.beginPath(),T.fillStyle=na,T.moveTo(O+Z-10,K+pa/2),T.lineTo(O+Z-16,K+pa/2-4),T.lineTo(O+Z-16,K+pa/2+4),T.lineTo(O+Z-10,K+pa/2),T.stroke(),T.fill(),T.closePath())}else if("center"==T.textAlign){if(Aa=O+Z/2,u.icon||sa)if(Z>=pa){if(ja){var Pa=T.measureText(ja).width;Na=Aa-Pa/2-pa/2-2}else Na=Aa-pa/2;Aa+=pa/2}else Na=
Aa-Z/2}else if("right"==T.textAlign)Aa=O+Z;else if(Aa=O,u.icon||sa)Aa+=pa+6;u.option&&(u.option.iconColor||u.option.iconType)&&(Aa+=16);if(0==Y){ea=Aa+la;var hb=K+pa/2+la+(null!=xGlobal.systemCellOffsetY?xGlobal.systemCellOffsetY:0);if(Wa){T.beginPath();T.strokeStyle=na;T.lineWidth=2;1==Wa?(Pa=T.measureText(ja).width,L={left:O+Pa+6,top:K+2,width:8,height:8},"center"==T.textAlign&&(L.left=O+Z/2+Pa/2+2),X.popupMenu.iconRight&&(L.left=O+Z-L.width-3)):(L={left:A.left,top:K+2,width:8,height:8},T.textAlign=
"left",ea=A.left+12);null!=Q.textAlpha&&(T.globalAlpha=Q.textAlpha);if(u&&u.maxLines&&1<=u.maxLines)drawTextAutoLine(ja,T,ea,hb,pa/u.maxLines,u.width,pa,u.maxLines,v,u);else{ha=Z;!u.option||"close"!=u.option.operatorIcon&&"close-float"!=u.option.operatorIcon||(ha-=pa);if(3<ja.length&&T.measureText(ja).width>ha+ta){for(Pa=ja.length;0<ja.length&&T.measureText(ja).width>ha+ta;)ja=ja.slice(0,Pa-1),Pa--;ja+="...";1==Wa&&(Pa=T.measureText(ja).width,L={left:O+Pa+3,top:K+2,width:8,height:8},X.popupMenu.iconRight&&
(L.left=O+Z-L.width-3),"center"==T.textAlign&&(L.left=O+Z/2+Pa/2+2))}T.fillText(ja,ea,hb)}null!=Q.textAlpha&&(T.globalAlpha=1);T.moveTo(L.left+la,hb-2);T.lineTo(L.left+la+L.width/2,hb+2);T.lineTo(L.left+la+L.width,hb-2);T.stroke();T.lineWidth=1;T.closePath()}else{null!=Q.textAlpha&&(T.globalAlpha=Q.textAlpha);ba&&B&&1==la&&(ea--,hb--);if(u&&u.maxLines&&1<=u.maxLines)drawTextAutoLine(ja,T,ea,hb,pa/u.maxLines,u.width,pa,u.maxLines,v,u);else{ha=Z;!u.option||"close"!=u.option.operatorIcon&&"close-float"!=
u.option.operatorIcon||(ha-=pa);if(3<ja.length&&T.measureText(ja).width>ha+ta){for(Pa=ja.length;0<ja.length&&T.measureText(ja).width>ha;)ja=ja.slice(0,Pa-1),Pa--;ja+="..."}T.fillText(ja,ea,hb)}null!=Q.textAlpha&&(T.globalAlpha=0);if(u.option&&u.option.operatorIcon&&""!=u.option.operatorIcon){T.beginPath();Q=0;if("close"==u.option.operatorIcon||"close-float"==u.option.operatorIcon){if(B={left:O+Z-(12>pa/2?12:pa/2),top:K+pa/2-4.5,width:9,height:9},ba&&(T.lineWidth=2,Q=1),"close"==u.option.operatorIcon||
"close-float"==u.option.operatorIcon&&xGlobal.mouseOverObject==v)T.strokeStyle=na,T.moveTo(B.left+la-Q+1,B.top+la+1-Q),T.lineTo(B.left+la+Q+1+B.width-2,B.top+la+1+B.height-2+Q),T.moveTo(B.left+la-Q+1,B.top+la+1+B.height-2+Q),T.lineTo(B.left+la+Q+1+B.width-2,B.top+la+1-Q),T.stroke(),T.lineWidth=1}else B={left:O+Z-(24>pa/2?24:pa/2)+la,top:K+pa/2-8+la,width:16,height:16},ba&&(T.strokeStyle=na,fillRoundRect(T,B.left,B.top,B.width,B.height,2,"transparent",na,X)),T.fillStyle=na,T.textAlign="center",T.fillText(u.option.operatorIcon,
B.left+B.width/2,B.top+B.height/2);T.closePath();B.left-=3;B.top-3;B.width+=6;B.height+=6}}if(u.mark&&u.mark.values)var Ma=u.mark.values;if(Ma)for(T.fillStyle=null!=u.mark.color?u.mark.color:"#ff8000",ha=0;ha<Ma.length;ha++)Q=ja.toLowerCase().indexOf(Ma[ha]),0<=Q&&(0==Q?T.fillText(ja.slice(0,Ma[ha].length),ea,hb):(Pa=T.measureText(ja.slice(0,Q)).width,T.fillText(ja.slice(Q,Q+Ma[ha].length),ea+Pa,hb)))}else oa+=T.measureText(ja).width,u.option&&null!=u.option.operatorIcon&&(oa+=16),(u.icon||sa)&&Z>=
pa&&(oa+=pa+6);if(u.flexStatus){if(null!=u.flexStatusBounds&&0<u.flexStatusBounds.length)for(Ma=0;Ma<u.flexStatusBounds.length;Ma++)Q=u.flexStatusBounds[Ma],null!=Q.bound&&"variables."==Q.bound.slice(0,10).toLowerCase()&&z&&z[Q.bound.slice(10)]&&(u.flexStatus=z[Q.bound.slice(10)]);T.fillStyle=na;Wa=A.height;Ma=.2*Wa;Q=A.top+Wa/2+la;oa+=Wa;0==Y&&(Wa=function(rb,zb,Jb,Cb,Db){try{null==F&&(F=new Image,F.src=rb),F&&-1==F.src.indexOf(rb)&&(F=new Image,F.src=rb),null==M&&(F.onload=function(cb){M=!0;F&&
T.drawImage(F,zb,Jb,Cb,Db)},M=!0),1==M&&F&&T.drawImage(F,zb,Jb,Cb,Db)}catch(cb){console.log(cb)}},na=O,Aa=K,ha=pa/64,1==u.flexStatus?u.flexUrlSet&&u.flexUrlSet.open?(M=null,Wa(u.flexUrlSet.open,na+la-2*Ma+8*ha,Aa+8*ha,48*ha,48*ha)):(T.beginPath(),T.moveTo(O+la-2*Ma,Q-Ma/2),T.lineTo(O+la-2*Ma+Ma+2,Q-Ma/2),T.lineTo(O+la-2*Ma+Ma/2+1,Q+Ma/2),T.lineTo(O+la-2*Ma,Q-Ma/2),T.fill(),T.closePath()):-1==u.flexStatus&&(u.flexUrlSet&&u.flexUrlSet.close?(M=null,Wa(u.flexUrlSet.close,na+la-2*Ma+8*ha,Aa+8*ha,48*ha,
48*ha)):(T.beginPath(),T.moveTo(O+la-2*Ma,Q+Ma/2),T.lineTo(O+la-2*Ma+Ma+2,Q+Ma/2),T.lineTo(O+la-2*Ma+Ma/2+1,Q-Ma/2),T.lineTo(O+la-2*Ma,Q+Ma/2),T.fill(),T.closePath())))}else if(u.option&&(u.option.iconColor||u.option.iconType)){Ma=u.option.iconColor;null==Ma&&(Ma=na);if(0==Y)switch(u.option.iconType){case "linePointDot":T.beginPath();Q=K+pa/2+la;T.strokeStyle=Ma;T.lineWidth=2;T.moveTo(O+la,Q);T.lineTo(O+12+la,Q);T.stroke();T.closePath();T.beginPath();T.fillStyle=Ma;u.chart&&(T.strokeStyle=u.chart.backgroundColor);
T.lineWidth=1;T.arc(Aa-10+la,Q,2,0,2*Math.PI);T.fill();T.stroke();T.closePath();break;case "line":T.beginPath();Q=K+pa/2+la;T.strokeStyle=Ma;T.lineWidth=2;T.moveTo(O+la,Q);T.lineTo(O+12+la,Q);T.stroke();T.closePath();break;case "null":break;case "bar":fillRoundRect(T,O+la,K+pa/2-6+la,12,12,2,Ma);break;default:T.beginPath(),T.fillStyle=Ma,T.textBaseline="middle",T.textAlign="left",T.fillText(u.option.iconType,O+la+1,K+pa/2+la),T.closePath()}u.option&&"null"!=u.option.iconType&&(oa+=pa)}if(0==Y&&(u.icon||
sa))if(Oa={left:Na+la,top:K+la,width:Z,height:pa},ja&&pa>Z&&(pa-=ta+4),Oa.width>Oa.height?Oa.width=Oa.height:Oa.height=Oa.width,sa)try{null==v.urlImg&&(v.urlImg={}),null==v.urlImg[sa]&&(v.urlImg[sa]=new Image,v.urlImg[sa].src=sa),null==v.urlImg[sa].loaded&&(v.urlImg[sa].onload=function(rb){v.urlImg[sa].loaded=!0;v.urlImg[sa]&&T.drawImage(v.urlImg[sa],Oa.left,Oa.top,Oa.width,Oa.height)},v.urlImg[sa].loaded=!0),1==v.urlImg[sa].loaded&&v.urlImg[sa]&&T.drawImage(v.urlImg[sa],Oa.left,Oa.top,Oa.width,Oa.height)}catch(rb){}else J?
u.icon!=J.name?J=iconMemory.getInstance().createIcon(T,u.icon,Oa,ra,X):(J.setName(u.icon),J.setRect(Oa),J.setStatus(ra),J.setOption(X),J.draw()):J=iconMemory.getInstance().createIcon(T,u.icon,Oa,ra,X);T.restore();return oa}};this.setValue=function(T){v.value=T};this.onMouseMove=function(T){if(0!=V){u.option&&u.option.tip&&u.option.tip.tipGrid&&u.option.tip.option&&xGlobal&&xGlobal.xTip&&xGlobal.xTip.tip(r,A.left,A.top+A.height,u.option.tip.tipGrid,0,u.option.tip.option);if(1==aa()){if(v.value&&v.value.statusBound&&
0==v.value.statusBound.value)return!1;0==T.buttons&&(C=null);if(isInRect(T.offsetX,T.offsetY,A))return B&&isInRect(T.offsetX,T.offsetY,B)?1!=ba&&(ba=!0,r&&r.draw&&r.draw(!0)):0!=ba&&(ba=!1,r&&r.draw&&r.draw(!0)),!0;0!=ba&&(ba=!1,r&&r.draw&&r.draw(!0))}return!1}};this.onMouseDown=function(T){if(0!=V&&aa()&&0==T.button){if(v.value&&v.value.statusBound&&0==v.value.statusBound.value)return!1;isInRect(T.offsetX,T.offsetY,A)&&(C=!0)}};this.onMouseUp=function(T){if(aa()&&C&&0==T.button){if(v.value&&v.value.statusBound&&
0==v.value.statusBound.value)return!1;if(u){var Y=-1;if(X.popupMenu&&X.popupMenu.popupMode&&(Y=X.popupMenu.popupMode.indexOf("click-icon"),0<=Y)){var O=T.offsetX,K=T.offsetY;L&&O>=L.left&&O<=L.left+L.width&&K>=A.top&&K<=A.top+A.height||(Y=-1)}if(-1==Y&&isInRect(T.offsetX,T.offsetY,A))if(B&&isInRect(T.offsetX,T.offsetY,B)){if(u.option.callback_close){u.option.callback_close(ia());return}u.option.popupMenu&&u.option.operatorIcon&&"close"!=u.option.operatorIcon&&"close-float"!=u.option.operatorIcon?
fa():f("operatorIcon")}else f()}C=null}u.option&&u.option.popupBox&&isInRect(T.offsetX,T.offsetY,A)&&(xGlobal.popupBox||(xGlobal.popupBox=new xSaftPopup(window,v,u.option.popupBox.option),xGlobal.popupBox.createLayer(u.option.popupBox),Y=getScreenXY(r.getParentDiv()),T=Y.x+A.left+(null==u.option.boxLeft?0:u.option.boxLeft),Y=Y.y+A.top+A.height+(null==u.option.boxTop?0:u.option.boxTop),O=null==u.option.boxWidth?A.width:u.option.boxWidth,K=u.option.boxHeight,null==K&&(K=200),xGlobal.popupBox.setBoundWidgets([v]),
xGlobal.popupBox.setPosition(T,Y,O,K),xGlobal.popupBox.show(!0),xGlobal.popupBox.close=v.closePopupBox,xGlobal.popupBox.isMySelf=v.isPopupBox),xGlobal.popupBox.synchBoundValue("init",0,p(),v))};this.isPopupBox=function(T){for(T=T.toElement;T;T=T.parentElement)if(T==xGlobal.popupBox.getDiv())return!0;return!1};this.closePopupBox=function(){xGlobal.popupBox&&(xGlobal.popupBox.destroy(),xGlobal.popupBox=null)};var ia=function(){var T=null;r.getActionTarget&&(T=r.getActionTarget());if(null==T||null==
T.target)T={target:r,targetButton:v,targetPage:r.getPage()};return{option:u,thisOption:X,variables:z,target:T.target,targetButton:T.targetButton,page:T.targetPage,parent:r,thisPage:r.getPage()}};this.doDblClick=function(T){doWidgetAction(T,r.getPage(),r,z)};this.doAction=function(){f()};this.getStatus=function(){if(u.option&&u.option.type&&(type=u.option.type,"radio"==type||"check"==type)){var T=ia(),Y;u.bounds?Y=getBoundsVariableSet(u.bounds,z,0,r,T):u.bound&&(Y=getBoundsVariableSet(u.bound,z,0,
r,T));if(z&&Y&&null!=z[Y.variable]&&Y.id==z[Y.variable])return 1}};this.onSetFocus=function(T,Y){C=null;U=T;G=Y};this.onKeyDown=function(T){if(u.option&&u.option.onKeyDown)return u.option.onKeyDown(T);if(v.value&&v.value.statusBound&&0==v.value.statusBound.value)return!1;if(27==T.keyCode)if(null!=C)C=null;else return;else if(13==T.keyCode||32==T.keyCode)if(1!=C)C=!0;else return;else if(9==T.keyCode)return!1;return!0};this.onKeyUp=function(T){if(v.value&&v.value.statusBound&&0==v.value.statusBound.value)return!1;
C=null;return 13==T.keyCode||32==T.keyCode?(f(),!0):!1};this.onMoreSelected=function(){r&&r.reCreateGrid&&r.reCreateGrid();if(u.option&&u.option.actionBounds&&u.option.boundsPage&&r.synchBoundValue){var T;r.getQueryData&&(T=r.getQueryData());T=p(T);r.synchBoundValue&&u.option.boundsPage?r.page.synchBoundValue("enter",0,xDeepCopy(T)):r.synchBoundValue&&r.synchBoundValue("enter",0,T)}};this.isMySelf=function(T){if(r.getCanvas){var Y=r.getCanvas();"xChart"==Y.classList.value&&(Y=r.getCanvas().nextElementSibling);
if(T.toElement==Y&&(isInRect(T.offsetX,T.offsetY,A)||null==N))return!0}for(T=T.toElement;T;T=T.parentElement)if(T==N.getDiv())return!0;return!1};this.popupRMenu=function(T,Y,O,K){A={left:T,top:Y,width:0,height:0};r=K;z=O.variables;fa(O.popup)};var fa=function(T){if(null==N){v.onSetFocus(!0,!0);var Y=null;r.getActionTarget&&(Y=r.getActionTarget());if(null==Y||null==Y.target)Y={target:r,targetButton:v,targetPage:r.getPage()};if(null==xGlobal.popupMenu)xGlobal.popupMenu=[];else{var O=null;r.getActionTarget&&
(O=r.getActionTarget());if(null==O||null==O.target)O={target:r,targetButton:v};if(u&&u.option&&"menuItem"!=u.option.present)for(var K=0;K<xGlobal.popupMenu.length;K++){if(1!=xGlobal.popupMenu[K].isSameTargetButton(O.targetButton)){xGlobal.popupMenu[K].closeBox();xGlobal.popupMenu=[];break}}else for(K=0;K<xGlobal.popupMenu.length;K++)if(xGlobal.popupMenu[K].isBrother(r)){xGlobal.popupMenu[K].closeBox();break}}O=xGlobal.isMobile?16:12;X.popupMenu&&X.popupMenu.fontSize&&(O=X.popupMenu.fontSize);var Z=
2*O+1;25>Z&&(Z=25);null==T&&(T=X.popupMenu.callback_popup?X.popupMenu.callback_popup(ia()):X.popupMenu.popup);if(null!=T&&0!=T.length){xGlobal.popupMenu.push(v);var pa=X.popupMenu;if(pa){var oa={style:""};pa.backgroundColor&&(oa.style+="background-color:"+pa.backgroundColor+";");pa.borderColor&&(oa.style+="border-color:"+pa.borderColor+";");pa.borderRadius&&(oa.style+="border-radius:"+pa.borderRadius+"px;");pa.boxShadow&&(oa.style+="box-shadow:"+pa.boxShadow+";");pa.border&&(oa.style+="border:"+pa.border+
";")}N=new xSaftPopup(window,null,oa);for(K=popupCalcHeight=0;K<T.length;K++)null==T[K][0].textAlign&&(T[K][0].textAlign="left"),"splitLine"==T[K][0].type?(popupCalcHeight+=4,T[K][0].height=4):(null==T[K][0].type&&(T[K][0].type="xSaftButton"),popupCalcHeight+=Z,T[K][0].option?null==T[K][0].option.borderRadius&&(T[K][0].option.borderRadius=0,T[K][0].option.present="menuItem"):(T[K][0].option={},T[K][0].option.borderRadius=0,T[K][0].option.present="menuItem"));N.createLayer({elements:[{useSystemScheme:pa&&
pa.useSystemScheme?!0:null,element:{class:"xGrid",option:{useSystemScheme:!1,isFocus:!1,isClick:!0,backgroundColor:pa&&pa.backgroundColor?pa.backgroundColor:"rgb(255,255,255,0.5)",borderColor:pa&&pa.borderColor?pa.borderColor:"#888",color:pa&&pa.color?pa.color:"#000",colors:pa&&pa.colors?pa.colors:["rgba(255,255,255,1)","#FF503B","#72FFBE","#fff"],fontFamily:pa&&pa.fontFamily?pa.fontFamily:xGlobal.systemFont,border:pa&&pa.border?pa.border:"transparent",margin:0,fontSize:O,lineHeight:Z,tabKey:"ArrowUp,ArrowDown",
enableFocus:!0,setDefaultFocusObject:!0,scroller:{scrollerV:"show"}},bounds:k,variables:z,init:{vBox:T}}}]},pa&&pa.useScheme);oa=getScreenXY(r.getParentDiv());if(X.popupMenu&&X.popupMenu.boxWidth)var Aa=X.popupMenu.boxWidth;if(null==Aa){Z=0;Aa=4*O;null==E?(pa=r.getContext(),oa.x=0,oa.y=0):pa=E;pa.font=O+"px "+(X.fontFamily?X.fontFamily:xGlobal.systemFont);for(K=0;K<T.length;K++){for(var ta=!1,Q=0,sa=0;sa<T[K].length;sa++)T[K][sa].width?Q+=T[K][sa].width:T[K][sa].title&&(Q+=pa.measureText(T[K][sa].title).width+
4),0==sa&&T[K][sa].option&&"menuItem"==T[K][sa].option.present&&(ta=!0);0==ta&&(Q-=4*O-12);Q>Aa&&(Aa=Q);T[K][0].option&&T[K][0].option.popupMenu&&(Z=O+4)}Aa+=4*O+Z}K=X&&X.popupMenu&&X.popupMenu.boxHeight?X.popupMenu.boxHeight:popupCalcHeight+2;Z=u&&u.option&&u.option.operatorIcon&&"close"!=u.option.operatorIcon&&"close-float"!=u.option.operatorIcon?B:A;u&&u.option&&"menuItem"==u.option.present?(O=oa.x+Z.left+Z.width,Z=oa.y+Z.top-1,O+Aa>window.innerWidth&&(O=oa.x-Aa)):(O=oa.x+Z.left,Z=oa.y+Z.top+Z.height);
Z+K>window.innerHeight&&(window.innerHeight-Z>K/3?(Z=window.innerHeight-K-8,32>Z&&(Z=32,K=window.innerHeight-Z-8)):u.option&&"menuItem"==u.option.present?(Z-=K-(A.height+3),32>Z&&(Z=32,K=window.innerHeight-Z-8)):Z-=K+A.height-1);u&&u.option&&u.option.popupMenu&&u.option.popupMenu.left&&(O+=u.option.popupMenu.left);u&&u.option&&u.option.popupMenu&&u.option.popupMenu.top&&(Z+=u.option.popupMenu.top);N.setActionTarget(Y.target,Y.targetButton,Y.targetPage);N.setPosition(O,Z,Aa,K);N.show(!0);T.prepareClosePopup_Callback&&
(N.prepareClosePopup_Callback=T.prepareClosePopup_Callback);T.afterPopup_Callback&&T.afterPopup_Callback(N.getPage())}}else v.closeBox()};this.getGeometry=function(){return A};this.isPupupChild=function(T){return N?N.isChild(T):!1};this.closePopup=function(){v.closeBox()};this.closeBox=function(){if(N&&(v.onSetFocus(!1,!1),N.prepareClosePopup_Callback&&N.prepareClosePopup_Callback(N.getPage),N.destroy(),N=null,xGlobal.saftPopup=null,xGlobal.popupMenu))for(var T=0;T<xGlobal.popupMenu.length;T++)if(xGlobal.popupMenu[T]==
v){xGlobal.popupMenu[T+1]&&xGlobal.popupMenu[T+1].closeBox();xGlobal.popupMenu.splice(T,xGlobal.popupMenu.length-T);break}};this.replaceMenuItem=function(T){X.popupMenu&&X.popupMenu.popupMode&&0<=X.popupMenu.popupMode.indexOf("-replace")&&(r&&r.modifyGrid&&r.modifyGrid(u,T),r&&r.reCreateGrid?r.reCreateGrid(1):r&&r.draw&&r.draw(!0))};this.getBounds=function(){if(u.bounds)return u.bounds;if(u.bound)return u.bound};this.setToPreActiveButton=function(T){if(T!=v&&(u.bound||u.bounds)){(T=T.getBounds())&&
"Array"!=T.constructor.name&&(T=[T]);var Y=u.bounds;null==Y&&(Y=[u.bound]);if(T&&Y)for(var O=0;O<T.length;O++)for(var K=0;K<Y.length;K++)if(T[O].variable==Y[K].variable)return!0}};this.show=function(T){V=!0;1==T&&r.draw(!0)};this.hidden=function(T){V=!1;1==T&&r.draw(!0)};v.setOption(c)};var calcDate=function(a,b,c){c=void 0===c?"day":c;var g=a%100,k=parseInt(a/1E4);a=parseInt(a/100)%100;var q=[31,28,31,30,31,30,31,31,30,31,30,31];if(0==k%4&&0!=k%100||0==k%400)q[1]=29;if(1>g||g>q[a-1])return-1;switch(c){case "year":k+=b;q[1]=0==k%4&&0!=k%100||0==k%400?29:28;break;case "month":c=parseInt(b/12);k+=c;q[1]=0==k%4&&0!=k%100||0==k%400?29:28;a+=b%12;0>a?(k+=parseInt(a/12)-1,q[1]=0==k%4&&0!=k%100||0==k%400?29:28,a%=12,0>a&&(a*=-1),0==a&&(k--,a=12)):0==a?(k--,q[1]=0==k%4&&0!=k%100||0==k%400?
29:28,a=12):12<a&&(k+=parseInt(a/12),q[1]=0==k%4&&0!=k%100||0==k%400?29:28,a%=12);g>q[a-1]&&(g=q[a-1]);break;case "week":b*=7;default:if(0<=b)for(g+=b;;)if(g>q[a-1])g-=q[a-1],a++,12<a&&(a=1,k++);else break;else if(g>-1*b)g+=b;else for(g=b+g;;)if(0>=g)a--,g=0==a?g+31:g+q[a-1],1>a&&(a=12,k--,q[1]=0==k%4&&0!=k%100||0==k%400?29:28);else break}return{date:1E4*k+100*a+g,year:k,month:a,day:g}},drawCalendarIcon=function(a,b,c,g){var k=.2*b.height;c=b.width/3;drawRoundRect(a,b.left,b.top+k/2,b.width,b.height-
k/2,2,g);a.beginPath();a.strokeStyle=g;a.moveTo(b.left+c,b.top);a.lineTo(b.left+c,b.top+k);a.moveTo(b.left+2*c,b.top);a.lineTo(b.left+2*c,b.top+k);k=.4*b.height;a.moveTo(b.left,b.top+k);a.lineTo(b.left+b.width,b.top+k);g=b.height-k;k=b.top+k+g/3;var q=b.width/5;c=b.width/4;for(var f=0;2>f;f++){for(var p=1;4>p;p++)a.moveTo(b.left+c*p-q/2,k),a.lineTo(b.left+c*p+q/2,k);k+=g/3}a.stroke();a.closePath()};
function xSaftCalendar(a,b,c,g){function k(){for(var ia=[],fa=0,T=u.option.actionBounds,Y=0;Y<T.length;Y++)T[Y].variable&&"variables."==T[Y].variable.slice(0,10).toLowerCase()&&z&&null!=z[T[Y].variable.slice(10)]&&(ia[fa++]={bound:T[Y],value:z[T[Y].variable.slice(10)]});return ia}var q=this,f,p=[],v="",A=0,r=0,u=c,z=g,H,C,U,J,G={type:"",paddingLeft:5,paddingTop:3,paddingRight:5,paddingBottom:3,marginLeft:0,marginTop:5,marginRight:0,marginBottom:5,normal:{color:"#000",backgroundColor:"#fff",borderColor:"#aaa"},
focus:{color:"#000",backgroundColor:"#eee",borderColor:"#f00"},format:"YYYY-MM-DD"};v=["2020-03-01","2020-03-24"];var B=[],L=[],ba=0;this.setOption=function(ia){ia.option&&(null!=ia.option.useSystemScheme&&(G.useSystemScheme=ia.option.useSystemScheme),ia.option.type&&(G.type=ia.option.type),null!=ia.option.padding&&(G.paddingLeft=ia.option.padding,G.paddingTop=ia.option.padding,G.paddingRight=ia.option.padding,G.paddingBottom=ia.option.padding),null!=ia.option.paddingLeft&&(G.paddingLeft=ia.option.paddingLeft),
null!=ia.option.paddingTop&&(G.paddingTop=ia.option.paddingTop),null!=ia.option.paddingRight&&(G.paddingRight=ia.option.paddingRight),null!=ia.option.paddingBottom&&(G.paddingBottom=ia.option.paddingBottom),null!=ia.option.margin&&(G.marginLeft=ia.option.margin,G.marginTop=ia.option.margin,G.marginRight=ia.option.margin,G.marginBottom=ia.option.margin),null!=ia.option.marginLeft&&(G.marginLeft=ia.option.marginLeft),null!=ia.option.marginTop&&(G.marginTop=ia.option.marginTop),null!=ia.option.marginRight&&
(G.marginRight=ia.option.marginRight),null!=ia.option.marginBottom&&(G.marginBottom=ia.option.marginBottom),null!=ia.option.borderRadius&&(G.borderRadius=ia.option.borderRadius),ia.option.fontSize&&(G.fontSize=ia.option.fontSize),ia.option.fontBold&&(G.fontBold=ia.option.fontBold),ia.option.fontFamily&&(G.fontFamily=ia.option.fontFamily),ia.option.format&&(G.format=ia.option.format),ia.option.normal&&(G.normal=ia.option.normal),ia.option.focus&&(G.focus=ia.option.focus));N()};this.setPosition=function(ia){f=
{left:ia.left,top:ia.top,width:ia.width,height:ia.height}};var N=function(){var ia=new Date;ia={year:ia.getFullYear(),month:ia.getMonth()+1,day:ia.getDate()};v[0]=X(ia,G.format,0);if(z&&u.bounds)for(var fa=0;fa<u.bounds.length;fa++){var T=getBoundsVariableSet(u.bounds,z,fa,a);T&&null!=z[T.variable]&&(ia.year=parseInt((""+z[T.variable]).substr(0,4)),ia.month=parseInt((""+z[T.variable]).substr(4,2)),ia.day=parseInt((""+z[T.variable]).substr(6,2)),v[fa]=X(ia,G.format,fa))}},E=function(){if(z&&u.bounds){var ia=
new Date;ia.getFullYear();ia.getMonth();ia.getDate();for(ia=0;ia<u.bounds.length;ia++){var fa=getBoundsVariableSet(u.bounds,z,ia,a);if(fa&&null!=z[fa.variable]){var T=M(v[ia],0);z[fa.variable]=1E4*T.year+100*T.month+T.day}}u.option.actionBounds&&(ia=k())&&0<ia.length&&(a.synchBoundValue&&u.option.boundsPage?a.page.synchBoundValue("enter",0,xDeepCopy(ia),a):a.synchBoundValue&&a.synchBoundValue("enter",0,xDeepCopy(ia)))}},V=function(ia,fa,T,Y){fa=xDeepCopy(fa);var O=G.borderRadius;if(J||xGlobal.focusObject&&
xGlobal.focusObject==q){var K=G.focus.color;var Z=G.focus.backgroundColor;var pa=G.focus.borderColor}else K=G.normal.color,Z=G.normal.backgroundColor,pa=G.normal.borderColor;ia.lineWidth=1;0<O?fillRoundRect(ia,fa.left,fa.top,fa.width,fa.height,O,Z,pa):(ia.beginPath(),ia.strokeStyle=pa,ia.fillStyle=Z,ia.rect(fa.left,fa.top,fa.width,fa.height),ia.fill(),ia.stroke(),ia.closePath());fa.top+=G.paddingTop;fa.height-=G.paddingTop+G.paddingBottom;fa.left+=G.paddingLeft;fa.width-=G.paddingLeft+G.paddingRight;
ia.fillStyle=K;ia.textBaseline="middle";ia.textAlign="left";p[Y]=fa.left;"YYYY-MM"==G.format?ia.fillText(T.substr(0,7),fa.left,fa.top+fa.height/2+1):ia.fillText(T,fa.left,fa.top+fa.height/2+1);u&&u.option&&u.option.popup&&(U={left:fa.left+fa.width-fa.height,top:fa.top+1,width:fa.height-1,height:fa.height-2},drawCalendarIcon(ia,U,1,u.option.iconColor?u.option.iconColor:"#999"));ba==Y&&xGlobal.focusObject&&xGlobal.focusObject==q&&r%2&&(ia.beginPath(),ia.fillStyle=K,null==L[Y]&&(L[Y]=T.length-1),O=ia.measureText(T.slice(0,
L[Y])).width,pa=fa.left+O,K=fa.top,O=T[L[Y]]?ia.measureText(T[L[Y]]).width:ia.measureText("0").width,ia.fillRect(pa,K,O,fa.height),ia.fill(),T[L[Y]]&&(ia.fillStyle=Z,ia.fillText(T[L[Y]],pa,fa.top+fa.height/2+1)),ia.closePath())};this.draw=function(ia){saveCtx=ia;var fa=f.left,T=f.top,Y=f.height;T+=G.marginTop;Y-=G.marginTop+G.marginBottom;fa+=G.marginLeft;ia.save();var O=12;G.fontSize?O=G.fontSize:u&&u.fontSize?O=u.fontSize:b&&b.fontSize&&(O=b.fontSize);var K="";if(G.fontBold||u&&u.fontBold||b&&b.fontBold)K+=
"bold ";K=G.fontFamily?K+(O+"px "+G.fontFamily):u&&u.fontFamily?K+(O+"px "+u.fontFamily):b&&b.fontFamily?K+(O+"px "+b.fontFamily):K+(O+"px "+xGlobal.systemFont);ia.font=K;K=ia.measureText(G.format).width+O;u&&u.option&&u.option.popup&&(K+=O+4);B[0]={left:fa,top:T,width:K,height:Y};V(ia,B[0],v[0],0);v[1]&&(B[1]={left:fa+(K+20),top:T,width:K,height:Y},V(ia,B[1],v[1],1));ia.restore()};var F=function(ia,fa,T){if(isInRect(ia,fa,B[T])){fa=12;G.fontSize?fa=G.fontSize:u&&u.fontSize?fa=u.fontSize:b&&b.fontSize&&
(fa=b.fontSize);var Y="";if(G.fontBold||u&&u.fontBold||b&&b.fontBold)Y+="bold ";Y=G.fontFamily?Y+(fa+"px "+G.fontFamily):u&&u.fontFamily?Y+(fa+"px "+u.fontFamily):b&&b.fontFamily?Y+(fa+"px "+b.fontFamily):Y+(fa+"px "+xGlobal.systemFont);saveCtx.font=Y;fa=v[T].length;"YYYY-MM"==G.format&&(fa=G.format.length);for(Y=0;Y<fa;Y++){var O=saveCtx.measureText(v[T].slice(0,Y+1)).width;if(ia<p[T]+O)return("0">v[T][Y]||"9"<v[T][Y])&&Y++,Y}return fa-1}};this.onMouseDown=function(ia,fa){r=1;if(u.option&&u.option.popup&&
isInRect(ia.offsetX,ia.offsetY,U)){if(null==J){if(null==J){J=new xSaftPopup(window);u.option.popup.doEscape=q.doEscape;J.createLayer(u.option.popup);fa=getScreenXY(a.getParentDiv());ia=fa.x+f.left;fa=fa.y+f.top+f.height;var T=null==u.option.boxWidth?f.width:u.option.boxWidth,Y=u.option.boxHeight;null==Y&&(Y=200);J.setBoundWidgets([q]);J.setPosition(ia,fa,T,Y);J.show(!0)}if(J){ia=J;fa=ia.synchBoundValue;if(u.bounds)for(T=[],Y=0;Y<u.bounds.length;Y++)T[Y]={bound:u.bounds[Y],value:v[Y]};else T=void 0;
fa.call(ia,"init",0,T,q);xGlobal.saftPopup=q}}}else for(fa=0;2>fa&&B[fa];fa++)if(isInRect(ia.offsetX,ia.offsetY,B[fa])){ba=fa;L[fa]=F(ia.offsetX,ia.offsetY,fa);break}};this.onMouseUp=function(ia){C=null};this.onMouseMove=function(ia){r=1;if(null!=C&&(ia=F(ia.offsetX,ia.offsetY),null!=ia))return null==H&&(H={begin:A}),ia>H.begin?H.len=ia-H.begin:(H.len=C-ia,H.begin=ia),A=ia,!0};this.onMouseOut=function(ia,fa){r=1};this.setCursorPos=function(ia,fa,T){return F(ia,fa)};var M=function(ia,fa){var T=parseInt(ia.substr(0,
4)),Y=parseInt(ia.substr(5,2));ia=parseInt(ia.substr(8,2));var O=[31,28,31,30,31,30,31,31,30,31,30,31];if(0==T%4&&0!=T%100||0==T%400)O[1]=29;O={year:T,month:Y,day:ia,max_day:O[Y-1]};O.date=1E4*T+100*Y+ia;5>fa?O.edit="year":8>fa?O.edit="month":10>fa&&(O.edit="day");return O},X=function(ia,fa,T){var Y=""+(1E5+ia.year);Y=Y.substr(Y.length-4,4);if("YYYY-MM"==fa)if(0==T)ia.day=1;else{fa=[31,28,31,30,31,30,31,31,30,31,30,31];if(0==Y%4&&0!=Y%100||0==Y%400)fa[1]=29;ia.day=fa[ia.month-1]}else"YYYY"==fa&&(0==
T?(ia.month=1,ia.day=1):(12==ia.month,ia.day=31));fa="0"+ia.month;fa=fa.substr(fa.length-2,2);ia="0"+ia.day;ia=ia.substr(ia.length-2,2);return Y+"-"+fa+"-"+ia},aa=function(){var ia=null;a.getActionTarget&&(ia=a.getActionTarget());if(null==ia||null==ia.target)ia={target:a,targetButton:q,targetPage:a.getPage()};return{option:u,thisOption:G,variables:z,target:ia.target,targetButton:ia.targetButton,page:ia.targetPage,parent:a,thisPage:a.getPage()}};this.onKeyDown=function(ia){if(u&&u.option&&1==u.option.readOnly)return!1;
var fa="YYYY-MM"==G.format?7:10,T=!1,Y=!0,O=ia.keyCode,K=M(v[ba],L[ba]);40==O?O=109:38==O&&(O=107);switch(O){case 27:q.closeBox();break;case 107:case 109:case 189:v[ba]=107==O?X(calcDate(K.date,1,K.edit),G.format,ba):X(calcDate(K.date,-1,K.edit),G.format,ba);v[1]&&(fa=M(v[0],0),T=M(v[1],0),0==ba?fa.date>T.date&&(v[ba]=X(T,G.format,ba)):fa.date>T.date&&(v[ba]=X(fa,G.format,ba)));T=!0;break;case 40:case 38:case 34:case 33:if(J)J.onKeyDown(ia);break;case 36:0<L[ba]?L[ba]=0:0<ba&&(ba=0);T=!0;break;case 35:L[ba]<
fa-1?L[ba]=fa-1:1>ba&&(ba=1,L[ba]=0);T=!0;break;case 8:case 37:0<L[ba]?L[ba]--:1==ba&&(ba--,L[ba]=fa-1);("0">v[ba][L[ba]]||"9"<v[ba][L[ba]])&&L[ba]--;T=!0;break;case 39:L[ba]<fa-1?L[ba]++:0==ba&&(ba=1,L[ba]=0);("0">v[ba][L[ba]]||"9"<v[ba][L[ba]])&&L[ba]++;T=!0;break;case 13:Y=a.getPage();Y.beginQuery("calendar");E();u&&u.option.callback_save&&u.option.callback_save(v);if(u&&u.option&&u.option.callback_enter){if(J)return J.onKeyDown(ia),u.option.callback_enter(aa(),v),Y.endQuery("calendar"),!0;u.option.callback_enter(aa(),
v)}u&&u.option&&u.option.actionBounds&&(ia=k())&&0<ia.length&&a.synchBoundValue&&(u.option.boundsPage?a.page.synchBoundValue("enter",0,xDeepCopy(ia),a):a.synchBoundValue("enter",0,xDeepCopy(ia),q));Y.endQuery("calendar");return!1;default:if("0"<=ia.key&&"9">=ia.key||"/"==ia.key||"-"==ia.key||"."==ia.key)Y=0==L[ba]?ia.key+v[ba].substr(1):L[ba]==v[ba].length-1?v[ba].substr(0,v[ba].length-1)+ia.key:v[ba].substr(0,L[ba])+ia.key+v[ba].substr(L[ba]+1),v[ba]=Y,L[ba]<fa-1?L[ba]++:0==ba&&(ba=1,L[ba]=0),("0">
v[ba][L[ba]]||"9"<v[ba][L[ba]])&&L[ba]++,T=!0;Y=!1}r=1;a&&a.draw&&a.draw(!0);1==T&&(a&&a.draw&&a.draw(!0),Y=!0,u.callback&&u.callback(),ia.preventDefault());return Y};this.onFocus=function(){};this.onUnFocus=function(){a&&a.draw&&a.draw();E();q.closeBox()};this.closeBox=function(){J&&(J.destroy(),J=null,xGlobal.saftPopup=null)};this.isMySelf=function(ia){if(ia.toElement==a.getCanvas()&&(isInRect(ia.offsetX,ia.offsetY,f)||null==J))return!0;for(ia=ia.toElement;ia;ia=ia.parentElement)if(ia==J.getDiv())return!0;
return!1};this.synchBoundValue=function(ia){if(u.bounds)for(var fa=0;fa<u.bounds.length;fa++)for(var T=0;T<ia.length;T++)if(ia[T].bound&&u.bounds[fa].id==ia[T].bound.id){N();return}};this.refresh=function(){J&&J.refresh()};this.doEscape=function(){q.closeBox();xGlobal.focusObject=q;xGlobal.focusWidget=a;a.draw&&a.draw(!0)};q.setOption(c)};function xSaftCombo(a,b,c,g,k){var q=this,f,p=0,v,A=!0,r=5,u=3,z=5,H=3,C=0,U=5,J=0,G=5,B={color:"#000",backgroundColor:"#fff",borderColor:"#aaa"},L={color:"#000",backgroundColor:"#eee",borderColor:"#f00"},ba,N,E,V;this.canUseSystemScheme=function(){return A};this.setOption=function(M){M.option&&(null!=M.option.useSystemScheme&&(A=M.option.useSystemScheme),null!=M.option.padding&&(H=z=u=r=M.option.padding),null!=M.option.paddingLeft&&(r=M.option.paddingLeft),null!=M.option.paddingTop&&(u=M.option.paddingTop),
null!=M.option.paddingRight&&(z=M.option.paddingRight),null!=M.option.paddingBottom&&(H=M.option.paddingBottom),null!=M.option.margin&&(G=J=U=C=M.option.margin),null!=M.option.marginLeft&&(C=M.option.marginLeft),null!=M.option.marginTop&&(U=M.option.marginTop),null!=M.option.marginRight&&(J=M.option.marginRight),null!=M.option.marginBottom&&(G=M.option.marginBottom),null!=M.option.borderRadius&&(ba=M.option.borderRadius),M.option.fontSize&&(N=M.option.fontSize),M.option.fontBold&&(E=M.option.fontBold),
M.option.fontFamily&&(V=M.option.fontFamily),null!=M.option.normal&&(B=M.option.normal),null!=M.option.focus&&(L=M.option.focus))};this.setPosition=function(M){f={left:M.left,top:M.top,width:M.width,height:M.height}};this.draw=function(M){var X=f.left,aa=f.top,ia=f.width,fa=f.height;aa+=U;fa-=U+G;X+=C;ia-=C+J;M.save();var T=ba;if(v||xGlobal.focusObject&&xGlobal.focusObject==q){var Y=L.color;var O=L.backgroundColor;var K=L.borderColor}else Y=B.color,O=B.backgroundColor,K=B.borderColor;0<T?fillRoundRect(M,
X,aa,ia,fa,T,O,K):(M.beginPath(),M.strokeStyle=K,M.fillStyle=O,M.rect(X,aa,ia,fa),M.fill(),M.stroke(),M.closePath());T=12;N?T=N:c&&c.fontSize?T=c.fontSize:b&&b.fontSize&&(T=b.fontSize);O="";if(E||c&&c.fontBold||b&&b.fontBold)O+="bold ";O=V?O+(T+"px "+V):c&&c.fontFamily?O+(T+"px "+c.fontFamily):b&&b.fontFamily?O+(T+"px "+b.fontFamily):O+(T+"px "+xGlobal.systemFont);M.font=O;aa+=u;fa-=u+H;X+=r;ia-=r+z;M.fillStyle=Y;M.textBaseline="middle";M.textAlign="left";if(c.bounds&&g)for(p=0,T=getBoundsVariableSet(c.bounds,
g,null,a),O=0;O<c.option.data.length;O++)if(g[T.variable]==c.option.data[O].id){p=O;break}M.fillText(c.option.data[p].value,X,aa+fa/2+1);M.beginPath();M.lineWidth=1;M.strokeStyle=Y;M.moveTo(X+ia-8-5,aa+fa/2-2);M.lineTo(X+ia-4-5,aa+fa/2+2);M.lineTo(X+ia-5,aa+fa/2-2);M.stroke();M.restore()};this.closeBox=function(){v&&(v.destroy(),v=null,xGlobal.saftPopup=null)};this.isMySelf=function(M){if(M.toElement==a.getCanvas()&&(isInRect(M.offsetX,M.offsetY,f)||null==v))return!0;for(M=M.toElement;M;M=M.parentElement)if(M==
v.getDiv())return!0;return!1};this.onFocus=function(){};this.onUnFocus=function(){q.closeBox()};this.onKeyDown=function(M){var X=!1;switch(M.keyCode){case 27:q.closeBox();break;case 36:p=0;X=!0;break;case 35:p=c.option.data.length-1;X=!0;break;case 37:0<p&&p--;X=!0;break;case 39:p<=c.option.data.length-2&&p++;X=!0;break;case 40:if(null==v){F();break}default:if(v)v.onKeyDown(M)}1==X&&(M=getBoundsVariableSet(c.bounds,g,0,a))&&null!=g[M.variable]&&(g[M.variable]=c.option.data[p].id,c.callback&&c.callback(g[M.variable]));
return X};this.onSelected=function(M){(M=getBoundsVariableSet(M.bounds,g,null,a))&&g&&(g[M.variable]=M.id,c.callback&&c.callback(g[M.variable]));q.closeBox();xGlobal.focusObject=q;xGlobal.focusWidget=a;a.draw&&a.draw(!0)};this.onMouseDown=function(M,X){1!=xGlobal.passiveSupported&&M.preventDefault();xGlobal.saftPopup?q.closeBox():F()};var F=function(){var M=25;if(null==v){v=new xSaftPopup(window);var X=12;c&&c.fontSize&&(X=c.fontSize);M=2*X+1;25>M&&(M=25);getBoundsVariableSet(c.bounds,g,null,a);for(var aa=
[],ia=0;ia<c.option.data.length;ia++)aa[ia]=[{type:"xSaftButton",textAlign:"left",title:c.option.data[ia].value,callback:q.onSelected,bounds:[{id:c.option.data[ia].id,variable:c.bounds[0]?c.bounds[0].variable:c.bounds.variable}],option:{type:"radio",borderRadius:0,paddingLeft:3,paddingTop:0,paddingRight:3,paddingBottom:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:1,normal:{color:"#000",backgroundColor:"transparent"},over:{color:"#000",backgroundColor:"#d8d8d8"},focus:{color:"#000",backgroundColor:"#ccc",
borderColor:"#888"},focusOver:{color:"#000",backgroundColor:"#ddd",borderColor:"#888"},push:{color:"#000",backgroundColor:"#aaa",borderColor:"#888"}}}];v.createLayer({elements:[{element:{class:"xGrid",option:{useSystemScheme:!1,isFocus:!0,backgroundColor:"#fff",borderColor:"#888",color:"#000",colors:["rgba(255,255,255,1)","#FF503B","#72FFBE","#fff"],fontFamily:xGlobal.systemFont,margin:5,fontSize:X,lineHeight:M,tabKey:"ArrowUp,ArrowDown",enableFocus:!1,setDefaultFocusObject:!0},variables:g,init:{vBox:aa}}}]})}aa=
getScreenXY(a.getParentDiv());X=aa.x+f.left;aa=aa.y+f.top+f.height;ia=null==c.option.boxWidth?f.width:c.option.boxWidth;var fa=c.option.boxHeight;null==fa&&(fa=c.option.data.length*M+10);v.setPosition(X,aa,ia,fa);v.show(!0);xGlobal.saftPopup=q};q.setOption(c)};var insertSort=function(a){for(var b=a.length,c,g,k=1;k<b;k++){c=k-1;for(g=a[k];0<=c&&a[c]<=g;)a[c+1]=a[c],c--;a[c+1]=g}return a};
function xSaftDrawPie(a,b,c,g,k){var q,f,p,v,A=this,r={useSystemScheme:!0,borderRadius:6,paddingLeft:3,paddingTop:3,paddingRight:3,paddingBottom:3,marginLeft:3,marginTop:3,marginRight:3,marginBottom:3,pieColors:"#D5AE9B #888F53 #445D6E #8E3B65 #5CA69B #616161 #A57B58 #D7CCC8 #F9CE47 #BDBDBD #655F85 #649BC2 #A4C950".split(" "),blank:.5,nameColor:"#111",valueColor:"#111",valueFormat:"%.0",legend:{show:!0,width:"auto",pos:"top",rows:1,textColor:"#000"}};registerOption(xSaftDrawPie,r);this.canUseSystemScheme=
function(){return r.useSystemScheme};this.setOption=function(u){u.option&&(null!=u.option.useSystemScheme&&(r.useSystemScheme=u.option.useSystemScheme),null!=u.option.padding&&(r.paddingLeft=u.option.padding,r.paddingTop=u.option.padding,r.paddingRight=u.option.padding,r.paddingBottom=u.option.padding),null!=u.option.paddingLeft&&(r.paddingLeft=u.option.paddingLeft),null!=u.option.paddingTop&&(r.paddingTop=u.option.paddingTop),null!=u.option.paddingRight&&(r.paddingRight=u.option.paddingRight),null!=
u.option.paddingBottom&&(r.paddingBottom=u.option.paddingBottom),null!=u.option.margin&&(r.marginLeft=u.option.margin,r.marginTop=u.option.margin,r.marginRight=u.option.margin,r.marginBottom=u.option.margin),null!=u.option.marginLeft&&(r.marginLeft=u.option.marginLeft),null!=u.option.marginTop&&(r.marginTop=u.option.marginTop),null!=u.option.marginRight&&(r.marginRight=u.option.marginRight),null!=u.option.marginBottom&&(r.marginBottom=u.option.marginBottom),null!=u.option.borderRadius&&(r.borderRadius=
u.option.borderRadius),null!=u.option.borderTopLeftRadius&&(r.borderTopLeftRadius=u.option.borderTopLeftRadius),null!=u.option.borderTopRightRadius&&(r.borderTopRightRadius=u.option.borderTopRightRadius),null!=u.option.borderBottomLeftRadius&&(r.borderBottomLeftRadius=u.option.borderBottomLeftRadius),null!=u.option.borderBottomRightRadius&&(r.borderBottomRightRadius=u.option.borderBottomRightRadius),u.option.fontSize&&(r.fontSize=u.option.fontSize),u.option.fontBold&&(r.fontBold=u.option.fontBold),
u.option.fontFamily&&(r.fontFamily=u.option.fontFamily),u.option.pieColors&&(r.pieColors=u.option.pieColors),null!=u.option.blank&&(r.blank=u.option.blank),null!=u.option.legend&&xCopyAllTo(u.option.legend,r.legend),null!=u.option.nameField&&(r.nameField=u.option.nameField))};this.setPosition=function(u){q=u.left;f=u.top;p=u.width;v=u.height};this.isInRect=function(u,z){if(u>=q&&u<=q+p&&z>=f&&z<=f+v)return!0};this.setTitle=function(u){strButton=u};this.setPosition=function(u){q=u.left;f=u.top;p=u.width;
v=u.height};this.draw=function(u,z){var H=q,C=f,U=p,J=v;z=2;C+=r.marginTop;J-=r.marginTop+r.marginBottom;H+=r.marginLeft;U-=r.marginLeft+r.marginRight;var G;a.getQueryData&&(G=a.getQueryData());if(G){G=getTable_NameValue(r.nameField,c.field,G,"desc");if(null==G)return;u.save();var B=12;r.fontSize?B=r.fontSize:c&&c.fontSize?B=c.fontSize:b&&b.fontSize&&(B=b.fontSize);var L="";if(r.fontBold||c&&c.fontBold||b&&b.fontBold)L+="bold ";L=r.fontFamily?L+(B+"px "+r.fontFamily):c&&c.fontFamily?L+(B+"px "+c.fontFamily):
b&&b.fontFamily?L+(B+"px "+b.fontFamily):L+(B+"px "+xGlobal.systemFont);u.font=L;var ba=H,N=C;if(1==r.legend.show){u.textBaseline="middle";for(B=0;B<G.length;B++){var E=r.pieColors[B]?r.pieColors[B]:"#888";z=u.measureText(G[B].name).width;L=ba+16+10+z;ba>H&&L>H+U&&(ba=H,N+=r.legend.height,L=ba+16+10+z);fillRoundRect(u,ba,N+r.legend.height/2-6,12,12,2,E,E);u.fillStyle=r.legend.textColor;u.fillText(G[B].name,ba+16,N+r.legend.height/2);ba=L}C+=r.legend.rows*r.legend.height;J-=r.legend.rows*r.legend.height}u.textBaseline=
"bottom";ba=(U>J-16?J-16:U)-56;ba/=2;L=H+U/2;H=C+J/2+6;C=-90;for(B=U=0;B<G.length;B++)U+=G[B].value;for(B=0;B<G.length;B++){u.beginPath();E=r.pieColors[B]?r.pieColors[B]:"#888";u.fillStyle=E;u.strokeStyle=E;N=C*Math.PI/180;J=G[B].value/U*360;var V=(C+J-(r.space?r.space:0))*Math.PI/180;E=C+.5*J;90<E&&270>E&&(u.textAlign="end");var F=(G[B].value/U*100).toFixed(2)+"%",M=u,X=M.fillText;var aa=90<E&&270>E?L-45+Math.cos(E*Math.PI/180)*(ba+20):L+45+Math.cos(E*Math.PI/180)*(ba+20);X.call(M,F,aa,H-3+Math.sin(E*
Math.PI/180)*(ba+20));u.moveTo(L,H);if(0>ba)return;u.arc(L,H,ba,N,V);u.fill();u.moveTo(L+Math.cos(E*Math.PI/180)*ba,H+Math.sin(E*Math.PI/180)*ba);u.lineTo(L+Math.cos(E*Math.PI/180)*(ba+20),H+Math.sin(E*Math.PI/180)*(ba+20));N=u;V=N.lineTo;M=90<E&&270>E?L-80+Math.cos(E*Math.PI/180)*(ba+20):L+80+Math.cos(E*Math.PI/180)*(ba+20);V.call(N,M,H+Math.sin(E*Math.PI/180)*(ba+20));u.stroke();C+=J}0<r.blank&&1>r.blank&&(u.beginPath(),u.moveTo(L,H),u.strokeStyle=c.backgroundColor?c.backgroundColor:b.backgroundColor,
u.fillStyle=u.strokeStyle,u.arc(L,H,ba*r.blank,0,360),u.fill());u.restore()}return z};this.setValue=function(u){A.value=u};A.setOption(c)};var getTableField=function(a,b){if(null!=a){for(var c,g,k,q,f=0,p=0;p<a.length;p++)if("."==a[p])g=a.substr(0,p),f=p+1;else if("["==a[p])for(k=a.substr(f,p-f),f=p+1,p++;p<a.length;p++)if("]"==a[p]){q=a.substr(f,p-f);break}null==k&&(k=a.substr(f));k=k.toLowerCase();if(null==g)b[0]&&b[0].table&&(c=b[0].table);else for(g=g.toLowerCase(),p=0;p<b.length;p++)if(b[p]&&b[p].table&&b[p].table.info.name==g){c=b[p].table;break}if(c&&0<c.field.length)for(p=0;p<c.field.length;p++)if(c.field[p][0].toLowerCase()==
k){a=p;if(q){q=q.toLowerCase();q=q.split("=");if(2!=q.length)break;q[0]=q[0].toLowerCase();for(g=0;g<c.field.length;g++)if(c.field[g][0].toLowerCase()==q[0]){var v=g;break}if(null==v)break;b=getTableField(q[1],b);if(null==b)break;return{table:c,fieldIndex:a,synchIndex:v,synch:b}}return{table:c,fieldIndex:a}}}},nameValue_insertSort=function(a){for(var b=a.length,c,g,k=1;k<b;k++){c=k-1;for(g=a[k];0<=c&&a[c].value<=g.value;)a[c+1]=a[c],c--;a[c+1]=g}return a},getTable_NameValue=function(a,b,c,g){b=getTableField(b,
c);a=getTableField(a,c);if(b&&a&&"row"==b.table.info.rank&&0<b.table.data.length){c=[];for(var k=0;k<b.table.data.length;k++)if(c[k]={value:b.table.data[k][b.fieldIndex]},null==a.synch)c[k].name=a.table.data[k][a.fieldIndex];else for(var q=0;q<a.table.data.length;q++)if(a.table.data[q][a.synch.fieldIndex]==b.table.data[k][a.synchIndex]){c[k].name=a.table.data[q][a.fieldIndex];break}g&&(c=nameValue_insertSort(c));return c}};
function xSaftDrawStair(a,b,c,g,k){var q,f,p,v,A=this,r={useSystemScheme:!0,borderRadius:6,paddingLeft:3,paddingTop:3,paddingRight:3,paddingBottom:3,marginLeft:3,marginTop:3,marginRight:3,marginBottom:3,barColors:"#D5AE9B #888F53 #445D6E #8E3B65 #5CA69B #616161 #A57B58 #D7CCC8 #F9CE47 #BDBDBD #655F85 #649BC2 #A4C950".split(" "),blank:.5,nameColor:"#111",valueColor:"#111",valueFormat:"%0.3%%"};registerOption(xSaftDrawPie,r);this.canUseSystemScheme=function(){return r.useSystemScheme};this.setOption=
function(u){u.option&&(null!=u.option.useSystemScheme&&(r.useSystemScheme=u.option.useSystemScheme),null!=u.option.padding&&(r.paddingLeft=u.option.padding,r.paddingTop=u.option.padding,r.paddingRight=u.option.padding,r.paddingBottom=u.option.padding),null!=u.option.paddingLeft&&(r.paddingLeft=u.option.paddingLeft),null!=u.option.paddingTop&&(r.paddingTop=u.option.paddingTop),null!=u.option.paddingRight&&(r.paddingRight=u.option.paddingRight),null!=u.option.paddingBottom&&(r.paddingBottom=u.option.paddingBottom),
null!=u.option.margin&&(r.marginLeft=u.option.margin,r.marginTop=u.option.margin,r.marginRight=u.option.margin,r.marginBottom=u.option.margin),null!=u.option.marginLeft&&(r.marginLeft=u.option.marginLeft),null!=u.option.marginTop&&(r.marginTop=u.option.marginTop),null!=u.option.marginRight&&(r.marginRight=u.option.marginRight),null!=u.option.marginBottom&&(r.marginBottom=u.option.marginBottom),null!=u.option.borderRadius&&(r.borderRadius=u.option.borderRadius),null!=u.option.borderTopLeftRadius&&
(r.borderTopLeftRadius=u.option.borderTopLeftRadius),null!=u.option.borderTopRightRadius&&(r.borderTopRightRadius=u.option.borderTopRightRadius),null!=u.option.borderBottomLeftRadius&&(r.borderBottomLeftRadius=u.option.borderBottomLeftRadius),null!=u.option.borderBottomRightRadius&&(r.borderBottomRightRadius=u.option.borderBottomRightRadius),u.option.fontSize&&(r.fontSize=u.option.fontSize),u.option.fontBold&&(r.fontBold=u.option.fontBold),u.option.fontFamily&&(r.fontFamily=u.option.fontFamily),u.option.barColors&&
(r.barColors=u.option.barColors),null!=u.option.blank&&(r.blank=u.option.blank),null!=u.option.nameField&&(r.nameField=u.option.nameField),u.option.nameColor&&(r.nameColor=u.option.nameColor),u.option.valueColor&&(r.valueColor=u.option.valueColor),u.option.valueFormat&&(r.valueFormat=u.option.valueFormat))};this.setPosition=function(u){q=u.left;f=u.top;p=u.width;v=u.height};this.isInRect=function(u,z){if(u>=q&&u<=q+p&&z>=f&&z<=f+v)return!0};this.setTitle=function(u){strButton=u};this.draw=function(u,
z){z=q;var H=f,C=p,U=v;H+=r.marginTop;U-=r.marginTop+r.marginBottom;z+=r.marginLeft;C-=r.marginLeft+r.marginRight;var J;a.getQueryData&&(J=a.getQueryData());if(J){J=getTable_NameValue(r.nameField,c.field,J,"desc");if(null==J)return;u.save();var G=12;r.fontSize?G=r.fontSize:c&&c.fontSize?G=c.fontSize:b&&b.fontSize&&(G=b.fontSize);var B="";if(r.fontBold||c&&c.fontBold||b&&b.fontBold)B+="bold ";B=r.fontFamily?B+(G+"px "+r.fontFamily):c&&c.fontFamily?B+(G+"px "+c.fontFamily):b&&b.fontFamily?B+(G+"px "+
b.fontFamily):B+(G+"px "+xGlobal.systemFont);u.font=B;G="#888";r.valueColor?G=r.valueColor:c&&c.valueColor?G=c.valueColor:b&&b.valueColor&&(G=b.valueColor);B="111";r.nameColor?B=r.nameColor:c&&c.valueColor?B=c.valueColor:b&&b.valueColor&&(B=b.valueColor);for(var L,ba,N=0;N<J.length;N++){if(null==L||L<J[N].value)L=J[N].value;if(null==ba||ba>J[N].value)ba=J[N].value}L=(C-60-80)/(L-ba);U/=J.length;u.beginPath();for(N=0;N<J.length;N++){var E=r.barColors[N]?r.barColors[N]:"rgb("+[Math.ceil(255*Math.random()),
Math.ceil(255*Math.random()),Math.ceil(255*Math.random())].join()+")";ba=J[N].value*L;C=z+60;var V=H+N*U+.5*U;u.fillStyle=E;u.fillRect(C,V,ba,.8*U);u.fill();u.fillStyle=G;u.textBaseline="middle";u.textAlign="left";E=getValueFormatString(J[N].value,null,r.valueFormat);u.fillText(E,C+ba+8,V+.5*U-1);u.fill();u.fillStyle=B;u.textAlign="right";u.fillText(J[N].name,C-8,V+.5*U-1);u.fill()}u.closePath();u.restore()}return 2};this.setValue=function(u){A.value=u};A.setOption(c)};var drawSearchIcon=function(a,b,c,g){a.beginPath();var k=b.height<b.width?b.height:b.width,q=b.left+k/2;b=b.top+k/2;a.strokeStyle=g;a.lineWidth=c;a.arc(q,b,k/2*.6,0,2*Math.PI);c=.4*Math.sqrt(Math.pow(k/2,2));a.moveTo(q+c,b+c);a.lineTo(q+k/2*.9,b+k/2*.9);a.stroke();a.closePath()},isNoWordChar=function(a){return-1==" .,/-".indexOf(a)?!1:!0};
function xSaftEdit(a,b,c,g){function k(){var K=[],Z=0,pa=C.option.actionBounds;if(null!=C.option.selector){C.option.selectorValue={};var oa=xDeepCopy(C.option.selector);for(la in oa)if("variable"==la&&"variables."==oa[la].slice(0,10).toLowerCase()){var Aa=oa[la].slice(10);if(null!=U[Aa]&&"Array"==U[Aa].constructor.name)if(0<U[Aa].length){for(var ta=!0,Q=0;Q<U[Aa].length;Q++)U[Aa][Q].name&&oa.name&&U[Aa][Q].name==oa.name&&(U[Aa][Q]=C.option.selectorValue,ta=!1);ta&&(U[Aa][U[Aa].length]=C.option.selectorValue)}else U[Aa]=
[C.option.selectorValue]}else if("Array"==oa[la].constructor.name)for(C.option.selectorValue[la]=oa[la],Aa=0;Aa<C.option.selectorValue[la].length;Aa++){if("Object"==C.option.selectorValue[la][Aa].constructor.name)for(var sa in C.option.selectorValue[la][Aa])if(ta=C.option.selectorValue[la][Aa][sa],"String"==ta.constructor.name&&-1!=ta.indexOf("{{"))for(var ra in U)if(ta=ta.replace("{{ "+ra+" }}",U[ra]),0==ta.trim().length)if(1==C.option.spaceMatch)C.option.selectorValue[la][Aa][sa]=ta;else{C.option.selectorValue[la]=
[];break}else C.option.selectorValue[la][Aa][sa]=ta}else C.option.selectorValue[la]=oa[la]}for(oa=0;oa<pa.length;oa++)if(pa[oa].bound){if("variables."==pa[oa].bound.slice(0,10).toLowerCase()){var la=pa[oa].variable;if(-1!=la.indexOf("{{"))for(var Na in U)la=la.replace("{{ "+Na+" }}",U[Na]);U&&null!=U[pa[oa].bound.slice(10)]&&(K[Z++]={bound:{id:pa[oa].id,variable:la,toTarget:pa[oa].toTarget},value:U[pa[oa].bound.slice(10)]})}}else if("variables."==pa[oa].variable.slice(0,10).toLowerCase()){la=pa[oa].variable;
if(-1!=la.indexOf("{{"))for(var Wa in U)la=la.replace("{{ "+Wa+" }}",U[Wa]);U&&null!=U[pa[oa].variable.slice(10)]&&(K[Z++]={bound:{id:pa[oa].id,variable:la,toTarget:pa[oa].toTarget},value:U[pa[oa].variable.slice(10)]})}return K}var q=this,f,p,v="";c.value&&(v=c.value);var A="",r,u,z=0,H=0,C=c,U=g,J,G,B,L,ba,N,E,V,F={},M={useSystemScheme:!0,type:"",paddingLeft:5,paddingTop:3,paddingRight:5,paddingBottom:3,marginLeft:0,marginTop:5,marginRight:0,marginBottom:5,fontSize:12,boxLeft:0,boxRight:0,offsetX:0,
normal:{color:"#000",backgroundColor:"#fff",borderColor:"#aaa"},focus:{color:"#000",backgroundColor:"#eee",borderColor:"#f00"},composition:!1,isInnerEdit:!1};registerOption(xSaftEdit,M);this.canUseSystemScheme=function(){return M.useSystemScheme};this.getOption=function(){return M};this.getParent=function(){return a};this.getTextInputRect=function(){return F};this.isChineseIntercept=function(){return 1!=M.isInnerEdit?!0:!1};this.setOption=function(K){K.option&&(null!=K.option.useSystemScheme&&(M.useSystemScheme=
K.option.useSystemScheme),null!=K.option.type&&(M.type=K.option.type),null!=K.option.padding&&(M.paddingLeft=K.option.padding,M.paddingTop=K.option.padding,M.paddingRight=K.option.padding,M.paddingBottom=K.option.padding),null!=K.option.paddingLeft&&(M.paddingLeft=K.option.paddingLeft),null!=K.option.paddingTop&&(M.paddingTop=K.option.paddingTop),null!=K.option.paddingRight&&(M.paddingRight=K.option.paddingRight),null!=K.option.paddingBottom&&(M.paddingBottom=K.option.paddingBottom),null!=K.option.margin&&
(M.marginLeft=K.option.margin,M.marginTop=K.option.margin,M.marginRight=K.option.margin,M.marginBottom=K.option.margin),null!=K.option.marginLeft&&(M.marginLeft=K.option.marginLeft),null!=K.option.marginTop&&(M.marginTop=K.option.marginTop),null!=K.option.marginRight&&(M.marginRight=K.option.marginRight),null!=K.option.marginBottom&&(M.marginBottom=K.option.marginBottom),null!=K.option.borderRadius&&(M.borderRadius=K.option.borderRadius),!0===K.option.borderLeft&&(M.borderLeft=K.option.borderLeft),
!0===K.option.borderRight&&(M.borderRight=K.option.borderRight),!0===K.option.borderTop&&(M.borderTop=K.option.borderTop),!0===K.option.borderBottom&&(M.borderBottom=K.option.borderBottom),null!=K.option.offsetX&&(M.offsetX=K.option.offsetX),K.option.fontSize&&(M.fontSize=K.option.fontSize),K.option.fontBold&&(M.fontBold=K.option.fontBold),K.option.fontFamily&&(M.fontFamily=K.option.fontFamily),0==K.option.filterNull&&(M.filterNull=K.option.filterNull),K.option.normal&&(M.normal=K.option.normal),
K.option.focus&&(M.focus=K.option.focus),K.option.callback_onKeydown&&(M.callback_onKeydown=K.option.callback_onKeydown),K.option.callback_enter&&(M.callback_enter=K.option.callback_enter),K.option.composition&&(M.composition=K.option.composition),null!=K.option.isInnerEdit&&(M.isInnerEdit=K.option.isInnerEdit))};this.setPosition=function(K){f={left:K.left,top:K.top,width:K.width,height:K.height}};this.getPosition=function(){return f};this.getStrEdit=function(){return X()};var X=function(){var K=
v,Z=getBoundsVariableSet(C.bounds,U,null,a);if(Z&&U&&C.bounds)if(null==U[Z.variable])K="";else if(null==U[Z.variable])K="";else switch(M.type){case "integer":U[Z.variable]!=parseInt(v)&&(K=""+U[Z.variable]);break;case "price":if(U[Z.variable]!=parseFloat(v))if(U[Z.variable]){K=""+U[Z.variable];if(10<K.length)for(var pa=(U[Z.variable]+5E-8).toFixed(8),oa=pa.length-3;0<oa;oa--)if("0"==pa[oa])K=pa.slice(0,oa),U[Z.variable]=parseFloat(K);else break;parseFloat(K)==parseFloat(v)&&(K=v)}else K="";break;
case "float":U[Z.variable]!=parseFloat(v)&&(K=""+U[Z.variable]);break;default:K="object"==typeof U[Z.variable]?""+Z.boundData?Z.boundData:"":""+U[Z.variable]}null==K&&(K="");return K};this.getShowPageStr=function(K,Z,pa,oa){for(pa=Z.length;K.measureText(Z.substring(0,pa)).width>oa;)pa--;return Z.substring(0,pa)};this.draw=function(K){saveCtx=K;var Z=f.left,pa=f.top,oa=f.width,Aa=f.height;pa+=M.marginTop;Aa-=M.marginTop+M.marginBottom;Z+=M.marginLeft;oa-=M.marginLeft+M.marginRight;var ta=Z,Q=oa;K.save();
var sa=M.borderRadius;if(E||xGlobal.focusObject&&xGlobal.focusObject==q){var ra=M.focus.color;var la=M.focus.backgroundColor;var Na=M.focus.borderColor;var Wa=ra}else ra=M.normal.color,la=M.normal.backgroundColor,Na=M.normal.borderColor;0<sa?fillRoundRect(K,Z,pa,oa,Aa,sa,la,Na):(K.beginPath(),K.fillStyle=la,K.rect(Z,pa,oa,Aa),K.fill(),K.beginPath(),K.strokeStyle=Na,!0===M.borderLeft&&(K.moveTo(Z,pa),K.lineTo(Z,Aa+pa)),!0===M.borderRight&&(K.moveTo(Z+oa,pa),K.lineTo(Z+oa,Aa+pa)),!0===M.borderTop&&
(K.moveTo(Z,pa),K.lineTo(oa+Z,pa)),!0===M.borderBottom&&(K.moveTo(Z,Aa+pa),K.lineTo(oa+Z,Aa+pa)),K.stroke(),K.closePath());sa=12;M.fontSize?sa=M.fontSize:C&&C.fontSize?sa=C.fontSize:b&&b.fontSize&&(sa=b.fontSize);Na="";if(M.fontBold||C&&C.fontBold||b&&b.fontBold)Na+="bold ";Na=M.fontFamily?Na+(sa+"px "+M.fontFamily):C&&C.fontFamily?Na+(sa+"px "+C.fontFamily):b&&b.fontFamily?Na+(sa+"px "+b.fontFamily):Na+(sa+"px "+xGlobal.systemFont);K.font=Na;pa+=M.paddingTop;Aa-=M.paddingTop+M.paddingBottom;Z+=M.paddingLeft+
1;oa-=M.paddingLeft+M.paddingRight;K.textBaseline="middle";K.textAlign="left";v=X();F={width:oa,height:Aa,top:pa,left:Z,color:ra};C&&C.option&&C.option.popup?(ta=oa-(Q+ta-(Z+oa-Aa)),F.width=ta):ta=oa;A=this.getShowPageStr(K,v,sa,ta);ta=pa+Aa/2+1+(null!=xGlobal.systemCellOffsetY?xGlobal.systemCellOffsetY:0);Na="password"==M.type?"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf".slice(0,
A.length):A;xGlobal.focusObject&&xGlobal.focusObject==q&&J?(K.fillStyle=ra,K.fillText(Na,Z,ta),Q=null==J.len?Na.slice(J.begin):Na.slice(J.begin,J.begin+J.len),sa=0,0<J.begin&&(sa=K.measureText(Na.slice(0,J.begin)).width),Na=K.measureText(Q).width,K.fillStyle=ra,K.globalAlpha=.6,K.fillRect(Z+sa,pa+1,Na,Aa-2),K.globalAlpha=1,K.fillStyle="transparent"==la?"#fff":la,K.fillText(Q,Z+sa,ta)):""==Na&&(null==r||""==r)&&C&&C.option&&C.option.placeholder?(K.fillStyle=C.option.placeholderColor,K.fillText(C.option.placeholder,
Z,ta)):(r&&Na!=r&&"String"==r.constructor.name&&r.substr(0,Na.length)==Na&&(K.fillStyle=C.option.placeholderColor,K.fillText(r,Z,ta)),K.fillStyle=ra,K.fillText(Na,Z,ta));p=Z;C&&C.option&&C.option.popup&&(N={left:Z+oa-Aa,top:pa,width:Aa-2,height:Aa-2},drawSearchIcon(K,N,1,ra));H++;if(Wa){if(null==z||z>v.length)z=v.length;Na=K.measureText(v.substr(0,z)).width;K.fillStyle=Wa;K.fillRect(Z+Na,pa+1,2,Aa-2)}K.restore()};var aa=function(K,Z){if(K>=f.left&&K<f.left+f.width&&Z>=f.top&&Z<=f.top+f.height){Z=
12;M.fontSize?Z=M.fontSize:C&&C.fontSize?Z=C.fontSize:b&&b.fontSize&&(Z=b.fontSize);var pa="";if(M.fontBold||C&&C.fontBold||b&&b.fontBold)pa+="bold ";pa=M.fontFamily?pa+(Z+"px "+M.fontFamily):C&&C.fontFamily?pa+(Z+"px "+C.fontFamily):b&&b.fontFamily?pa+(Z+"px "+b.fontFamily):pa+(Z+"px "+xGlobal.systemFont);saveCtx.font=pa;for(pa=0;pa<v.length;pa++){var oa=saveCtx.measureText(v.slice(0,pa+1)).width;if(K<p+oa-Z/3)return pa}return v.length}};this.onMouseDoubleDown=function(K,Z){K=aa(K.offsetX,K.offsetY);
if(null!=K){q.setSelected(0);z=K;if(K>=A.length||isNoWordChar(A[K]))J=null;else{for(;0<=K;K--)if(isNoWordChar(A[K])){null==J&&(J={});J.begin=K+1;break}if(J){for(K++;K<A.length&&!isNoWordChar(A[K]);K++);J.len=K-J.begin;z=J.begin+J.len}}a&&a.draw&&a.draw(!0)}return!0};this.onMouseDown=function(K,Z){if(G==K.screenX&&B==K.screenY&&300>L-K.timeStamp)q.onMouseDoubleDown(K,Z);else C.option&&C.option.popup&&isInRect(K.offsetX,K.offsetY,N)?null==E&&O(v):0==Z?q.setSelected(0):q.setCursorPos(K.offsetX,K.offsetY);
G=K.screenX;B=K.screenY;L=K.timeStamp;ba=z;H=1};this.onMouseUp=function(K){ba=null};this.onMouseMove=function(K){if(null!=ba&&(K=aa(K.offsetX,K.offsetY),null!=K))return null==J&&(J={begin:z}),K>J.begin?J.len=K-J.begin:(J.len=ba-K,J.begin=K),z=K,this.draw(saveCtx),!0};this.getString=function(){return v};this.setString=function(K){v=K;if(C.bounds&&C.bounds[0].variable){var Z=C.bounds[0].variable.split(".");1==Z.length&&(Z[1]=Z[0]);U&&U[Z[1]]&&(U[Z[1]]=K)}a&&a.draw&&a.draw(!0)};this.clearSelect=function(K){J&&
(0==J.begin?null==J.len||J.len>=v.length?(z=0,A=v=""):(v=v.slice(J.len),z=0):(v=v.slice(0,J.begin)+v.slice(J.begin+J.len),z=J.begin));J=null;return z};this.setSelected=function(K,Z){J={begin:K,len:Z};z=null==Z?null:K+Z};this.setCursorPos=function(K,Z){K=aa(K,Z);null!=K&&(z=K,J=null);return!0};var ia=function(){var K=null,Z=0;switch(M.type){case "integer":""!=v&&(K=parseInt(v));break;case "float":""!=v&&(K=parseFloat(v));break;case "price":K=v;for(var pa=0;pa<v.length;pa++)if("."==v[pa]){K=v.slice(0,
pa)+v.slice(pa+1);Z=v.length-(pa+1);0>Z&&(Z=0);break}K=parseInt(K)}return{value:K,dec:Z}},fa=function(K){var Z=!1;J&&(z=q.clearSelect(v),Z=!0);null==z?(v=K,z=v.length):(v=v.slice(0,z)+K+v.slice(z),z+=K.length);return Z},T=function(){if(null!=C.bounds){var K=getBoundsVariableSet(C.bounds,U,null,a),Z=C.bounds[0].variable.split(".");if(U&&K)switch(M.type){case "integer":U[K.variable]=""==v?null:parseInt(v);break;case "float":U[K.variable]=""==v?null:parseFloat(v);break;case "price":U[K.variable]=""==
v?null:parseFloat(v);break;default:2<Z.length?U[Z[1]][Z[2]]=v:U[K.variable]=v,C.callback_onChange&&C.callback_onChange(U[K.variable],Y())}u=v}};this.onInput=function(K){v=K.target.value=K.target.value;H=1;T();C.option&&C.option.popup&&O(v);C.callback&&C.callback();a&&a.draw&&(H=1,a.draw(!0));""==K.target.value&&this.closeBox()};this.onKeyDown=function(K){if(C&&C.option&&1==C.option.readOnly)return!1;v=X();var Z=!1,pa=!0;V=K.keyCode;switch(M.type){case "integer":case "float":case "price":var oa=ia();
null==oa.value&&(oa.value=0);187==K.keyCode&&(V=107)}if(M.callback_onKeydown&&1==M.callback_onKeydown(Y(),K))C.option.actionBounds&&(K=k())&&0<K.length&&(a.synchBoundValue&&C.option.boundsPage?a.page.synchBoundValue("enter",0,xDeepCopy(K),a):a.synchBoundValue&&a.synchBoundValue("enter",0,xDeepCopy(K)));else switch(V){case 9:pa=!1;break;case 27:E?(q.setString(""),q.closeBox(),1!=M.isInnerEdit&&xGlobal.chineseIntercept&&(xGlobal.chineseIntercept.value="")):pa=!1;break;case 40:if(C.option&&C.option.popup&&
null==E){O(v);break}case 38:1!=xGlobal.passiveSupported&&K.preventDefault();case 34:1!=xGlobal.passiveSupported&&K.preventDefault();case 33:E&&(E.onKeyDown(K),this.draw(saveCtx));break;case 36:if(0<z)1==K.shiftKey?null==J?q.setSelected(0,z):(J.len=z>J.begin?J.begin:J.len+J.begin,J.begin=0):J=null,z=0,a&&a.draw&&a.draw(!0);else if(0==K.shiftKey&&E)E.onKeyDown(K);break;case 35:if(z<v.length)1==K.shiftKey?null==J?q.setSelected(z,v.length):(z>=J.begin+J.len||(J.begin+=J.len),J.len=v.length-J.begin):J=
null,z=v.length,a&&a.draw&&a.draw(!0);else if(0==K.shiftKey&&E)E.onKeyDown(K);break;case 37:if(1==M.isInnerEdit){null==z&&(z=v.length-1);if(0<z){oa=z;if(1==K.ctrlKey)for(z--;0<z&&!isNoWordChar(v[z]);z--);else z--;1==K.shiftKey?null==J?J={begin:z,len:oa-z}:oa>=J.begin+J.len?z<=J.begin?(J.len=J.begin-z,J.begin=z):J.len=z-J.begin:(J.begin=z,J.len+=oa-z):J=null}else 1!=K.shiftKey&&(J=null);a&&a.draw&&a.draw(!0)}break;case 39:if(1==M.isInnerEdit){null==z&&(z=v.length);if(z<v.length){oa=z;if(1==K.ctrlKey)for(z++;z<
v.length&&!isNoWordChar(v[z]);z++);else z++;1==K.shiftKey?null==J?q.setSelected(oa,z-oa):oa>=J.begin+J.len?J.len+=z-oa:z>=J.begin+J.len?(J.begin+=J.len,J.len=z-J.begin):(J.len-=z-J.begin,J.begin=z):J=null}else 1!=K.shiftKey&&(J=null);a&&a.draw&&a.draw(!0)}break;case 46:1==M.isInnerEdit&&(J?(z=q.clearSelect(v),Z=!0):z<v.length&&(v=v.slice(0,z)+v.slice(z+1),Z=!0),r=null);break;case 8:1==M.isInnerEdit&&(null==z&&(z=v.length),J?(z=q.clearSelect(v),Z=!0):0<z&&(v=v.slice(0,z-1)+v.slice(z),z--,Z=!0),r=null);
break;case 13:pa=!1;selceted=null;C&&C.option&&C.option.callback_save&&C.option.callback_save(v);C.click&&a.submit(C.click);E&&(E.getPage().synchBoundValueFromWidgetById(C.option.popup.elements[0].element.id),r?(v=r,r=null):this.setString(""),this.closeBox());if(C&&C.option&&C.option.callback_enter)pa=C.option.callback_enter(Y(),v,q,K);else if(E&&(T(),1!=M.isInnerEdit&&xGlobal.chineseIntercept&&(xGlobal.chineseIntercept.value=""),""==v&&0!=C.option.filterNull))return;a&&C.action&&a.doAction(C.action);
C.option.actionBounds&&(K=k())&&0<K.length&&(a.synchBoundValue&&C.option.boundsPage?a.page.synchBoundValue("enter",0,xDeepCopy(K),a):a.synchBoundValue&&a.synchBoundValue("enter",0,xDeepCopy(K)));a&&a.draw&&a.draw(!0);return pa;case 107:case 109:case 189:if(C.option.delta){null==C.option.delta.delta?107==V?oa.value++:oa.value--:oa.value=107==V?oa.value+C.option.delta.delta:oa.value-C.option.delta.delta;switch(M.type){case "integer":case "float":var Aa=""+oa.value;break;case "price":Aa=(oa.value/Math.pow(10,
oa.dec)).toFixed(oa.dec)}K=Aa;oa=parseFloat(K);null!=C.option.delta.max&&oa>C.option.delta.max||null!=C.option.delta.min&&oa<C.option.delta.min||(v=K,Z=!0,z=v.length);r=null;break}default:if(a&&a.draw&&a.draw(!0),1==M.isInnerEdit){if(1==K.key.length||null!=K.customKey&&1==K.customKey.length){pa=!1;switch(M.type){case "integer":if("0"<=K.key&&"9">=K.key||"0"<=K.customKey&&"9">=K.customKey)pa=!0;break;case "float":case "price":if("0"<=K.key&&"9">=K.key||"."==K.key||"0"<=K.customKey&&"9">=K.customKey||
"."==K.customKey)pa=!0;break;default:" "<=K.key&&"}">=K.key&&(pa=!0)}if(pa){r=null;if(1==K.metaKey||1==K.ctrlKey)return!1;fa(K.customKey?K.customKey:K.key);Z=!0;J=null}}pa=!1}}H=1;1==Z&&(T(),C.option&&C.option.popup&&O(v),pa=!0,C.callback&&C.callback(),a&&a.draw&&a.draw(!0));return pa};this.doCompositionend=function(K){if(C&&C.option&&1==C.option.readOnly||0==M.composition)return!1;v=X();V=K.keyCode;switch(M.type){case "integer":case "float":case "price":var Z=ia();null==Z.value&&(Z.value=0);187==
K.keyCode&&(V=107)}M.callback_onKeydown&&1==M.callback_onKeydown(Y(),K)&&C.option.actionBounds&&(K=k())&&0<K.length&&(a.synchBoundValue&&C.option.boundsPage?a.page.synchBoundValue("enter",0,xDeepCopy(K),a):a.synchBoundValue&&a.synchBoundValue("enter",0,xDeepCopy(K)));if(""!=v)return H=1,!0};var Y=function(){var K=null;a.getActionTarget&&(K=a.getActionTarget());if(null==K||null==K.target)K={target:a,targetButton:q};return{option:C,thisOption:M,variables:U,target:K.target,targetButton:K.targetButton}};
this.doCut=function(){if(J){var K=J.len;null==K&&(K=v.length);var Z=v.slice(J.begin,J.begin+K);v=0<J.begin?v.slice(0,J.begin)+v.slice(J.begin+K):v.slice(J.begin+K);z=J.begin;J=null;T();a&&a.draw&&a.draw(!0);return Z}};this.doCopy=function(){if(J)return null==J.len?v.slice(J.begin,J.begin+v.length):v.slice(J.begin,J.begin+J.len)};this.doPaste=function(K){if(K=getClipboardData(K))fa(K),T(),a&&a.draw&&a.draw(!0)};this.getStatus=function(){return 1};this.onUnFocus=function(){q.closeBox()};this.closeBox=
function(){1!=M.isInnerEdit&&xGlobal.chineseIntercept&&(xGlobal.chineseIntercept.selectionStart=0,xGlobal.chineseIntercept.selectionEnd=0);E&&(E.destroy(),E=null,xGlobal.saftPopup=null)};this.isMySelf=function(K){if(K.toElement==a.getCanvas()&&(isInRect(K.offsetX,K.offsetY,f)||null==E))return!0;for(K=K.toElement;K;K=K.parentElement)if(K==E.getDiv())return!0;return!1};this.synchBoundValue=function(K,Z,pa,oa){if(oa!=q){Z=C.bounds;if(void 0!=Z&&0<Z.length){for(var Aa=!1,ta=0;ta<pa.length;ta++)if(null!=
pa[ta]&&null!=pa[ta].bound)for(var Q=0;Q<Z.length;Q++)if((null==Z[Q].type||"synch"==Z[Q].type||"receive"==Z[Q].type)&&Z[Q].id==pa[ta].bound.id&&Z[Q].variable==pa[ta].bound.variable){if("variables."==pa[ta].bound.variable.slice(0,10)){var sa=pa[ta].bound.variable.slice(10);try{if(U[sa]!=pa[ta].value){var ra=!1;if(1==Z[Q].saveEdit||1==Z.length)ra=!0;if("doSelectChanged"==K&&1==ra)r=pa[ta].value;else if(U[sa]=pa[ta].value,0==ta)if(r=null,v=pa[ta].value,r=pa[ta].value,null==u||""==u)q.setSelected(0);
else for(Q=0;Q<pa[ta].value.length;Q++)if(Q<u.length){if(pa[ta].value[Q]!=u[Q]){q.setSelected(Q,pa[ta].value.length-Q);break}}else{q.setSelected(Q,pa[ta].value.length-Q);break}Aa=!0}}catch(la){console.log(e)}}else if(pa[ta].bound.variable)try{eval(pa[ta].bound.variable)!=pa[ta].value&&(eval(pa[ta].bound.variable+"=boundValue[i].value"),Aa=!0)}catch(la){console.log(e)}break}1==Aa&&a&&a.draw&&a.draw(!0)}oa&&(K=oa.getPage())&&E&&K==E.getPage()&&pa&&(r=pa[0].value)}};this.getBoundValues=function(){if(C.bounds){if(C.variables){for(var K in C.variables){C.variables[K]=
v;break}return getBoundValues(C.bounds,C.variables)}K=[];K[0]={bound:C.bounds[0],value:v};return K}};this.refresh=function(){E&&E.refresh()};this.doEscape=function(){a.draw&&a.draw(!0);q.closeBox()};this.destroy=function(){q.closeBox();1==M.isInnerEdit||!xGlobal.chineseIntercept||xGlobal.focusObject&&"xSaftEdit"!=xGlobal.focusObject.constructor.name||(xGlobal.chineseIntercept.style.display="none")};this.hidden=function(){};var O=function(K){if(null==E){E=new xSaftPopup(window,q);C.option.popup.doEscape=
q.doEscape;E.createLayer(C.option.popup);var Z=getScreenXY(a.getParentDiv());K=Z.x+f.left+M.offsetX;Z=Z.y+f.top+f.height+(null==C.option.boxTop?0:C.option.boxTop);var pa=null==C.option.boxWidth?f.width:C.option.boxWidth,oa=C.option.boxHeight;null==oa&&(oa=200);E.setBoundWidgets([q]);E.setPosition(K,Z,pa,oa);E.show(!0)}E.synchBoundValue("init",0,q.getBoundValues(),q);xGlobal.saftPopup=q};q.setOption(c)};var saftPopupIdCount=0;
function xSaftPopup(a,b,c,g){var k=this,q=document.createElement("div");q.className="xSaftPupup";g=document.createAttribute("style");g.value="display:none; overflow:hidden; position:absolute; left:0px; top:0px; width:0px; height:0px;background-color:#fff;border:1px solid #ddd;z-index:"+xZIndex.popover+";";g.value=c&&c.style?g.value+c.style:g.value+xGlobal.popupShadow;q.setAttributeNode(g);a.document.getElementById("mainBody").appendChild(q);var f;this.getFrameId=function(){return saftPopupIdCount++};this.setActionTarget=
function(p,v,A){f.setActionTarget(p,v,A)};this.getDiv=function(){return q};this.getPage=function(){return f};this.destroy=function(){f&&(f.destroy(),f=null);a.document.getElementById("mainBody").removeChild(q)};this.isChild=function(p){return f?f.isChild(p):!1};this.setPosition=function(p,v,A,r){var u=q.parentElement.offsetWidth;p+A>u-6&&(p=u-6-A);q.style.left=""+p+"px";q.style.top=""+v+"px";q.style.width=""+A+"px";q.style.height=""+r+"px"};this.createLayer=function(p,v){v=void 0===v?!0:v;f=new xPage(a,
k,null,q,p,!1,null,null,b);if(p=xMe.getSystemScheme()){var A;if(A=p.xSaftPopup.xSaftPopup?p.xSaftPopup.xSaftPopup:p.xSaftPopup.normal)A.style&&(q.style=getOptionStyle(q.style.cssText,A.style)),A.backgroundColor&&(q.style.backgroundColor=A.backgroundColor),A.borderColor&&(q.style.border="1px solid "+A.borderColor);v&&f.setScheme(p,"xSaftPopup")}};this.setBoundWidgets=function(p){f&&f.setBoundWidgets(p)};this.synchBoundValue=function(p,v,A,r){f&&f.synchBoundValue(p,v,A,r)};this.onKeyDown=function(p){if(f&&
(f.onKeyDown(p),f))f.onKeyUp(p)};this.show=function(p){f&&(1==p?(q.style.display="block",f.layout(),f.show(!0),f.redraw()):q.style.display="none")};this.refresh=function(){f&&f.refresh()}};function xSaftThumbnail(a,b,c,g,k){var q,f,p,v,A,r,u,z,H=this,C,U={total:0,offset:0,position:0,page:0,begin:null,type:"int",minPage:2},J={useSystemScheme:!0,borderRadius:1,marginLeft:1,marginTop:1,marginRight:1,marginBottom:1,date:{field:"",color:"#aaa",splitColor:"#bbb"},data:{field:"",color:"#ddd",fillColor:"#eee"},solt:{backgroundColor:"#f8f8f8",borderColor:"#ddd"},slider:{backgroundColor:"rgb(200,220,255,0.3)",borderColor:"#bbb",borderType:"2"}},G,B,L,ba,N,E;registerOption(xSaftButton,J);this.canUseSystemScheme=
function(){return J.useSystemScheme};this.setOption=function(V){V&&V.option&&(0==V.show&&(showState=!1),null!=V.option.useSystemScheme&&(J.useSystemScheme=V.option.useSystemScheme),null!=V.option.margin&&(J.marginLeft=V.option.margin,J.marginTop=V.option.margin,J.marginRight=V.option.margin,J.marginBottom=V.option.margin),null!=V.option.marginLeft&&(J.marginLeft=V.option.marginLeft),null!=V.option.marginTop&&(J.marginTop=V.option.marginTop),null!=V.option.marginRight&&(J.marginRight=V.option.marginRight),
null!=V.option.marginBottom&&(J.marginBottom=V.option.marginBottom),null!=V.option.borderRadius&&(J.borderRadius=V.option.borderRadius),null!=V.option.borderTopLeftRadius&&(someBorderRadius=!0,J.borderTopLeftRadius=V.option.borderTopLeftRadius),null!=V.option.borderTopRightRadius&&(someBorderRadius=!0,J.borderTopRightRadius=V.option.borderTopRightRadius),null!=V.option.borderBottomLeftRadius&&(someBorderRadius=!0,J.borderBottomLeftRadius=V.option.borderBottomLeftRadius),null!=V.option.borderBottomRightRadius&&
(someBorderRadius=!0,J.borderBottomRightRadius=V.option.borderBottomRightRadius),V.option.fontSize&&(J.fontSize=V.option.fontSize),V.option.fontBold&&(J.fontBold=V.option.fontBold),V.option.fontFamily&&(J.fontFamily=V.option.fontFamily),V.option.date&&(J.date=V.option.date),V.option.data&&(J.data=V.option.data),V.option.solt&&(J.solt=V.option.solt),V.option.slider&&(J.slider=V.option.slider))};this.setPosition=function(V){C={left:V.left,top:V.top,width:V.width,height:V.height}};this.setValue=function(V){V?
(H.setCursorPostion(V.value),V.value.date?H.setThumbainlDate(V.value.date):H.setThumbainlDate(null),V.value.thumbnail?H.setThumbainlData(V.value.thumbnail):H.setThumbainlData(null)):(H.setCursorPostion(null),H.setThumbainlDate(null),H.setThumbainlData(null))};this.setCursorPostion=function(V){null==V?U.begin=null:(null!=V.positon&&(U.position=V.positon),null!=V.offset&&(U.offset=V.offset),null!=V.page&&(U.page=V.page),null!=V.total&&(U.total=V.total),null!=V.minPage&&(U.minPage=V.minPage),null!=V.type&&
(U.type=V.type),U.begin=U.position,0>U.begin&&(U.page+=U.begin,U.begin=0))};this.getOption=function(){return c};this.getParent=function(){return a};this.getThisOption=function(){return J};this.isInRect=function(V,F,M){if(V>=C.left&&V<=C.left+C.width&&F>=C.top&&F<=C.top+C.height)return!0};this.isBrother=function(V){if(a==V)return!0};this.setThumbainlDate=function(V){L=V};this.setThumbainlData=function(V){if(ba!=V&&(ba=V,E=N=null,ba))for(V=0;V<ba.length;V++)if(ba[V])for(var F=0;F<ba[V].length;F++)null!=
ba[V][F]&&(null==N&&(N=ba[V][F]),null==E&&(E=ba[V][F]),N<ba[V][F]?N=ba[V][F]:E>ba[V][F]&&(E=ba[V][F]))};this.draw=function(V,F){F=C.left;var M=C.top,X=C.width,aa=C.height;M+=J.marginTop;aa-=J.marginTop+J.marginBottom;F+=J.marginLeft;X-=J.marginLeft+J.marginRight;V.save();var ia=J.borderRadius;A=F+1;r=M;u=X-2;z=aa;var fa=J.solt.backgroundColor;var T=J.solt.borderColor;0<ia||1==someBorderRadius?fillRoundRect(V,F,M,X,aa,ia,fa,T,J):(V.beginPath(),V.strokeStyle=T,V.fillStyle=fa,V.rect(F,M,X,aa),V.fill(),
V.stroke(),V.closePath());F=U.total;if(ba&&1<F)for(M=0;M<ba.length;M++){V.beginPath();X="Array"==J.data.constructor.name?J.data[M]:J.data;0==M&&X.fillColor&&(aa=V.createLinearGradient(A,r,A+u,r+z),aa.addColorStop(0,X.fillColor),aa.addColorStop(1,X.fillColor),V.fillStyle=aa);V.strokeStyle=X.color;X=u/(F-1);fa=aa=A+U.offset*X;for(var Y=T=0;Y<ba[M].length;Y++)null!=ba[M][Y]&&(ia=r+z-(ba[M][Y]-E)/(N-E)*z,0==T?(fa=aa,V.moveTo(aa,ia)):V.lineTo(aa,ia),T++),aa+=X;0==M&&(V.lineTo(aa-X,r+z),V.lineTo(fa,r+z),
V.fill());V.stroke();V.closePath()}if(L&&1<F){V.beginPath();M=12;J.fontSize&&(M=J.fontSize);X="";if(J.fontBold||c&&c.fontBold)X+="bold ";X=J.fontFamily?X+(M+"px "+J.fontFamily):X+(M+"px "+xGlobal.systemFont);V.font=X;V.textBaseline="middle";V.textAlign="center";V.fillStyle=J.date.color;V.strokeStyle=J.date.splitColor;fa=parseInt(L[0]/1E4);T=aa=A+U.offset/(F-1)*u;ia=r+z/2;X=u/(F-1);for(M=0;M<L.length;M++)fa!=parseInt(L[M]/1E4)&&(aa=A+U.offset/(F-1)*u+M*X,V.moveTo(aa,r),V.lineTo(aa,r+z),0<=T&&aa-T>
V.measureText(fa).width+4&&V.fillText(fa,T+(aa-T)/2,ia),T=aa,fa=parseInt(L[M]/1E4));0<L.length&&(aa=A+U.offset/(F-1)*u+M*X,fa=parseInt(L[M-1]/1E4),0<=T&&aa-T>V.measureText(fa).width+4&&V.fillText(fa,T+(aa-T)/2,ia));V.stroke();V.closePath()}0<F&&null!=U.begin?(q=A+U.begin/(F-1)*u,f=r,p=U.page/F*u,v=z,q+p>A+u&&(p=A+u-q),V.beginPath(),V.fillStyle=J.slider.backgroundColor,V.fillRect(q,f,p,v),V.closePath(),V.beginPath(),"2"==J.slider.borderType?(V.lineWidth=3,V.strokeStyle=J.slider.borderColor,V.moveTo(q,
f),V.lineTo(q,f+v),V.moveTo(q-2,f+v/4),V.lineTo(q-2,f+.75*v),V.moveTo(q+2,f+v/4),V.lineTo(q+2,f+.75*v),V.moveTo(q+p,f),V.lineTo(q+p,f+v),V.moveTo(q+p-2,f+v/4),V.lineTo(q+p-2,f+.75*v),V.moveTo(q+p+2,f+v/4),V.lineTo(q+p+2,f+.75*v)):(V.lineWidth=3,V.strokeStyle=J.slider.borderColor,V.moveTo(q,f),V.lineTo(q,f+v),V.moveTo(q+p,f),V.lineTo(q+p,f+v)),V.stroke(),V.closePath()):v=p=f=q=0;V.restore()};this.onMouseMove=function(V){if(1==V.buttons){if(null!=B){V.offsetX>A+u&&(V.offsetX=A+u);V=(U.total-1)*(V.offsetX-
B.x)/u;"int"==U.type&&(V=parseInt(V));switch(G){case "left-border":U.begin=B.begin+V;U.page=B.page-V;0>U.begin?(U.begin=0,U.page=B.begin+B.page):U.begin>=B.begin+B.page-U.minPage&&(U.begin=B.begin+B.page-U.minPage,U.page=B.begin+B.page-U.begin);break;case "right-border":U.page=B.page+V;U.page<U.minPage&&(U.page=U.minPage);break;case "move-slider":U.begin=B.begin+V,0>U.begin&&(U.begin=0),U.begin+U.page>U.total&&(U.begin=U.total-U.page)}c.callback?(U.position=U.begin,c.callback(U)):a&&a.draw&&a.draw(!0)}}else V.offsetY>=
C.top&&V.offsetY<=C.top+C.height&&V.offsetX>=C.left&&V.offsetX<=C.left+C.width?V.offsetX>=q-1&&V.offsetX<=q+3?a.setCursor?a.setCursor("col-resize"):a.getCanvas().style.cursor="col-resize":V.offsetX>=q+p-1&&V.offsetX<=q+p+3?a.setCursor?a.setCursor("col-resize"):a.getCanvas().style.cursor="col-resize":V.offsetX>=q-1&&V.offsetX<=q+p+1?a.setCursor?a.setCursor("move"):a.getCanvas().style.cursor="move":a.setCursor?a.setCursor("default"):a.getCanvas().style.cursor="default":a.setCursor?a.setCursor("default"):
a.getCanvas().style.cursor="default"};this.onMouseOut=function(V,F){0==V.buttons&&(a.setCursor?a.setCursor("default"):a.getCanvas().style.cursor="default")};this.onMouseDown=function(V){if(V.offsetY>=C.top&&V.offsetY<=C.top+C.height&&V.offsetX>=C.left&&V.offsetX<=C.left+C.width)return B={x:V.offsetX,y:V.offsetY,begin:U.begin,page:U.page},G=V.offsetX>=q-1&&V.offsetX<=q+3?"left-border":V.offsetX>=q+p-1&&V.offsetX<=q+p+3?"right-border":V.offsetX>=q-1&&V.offsetX<=q+p+1?"move-slider":"to",!0};this.onMouseUp=
function(V){G=null;a.setCursor?a.setCursor("default"):a.getCanvas().style.cursor="default"};this.onSetFocus=function(V,F){isMousePush=null;isFocus=V;isAlwaysShowSelected=F};this.isMySelf=function(V){var F;a.getCanvas&&(F=a.getCanvas());"xChart"==a.getCanvas().classList.value&&(F=a.getCanvas().nextElementSibling);if(V.toElement==F&&(isInRect(V.offsetX,V.offsetY,C)||null==saftPopupBox))return!0;for(V=V.toElement;V;V=V.parentElement)if(V==saftPopupBox.getDiv())return!0;return!1};this.getGeometry=function(){return C};
this.getBounds=function(){if(c.bounds)return c.bounds;if(c.bound)return c.bound};this.show=function(V){showState=!0;1==V&&a.draw(!0)};this.hidden=function(V){showState=!1;1==V&&a.draw(!0)};H.setOption(c)};function chartEngineData(){var a=this,b;this.dataLastIndex=null;this.visibleItems=this.totalRows=this.dataRows=this.dataBegin=0;var c;this.getEngineData=function(){return b};this.setDataTable=function(f,p,v){if(null==f||0==f.length||null==f[0]||null==f[0].table||null==f[0].table.field||null==f[0].table.data)b=null;else{b=xDeepCopy(f);f=b[0].table;var A,r=[];a.dataBegin=f.info.dataBegin;a.dataRows=f.info.rows;a.totalRows=f.info.totalRows;f.data&&0<f.info.totalRows&&(a.dataLastIndex=f.data.length);
for(var u=0;u<b.length;u++)if(null!=b[u]&&null!=b[u].table&&null!=b[u].table.field)if(0==b[u].isEnable)b[u]&&(b[u].isEnable=!1);else{b[u].isEnable=!0;if((A=b[u].table)&&"row"==A.info.rank){for(var z=[],H=0;H<A.field.length;H++){z[H]=[];for(var C=A.field[H][0].toLowerCase(),U=0;U<A.data.length;U++)z[H][U]=A.flags&&A.flags[C]&&3==(A.flags[C][U]&3)?null:A.data[U][H]}A.data=z;A.info.rank="col"}if(A&&A.data&&A.data[0]&&1<A.data[0].length&&(z=q(A))&&(z=z.col,A.data[z][0]>A.data[z][1])){z=[];for(H=0;H<A.field.length;H++)for(z[H]=
[],U=0;U<A.data[H].length;U++)z[H][U]=A.data[H][A.data[H].length-U-1];A.data=z}if(b[u]&&b[u].table)for(var J in b[u].table)if("table"!=J&&"update"!=J&&"field"!=J&&"data"!=J&&"exchTime"!=J&&"adjust"!=J&&"flags"!=J&&"info"!=J&&"dataStatus"!=J&&"last"!=J&&b[u].table[J]&&b[u].table[J].table&&b[u].table[J].table.data&&b[u].table[J].table.field&&"row"==b[u].table[J].table.info.rank){C=b[u].table[J].table;z=[];for(H=0;H<C.field.length;H++)for(z[H]=[],U=0;U<C.data.length;U++)z[H][U]=C.data[U][H];C.data=z;
C.info.rank="col"}if(0==u&&v.synchType&&"all"==v.synchType&&v.synchField)for(z=1;z<b.length;z++)if(b[z]&&b[z].table&&b[z].table.data&&0<b[z].table.data.length&&c[z]&&c[z].synchField&&(null==c[z].isEnable||0!=c[z].isEnable)&&v.synchField.toLowerCase()==c[z].synchField.toLowerCase()){for(H=0;H<A.field.length;H++)if(A.field[H][0].toLowerCase()==v.synchField.toLowerCase()){var G=H;break}var B=b[z].table;for(H=0;H<B.field.length;H++)if(B.field[H][0].toLowerCase()==c[z].synchField.toLowerCase()){var L=
H;break}if(null!=L&&null!=G){var ba=A.data[G];if((C=B.data[L])&&0<C.length){var N=0,E=0,V=0;H=[];for(U=0;U<A.field.length;U++)H[U]=[];if(null==ba)for(E=0;E<C.length;E++)for(U=0;U<A.field.length;U++)if(U!=G)for(var F=0;F<B.field.length;F++){if(F!=L&&A.field[U][0].toLowerCase()==B.field[F][0].toLowerCase()){H[U][E]=B.data[F][E];break}}else H[G][E]=C[E];else{for(;N<ba.length&&E<C.length;)if(null==C[E])E++;else if(ba[N]>C[E]){for(U=0;U<A.field.length;U++)if(U!=G)for(F=0;F<B.field.length;F++){if(F!=L&&
A.field[U][0].toLowerCase()==B.field[F][0].toLowerCase()){H[U][V]=B.data[F][E];break}}else H[G][V]=C[E];V++;E++}else if(ba[N]<=C[E]){for(U=0;U<A.field.length;U++)H[U][V]=A.data[U][N];V++;E++;N++}for(;N<ba.length;N++,V++)for(U=0;U<A.field.length;U++)H[U][V]=A.data[U][N]}for(U=0;U<A.field.length;U++)A.data[U]=H[U]}}totalRows=dataRows=A.data&&A.data[G]?A.data[G].length:0;A.info.rows=dataRows}if(0==u&&b[u].table.exchTime&&b[u].table.exchTime.table&&b[u].table.exchTime.table.data&&b[u].table.exchTime.table.data[0]&&
b[u].table.exchTime.table.data[0][0]){C=b[u].table.exchTime.table.data[0][0];H=[];for(z=U=0;z<C.length;z++)for(E=C[z][0];E<=C[z][1];E+=6E4)H[U++]=E;if(A.data){C=A.data[0];z=[];for(U=0;U<A.field.length;U++)z[U]=[];if(A.flags)for(U=0;U<A.field.length;U++)if(N=A.field[U][0].toLowerCase(),A.flags[N])for(E=0;E<A.flags[N].length;E++)3==(A.flags[N][E]&3)&&A.data[U]&&(A.data[U][E]=null);B=E=N=0;if(C)for(;N<H.length&&E<A.info.rows;){E<A.info.rows-1&&C[E]>C[E+1]&&(C[E]=C[E+1]-6E5);U=6E4*Math.floor(C[E]/6E4);
if(H[N]==U){for(U=0;U<A.field.length;U++)null!=A.data[U][E]&&(z[U][B]=A.data[U][E]);E++;N++}else if(H[N]<U)z[0][B]=H[N],N++;else if(H[N]>U){for(U=0;U<A.field.length;U++)null!=A.data[U][E]&&(z[U][B]=A.data[U][E]);E++}else break;B++}if(z[0])for(a.dataLastIndex=z[0].length;N<H.length;N++,B++)z[0][B]=H[N];else a.dataLastIndex=0;for(U=0;U<A.field.length;U++)A.data[U]=z[U],z[U]=null}else A.data=[];A.data[0]?(A.info.rows=A.data[0].length,A.info.totalRows=A.data[0].length):(A.info.rows=0,A.info.totalRows=
0);a.dataRows=a.dataLastIndex;a.totalRows=A.info.totalRows}else switch(v.type){case "year":case "month":case "week":case "day":case "workday":if(z=new Date,z=1E4*z.getFullYear()+100*(z.getMonth()+1)+z.getDate(),U=z-1E4,v.startDate&&v.endDate&&(U=v.startDate,z=v.endDate),b&&b[0]&&b[0].table&&b[0].table.data&&b[0].table.data.length&&0<a.visibleItems&&(C=q(f,"date"),null!=C&&(N=f.data[C.col],z=N[N.length-1],U=a.visibleItems,b[0].table.info.totalRows>U&&(U=b[0].table.info.totalRows),U=calcDate(z,-1*U+
1,v.type).date)),U&&z&&z>U){E=[];for(N=U;N<=z;N=calcDate(N,1,v.type).date)E[E.length]=N;B=1;"year"==v.type?B=1E4:"month"==v.type&&(B=100);C=q(f,"date");if(null!=C){H=[];N=f.data[C.col];for(ba=U=z=0;ba<f.field.length;ba++)H[ba]=[];for(;z<E.length;z++)if(U>=N.length)H[C.col][z]=E[z];else for(;U<N.length;U++)if(parseInt(E[z]/B)==parseInt(N[U]/B)){for(ba=U+1;ba<N.length;ba++)if(parseInt(E[z]/B)!=parseInt(N[ba]/B)){U=ba-1;break}for(ba=0;ba<f.field.length;ba++)H[ba][z]=f.data[ba][U];U++;break}else if(parseInt(E[z]/
B)>parseInt(N[U]/B)){for(ba=U+1;ba<N.length;ba++)if(parseInt(E[z]/B)<parseInt(N[ba]/B)){U=ba-1;break}for(ba=0;ba<f.field.length;ba++)H[ba][z]=f.data[ba][U];U++;break}else if(parseInt(E[z]/B)<parseInt(N[U]/B)){H[C.col][z]=E[z];break}for(ba=0;ba<f.field.length;ba++)f.data[ba]=H[ba];f.info.totalRows=E.length;f.info.rows=E.length;f.info.begin=0;a.dataBegin=f.info.dataBegin;a.dataRows=f.info.rows;a.totalRows=f.info.totalRows}}}z=A;U=r;H=u;if(z.adjust&&z.data&&p&&void 0!=p.dividend&&z.data[0]){N=p.dividend;
C=[];E=[];if(z.adjust&&0<z.adjust.length)if(z.adjust[0][1][0])for(var M=0;M<z.adjust.length;M++)for(B=0;!(E[E.length]=[z.adjust[M][1][B][0],z.adjust[M][1][B][1]],B>=z.adjust[M][1].length-2);B++);else for(M=0;M<z.adjust.length;M++)E[E.length]=[z.adjust[M][0],z.adjust[M][1]];B=void 0;V=z.data[0];F=[];if(V&&29991231<V[0]){M=new Date;for(var X=0;X<V.length;X++)M.setTime(V[X]),ba=1E4*M.getFullYear()+100*(M.getMonth()+1)+M.getDate(),B!=ba?B=F[X]=ba:F[X]=ba+.1}else F=V;ba=F;V=E;for(M=0;M<ba.length&&null==
ba[M];M++);for(B=0;M<ba.length&&M<z.info.rows&&B<E.length;)null==ba[M]?M++:null==V[B]?B++:ba[M]>=V[B][0]||1==z.info.rows?(C[C.length]={index:M,date:E[B][0],factor:E[B][1]},B++):ba[M]<V[B][0]&&M++;ba=[];M=[];X=!1;for(F=0;F<N.dataField.length;F++)ba[F]=z.data[g(N.dataField[F],z)],M[F]=[];if(0<C.length){if("forward"==N.type.toLowerCase()){X=!0;for(F=C.length-1;0<F;F--)C[F].factor=F==C.length-1?C[F-1].factor/C[F].factor:C[F+1].factor*C[F-1].factor/C[F].factor;C[0].factor=1<C.length?C[1].factor/C[0].factor:
1/C[0].factor;for(B=0;B<=C.length;B++)for(0==B?(F=0,E=C[B].index,V=C[B].factor,1==ba[0].length&&(E=1,B++)):B==C.length?(F=C[B-1].index,E=ba[0]?ba[0].length:F,V=1):(F=C[B-1].index,E=C[B].index,V=C[B].factor);F<E;F++)for(var aa=0;aa<ba.length;aa++)ba[aa]&&ba[aa][F]&&(M[aa][F]=ba[aa][F]*V);closeIndex_org=-1;if(1==ba[0].length)for(F=0;F<N.dataField.length;F++)if("close"==N.dataField[F].toLowerCase()){M[F][0]=ba[F][0];closeIndex_org=F;break}}else if("backward"==N.type.toLowerCase()){X=!0;for(B=0;B<=C.length;B++)for(0==
B?(F=0,E=C[B].index,V=1,1==ba[0].length&&(E=1,B++)):(B==C.length?(F=C[B-1].index,E=ba[0].length):(F=C[B-1].index,E=C[B].index),V=C[B-1].factor);F<E;F++)for(aa=0;aa<ba.length;aa++)ba[aa]&&ba[aa][F]&&(M[aa][F]=ba[aa][F]*V);closeIndex_org=-1;if(1==ba[0].length)for(F=0;F<N.dataField.length;F++)if("close"==N.dataField[F].toLowerCase()){M[F][0]=ba[F][0]*C[0].factor;closeIndex_org=F;break}}else for(aa=0;aa<ba.length;aa++)M[aa]=xDeepCopy(ba[aa]);U[H]=[];for(F=0;F<N.dataField.length;F++)aa=g(N.dataField[F],
z),U[H][aa]=M[F]}if(1==X&&z.adjust&&z.adjust[0]&&z.adjust[0][1]&&z.adjust[0][1][0]&&C&&0<C.length){X=g("high",z);aa=g("low",z);var ia=g("close",z);E=z.adjust;M=B=0;if("forward"==N.type.toLowerCase()){for(F=0;F<E.length;F++){var fa=N=null;V=null;for(var T=0;T<E[F][1].length;T++){V=1;if(B<C.length)for(;B<C.length;B++)if(E[F][1][T][0]<=C[B].date){V=C[B].factor;break}F==E.length-1&&T==E[F][1].length-1&&(V=1);var Y=E[F][1][T][2]*V,O=E[F][1][T][3]*V;V*=E[F][1][T][4];if(null==N||N<Y)N=Y;if(null==fa||fa>
O)fa=O;T<E[F][1].length-1&&E[F][1][T][0]==E[F][1][T+1][0]&&T++}if(E[F][0]>=z.data[0][M])for(;M<U[H][X].length;M++)if(E[F][0]==z.data[0][M]){U[H][X][M]=N;U[H][aa][M]=fa;U[H][ia][M]=V;break}else if(E[F][0]<z.data[0][M]){M--;break}}1==ba[0].length&&0<=closeIndex_org&&(U[H][ia][M]=ba[closeIndex_org][0])}else if("backward"==N.type.toLowerCase()){for(F=0;F<E.length;F++){V=fa=N=null;for(T=0;T<E[F][1].length;T++){V=1;if(0<B||1==T)V=C[C.length-1].factor;if(B<C.length)for(;B<C.length;B++)if(E[F][1][T][0]<=
C[B].date){0<B&&(V=C[B-1].factor);break}Y=E[F][1][T][2]*V;O=E[F][1][T][3]*V;V*=E[F][1][T][4];if(null==N||N<Y)N=Y;if(null==fa||fa>O)fa=O;T<E[F][1].length-1&&E[F][1][T][0]==E[F][1][T+1][0]&&T++}if(E[F][0]>=z.data[0][M])for(;M<U[H][X].length;M++)if(E[F][0]==z.data[0][M]){U[H][X][M]=N;U[H][aa][M]=fa;U[H][ia][M]=V;break}else if(E[F][0]<z.data[0][M]){M--;break}}1==ba[0].length&&0<=closeIndex_org&&(U[H][ia][M]=ba[closeIndex_org][0]*C[C.length-1].factor)}}}if(0<u&&(z=k(A,f)))for(r[u]=[],U=0;U<A.field.length;U++)r[u][U]=
z[U],"x"==A.field[U][1][0]&&(H=parseInt(A.field[U][1][1]),A.flags[A.field[U][0].toLowerCase()]&&(C=A.flags[A.field[U][0].toLowerCase()][0],C=C>>5&7?(C>>5&7)-1:-1,0<=C&&(H=C)),r[u][U]&&(r[u][U].dec=H));b[u].engineData=r[u];if(b[u]&&b[u].table)for(J in b[u].table)if("table"!=J&&"update"!=J&&"field"!=J&&"data"!=J&&"exchTime"!=J&&"adjust"!=J&&"flags"!=J&&"info"!=J&&"dataStatus"!=J&&"last"!=J&&b[u].table[J]&&b[u].table[J].table&&b[u].table[J].table.data&&b[u].table[J].table.field&&(A=b[u].table[J].table,
z=k(A,f)))for(A.info.rank="col",U=0;U<A.field.length;U++)A.data[U]=z[U]}}};this.setQueryInfo=function(f){c=f};var g=function(f,p){for(var v=0;v<p.field.length;v++)if(f.toLowerCase()==p.field[v][0].toLowerCase())return v;return null},k=function(f,p){if(f&&f.field&&0<f.field.length&&f.data&&f.data[0]&&p&&p.data&&p.field&&0<p.field.length){var v=[];var A=f.data[0].length;if(p.info.synchField&&f.info.synchField){var r;for(r=0;r<p.field.length;r++)if(p.field[r][0].toLowerCase()==p.info.synchField.toLowerCase()){var u=
r;break}for(r=0;r<f.field.length;r++)if(f.field[r][0].toLowerCase()==f.info.synchField.toLowerCase()){var z=r;break}if(null!=z&&null!=u&&p.data[u]){for(A=0;A<f.field.length;A++)v[A]=[];for(var H=0;H<p.data[u].length;H++)for(r=0;r<f.data[z].length;r++)if(p.data[u][H]==f.data[z][r]){for(A=0;A<f.field.length;A++)v[A][H]=f.data[A][r];break}}}else if(1<=A){for(A=0;A<f.field.length;A++)v[A]=[];u=q(p);A=q(f);if(u&&A)if(p=p.data[u.col],u=f.data[A.col],r=z=0,p&&u)if(1<p.length&&p[0]>p[1])for(;z<p.length&&
r<u.length;)if(p[z]>u[r])z++;else if(p[z]<=u[r]){for(A=0;A<f.field.length;A++)v[A][z]=f.data[A][r];r++}else if(null==u[r])r++;else break;else{if(p[0]>u[0])for(;r<u.length&&!(p[0]<=u[r]);r++);else if(p[0]<u[0])for(;z<p.length&&!(p[z]>=u[0]);z++);for(;z<p.length&&r<u.length;)if(p[z]<u[r])z++;else if(u[r]&&p[z]>=u[r]){for(A=0;A<f.field.length;A++)v[A][z]=f.data[A][r];r++}else if(null==u[r])r++;else break}else if(v=[],1==f.data[0].length)for(A=0;A<f.field.length;A++)v[A]=f.data[A];else for(A=0;A<f.field.length;A++)v[A]=
[];else if(v=[],1==f.data[0].length)for(A=0;A<f.field.length;A++)v[A]=f.data[A];else for(A=0;A<f.field.length;A++)v[A]=[]}else if(f.data)if(v=[],1==f.data[0].length)for(A=0;A<f.field.length;A++)v[A]=f.data[A];else for(A=0;A<f.field.length;A++)v[A]=[];return v}},q=function(f,p){for(var v=0;v<f.field.length;v++)if("th"==f.field[0][1]||"ts"==f.field[0][1]||"tm"==f.field[0][1]||"tms"==f.field[0][1]){if(null==p||"date"!=p)return{type:"time",col:v}}else if("dd"==f.field[0][1]||"dy"==f.field[0][1]||"dq"==
f.field[0][1]||"dm"==f.field[0][1])if(null==p||"date"==p)return{type:"date",col:v}}};var charDrawFunctionList={input:{parameter:[0]},setFormulaName:{parameter:[0]},setXAxis:{javascript:!0,parameter:[0]},setYSaleType:{parameter:[0]},setyAxisMiddleValue:{parameter:[0]},setOption:{javascript:!0,parameter:[0]},drawKLine:{parameter:[1],class:formula_drawKLine.name,remark:formula_drawKLine.remark()},drawLine:{parameter:[1,{color:"color1"},{dec:-1},{lineWidth:1},{lineType:"solid"},{shift:0},{beginValue:null},{format:null},{boundParam:null},{checked:"true"},{segmentIndex:"segmentIndex_"}],
class:formula_drawLine.name,remark:formula_drawLine.remark()},stickLine:{parameter:[1,{color:"color1"}],class:formula_stickLine.name,remark:formula_stickLine.remark()},drawBand:{parameter:[1],class:formula_drawBand.name,remark:formula_drawBand.remark()},drawIcon:{parameter:[1,{color:"color1"}],class:formula_drawIcon.name,remark:formula_drawIcon.remark()},drawText:{parameter:[1,{align:"'left'"},{vAlign:"'top'"},{offset:0},{color:"colorRed"},{dec:2},{fontName:"'Helvetica Neue'"},{fontSize:12},{fontBold:!1},
{fontItalic:!1},{bkColor:void 0},{format:null},{tipPos:"'bottom-right'"}],class:formula_drawText.name,remark:formula_drawText.remark()},drawText_Fix:{parameter:[1,{color:"color1"}],class:formula_drawTextFix.name,remark:formula_drawTextFix.remark()},drawNumber:{parameter:[1,{color:"color1"}],class:formula_drawNumber.name,remark:formula_drawNumber.remark()},drawNumber_Fix:{parameter:[1,{color:"color1"}],class:formula_drawNumberFix.name,remark:formula_drawNumberFix.remark()},drawLastValue:{parameter:[1,
{color:"color1"}],class:formula_drawLastValue.name,remark:formula_drawLastValue.remark()},drawGradient:{parameter:[1],class:formula_drawGradient.name,remark:formula_drawGradient.remark()},drawBar:{parameter:[1],class:formula_drawBar.name,remark:formula_drawBar.remark()},drawMarkLine:{parameter:[1],class:formula_drawMarkLine.name,remark:formula_drawMarkLine.remark()},drawRect:{parameter:[1],class:formula_drawRect.name,remark:formula_drawRect.remark()},drawRectRel:{parameter:[1],class:formula_drawRectRel.name,
remark:formula_drawRectRel.remark()},drawPloyLine:{parameter:[1],class:formula_drawPloyLine.name,remark:formula_drawPloyLine.remark()},drawBackground:{parameter:[1],class:formula_drawBackground.name,remark:formula_drawBackground.remark()},drawSL:{parameter:[1],class:formula_drawSL.name,remark:formula_drawSL.remark()},formatValue:{parameter:[1]},query:{parameter:[1]},RGB:{parameter:[1],remark:"\u5c06\u81ea\u5b9a\u989c\u8272\u4f5c\u4e3a\u6570\u503c\u8f93\u51fa.\n        \u7528\u6cd5:\n         RGB(Red,Green,Blue),\u8f93\u51fa\u4e3a0XBBGGRR,\u53c2\u6570\u4f7f\u7528\u5341\u8fdb\u5236\u6570,\u8303\u56f4\u4e3a0\u81f3255,\u4ee5\u6700\u8fd1\u4e00\u4e2a\u5468\u671f\u6570\u503c\u4e3a\u51c6.\n        \u4f8b\u5982:\n         RGB(0,0,255)\u8f93\u51fa\u7ed3\u679c\u4e3a16\u8fdb\u5236\u76840XFF0000."},
MA:{parameter:[1],remark:"\u8fd4\u56de\u7b80\u5355\u79fb\u52a8\u5e73\u5747\n        \u7528\u6cd5:\n         MA(X,N):X\u7684N\u65e5\u7b80\u5355\u79fb\u52a8\u5e73\u5747,\u7b97\u6cd5(X1+X2+X3+...+Xn)/N,N\u652f\u6301\u53d8\u91cf"},SMA:{parameter:[1],remark:"\u8fd4\u56de\u79fb\u52a8\u5e73\u5747\n        \u7528\u6cd5:\n         SMA(X,N,M):X\u7684N\u65e5\u79fb\u52a8\u5e73\u5747,M\u4e3a\u6743\u91cd,\u5982Y=(X*M+Y'*(N-M))/N"},EMA:{parameter:[1],remark:"\u8fd4\u56de\u6307\u6570\u79fb\u52a8\u5e73\u5747\n        \u7528\u6cd5:\n         EMA(X,N):X\u7684N\u65e5\u6307\u6570\u79fb\u52a8\u5e73\u5747.\u7b97\u6cd5:Y=(X*2+Y'*(N-1))/(N+1)\n         EMA(X,N)\u76f8\u5f53\u4e8eSMA(X,N+1,2),N\u652f\u6301\u53d8\u91cf"},
DMA:{parameter:[1],remark:"\u6c42\u52a8\u6001\u79fb\u52a8\u5e73\u5747.\n        \u7528\u6cd5:\n         DMA(X,A),\u6c42X\u7684\u52a8\u6001\u79fb\u52a8\u5e73\u5747.\n        \u7b97\u6cd5:Y=A*X+(1-A)*Y',\u5176\u4e2dY'\u8868\u793a\u4e0a\u4e00\u5468\u671fY\u503c,A\u5fc5\u987b\u5927\u4e8e0\u4e14\u5c0f\u4e8e1.A\u652f\u6301\u53d8\u91cf.\n        \u4f8b\u5982:\n         DMA(CLOSE,VOL/CAPITAL)\u8868\u793a\u6c42\u4ee5\u6362\u624b\u7387\u4f5c\u5e73\u6ed1\u56e0\u5b50\u7684\u5e73\u5747\u4ef7"},TMA:{parameter:[1],
remark:"\u8fd4\u56de\u79fb\u52a8\u5e73\u5747\n        \u7528\u6cd5:\n         TMA(X,A,B),A\u548cB\u5fc5\u987b\u5c0f\u4e8e1,\u7b97\u6cd5\tY=(A*Y'+B*X),\u5176\u4e2dY'\u8868\u793a\u4e0a\u4e00\u5468\u671fY\u503c.\u521d\u503c\u4e3aX"},WMA:{parameter:[1],remark:"\u8fd4\u56de\u52a0\u6743\u79fb\u52a8\u5e73\u5747\n        \u7528\u6cd5:\n         WMA(X,N):X\u7684N\u65e5\u52a0\u6743\u79fb\u52a8\u5e73\u5747.\u7b97\u6cd5:Yn=(1*X1+2*X2+...+n*Xn)/(1+2+...+n)"},HHV:{parameter:[1],remark:"\u6c42\u6700\u9ad8\u503c.\n        \u7528\u6cd5:\n         HHV(X,N),\u6c42N\u5468\u671f\u5185X\u6700\u9ad8\u503c,N=0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         HHV(HIGH,30)\u8868\u793a\u6c4230\u65e5\u6700\u9ad8\u4ef7"},
HHVBARS:{parameter:[1],remark:"\u6c42\u4e0a\u4e00\u9ad8\u70b9\u5230\u5f53\u524d\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         HHVBARS(X,N):\u6c42N\u5468\u671f\u5185X\u6700\u9ad8\u503c\u5230\u5f53\u524d\u5468\u671f\u6570,N=0\u8868\u793a\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb\u7edf\u8ba1\n        \u4f8b\u5982:\n         HHVBARS(HIGH,0)\u6c42\u5f97\u5386\u53f2\u65b0\u9ad8\u5230\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},HOD:{parameter:[1],remark:"\u6c42\u9ad8\u503c\u540d\u6b21.\n        \u7528\u6cd5:\n         HOD(X,N):\u6c42\u5f53\u524dX\u6570\u636e\u662fN\u5468\u671f\u5185\u7684\u7b2c\u51e0\u4e2a\u9ad8\u503c,N=0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         HOD(HIGH,20)\u8fd4\u56de\u662f20\u65e5\u7684\u7b2c\u51e0\u4e2a\u9ad8\u4ef7"},
LLV:{parameter:[1],remark:"\u6c42\u6700\u4f4e\u503c.\n        \u7528\u6cd5:\n         LLV(X,N),\u6c42N\u5468\u671f\u5185X\u6700\u4f4e\u503c,N=0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         LLV(LOW,0)\u8868\u793a\u6c42\u5386\u53f2\u6700\u4f4e\u4ef7"},LLVBARS:{parameter:[1],remark:"\u6c42\u4e0a\u4e00\u4f4e\u70b9\u5230\u5f53\u524d\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         LLVBARS(X,N):\u6c42N\u5468\u671f\u5185X\u6700\u4f4e\u503c\u5230\u5f53\u524d\u5468\u671f\u6570,N=0\u8868\u793a\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb\u7edf\u8ba1\n        \u4f8b\u5982:\n         LLVBARS(HIGH,20)\u6c42\u5f9720\u65e5\u6700\u4f4e\u70b9\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},
LOD:{parameter:[1],remark:"\u6c42\u4f4e\u503c\u540d\u6b21.\n        \u7528\u6cd5:\n         LOD(X,N):\u6c42\u5f53\u524dX\u6570\u636e\u662fN\u5468\u671f\u5185\u7684\u7b2c\u51e0\u4e2a\u4f4e\u503c,N=0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         LOD(LOW,20)\u8fd4\u56de\u662f20\u65e5\u7684\u7b2c\u51e0\u4e2a\u4f4e\u4ef7"},REF:{parameter:[1],remark:"\u5f15\u7528\u82e5\u5e72\u5468\u671f\u524d\u7684\u6570\u636e(\u5e73\u6ed1\u5904\u7406).\n        \u7528\u6cd5:\n         REF(X,A),\u5f15\u7528A\u5468\u671f\u524d\u7684X\u503c.A\u53ef\u4ee5\u662f\u53d8\u91cf.\n        \u5e73\u6ed1\u5904\u7406:\u5f53\u5f15\u7528\u4e0d\u5230\u6570\u636e\u65f6\u8fdb\u884c\u7684\u64cd\u4f5c.\u6b64\u51fd\u6570\u4e2d,\u5e73\u6ed1\u65f6\u4f7f\u7528\u4e0a\u4e00\u4e2a\u5468\u671f\u7684\u5f15\u7528\u503c.\n        \u4f8b\u5982:\n         REF(CLOSE,BARSCOUNT(C)-1)\u8868\u793a\u7b2c\u4e8c\u6839K\u7ebf\u7684\u6536\u76d8\u4ef7."},
REFX:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u5f15\u7528\u82e5\u5e72\u5468\u671f\u540e\u7684\u6570\u636e(\u5e73\u6ed1\u5904\u7406).\n        \u7528\u6cd5:\n         REFX(X,A),\u5f15\u7528A\u5468\u671f\u540e\u7684X\u503c.A\u53ef\u4ee5\u662f\u53d8\u91cf.\n        \u5e73\u6ed1\u5904\u7406:\u5f53\u5f15\u7528\u4e0d\u5230\u6570\u636e\u65f6\u8fdb\u884c\u7684\u64cd\u4f5c.\u6b64\u51fd\u6570\u4e2d,\u5e73\u6ed1\u65f6\u4f7f\u7528\u4e0a\u4e00\u4e2a\u5468\u671f\u7684\u5f15\u7528\u503c.\n        \u4f8b\u5982:\n         TT:=IF(C>O,1,2);\n         REFX(CLOSE,TT);\u8868\u793a\u9633\u7ebf\u5f15\u7528\u4e0b\u4e00\u5468\u671f\u7684\u6536\u76d8\u4ef7,\u9634\u7ebf\u5f15\u7528\u65e5\u540e\u7b2c\u4e8c\u5468\u671f\u7684\u6536\u76d8\u4ef7."},
REF2:{parameter:[1],remark:"\u5f15\u7528\u82e5\u5e72\u5468\u671f\u524d\u7684\u6570\u636e(\u5e73\u6ed1\u5904\u7406).\n        \u7528\u6cd5:\n         REF(X,A,B),\u5f15\u7528A\u5468\u671f\u524d\u7684X\u503c, \u5982\u679cA\u503c\u4e3a\u7a7a\uff0c\u5c31\u53d6B\u7684\u503c. A\u3001B\u53ef\u4ee5\u662f\u53d8\u91cf.\n        \u5e73\u6ed1\u5904\u7406:\u5f53\u5f15\u7528\u4e0d\u5230\u6570\u636e\u65f6\u8fdb\u884c\u7684\u64cd\u4f5c.\u6b64\u51fd\u6570\u4e2d,\u5e73\u6ed1\u65f6\u4f7f\u7528\u4e0a\u4e00\u4e2a\u5468\u671f\u7684\u5f15\u7528\u503c.\n        \u4f8b\u5982:\n         REF2(CLOSE,BARSCOUNT(C)-1,OPEN)\u8868\u793a\u7b2c\u4e8c\u6839K\u7ebf\u7684\u6536\u76d8\u4ef7,\u5982\u679c\u503c\u4e3a\u7a7a\uff0c\u5c31\u8bfb\u53d6OPEN\u7684\u503c."},
REFDATE:{parameter:[1],remark:"\u5f15\u7528\u81ea1900\u5e74\u4ee5\u6765\u6307\u5b9a\u65e5\u671f\u7684\u6570\u636e.\n        \u7528\u6cd5:\n         REFDATE(X,A),\u5f15\u7528A\u65e5\u671f\u7684X\u503c.\n        \u4f8b\u5982:\n         REFDATE(CLOSE,1011208)\u8868\u793a2001\u5e7412\u670808\u65e5\u7684\u6536\u76d8\u4ef7"},REFDATA:{parameter:[1],remark:"\u5f15\u7528\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u636e.\n        \u7528\u6cd5:\n         REFDATA(X, cond), \u5f15\u7528\u6761\u4ef6cond\u6ee1\u8db3\u65f6\u7684X\u503c.\n        \u4f8b\u5982:\n         REFDATA(CLOSE, close>open). \u8868\u793a close \u5927\u4e8e open \u7684\u6536\u76d8\u4ef7"},
REFBARPOS:{parameter:[1],remark:"\u6761\u4ef6 cond \u6ee1\u8db3\u65f6 \u6570\u636e\u6240\u5728\u7684 index\n        \u7528\u6cd5: REFBARPOS(cond);"},BACKSET:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u5c06\u5f53\u524d\u4f4d\u7f6e\u5230\u82e5\u5e72\u5468\u671f\u524d\u7684\u6570\u636e\u8bbe\u4e3a1.\n        \u7528\u6cd5:\n        BACKSET(X,N),\u82e5X\u975e0,\u5219\u5c06\u5f53\u524d\u4f4d\u7f6e\u5230N\u5468\u671f\u524d\u7684\u6570\u503c\u8bbe\u4e3a1.\n        \u4f8b\u5982:\n        BACKSET(CLOSE>OPEN,2)\u82e5\u6536\u9633\u5219\u5c06\u8be5\u5468\u671f\u53ca\u524d\u4e00\u5468\u671f\u6570\u503c\u8bbe\u4e3a1,\u5426\u5219\u4e3a0"},
ALIGNRIGHT:{parameter:[1],remark:"\u6709\u6548\u6570\u636e\u53f3\u5bf9\u9f50.\n        \u7528\u6cd5:\n        ALIGNRIGHT(X)\u6709\u6548\u6570\u636e\u5411\u53f3\u79fb\u52a8,\u5de6\u8fb9\u7a7a\u51fa\u6765\u7684\u5468\u671f\u586b\u5145\u65e0\u6548\u503c\n        \u4f8b\u5982:TC:=IF(CURRBARSCOUNT=2 || CURRBARSCOUNT=5,DRAWNULL,C);XC:ALIGNRIGHT(TC);\u5220\u9664\u4e86\u4e24\u5929\u7684\u6536\u76d8\u4ef7,\u5e76\u5c06\u5269\u4f59\u6570\u636e\u53f3\u79fb"},BARSCOUNT:{parameter:[1],remark:"\u6c42\u603b\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         BARSCOUNT(X)\u7b2c\u4e00\u4e2a\u6709\u6548\u6570\u636e\u5230\u5f53\u524d\u7684\u5929\u6570\n        \u4f8b\u5982:BARSCOUNT(CLOSE)\u5bf9\u4e8e\u65e5\u7ebf\u6570\u636e\u53d6\u5f97\u4e0a\u5e02\u4ee5\u6765\u603b\u4ea4\u6613\u65e5\u6570"},
BARSTATUS:{parameter:[1],remark:"BARSTATUS\u8fd4\u56de\u6570\u636e\u4f4d\u7f6e\u4fe1\u606f,1\u8868\u793a\u7b2c\u4e00\u6839K\u7ebf,2\u8868\u793a\u6700\u540e\u4e00\u4e2a\u6570\u636e,0\u8868\u793a\u4e2d\u95f4\u4f4d\u7f6e.\n        \u4f8b\u5982:\n         BARSTATUS=2\u8868\u793a\u5f53\u5929\u662f\u8be5\u6570\u636e\u7684\u6700\u540e\u4e00\u4e2a\u5468\u671f."},CURRBARSCOUNT:{parameter:[1],remark:"\u6c42\u5230\u6700\u540e\u4ea4\u6613\u65e5\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         CURRBARSCOUNT \u6c42\u5230\u6700\u540e\u4ea4\u6613\u65e5\u7684\u5468\u671f\u6570"},
TOTALBARSCOUNT:{parameter:[1],remark:"\u6c42\u603b\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         TOTALBARSCOUNT \u6c42\u603b\u7684\u5468\u671f\u6570\n        "},ISLASTBAR:{parameter:[1],remark:"\u5224\u65ad\u662f\u5426\u4e3a\u6700\u540e\u4e00\u4e2a\u5468\u671f.\n        \u7528\u6cd5:\n         ISLASTBAR \u5224\u65ad\u662f\u5426\u4e3a\u6700\u540e\u4e00\u4e2a\u5468\u671f\n        "},BARSLAST:{parameter:[1],remark:"\u4e0a\u4e00\u6b21\u6761\u4ef6\u6210\u7acb\u5230\u5f53\u524d\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         BARSLAST(X):\u4e0a\u4e00\u6b21X\u4e0d\u4e3a0\u5230\u73b0\u5728\u7684\u5929\u6570\n        \u4f8b\u5982:\n         BARSLAST(CLOSE/REF(CLOSE,1)>=1.1)\u8868\u793a\u4e0a\u4e00\u4e2a\u6da8\u505c\u677f\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},
BARSNEXT:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u4e0b\u4e00\u6b21\u6761\u4ef6\u6210\u7acb\u5230\u5f53\u524d\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         BARSNEXT(X):\u4e0b\u4e00\u6b21X\u4e0d\u4e3a0\u5230\u73b0\u5728\u7684\u5929\u6570\n        \u4f8b\u5982:\n         BARSNEXT(CLOSE/REF(CLOSE,1)>=1.1)\u8868\u793a\u4e0b\u4e00\u4e2a\u6da8\u505c\u677f\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},BARSSINCEN:{parameter:[1],remark:"N\u5468\u671f\u5185\u7b2c\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u5230\u5f53\u524d\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         BARSSINCEN(X,N):N\u5468\u671f\u5185\u7b2c\u4e00\u6b21X\u4e0d\u4e3a0\u5230\u73b0\u5728\u7684\u5929\u6570,N\u4e3a\u5e38\u91cf\n        \u4f8b\u5982:\n         BARSSINCEN(HIGH>10,10)\u8868\u793a10\u4e2a\u5468\u671f\u5185\u80a1\u4ef7\u8d85\u8fc710\u5143\u65f6\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},
BARSSINCE:{parameter:[1],remark:"\u7b2c\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u5230\u5f53\u524d\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         BARSSINCE(X):\u7b2c\u4e00\u6b21X\u4e0d\u4e3a0\u5230\u73b0\u5728\u7684\u5929\u6570\n        \u4f8b\u5982:\n         BARSSINCE(HIGH>10)\u8868\u793a\u80a1\u4ef7\u8d85\u8fc710\u5143\u65f6\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},COUNT:{parameter:[1],remark:"\u7edf\u8ba1\u6ee1\u8db3\u6761\u4ef6\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         COUNT(X,N),\u7edf\u8ba1N\u5468\u671f\u4e2d\u6ee1\u8db3X\u6761\u4ef6\u7684\u5468\u671f\u6570,\u82e5N<0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         COUNT(CLOSE>OPEN,20)\u8868\u793a\u7edf\u8ba120\u5468\u671f\u5185\u6536\u9633\u7684\u5468\u671f\u6570"},
BARSLASTCOUNT:{parameter:[1],remark:"\u7edf\u8ba1\u8fde\u7eed\u6ee1\u8db3\u6761\u4ef6\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         BARSLASTCOUNT(X),\u7edf\u8ba1\u8fde\u7eed\u6ee1\u8db3X\u6761\u4ef6\u7684\u5468\u671f\u6570.\n        \u4f8b\u5982:\n         BARSLASTCOUNT(CLOSE>OPEN)\u8868\u793a\u7edf\u8ba1\u8fde\u7eed\u6536\u9633\u7684\u5468\u671f\u6570"},REVERSE:{parameter:[1],remark:"\u6c42\u76f8\u53cd\u6570.\n        \u7528\u6cd5:\n         REVERSE(X)\u8fd4\u56de-X.\n        \u4f8b\u5982:\n         REVERSE(CLOSE)\u8fd4\u56de-CLOSE"},
SUM:{parameter:[1],remark:"\u6c42\u603b\u548c.\n        \u7528\u6cd5:\n         SUM(X,N),\u7edf\u8ba1N\u5468\u671f\u4e2dX\u7684\u603b\u548c,N=0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         SUM(VOL,0)\u8868\u793a\u7edf\u8ba1\u4ece\u4e0a\u5e02\u7b2c\u4e00\u5929\u4ee5\u6765\u7684\u6210\u4ea4\u91cf\u603b\u548c"},MULAR:{parameter:[1],remark:"\u6c42\u7d2f\u4e58.\n        \u7528\u6cd5:\n         MULAR(X,N),\u7edf\u8ba1N\u5468\u671f\u4e2dX\u7684\u4e58\u79ef.N=0\u5219\u4ece\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u5f00\u59cb.\n        \u4f8b\u5982:\n         MULAR(C/REF(C,1),0)\u8868\u793a\u7edf\u8ba1\u4ece\u4e0a\u5e02\u7b2c\u4e00\u5929\u4ee5\u6765\u7684\u590d\u5229"},
FILTER:{parameter:[1],remark:"\u8fc7\u6ee4\u8fde\u7eed\u51fa\u73b0\u7684\u4fe1\u53f7.\n        \u7528\u6cd5:FILTER(X,N):X\u6ee1\u8db3\u6761\u4ef6\u540e,\u5c06\u5176\u540eN\u5468\u671f\u5185\u7684\u6570\u636e\u7f6e\u4e3a0,N\u4e3a\u5e38\u91cf.\n        \u4f8b\u5982:\n         FILTER(CLOSE>OPEN,5)\u67e5\u627e\u9633\u7ebf,5\u5929\u5185\u518d\u6b21\u51fa\u73b0\u7684\u9633\u7ebf\u4e0d\u88ab\u8bb0\u5f55\u5728\u5185"},FILTERX:{parameter:[1],remark:"\u53cd\u5411\u8fc7\u6ee4\u8fde\u7eed\u51fa\u73b0\u7684\u4fe1\u53f7.\n        \u7528\u6cd5:FILTERX(X,N):X\u6ee1\u8db3\u6761\u4ef6\u540e,\u5c06\u5176\u524dN\u5468\u671f\u5185\u7684\u6570\u636e\u7f6e\u4e3a0,N\u4e3a\u5e38\u91cf.\n        \u4f8b\u5982:\n         FILTERX(CLOSE>OPEN,5)\u67e5\u627e\u9633\u7ebf,\u524d5\u5929\u5185\u51fa\u73b0\u8fc7\u7684\u9633\u7ebf\u4e0d\u88ab\u8bb0\u5f55\u5728\u5185"},
TFILT:{parameter:[1],remark:"\u5bf9\u6307\u5b9a\u65f6\u95f4\u6bb5\u7684\u6570\u636e\u8fdb\u884c\u8fc7\u6ee4,\u8be5\u65f6\u95f4\u6bb5\u4ee5\u5916\u7684\u6570\u636e\u65e0\u6548.\n        \u7528\u6cd5:\n         TFILT(X,D1,M1,D2,M2)\n        \u4f8b\u5982:\n         TFILT(CLOSE,1040101,1025,1040101,1345)\u8868\u793a\u57282004\u5e741\u67081\u65e5\u768410:25\u52302004\u5e741\u67081\u65e5\u768413:45\u7684\u6536\u76d8\u4ef7\u662f\u6709\u6548\u7684.\n        \u5468\u671f\u4ee5\u65e5\u4e3a\u57fa\u672c\u5355\u4f4d\u7684,\u5206\u65f6\u4e3a0\u6709\u6548."},
TFILTER:{parameter:[1],remark:"\u8fc7\u6ee4\u8fde\u7eed\u51fa\u73b0\u7684\u4fe1\u53f7.\n        \u7528\u6cd5:TFILTER(\u4e70\u5165\u6761\u4ef6,\u5356\u51fa\u6761\u4ef6,N);\u8fc7\u6ee4\u6389\u4e70\u5165(\u5356\u51fa)\u4fe1\u53f7\u53d1\u51fa\u540e,\u4e0b\u4e00\u4e2a\u53cd\u5411\u4fe1\u53f7\u53d1\u51fa\u524d\u7684\u6240\u6709\u4e70\u5165(\u5356\u51fa)\u4fe1\u53f7.\n        \n        N=1\u8868\u793a\u4ec5\u5bf9\u4e70\u5165\u4fe1\u53f7\u8fc7\u6ee4;\n        N=2\u8868\u793a\u4ec5\u5bf9\u5356\u51fa\u4fe1\u53f7\u8fc7\u6ee4;\n        N=0\u8868\u793a\u5bf9\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u90fd\u8fc7\u6ee4,\u8fd4\u56de1,2\u8868\u793a\u4e70\u5165\u6216\u5356\u51fa\u6761\u4ef6\u6210\u7acb;\n        \u540c\u4e00K\u7ebf\u4e0a\u53ea\u80fd\u6709\u4e00\u4e2a\u4fe1\u53f7;\n        \n        \u4f8b\u5982:\n        ENTERLONG:TFILTER(\u4e70\u5165,\u5356\u51fa,1);\n        EXITLONG:TFILTER(\u4e70\u5165,\u5356\u51fa,2);"},
TTFILTER:{parameter:[1],remark:"\u6309\u7167\u5f00\u5e73\u914d\u5bf9\u7b49\u539f\u5219\u8fc7\u6ee4\u4e0d\u5408\u7406\u7684\u4fe1\u53f7.\n        \u7528\u6cd5:TTFILTER(\u4e70\u5165\u5f00\u4ed3,\u5356\u51fa\u5e73\u4ed3,\u5356\u51fa\u5f00\u4ed3,\u4e70\u5165\u5e73\u4ed3,N);\n        \n        \u4e3b\u8981\u89c4\u5219\u6709:\n        1.\u8fde\u7eed\u7684\u540c\u65b9\u5411\u6307\u4ee4\u53ea\u6709\u7b2c\u4e00\u4e2a\u6709\u6548,\u5176\u4ed6\u7684\u5c06\u88ab\u8fc7\u6ee4;\n        2.\u4ea4\u6613\u4fe1\u53f7\u5fc5\u987b\u914d\u5bf9\u51fa\u73b0(\u6bd4\u5982\u524d\u9762\u5df2\u7ecf\u6709\u4e86\u4e70\u5f00\u6307\u4ee4,\u5219\u540e\u9762\u53ea\u5141\u8bb8\u51fa\u73b0\u5356\u5e73\u6307\u4ee4,\u5176\u4ed6\u7684\u6307\u4ee4\u90fd\u88ab\u8fc7\u6ee4\u6389);\n        \n        N=1\u8868\u793a\u4ec5\u5bf9\u4e70\u5165\u5f00\u4ed3\u4fe1\u53f7\u8fc7\u6ee4;\n        N=2\u8868\u793a\u4ec5\u5bf9\u5356\u51fa\u5e73\u4ed3\u4fe1\u53f7\u8fc7\u6ee4;\n        N=3\u8868\u793a\u4ec5\u5bf9\u5356\u51fa\u5f00\u4ed3\u4fe1\u53f7\u8fc7\u6ee4;\n        N=4\u8868\u793a\u4ec5\u5bf9\u4e70\u5165\u5e73\u4ed3\u4fe1\u53f7\u8fc7\u6ee4;\n        N=0\u8868\u793a\u90fd\u8fc7\u6ee4,\u8fd4\u56de1,2,3,4\u5206\u522b\u8868\u793a\u5bf9\u5e94\u7684\u6761\u4ef6\u6210\u7acb;\n        \u540c\u4e00K\u7ebf\u4e0a\u53ea\u80fd\u6709\u4e00\u4e2a\u4fe1\u53f7;\n        \n        \u4f8b\u5982:\n        ENTERLONG:TTFILTER(\u4e70\u5165\u5f00\u4ed3,\u5356\u51fa\u5e73\u4ed3,\u5356\u51fa\u5f00\u4ed3,\u4e70\u5165\u5e73\u4ed3,1);\n        EXITLONG:TTFILTER(\u4e70\u5165\u5f00\u4ed3,\u5356\u51fa\u5e73\u4ed3,\u5356\u51fa\u5f00\u4ed3,\u4e70\u5165\u5e73\u4ed3,2);\n        ENTERSHORT:TTFILTER(\u4e70\u5165\u5f00\u4ed3,\u5356\u51fa\u5e73\u4ed3,\u5356\u51fa\u5f00\u4ed3,\u4e70\u5165\u5e73\u4ed3,3);\n        EXITSHORT:TTFILTER(\u4e70\u5165\u5f00\u4ed3,\u5356\u51fa\u5e73\u4ed3,\u5356\u51fa\u5f00\u4ed3,\u4e70\u5165\u5e73\u4ed3,4);"},
TR:{parameter:[1],remark:"\u6c42\u771f\u5b9e\u6ce2\u5e45.\n        \u7528\u6cd5:\n         TR,\u6c42\u771f\u5b9e\u6ce2\u5e45.\n         \u4f8b\u5982:ATR:=MA(TR,10);\n         \u8868\u793a\u6c42\u771f\u5b9e\u6ce2\u5e45\u768410\u5468\u671f\u5747\u503c\n        "},SUMBARS:{parameter:[1],remark:"\u5411\u524d\u7d2f\u52a0\u5230\u6307\u5b9a\u503c\u5230\u73b0\u5728\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         SUMBARS(X,A):\u5c06X\u5411\u524d\u7d2f\u52a0\u76f4\u5230\u5927\u4e8e\u7b49\u4e8eA,\u8fd4\u56de\u8fd9\u4e2a\u533a\u95f4\u7684\u5468\u671f\u6570\n         \u4f8b\u5982:SUMBARS(VOL,CAPITAL)\u6c42\u5b8c\u5168\u6362\u624b\u5230\u73b0\u5728\u7684\u5468\u671f\u6570"},
RANGE:{parameter:[1],remark:"RANGE(A,B,C):A\u5728B\u548cC\u8303\u56f4\u4e4b\u95f4,B<A<C.\n        \u7528\u6cd5:\n         RANGE(A,B,C)\u8868\u793aA\u5927\u4e8eB\u540c\u65f6\u5c0f\u4e8eC\u65f6\u8fd4\u56de1,\u5426\u5219\u8fd4\u56de0"},CONST:{parameter:[1],remark:"CONST(A):\u53d6A\u6700\u540e\u7684\u503c\u4e3a\u5e38\u91cf.\n        \u7528\u6cd5:\n         CONST(INDEXC)\u8868\u793a\u53d6\u6307\u6570\u73b0\u4ef7"},TOPRANGE:{parameter:[1],remark:"\u5f53\u524d\u503c\u662f\u8fd1\u591a\u5c11\u5468\u671f\u5185\u7684\u6700\u5927\u503c.\n        \u7528\u6cd5:\n         TOPRANGE(X):X\u662f\u8fd1\u591a\u5c11\u5468\u671f\u5185X\u7684\u6700\u5927\u503c\n        \u4f8b\u5982:\n         TOPRANGE(HIGH)\u8868\u793a\u5f53\u524d\u6700\u9ad8\u4ef7\u662f\u8fd1\u591a\u5c11\u5468\u671f\u5185\u6700\u9ad8\u4ef7\u7684\u6700\u5927\u503c"},
LOWRANGE:{parameter:[1],remark:"\u5f53\u524d\u503c\u662f\u8fd1\u591a\u5c11\u5468\u671f\u5185\u7684\u6700\u5c0f\u503c.\n        \u7528\u6cd5:\n         LOWRANGE(X):X\u662f\u8fd1\u591a\u5c11\u5468\u671f\u5185X\u7684\u6700\u5c0f\u503c\n        \u4f8b\u5982:\n         LOWRANGE(LOW)\u8868\u793a\u5f53\u524d\u6700\u4f4e\u4ef7\u662f\u8fd1\u591a\u5c11\u5468\u671f\u5185\u6700\u4f4e\u4ef7\u7684\u6700\u5c0f\u503c"},FINDHIGH:{parameter:[1],remark:"N\u5468\u671f\u524d\u7684M\u5468\u671f\u5185\u7684\u7b2cT\u4e2a\u6700\u5927\u503c.\n        \u7528\u6cd5:\n         FINDHIGH(VAR,N,M,T):VAR\u5728N\u65e5\u524d\u7684M\u5929\u5185\u7b2cT\u4e2a\u6700\u9ad8\u4ef7"},
FINDHIGHBARS:{parameter:[1],remark:"N\u5468\u671f\u524d\u7684M\u5468\u671f\u5185\u7684\u7b2cT\u4e2a\u6700\u5927\u503c\u5230\u5f53\u524d\u5468\u671f\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         FINDHIGHBARS(VAR,N,M,T):VAR\u5728N\u65e5\u524d\u7684M\u5929\u5185\u7b2cT\u4e2a\u6700\u9ad8\u4ef7\u5230\u5f53\u524d\u5468\u671f\u7684\u5468\u671f\u6570"},FINDLOW:{parameter:[1],remark:"N\u5468\u671f\u524d\u7684M\u5468\u671f\u5185\u7684\u7b2cT\u4e2a\u6700\u5c0f\u503c.\n        \u7528\u6cd5:\n         FINDLOW(VAR,N,M,T):VAR\u5728N\u65e5\u524d\u7684M\u5929\u5185\u7b2cT\u4e2a\u6700\u4f4e\u4ef7"},
FINDLOWBARS:{parameter:[1],remark:"N\u5468\u671f\u524d\u7684M\u5468\u671f\u5185\u7684\u7b2cT\u4e2a\u6700\u5c0f\u503c\u5230\u5f53\u524d\u5468\u671f\u7684\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         FINDLOWBARS(VAR,N,M,T):VAR\u5728N\u65e5\u524d\u7684M\u5929\u5185\u7b2cT\u4e2a\u6700\u4f4e\u4ef7\u5230\u5f53\u524d\u5468\u671f\u7684\u5468\u671f\u6570."},PERIOD:{parameter:[1],remark:"\u53d6\u5f97\u5468\u671f\u7c7b\u578b.\n        \u7ed3\u679c\u4ece0\u523013,\u4f9d\u6b21\u5206\u522b\u662f1/5/15/30/60\u5206\u949f,\u65e5/\u5468/\u6708,\u591a\u5206\u949f,\u591a\u65e5/\u5b63/\u5e74,5\u79d2\u7ebf/\u591a\u79d2\u7ebf,13\u4ee5\u4e0a\u4e3a\u81ea\u5b9a\u4e49\u5468\u671f"},
DATE:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u4ece1900\u4ee5\u6765\u7684\u7684\u5e74\u6708\u65e5.\n        \u7528\u6cd5:\n         DATE\n         \u4f8b\u5982\u51fd\u6570\u8fd4\u56de1000101,\u8868\u793a2000\u5e741\u67081\u65e5,DATE+19000000\u540e\u624d\u662f\u771f\u6b63\u7684\u65e5\u671f\u503c"},TIME:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u65f6\u5206,\u9002\u7528\u4e8e\u65e5\u7ebf\u4ee5\u4e0b\u5468\u671f\n        \u7528\u6cd5: \n         TIME\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(0000-2359)"},
TIME2:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u65f6\u5206\u79d2,\u9002\u7528\u4e8e\u65e5\u7ebf\u4ee5\u4e0b\u5468\u671f.\n        \u7528\u6cd5: \n         TIME2\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(000000-235959)"},YEAR:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u5e74\u4efd.\n        \u7528\u6cd5:\n         YEAR\n        \u6ce8:YEAR\u5173\u952e\u5b57\u4e5f\u53ef\u7528\u4e8e\u8de8\u5468\u671f\u5e74\u7ebf\u5f15\u7528"},MONTH:{parameter:[1],
remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u6708\u4efd.\n        \u7528\u6cd5:\n         MONTH\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(1-12)\n        \n        \u6ce8:MONTH\u5173\u952e\u5b57\u4e5f\u53ef\u7528\u4e8e\u8de8\u5468\u671f\u6708\u7ebf\u5f15\u7528"},WEEKOFYEAR:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u662f\u5e74\u5185\u7b2c\u51e0\u4e2a\u5468.\n        \u7528\u6cd5:\n         WEEKOFYEAR\n         "},WEEKDAY:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u661f\u671f\u6570.\n        \u7528\u6cd5:\n         WEEKDAY\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(1,2,3,4,5,6,0)"},
DAYSTOTODAY:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u65e5\u671f\u79bb\u4eca\u5929\u7684\u5929\u6570.\n        \u7528\u6cd5:\n         DAYSTOTODAY\n        "},DAY:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u65e5\u671f.\n        \u7528\u6cd5:\n         DAY\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(1-31)\n        \n        \u6ce8:DAY\u5173\u952e\u5b57\u4e5f\u53ef\u7528\u4e8e\u8de8\u5468\u671f\u65e5\u7ebf\u5f15\u7528"},HOUR:{parameter:[1],
remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u5c0f\u65f6\u6570.\n        \u7528\u6cd5:\n         HOUR\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(0-23),\u5bf9\u4e8e\u65e5\u7ebf\u53ca\u66f4\u957f\u7684\u5206\u6790\u5468\u671f\u503c\u4e3a0"},MINUTE:{parameter:[1],remark:"\u53d6\u5f97\u8be5\u5468\u671f\u7684\u5206\u949f\u6570.\n        \u7528\u6cd5:\n         MINUTE\n         \u51fd\u6570\u8fd4\u56de\u6709\u6548\u503c\u8303\u56f4\u4e3a(0-59),\u5bf9\u4e8e\u65e5\u7ebf\u53ca\u66f4\u957f\u7684\u5206\u6790\u5468\u671f\u503c\u4e3a0"},
FROMOPEN:{parameter:[1],remark:"\u6c42\u8be5\u54c1\u79cd\u5f53\u524d\u65f6\u523b\u5df2\u5f00\u76d8\u6709\u591a\u957f\u5206\u949f.\n        \u7528\u6cd5:\n         FROMOPEN\n         FROMOPEN.\u8fd4\u56de\u5f53\u524d\u65f6\u523b\u8ddd\u5f00\u76d8\u6709\u591a\u957f\u65f6\u95f4(\u5f00\u5e02\u671f\u95f4\u7684\u76f8\u5bf9\u65f6\u95f4),\u5355\u4f4d\u4e3a\u5206\u949f."},TOTALFZNUM:{parameter:[1],remark:"\u6c42\u8be5\u54c1\u79cd\u7684\u6bcf\u5929\u7684\u603b\u4ea4\u6613\u5206\u949f\u6570.\n        \u7528\u6cd5:\n         TOTALFZNUM\n         TOTALFZNUM.\u8fd4\u56de\u5f53\u524d\u54c1\u79cd\u7684\u6bcf\u5929\u7684\u603b\u4ea4\u6613\u5206\u949f\u6570,\u5355\u4f4d\u4e3a\u5206\u949f."},
DATETODAY:{parameter:[1],remark:"\u6307\u5b9a\u65e5\u671f\u52301990.12.19\u7684\u5929\u6570.\n        \u7528\u6cd5:\n         DATETODAY(date)\n         DATETODAY(date).\u8fd4\u56dedate\u52301990.12.19\u7684\u5929\u6570.\u6709\u6548\u65e5\u671f\u4e3a(901219-1341231)\n        \u4f8b\u5982:\n         DATETODAY(901219)\u8fd4\u56de0."},DAYTODATE:{parameter:[1],remark:"\u6c421990.12.19\u540e\u7b2c\u82e5\u5e72\u5929\u7684\u65e5\u671f.\n        \u7528\u6cd5:\n         DAYTODATE(N)\n         DAYTODATE(N).\u8fd4\u56de1990.12.19\u540e\u7b2cN\u5929\u7684\u65e5\u671f.\u6709\u6548\u5929\u6570\u4e3a(0-20000)\n        \u4f8b\u5982:\n         DAYTODATE(0)\u8fd4\u56de901219."},
TIMETOSEC:{parameter:[1],remark:"\u6c42\u6307\u5b9a\u65f6\u523b\u8ddd0\u65f6\u6709\u591a\u957f\u65f6\u95f4.\n        \u7528\u6cd5:\n         TIMETOSEC(time)\n         TIMETOSEC(time).\u8fd4\u56detime\u65f6\u523b\u8ddd0\u65f6\u6709\u591a\u957f\u65f6\u95f4,\u5355\u4f4d\u4e3a\u79d2.\u6709\u6548\u65f6\u95f4\u4e3a(0-235959)\n        \u4f8b\u5982:\n         TIMETOSEC(93000)\u8fd4\u56de34200."},SECTOTIME:{parameter:[1],remark:"\u6c420\u65f6\u540e\u82e5\u5e72\u79d2\u662f\u4ec0\u4e48\u65f6\u95f4.\n        \u7528\u6cd5:\n         SECTOTIME(N)\n         SECTOTIME(N).\u8fd4\u56de0\u65f6\u540eN\u79d2\u662f\u4ec0\u4e48\u65f6\u95f4.\u6709\u6548\u79d2\u6570\u4e3a(0-86399)\n        \u4f8b\u5982:\n         SECTOTIME(34200)\u8fd4\u56de93000."},
MACHINEDATE:{parameter:[1],remark:"\u53d6\u5f97\u5f53\u524d\u5ba2\u6237\u7aef\u673a\u5668\u4ece1900\u4ee5\u6765\u7684\u7684\u5e74\u6708\u65e5,\u6bd4\u59822016\u5e7410\u67081\u65e5\u4e3a:01161001,MACHINEDATE+19000000\u540e\u624d\u662f\u771f\u6b63\u7684\u65e5\u671f\u503c"},MACHINETIME:{parameter:[1],remark:"\u53d6\u5f97\u5f53\u524d\u5ba2\u6237\u7aef\u673a\u5668\u7684\u65f6\u95f4,\u6bd4\u598211:01:15\u65f6\u4e3a110115"},MACHINEWEEK:{parameter:[1],remark:"\u53d6\u5f97\u5f53\u524d\u5ba2\u6237\u7aef\u673a\u5668\u4e3a\u661f\u671f\u51e0(1,2,3,4,5,6,0)"},
CROSS:{parameter:[1],remark:"\u4e24\u6761\u7ebf\u4ea4\u53c9.\n        \u7528\u6cd5:\n         CROSS(A,B)\u8868\u793a\u5f53A\u4ece\u4e0b\u65b9\u5411\u4e0a\u7a7f\u8fc7B\u65f6\u8fd4\u56de1,\u5426\u5219\u8fd4\u56de0\n        \u4f8b\u5982:\n         CROSS(MA(CLOSE,5),MA(CLOSE,10))\u8868\u793a5\u65e5\u5747\u7ebf\u4e0e10\u65e5\u5747\u7ebf\u4ea4\u91d1\u53c9"},LONGCROSS:{parameter:[1],remark:"\u4e24\u6761\u7ebf\u7ef4\u6301\u4e00\u5b9a\u5468\u671f\u540e\u4ea4\u53c9.\n        \u7528\u6cd5:LONGCROSS(A,B,N)\u8868\u793aA\u5728N\u5468\u671f\u5185\u90fd\u5c0f\u4e8eB,\u672c\u5468\u671f\u4ece\u4e0b\u65b9\u5411\u4e0a\u7a7f\u8fc7B\u65f6\u8fd4\u56de1,\u5426\u5219\u8fd4\u56de0"},
UPNDAY:{parameter:[1],remark:"\u8fd4\u56de\u662f\u5426\u8fde\u6da8\u5468\u671f\u6570.\n        \u7528\u6cd5:\n         UPNDAY(CLOSE,M)\n         \u8868\u793a\u8fde\u6da8M\u4e2a\u5468\u671f,M\u4e3a\u5e38\u91cf"},DOWNNDAY:{parameter:[1],remark:"\u8fd4\u56de\u662f\u5426\u8fde\u8dcc\u5468\u671f.\n        \u7528\u6cd5:\n         DOWNNDAY(CLOSE,M)\n         \u8868\u793a\u8fde\u8dccM\u4e2a\u5468\u671f,M\u4e3a\u5e38\u91cf"},NDAY:{parameter:[1],remark:"\u8fd4\u56de\u662f\u5426\u6301\u7eed\u5b58\u5728X>Y\n        \u7528\u6cd5:\n         NDAY(CLOSE,OPEN,3)\n         \u8868\u793a\u8fde\u7eed3\u65e5\u6536\u9633\u7ebf"},
EXIST:{parameter:[1],remark:"\u662f\u5426\u5b58\u5728.\n        \u4f8b\u5982:\n         EXIST(CLOSE>OPEN,10) \n         \u8868\u793a10\u65e5\u5185\u5b58\u5728\u7740\u9633\u7ebf"},EXISTR:{parameter:[1],remark:"EXISTR(X,A,B):\u662f\u5426\u5b58\u5728(\u524d\u51e0\u65e5\u5230\u524d\u51e0\u65e5\u95f4).\n        \u4f8b\u5982:\n         EXISTR(CLOSE>OPEN,10,5) \n         \u8868\u793a\u4ece\u524d10\u65e5\u5185\u5230\u524d5\u65e5\u5185\u5b58\u5728\u7740\u9633\u7ebf\n         \u82e5A\u4e3a0,\u8868\u793a\u4ece\u7b2c\u4e00\u5929\u5f00\u59cb,B\u4e3a0,\u8868\u793a\u5230\u6700\u540e\u65e5\u6b62"},
EVERY:{parameter:[1],remark:"\u4e00\u76f4\u5b58\u5728.\n        \u4f8b\u5982:\n         EVERY(CLOSE>OPEN,N) \n         \u8868\u793aN\u65e5\u5185\u4e00\u76f4\u9633\u7ebf(N\u5e94\u5927\u4e8e0,\u5c0f\u4e8e\u603b\u5468\u671f\u6570,N\u652f\u6301\u53d8\u91cf)"},LAST:{parameter:[1],remark:"LAST(X,A,B):\u6301\u7eed\u5b58\u5728.\n        \u4f8b\u5982:\n         LAST(CLOSE>OPEN,10,5) \n         \u8868\u793a\u4ece\u524d10\u65e5\u5230\u524d5\u65e5\u5185\u4e00\u76f4\u9633\u7ebf\n         \u82e5A\u4e3a0,\u8868\u793a\u4ece\u7b2c\u4e00\u5929\u5f00\u59cb,B\u4e3a0,\u8868\u793a\u5230\u6700\u540e\u65e5\u6b62"},
NOT:{parameter:[1],remark:"\u6c42\u903b\u8f91\u975e.\n        \u7528\u6cd5:\n         NOT(X)\u8fd4\u56de\u975eX,\u5373\u5f53X=0\u65f6\u8fd4\u56de1,\u5426\u5219\u8fd4\u56de0\n        \u4f8b\u5982:\n         NOT(ISUP)\u8868\u793a\u5e73\u76d8\u6216\u6536\u9634"},IFF:{parameter:[1],remark:"\u6839\u636e\u6761\u4ef6\u6c42\u4e0d\u540c\u7684\u503c.\n        \u7528\u6cd5:\n         IFF(X,A,B)\u82e5X\u4e0d\u4e3a0\u5219\u8fd4\u56deA,\u5426\u5219\u8fd4\u56deB\n        \u4f8b\u5982:\n         IFF(CLOSE>OPEN,HIGH,LOW)\u8868\u793a\u8be5\u5468\u671f\u6536\u9633\u5219\u8fd4\u56de\u6700\u9ad8\u503c,\u5426\u5219\u8fd4\u56de\u6700\u4f4e\u503c"},
IFN:{parameter:[1],remark:"\u6839\u636e\u6761\u4ef6\u6c42\u4e0d\u540c\u7684\u503c,\u540cIF\u5224\u65ad\u76f8\u53cd.\n        \u7528\u6cd5:\n         IFN(X,A,B)\u82e5X\u4e0d\u4e3a0\u5219\u8fd4\u56deB,\u5426\u5219\u8fd4\u56deA\n        \u4f8b\u5982:\n         IFN(CLOSE>OPEN,HIGH,LOW)\u8868\u793a\u8be5\u5468\u671f\u6536\u9634\u5219\u8fd4\u56de\u6700\u9ad8\u503c,\u5426\u5219\u8fd4\u56de\u6700\u4f4e\u503c"},IFC:{parameter:[1],remark:'\u6839\u636e\u6761\u4ef6\u6c42\u4e0d\u540c\u7684\u503c,\u53ef\u4e2d\u6b62.\n        \u7528\u6cd5:\n         IFC(X,A,B)\u82e5X\u4e0d\u4e3a0\u5219\u8fd4\u56deA,\u5426\u5219\u8fd4\u56deB.IFC\u4e0eIF\u51fd\u6570\u7684\u533a\u522b:\u6839\u636eX\u7684\u503c\u6765\u9009\u62e9\u6027\u6267\u884cA\u3001B\u8868\u8fbe\u5f0f.\n        \u4f8b\u5982:\n         IFC(CLOSE>OPEN,HIGH,TESTSKIP(1));L;\u8868\u793a\u5f53\u65e5\u6536\u9633\u5219\u8fd4\u56de\u6700\u9ad8\u503c,\u5e76\u6267\u884c\u4e0b\u4e00\u53e5"L;",\u5426\u5219\u9000\u51fa\u516c\u5f0f\u8ba1\u7b97'},
VALUEWHEN:{parameter:[1],remark:"VALUEWHEN(COND,X) \n        \u5f53COND\u6761\u4ef6\u6210\u7acb\u65f6,\u53d6X\u7684\u5f53\u524d\u503c,\u5426\u5219\u53d6VALUEWHEN\u7684\u4e0a\u4e2a\u503c."},TESTSKIP:{parameter:[1],remark:"TESTSKIP(A):\u6ee1\u8db3A\u5219\u76f4\u63a5\u8fd4\u56de.\n        \u7528\u6cd5:\n         TESTSKIP(A) \n         \u8868\u793a\u5982\u679c\u6ee1\u8db3\u6761\u4ef6A\u5219\u8be5\u516c\u5f0f\u76f4\u63a5\u8fd4\u56de,\u4e0d\u518d\u8ba1\u7b97\u63a5\u4e0b\u6765\u7684\u8868\u8fbe\u5f0f \u6ce8\u610f:A\u4e3a\u975e\u5e8f\u5217\u6570\u636e,\u53ea\u53d6\u6700\u540e\u4e00\u4e2a\u6570\u636e"},
MAX:{parameter:[1],remark:"\u6c42\u6700\u5927\u503c.\n        \u7528\u6cd5:\n         MAX(A,B)\u8fd4\u56deA\u548cB\u4e2d\u7684\u8f83\u5927\u503c\n        \u4f8b\u5982:\n         MAX(CLOSE-OPEN,0)\u8868\u793a\u82e5\u6536\u76d8\u4ef7\u5927\u4e8e\u5f00\u76d8\u4ef7\u8fd4\u56de\u5b83\u4eec\u7684\u5dee\u503c,\u5426\u5219\u8fd4\u56de0"},MIN:{parameter:[1],remark:"\u6c42\u6700\u5c0f\u503c.\n        \u7528\u6cd5:\n         MIN(A,B)\u8fd4\u56deA\u548cB\u4e2d\u7684\u8f83\u5c0f\u503c\n        \u4f8b\u5982:\n         MIN(CLOSE,OPEN)\u8fd4\u56de\u5f00\u76d8\u4ef7\u548c\u6536\u76d8\u4ef7\u4e2d\u7684\u8f83\u5c0f\u503c"},
MAX6:{parameter:[1],remark:"\u6c426\u4e2a\u53c2\u6570\u4e2d\u7684\u6700\u5927\u503c.\n        \u7528\u6cd5:\n         MAX6(A,B,C,D,E,F)\u8fd4\u56de\u8f83\u5927\u503c"},MIN6:{parameter:[1],remark:"\u6c426\u4e2a\u53c2\u6570\u4e2d\u7684\u6700\u5c0f\u503c.\n        \u7528\u6cd5:\n         MIN6(A,B,C,D,E,F)\u8fd4\u56de\u8f83\u5c0f\u503c"},ACOS:{parameter:[1],remark:"\u53cd\u4f59\u5f26\u503c.\n        \u7528\u6cd5:\n         ACOS(X)\u8fd4\u56deX\u7684\u53cd\u4f59\u5f26\u503c"},ASIN:{parameter:[1],remark:"\u53cd\u6b63\u5f26\u503c.\n        \u7528\u6cd5:\n         ASIN(X)\u8fd4\u56deX\u7684\u53cd\u6b63\u5f26\u503c"},
ATAN:{parameter:[1],remark:"\u53cd\u6b63\u5207\u503c.\n        \u7528\u6cd5:\n         ATAN(X)\u8fd4\u56deX\u7684\u53cd\u6b63\u5207\u503c"},COS:{parameter:[1],remark:"\u4f59\u5f26\u503c.\n        \u7528\u6cd5:\n         COS(X)\u8fd4\u56deX\u7684\u4f59\u5f26\u503c"},SIN:{parameter:[1],remark:"\u6b63\u5f26\u503c.\n        \u7528\u6cd5:\n         SIN(X)\u8fd4\u56deX\u7684\u6b63\u5f26\u503c"},TAN:{parameter:[1],remark:"\u6b63\u5207\u503c.\n        \u7528\u6cd5:\n         TAN(X)\u8fd4\u56deX\u7684\u6b63\u5207\u503c"},
EXP:{parameter:[1],remark:"\u6307\u6570.\n        \u7528\u6cd5:\n         EXP(X)\u4e3ae\u7684X\u6b21\u5e42\n        \u4f8b\u5982:\n         EXP(CLOSE)\u8fd4\u56dee\u7684CLOSE\u6b21\u5e42"},LN:{parameter:[1],remark:"\u6c42\u81ea\u7136\u5bf9\u6570.\n        \u7528\u6cd5:\n         LN(X)\u4ee5e\u4e3a\u5e95\u7684\u5bf9\u6570\n        \u4f8b\u5982:\n         LN(CLOSE)\u6c42\u6536\u76d8\u4ef7\u7684\u5bf9\u6570"},LOG:{parameter:[1],remark:"\u6c4210\u4e3a\u5e95\u7684\u5bf9\u6570.\n        \u7528\u6cd5:\n         LOG(X)\u53d6\u5f97X\u7684\u5bf9\u6570\n        \u4f8b\u5982:\n         LOG(100)\u7b49\u4e8e2"},
SQRT:{parameter:[1],remark:"\u5f00\u5e73\u65b9.\n        \u7528\u6cd5:\n         SQRT(X)\u4e3aX\u7684\u5e73\u65b9\u6839\n        \u4f8b\u5982:\n         SQRT(CLOSE)\u6536\u76d8\u4ef7\u7684\u5e73\u65b9\u6839"},ABS:{parameter:[1],remark:"\u6c42\u7edd\u5bf9\u503c.\n        \u7528\u6cd5:\n         ABS(X)\u8fd4\u56deX\u7684\u7edd\u5bf9\u503c\n        \u4f8b\u5982:\n         ABS(-34)\u8fd4\u56de34"},POW:{parameter:[1],remark:"\u4e58\u5e42.\n        \u7528\u6cd5:\n         POW(A,B)\u8fd4\u56deA\u7684B\u6b21\u5e42\n        \u4f8b\u5982:\n         POW(CLOSE,3)\u6c42\u5f97\u6536\u76d8\u4ef7\u76843\u6b21\u65b9"},
CEILING:{parameter:[1],remark:"\u5411\u4e0a\u820d\u5165.\n        \u7528\u6cd5:\n         CEILING(A)\u8fd4\u56de\u6cbfA\u6570\u503c\u589e\u5927\u65b9\u5411\u6700\u63a5\u8fd1\u7684\u6574\u6570\n        \u4f8b\u5982:\n         CEILING(12.3)\u6c42\u5f9713,CEILING(-3.5)\u6c42\u5f97-3"},FLOOR:{parameter:[1],remark:"\u5411\u4e0b\u820d\u5165.\n        \u7528\u6cd5:\n         FLOOR(A)\u8fd4\u56de\u6cbfA\u6570\u503c\u51cf\u5c0f\u65b9\u5411\u6700\u63a5\u8fd1\u7684\u6574\u6570\n        \u4f8b\u5982:\n         FLOOR(12.3)\u6c42\u5f9712,FLOOR(-3.5)\u6c42\u5f97-4"},
INTPART:{parameter:[1],remark:"\u53d6\u6574.\n        \u7528\u6cd5:\n         INTPART(A)\u8fd4\u56de\u6cbfA\u7edd\u5bf9\u503c\u51cf\u5c0f\u65b9\u5411\u6700\u63a5\u8fd1\u7684\u6574\u6570\n        \u4f8b\u5982:\n         INTPART(12.3)\u6c42\u5f9712,INTPART(-3.5)\u6c42\u5f97-3"},BETWEEN:{parameter:[1],remark:"\u4ecb\u4e8e.\n        \u7528\u6cd5:\n         BETWEEN(A,B,C)\u8868\u793aA\u5904\u4e8eB\u548cC\u4e4b\u95f4\u65f6\u8fd4\u56de1,B<A<C\u6216C<A<B,\u5426\u5219\u8fd4\u56de0\n        \u4f8b\u5982:\n         BETWEEN(CLOSE,MA(CLOSE,10),MA(CLOSE,5))\u8868\u793a\u6536\u76d8\u4ef7\u4ecb\u4e8e5\u65e5\u5747\u7ebf\u548c10\u65e5\u5747\u7ebf\u4e4b\u95f4"},
FRACPART:{parameter:[1],remark:"\u5c0f\u6570\u90e8\u5206.\n        \u7528\u6cd5:\n         FRACPART(X),\u8fd4\u56deX\u7684\u5c0f\u6570\u90e8\u5206"},ROUND:{parameter:[1],remark:"\u56db\u820d\u4e94\u5165.\n        \u7528\u6cd5:\n         ROUND(X),\u8fd4\u56deX\u56db\u820d\u4e94\u5165\u5230\u4e2a\u4f4d\u7684\u6570\u503c"},ROUND2:{parameter:[1],remark:"\u56db\u820d\u4e94\u5165.\n        \u7528\u6cd5:\n         ROUND2(X,N),\u8fd4\u56deX\u56db\u820d\u4e94\u5165\u5230N\u4f4d\u5c0f\u6570\u7684\u6570\u503c\n        \u7531\u4e8e\u7cbe\u5ea6\u95ee\u9898,\u6570\u636e\u8d8a\u5927\u8bef\u5dee\u53ef\u80fd\u8d8a\u5927"},
SIGN:{parameter:[1],remark:"\u53d6\u7b26\u53f7.\n        \u7528\u6cd5:\n         SIGN(X),\u8fd4\u56deX\u7684\u7b26\u53f7.\u5f53X>0,X=0,X<0\u5206\u522b\u8fd4\u56de1,0,-1"},MOD:{parameter:[1],remark:"\u53d6\u6a21.\n        \u7528\u6cd5:\n         MOD(M,N),\u8fd4\u56deM\u5173\u4e8eN\u7684\u6a21(M\u9664\u4ee5N\u7684\u4f59\u6570)\n        \u4f8b\u5982:\n         MOD(5,3)\u8fd4\u56de2"},RAND:{parameter:[1],remark:"\u53d6\u968f\u673a\u6570.\n        \u7528\u6cd5:\n         RAND(N),\u8fd4\u56de\u4e00\u4e2a\u8303\u56f4\u57281-N\u7684\u968f\u673a\u6574\u6570"},
AVEDEV:{parameter:[1],remark:"AVEDEV(X,N) \u8fd4\u56de\u5e73\u5747\u7edd\u5bf9\u504f\u5dee"},DEVSQ:{parameter:[1],remark:"DEVSQ(X,N) \u8fd4\u56de\u6570\u636e\u504f\u5dee\u5e73\u65b9\u548c"},FORCAST:{parameter:[1],remark:"FORCAST(X,N) \u8fd4\u56de\u7ebf\u6027\u56de\u5f52\u9884\u6d4b\u503c"},SLOPE:{parameter:[1],remark:"SLOPE(X,N) \u8fd4\u56de\u7ebf\u6027\u56de\u5f52\u659c\u7387"},STD:{parameter:[1],remark:"STD(X,N) \u8fd4\u56de\u4f30\u7b97\u6807\u51c6\u5dee"},STDP:{parameter:[1],remark:"STDP(X,N) \u8fd4\u56de\u603b\u4f53\u6807\u51c6\u5dee"},
STDDEV:{parameter:[1],remark:"STDDEV(X,N) \u8fd4\u56de\u6807\u51c6\u504f\u5dee"},VAR:{parameter:[1],remark:"VAR(X,N) \u8fd4\u56de\u4f30\u7b97\u6837\u672c\u65b9\u5dee"},VARP:{parameter:[1],remark:"VARP(X,N) \u8fd4\u56de\u603b\u4f53\u6837\u672c\u65b9\u5dee"},COVAR:{parameter:[1],remark:"COVAR(X,Y,N) \u8fd4\u56deX\u548cY\u7684N\u5468\u671f\u7684\u534f\u65b9\u5dee"},RELATE:{parameter:[1],remark:"RELATE(X,Y,N) \u8fd4\u56deX\u548cY\u7684N\u5468\u671f\u7684\u76f8\u5173\u7cfb\u6570"},BETA:{parameter:[1],
remark:"\u03b2(Beta)\u7cfb\u6570\n        BETA(N) \u8fd4\u56de\u5f53\u524d\u8bc1\u5238N\u5468\u671f\u6536\u76ca\u4e0e\u5bf9\u5e94\u5927\u76d8\u6307\u6570\u6536\u76ca\u76f8\u6bd4\u7684\u8d1d\u5854\u7cfb\u6570"},BETAEX:{parameter:[1],remark:"BETAEX(X,Y,N) \u8fd4\u56deX\u4e0eY\u7684N\u5468\u671f\u7684\u76f8\u5173\u653e\u5927\u7cfb\u6570"},IVOLAT:{parameter:[1],remark:"IVOLAT(N,M) \u8fd4\u56de\u671f\u6743\u6ce2\u52a8\u7387 N\u8868\u793a\u8ba1\u7b97\u5468\u671f M\u8868\u793a\u7c7b\u578b,0:\u6807\u7684\u8bc1\u5238\u7684\u5386\u53f2\u6ce2\u52a8\u7387 1:\u9690\u542b\u6ce2\u52a8\u7387"},
COST:{parameter:[1],remark:"\u6210\u672c\u5206\u5e03\u60c5\u51b5.\n        \u7528\u6cd5:\n         COST(10),\u8868\u793a10%\u83b7\u5229\u76d8\u7684\u4ef7\u683c\u662f\u591a\u5c11,\u5373\u670910%\u7684\u6301\u4ed3\u91cf\u5728\u8be5\u4ef7\u683c\u4ee5\u4e0b,\u5176\u4f5990%\u5728\u8be5\u4ef7\u683c\u4ee5\u4e0a,\u4e3a\u5957\u7262\u76d8\n        \u8be5\u51fd\u6570\u4ec5\u5bf9\u65e5\u7ebf\u5206\u6790\u5468\u671f\u6709\u6548"},PEAK:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u524dM\u4e2aZIG\u8f6c\u5411\u6ce2\u5cf0\u503c.\n        \u7528\u6cd5:\n         PEAK(K,N,M)\u8868\u793a\u4e4b\u5b57\u8f6c\u5411ZIG(K,N)\u7684\u524dM\u4e2a\u6ce2\u5cf0\u7684\u6570\u503c,M\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1\n        \u4f8b\u5982:\n         PEAK(1,5,1)\u8868\u793a%5\u6700\u9ad8\u4ef7ZIG\u8f6c\u5411\u7684\u4e0a\u4e00\u4e2a\u6ce2\u5cf0\u7684\u6570\u503c"},
PEAKBARS:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u524dM\u4e2aZIG\u8f6c\u5411\u6ce2\u5cf0\u5230\u5f53\u524d\u8ddd\u79bb.\n        \u7528\u6cd5:\n         PEAKBARS(K,N,M)\u8868\u793a\u4e4b\u5b57\u8f6c\u5411ZIG(K,N)\u7684\u524dM\u4e2a\u6ce2\u5cf0\u5230\u5f53\u524d\u7684\u5468\u671f\u6570,M\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1\n        \u4f8b\u5982:\n         PEAKBARS(0,5,1)\u8868\u793a%5\u5f00\u76d8\u4ef7ZIG\u8f6c\u5411\u7684\u4e0a\u4e00\u4e2a\u6ce2\u5cf0\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},
SAR:{parameter:[1],remark:"\u629b\u7269\u8f6c\u5411.\n        \u7528\u6cd5:\n         SAR(N,S,M),N\u4e3a\u8ba1\u7b97\u5468\u671f,S\u4e3a\u6b65\u957f,M\u4e3a\u6781\u503c\n        \u4f8b\u5982:\n         SAR(10,2,20)\u8868\u793a\u8ba1\u7b9710\u65e5\u629b\u7269\u8f6c\u5411,\u6b65\u957f\u4e3a2%,\u6781\u9650\u503c\u4e3a20%"},SARTURN:{parameter:[1],remark:"\u629b\u7269\u8f6c\u5411\u70b9.\n        \u7528\u6cd5:\n         SARTURN(N,S,M),N\u4e3a\u8ba1\u7b97\u5468\u671f,S\u4e3a\u6b65\u957f,M\u4e3a\u6781\u503c,\u82e5\u53d1\u751f\u5411\u4e0a\u8f6c\u5411\u5219\u8fd4\u56de1,\u82e5\u53d1\u751f\u5411\u4e0b\u8f6c\u5411\u5219\u8fd4\u56de-1,\u5426\u5219\u4e3a0\n        \u5176\u7528\u6cd5\u4e0eSAR\u51fd\u6570\u76f8\u540c"},
TROUGH:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u524dM\u4e2aZIG\u8f6c\u5411\u6ce2\u8c37\u503c.\n        \u7528\u6cd5:\n         TROUGH(K,N,M)\u8868\u793a\u4e4b\u5b57\u8f6c\u5411ZIG(K,N)\u7684\u524dM\u4e2a\u6ce2\u8c37\u7684\u6570\u503c,M\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1\n        \u4f8b\u5982:\n         TROUGH(2,5,2)\u8868\u793a%5\u6700\u4f4e\u4ef7ZIG\u8f6c\u5411\u7684\u524d2\u4e2a\u6ce2\u8c37\u7684\u6570\u503c"},TROUGHBARS:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u524dM\u4e2aZIG\u8f6c\u5411\u6ce2\u8c37\u5230\u5f53\u524d\u8ddd\u79bb.\n        \u7528\u6cd5:\n         TROUGHBARS(K,N,M)\u8868\u793a\u4e4b\u5b57\u8f6c\u5411ZIG(K,N)\u7684\u524dM\u4e2a\u6ce2\u8c37\u5230\u5f53\u524d\u7684\u5468\u671f\u6570,M\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e1\n        \u4f8b\u5982:\n         TROUGHBARS(2,5,2)\u8868\u793a%5\u6700\u4f4e\u4ef7ZIG\u8f6c\u5411\u7684\u524d2\u4e2a\u6ce2\u8c37\u5230\u5f53\u524d\u7684\u5468\u671f\u6570"},
ZIG:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u4e4b\u5b57\u8f6c\u5411.\n        \u7528\u6cd5:\n         ZIG(K,N),\u5f53\u4ef7\u683c\u53d8\u5316\u91cf\u8d85\u8fc7N%\u65f6\u8f6c\u5411,K\u8868\u793a0:\u5f00\u76d8\u4ef7,1:\u6700\u9ad8\u4ef7,2:\u6700\u4f4e\u4ef7,3:\u6536\u76d8\u4ef7,\u5176\u4f59:\u6570\u7ec4\u4fe1\u606f\n        \u4f8b\u5982:\n         ZIG(3,5)\u8868\u793a\u6536\u76d8\u4ef7\u76845%\u7684ZIG\u8f6c\u5411"},ZIGA:{parameter:[1],remark:"\u5c5e\u4e8e\u672a\u6765\u51fd\u6570,\u4e4b\u5b57\u8f6c\u5411.\n        \u7528\u6cd5:\n         ZIGA(K,X),\u5f53\u4ef7\u683c\u53d8\u5316\u8d85\u8fc7X\u65f6\u8f6c\u5411,K\u8868\u793a0:\u5f00\u76d8\u4ef7,1:\u6700\u9ad8\u4ef7,2:\u6700\u4f4e\u4ef7,3:\u6536\u76d8\u4ef7,\u5176\u4f59:\u6570\u7ec4\u4fe1\u606f\n        \u4f8b\u5982:\n         ZIGA(3,1.5)\u8868\u793a\u6536\u76d8\u4ef7\u53d8\u53161.5\u5143\u7684ZIGA\u8f6c\u5411"}},
chartSystemValue={precis:[1,-1,"dec","\u663e\u793a\u5c0f\u6570\u4f4d"],shift:[1,0,"shift","\u79fb\u52a8\u6570\u636e"],Disable:[0,1,"drawControl"],linethick:[1,1,"lineWidth","\u683c\u5f0f\u201cLINETHICK+(1-9)\u201d;\u53c2\u6570\u7684\u53d6\u503c\u8303\u56f4\u57281\u20149\u4e4b\u95f4\uff0c\u201cLINETHICK1\u201d\u8868\u793a\u6700\u7ec6\u7684\u7ebf\uff0c\u800c\u201cLINETHICK9\u201d\u8868\u793a\u6700\u7c97\u7684\u7ebf\uff1b"],beginValue:[1,1,"beginValue","\u8bbe\u7f6e\u753b\u7ebf\u7684\u5f00\u59cb\u503c\uff08\u5982\uff1a\u5206\u65f6\u8d70\u52bf\uff0cbeginValue:Open, \u4ee5\u5f00\u76d8\u4ef7\u5f00\u59cb\uff09"],
solid:[0,1,"lineType","\u753b\u5b9e\u7ebf"],circleDot:[0,2,"lineType","\u753b\u5c0f\u5706\u5708\u7ebf"],pointDot:[0,3,"lineType","\u753b\u5c0f\u5706\u70b9\u7ebf"],ball:[0,4,"lineType","\u753b\u7403"],square:[0,5,"lineType","\u753b\u83f1\u5f62"],triangle:[0,6,"lineType","\u753b\u4e09\u89d2\u5f62"],invertedTriangle:[0,7,"lineType","\u753b\u5012\u4e09\u89d2\u5f62"],cross:[0,8,"lineType","\u753b\u4ea4\u53c9\u7ebf"],horiLine:[0,9,"lineType","\u753b\u4e00\u5b57\u7ebf"],crossDot:[0,10,"lineType","\u753b\u5c0f\u53c9\u7ebf",
"line"],chain:[0,11,"lineType","\u753b\u8fde\u7eed\u7684\u7ebf"],colorStick:[0,1,"lineType","\u5f69\u8272\u67f1\u72b6\u7ebf\u3002\u6570\u636e\u4e3a\u6b63\u6570\u65f6\uff0c\u5411\u4e0a\u753b\u7ea2\u8272\u67f1\u72b6\u7ebf\uff0c\u53cd\u4e4b\u5411\u4e0b\u753b\u7eff\u7ebf"],lineDash:[0,2,"lineType","\u753b\u865a\u7ebf"],lineDashDot:[0,3,"lineType","\u753b\u70b9\u753b\u7ebf"],lineDot:[0,4,"lineType","\u753b\u865a\u7ebf"],lineStock:[0,9,"lineType","\u5f69\u8272\u7ebf\u3002\u5f53\u524d\u6570\u636e\u5927\u4e8e\u524d\u4e00\u4e2a\u6570\u636e\u65f6\u4e3a\u4e0a\u6da8\u8272\uff0c\u8d1f\u6570\u4e3a\u4e0b\u8dcc\u8272\uff0c\u76f8\u7b49\u4e3a\u6301\u5e73\u8272"],
noLine:[0,0,"lineType","\u4e0d\u753b\u7ebf\uff0c\u4e0d\u663e\u793a\u6570\u5b57"],rgb:[2,void 0,"color","\u989c\u8272"],backgroundColor:[0,"backgroundColor","color","\u80cc\u666f\u989c\u8272"],colorShine:[0,"colorShine","color","\u9633\u7ebf\u989c\u8272"],colorShade:[0,"colorShade","color","\u9634\u7ebf\u989c\u8272"],colorHold:[0,"colorHold","color","\u6301\u5e73\u989c\u8272"],colorUp:[0,"colorUp","color","\u4e0a\u6da8\u989c\u8272"],colorDown:[0,"colorDown","color","\u4e0b\u8dcc\u989c\u8272"],color1:[0,
"color1","color","\u7cfb\u7edf\u989c\u82721"],color2:[0,"color2","color","\u7cfb\u7edf\u989c\u82722"],color3:[0,"color3","color","\u7cfb\u7edf\u989c\u82723"],color4:[0,"color4","color","\u7cfb\u7edf\u989c\u82724"],color5:[0,"color5","color","\u7cfb\u7edf\u989c\u82725"],color6:[0,"color6","color","\u7cfb\u7edf\u989c\u82726"],color7:[0,"color7","color","\u7cfb\u7edf\u989c\u82727"],color8:[0,"color8","color","\u7cfb\u7edf\u989c\u82728"],colorBlack:[0,"#000","color","\u9ed1\u8272"],colorBlue:[0,"#00f",
"color","\u84dd\u8272"],colorGreen:[0,"#0f0","color","\u7eff\u8272"],colorCyan:[0,"#0ff","color","\u9752\u8272"],colorRed:[0,"#f00","color","\u7ea2\u8272"],colorMagenta:[0,"#f0f","color","\u6d0b\u7ea2\u8272"],colorBrown:[0,"#A52A2A","color","\u68d5\u8272"],colorLiGray:[0,"#aaa","color","\u6de1\u7070\u8272"],colorGray:[0,"#888","color","\u7070\u8272"],colorLiBlue:[0,"#88f","color","\u6de1\u84dd\u8272"],colorLiGreen:[0,"#8f8","color","\u6de1\u7eff\u8272"],colorLiCyan:[0,"#8ff","color","\u6de1\u9752\u8272"],
colorLiRed:[0,"#f88","color","\u6de1\u7ea2\u8272"],colorLiMagenta:[0,"#f8f","color","\u6de1\u6d0b\u7ea2\u8272"],colorYellow:[0,"#ff0","color","\u9ec4\u8272"],colorSkyBlue:[0,"#4FB0D5","color","\u5929\u84dd\u8272"],colorSeaBlue:[0,"#228ADA","color","\u6d77\u84dd\u8272"],colorOrange:[0,"#D18A1C","color","\u6a59\u8272"],colorWhite:[0,"#fff","color","\u767d\u8272"],align:[0,"left","align","\u6587\u5b57\u5de6\u53f3\u5bf9\u9f50\u65b9\u5f0f"],vAlign:[0,"top","vAlign","\u6587\u5b57\u4e0a\u4e0b\u5bf9\u9f50\u65b9\u5f0f"],
offset:[0,0,"offset","\u6587\u5b57\u4e0a\u4e0b\u504f\u79fb\u50cf\u6570"],fontName:[0,"Helvetica Neue","fontName","\u5b57\u4f53\u540d\u79f0"],fontSize:[0,12,"fontSize","\u5b57\u4f53\u5927\u5c0f"],fontBold:[0,!1,"fontBold","\u7c97\u4f53\u5b57"],fontItalic:[0,!1,"fontItalic","\u659c\u4f53\u5b57"],format:[0,void 0,"format","\u753b\u7ebf\u6570\u636e\u663e\u793a\u683c\u5f0f\u5316"],boundParam:[0,void 0,"boundParam","\u753b\u7ebf\u7ed1\u5b9a\u53c2\u6570"]},key;
for(key in chartSystemValue)"lineType"==chartSystemValue[key][2]&&(chartSystemValue[key][1]=key);function toChartValueString(a,b){1E8<=a?a=(a/1E6).toFixed(0)+"M":1E6<=a?a=(a/1E3).toFixed(0)+"K":(a=a.toFixed(b),7<a.length&&(a=a.substr(0,7),"."==a[a.length-1]&&(a=a.substr(0,a.length-1))));return a}
function drawArrowDown(a,b,c,g){var k=b.top+.382*b.height,q=b.width/2.5;a.beginPath();a.strokeStyle=c;a.fillStyle=g;a.moveTo(b.left+b.width/2,b.top+b.height);a.lineTo(b.left,k);a.lineTo(b.left+b.width/2-q/2,k);a.lineTo(b.left+b.width/2-q/2,b.top);a.lineTo(b.left+b.width/2+q/2,b.top);a.lineTo(b.left+b.width/2+q/2,k);a.lineTo(b.left+b.width,k);a.lineTo(b.left+b.width/2,b.top+b.height);a.fill();a.closePath()}
function drawArrowUp(a,b,c,g){var k=b.top+.618*b.height,q=b.width/2.5;a.beginPath();a.strokeStyle=c;a.fillStyle=g;a.moveTo(b.left+b.width/2,b.top);a.lineTo(b.left,k);a.lineTo(b.left+b.width/2-q/2,k);a.lineTo(b.left+b.width/2-q/2,b.top+b.height);a.lineTo(b.left+b.width/2+q/2,b.top+b.height);a.lineTo(b.left+b.width/2+q/2,k);a.lineTo(b.left+b.width,k);a.lineTo(b.left+b.width/2,b.top);a.fill();a.closePath()}
function drawTriangleDown(a,b,c,g){var k=b.top;a.beginPath();a.strokeStyle=c;a.fillStyle=g;a.moveTo(b.left+b.width/2,b.top+b.height);a.lineTo(b.left,k);a.lineTo(b.left+b.width,k);a.lineTo(b.left+b.width/2,b.top+b.height);a.fill();a.closePath()}function drawTriangleUp(a,b,c,g){var k=b.top+b.height;a.beginPath();a.strokeStyle=c;a.fillStyle=g;a.moveTo(b.left+b.width/2,b.top);a.lineTo(b.left,k);a.lineTo(b.left+b.width,k);a.lineTo(b.left+b.width/2,b.top);a.fill();a.closePath()}
var formulaExcludeKey=["if","try","catch"],isFormulaExcludeKey=function(a){for(var b=0;b<formulaExcludeKey.length;b++)if(a.slice(0,formulaExcludeKey[b].length)==formulaExcludeKey[b]&&(null==a[formulaExcludeKey[b].length]||" "==a[formulaExcludeKey[b].length]||"("==a[formulaExcludeKey[b].length]||"{"==a[formulaExcludeKey[b].length]))return!0;return!1};
function chartEngine(a,b,c){function g(wa,Ea,Va){var I=Va.indexOf("boundParam"),D=formula_drawLine.name;if(0<I){var S="";for(I+=12;I<Va.length&&"'"!=Va[I];I++)S+=Va[I];wa="var drawLineTemp = new "+D+"("+wa+', "'+Ea+'"'+Va+"); drawLineTemp.setBoundParamValue("+S+"); addDraw(drawLineTemp);"}else wa="addDraw(new "+D+"("+wa+', "'+Ea+'"'+Va+"))";return wa}function k(wa){var Ea=0;"number"==typeof wa||"boolean"==typeof wa?Ea=1:"string"==typeof wa?Ea=1:"object"==typeof wa&&"Array"==wa.constructor.name&&(Ea=
3);return Ea}function q(wa,Ea,Va){if(null==wa||null==Va)return null;var I=k(wa),D=k(Va);switch(Ea){case "+":if(1==I)if(1==D)var S=wa+Va;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa+Va[Ea]}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]+Va;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]+Va[Ea];wa.type?S.type=wa.type:Va.type&&(S.type=Va.type);break;case "-":if(1==I)if(1==D)S=wa-Va;
else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa-Va[Ea]}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]-Va;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]-Va[Ea];wa.type?S.type=wa.type:Va.type&&(S.type=Va.type);break;case "*":if(1==I)if(1==D)S=wa*Va;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa*Va[Ea]}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=
void 0==wa[Ea]?void 0:wa[Ea]*Va;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]*Va[Ea];break;case "/":if(1==I)if(1==D)S=0!=Va?wa/Va:void 0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]||0==Va[Ea]?void 0:wa/Va[Ea]}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]||0==Va?void 0:wa[Ea]/Va;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:0==Va[Ea]?0:wa[Ea]/Va[Ea];break;case "==":if(1==
I)if(1==D)S=wa==Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa==Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]==Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]==Va[Ea]?1:0;break;case "!=":if(1==I)if(1==D)S=wa!=Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa!=Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=
void 0==wa[Ea]?void 0:wa[Ea]!=Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]!=Va[Ea]?1:0;break;case ">":if(1==I)if(1==D)S=wa>Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa>=Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]>Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]>Va[Ea]?1:0;break;case ">=":if(1==I)if(1==
D)S=wa>=Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa>=Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]>=Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]>=Va[Ea]?1:0;break;case "<":if(1==I)if(1==D)S=wa<Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa<Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==
wa[Ea]?void 0:wa[Ea]<Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]<Va[Ea]?1:0;break;case "<=":if(1==I)if(1==D)S=wa<=Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa<=Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]<=Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]<=Va[Ea]?1:0;break;case "&&":case "and":if(1==
I)if(1==D)S=wa&&Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa&&Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=void 0==wa[Ea]?void 0:wa[Ea]&&Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]&&Va[Ea]?1:0;break;case "||":case "or":if(1==I)if(1==D)S=wa||Va?1:0;else{if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==Va[Ea]?void 0:wa||Va[Ea]?1:0}else if(3==I)if(1==D)for(S=[],Ea=0;Ea<wa.length;Ea++)S[Ea]=
void 0==wa[Ea]?void 0:wa[Ea]||Va?1:0;else if(3==D)for(S=[],Ea=0;Ea<Va.length;Ea++)S[Ea]=void 0==wa[Ea]||void 0==Va[Ea]?void 0:wa[Ea]||Va[Ea]?1:0}return S}function f(wa,Ea,Va){hb=wa&&"Array"==wa.constructor.name?wa[0]:wa;Ma=null==Ea?2:Ea;U.scaleDec=Ma;rb=Va}function p(wa,Ea,Va){zb=wa;Jb=Ea;Cb=Va}function v(wa){var Ea=fb.param;wa=wa.replace("arguments[4]","Time");wa=wa.replace("arguments[5]","Date");for(M=0;M<Ea.length;M++)wa=eval("arguments[0].replace(/{{ "+(Ea[M].name+" }}/g, repValue)"));return u(wa)}
function A(wa,Ea){null==Ya&&(Ya={});Ya.paddingTop=wa;Ya.paddingBottom=Ea}var r=this,u=b,z=!0,H,C=[],U={max:0,min:0,dataMax:0,dataMin:0,scaleDec:void 0,baseValue:void 0,baseDate:20180101,valueAtIndexX:0,valueAtIndexWidth:0},J,G,B,L,ba,N,E,V,F,M,X,aa,ia,fa,T,Y,O,K=["Open","High","Low","Close","TradingDay"],Z,pa,oa,Aa,ta,Q,sa,ra,la,Na,Wa,na,ha,ea,ja={left:0,top:0,width:0,height:0},da,Oa,Pa,hb,Ma=2,rb,zb,Jb,Cb,Db,cb,Ab,Gb=16,Ra,Sb,Ub,Ob,Fb,Ya;r.property={param:[],colors:[]};var fb={param:[],colors:[]},
$a=!1,za,Ka;this.setFormulaScript=function(wa,Ea,Va,I){r.formulaId=Ea;Va&&(r.formulaName=Va);r.formulaNote=void 0===I?"":I;r.scripts="";r.formula=wa;Ab=0;$a=!1;r.property={param:[],colors:[]};fb.param=[];za=null;z=!0;Ea=[];Va="";I=0;for(var D=wa.length,S=0;S<D;S++)if("/"==wa[S]&&"/"==wa[S+1])for(S+=2;S<D&&"\n"!=wa[S]&&"\r"!=wa[S];S++);else if('"'==wa[S]||"'"==wa[S]||"`"==wa[S]||"("==wa[S]){var xa=0,Ba=wa[S],Ia=Ba;"("==Ia?Ia=")":Ba=0;if(isFormulaExcludeKey(Va.trim()))xa=S,S=skipFlag(wa,S),Va+=wa.substr(xa,
S-xa+1),Ea[I]=Va.trim(),Va="",I++;else for(Va+=wa[S],S++;S<D;S++)if(Va+=wa[S],wa[S]==Ia&&"\\"!=wa[S-1]){if(0==xa)break;xa--}else wa[S]==Ba&&"\\"!=wa[S-1]&&xa++}else if(S<D-3&&"{"==wa[S]&&"{"==wa[S+1]&&" "==wa[S+2]&&(0==S||1<S&&"'"!=wa[S-1])){xa=0;Va+="{{ ";for(S+=3;S<D;S++){if(S<D-3&&"{"==wa[S]&&"{"==wa[S+1]&&" "==wa[S+2])xa++;else if(S<D-3&&" "==wa[S]&&"}"==wa[S+1]&&"}"==wa[S+2])if(0==xa){Va+=" }}";S+=3;"\r"!=wa[S+1]&&"\n"!=wa[S+1]||S++;break}else xa--;Va+=wa[S]}Ea[I]=Va.trim();Va="";I++}else"{"==
wa[S]&&""==Va.trim()?(Ea[I]="{",Va="",I++):";"==wa[S]||"\r"==wa[S]||"\n"==wa[S]?(Ea[I]=Va.trim(),Va="",I++,"\r"!=wa[S+1]&&"\n"!=wa[S+1]||S++):Va+=wa[S];""!=Va&&(Ea[I]=Va.trim());for(wa=0;wa<Ea.length;wa++)if("{{ "==Ea[wa].slice(0,3))r.scripts+=Ea[wa]+"\r\n";else if(isFormulaExcludeKey(Ea[wa]))r.scripts+=Ea[wa]+"\r\n";else if("input"!=Ea[wa].slice(0,5).toLowerCase()||":"!=Ea[wa][5]&&" "!=Ea[wa][5]){Va=Ea[wa].indexOf("//");if(0<=Va&&(Ea[wa]=Ea[wa].substr(0,Va),Ea[wa]=Ea[wa].trim(),""==Ea[wa]))continue;
Va=Ca(Ea[wa]);"String"==Va.constructor.name?r.scripts+=Ea[wa]+"\n":0<Va.length?charDrawFunctionList[Va[0][0]]&&1==charDrawFunctionList[Va[0][0]].javascript?r.scripts+=Ea[wa]+";\n":(Va=ib(Va),r.scripts+=Va+";\n"):r.scripts+="\n"}else Va=["input",":",Ca(Ea[wa].slice(6))],ib(Va);Ab=void 0};this.getFormulaScript=function(){return r.formula};this.getFormulaId=function(){return r.formulaId};this.getFormulaName=function(){return r.formulaName};this.getFormula=function(){return{id:r.formulaId,script:r.formula}};
this.getProperty=function(){return r.property};this.getSets=function(){return fb};this.setSets=function(wa){fb.param=[];fb.colors=[];for(var Ea=0;Ea<wa.param.length;Ea++)fb.param[Ea].value=wa.param[Ea].value;for(Ea=0;Ea<wa.colors.length;Ea++)for(var Va in wa.colors[Ea])fb.colors[Ea].name=wa.colors[Ea].name;$a=!0};this.setDefault=function(){fb={param:[],colors:[]};r.setSets(r.property)};this.setSyncXAxis=function(wa){Oa=wa};this.getPropertyHTML=function(){for(var wa=0,Ea="",Va=r.property.param,I=0,
D=0;D<Va.length;D++)1==Va[D].isBoundParam&&I++;if(I<Va.length){Ea+="<table cellspacing='1' cellpadding='1'>";for(D=0;D<Va.length;D++)1!=Va[D].isBoundParam&&(Ea+="<tr>","number"==fb.param[D].type?(Ea+="<td style='text-align:right;height:23px;'>"+Va[D].name+"</td><td><input type='number' style='width:48px;padding-left:3px;margin-left:3px;margin-right:3px;' name='sets.param["+D+"].value' value='"+fb.param[D].value+"'></td><td>",Ea+="(\u7f3a\u7701\u503c:"+Va[D].default,Va[D].min&&(Ea+=", \u6700\u5c0f:"+
Va[D].min),Va[D].min&&(Ea+=", \u6700\u5927:"+Va[D].max),Va[D].script&&(Ea+=", "+Va[D].script),Ea+=")"):Ea+="<td style='text-align:left;height:23px;'>"+Va[D].name+"</td><td><input type='text' style='width:90px;padding-left:3px;padding-right:3px;' name='sets.param["+D+"].value' value="+fb.param[D].value+"></td><td>",Ea+="</td>",Ea+="</tr>",wa++);Ea+="</table>"}var S=fb.colors,xa=360;for(D=I=0;D<S.length;D++)0<=S[D].boundParam&&I++;Ea=0<I?Ea+"<table cellspacing='1' cellpadding='1'><th>\u540d\u79f0</th><th>\u53c2\u6570</th><th>\u989c\u8272</th><th>\u7ebf\u5bbd</th><th>\u7ebf\u578b</th>":
Ea+"<table cellspacing='1' cellpadding='1'><th>\u540d\u79f0</th><th>\u989c\u8272</th><th>\u7ebf\u5bbd</th><th>\u7ebf\u578b</th>";for(D=0;D<S.length;D++){Ea+='<tr><td style="min-width:80px">';Ea+='<input type="checkbox" id="checkLine'+D+'"  name="sets.colors['+D+'].checked"';1==S[D].checked&&(Ea+=" checked");Ea+=">";Ea+='<label for="checkLine'+D+'">&#32'+S[D].name+"&#32&#32</label></td>";if(0<I)if(void 0!=S[D].boundParam&&0<=S[D].boundParam){var Ba="type='number'",Ia="style='width:48px;padding-left:3px;margin-left:4px;margin-right:0px;'";
"string"==Va[S[D].boundParam].type&&(Ba="type='text'",Ia="style='width:86px;padding-left:3px;margin-left:4px;margin-right:0px;'",xa=380);Ea+="<td><input "+Ba+" "+Ia+" name='sets.param["+S[D].boundParam+"].value' value='"+fb.param[S[D].boundParam].value+"'></td>"}else Ea+="<td></td>";Ba=getChartGraphColor(S[D].lineColor,Ra);Ea+='<td><input type="text"  name="sets.colors['+D+'].lineColor" class="xColorPicker" style="width:68px;border:1px solid #ddd;padding-left:3px;padding-right:3px;margin-left:3px;margin-right:3px;height:21px;" value="'+
Ba.slice(1)+'"</input></td>';Ea+='<td><input type="number"  name="sets.colors['+D+'].lineWidth" class="xLineWidthPicker" style="width:32px;padding-left:3px;" value="'+S[D].lineWidth+'"</input></td>';Ea+='<td><input type="text" name="sets.colors['+D+'].lineType" class="xChartLineTypePicker" style="width:60px;padding-left:3px;margin-left:3px;padding-right:3px;" value="'+S[D].lineType+'"</input></td></tr>';wa++}Ea+="</table>";Va=r.formulaName;null==Va&&(Va=r.formulaId,"script:"==Va.substr(0,7)&&(Va=
r.getLineName(0)));return{name:Va,html:Ea,width:xa+(0<I?32:0),height:108+25*wa}};this.resetFormulaPorperty=function(){fb=JSON.parse(JSON.stringify(r.property));a()};var ab=function(){return{sets:fb}};this.setPropertyHTML=function(wa){if(wa&&0<wa.length){wa=wa.replace(/sets/g,ab.name+"().sets");try{eval(wa),a()}catch(Ea){console.log(Ea)}}};var W=function(wa,Ea){var Va=wa[Ea];"("==Va?Va=")":"["==Va?Va="]":"{"==Va&&(Va="}");for(Ea++;Ea<wa.length;){if(wa[Ea]==Va){Ea++;break}if('"'==wa[Ea]||"'"==wa[Ea]||
"`"==wa[Ea]||"("==wa[Ea]||"["==wa[Ea]||"{"==wa[Ea]){if(Ea=W(wa,Ea),Ea>=wa.length)break}else Ea++}return Ea},Ca=function(wa){function Ea(S,xa){for(var Ba=0;Ba<S.length;Ba++){if("("==S[Ba]||'"'==S[Ba]||"'"==S[Ba]||"`"==S[Ba])Ba=W(S,Ba);var Ia=I(S,Ba,xa);if(Ia)return xa=Ca(S.slice(0,Ba)),S=Ca(S.slice(Ba+Ia.length)),[xa,Ia,S]}}function Va(S,xa){for(var Ba,Ia=0,Da=0;Ia<S.length;Ia++){if("("==S[Ia]||'"'==S[Ia]||"'"==S[Ia]||"`"==S[Ia])Ia=W(S,Ia);var lb=I(S,Ia,xa);lb&&(Da=Ca(S.slice(Da,Ia)),void 0==Ba&&(Ba=
[]),Ba[Ba.length]=Da,Ba[Ba.length]=lb,Ia+=lb.length-1,Da=Ia+1)}Ia>Da&&Ba&&(Da=Ca(S.slice(Da)),Ba[Ba.length]=Da);return Ba}function I(S,xa,Ba){if(0<xa)for(var Ia=0;Ia<Ba.length;Ia++)if(S[xa]===Ba[Ia][0]&&(")"==S[xa-1]||" "==S[xa-1]||"0"<=S[xa-1]&&"9">=S[xa-1]||"a"<=S[xa-1]&&"z">=S[xa-1]||"A"<=S[xa-1]&&"Z">=S[xa-1])&&Ba[Ia]===S.slice(xa,xa+Ba[Ia].length).toLowerCase())return Ba[Ia]}var D;wa=wa.trim();"("==wa[0]&&")"==wa[wa.length-1]&&W(wa,0)===wa.length&&(wa=wa.slice(1,wa.length-1));return(D=function(S){var xa,
Ba,Ia=0;for(Ba=0;Ba<S.length;Ba++){if("("==S[Ba]||'"'==S[Ba]||"'"==S[Ba]||"`"==S[Ba])Ba=W(S,Ba);if(","==S[Ba]||")"==S[Ba])void 0==xa&&(xa=[]),Ia=Ca(S.slice(Ia,Ba)),xa[xa.length]=1==Ia.length&&"Array"==Ia[0].constructor.name&&1<Ia[0].length?Ia[0]:Ia,Ia=Ba+1,","==S[Ba]&&(xa[xa.length]=",")}void 0!=xa&&(Ia=Ca(S.slice(Ia,Ba)),xa[xa.length]=1==Ia.length&&"Array"==Ia[0].constructor.name&&1<Ia[0].length?Ia[0]:Ia);return xa}(wa))||(D=function(S){for(var xa=0;xa<S.length;xa++)if("("==S[xa]||'"'==S[xa]||"'"==
S[xa]||"`"==S[xa])xa=W(S,xa);else if(":"==S[xa]){var Ba=S[xa];"="==S[xa+1]&&(Ba+="=");var Ia=Ca(S.slice(0,xa));S=Ca(S.slice(xa+Ba.length));return 1==S.length&&"Array"==S[0].constructor.name&&1<S[0].length?[Ia,Ba,S[0]]:[Ia,Ba,S]}}(wa))||(D=Ea(wa,["||"," or ","&&"," and"]))||(D=Ea(wa,"== != >= <= > < =".split(" ")))||(D=Va(wa,["-","+"]))||(D=Va(wa,["*","/"]))?D:(D=function(S){for(var xa="",Ba,Ia,Da=0;Da<S.length;Da++)if("("==S[Da])if(Ba=Da+1,""!=xa){if("RGB"==xa||"rgb"==xa)return"'"+S.toLowerCase()+
"'";for(Da++;Da<S.length;Da++){if("("==S[Da]||'"'==S[Da]||"'"==S[Da]||"`"==S[Da])Da=W(S,Da);if(")"==S[Da]){Ba=Ca(S.slice(Ba,Da));void 0==Ia&&(Ia=[]);Ia[Ia.length]="Array"==Ba.constructor.name?[xa,Ba]:[xa,[Ba]];for(Da++;Da<S.length;Da++)if(","==S[Da]){Ia[Ia.length]=",";break}else if(" "!=S[Da])break;break}}xa=""}else break;else if("A"<=S[Da]&&"Z">=S[Da]||"a"<=S[Da]&&"z">=S[Da]||"0"<=S[Da]&&"9">=S[Da]||"."==S[Da]||"_"==S[Da])xa+=S[Da];else break;if(void 0!=Ia)return Ia}(wa))?D:wa.trim()},ca=function(wa,
Ea){var Va="";if(void 0!=charDrawFunctionList[Ea])for(var I=1;I<charDrawFunctionList[Ea].parameter.length;I++)for(var D in charDrawFunctionList[Ea].parameter[I]){var S=void 0;var xa=wa;for(var Ba=D,Ia=2;Ia<xa.length&&void 0==S;Ia++)if(""!=xa[Ia]&&","!=xa[Ia]){var Da;if("string"==typeof xa[Ia])var lb=xa[Ia];else for(lb="",Da=0;Da<xa[Ia].length;Da++)lb+=xa[Ia][Da];Da=lb.toLowerCase();switch(Ba){case "color":"#"==Da[0].substr(0,1)?S='"'+Da+'"':"RGB"==xa[Ia][0]&&(S="'"+chartFunction.RGB(xa[Ia][1][0],
xa[Ia][1][2],xa[Ia][1][4])+"'");break;case "bkColor":"bkcolor"==Da.substr(0,7)&&(S=Da.substr(7),S='"#'+S.substr(4,2)+S.substr(2,2)+S.substr(0,2)+'"');break;case "dec":"precis"==Da.substr(0,6)&&(S=parseInt(Da.substr(6,1)));break;case "shift":"shift"==Da.substr(0,5)&&(S=parseInt(Da.substr(5,4)));break;case "lineWidth":"linethick"==Da.substr(0,9)&&(S=parseInt(Da.substr(9,1)));break;case "beginValue":"beginvalue"==Da.substr(0,10)&&(S=Da.substr(11));break;case "align":"align"==Da.substr(0,5)&&(S=parseInt(Da.substr(5,
1)),S=1==S?"'center'":2==S?"'right'":"'left'");break;case "vAlign":"valign"==Da.substr(0,6)&&(S=parseInt(Da.substr(6,1)),S=1==S?"'middle'":2==S?"'bottom'":"'top'");break;case "tipPos":"tippos"==Da.substr(0,6)&&(S=parseInt(Da.substr(6,1)),S=0==S?"'top-left'":1==S?"'top-right'":3==S?"'bottom-left'":"'bottom-right'");break;case "offset":"offset"==Da.substr(0,6)&&(S=parseInt(Da.substr(6)));break;case "fontSize":"fontsize"==Da.substr(0,8)&&(S=parseInt(Da.substr(8)));break;case "fontName":"fontname"==Da.substr(0,
8)&&(S=parseInt(Da.substr(8)),S=1==S?"'Song'":2==S?"'Kai'":3==S?"'Hei'":"'Helvetica Neue'");break;case "format":"format"==Da.substr(0,6)&&(S=Da.substr(6).toUpperCase(),'"'!=S[0]&&"'"!=S[0]&&"`"!=S[0]&&(S='"'+S+'"'));break;case "boundParam":"boundparam"==Da.substr(0,10)&&(S=lb.substr(10).toUpperCase(),'"'!=S[0]&&"'"!=S[0]&&"`"!=S[0]&&(S='"'+S+'"'),S="boundParam="+S)}void 0==S&&void 0!=chartSystemValue[xa[Ia]]&&chartSystemValue[xa[Ia]][2]==Ba&&(S=xa[Ia])}void 0!=S?(xa[Ia]="",xa=S):xa=void 0!=chartSystemValue[S]&&
chartSystemValue[S][2]==Ba?chartSystemValue[S][1]:void 0;Va=void 0!=xa?Va+(","+xa):Va+(","+charDrawFunctionList[Ea].parameter[I][D])}return Va},ya=function(wa){wa=wa.toLowerCase();if("color"==wa.substr(0,5)&&11==wa.length){var Ea=wa.substr(5,1);if("0"<=Ea&&"9">=Ea||"A"<=Ea&&"F">=Ea||"a"<=Ea&&"f">=Ea)return wa="'#"+wa.substr(9,2)+wa.substr(7,2)+wa.substr(5,2)+"'"}for(var Va in charDrawFunctionList)if(wa==Va.toLowerCase())return Va;for(var I in chartSystemValue)if(wa==I.toLowerCase())return I},bb=function(wa){if("object"!=
typeof wa){if("string"==typeof wa){var Ea=ya(wa);if(void 0!=Ea)return Ea}}else for(var Va=0;Va<wa.length;Va++)"string"==typeof wa[Va]&&(wa[Va]=wa[Va].trim()),Ea=bb(wa[Va]),void 0!=Ea&&(wa[Va]=Ea)},ib=function(wa){bb(wa);var Ea=wa[0][0];if("input"==wa[0]){wa=wa[2];var Va=wa[0][0]+"="+wa[0][1][0];for(Ea=2;Ea<wa.length;Ea+=2)Va+=","+wa[Ea][0]+"="+wa[Ea][1][0];Va="var "+Va;for(Ea=0;Ea<wa.length;Ea+=2){var I=r.property.param.length;r.property.param[I]={name:wa[Ea][0],value:wa[Ea][1][0],default:wa[Ea][1][0],
min:wa[Ea][1][2],max:wa[Ea][1][4],step:wa[Ea][1][6],script:wa[Ea][1][8]};var D=fb.param.length;fb.param[D]={name:wa[Ea][0],value:wa[Ea][1][0],default:wa[Ea][1][0],min:wa[Ea][1][2],max:wa[Ea][1][4],step:wa[Ea][1][6],script:wa[Ea][1][8]};"string"!=typeof fb.param[D].value||"'"!=fb.param[D].value[0]&&'"'!=fb.param[D].value[0]&&"`"!=fb.param[D].value[0]?(fb.param[D].type="number",r.property.param[I].type="number"):(fb.param[D].type="string",fb.param[D].value=fb.param[D].value.slice(1,-1),r.property.param[I].type=
"string",r.property.param[I].value=fb.param[D].value)}}else(I=k(wa[0]),Va=3===I&&1<wa.length&&","==wa[1]?gb(wa[0]):gb(wa),":"==wa[1])?(Ea=", color"+(Ab%8+1),Ab++,Va+=";"+g(wa[0],wa[0],Ea)):3===I&&":"==wa[0][1]?(Ea=ca(wa,"drawLine"),Ab++,Va+=";"+g(wa[0][0],wa[0][0],Ea)):void 0!=charDrawFunctionList[Ea]?0<charDrawFunctionList[Ea].parameter[0]&&0!=charDrawFunctionList[Ea].parameter[0]&&(I=Va.indexOf("("),0<I&&(D=charDrawFunctionList[Ea].class,2<wa.length?(Ea=ca(wa,Ea),Va="addDraw(new "+D+Va.substr(I,
Va.length-I-1)+Ea+"))"):Va="addDraw(new "+D+Va.substr(I)+")")):2!=I||void 0!=wa[1]&&","!=wa[1]?1==I&&"query"==wa[2][0][0]?(null==za&&(za=[]),W(wa[2],6),Ea=za.length,za[Ea]={sql:wa[2][0][1][0].slice(1,-1)},wa[2][0][1]?za[Ea].isDifferent=!0:za[Ea].isDifferent&&(za[Ea].isDifferent=null),wa[2][0][1][4]?za[Ea].server=wa[2][0][1][2].slice(1,-1):za[Ea].server&&(za[Ea].server=null)):"="==wa[1]&&wa[2]&&wa[2][0]&&null!=charDrawFunctionList[wa[2][0][0]]&&(wa=ib(wa[2]),Ea=Va.indexOf("="),Va=Va.substr(0,Ea+1)+
wa):void 0==wa[0][1]?(Ab++,Va=g(wa[0],"color",Ab)):(Ea=ca(wa,"drawLine"),Va=g(wa[0],wa[0],Ea));return Va},gb=function(wa){if("object"!=typeof wa)return wa;var Ea={$:q.name},Va;if(2==wa.length)var I=wa[0]+"("+gb(wa[1])+")";else if("string"!=typeof wa[0]||":"!=wa[1]&&"="!=wa[1]&&":="!=wa[1]){var D=0;for(Va=0;Va<wa.length;Va++)if("+"===wa[Va]||"-"===wa[Va]||"*"===wa[Va]||"/"===wa[Va]||"!="===wa[Va]||"=="===wa[Va]||">"===wa[Va]||">="===wa[Va]||"<"===wa[Va]||"<="===wa[Va]||"&&"===wa[Va]||"||"===wa[Va]||
"and"==wa[Va]||"or"==wa[Va]){D=2;break}else if(","==wa[Va]){D=0;break}switch(D){case 0:I="";for(Va=0;Va<wa.length;Va++)I+=gb(wa[Va]),","==wa[Va]&&(I+=" ");break;case 1:I=gb(wa[0]);break;case 2:I=gb(wa[0]);var S;for(Va=1;Va<wa.length;Va+=2)I=S=Ea.$+"("+I+", '"+wa[Va]+"', "+gb(wa[Va+1])+")";I=S}}else I="var "+wa[0]+"="+gb(wa[2]);return I},Bb=function(wa){C[C.length]=wa;if("formula_drawLine"==wa.constructor.name&&r.property.colors){var Ea=r.property.colors.length;r.property.colors[Ea]={name:wa.name,
checked:wa.checked,lineColor:wa.lineColor,lineWidth:wa.lineWidth,lineType:wa.lineType,script:wa.script};if(void 0!=wa.boundParam)for(var Va=0;Va<r.property.param.length;Va++)if(wa.boundParam==r.property.param[Va].name){r.property.param[Va].isBoundParam=!0;r.property.colors[Ea].boundParam=Va;break}}return wa};this.setGraphicRect=function(wa,Ea,Va){Ra=Va;Gb=1==Ra.graphTitle.show?Ra.graphTitle.height:0;ja.left=wa.left;ja.top=wa.top+Gb;ja.width=wa.width;ja.height=wa.height-Gb;da=Ea};var Hb=function(wa,
Ea){if(void 0!=wa)for(var Va=0;Va<wa.length;Va++)if(wa[Va][0].toLowerCase()==Ea.toLowerCase())return Va;return-1};this.getLocateValueAtIndex=function(wa){for(var Ea=0;Ea<C.length;Ea++)if(C[Ea]&&C[Ea].getLocateValueAtIndex)return C[Ea].getLocateValueAtIndex(wa)};var nb=function(wa){return c&&wa?c[wa]:null},Pb=function(wa,Ea,Va,I,D,S){nb();r.property.colors=[];C=[];J=G=B=L=ba=null;O=wa[0].table;if(O.data)for(Da=0;5>Da;Da++){var xa=Hb(O.field,K[Da]);0<=xa&&(Ea&&Ea[0]&&Ea[0][xa]?0==Da?G=Ea[0][xa]:1==
Da?B=Ea[0][xa]:2==Da?L=Ea[0][xa]:3==Da?ba=Ea[0][xa]:4==Da&&(J=Ea[0][xa]):0==Da?G=O.data[xa]:1==Da?B=O.data[xa]:2==Da?L=O.data[xa]:3==Da?ba=O.data[xa]:4==Da&&(J=O.data[xa]))}1==z&&(H=[]);E="";N=[];for(X=xa=0;X<wa.length;X++)for(pa in wa[X])if("table"==pa)if(0==wa[X].isEnable)E+="var "+wa[X].table.info.name+"=null;";else{O=wa[X][pa];if((Z=wa[X][pa].field)&&O.data){var Ba=null;Y="";if(0<X){Y=wa[X].table.info.name+".";if("."==Y)continue;E+="var "+wa[X].table.info.name+"= {};"}else wa[X].table.info.name&&
""!=wa[X].table.info.name&&(Ba=wa[X].table.info.name+".",E+="var "+wa[X].table.info.name+"= {};");for(Da=0;Da<Z.length;Da++){for(aa=0;aa<N.length&&Z[Da][0]!=N[aa];aa++);aa==N.length&&(0==X&&(N[xa]=Z[Da][0]),xa++,Ea&&Ea[X]&&Ea[X][Da]?Y?E+=Y+Z[Da][0]+" = arguments[1]["+X+"]["+Da+"];\n":(E+="var "+Y+Z[Da][0]+" = arguments[1]["+X+"]["+Da+"];\n",E+=Y+Z[Da][0]+'.type = "'+Z[Da][1]+'";\n',E+=Ba+Z[Da][0]+" = arguments[1]["+X+"]["+Da+"];\n",H&&(H[H.length]=Z[Da][0])):(Aa=Hb(Z,Z[Da][0]),0<=Aa&&null!=O.data[Aa]?
(Q=Hb(wa[X].table.field,Z[Da][0]),Y?(E+=Y+Z[Da][0]+" = arguments[0]["+X+"].table.data["+Q+"];\n",E+=Y+Z[Da][0]+'.type = "'+Z[Da][1]+'";\n'):(E+="var "+Y+Z[Da][0]+" = arguments[0]["+X+"].table.data["+Q+"];\n",E+=Y+Z[Da][0]+'.type = "'+Z[Da][1]+'";\n',E+=Ba+Z[Da][0]+" = "+Y+Z[Da][0]+";\n",H&&(H[H.length]=Z[Da][0]))):Y?E+=Y+Z[Da][0]+" = null;\r":(E+="var "+Y+Z[Da][0]+" = null;\r",E+=Ba+Z[Da][0]+" = null;\r")))}}if(O.exchTime&&O.exchTime.table&&O.exchTime.table.data&&(oa=[O.exchTime.table.data[0]],Z))for(Da=
0;Da<Z.length;Da++){for(aa=0;aa<N.length&&Z[Da][0]!=N[aa];aa++);if(aa==N.length)for(N[xa]=Z[Da][0],xa++,E+="var "+Z[Da][0]+" = [",H&&(H[H.length]=Z[Da][0]),Ba=0;Ba<oa.length;Ba++){if("object"==typeof oa[Ba][Da]){T="[";for(ia=0;ia<oa[Ba][Da].length;ia++){T+="[";for(fa=0;fa<oa[Ba][Da][ia].length;fa++)T="string"==typeof oa[Ba][Da][ia][fa]?T+("'"+oa[Ba][Da][ia][fa]+"'"):T+(""+oa[Ba][Da][ia][fa]),fa<oa[Ba][Da][ia].length-1&&(T+=",");T+="]";ia<oa[Ba][Da].length-1&&(T+=",")}T+="]"}else T=oa[Ba][Da];E=Ba<
oa.length-1?E+(T+","):E+(T+"];")}}for(var Ia in O)if("info"!=Ia&&"data"!=Ia&&"field"!=Ia&&"flags"!=Ia&&"dataStatus"!=Ia&&"exchTime"!=Ia&&"adjust"!=Ia&&"last"!=Ia&&O[Ia]&&O[Ia].table&&O[Ia].table.info&&O[Ia].table.field&&O[Ia].table.data)for(O=O[Ia].table,Z=O.field,Y=Ia+".",E+="var "+Ia+"={};\r",Da=0;Da<Z.length;Da++){for(aa=0;aa<N.length&&Z[Da][0]!=N[aa];aa++);aa==N.length&&(xa++,Ea&&Ea[X]&&Ea[X][Da]?(E+=Y+Z[Da][0]+" = arguments[0]["+X+"].table."+Ia+".table.data["+Da+"];\n",H&&(H[H.length]=Y+Z[Da][0])):
(Aa=Hb(Z,Z[Da][0]),0<=Aa&&null!=O.data[Aa]?(Q=Hb(wa[X].table[Ia].table.field,Z[Da][0]),E+=Y+Z[Da][0]+" = arguments[0]["+X+"].table."+Ia+".table.data["+Q+"];\n",H&&(H[H.length]=Y+Z[Da][0])):E+=Y+Z[Da][0]+" = null;\r"))}}else if("update"!=pa&&wa[X][pa]&&(O=wa[X][pa].table)&&(Z=O.field)&&O.data)for(E+="var "+pa+"={};\r",Da=0;Da<Z.length;Da++){ta=pa+"."+Z[Da][0];for(aa=0;aa<N.length&&ta!=N[aa];aa++);aa==N.length&&(N[xa]=ta,xa++,Aa=Hb(Z,Z[Da][0]),0<=Aa&&null!=O.data[Aa]&&(E+=ta+" = arguments[0]["+X+"]."+
pa+".table.data[getFieldIndex(arguments[0]["+X+"]."+pa+'.table.field, "'+Z[Da][0]+'")];\n',H&&(H[H.length]=ta)))}try{eval(E)}catch(lb){console.log("data err:"+lb+";\n"+E);return}E="";for(sa in chartSystemValue)E+="var "+sa+" = '"+chartSystemValue[sa][1]+"';",H&&chartSystemValue[sa][1]&&"#"!=chartSystemValue[sa][1][0]&&"string"==typeof chartSystemValue[sa][1]&&(H[H.length]=chartSystemValue[sa][1]);for(Da=0;Da<fb.param.length;Da++)E=0==Da?E+"var ":E+", ",E="string"==fb.param[Da].type?E+(fb.param[Da].name+
"='"+fb.param[Da].value+"'"):E+(fb.param[Da].name+"="+fb.param[Da].value),H&&(H[H.length]=fb.param[Da].name);E+=";";eval(E);if(z){z=!1;E=r.scripts;E=E.replace(/\n/g,"");E=E.replace(/\r/g,"");wa=[];for(var Da=0;Da<E.length;Da++)if('"'==E[Da]||"'"==E[Da]||"`"==E[Da])Ea=Da,Da=skipFlag(E,Da),Ba=wa.length,wa[Ba]=E.substr(Ea,Da-Ea+1),E=E.replace(wa[Ba],"strList_"+Ba),Da=-1;ra={setXAxis:ma.name,setFormulaName:fc.name,setYSaleType:p.name,setyAxisMiddleValue:f.name,setOption:A.name,getVariable:nb.name,query:v.name,
segmentIndex_:"arguments[3]",Time:"arguments[4]",Date:"arguments[5]",$hold:q.name,addDraw:Bb.name};ra=Object.assign({},chartFunction.getReflectMap(),ra);E=E.replace(/\./gi,"@@@dot");E=ra.makeFormulaScript+'("'+E+'", '+JSON.stringify(H)+","+JSON.stringify(ra)+");";Ba=[];for(Da=0;;Da++)if(Ea=E.indexOf("{{ "),0<=Ea)xa=E.indexOf(" }}"),Ba[Da]=E.substr(Ea+3,xa-Ea-3),E=E.substr(0,Ea)+"||| @"+Da+"@ |||"+E.substr(xa+3);else break;r.scripts=eval(E);for(Da=0;Da<Ba.length;Da++)Ba[Da]=Ba[Da].replace(/\bTime\b/g,
"arguments[4]"),Ba[Da]=Ba[Da].replace(/\bDate\b/ig,"arguments[5]"),Ba[Da]=Ba[Da].replace(/\bsetXAxis\b/ig,ma.name),r.scripts=r.scripts.replace("||| @"+Da+"@ |||",Ba[Da]);for(Da=0;Da<wa.length;Da++)r.scripts=r.scripts.replace("strList_"+Da,wa[Da]);r.scripts=r.scripts.replace(/@@@dot/gi,".")}try{eval(r.scripts)}catch(lb){console.log(Va,I,D,S);return}oa=O=null;null==J&&(J=Oa);if(r.property&&r.property.colors&&fb.colors&&fb.colors.length==r.property.colors.length)for(Da=0;Da<fb.colors.length;Da++)if(fb.colors[Da].name!=
r.property.colors[Da].name){$a=!1;break}if(r.property&&r.property.colors&&(0==$a||fb.colors&&fb.colors.length!=r.property.colors.length)){fb.colors=[];for(Da=0;Da<r.property.colors.length;Da++)fb.colors[Da]=r.property.colors[Da];$a=!0}};this.run=function(wa,Ea){hb=null;if(null==wa||null==wa[0]||null==wa[0].table||null==wa[0].table.data)F=V=null;else{for(var Va=[],I=0;I<wa.length;I++)wa[I]&&wa[I].engineData&&(Va[I]=wa[I].engineData);V=wa[0].table.data[Hb(wa[0].table.field,"Time")];F=wa[0].table.data[Hb(wa[0].table.field,
"Date")];Pb(wa,Va,Ea,wa[0].table.last,V,F)}};this.getLineName=function(wa){if(C&&0<=wa&&M<C.length)return C[wa].getName()};var bc=function(wa){if("percentage"==Ub||"isometric"==Ub){var Ea=Db+cb-1;G&&Ea>=G.length?Ea=G.length-1:ba&&Ea>=ba.length?Ea=ba.length-1:B&&Ea>=ba.length?Ea=B.length-1:L&&Ea>=ba.length&&(Ea=L.length-1);for(var Va=!1,I=0;I<C.length;I++)if("formula_drawKLine"==C[I].constructor.name){Va=!0;break}if(0==Va)for(I=0;I<C.length;I++)if("formula_drawLine"==C[I].constructor.name)return Va=
C[I].getValue(),Tb(Ub,Fb,Db,Ea,U.baseDate,J,Va,Va,Va,Va,wa);return Tb(Ub,Fb,Db,Ea,U.baseDate,J,G,B,L,ba,wa)}},Tb=function(wa,Ea,Va,I,D,S,xa,Ba,Ia,Da,lb){function wb(yb,xb){if(null!=yb){if(null!=yb[xb])return yb[xb];for(var ob=xb-1;0<=ob;ob--)if(null!=yb[ob])return yb[ob];for(ob=xb+1;ob<yb.length;ob++)if(null!=yb[ob])return yb[ob]}}var Fa={},Nb=xa?xa:Ba?Ba:Ia?Ia:Da;if("percentage"==wa){0<Na&&(Fa.baseIndex=lb);switch(Ea){case "winEnd":0<Na?Fa.baseValue=wb(xa,lb):(Fa.baseValue=wb(xa,I),0==Na&&(Fa.baseIndex=
I,S&&(Fa.baseDate=S[I])));break;case "winHigh":if(0<Na)Fa.baseValue=wb(Ba,lb);else for(Fa.baseValue=Ba[Va],wa=Db+1;wa<=I;wa++)null!=Ba[wa]&&Fa.baseValue<Ba[wa]&&(Fa.baseValue=Ba[wa],0==Na&&(Fa.baseIndex=wa,S&&(Fa.baseDate=S[wa])));break;case "winLow":if(0<Na)Fa.baseValue=wb(Ia,lb);else for(Fa.baseValue=Ia[Va],wa=Db+1;wa<=I;wa++)null!=Ia[wa]&&Fa.baseValue>Ia[wa]&&(Fa.baseValue=Ia[wa],0==Na&&(Fa.baseIndex=wa,S&&(Fa.baseDate=S[wa])));break;case "last":null==Da&&(Da=Nb);null!=Da?(Fa.baseValue=wb(Da,Da.length),
0==Na&&(Fa.baseIndex=xa.length-1,S&&(Fa.baseDate=S[Da.length-1]))):Fa.baseValue=0;break;case "fixedDate":if(0<Na)wb(Da,lb);else for(wa=S.length-1;0<=wa;wa--)if(0==wa||S[wa]<=D){Fa.baseValue=wb(Da,wa);0==Na&&(Fa.baseIndex=wa,S&&(Fa.baseDate=S[wa]));break}break;default:Fa.baseValue=null!=hb?hb:wb(xa?xa:Nb,Va),0==Na&&(Fa.baseIndex=Va,S&&(Fa.baseDate=S[Va]))}return Fa}if("isometric"==wa)return Fa.baseValue=wb(xa,xa.length-1),0==Na&&(Fa.baseIndex=xa.length-1,S&&(Fa.baseDate=S[xa.length-1])),Fa},Xb=function(){if(void 0!=
U.max&&void 0!=U.min)if(null!=hb)ea=U.max,ha=(U.max-hb)/Math.round((ja.height-2)/2/36),U.scaleDec=Ma;else{var wa=Math.pow(10,4),Ea=ja.height/4;36<Ea?Ea=36:20>Ea&&(Ea=20);var Va=0;switch(Ub){case "equal":case "golden":case "percentage":case "isometric":ea=U.dataMax;ha=(U.dataMax-U.dataMin)/((ja.height-U.top-U.bottom)/Ea);U.scaleDec=2;if("percentage"==Ub||"isometric"==Ub){var I=bc();U.baseValue=I.baseValue;U.baseIndex=I.baseIndex;U.baseDate=I.baseDate;ha=(U.dataMax-U.dataMin)/U.dataMin/((ja.height-
U.top-U.bottom)/Ea);for(I=0;6>I;I++)if(Ea=ha*Math.pow(10,I),1<=Ea){ha=Math.round(Ea)/Math.pow(10,I);.1<ha&&(ha=.1);break}}break;default:for(I=1;20>Va;I*=10,Va++){ha=Math.round((U.max-U.min)/((ja.height-2)/Ea)*wa/I);ea=Math.floor(U.max*wa/I);if(1>=ha)ha=1;else if(2>=ha)ha=2,ea%2&&ea--;else if(5>=ha)ha=5,ea=10*Math.floor(ea/10)+ha;else continue;ea>U.max*wa/I&&(ea-=ha);ea=ea*I/wa;ha=ha*I/wa;break}}}else ha=void 0};this.calcMaxMin=function(wa,Ea,Va,I,D,S){var xa,Ba,Ia=0,Da=0;Db=Ea;cb=Va;la=I;Na=D;Ra.scale&&
0==la?(Sb=Ra.scale.scaleMode,Ub=Ra.scale.scaleType,Ob=Ra.scale.scaleReverse,Fb=Ra.scale.scaleBasePosition):(Sb="normal",Ub="default",Ob=!1,Fb="last");null!=hb&&(xa=Ba=hb);if(0<fb.colors.length)for(Ea=Va=0;Ea<C.length;Ea++)"formula_drawLine"==C[Ea].constructor.name?(C[Ea].checked=fb.colors[Va].checked,C[Ea].lineColor=fb.colors[Va].lineColor,C[Ea].lineWidth=fb.colors[Va].lineWidth,C[Ea].lineType=fb.colors[Va].lineType,Va++):C[Ea].checked=!0;for(Ea=0;Ea<C.length;Ea++)0!=C[Ea].checked&&(C[Ea].setGraphicRect&&
C[Ea].setGraphicRect(wa),C[Ea].calcMaxMin&&(Va=C[Ea].calcMaxMin(Db,cb)))&&(void 0==xa?(xa=Va.max,Ba=Va.min):(null!=Va.max&&xa<Va.max&&(xa=Va.max),null!=Va.min&&Ba>Va.min&&(Ba=Va.min)),null==Va.top&&(Va.top=0),null==Va.bottom&&(Va.bottom=0),null!=Va.top&&Va.top>Ia&&(Ia=Va.top),null!=Va.bottom&&Va.bottom>Da&&(Da=Va.bottom));Ya&&(Ya.paddingTop&&0<Ya.paddingTop&&(Ia+=Ya.paddingTop),Ya.paddingBottom&&0<Ya.paddingBottom&&(Da+=Ya.paddingBottom));null!=hb&&(Ba=xa-hb>hb-Ba?xa-hb:hb-Ba,0==Ba&&(Ba=Math.round(hb)/
100),xa=hb+Ba,Ba=hb-Ba,xa-Ba&&(wa=(xa-hb)/Math.round(ja.height/2/36),1E-4>wa&&(wa=1E-4,xa=hb+wa*Math.round(ja.height/2/36),Ba=hb-wa*Math.round(ja.height/2/36))));xa={max:xa,min:Ba,top:Ia,bottom:Da};"percentage"==Ub&&(S=bc(S))&&(xa.baseDate=S.baseDate,xa.baseValue=S.baseValue,xa.baseIndex=S.baseIndex,null!=xa.baseValue&&0!=xa.baseValue&&(xa.baseMax=100*(xa.max-xa.baseValue)/xa.baseValue,xa.baseMin=100*(xa.min-xa.baseValue)/xa.baseValue));xa.yScaleType=zb;return xa};this.setMaxMin=function(wa,Ea,Va,
I,D,S,xa,Ba,Ia,Da){U.baseIndex=D;U.baseValue=S;U.baseMax=xa;U.baseMin=Ba;null!=D&&(0==Na||null==zb||"absolute"!=zb?(wa=S+S*xa/100,Ea=S+S*Ba/100):(wa=Ia,Ea=Da));null!=hb&&rb&&(null==wa||wa<hb*(1+rb/100)||Ea>hb*(1-rb/100))&&(wa=hb*(1+rb/100),Ea=hb*(1-rb/100));U.dataMax=wa;U.dataMin=Ea;U.max=wa;U.min=Ea;U.top=Va;U.bottom=I;D=ja.height-2;U.top&&0<U.top&&(D-=Va);U.bottom&&0<U.bottom&&(D-=I);Wa=D/(wa-Ea);switch(Sb){case "log":na=D/(Math.log(wa)-Math.log(Ea));void 0!=U.top&&(U.max+=r.getValueFromY(ja.top)-
r.getValueFromY(ja.top+20));void 0!=U.bottom&&(U.min-=r.getValueFromY(ja.top+ja.height-20)-r.getValueFromY(ja.top+ja.height));break;default:null==hb&&(null!=U.top&&(U.max+=(U.top+1)/Wa),null!=U.bottom&&(U.min-=(U.bottom+1)/Wa))}};this.getGraphInfo=function(){return U};this.getYFromValue=function(wa){switch(Sb){case "log":wa=1==Ob?ja.top+ja.height-1-(Math.log(U.max)-Math.log(wa))*na:ja.top+1+(Math.log(U.max)-Math.log(wa))*na;break;default:wa=1==Ob?ja.top+ja.height-1-(U.max-wa)*Wa:ja.top+1+(U.max-wa)*
Wa}return Math.round(wa)};this.getValueFromY=function(wa){switch(Sb){case "log":wa=1==Ob?Math.exp(Math.log(U.max)-(ja.top+ja.height+1-wa)/na):Math.exp(Math.log(U.max)-(wa-(ja.top+1))/na);break;default:wa=1==Ob?U.max-(ja.top+ja.height+1-wa)/Wa:U.max-(wa-(ja.top+1))/Wa}return wa};this.getValueStringFromY=function(wa,Ea){wa=r.getValueFromY(wa);if(1==Ea&&null!=hb)return Ea=toChartValueString(100*(wa-hb)/hb,2)+"%";Ea=null!=hb?toChartValueString(wa,Ma):getValueFormatString(wa,"f2","");for(var Va=0;Va<C.length;Va++)if("formula_drawLine"==
C[Va].constructor.name&&1==C[Va].checked){C[Va].format&&(Ea=getValueFormatString(wa,"f2",C[Va].format));break}return Ea};this.getClosestValueFromYAtIndex=function(wa,Ea,Va){for(var I=0;I<C.length;I++)if(C[I].getClosestValueAtIndex){var D=C[I].getClosestValueAtIndex(wa,Ea,Va,r.getYFromValue);if(null!=D)return D}return null};this.drawYScale=function(wa,Ea,Va){Xb();if(void 0!=ha){var I=Ub;if(null!=hb&&1==Ea){wa.beginPath();var D=parseLineSet(Ra.scale.middleLine,2);wa.strokeStyle=D.color;wa.lineWidth=
D.width;wa.setLineDash(D.dash);var S=r.getYFromValue(hb);wa.moveTo(ja.left,S);wa.lineTo(ja.left+ja.width,S);wa.stroke();wa.closePath();wa.setLineDash([0]);wa.lineWidth=1;I=""}wa.save();wa.beginPath();Va=getFontSizeWithFont(Ra.scale.left.fontSize,Ra.scale.left.fontFamily);var xa=getFontSizeWithFont(Ra.scale.right.fontSize,Ra.scale.right.fontFamily);wa.textBaseline="middle";switch(I){case "golden":var Ba=[0,.191,.382,.5,.618,.809,1];for(I=0;I<Ba.length;I++){var Ia=U.dataMin+Ba[I]*(U.dataMax-U.dataMin);
S=r.getYFromValue(Ia);D=2;if(1==Ea){wa.moveTo(ja.left+1,S);wa.lineTo(ja.left+ja.width,S);wa.textAlign="right";wa.font=Va;var Da=toChartValueString(Ia,D);wa.fillText(Da,ja.left-4,S)}2==Ea&&(wa.textAlign="left",wa.font=xa,wa.fillText(Ba[I],ja.left+ja.width+4,S))}break;case "percentage":case "isometric":if(null==hb&&U.baseValue){for(I=-50;50>I;I++)if(Ia=U.baseValue+U.baseValue*ha*I,Ia>=U.min&&Ia<=U.max&&(S=r.getYFromValue(Ia),D=Ma,void 0==Da||20<Math.abs(S-Da)))Ra.scale.left.show&&1==Ea&&(Da=toChartValueString(Ia,
D),wa.font=Va,"right"==Ra.scale.left.align?(wa.textAlign="right",wa.fillText(Da,ja.left-4,S)):(wa.textAlign="left",wa.fillText(Da,ja.left+4,S))),Ra.scale.right.show&&2==Ea&&(wa.font=xa,Ia=100*(Ia-U.baseValue)/U.baseValue,Ia=.001>ha?Ia.toFixed(2):.01>ha?Ia.toFixed(1):Ia.toFixed(0),"left"==Ra.scale.right.align?(wa.textAlign="left",wa.fillText(Ia+"%",ja.left+ja.width+8,S)):(wa.textAlign="right",wa.fillText(Ia+"%",ja.left+ja.width-3,S))),Da=S;break}default:for(I=0;100>I;I++)if(Ia=ea-ha*I,S=r.getYFromValue(Ia),
0!=Ia||0!=U.dataMin){if(S<ja.top||S>ja.top+ja.height)break;if(!(null!=Jb&&Cb&&S<ja.top+20))if(void 0!=U.scaleDec?D=U.scaleDec:(D=Math.round(1E4*Ia),null!=Jb&&Cb&&(D/=Jb),D=0==D%1E6?0:0==D%1E4?0:0==D%1E3?1:0==D%100?2:0==D%10?3:4),void 0!=U.scaleDec||isNaN(ha)||0==ha%1||(D=0,-1<(""+ha).indexOf(".")&&(D=(""+ha).split(".")[1].length),D=4<D?4:D),null!=hb&&(wa.fillStyle=Ia>hb?getChartGraphColor("colorUp",Ra):Ia<hb?getChartGraphColor("colorDown",Ra):getChartGraphColor("colorHold",Ra)),1==Ra.graphTitle.show&&
S<ja.top+parseInt(xa)/2)parseInt(xa);else{Da=null!=hb?toChartValueString(Ia,D):null!=Jb&&Cb?"%"==Cb||"\u767e\u5206\u6bd4"==Cb?getValueFormatString(Ia,"f0",null,null,{unit:Jb})+"%":getValueFormatString(Ia,"f"+D,null,null,{unit:Jb}):getValueFormatString(Ia,"f"+D,"%."+D);for(Ba=0;Ba<C.length;Ba++)if("formula_drawLine"==C[Ba].constructor.name&&1==C[Ba].checked){C[Ba].format&&(Da="i",Ba=C[Ba].format,0<=D?Da="f"+D:Ba+="%.0%5K",Da=getValueFormatString(Ia,Da,Ba));break}1==Ea&&S>ja.top+2&&S<ja.top+ja.height-
2&&hb!=Ia&&(wa.beginPath(),D=parseLineSet(Ra.scale.yLine),wa.strokeStyle=D.color,wa.setLineDash(D.dash),wa.moveTo(ja.left+1,S),wa.lineTo(ja.left+ja.width,S),wa.stroke(),wa.closePath(),wa.setLineDash([]));1==Ra.scale.left.show&&1==Ea&&(wa.textAlign=Ra.scale.left.align,wa.font=Va,D=S,D>ja.top+ja.height-parseInt(Va)+2&&(D=ja.top+ja.height-parseInt(Va)+2),null==hb&&(wa.fillStyle=Ra.scale.left.textColor),"left"==Ra.scale.left.align?wa.fillText(Da,ja.left+3,D+Ra.scale.left.yOffset):wa.fillText(Da,ja.left-
8,D+Ra.scale.left.yOffset));1==Ra.scale.right.show&&2==Ea&&(null!=hb&&hb&&(Da=toChartValueString(100*Math.abs(Ia-hb)/hb,2)+"%"),wa.textAlign=Ra.scale.right.align,wa.font=xa,null==hb&&(wa.fillStyle=Ra.scale.right.textColor),S>ja.top+ja.height-parseInt(xa)+2&&(S=ja.top+ja.height-parseInt(xa)+2),"left"==Ra.scale.right.align?wa.fillText(Da,ja.left+ja.width+8,S+Ra.scale.right.yOffset):wa.fillText(Da,ja.left+ja.width-3,S+Ra.scale.right.yOffset),null!=hb&&(wa.fillStyle=Ra.scale.right.textColor))}}}"log"==
Sb&&(wa.textBaseline="bottom",1==Ra.scale.left.show&&1==Ea&&(wa.textAlign="left",wa.fillText("log",da.left+4,ja.top+ja.height)),1==Ra.scale.right.show&&2==Ea&&(wa.textAlign="right",wa.fillText("log",da.left+da.width-4,ja.top+ja.height-4)));null!=Jb&&null!=Cb&&"%"!=Cb&&"\u767e\u5206\u6bd4"!=Cb&&(wa.textBaseline="top",1==Ra.scale.left.show&&1==Ea&&(wa.textAlign="right",wa.fillText(Cb,ja.left-6,ja.top+1)),1==Ra.scale.right.show&&2==Ea&&(wa.textAlign="left",wa.fillText(Cb,ja.left+ja.width+6,ja.top+1)));
wa.restore()}};this.getXAxis=function(){return Oa};this.getXAxisName=function(){return Pa};this.onMouseMove=function(wa,Ea){for(var Va=0;Va<C.length;Va++)if(C[Va].onMouseMove&&C[Va].onMouseMove(wa,Ea,r.getYFromValue))return!0};this.draw=function(wa,Ea,Va,I){if(0<fb.colors.length)for(var D=0,S=0;S<C.length;S++)"formula_drawLine"==C[S].constructor.name&&(C[S].checked=fb.colors[D].checked,C[S].lineColor=fb.colors[D].lineColor,C[S].lineWidth=fb.colors[D].lineWidth,C[S].lineType=fb.colors[D].lineType,
D++);Xb();if(void 0!=ha)for(S=0;S<C.length;S++)C[S].draw(wa,Ea,ja,Ra,Va,r.getYFromValue,I)};this.getTip=function(wa,Ea,Va){for(var I=0;I<C.length;I++)if(C[I].getTip){var D=C[I].getTip(wa,Ea,Va);if(D)return D}};this.drawValuesAtIndex=function(wa,Ea,Va,I,D){if(null==Ra)return U.valueAtIndexWidth=0,{title:"",width:0,titleWidth:0};U.valueAtIndexX=Va;var S=ja.left+1,xa=ja.width;"inGraph"!=Ra.graphTitle.position&&(1==Ra.scale.left.show&&(S+=Ra.scale.left.width),1==Ra.scale.right.show&&(xa+=Ra.scale.right.width));
var Ba=ja.top-Gb+.5;""!=Ra.graph.border.top&&(wa.beginPath(),wa.moveTo(S,Ba-.5),wa.lineTo(S+xa-1,Ba-.5),wa.strokeStyle=Ra.graph.border.top,wa.stroke(),wa.closePath());wa.save();0==Na&&(wa.fillStyle=Ra.graphTitle.backgroundColor,wa.fillRect(S-.5,Ba,xa-1,Gb));wa.font=getFontSizeWithFont(Ra.graphTitle.fontSize,Ra.graphTitle.fontFamily);xa=12;Ra.graphTitle.fontSize&&""!=Ra.graphTitle.fontSize&&(xa=parseInt(Ra.graphTitle.fontSize));wa.textBaseline="middle";wa.textAlign="left";Ba=6;var Ia=r.formulaName;
null==Ia&&(Ia=r.formulaId,"script:"==Ia.substr(0,7)&&(Ia=r.getLineName(0)));var Da=wa.measureText(Ia).width;1==I&&(Da+=16,Ia="",Ba+=Da);var lb=0;for(I=0;I<fb.param.length;I++)1!=r.property.param[I].isBoundParam&&(Ia=0==lb?Ia+("("+fb.param[I].value):Ia+(","+fb.param[I].value),lb++);0<lb&&(Ia+=")");wa.fillStyle=Ra.graphTitle.textColor;var wb=wa.measureText(Ia);if(Ba+Va+wb.width>=D)return{title:r.formulaName,width:Ba,titleWidth:0};lb=ja.top-Gb/2;wa.fillText(Ia,S+Ba+Va,lb);Ba+=wb.width+8;for(I=0;I<C.length;I++)if("formula_drawLine"==
C[I].constructor.name&&1==C[I].checked&&(wb=C[I].getName(),Ia=C[I].getValueAtIndex(Ea),void 0!=Ia)){var Fa=null!=Ia.dec?getValueFormatString(Ia.value,"f"+Ia.dec,C[I].format):getValueFormatString(Ia.value,"f2",C[I].format);wa.fillStyle=getChartGraphColor(Ia.color,Ra);var Nb=wb;Nb=null!=C[I].boundParam&&null!=C[I].param?wb+"("+C[I].param+")=":Nb+"=";wb=wa.measureText(Nb);if(Ba+Va+wb.width>=D)return{title:r.formulaName,width:Ba,titleWidth:0};wa.fillText(Nb,S+Ba+Va,lb);Ba+=wb.width;if(void 0!=Ia.value&&
"Number"==Ia.value.constructor.name){wb=wa.measureText(Fa);if(Ba+Va+wb.width+12>=D)return{title:r.formulaName,width:Ba,titleWidth:0};wa.fillText(Fa,S+Ba+Va,lb);Fa=.5*xa;6>Fa&&(Fa=6);Fa={left:S+Ba+wb.width+1+Va,top:lb-Fa/2,width:Fa,height:Fa};1==Ia.flag?drawTriangleUp(wa,Fa,Ra.chart.colorUp,Ra.chart.colorUp):-1==Ia&&drawTriangleDown(wa,Fa,Ra.chart.colorUp,Ra.chart.colorUp)}else{wb=wa.measureText(Fa);if(Ba+Va+wb.width+12>=D)return{title:r.formulaName,width:Ba,titleWidth:0};wa.fillText(Fa,S+Ba+Va,lb)}Ka=
wb.width;Ba+=Ka+16}wa.restore();U.valueAtIndexWidth=Ba;Ia=r.formulaName;null==Ia&&(Ia=r.formulaId,"script:"==Ia.substr(0,7)&&(Ia=r.getLineName(0)));return{title:Ia,width:Ba,titleWidth:Da}};this.isInValuesRect=function(wa,Ea){return wa>=ja.left&&Ea>=ja.top-Gb&&wa<=ja.left+ja.width&&Ea<=ja.top&&wa>ja.left+U.valueAtIndexX&&wa<ja.left+U.valueAtIndexX+U.valueAtIndexWidth?!0:!1};var ma=function(wa,Ea){Oa=wa;Pa=void 0===Ea?null:Ea},fc=function(wa){r.formulaName=wa;r.draw()};this.getQuerys=function(){if(za&&
0<za.length){for(var wa=[],Ea=fb.param,Va=0;Va<za.length;Va++){for(var I=za[Va].sql,D=0;D<Ea.length;D++){var S="stringQuery.replace(/{{ "+(Ea[D].name+" }}/g, repValue)");I=eval(S)}S=wa.length;wa[S]={sql:I};za[Va].isDifferent&&(wa[S].isDifferent=za[Va].isDifferent);za[Va].server&&(wa[S].server=za[Va].server)}return wa}}};var chartFunction=function(){};chartFunction.getReflectMap=function(){if(null!=this.ReflectMap)return this.ReflectMap;var a=Reflect.ownKeys(chartFunction);this.ReflectMap={};for(var b in a)"name"!=a[b]&&"length"!=a[b]&&"prototype"!=a[b]&&"arguments"!=a[b]&&"getReflectMap"!=a[b]&&(this.ReflectMap[a[b]]=chartFunction.name+"."+a[b]);return this.ReflectMap};
chartFunction.makeFormulaScript=function(a,b,c){a=a.replace(/__2__/g,'"');a=a.replace(/__1__/g,"'");for(var g in b){var k="/\\b"+b[g]+"\\b/gi";a='"'+a+'".replace('+k+", '"+b[g]+"')";a=eval(a)}for(g in c)k="/\\b"+g+"\\b/gi",a='"'+a+'".replace('+k+", '"+c[g]+"')",a=eval(a);return a};
chartFunction.MA=function(a,b){if(void 0!=a&&"object"==typeof a&&"Array"==a.constructor.name&&0<b&&a.length>=b){var c=[];a.type&&(c.type=a.type);var g=0,k,q,f=0;for(k=0;k<a.length;k++)if(void 0!=a[k]){for(q=0;f<b&&k<a.length;k++,q++)null!=a[k]&&(g+=a[k],f++);break}for(f==b&&(c[k-1]=g/b);k<a.length;k++)if(null!=a[k]&&null!=a[k-b])if(f==b)g+=a[k]-a[k-b],c[k]=g/b;else{for(q=g=0;q<b&&0<=k-q;q--)null!=a[k-q]&&(g+=a[k-q],f++);f==b&&(c[k]=g/b)}}return c};
chartFunction.DMA=function(a,b){if(void 0!=a&&1>b){var c=[];a.type&&(c.type=a.type);c[0]=b[0];for(var g=0;g<a.length;g++)c[g]=void 0!=a[g]&&void 0!=a[g-1]?b*a[g]+(1-b)*c[g-1]:void 0}return c};chartFunction.EMA=function(a,b){if(void 0!=a){var c=[];a.type&&(c.type=a.type);c[0]=a[0];for(var g=1;g<a.length;g++)c[g]=void 0!=a[g]&&void 0!=c[g-1]?(2*a[g]+(b-1)*c[g-1])/(b+1):a[g]}return c};
chartFunction.SMA=function(a,b,c){if(void 0!=a&&b>c&&0!=b){var g=[];a.type&&(g.type=a.type);g[b-1]=a[b-1];for(var k=0;k<a.length;k++)void 0!=a[k]&&void 0!=g[k-1]?g[k]=(c*a[k]+(b-c)*g[k-1])/b:void 0!=a[k]&&(g[k]=a[k])}return g};chartFunction.TMA=function(a,b,c){if(void 0!=a){var g;var k=[];k.type&&(d.type=k.type);for(g=0;g<a.length;g++)if(void 0!=a[g]){k[g]=c*a[g];break}for(g++;g<a.length;g++)k[g]=void 0!=a[g]&&void 0!=k[g-1]?b*k[g-1]+c*a[g]:a[g]}return k};
chartFunction.WMA=function(a,b){if(0<b){var c;var g=[];g.type&&(d.type=g.type);for(c=0;c<a.length;c++){for(var k=0,q=0,f=0;f<b;f++)void 0!=a[c]&&(k+=a[c],q+=1);g[c]=0<q?k/q:void 0}}return g};
chartFunction.LLV=function(a,b){if(void 0!=a&&"object"==typeof a&&"Array"==a.constructor.name&&0<b&&a.length>=b){var c;var g=[];g.type&&(d.type=g.type);var k=g[0]=a[0];if(0==b)for(c=1;c<a.length;c++)void 0!=a[c]&&k>a[c]&&(k=a[c]),g[c]=k;else{for(c=1;c<b;c++)c<b&&(void 0!=a[c]&&k>a[c]&&(k=a[c]),g[c]=k);for(;c<a.length;c++){k=a[c-b+1];for(var q=c-b+1;q<=c;q++)void 0!=a[q]&&k>a[q]&&(k=a[q]);g[c]=k}}}return g};
chartFunction.HHV=function(a,b){if(void 0!=a&&"object"==typeof a&&"Array"==a.constructor.name&&0<b&&a.length>=b){var c;var g=[];g.type&&(d.type=g.type);var k=g[0]=a[0];if(0==b)for(c=1;c<a.length;c++)void 0!=a[c]&&k<a[c]&&(k=a[c]),g[c]=k;else{for(c=1;c<b;c++)c<b&&(void 0!=a[c]&&k<a[c]&&(k=a[c]),g[c]=k);for(;c<a.length;c++){k=a[c-b+1];for(var q=c-b+1;q<=c;q++)void 0!=a[q]&&k<a[q]&&(k=a[q]);g[c]=k}}}return g};
chartFunction.HHVBARS=function(a,b){var c=[];a.type&&(c.type=a.type);if(0==b){b=a.length-1;var g=a[b],k=b;for(b--;0<=b;b--)void 0!=a[b]&&(void 0==g?(g=a[b],k=b):g<a[b]&&(g=a[b],k=b));c[b]=k}else for(g=b-1;g<a.length;g++){k=a[g];for(var q=g,f=g;f>=g-b;f--)void 0!=a[f]&&(void 0==k?(k=a[f],q=f):k<a[f]&&(k=a[f],q=f));c[g]=q}return c};
chartFunction.LLVBARS=function(a,b){var c=[];a.type&&(c.type=a.type);if(0==b){var g=a.length-1;b=a[g];var k=g;for(g--;0<=g;g--)void 0!=a[g]&&(void 0==b?(b=a[g],k=g):b>a[g]&&(b=a[g],k=g));c[g]=k}else for(g=b-1;g<a.length;g++){var q=a[g],f=g;for(k=g;k>=g-b;k--)void 0!=a[k]&&(void 0==q?(q=a[k],f=k):q>a[k]&&(q=a[k],f=k));c[g]=f}return c};chartFunction.REF=function(a,b){if(void 0!=a){var c=[];a.type&&(c.type=a.type);if(0==b)for(b=0;b<a.length;b++)c[b]=a[0];else for(var g=b;g<a.length;g++)c[g]=a[g-b]}return c};
chartFunction.REFX=function(a,b){var c=[];a.type&&(c.type=a.type);if(void 0!=a){var g;if(0==b)for(g=0;g<a.length;g++)c[g]=a[a.length-1];else for(g=0;g<a.length;g++)c[g]=null==a[g+b]?c[g-1]:a[g+b]}return c};chartFunction.REF2=function(a,b,c){if(void 0!=a){var g=[];a.type&&(g.type=a.type);if("Array"==c.constructor.name)for(var k=0;k<b;k++)g[k]=c[k];else for(k=0;k<b;k++)g[k]=c;for(c=b;c<a.length;c++)g[c]=a[c-b]}return g};
chartFunction.REFDATA=function(a,b){var c;if(b&&0<b.length){var g=[];a.type&&(g.type=a.type);for(c=0;c<b.length;c++)b[c]&&(g[c]=a[c])}return g};chartFunction.REFBARPOS=function(a){var b;if(a&&0<a.length){var c=[];for(b=0;b<a.length;b++)a[b]&&(c[b]=b)}return c};
chartFunction.IFF=function(a,b,c){var g=[];if("Array"==a.constructor.name)if("Array"==b.constructor.name)if("Array"==c.constructor.name)for(var k=0;k<a.length;k++)g[k]=1==a[k]?b[k]:c[k];else for(k=0;k<a.length;k++)g[k]=1==a[k]?b[k]:c;else if("Array"==c.constructor.name)for(k=0;k<a.length;k++)g[k]=1==a[k]?b:c[k];else for(k=0;k<a.length;k++)g[k]=1==a[k]?b:c;else if(1==a)if("Array"==b.constructor.name)for(c=0;c<a.length;c++)g[c]=b[c];else for(c=0;c<a.length;c++)g[c]=b;else if("Array"==c.constructor.name)for(b=
0;b<a.length;b++)g[b]=c[b];else for(b=0;b<a.length;b++)g[b]=c;return 0<g.length?g:void 0};chartFunction.RGB=function(a,b,c){var g=parseInt(a).toString(16),k=parseInt(b).toString(16),q=parseInt(c).toString(16);16>a&&(g="0"+g);16>b&&(k="0"+k);16>c&&(q="0"+q);return"#"+g+k+q};
chartFunction.DEVSQ=function(a,b){1>b&&(b=1);var c=0,g;if(a.length>=b){var k=[];a.type&&(k.type=a.type);for(g=0;g<b-1;g++)c+=a[g]?a[g]:0;for(var q=b-1;q<a.length;q++){c+=a[q]?a[q]:0;g=c/b;for(var f=0,p=q-b+1;p<q+1;p++)f+=Math.pow((a[p]?a[p]:0)-g,2);k[q]=f;c-=a[q-b+1]?a[q-b+1]:0}}return k};chartFunction.STD=function(a,b){a=chartFunction.DEVSQ(a,b);for(var c=--b;c<a.length;c++)a[c]=Math.sqrt(a[c]/b);return a};
chartFunction.AVEDEV=function(a,b){1>b&&(b=1);var c=0,g,k=[];a.type&&(k.type=a.type);for(g=0;g<b;g++)c+=a[g];for(var q=b,f;q<a.length;q++){c+=a[q];c-=a[q-b];var p=c/b;g=0;for(f=q-b+1;f<=q;f++)g+=Math.abs(a[f]-p);k[q]=g/b}return k};chartFunction.STDP=function(a,b){a=chartFunction.DEVSQ(a,b);for(var c=0;c<a.length;c++)void 0!=a[c]&&(a[c]=Math.sqrt(a[c]/b));return a};chartFunction.let=function(a,b){1>b&&(b=1);a=chartFunction.DEVSQ(a,b);for(var c=0;c<a.length;c++)a[c]/=b-1;return a};
chartFunction.letP=function(a,b){a=chartFunction.DEVSQ(a,b);for(var c=0;c<a.length;c++)a[c]/=b;return a};chartFunction.linearRegress=function(a,b,c){var g=0;c<g+b-1&&(c=g+b-1);var k=0,q=0,f=0,p=0;g=c-b+1;for(c=1;c<=b;c++)k+=c,f+=a[g+c-1],q+=c*a[g+c-1],p+=c*c;a=f/b;k/=b;b=(q-b*k*a)/(p-b*k*k);return[a-b*k,b]};chartFunction.FORCAST=function(a,b){3>b&&(b=3);var c=[];a.type&&(c.type=a.type);for(var g=b-1;g<a.length;g++){var k=chartFunction.linearRegress(a,b,g);c[g]=k[0]+k[1]*b}return c};
chartFunction.SLOPE=function(a,b){3>b&&(b=3);var c=[];a.type&&(c.type=a.type);for(var g=b-1;g<a.length;g++){var k=chartFunction.linearRegress(a,b,g);c[g]=k[1]}return c};
chartFunction.SAR=function(a,b,c,g,k){var q=[],f;if(4<c.length){var p=0;for(f=1;4>f;f++)p+=c[f];p/=3;var v=0,A=0;g[A]<p?v=1:k[A]>p?v=0:c[A]<c[A+1]&&(v=1);var r=1;f=1==v?k[A]:g[A];var u=g[A],z=k[A],H=0;for(A=0;A<c.length;A++){p=c[A];var C=g[A];var U=k[A];1==v?f>p?(v=0,f=u,r=1,z=U):(1==r&&(H=a,u=C,r=1),C>u&&(H+=a,H>b&&(H=b),u=C),f+=H*(C-f)/1E3,f>U&&(f=U)):f<p?(v=1,f=z,r=1,u=C):(r&&(z=U,H=a,r=0),U<z&&(H+=a,H>b&&(H=b),z=U),f-=H*(f-U)/1E3,f<C&&(f=C));q[A+1]=f}}return q};
chartFunction.MAX=function(a,b){var c=[];if("Array"==a.constructor.name)if("Array"==b.constructor.name)for(var g=0;g<a.length;g++)c[g]=a[g]>b[g]?a[g]:b[g];else for(g=0;g<a.length;g++)c[g]=a[g]>b?a[g]:void 0==a[g]?void 0:b;else if("Array"==b.constructor.name)for(g=0;g<b.length;g++)c[g]=a>b[g]?a:b[g];else c=a>b?a:b;return c};
chartFunction.MIN=function(a,b){var c=[];if("Array"==a.constructor.name)if("Array"==b.constructor.name)for(var g=0;g<a.length;g++)c[g]=a[g]<b[g]?a[g]:b[g];else for(g=0;g<a.length;g++)c[g]=a[g]<b?a[g]:b;else if("Array"==b.constructor.name)for(g=0;g<b.length;g++)c[g]=a<b[g]?a:b[g];else c=a<b?a:b;return c};chartFunction.ABS=function(a){if(void 0!=a){if("Array"==a.constructor.name){var b=[];a.type&&(b.type=a.type);for(var c=0;c<a.length;c++)b[c]=0>a[c]?-a[c]:a[c];return b}return 0>a?-a:a}};
chartFunction.COUNT=function(a,b){var c=[],g=0;if(0==b)for(b=0;b<a.length;b++)1==a[b]&&g++,c[b]=g;else if(b<a.length){for(var k=0;k<b-1;k++)1==a[k]&&g++;for(k=b-1;k<a.length;k++)1==a[k]&&g++,c[k]=g,1==a[k-b+1]&&g--}return c};chartFunction.BARPOS=function(a){var b=[];a.type&&(b.type=a.type);for(var c=0;c<a.length;c++)b[c]=c;return b};chartFunction.BARSTATUS=function(a){var b=[1],c;for(c=0;c<a.length-1;c++)b[c]=0;b[c]=2;return b};
chartFunction.BARSCOUNT=function(a){var b=[];a.type&&(b.type=a.type);for(var c=0;c<a.length;c++)b[c]=c;return b};chartFunction.BARSLAST=function(a){var b=[];a.type&&(b.type=a.type);for(var c=0,g=0;g<a.length;g++)void 0!=a[g]&&1==a[g]?c++:c=0,b[g]=c;return b};
chartFunction.SUMBARS=function(a,b){var c=[];a.type&&(c.type=a.type);if("Array"==b.constructor.name)for(var g=0;g<a.length;g++)for(var k=0,q=g;0<=q;q--){if(k+=a[g],k>=b[g]){c[g]=g-q;break}}else for(g=0;g<a.length;g++)for(k=0,q=g;0<=q;q--)if(k+=a[g],k>=b){c[g]=g-q;break}return c};chartFunction.BARSSINCE=function(a){var b=[];a.type&&(b.type=a.type);for(var c=0,g=0;g<a.length;g++)void 0!=a[g]&&1==a[g]?c++:c=0,b[g]=c;return b};
chartFunction.SUM=function(a,b){b=void 0===b?0:b;var c=[];a.type&&(c.type=a.type);if(0==b)for(c[0]=a[0]?a[0]:0,b=1;b<a.length;b++)c[b]=void 0!=a[b]?c[b-1]+a[b]:c[b-1];else if(0<b&&b<=a.length){for(var g=0,k=0;k<b;k++)void 0!=a[k]&&(g+=a[k]);c[b]=g;for(k=b;k<a.length;k++)void 0!=a[k]&&(g+=a[k]),void 0!=a[k-b]&&(g-=a[k-b]),c[k]=g}return c};chartFunction.HOD=function(a,b){var c=[];a.type&&(c.type=a.type);for(var g=b-1;g<a.length;g++){for(var k=a[g],q=0,f=g-b;f<g;f++)k>a[f]&&q++;c[g]=q}return c};
chartFunction.LOD=function(a,b){var c=[];a.type&&(c.type=a.type);for(var g=b-1;g<a.length;g++){for(var k=a[g],q=0,f=g-b;f<g;f++)k<a[f]&&q++;c[g]=q}return c};chartFunction.FILTER=function(a,b){var c=[];a.type&&(c.type=a.type);for(var g=0,k=0;k<a.length;k++)0==g&&void 0!=a[k]&&1==a[k]?(c[k]=1,g=b):(c[k]=0,g--);return c};
chartFunction.FILTERX=function(a,b){var c=[];a.type&&(c.type=a.type);if(0==b)for(b=a.length-1;0<=b&&(c[b]=a[b],!a[b]);b--);else for(var g=a.length-1;0<=g;g--)if(c[g]=a[g],a[g]){var k=0;for(g--;0<=g&&k<b;k++,g--)c[g]=0;g++}return c};chartFunction.BACKSET=function(a,b){var c=[];a.type&&(c.type=a.type);for(var g=b;g<a.length;g++)c[g-b]=void 0!=a[g]&&1==a[g]?1:0;return c};
chartFunction.CalcZigDot=function(a,b){var c=[[0,a[0]]],g=a[0],k,q,f;var p=k=g;for(var v=q=f=0,A=0,r=1;r<a.length;r++){if(.001>g||99999999<g)return-1;var u=(a[r]-g)/g,z=(g-a[r])/g;0==A?u>=b?(A=1,c[c.length]=[r,a[r]],g=a[r]):z>=b?(A=-1,c[c.length]=[r,a[r]],g=a[r]):(u=(a[r]-k)/k,z=(p-a[r])/p,u>=b?(A=1,c[c.length]=[f,a[f]],c[c.length]=[r,a[r]],g=a[r]):z>=b?(A=-1,c[c.length]=[q,a[q]],c[c.length]=[r,a[r]],g=a[r]):p<a[r]?(p=a[r],q=r):k>a[r]&&(k=a[r],f=r)):1==A?0<u?(A=1,c[c.length-1]=[r,a[r]],g=a[r]):z>=
b&&(A=-1,c[c.length]=[r,a[r]],g=a[r]):0<z?(A=-1,c[c.length-1]=[r,a[r]],g=a[r]):u>=b&&(A=1,c[c.length]=[r,a[r]],g=a[r]);A&&0==v&&(v=A)}return c};
chartFunction.ZIG=function(a,b){b=chartFunction.CalcZigDot(a,b/100);if(0<b.length){var c=[];a.type&&(c.type=a.type);for(var g=1;g<b.length;g++)for(var k=b[g-1][0];k<=b[g][0];k++)c[k]=b[g-1][1]+(k-b[g-1][0])*(b[g][1]-b[g-1][1])/(b[g][0]-b[g-1][0]);g=b.length-1;if(0<g&&b[g][0]<a.length-1)for(c[a.length]=a[a.length],k=b[g][0];k<a.length;k++)c[k]=b[g][1]+(k-b[g][0])*(a[a.length-1]-b[g][1])/(a.length-1-b[g][0])}return c};
chartFunction.PEAK=function(a,b,c){if(!(0>=c)){b=chartFunction.CalcZigDot(a,b/100);if(0<=b.length){var g;var k=[];a.type&&(k.type=a.type);var q=2*c;for(g=0;g<a.length;g++)k[g]=b[q-2*c][1],q<b.length&&g>=b[q][0]&&(q+=2)}return k}};chartFunction.PEAKBARS=function(a,b,c){if(!(0>=c)){b=chartFunction.CalcZigDot(a,b/100);if(0<=b.length){var g;var k=[];a.type&&(k.type=a.type);var q=2*c;for(g=0;g<a.length;g++)k[g]=b[q-2*c][0],q<b.length&&g>=b[q][0]&&(q+=2)}return k}};
chartFunction.formatValue=function(a,b,c,g){if(null!=a){var k=[];a.type&&(k.type=a.type);if(0<=b.indexOf("YY")||0<=b.indexOf("DD")||0<=b.indexOf("MM")){for(c=0;c<a.length;c++)null!=a[c]&&(k[c]=getValueFormatString(a[c],"dd",b));return k}return c&&1<c&&g&&"Number"==a.constructor.name?(a/=c,"\u767e\u5206\u6bd4"==g?a+"%":a+g):a}};function chartGraph(a,b,c){var g=this,k=[],q=[],f={left:0,top:0,width:0,height:0},p,v=[],A,r,u,z=!0,H,C,U=0,J;this.setFormulaTip=function(B){H=B;C=null};this.setFormula=function(B,L){z=!0;A=null;p=B;null==L&&(L=0);if(null==p)if(0<=L){if(null!=k[L]){k[L]=null;L=[];for(B=0;B<k.length;B++)k[B]&&(L[L.length]=k[B]);k=L}}else{if(-1==L){L=[];for(B=1;B<k.length;B++)k[B]=null;L[0]=k[0];k=L}}else if(-1==L&&(L=k.length),"string"==typeof p){B="script:"==p.slice(0,7).toLocaleLowerCase()?{script:p.slice(8)}:getFormulaScript(p);
k[L]||(k[L]=new chartEngine(a,b,c));if(B&&B.script&&1<B.script.length){var ba=B.script.replace(/%u0022%/g,'"');ba=ba.replace(/%u0027%/g,"'")}else ba="";k[L].setFormulaScript(ba,p,B.formulaName,B.formulaNote)}else p=xDeepCopy(B),L>=k.length&&(k[L]=new chartEngine(a,b,c)),k[L].setFormulaScript("",0,"","")};this.initFormulaScript=function(B,L){var ba=getFormulaForScript(B);L>=k.length&&(k[L]=new chartEngine(a,b,c));ba.script&&1<ba.script.length?(B=ba.script.replace(/%u0022%/g,'"'),B=B.replace(/%u0027%/g,
"'")):B="";var N=Math.random().toString(36).substr(2);k[L].setFormulaScript(B,N,ba.formulaName,ba.formulaNote)};this.setFormulaScript=function(B,L,ba,N,E){z=!0;A=null;k[E].setFormulaScript(B,L,ba,N,E)};this.getFormulaScript=function(B){null==B&&(B=0);return B<k.length?k[B].getFormulaScript():""};this.getFormulaId=function(B){null==B&&(B=0);if(B<k.length)return k[B].getFormulaId()};this.getFormulaIds=function(){for(var B=[],L=0;L<k.length;L++)B[L]=k[L].getFormulaId();return B};this.getFormula=function(B){null==
B&&(B=0);return B<k.length?k[B].getFormula():{id:void 0,script:""}};this.getFormulaPropertyHTML=function(B){return k[B].getPropertyHTML()};this.setFormulaPropertyHTML=function(B,L){k[L].setPropertyHTML(B)};this.resetFormulaPorperty=function(B){k[B].resetFormulaPorperty()};this.getFormulaProperty=function(B){return k[B].getProperty()};this.setFormulaProperty=function(B,L){k[L].setProperty(B)};this.getEngine=function(B){null==B&&(B=0);if(B<k.length)return k[B]};this.getQuerys=function(){for(var B=[],
L=0;L<k.length;L++)if(k[L]){var ba=k[L].getQuerys();if(ba)for(var N=0;N<ba.length;N++)B[B.length]=ba[N]}if(0<B.length)return B};this.setGraphicRect=function(B,L,ba,N,E,V){r=V;f.left=B;f.top=L;f.width=ba;f.height=N;for(B=0;B<k.length;B++)k[B]&&k[B].setGraphicRect(f,E,r)};this.isInGraphRect=function(B,L){return B>=f.left&&B<=f.left+f.width&&L>=f.top&&L<f.top+f.height?u&&B>=u.left&&B<=u.left+u.width&&L>=u.top&&L<u.top+u.height?-1:1:0};this.isInGraphValuesRect=function(B,L){for(var ba=0;ba<k.length;ba++)if(k[ba]&&
k[ba].isInValuesRect(B,L))return ba};this.isInGraphTitleRect=function(B,L){return u&&B>u.left&&B<u.left+u.width&&L>u.top&&L<u.top+u.height?!0:!1};this.run=function(B,L,ba){for(L=0;L<k.length;L++)if(k[L]){if(p&&p.callback_make_script){formula=p.callback_make_script(p,B);L>=k.length&&(k[L]=new chartEngine(a,b,c));if(formula&&formula.script&&1<formula.script.length){var N=formula.script.replace(/%u0022%/g,'"');N=N.replace(/%u0027%/g,"'")}else N="";k[L].setFormulaScript(N,formula.formulaName,formula.formulaName,
formula.formulaNote)}0<L&&k[L].setSyncXAxis(k[0].getXAxis());k[L].run(B,ba)}if(H&&B&&0<B.length)try{var E=function(Y,O){if(Y){var K=Y.table;if(K&&K.field&&K.data){O=O.toUpperCase();for(var Z=0;Z<K.field.length;Z++)if(K.field[Z][0].toUpperCase()==O)return Y.engineData&&Y.engineData[Z]?Y.engineData[Z]:K.data[Z]}}};ba=function(Y,O){O=void 0===O?-1:O;for(var K=[],Z=0;Z<Y.length;Z++)0<=Z+O&&Z+O<Y.length&&Y[Z+O]&&(K[Z]=Y[Z+O]);return K};N=function(Y,O){var K=function(ta){return null!=ta&&Math.floor(ta)!==
ta?ta.toString().split(".")[1].length||0:0},Z=[];if(null==O)for(var pa=K(Y[0]),oa,Aa=1;Aa<Y.length;Aa++)null!=Y[Aa]&&(oa=K(Y[Aa]),pa=oa>pa?oa:pa,Z[Aa]=parseFloat((Y[Aa]-Y[Aa-1]).toFixed(pa)),pa=oa);else if("Array"==O.constructor.name&&1<O.length)for(Aa=0;Aa<Y.length;Aa++)null!=Y[Aa]&&null!=O[Aa]&&(pa=K(Y[Aa]),oa=K(O[Aa]),pa=oa>pa?oa:pa,Z[Aa]=parseFloat((Y[Aa]-O[Aa]).toFixed(pa)));else for("Array"==O.constructor.name&&(O=O[0]),oa=K(O),Aa=0;Aa<Y.length;Aa++)null!=Y[Aa]&&(pa=K(Y[Aa]),pa=oa>pa?oa:pa,
Z[Aa]=parseFloat((Y[Aa]-O).toFixed(pa)));return Z};var V=function(Y,O){var K=[];if(null==O)for(var Z=1;Z<Y.length;Z++)Y[Z-1]&&Y[Z]&&(K[Z]=100*(Y[Z]-Y[Z-1])/Y[Z-1]);else if("Array"==O.constructor.name&&1<O.length)for(Z=0;Z<Y.length;Z++)O[Z]&&Y[Z]&&(K[Z]=100*(Y[Z]-O[Z])/O[Z]);else if("Array"==O.constructor.name&&(O=O[0]),O)for(Z=0;Z<Y.length;Z++)Y[Z]&&(K[Z]=100*(Y[Z]-O)/O);return K};E.name;var F=E.name,M=G(B);M=M.replace(/getTableDataFromField/g,F);eval("var Time=null;"+M);var X=H;for(F=0;F<X.length;F++)X[F]=
X[F].replace(/percentChange/g,V.name),X[F]=X[F].replace(/change/g,N.name),X[F]=X[F].replace(/ref/g,ba.name),X[F]=X[F].replace(/\r/g,""),X[F]=X[F].replace(/\n/g,"");try{for(C=eval("("+X+")"),L=0;L<C.length;L++){for(F=0;F<C[L].length;F++)if(C[L][F].decWithField){var aa=C[L][F].decWithField.split(".");M=0;var ia=B[0].table;if(1<aa.length){ia=null;for(M=0;M<B.length;M++)if(B[M].info.name.toLowerCase()==aa[0].toLowerCase()){ia=B[M].table;break}aa[0]=aa[1]}if(null!=ia&&ia.field)for(M=0;M<ia.field.length;M++)if(aa[0].toLowerCase()==
ia.field[M][0].toLowerCase()){if("x"==ia.field[M][1][0]||"f"==ia.field[M][1][0]){var fa=C[L][F].format&&0==C[L][F].format.indexOf("%.")?C[L][F].format.substr(3):C[L][F].format;C[L][F].format="%."+ia.field[M][1].substr(1);fa&&(C[L][F].format+=fa)}break}}var T=B[0].table.field;for(F=0;F<T.length;F++)C[L][0].field&&C[L][0].field.toLowerCase()==T[F][0].toLowerCase()&&(C[L][0].type=T[F][1])}}catch(Y){console.log(Y)}}catch(Y){if(null==J||J!=Y.message)J=Y.message,console.log("tip formual err:"+Y+";\n"+X);
C=null}else C=null};var G=function(B,L,ba){L="";for(ba=0;ba<B.length;ba++)if(B[ba]){var N=B[ba].table;if(0==ba){var E=B[ba].table.info.name,V=B[ba].table.info.name+".";L+="var "+E+"={};\r\n";for(E=0;E<N.field.length;E++){var F=N.field[E][0];L+="var "+F+("=getTableDataFromField(arguments[0]["+ba+"],'"+F+"');\r\n");L+=V+F+("=getTableDataFromField(arguments[0]["+ba+"],'"+F+"');\r\n")}}else for(E=B[ba].table.info.name,V=B[ba].table.info.name+".",L+="var "+E+"={};\r\n",E=0;E<N.field.length;E++)F=N.field[E][0],
L+=V+F+("=getTableDataFromField(arguments[0]["+ba+"],'"+F+"');\r\n")}return L};this.calcMaxMin=function(B,L,ba){for(var N,E,V=0,F=0,M,X,aa=[],ia,fa=[],T=0;T<k.length;T++)if(null!=k[T]){var Y=k[T].calcMaxMin(f,B,L,ba,T,ia);Y.max==Y.min&&(0==Y.max?(Y.max=.01,Y.min=-.01):(Y.max*=1.0001,Y.min*=.9999));fa[T]=xDeepCopy(Y);if(0==T||null==Y.yScaleType||"second"!=Y.yScaleType)0==T?(N=Y.max,E=Y.min):(N<Y.max&&(N=Y.max),E>Y.min&&(E=Y.min)),null!=Y.top&&Y.top>V&&(V=Y.top),null!=Y.bottom&&Y.bottom>F&&(F=Y.bottom),
null!=Y.baseIndex&&(0==T?(ia=Y.baseIndex,M=Y.baseMax,X=Y.baseMin,aa[T]=Y.baseValue):("absolute"==Y.yScaleType?(aa[T]=aa[0],Y.baseMax=100*(Y.max-aa[0])/aa[0],Y.baseMin=100*(Y.min-aa[0])/aa[0]):aa[T]=null!=Y.baseValue?Y.baseValue:aa[Y.baseIndex],M<Y.baseMax&&(M=Y.baseMax),X>Y.baseMin&&(X=Y.baseMin)))}B=0;v=[];for(T=0;T<k.length;T++)if(null!=k[T])if(0==T||null==Y.yScaleType||"second"!=Y.yScaleType){if(v[T]=1,k[T].setMaxMin(N,E,V,F,ia,aa[T],M,X,K,O),0==T){var O=k[T].getGraphInfo();var K=O.dataMax;O=O.dataMin}}else B++,
v[T]=2,k[T].setMaxMin(fa[T].max,fa[T].min,fa[T].top,fa[T].bottom);0==B&&(v[0]=0)};this.getXAxis=function(){if(k[0])return k[0].getXAxis()};this.getXAxisName=function(){if(k[0])return k[0].getXAxisName()};this.setGraphCellsSet=function(B,L,ba,N){if(0!=z){z=!1;var E=[];U=0;for(var V in ba)if(ba=E.length,"formulaPopupMenu"==V)for(var F=0;F<k.length;F++){if(null==k[F])E[ba]={title:"",width:0};else{var M=k[F].getFormulaName();null==M&&(M=k[F].formulaId,"script:"==M.substr(0,7)&&(M=k[F].getLineName(0)));
E[ba]={title:M,type:"xSaftButton",textAlgin:"left",option:{padding:0,margin:0,fontSize:r.graphTitle.fontSize,fontFamily:r.graphTitle.fontFamily,present:"flat"}};N&&N[ba]&&(E[ba].option.popupMenu=N[ba].callback_popup?{callback_popup:N[ba].callback_popup,callback_target:N[ba].callback_target,callback_param:{index:L,overlying:ba}}:{popup:N[ba].popup},E[ba].option.popupMenu.popupMode="click-dropdown-leftIcon-always")}ba=E.length}else{M=F=null;var X=r.graphTitle.zoomModel;switch(V){case "reset":V="";M=
"Refresh";F="charReset()";break;case "zoomIn":V="";M="Add";"sumChange"==X?F="chartZoomIn()":"widthChange"==X&&(F="chartZoomOut()");break;case "zoomOut":V="";M="Reduce";"sumChange"==X?F="chartZoomOut()":"widthChange"==X&&(F="chartZoomIn()");break;case "delete":V="";M="Close";F="deleteFormula("+L+")";break;case "setup":V="",M="Setup",F="setFormulaProperty("+L+","+(0==L?1:0)+")"}E[ba]={title:V,type:"xSaftButton",action:F,icon:M,option:{present:"flat",schemeName:r.graphTitle.buttonScheme,fontSize:r.graphTitle.fontSize,
fontFamily:r.graphTitle.fontFamily,padding:0,margin:0,marginTop:3}};U+=18}null==A&&0<E.length&&(A=new xCells(B,E,"vBox",B.getVariables()),A.setValue(0))}};this.getGraphCells=function(){return A};this.onMouseDown=function(B){for(var L=0;L<k.length;L++)if(k[L])k[L].onMouseMove(B,g.getXFromIndex)};this.draw=function(B,L,ba,N){if(null!=k&&0!=k.length){k[0].drawYScale(B,1,g.getXFromIndex);if(0==v[0])k[0].drawYScale(B,2,g.getXFromIndex);else for(var E=1;E<k.length;E++)if(k[E]&&2==v[E]){k[E].drawYScale(B,
2,g.getXFromIndex);break}for(E=0;E<k.length;E++)k[E]&&k[E].draw(B,L,ba,N)}};this.getTip=function(B,L,ba){for(var N=0;N<k.length;N++)if(null!=k[N]){var E=k[N].getTip(B,L,ba);if(E)return E}};this.getLocateValueAtIndex=function(B){if(k[0])return k[0].getLocateValueAtIndex(B)};this.getValueFromY=function(B){if(k[0])return k[0].getValueFromY(B)};this.getValueStringFromY=function(B,L){if(k[0])return k[0].getValueStringFromY(B,L)};this.getYFromValue=function(B){if(k[0])return k[0].getYFromValue(B)};this.getClosestValueFromYAtIndex=
function(B,L){for(var ba=g.getValueFromY(L),N=0;N<k.length;N++)if(k[N]){var E=k[N].getClosestValueFromYAtIndex(B,L,ba);if(null!=E)return E}return ba};this.drawTipAtIndex=function(B,L,ba,N,E,V){if(xGlobal.xTip&&C){if(1==r.cursor.showTip&&xGlobal.xTip.tip(B,N,E,C,ba,r.tip),1==r.cursor.showTipValue){L.save();L.font=r.tip.font;L.fillStyle=r.tip.color;L.textBaseLine="middle";L.fillStyle=r.tip.color;B=N;N=[];for(var F=0;F<C.length;F++)if(C[F][0].mark){var M=C[F][0].scale;if(M){if(M>=k.length)break}else M=
0;var X=getValueFormatStringWithProp(C[F][0].data[ba],C[F][0].type,C[F][0].format,C[F][0].flags,C[F][0].prop),aa=0<=C[F][0].mark.indexOf("ball")?"ball":"";aa=0<=C[F][0].mark.indexOf("halo")?"halo":aa;var ia=k[M].getYFromValue(C[F][0].data[ba]),fa=B;switch(aa){case "ball":L.beginPath();L.strokeStyle=C[F][0].color;L.strokeStyle=getChartGraphColor(C[F][0].color,r);L.fillStyle=r.chart.backgroundColor;L.lineWidth=1;if(null!=C[F][0].detach)V*=C[F][0].detach[2],M=V/C[F][0].detach[1],fa=B-V/2+.5*M+M*C[F][0].detach[0],
C[F][0].detach[0]>=C[F][0].detach[1]/2&&(fa=B+.6*M+(C[F][0].detach[0]-C[F][0].detach[1]/2)*M*2.5);else if(C[F][0].stack){for(aa=ia=0;aa<C[F][0].stack.length;aa++)C[F][0].stack[aa][ba]&&(ia+=C[F][0].stack[aa][ba]);ia=k[M].getYFromValue(ia)}L.arc(fa,ia,5,0,2*Math.PI);L.fill();L.stroke();L.closePath();break;case "halo":L.beginPath();L.strokeStyle=C[F][0].color;var T=getChartGraphColor(C[F][0].color,r);E=lightDarkenColor(T,70,.2);L.lineWidth=1;if(null!=C[F][0].detach)V*=C[F][0].detach[2],M=V/C[F][0].detach[1],
fa=B-V/2+.5*M+M*C[F][0].detach[0],C[F][0].detach[0]>=C[F][0].detach[1]/2&&(fa=B+.6*M+(C[F][0].detach[0]-C[F][0].detach[1]/2)*M*2.5);else if(C[F][0].stack){for(aa=ia=0;aa<C[F][0].stack.length;aa++)C[F][0].stack[aa][ba]&&(ia+=C[F][0].stack[aa][ba]);ia=k[M].getYFromValue(ia)}L.fillStyle=E;L.arc(fa,ia,6,0,2*Math.PI);L.fill();L.closePath();L.beginPath();L.fillStyle=T;L.arc(fa,ia,3,0,2*Math.PI);L.fill();L.closePath()}if(aa=0<=C[F][0].mark.indexOf("-value")?!0:!1){L.beginPath();E=parseFloat(r.tip.font);
C[F][0].markFont&&(L.font=C[F][0].markFont,E=parseFloat(C[F][0].markFont));T=L.measureText(X).width;L.fillStyle=r.tip.color;for(var Y=0,O=0;O<N.length&&Y<C.length;O++)ia>=N[O]?ia<=N[O]+E+4&&(ia=N[O]+E+5,O=-1,Y++):ia+E+5>N[O]&&(ia=N[O]-E-5);N[N.length]=ia;K?(L.textAlign="left",L.fillText(X,fa+7,ia)):(fillRoundRect(L,fa-T-9,ia-E,T+4,E+4,3,r.chart.backgroundColor,getChartGraphColor(C[F][0].color,r),{backgroundColorAlpha:.75}),L.textAlign="right",L.fillText(X,fa-7,ia));L.font=r.tip.font;L.closePath()}}L.restore()}}else if(C){L.save();
L.font=r.tip.font;for(F=Y=0;F<C.length;F++)C[F][0].title&&(K=L.measureText(C[F][0].title).width,Y<K&&(Y=K));T=Y+100+8;F=20*C.length+6;B=N;N+=12;E+=12;var K=!1;N+T>f.left+f.width-2&&(N-=T+24,K=!0);E+F>f.top+f.height-2&&(E-=F+24);fillRoundRect(L,N,E,T,F,2,r.tip.backgroundColor,r.tip.borderColor,{borderRadius:3,backgroundColorAlpha:r.tip.backgroundColorAlpha,boxShadow:r.tip.boxShadow});O=E+6+10;L.fillStyle=r.tip.color;for(F=0;F<C.length;F++){fa=N+8;if(C[F][0].draw){X=L;aa=C[F][0].draw;ia=C[F][0].color;
M=fa;var Z=O-10-4;switch(aa){case "linePointDot":X.beginPath();aa=Z+10+0;X.strokeStyle=ia;X.lineWidth=2;X.moveTo(M+0,aa);X.lineTo(M+12+0,aa);X.stroke();X.closePath();X.beginPath();X.fillStyle=ia;X.lineWidth=1;X.arc(M+5+1+0,aa,2,0,2*Math.PI);X.fill();X.stroke();X.closePath();break;case "line":X.beginPath();aa=Z+10+0;X.strokeStyle=ia;X.lineWidth=2;X.moveTo(M+0,aa);X.lineTo(M+12+0,aa);X.stroke();X.closePath();break;case "null":break;case "bar":fillRoundRect(X,M+0,Z+10-6,12,12,2,ia);break;default:X.beginPath(),
X.fillStyle=ia,X.textBaseline="middle",X.textAlign="left",X.fillText(aa,M+0+1,Z+10+0),X.closePath()}fa+=18}L.textBaseLine="middle";L.fillStyle=r.tip.color;C[F][0].title&&(L.textAlign="left",L.fillText(C[F][0].title,fa,O),fa=Y);"left"==C[F][0].dataAlign?L.textAlign="left":"center"==C[F][0].dataAlign?(L.textAlign="center",fa+=(T-(fa-N))/2):(fa=N+Y+100,L.textAlign="right");if(null==C[F][0].data[ba])O+=20;else if(X=getValueFormatString(C[F][0].data[ba],C[F][0].type,C[F][0].format,C[F][0].flags),L.fillText(X,
fa,O),O+=20,C[F][0].mark){if(M=C[F][0].scale){if(M>=k.length)break}else M=0;aa=0<=C[F][0].mark.indexOf("ball")?"ball":"";ia=k[M].getYFromValue(C[F][0].data[ba]);fa=B;switch(aa){case "ball":L.beginPath();L.strokeStyle=C[F][0].color;L.fillStyle=r.chart.backgroundColor;L.lineWidth=1;if(null!=C[F][0].detach)V*=C[F][0].detach[2],M=V/C[F][0].detach[1],fa=B-V/2+.5*M+M*C[F][0].detach[0],C[F][0].detach[0]>=C[F][0].detach[1]/2&&(fa=B+.6*M+(C[F][0].detach[0]-C[F][0].detach[1]/2)*M*2.5);else if(C[F][0].stack){for(aa=
ia=0;aa<C[F][0].stack.length;aa++)C[F][0].stack[aa][ba]&&(ia+=C[F][0].stack[aa][ba]);ia=k[M].getYFromValue(ia)}L.arc(fa,ia,5,0,2*Math.PI);L.fill();L.stroke();L.closePath()}if(aa=0<=C[F][0].mark.indexOf("-value")?!0:!1)L.beginPath(),T=L.measureText(X).width,K?(fillRoundRect(L,fa,E-parseFloat(r.tip.font)/2,T,parseFloat(r.tip.font),3,r.chart.backgroundColor,C[F][0].color),L.textAlign="left",L.fillStyle=r.tip.color,L.fillText(X,fa+7,ia)):(fillRoundRect(L,fa-T,E-parseFloat(r.tip.font)/2,T,parseFloat(r.tip.font),
3,r.chart.backgroundColor,C[F][0].color),L.textAlign="right",L.fillStyle=r.tip.color,L.fillText(X,fa-7,ia)),L.closePath()}}L.restore()}};this.drawValuesAtIndex=function(B,L,ba){ba=0;var N,E,V=f.left+1,F=f.width,M=r&&r.graphTitle&&r.graphTitle.height?r.graphTitle.height:0;r&&r.graphTitle&&"inGraph"==r.graphTitle.position||!r||(1==r.scale.left.show&&(V+=r.scale.left.width),1==r.scale.right.show&&(F+=r.scale.right.width));u={left:V,top:f.top,width:F,height:M};A&&(N=A.getCells());var X=0,aa=F-U-20;for(E=
0;E<k.length;E++){var ia=k[E]?k[E].drawValuesAtIndex(B,L,ba,N&&N[X].object?!0:!1,aa):{width:0,titleWidth:-12};if(null==ia)break;N&&N[X].object&&(N[X].object.geometry.left=V+ba+6,N[X].object.geometry.top=f.top,N[X].object.geometry.height=M,N[X].title=ia.title,N[X].object.geometry.width=0==ia.titleWidth?B.measureText(N[X].title).width+12:ia.titleWidth+12);ba+=ia.width;X++}ba=V+F-20;if(N){for(L=N.length-1;L>=X;L--)N[L].object.geometry.left=ba,N[L].object.geometry.width=12,N[L].object.geometry.top=f.top,
N[L].object.geometry.height=M,ba-=20;A.draw(B,r,0,0,f)}};this.drawTip=function(B,L){if(C){for(var ba=L=0;ba<C.length;ba++){var N=B.measureText(C[ba][0]).width;L<N&&(L=N)}fillRoundRect(B,0,0,L+60+6,28*C.length+12,2,r.tipBackgroundColor,color)}};this.drawLines=function(B,L,ba){if(q)for(var N=0;N<q.length;N++)q[N].draw(B,L,f,ba)};this.restoreDrawLine=function(B,L,ba,N,E,V,F){var M=0,X=k[0].getFormulaId();(!B.info.rows||q[0]&&q[0].getId()!=B.data[0][0])&&0<q.length&&g.deleteAllDrawLine();for(var aa=0;aa<
B.info.rows;aa++)if(B.data&&B.data[aa]&&B.data[aa][3]&&B.data[aa][3].formula==X){if(q[aa]&&q[aa].getId()==B.data[0][0])return;var ia=new chartDrawLine(L,ba,N,g.getYFromValue,E,g.getValueFromY,V);ia.initWithSet(B.data[aa][3],aa,F);q[q.length]=ia;M++}return M};this.newDrawLine=function(B,L,ba,N,E,V,F,M,X,aa){g.getValueFromY(F);B=new chartDrawLine(B,L,M,g.getYFromValue,X,g.getValueFromY,aa);B.initWithNew(ba,N,E,V,F);return q[q.length]=B};this.hitTestDrawLine=function(B,L,ba){for(var N=0;N<q.length;N++)if(0<=
q[N].hitTest(B,L,ba))return q[N]};this.showAllDrawLine=function(B,L,ba){for(L=0;L<q.length;L++)q[L].show(B)};this.deleteAllDrawLine=function(B,L){for(B=0;B<q.length;B++)q[B]=null;q=[]};this.deleteDrawLine=function(B){for(var L=0;L<q.length;L++)if(q[L]==B){for(;L<q.length;L++)q[L]=L<q.length-1?q[L+1]:void 0;q=q.slice(0,q.length-1);break}};this.getDrawLineList=function(){return q};this.setDrawLineList=function(B,L,ba,N,E){if(B)for(q=B,B=0;B<q.length;B++)q[B].setCallback(L,g.getYFromValue,ba,g.getValueFromY,
N);else q=[]};this.relocate=function(B,L){for(var ba=0;ba<q.length;ba++)q[ba].relocate(B,L)}};function chartLayer0(a,b){var c=this,g,k;this.canvasParentLayer=b;var q=1;this.setCanvasSize=function(){if(null!=g){var f=g.parentElement.offsetWidth,p=g.parentElement.offsetHeight;if(0!=f&&0!=p)return null==k&&(k=g.getContext("2d")),q=getPixelRatio(k),g.width=f*q,g.height=p*q,g.style.left=0,g.style.top=0,g.style.width=f+"px",g.style.height=p+"px",!0}};this.hidden=function(){g.width=g.height=1};this.isMyCanvas=function(f){return g==f?!0:!1};this.draw=function(){null!=c.setCanvasSize()&&(null==k&&
(k=g.getContext("2d")),1<q&&k.setTransform(q,0,0,q,0,0),k.translate(.5,.5),c.canvasParentLayer.drawLayer0(k))};this.onMouseMove=function(f){c.canvasParentLayer.mouseMove(f);1!=xGlobal.passiveSupported&&f.preventDefault()};this.onMouseOut=function(f){c.canvasParentLayer.onMouseOut(f);1!=xGlobal.passiveSupported&&f.preventDefault()};this.onMouseDown=function(f){c.canvasParentLayer.onMouseDown(f)};this.onMouseUp=function(f){c.canvasParentLayer.onMouseUp(f)};this.onMouseWheel=function(f){c.canvasParentLayer.onMouseWheel(f)};
this.onTouchStart=function(f){c.canvasParentLayer.onTouchStart(f)};this.onTouchEnd=function(f){c.canvasParentLayer.onTouchEnd(f)};this.onTouchMove=function(f){c.canvasParentLayer.onTouchMove(f)};this.onContextMenu=function(f){c.canvasParentLayer.onContextMenu(f);1!=xGlobal.passiveSupported&&f.preventDefault()};this.onKeyDown=function(f){c.canvasParentLayer.onKeyDown(f)};this.onDblClick=function(f){c.canvasParentLayer.onDblClick(f)};this.setCursor=function(f){g.style.cursor=f};this.destory=function(){g.height=
g.width=1;g=null};(function(){g=a.document.createElement("canvas");var f=a.document.createAttribute("style");f.value="position:absolute;left:0px;top:0px;right:0px;bottom:0px;background-color:transparent;";var p=c.canvasParentLayer.getCanvas().style.margin;f.value=p?f.value+"margin:"+p:f.value;g.setAttributeNode(f);c.canvasParentLayer.getCanvas().parentElement.appendChild(g);g.addEventListener("mousemove",c.onMouseMove);g.addEventListener("mouseout",c.onMouseOut);g.addEventListener("mousedown",c.onMouseDown);
g.addEventListener("mouseup",c.onMouseUp);g.addEventListener("mousewheel",c.onMouseWheel,xGlobal.passiveSupported?{passive:!1}:!1);g.addEventListener("contextmenu",c.onContextMenu);g.addEventListener("dblclick",c.onDblClick);g.addEventListener("touchstart",c.onTouchStart);g.addEventListener("touchend",c.onTouchEnd);g.addEventListener("touchmove",c.onTouchMove)})()};function formulaSDK(){var a=[],b=[];this.setDataSet=function(g,k){for(k=0;k<a.length&&a[k].name!=g;k++);};this.delDataSet=function(g){for(var k=0;k<a.length;k++)if(a[k].name==g){delete a[k];break}};this.addFormula=function(g,k){for(var q=0;q<b.length;q++)if(b[q].name==g){b[q].script=k;return}b.push({name:g,script:k})};this.modifyFormula=function(g){for(var k=0;k<b.length;k++)if(b[k].name==g)return b[k].script=script,!0;return!1};this.delFormula=function(g){for(var k=0;k<b.length;k++)if(b[k].name==
g)return delete b[k],!0;return!1};this.setFormulaParameter=function(g,k){for(var q=0;q<b.length;q++)if(b[q].name==g)return b[q].param=k,!0;return!1};var c;this.run=function(g){engineData=new chartEngineData;engineData.setDataTable(a,adjustSet,scaleXSet);c=[];for(g=0;g<b.length;g++)c[g]=new chartEngine(b[g].script),c[g].run(engineData.getEngineData(),b[g].param)};this.getResult=function(g,k){for(var q=0;q<b.length;q++)if(b[q].name==g)return c[q].getResult(k)}};var weekday="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),parseLineSet=function(a,b,c){b=void 0===b?1:b;c=void 0===c?"#888":c;var g=[0],k=0;if("string"==typeof a){a=a.split(" ");if(1==a.length&&"#"==a[0][0])c=a[0];else{b=parseInt(a[0]);switch(a[1]){case "solid":break;case "dotted":g=[3,3];break;case "dashed":g=[1,1];break;default:if(a&&1<a.length&&"["==a[1][0]){c=a[1].substr(1,a[1].length-1);c=c.substr(0,c.length-1);c=c.split(",");for(var q=0;q<c.length;q++)g[q]=parseInt(c[q])}}c=a[2]}a[3]&&
(k=parseFloat(a[3]))}return{width:b,dash:g,color:c,padding:k}};
function statisticsRegion(a,b,c){var g=b,k=c;b>c&&(g=c,k=b);var q,f=function(J,G){if(J){var B=J.table;if(B&&B.field&&B.data){G=G.toUpperCase();for(var L=0;L<B.field.length;L++)if(B.field[L][0].toUpperCase()==G)return J.engineData&&J.engineData[L]?J.engineData[L]:B.data[L]}}},p=function(J,G){if(J&&(J=J.table)&&J.field&&J.data){G=G.toUpperCase();for(var B=0;B<J.field.length;B++)if(J.field[B][0].toUpperCase()==G)return J.field[B][1].toUpperCase()}};b=function(){return{getTableDataFromField:f.name,getTableDataTypeFromField:p.name}};
this.getValueType=function(){return q};var v=function(J){return"Array"==J.constructor.name&&2==J.length&&J[0]&&"Array"==J[0].constructor.name&&"string"==typeof J[1]?J[0]:J},A=function(J){"Array"==J.constructor.name&&2==J.length&&J[0]&&"Array"==J[0].constructor.name&&"string"==typeof J[1]&&(q=J[1].toLowerCase())};c="";for(var r=0;r<a.length;r++)for(var u=a[r].table,z=0;z<u.field.length;z++){var H=u.field[z][0].toLowerCase();c+="var "+H+"=[];\r\n";c+=H+("[0]= getTableDataFromField(arguments[0]["+r+
'], "')+H+'");\r\n';c+=H+("[1]= getTableDataTypeFromField(arguments[0]["+r+'], "')+H+'");\r\n';f.name;p.name}c=c.replace(/getTableDataFromField/g,b().getTableDataFromField);c=c.replace(/getTableDataTypeFromField/g,b().getTableDataTypeFromField);eval(c);var C=function(){};C.RefFunc=function(J,G){if(J){var B=[];A(J);J=v(J);for(var L=0;L<G;L++)B[L]=J[0];for(L=G;L<J.length;L++)B[L]=J[L-G];return B}};C.FirstFunc=function(J){if(J)return A(J),J=v(J),J[g]};C.SumFunc=function(J){var G=0;if(J){A(J);J=v(J);
for(var B=g;B<=k;B++)J[B]&&(G+=J[B])}return G};C.LastFunc=function(J){if(J){A(J);J=v(J);if(null!=J[k])return J[k];for(var G=k-1;0<G;G--)if(null!=J[G])return J[G]}};C.MaxFunc=function(J){if(J){A(J);J=v(J);for(var G=J[g],B=g+1;B<=k;B++)J[B]&&J[B]>G&&(G=J[B]);return G}};C.MinFunc=function(J){if(J){A(J);J=v(J);for(var G=J[g],B=g+1;B<=k;B++)J[B]&&J[B]<G&&(G=J[B]);return G}};C.CountFunc=function(J){var G=0;if(J){A(J);J=v(J);for(var B=g;B<=k;B++)0<J[B]&&G++}return G};C.OperationFunc=function(J,G,B){var L=
[];A(J);J=v(J);B=v(B);switch(G){case ">":for(G=0;G<J.length;G++)J[G]>B[G]&&(L[G]=!0);break;case "<":for(G=0;G<J.length;G++)J[G]<B[G]&&(L[G]=!0);break;case "=":for(G=0;G<J.length;G++)J[G]==B[G]&&(L[G]=!0);break;case "+":for(G=0;G<J.length;G++)J[G]&&B[G]&&(L[G]=J[G]+B[G]);break;case "-":for(G=0;G<J.length;G++)J[G]&&B[G]&&(L[G]=J[G]-B[G]);break;case "*":for(G=0;G<J.length;G++)J[G]&&B[G]&&(L[G]=J[G]/B[G])}return L};var U={ref:"RefFunc",first:"FirstFunc",sum:"SumFunc",last:"LastFunc",max:"MaxFunc",min:"MinFunc",
count:"CountFunc",operation:"OperationFunc"};this.run=function(J){q=null;try{for(var G in U)for(var B=0;3>B;B++)J=J.replace(G,C.name+"."+U[G]);var L=eval(J);isNaN(L)&&(L="-");return L}catch(ba){console.log(ba)}}}var getVariableValue=function(a,b){a=a.split(".");var c=a[0];1<a.length&&(c=a[1]);return b[c]};
function checkIsMobile(){var a=navigator.userAgent;a.indexOf("Trident");a.indexOf("Presto");a.indexOf("AppleWebKit");-1<a.indexOf("Gecko")&&a.indexOf("KHTML");a.match(/AppleWebKit.*Mobile.*/)||a.match(/AppleWebKit/);a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);var b=-1<a.indexOf("Android")||-1<a.indexOf("Linux"),c=-1<a.indexOf("iPhone")||-1<a.indexOf("Mac"),g=-1<a.indexOf("iPad");a.indexOf("Safari");(navigator.browserLanguage||navigator.language).toLowerCase();if(b||c||g)return!0}
function xChart(a,b,c,g,k,q,f,p){function v(R,ka){var qa=new Date;qa.setTime(R);var Ha;xGlobal.utcTime?"YYYY/MM/DD, HH:mm"==ka?Ha=qa.getUTCFullYear()+"/"+(qa.getUTCMonth()+1)+"/"+qa.getUTCDate()+", "+getValidDateTime(qa.getUTCHours())+":"+getValidDateTime(qa.getUTCMinutes()):"HH:mm"==ka&&(Ha=getValidDateTime(qa.getUTCHours())+":"+getValidDateTime(qa.getUTCMinutes())):"YYYY/MM/DD, HH:mm"==ka?Ha=qa.getFullYear()+"/"+(qa.getMonth()+1)+"/"+qa.getDate()+", "+getValidDateTime(qa.getHours())+":"+getValidDateTime(qa.getMinutes()):
"HH:mm"==ka&&(Ha=getValidDateTime(qa.getHours())+":"+getValidDateTime(qa.getMinutes()));return Ha}function A(R){if(z.callInfo)return z.callInfo[R]}function r(R){var ka=A(R);if(void 0!=ka)for(var qa=0;qa<ka.length;qa++)if("page"==ka[qa].id)"page."==ka[qa].action.substr(0,5)?z.page.doAction(ka[qa].action.substr(5,ka[qa].action.length-5)):z.page.doAction(ka[qa].action);else if(globalPage.getActivePage()){var Ha=H.document.getElementById(ka[qa].id);if(Ha){var Za=M[0].table;ka[qa].param?z.page.getObjectByElementId(ka[qa].id)&&
eval("obj."+ka[qa].action+"("+ka[qa].param+")"):"setVariablesValue"==R?f.setVariablesValue(Ha,Za.field,Za.data[cb.index-Oa]):"setExternalTable"==R&&f.setVariablesValue(Ha,Za)}}u("enter",0,R)}function u(R,ka,qa,Ha){if(null!=Wa&&(setCallback_VariablesValue(Wa,B),qa=getBoundValues(Wa,B,M,cb.index,Qa()),0<qa.length)){if(null==z.page){var Za=globalPage.getActivePage();Za&&Za.synchBoundValue(R,ka+1,qa,z,Ha)}else z.page.synchBoundValue(R,ka+1,qa,z,Ha);if(qa.afterCallbackObjectList)for(ka=0;ka<qa.afterCallbackObjectList.length;ka++)qa.afterCallbackObjectList[ka].afterSynchBoundValue(R,
qa,z)}}var z=this,H=a;this.page=b;var C,U=null;this.enableActive=!0;var J=!1,G=xDeepCopy(g),B=xDeepCopy(k);if(p)for(var L in B)for(var ba in p)if(L==ba){B[L]=p[ba];break}this.callInfo=q;if(this.callbacks=f)this.queryIndex=this.callbacks.getQueryIndex(this);var N=[],E,V=[],F,M,X,aa,ia,fa,T,Y,O,K,Z,pa,oa,Aa,ta,Q={maxGraphItems:5,wheelOnFocus:!1,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginBackgroundColor:"",chart:{backgroundColor:"#fff",border:{left:"#e2e2e2",right:"#e2e2e2",top:"#e2e2e2",
bottom:"#e2e2e2"},upColor:"#c74535",downColor:"#48B181",visibleItems:300,minVisibleItems:10,maxVisibleItems:1E4,reserveItems:5,maxRightReserveItems:10,preReadItems:180},graph:{backgroundColor:"#fff",border:{left:"",right:"",top:"",bottom:""},colorText:"#000",colorShine:"#f00",colorShade:"#090",colorUp:"#f00",colorDown:"#090",colorHold:"#66f",color1:"#f00",color2:"#090",color3:"#00f",color4:"#000",color5:"#f0f",color6:"#099",color7:"#900",color8:"#009"},scale:{scaleMode:"normal",scaleType:"default",
scaleReverse:!1,scaleBasePosition:"last",scaleBaseValue:"",xLine:"1px dashed #EAEAEA",yLine:"1px dashed #EAEAEA",middleLine:"2px solid #EAEAEA",xScale:{type:"auto",startDate:0,endDate:0},left:{show:!0,align:"right",cursorShow:!0,width:60,backgroundColor:"",textColor:"#111",scaleColor:"#000",fontSize:14,fontFamily:xGlobal.systemFont,yOffset:0,format:"auto"},right:{show:!0,cursorShow:!0,align:"left",width:60,backgroundColor:"",textColor:"#111",scaleColor:"#000",fontSize:14,fontFamily:xGlobal.systemFont,
yOffset:0,format:"auto"},bottom:{show:!0,align:"center",height:28,backgroundColor:"",textColor:"#111",scaleColor:"#aaa",fontSize:14,fontFamily:xGlobal.systemFont,format:"auto"}},xAxis:{zoom:!0,move:!0,wheelZoom:!0},cursor:{show:!0,showCross:!0,showValue:!0,showTipValue:!0,showTip:!0,showAlways:!1,titleColor:"#000",font:"",textColor:"#eee",backgroundColor:"#999",lineColor:"#f22",lineWidth:1,lineDash:0},thumbnail:{show:!1,height:24,marginLeft:1,marginTop:1,marginRight:1,marginBottom:1,date:{field:"",
color:"#aaa",splitColor:"#ddd"},data:{field:"",color:"#ddd",fillColor:"#eee"},solt:{backgroundColor:"#f8f8f8",borderColor:"#eee"},slider:{backgroundColor:"rgb(200,220,255,0.5)",borderColor:"#bbb",borderType:"1"}},tip:{show:"always",backgroundColor:"rgba(64,64,64,0.85)",border:"1px solid #000",color:"#eee",colors:["#fff","#f00","#0f0"],font:"10px Helvetica Neue,sans-serif",boxShadow:"0px 0px 6px #000"},dataTip:{backgroundColor:"rgba(64,64,64,0.9)",color:"#fff",border:"1px solid #000",borderRadius:3,
boxShadow:"0px 1px 6px #000",font:"12px "+xGlobal.systemFont},graphTitle:{backgroundColor:"#efefef",textColor:"#000",show:!0,height:14,position:"inGraph",fontSize:12,fontFamily:xGlobal.systemFont,buttonScheme:"normal",zoomModel:"sumChange",buttons:[]},chartTitle:{show:!0,height:24,titleColor:"#000",cells:[],fontSize:12,fontFamily:xGlobal.systemFont,marginTop:0,marginLeft:0},regionStatistics:{enable:!1,tables:[],region:{backgroundColor:"#800",borderColor:"#800",globalAlpha:.35},statistics:{width:240,
height:148,backgroundColor:"rgba(220,220,220,0.85)",borderRadius:3,boxShadow:"0px 0px 6px #333",border:"1px solid transparent",option:{color:"#eee",colors:["#EEE","#FF503B","#72FFBE","#fff"],fontFamily:xGlobal.systemFont,fontSize:10,lineHeight:16,marginLeft:6,marginRight:6,marginTop:6,marginBottom:6},cells:[[{count:"(last(close)-first(ref(close,1)))*100/first(ref(close,1))",colSpan:"2",style:"font-size:16px",valueType:"f2",format:"%+4.2f%%"},{count:"last(close) - first(ref(close,1))",colSpan:"2",
style:"font-size:16px",valueType:"f2",format:"%+"},{count:"(max(high)-min(low))*100/min(low)",valueType:"f2",format:"%4.2f%%"}],[{title:"\u6536\u76d8:",count:"last(close)",style:"font-size:14px",valueType:"f2"},{title:"\u4e0a\u6da8:",count:'count(operation(close, ">", ref(close,1)))'}],[{title:"\u524d\u6536:",count:"first(ref(close,1))",valueType:"f2"},{title:"\u4e0b\u8dcc:",count:'count(operation(close, "<", ref(close,1)))'}],[{title:"\u5f00\u76d8:",count:"first(open)",valueType:"f2"},{title:"\u6301\u5e73:",
count:'count(operation(close, "=", ref(close,1)))'}],[{title:"\u6700\u9ad8:",count:"max(high)",valueType:"f2"},{title:"\u603b\u91cf:",count:"sum(volume)",format:"%V"}],[{title:"\u6700\u4f4e:",count:"min(low)",valueType:"f2"},{title:"\u603b\u989d:",count:"sum(amount)",format:"%V"}]]}},dataPrepare:{dividend:{factorName:"dividend",factorField:"factor",type:"forward",dataField:["open","high","low","close"]}},formulaIds:[],formulaScripts:[],formulaTips:[],formulaMenu:[],popupMenu:"",popupMenuPrepareAction:"",
keyAction:[],drawLineDb:{http:{query:"",update:"",delete:"",deleteAll:""},sql:{query:"",update:"",delete:"",deleteAll:""}},waterMark:{show:!1,position:{x:10,y:10},font:"48px "+xGlobal.systemFont,textAlign:"left",textBaseline:"top",textColor:"#555",value:"",variable:"",field:""},callback_onOperate:null,callback_onKeydown:null,callback_onDrawLineChange:null},sa=Q.chart.visibleItems,ra=Q.chart.reserveItems,la,Na,Wa,na=1,ha=0,ea={left:0,top:0,right:0,bottom:0,width:0,height:0},ja,da=!1,Oa=0,Pa=300,hb,
Ma=300,rb=1,zb=[],Jb=[],Cb=0,Db=0;this.clientY=this.clientX=0;var cb={isShow:!1,isOut:!0,x:0,Y:0,index:null,switching:!1},Ab=0,Gb=0,Ra=0,Sb=0,Ub=0,Ob=0,Fb=0,Ya=0,fb,$a={isShow:!1,dragIndex:void 0,downBeginIndex:void 0,beginIndex:0,endIndex:0,moveX:void 0,moveY:void 0,moveLeft:void 0,moveTop:void 0,calc:!1,tipBeginIndex:0,tipEndIndex:0,tipBeginDate:0,tipEndDate:0,preClose:0,close:0,open:0,high:0,low:0,volume:0,amount:0,ups:0,downs:0,levels:0,zf:0,zd:0,hlr:0},za,Ka,ab,W=0,Ca=0,ca=0,ya=0,bb,ib,gb,Bb,
Hb,nb=[],Pb,bc,Tb=0,Xb,ma=0,fc=!1;this.getCanvas=function(){return c};this.getContext=function(){return C};this.getPage=function(){return this.page};this.getOption=function(){return Q};this.getVariables=function(){return B};this.getQueryInfo=function(){return G};this.getObjectClassName=function(){return"xChart"};this.getObjectId=function(){return c.id};var wa,Ea,Va;this.setGid=function(R,ka,qa){wa=R;Ea=ka;Va=qa};this.setQueryInfo=function(R){if(null==R||0==R.length)G=null;else if(null==G||R.length!=
G.length)G=R,Db--;else for(var ka=0;ka<R.length;ka++){var qa=R[ka],Ha;for(Ha in qa)if(null==G[ka]||qa[Ha]!=G[ka][Ha]){G=R;Db--;return}}};this.getVisibleItems=function(){return Pa};var I=function(){null==Ka&&(Ka=H.document.createElement("div"),Ka.style="position:absolute;margin:0px;padding:8px;display:none;z-index:1001;",c.parentElement.appendChild(Ka));Q.dataTip.backgroundColor&&(Ka.style.backgroundColor=Q.dataTip.backgroundColor);Q.dataTip.color&&(Ka.style.color=Q.dataTip.color);Q.dataTip.border&&
(Ka.style.border=Q.dataTip.border);null!=Q.dataTip.borderRadius&&(Ka.style.borderRadius=parseInt(Q.dataTip.borderRadius)+"px");Q.dataTip.boxShadow&&(Ka.style.boxShadow=Q.dataTip.boxShadow);Q.dataTip.font&&(Ka.style.font=Q.dataTip.font)},D=function(){Ka&&(c.parentElement.removeChild(Ka),Ka=null)};this.destroy=function(){c.removeEventListener("mousemove",z.onMouseMove);c.removeEventListener("mouseout",z.onMouseOut);ab&&ab.destroy();z.callbacks.sendCancelQuery(z.queryIndex);if(O)for(var R=0;5>R;R++)O[R]&&
O[R].destroy();ub.destory();c.width=c.height=1;C=null};this.show=function(){if(1!=U){U=!0;0==z.query(!0)&&z.callbacks&&z.callbacks.sendRestartQuery(z.queryIndex);if(O)for(var R=0;5>R;R++)O[R]&&O[R].show();z.draw()}};this.hidden=function(R){if(0!=U){U=!1;1==cb.showTip&&(cb.showTip=!1,xGlobal.xTip.hidden());1!=R&&z.callbacks.sendPauseQuery(z.queryIndex);if(O)for(R=0;5>R;R++)O[R]&&O[R].hidden();ub.hidden();c.width=c.height=1;W=Ca=0}};this.isShow=function(){return U};this.setFormulaIds=function(R){var ka=
[];if(V)for(var qa=0;qa<V.length;qa++)ka[qa]=V[qa].getDrawLineList();V=[];Q.formulaIds=R;for(qa=0;qa<R.length;qa++){for(var Ha=new chartGraph(z.reRun,z.getTable,B),Za=0;Za<R[qa].length;Za++)Ha.setFormula(R[qa][Za],Za);V[qa]=Ha;V[qa].setFormulaTip(Q.formulaTips[qa])}if(V)for(qa=0;qa<V.length;qa++)V[qa].setDrawLineList(ka[qa],z.getXFromIndex_Graph,z.getIndexFromX_Graph,z.getDateFromIndex,z.getIndexFromDate)};this.setFormulaScript=function(R){Q.formulaScripts=R;for(var ka=0;ka<R.length;ka++){for(var qa=
new chartGraph(z.reRun,z.getTable,B),Ha=0;Ha<R[ka].length;Ha++)qa.initFormulaScript(R[ka][Ha],Ha);V[ka]=qa;V[ka].setFormulaTip(Q.formulaTips[ka])}};this.setFormula=function(R,ka,qa){-1==ka&&(ka=V.length-1);void 0==qa&&(qa=0);Q.formulaIds[ka][qa]=R;V[ka].setFormula(R,qa);Db--;z.run()};this.setFormulaTips=function(R){Q.formulaTips=xDeepCopy(R);for(R=0;R<Q.formulaTips.length;R++)if(V[0]){V[0].setFormulaTip(Q.formulaTips[R]);break}};this.getParentDiv=function(){return c};this.setXAxis=function(R){var ka=
JSON.stringify(Q.xAxis),qa=JSON.stringify(R);ka!=qa&&(Q.xAxis=R)};this.setVisibleItems=function(R){Q.chart.visibleItems!=R&&(R>Q.chart.maxVisibleItems?R=Q.chart.maxVisibleItems:0<Q.chart.visibleItems&&R<Q.chart.minVisibleItems&&(R=Q.chart.minVisibleItems),Pa=Q.chart.visibleItems=R)};this.setChartTitle=function(R){Q.chartTitle!=R&&(Q.chartTitle=R)};this.setOtherOption=function(R){for(var ka in R){var qa=R[ka];switch(ka){case "setQuery":z.setQueryInfo(qa);break;case "setXAxis":z.setXAxis(qa);break;
case "setFormulasType":var Ha=qa.type.toLowerCase(),Za=void 0;"kline"==Ha?Za=1:"minute"==Ha&&(Za=2);Za!=rb&&(rb=Za,1==Za?(null!=qa.initFormulas&&0>=zb.length&&(zb=qa.initFormulas),Jb=Q.formulaIds,z.setFormulaIds(zb)):2==Za&&(null!=qa.initFormulas&&0>=Jb.length&&(Jb=qa.initFormulas),zb=Q.formulaIds,z.setFormulaIds(Jb)));break;case "setFormulaIds":Ha=JSON.stringify(Q.formulaIds);Za=JSON.stringify(qa);Ha!=Za&&z.setFormulaIds(qa);break;case "setVariablesValue":z.setVariablesValue(qa);break;case "setPopupMenu":z.setPopupMenu(qa);
break;case "setTempCache":z.setTempCache();break;case "changeToCache":z.changeToCache();break;case "setVisibleItems":z.setVisibleItems(qa);break;case "setChartTitle":z.setChartTitle(qa)}}};this.setTempCache=function(){Ma=Pa};this.changeToCache=function(){z.setVisibleItems(Ma)};this.doRegionStatistics=function(){1==Q.regionStatistics.enable&&(gb=bb=null,Hb=!0,ub.setCursor("crosshair"))};this.toggleFormula=function(R){for(var ka=!1,qa=0;qa<Q.formulaIds.length;qa++)if(Q.formulaIds[qa][0]==R){ka=!0;Q.formulaIds.splice(qa,
1);break}0==ka&&(Q.formulaIds.length>=Q.maxGraphItems?Q.formulaIds[Q.formulaIds.length-1]=[R]:Q.formulaIds[Q.formulaIds.length]=[R]);z.setFormulaIds(Q.formulaIds);z.run(!1)};this.deleteFormula=function(R,ka){if(0<=R&&R<Q.formulaIds.length){if(null==ka)Q.formulaIds.splice(R,1);else{if(null==Q.formulaIds[R][ka])return;Q.formulaIds[R][ka]=null}z.setFormulaIds(Q.formulaIds);z.run()}};this.toggleScale=function(){Q.scale.scaleReverse=Q.scale.scaleReverse?!1:!0;z.draw(!0)};var S=function(){1==Q.xAxis.zoom&&
(Oa-=Math.floor((cb.index+1-Oa)/3),0>Oa&&(Oa=0),Pa+=Math.floor(Pa/3),Pa>Q.chart.maxVisibleItems&&(Pa=Q.chart.maxVisibleItems),Pa>T&&(Pa=T),0<Q.chart.visibleItems&&Pa<Q.chart.minVisibleItems&&(Pa=Q.chart.minVisibleItems),Lb(),z.draw(!0))},xa=function(){var R=Q.chart.minVisibleItems;Pa>R&&1==Q.xAxis.zoom&&(Oa+=Math.floor((cb.index+1-Oa)/3),Pa-=Math.floor(Pa/3),Pa<R&&(Pa=R),z.draw(!0))};this.chartZoomIn=S;this.chartZoomOut=xa;this.restoreDrawLine=function(R,ka,qa,Ha,Za,eb,pb){return V[0].restoreDrawLine(R,
ka,qa,Ha,Za,eb,pb)};this.isMyCanvas=function(R){return c==R||void 0!=ub&&ub.isMyCanvas(R)?!0:!1};this.query=function(R){Cb++;if(0!=U){if(1!=R&&(lb(),null==c||0==c.offsetWidth||0==c.offsetHeight))return!1;if(null!=G&&0!=G.length){var ka=!0,qa=!1;for(R=0;R<G.length;R++){if(G[R]&&G[R].name&&"formula_drawLine"==G[R].name){""!=Q.keyAction&&null!=B.keyAction?ka=!1:G[R]=null;break}G[R].name==Q.drawLineDb.http.query.name&&(qa=!0)}""!=Q.keyAction&&B&&null!=B.keyAction&&(1==ka?"http"!=Q.drawRequstType||qa||
G[R]||G[R-1].name==Q.drawLineDb.http.query.name||(G[R]=Q.drawLineDb.http.query):G[R]={name:"drawLine",sql:"select * from usr.chartDrawLine/'"+aboutMe.getAccount()+"' where key=_@2@_"+E+"_@2@_",prop:"saveDrawLine",noChartData:!0});for(qa=ka=0;qa<V.length;qa++){var Ha=V[qa].getQuerys();if(null!=Ha)for(R=0;R<Ha.length;R++){var Za;for(Za=0;Za<G.length;Za++)if(G[Za].name=="tag_"+qa+"_"+R){G[Za].sql=Ha[R].sql;G[Za].isDifferent=Ha[R].isDifferent;G[Za].server=Ha[R].server;break}Za==G.length&&(G[Za]={name:"tag_"+
qa+"_"+R,sql:Ha[R].sql,isDifferent:Ha[R].isDifferent},Ha[R].server&&(G[Za].server=Ha[R].server))}}aa=[];qa=!1;for(R=0;R<G.length;R++)if(null==G[R]||G[R].queryStatus)G[R]&&1==G[R].queryStatus&&(G[R].queryStatus=2);else{Za=Ha=null;if(G[R].server&&""!=G[R].server){var eb=G[R].server.slice(10);B&&B[eb]&&""!=B[eb]&&(Za=B[eb])}eb=null;G[R].http&&(eb=replaceVariablesValue(G[R].http,B,M));G[R]&&0!=G[R].limit&&(0==R||R>=G.length)&&void 0!=Oa&&(void 0==hb&&(null==Pa&&(Pa=10),hb=Pa+1+Q.chart.preReadItems),Ha=
[-1,hb]);G[R].isEnable=G[R].enable?getVariableValue(G[R].enable,B):!0;if(!G[R].sql||null!=eb&&"http"==eb.substr(0,4).toLowerCase())G[R].http&&eb&&""!=eb&&(G[R].field&&replaceVariablesValue(G[R].field,B,M),Za=G[R].script?replaceVariablesValue(G[R].script,B,M):replaceVariablesValue(G[R].condition,B,M),null==Za||""==Za||0<=Za.indexOf("{{ ")||(eb=";"+Za,null==Oa||null!=G[R].query&&eb==G[R].query.script||(null!=G[R].query&&eb==G[R].query.script||Tb++,G[R].query={script:eb,field:"",condition:Za,id:Tb,limit:Ha},
G[R].queryStatus=1,G[R].key&&(G[R].query.key=replaceVariablesValue(G[R].key,B,M)),z.callbacks.sendHttpQuery(z.queryIndex,G,R,z.setTable),ka++)));else if((eb=replaceVariablesValue(G[R].sql,B,M))&&-1==eb.indexOf("{{ ")&&(null==G[R].query||G[R].query.script!=eb||G[R].query.limit&&Ha&&(G[R].query.limit[0]!=Ha[0]||G[R].query.limit[1]!=Ha[1]))){if(null==G[R].query||G[R].query.script!=eb)G[R].isNewQuery=!0;qa=!0;G[R].queryStatus=1;G[R].server&&B&&B[G[R].server.slice(10)]&&(Za=B[G[R].server.slice(10)]);G[R].query=
1==G[R].noChartData?{script:eb,limit:Ha,server:Za,noChartData:!0}:{script:eb,limit:Ha,server:Za};G[R].query.cacheWindow=!0;aa[R]=eb}}Db=Cb;1==qa&&(z.callbacks?z.callbacks.sendQuery(z.queryIndex,G,z.setTable):GLink_client.sharedInstance().sendMessage("query",wa,Ea,Va,G,z.setTable),ka++);return 0<ka?!0:!1}}};var Ba=function(){if(Q.keyAction&&0<Q.keyAction.length&&B){null!=E&&null!=gb&&(Ia("update",gb),gb=null);E="";for(var R=0;R<Q.keyAction.length;R++){var ka=Q.keyAction[R];ka.startsWith("variables.")&&
(ka=ka.slice(10));B[ka]&&(E+=R==Q.keyAction.length-1?B[ka]:B[ka]+"_")}B.keyAction=E}},Ia=function(R,ka){if(Q.callback_onDrawLineChange){for(var qa=[],Ha=0;Ha<V.length;Ha++){var Za=V[Ha].getDrawLineList();if(Za.length)for(var eb=0;eb<Za.length;eb++)qa.push(Za[eb].getJSON())}Q.callback_onDrawLineChange(xDeepCopy(qa))}""!=Q.keyAction&&null!=B.keyAction&&null!=Q.drawRequstType&&(qa=function(pb){return pb.callback?pb.callback:function(mb){mb=z.getQueryInfo();for(var tb=0;tb<mb.length;tb++)if(mb[tb].name==
Q.drawLineDb.http.query.name){mb[tb].query.script=null;break}z.query(!0)}},"http"==Q.drawRequstType?ka?(Ha=ka.getJSON(),Za={data:{key:B.keyAction,id:Ha.id,formula:Ha.formula,data:JSON.stringify(Ha)},where:"id="+Ha.id},"update"==R?1==ka.isModified()&&(R=xDeepCopy(Q.drawLineDb.http.update),ka="userid='{{ userid }}' and key='{{ keyAction }}' and lineid='"+Ha.id+"' and linedata (=) '"+JSON.stringify(Ha)+"'",ka=replaceVariablesValue(ka,B,M),R.condition=ka,Ha=R.field+";"+ka,Tb++,R.query={script:Ha,field:R.field,
condition:ka,id:Tb},globalPage.sendHttpDrawUpdate(1,[R],qa(R))):"delete"==R&&(R=xDeepCopy(Q.drawLineDb.http.delete),ka="userid='{{ userid }}' and key='{{ keyAction }}' and lineid='"+Ha.id+"'",ka=replaceVariablesValue(ka,B,M),R.condition=ka,Ha=R.field+";"+ka,Tb++,R.query={script:Ha,field:R.field,condition:ka,id:Tb},globalPage.sendHttpDrawDelete(1,[R],qa(R)))):"deleteAll"==R&&(R=xDeepCopy(Q.drawLineDb.http.deleteAll),ka=replaceVariablesValue("userid='{{ userid }}' and key='{{ keyAction }}'",B,M),R.condition=
ka,Ha=R.field+";"+ka,Tb++,R.query={script:Ha,field:R.field,condition:ka,id:Tb},globalPage.sendHttpDrawDeleteAll(1,[R],qa(R))):"sql"==Q.drawRequstType&&aboutMe&&(ka?(Ha=ka.getJSON(),Za={data:{key:E,id:Ha.id,formula:Ha.formula,data:JSON.stringify(Ha)},where:"id="+Ha.id},"update"==R?1==ka.isModified()&&aboutMe.update(Za,"usr.chartDrawLine/'"+aboutMe.getAccount()+"'"):"insert"==R?1==ka.isModified()&&aboutMe.insert(Za,"usr.chartDrawLine/'"+aboutMe.getAccount()+"'"):"delete"==R&&(Za.data.key=null,Za.data.formula=
null,Za.data.data=null,Za.where=null,aboutMe.delete(Za,"usr.chartDrawLine/'"+aboutMe.getAccount()+"'"))):"deleteAll"==R&&(Za={data:{key:[E]}},aboutMe.delete(Za,"usr.chartDrawLine/'"+aboutMe.getAccount()+"'"))))};this.setDrawLineData=function(R){Pb=R;z.onDeleteAllDrawLine(!0);for(var ka=0,qa=0;qa<V.length;qa++)ka+=V[qa].restoreDrawLine(R,H,z,z.getXFromIndex,z.getIndexFromX,z.getDateFromIndex,z.getIndexFromDate);ka&&z.drawLayers()};this.setVariablesValue=function(R,ka){var qa=!1;if("Object"==R.constructor.name&&
null==ka)for(var Ha in R)B[Ha]!=R[Ha]&&(B[Ha]=R[Ha],qa=!0);else if(ka)for(Ha in B)for(var Za=0;Za<R.length;Za++)R[Za][0]==Ha&&B[Ha]!=ka[Za]&&(B[Ha]=ka[Za],qa=!0);1==qa?(setCallback_VariablesValue(Wa,B),Ba(),hb=Pa+1+Q.chart.preReadItems,z.query(),u("setVariables",0)):lb()};this.submit=function(R){"String"==R.constructor.name&&(R=[{submit:R,callback:null}]);for(var ka={},qa=0;qa<R.length;ka={$jscomp$loop$prop$state$517:ka.$jscomp$loop$prop$state$517},qa++){var Ha=getSubmissionContents(N,R[qa].submit);
ka.$jscomp$loop$prop$state$517=!0;Ha.map(function(Za){return function(eb){if(eb.beforeSubmit){var pb=Qa();pb.query=eb;1!=eb.beforeSubmit(pb)&&(Za.$jscomp$loop$prop$state$517=!1)}}}(ka));if(0==ka.$jscomp$loop$prop$state$517)break;1==R[qa].query&&(R[qa].callback=z.reload);z.sendSubmit(Ha,R[qa].callback)}};this.sendSubmit=function(R,ka,qa){for(var Ha=0;Ha<R.length;Ha++)if(null!=R[Ha])if(R[Ha].sql){var Za=replaceVariablesValue(R[Ha].sql,B,M);var eb;R[Ha].server&&B&&B[R[Ha].server.slice(10)]&&(eb=B[R[Ha].server.slice(10)]);
R[Ha].query={script:Za,limit:void 0,server:eb};z.callbacks.sendSubmit(z.queryIndex,R,ka)}else if(R[Ha].http){var pb=replaceVariablesValue(R[Ha].field,B,M,qa),mb=replaceVariablesValue(R[Ha].condition,B,M,qa);Za=pb+";"+mb;null!=R[Ha].query&&Za==R[Ha].query.script||Tb++;R[Ha].query={script:Za,limit:null,field:pb,condition:mb,id:Tb,server:R[Ha].http};z.callbacks.sendHttpSubmit(z.queryIndex,R,Ha,ka)}};this.setSubmitList=function(R){N=xDeepCopy(R)};this.funcNameMap={setVariablesValue:z.setVariablesValue};
this.synchBoundValue=function(R,ka,qa,Ha,Za){if(Ha!=z&&void 0!=Wa&&0<Wa.length&&qa){for(var eb=Za,pb=0;pb<qa.length;pb++)if(null!=qa[pb]&&null!=qa[pb].bound)for(var mb=0;mb<Wa.length;mb++)if((null==Wa[mb].type||"synch"==Wa[mb].type||"receive"==Wa[mb].type)&&Wa[mb].id==qa[pb].bound.id&&Wa[mb].variable==qa[pb].bound.variable){if("variables."==qa[pb].bound.variable.slice(0,10)){mb=qa[pb].bound.variable.slice(10);try{if(B[mb]!=qa[pb].value&&(B[mb]=qa[pb].value,eb=!0,G))for(var tb=0;tb<G.length;tb++)G[tb].server&&
G[tb].server=="variables."+mb&&G[tb].query&&G[tb].query.server!=B[mb]&&(G[tb].queryStatus=null,G[tb].query=null,M&&M[tb]&&(M[tb]=null))}catch(Zb){console.log(Zb)}}else if(qa[pb].bound.variable)try{eval(qa[pb].bound.variable)!=qa[pb].value&&(tb=qa[pb].bound.variable+"=boundValue[i].value",eval(tb),eb=!0)}catch(Zb){console.log(Zb)}break}1==eb&&(Ba(),Da(),hb=Pa+1+Q.chart.preReadItems,z.query(),null==Ha&&(null==z.page?globalPage.getActivePage().synchBoundValue(R,ka+1,qa,z,Za):z.page.synchBoundValue(R,
ka+1,qa,z,Za)),A("synchBoundValue")&&(null==qa.afterCallbackObjectList&&(qa.afterCallbackObjectList=[]),qa.afterCallbackObjectList[qa.afterCallbackObjectList.length]=z))}};this.afterSynchBoundValue=function(R,ka,qa){var Ha=A("synchBoundValue");if(Ha)for(var Za=0;Za<Ha.length;Za++)Ha[Za].callback&&Ha[Za].callback(z,R,ka,qa)};this.clearQueryData=function(){M=null;if(G)for(var R=0;R<G.length;R++)G[R]&&G[R].query&&(G[R].query.script&&(G[R].query.script=null),G[R].query.condition&&(G[R].query.condition=
null));Da()};this.setTable=function(R,ka,qa,Ha){if(null!=Ha){if(Ha.errorCode==ERRORHTTP.NULL_MUST_PARAM)if("Array"==G.constructor.name)G[Ha.queryIndex].queryStatus=null;else if("String"==G.constructor.name&&-1!=G.indexOf("{{")){var Za=G;Za=replaceVariablesValue(Za,B,M);Za[Ha.queryIndex].queryStatus=null}}else{if(1==qa)Cb=0;else if(1!=U)for(Ha=0;Ha<G.length;Ha++)if(G[Ha]){G[Ha].queryStatus=null;return}var eb=!1,pb=!1,mb=R[0];if(G&&M)if(G[0]&&M[0]&&R&&R[0]&&R[0].updateCounter!=G[0].updateCounter){if(1==
G[0].isNewQuery&&(eb=!0,cb.index=null,G[0].isNewQuery=!1),null==cb.index||null!=ia&&Oa+Pa>=T+Q.chart.reserveItems)pb=!0}else{if(G[0]&&(1==G[0].queryStatus||2==G[0].queryStatus))return;mb=M[0]}else{if(null==G[0].queryStatus)return;eb=!0;G[0]&&1==G[0].isNewQuery&&(G[0].isNewQuery=!1)}if(mb&&mb.table&&mb.table.info&&mb.table.info.key){if(mb&&mb.table.info.key&&mb.data&&0<mb.data.length){for(Ha=0;Ha<R.length;Ha++)R[Ha]&&R[Ha].updateCounter!=G[Ha].updateCounter&&(G[Ha].queryStatus=null);for(Ha=1;Ha<R.length;Ha++)if(R[Ha]&&
R[Ha].table&&!(null==R[Ha].table.info.key||R[Ha].table.info.key==mb.table.info.key||G[Ha]&&G[Ha].isDifferent))return}null==M&&(M=[]);M[0]=xDeepCopy(R[0]);mb=[];for(Ha=1;Ha<M.length;Ha++)M[Ha]&&M[Ha].table&&M[Ha].table.isCustom&&mb.push(xDeepCopy(M[Ha]));for(Ha=1;Ha<R.length;Ha++)R[Ha]&&R[Ha].table&&(null==R[Ha].table.info.key||R[Ha].table.info.key==R[0].table.info.key||G[Ha]&&G[Ha].isDifferent?M[Ha]=xDeepCopy(R[Ha]):R[Ha].updateCounter!=G[Ha].updateCounter&&(G[Ha].queryStatus=null,G[Ha].isNewQuery=
!1));for(Ha=0;Ha<mb.length;Ha++){for(var tb=!1,Zb=0;Zb<M.length;Zb++)M[Zb]&&M[Zb].table&&M[Zb].table.info.name==mb[Ha].table.info.name&&(tb=!0);tb||M.push(mb[Ha])}}else if(fc){mb=[];for(Ha=0;Ha<M.length;Ha++)M[Ha]&&M[Ha].table.isCustom&&mb.push(JSON.parse(JSON.stringify(M[Ha])));M=[].concat($jscomp.arrayFromIterable(xDeepCopy(R)),$jscomp.arrayFromIterable(mb))}else M=xDeepCopy(R);if(G&&M)for(Ha=0;Ha<G.length;Ha++)G[Ha]&&M[Ha]&&M[Ha].updateCounter!=G[Ha].updateCounter&&(G[Ha].updateCounter=M[Ha].updateCounter,
G[Ha].callback_onMessage&&G[Ha].callback_onMessage(M[Ha],ka,qa,Qa(),M),G[Ha].queryStatus=null,G[Ha].isNewQuery=!1,0!=Ha&&(ma=xGlobal.refreshCounter));null==R||null==R[0]||null==R[0].table?(T=fa=ia=0,M=null):(ia=R[0].table.info.dataBegin,fa=R[0].table.info.dataRows,T=R[0].table.info.totalRows);Ha=!1;0<T?(null==M||null==M[0]||null==M[0].table||M[0].table.info.name!==R[0].table.info.name?(0<Q.chart.visibleItems&&T?(Oa=T-Pa+Q.chart.reserveItems,cb.index=T-1,0==Q.xAxis.move&&0>Oa&&(Oa=0)):Oa=0,Ha=!0):
1==Q.xAxis.move?(Za=Oa,1==pb?Oa=T-Pa+Q.chart.reserveItems:1==eb&&(cb.index=T-1,Oa=cb.index-Pa+Q.chart.reserveItems),1==Ab?(Ra+=Oa-Za,Gb+=Oa-Za):1==Sb&&(fb+=Oa-Za)):0<Q.chart.visibleItems||(Oa=0),null==cb.index&&(cb.index=T-1)):cb.index=null;null==O?Da():O&&O[0]&&Da();wb();Ha&&(0<Q.chart.visibleItems&&T?(Oa=T-Pa+Q.chart.reserveItems+1,0==Q.xAxis.move&&0>Oa&&(Oa=0)):Oa=0);$a.calc=!1;0>=Q.chart.visibleItems&&(Pa=T,Pa>Q.chart.maxVisibleItems?Pa=Q.chart.maxVisibleItems:0<Q.chart.visibleItems&&Pa<Q.chart.minVisibleItems&&
(Pa=Q.chart.minVisibleItems));if(1==$a.isShow&&(Ha=ob(M[0].table),Ha.data)){R=Ha.data;for(Ha=0;Ha<fa;Ha++)if(R[Ha]&&R[Ha]>=$a.tipBeginDate){$a.beginIndex=Ha+ia;break}for(Ha=0;Ha<R[Ha];Ha++)if(R[Ha]&&R[Ha]>=$a.tipEndDate){$a.endIndex=Ha+ia;break}$a.tipBeginIndex=$a.beginIndex+1}for(Ha=0;Ha<V.length;Ha++)V[Ha].relocate(Oa-Za,z.getIndexFromDate);R=!1;if(M)for(Ha=0;Ha<M.length;Ha++)if("http"==Q.drawRequstType&&M[Ha]&&M[Ha].table&&M[Ha].table.info&&M[Ha].table.info.name==Q.drawLineDb.http.query.name){null==
G[Ha].queryStatus&&(R=!0);break}Lb();if(1!=R&&!Pb)for(gb=null,Ha=0;Ha<V.length;Ha++)V[Ha].deleteAllDrawLine();Za=0;if(R&&1!=Bb&&M[0]&&M[0].table)for(Ha=0;Ha<M.length;Ha++)if("http"==Q.drawRequstType&&M[Ha]&&M[Ha].table&&M[Ha].table.info&&M[Ha].table.info.name==Q.drawLineDb.http.query.name){for(R=0;R<V.length;R++)Za+=V[R].restoreDrawLine(M[Ha].table,H,z,z.getXFromIndex,z.getIndexFromX,z.getDateFromIndex,z.getIndexFromDate);break}z.run(!1);for(Ha=0;5>Ha;Ha++)if(z.getGrid(Ha)){z.draw(!0);break}Za&&z.drawLayers();
G&&1<G.length&&z.query()}};this.addCustomData=function(R,ka,qa){var Ha=!1,Za={},eb=[],pb;for(pb in qa)eb.push([pb,"c"]);"tm"==ka.type?eb.unshift(["Time","tm"]):eb.unshift(["Date","dd"]);var mb={compressed:"0",dataRange:ka.timeArray.length,mode:"table",rank:"col",rows:ka.timeArray.length,thisBegin:1,totalRows:ka.timeArray.length};Za.data=[];Za.data.push([].concat($jscomp.arrayFromIterable(ka.timeArray)));for(pb in qa)Za.data.push([].concat($jscomp.arrayFromIterable(qa[pb])));Za.field=eb;Za.flag={};
Za.info=mb;Za.isCustom=!0;Za.name=R;Za.gid={name:R};Za.info.name=R;for(ka=0;ka<M.length;ka++)M[ka]&&1==M[ka].table.isCustom&&M[ka].table.info.name==R&&(Ha=!0,M[ka]={table:Za,isEnable:!0});Ha||(M.push({table:Za,isEnable:!0}),fc=!0);z.run()};this.delCustomData=function(R){if("string"==typeof R){for(var ka=!1,qa=0;qa<M.length;qa++)if(M[qa]&&M[qa].table.isCustom&&(ka=!0),M[qa]&&M[qa].table&&M[qa].table.isCustom&&M[qa].table.name&&M[qa].table.name==R){M.splice(qa,1);break}ka||(fc=!1);z.run()}};this.resetChart=
function(){wb();z.run(!1)};this.getQueryData=function(){return M};this.setScheme=function(R,ka){if(R!=la||ka!=Na){R.xChart&&R.xChart[ka]&&xCopyAllTo(R.xChart[ka],Q);if(O&&R.xControl)for(var qa=0;5>qa;qa++)O[qa]&&O[qa].setScheme(R.xControl,ka);for(qa=0;qa<V.length;qa++){var Ha=V[qa].getGraphCells();Ha&&Ha.setScheme(R.xControl,ka)}la=R;Na=ka;z.draw(!0);1==$a.isShow&&ab&&(ab.setGrid(Q.regionStatistics.statistics.cells,Q.regionStatistics.statistics),ab.draw(!0))}};this.setParentDiv=function(R){ta=R};
this.setOption=function(R,ka){ka=void 0===ka?!0:ka;sa=Q.chart.visibleItems;ra=Q.chart.reserveItems;var qa=xDeepCopy(Q.formulaIds);1==ka?xCopyTo(R,Q):xCopyAllTo(R,Q);R.margin&&(Q.marginLeft=R.margin,Q.marginTop=R.margin,Q.marginRight=R.margin,Q.marginBottom=R.margin);R.marginLeft&&(Q.marginLeft=R.marginLeft);R.marginTop&&(Q.marginTop=R.marginTop);R.marginRight&&(Q.marginRight=R.marginRight);R.marginBottom&&(Q.marginBottom=R.marginBottom);""!=Q.drawLineDb.http.query&&""!=Q.drawLineDb.http.update&&""!=
Q.drawLineDb.http.delete?Q.drawRequstType="http":""!=Q.drawLineDb.sql.query&&""!=Q.drawLineDb.sql.update&&""!=Q.drawLineDb.sql.delete&&(Q.drawRequstType="sql");R.regionStatistics&&(Q.regionStatistics=xDeepCopy(R.regionStatistics));sa!=Q.chart.visibleItems&&ra!=Q.chart.reserveItems&&(Pa=0>=Q.chart.visibleItems?T:Q.chart.visibleItems);null!=qa&&""!=qa||""==Q.formulaScripts?null!=qa&&""!=qa?qa.toString()!=Q.formulaIds.toString()&&z.setFormulaIds(Q.formulaIds):z.setFormulaIds(Q.formulaIds):z.setFormulaScript(Q.formulaScripts);
R.grid&&(null==Q.grid?Q.grid=xDeepCopy(R.grid):xCopyAllTo(R.grid,Q.grid));R.gridBottom&&(null==Q.gridBottom?Q.gridBottom=xDeepCopy(R.gridBottom):xCopyAllTo(R.gridBottom,Q.gridBottom));R.xAxis&&(null==Q.xAxis?Q.xAxis=xDeepCopy(R.xAxis):xCopyAllTo(R.xAxis,Q.xAxis));R.gridLeft&&(null==Q.gridLeft?Q.gridLeft=xDeepCopy(R.gridLeft):xCopyAllTo(R.gridLeft,Q.gridLeft));R.gridRight&&(null==Q.gridRight?Q.gridRight=xDeepCopy(R.gridRight):xCopyAllTo(R.gridRight,Q.gridRight));R.callback_onOperate&&(Q.callback_onOperate=
R.callback_onOperate);R.callback_onKeydown&&(Q.callback_onKeydown=R.callback_onKeydown);R.callback_mouseOut&&(Q.callback_mouseOut=R.callback_mouseOut);R.callback_mouseOver&&(Q.callback_mouseOver=R.callback_mouseOver);R.callback_mouseMove&&(Q.callback_mouseMove=R.callback_mouseMove);R.callback_onDrawLineChange&&(Q.callback_onDrawLineChange=R.callback_onDrawLineChange);Q.$pointer=R.$pointer?R.$pointer:null;Da();wb();$a.tipBeginIndex=-1;z.run();ya=-1;z.draw();z.page&&z.page.setPageBoundStatusForObject(z);
va()};this.setToggle=function(R){R=R.split(".");switch(R[0]){case "option":var ka=Q;break;case "variables":ka=B}if(ka)for(var qa=1;qa<R.length;qa++)if(ka&&null!=ka[R[qa]]){if(qa==R.length-1){null!=ka[R[qa]]&&(ka[R[qa]]=ka[R[qa]]?!1:!0,z.query(),z.draw(!0));break}ka=ka[R[qa]]}};this.reCreateGrid=function(R){Da();z.draw(!0)};this.getGridCells=function(R){return O[R]};this.modifyGridCellSetById=function(R,ka,qa){var Ha=this.getGrid(R);if(Ha){a:{Ha=Ha.init.vBox;for(var Za=0;Za<Ha.length;Za++)for(var eb=
0;eb<Ha[Za].length;eb++)if(Ha[Za]&&Ha[Za][eb]&&Ha[Za][eb].id==ka){Ha=Ha[Za][eb];break a}Ha=void 0}Ha&&(xCopyTo(qa,Ha),O[R]&&(O[R].modifyGridCellSetById(ka,qa),O[R].setValue(0,M,B)))}};this.getGrid=function(R){switch(R){case 0:case "top":if(Q.grid&&Q.grid.init&&Q.grid.init.vBox)var ka=Q.grid;break;case 1:case "bottom":Q.gridBottom&&Q.gridBottom.init&&Q.gridBottom.init.vBox&&(ka=Q.gridBottom);break;case 2:case "left":Q.gridLeft&&Q.gridLeft.init&&Q.gridLeft.init.vBox&&(ka=Q.gridLeft);break;case 3:case "right":Q.gridRight&&
Q.gridRight.init&&Q.gridRight.init.vBox&&(ka=Q.gridRight);break;case 4:1==Q.thumbnail.show&&(ka={init:{vBox:[[{type:"xSaftThumbnail",id:"@xchartThumbnail",option:Q.thumbnail,callback:z.setXScrollCursorPosition}]]}})}return ka};var Da=function(){for(var R=0;5>R;R++){var ka=z.getGrid(R);ka&&(null==O&&(O=[]),ka=createGrid(ka.init.vBox,M,B),ka=makeCells(ka,"hBox",z.draw),O[R]=new xCells(z,ka,"vBox",B),O[R].setValue(0,M,B),la&&Na&&la.xControl&&O[R].setScheme(la.xControl,Na))}};this.setBounds=function(R){Wa=
R};var lb=function(){z.page&&z.page.setPageBoundStatusForObject(z)};this.setEngine=function(R){xCopyTo(R,Q.dataPrepare);z.prepareEngineData();$a.tipBeginIndex=-1;z.run();lb()};var wb=function(){var R=function(Za){if("String"==Za.constructor.name){if(Za=Za.split("."),2==Za.length&&"variables"==Za[0])return B[Za[1]]}else return Za};null==X&&(X=new chartEngineData);var ka=null;Q.dataPrepare&&Q.dataPrepare.dividend&&(ka={dividend:Q.dataPrepare.dividend});var qa={type:Q.scale.xScale.type},Ha=new Date;
qa.endDate=1E4*Ha.getFullYear()+100*(Ha.getMonth()+1)+Ha.getDate();qa.startDate=qa.endDate-1E4;Q.scale.xScale.startDate&&Q.scale.xScale.endDate&&(qa.startDate=R(Q.scale.xScale.startDate),qa.endDate=R(Q.scale.xScale.endDate));qa.synchType=G[0].synchType;qa.synchField=G[0].synchField;X.setDataTable(M,ka,qa);X.setQueryInfo(G);X.visibleItems=Pa;X.visibleItems=Pa;ia=X.dataBegin;fa=X.dataRows;T=X.totalRows};this.reRun=function(){0==z.query()&&z.run()};this.run=function(R){R=void 0===R?!0:R;if(null!=X){var ka=
X.getEngineData();1==R&&wb();if(ka)for(R=0;R<V.length;R++)V[R]&&V[R].run(ka,Q.dataPrepare);ya=-1;z.draw(!0);z.drawLayers()}};this.getTable=function(R){for(var ka in B){var qa=B[ka],Ha="/{{ "+ka+" }}/g";R=R.replace(Ha,qa);R=R.replace(Ha,qa);R=R.replace(Ha,qa);R=R.replace(Ha,qa)}ka=X.getEngineData();for(qa=0;qa<G.length;qa++)if(G[qa].query&&G[qa].query.script.toLowerCase()==R.toLowerCase()&&(Ha={},ka[qa])){if((R=ka[qa].table)&&R.field)for(var Za=0;Za<R.field.length;Za++)Ha[R.field[Za][0]]=ka[qa].engineData&&
ka[qa].engineData[Za]?ka[qa].engineData[Za]:R.data[Za];return Ha}if(aa)for(qa=0;qa<aa.length;qa++)if(aa[qa]&&aa[qa].toLowerCase()==R.toLowerCase()){Ha={};if((R=ka[qa]?ka[qa].table:{})&&R.field)for(Za=0;Za<R.field.length;Za++)Ha[R.field[Za][0]]=ka[qa].engineData&&ka[qa].engineData[Za]?ka[qa].engineData[Za]:R.data[Za];return Ha}};var Fa=function(R,ka,qa){if(R&&R.field&&R.data){ka=ka.toUpperCase();for(var Ha=0;Ha<R.field.length;Ha++)if(R.field[Ha][0].toUpperCase()==ka)return 1==qa&&X.getTable&&X.getTable()[Ha]&&
X[0][Ha]?X[0][Ha]:R.data[Ha]}},Nb=function(R,ka){if(R&&R.field&&R.data){ka=ka.toUpperCase();for(var qa=0;qa<R.field.length;qa++)if(R.field[qa][0].toUpperCase()==ka)return R.field[qa][1].toUpperCase()}},yb=function(R){var ka=Oa;0>ka&&(ka=0);var qa=V[0].getXAxis(),Ha=V[0].getXAxisName();null==Ha&&(Ha=qa);R.beginPath();var Za=xGlobal.systemFontOffsetY;R.font=getFontSizeWithFont(Q.scale.bottom.fontSize,Q.scale.bottom.fontFamily);R.textBaseline="top";R.textAlign="center";R.fillStyle=Q.scale.bottom.textColor;
var eb=z.getXFromIndex(ka)-40,pb,mb=!1;Q.scale.xLine&&(mb=!0);var tb=!1;Q.scale.bottom&&Q.scale.bottom.scaleColor&&""!=Q.scale.bottom.scaleColor&&(tb=!0);for(pb=ka;pb<Oa+Pa&&pb<qa.length;pb++)ka=z.getXFromIndex(pb),1==mb&&(R.moveTo(ka,ea.top+1),R.lineTo(ka,ea.top+ea.height)),1==Q.scale.bottom.show&&35<=ka-eb&&(eb=ka,R.fillText(Ha[pb],ka,ea.top+ea.height+Za+2+(1==tb?3:0)));R.stroke();R.closePath()},xb=function(R){var ka=Oa;ka<ia&&(ka=ia);var qa=V[0].getXAxis();if(null!=qa&&null!=M&&null!=M[0])if(qa[0]&&
"String"==qa[0].constructor.name)yb(R);else{var Ha=Math.floor(qa[ka-ia]/100);R.beginPath();var Za=xGlobal.systemFontOffsetY;R.font=getFontSizeWithFont(Q.scale.bottom.fontSize,Q.scale.bottom.fontFamily);R.textBaseline="top";R.textAlign="center";R.fillStyle=Q.scale.bottom.textColor;var eb=z.getXFromIndex(ka)-40,pb=35,mb,tb=M[0].table;if(null!=tb){var Zb=!1;Q.scale.xLine&&(Zb=!0);var Rb=!1;Q.scale.bottom&&Q.scale.bottom.scaleColor&&""!=Q.scale.bottom.scaleColor&&(Rb=!0);var ac=[];if(tb.exchTime&&tb.exchTime.table&&
tb.exchTime.table.data&&tb.exchTime.table.data[0]&&tb.exchTime.table.data[0][0]){R.textAlign=Q.scale.bottom.align;pb=tb.exchTime.table.data[0][0];var hc=0,ic=30,mc=-100;for(mb=eb=Ha=0;1E3>mb;mb++){ka=z.getXFromIndex(0);var Ib=z.getXFromIndex(ic);if(40<Ib-ka||1440<ic)break;ic*=2}for(mb=0;mb<qa.length&&hc<pb.length;mb++)if(qa[mb]==pb[hc][0]){for(var Yb=mb;qa[Yb]<=pb[hc][1];Yb+=ic)if(Ib=z.getXFromIndex(Yb),ka=v(qa[Yb],"HH:mm"),1==Rb&&(ac[ac.length]=Ib),1==Zb&&Ib>ea.left+4&&(R.moveTo(Ib,ea.top+1),R.lineTo(Ib,
ea.top+ea.height-1)),1==Q.scale.bottom.show&&36<Ib-mc){8>Ib&&(R.textAlign="left");mc=R.measureText(ka).width;var oc=Ib+mc/2;oc>ea.width+ea.left&&oc>c.offsetWidth-8&&(Ib-=mc/2);eb||(eb=Ib-mc/2);R.fillText(ka,Ib,ea.top+ea.height+Za+5);Ha++;8>Ib&&(R.textAlign=Q.scale.bottom.align);mc=Ib}hc++;if(hc==pb.length){for(;mb<qa.length;mb++)if(qa[mb]==pb[hc-1][1]){Ib=z.getXFromIndex(mb);1==Rb&&(ac[ac.length]=Ib);1==Zb&&Ib<ea.left+ea.width-4&&(R.moveTo(Ib,ea.top+1),R.lineTo(Ib,ea.top+ea.height-1));1==Q.scale.bottom.show&&
36<Ib-mc&&(ka=v(qa[mb],"HH:mm"),R.textAlign=Ib>ea.left+ea.width-8&&Ib>c.offsetWidth-8?"right":"center",R.fillText(ka,Ib,ea.top+ea.height+Za+5),mc=Ib);break}break}}if(tb.last&&1<tb.last.length)for(Ib=tb.last.length,Yb=z.getXFromIndex(tb.last[Ib-2][1]+parseInt(tb.last[Ib-2][2]/2)),pb=(Ib-2)%2,mb=0;mb<tb.last.length-1;mb++)Ib=z.getXFromIndex(tb.last[mb][1]+tb.last[mb][2]),1==Rb&&(ac[ac.length]=Ib),1==Zb&&(R.moveTo(Ib,ea.top+1),R.lineTo(Ib,ea.top+ea.height-1)),1==Q.scale.bottom.show&&(Ib=""+parseInt(tb.last[0][0]/
1E4)+"/"+parseInt(tb.last[0][0]/100%100)+"/"+parseInt(tb.last[0][0]%100),Ib=R.measureText(Ib).width,ka=""+parseInt(tb.last[mb][0]/1E4)+"/"+parseInt(tb.last[mb][0]/100%100)+"/"+parseInt(tb.last[mb][0]%100),Ib*(tb.last.length+Ha)>ea.width&&(ka=""+parseInt(tb.last[mb][0]/100%100)+"/"+parseInt(tb.last[mb][0]%100),Ib=R.measureText(ka).width),Ib/2+Yb>eb&&mb%2==pb||(R.textAlign="center",R.fillText(ka,z.getXFromIndex(tb.last[mb][1]+parseInt(tb.last[mb][2]/2)),ea.top+ea.height+Za+5)))}else if(qa)if("time"==
Q.scale.xScale.type){Ib=15;ka=-100;for(Ha=0;Ha<qa.length;Ha++){tb=z.getXFromIndex(0);eb=z.getXFromIndex(Ib);if(40<eb-tb||1440<Ib)break;Ib*=2}tb=new Date;for(Ha=Yb=0;Ha<qa.length;Ha++)if(tb.setTime(qa[Ha]),eb=tb.getMinutes(),0==eb/15%1&&0==Yb||0!=Yb)Ha+1<qa.length&&(tb.setTime(qa[Ha+1]),Yb=tb.getMinutes(),eb+1!=Yb&&Ha++),eb=z.getXFromIndex(Ha),1==Rb&&(ac[ac.length]=eb),1==Zb&&eb>ea.left+4&&(R.moveTo(eb,ea.top+1),R.lineTo(eb,ea.top+ea.height-1)),1==Q.scale.bottom.show&&40<eb-ka&&(ka=v(qa[Ha],"HH:mm"),
R.fillText(ka,eb,ea.top+ea.height+Za+5),ka=eb),Yb=Ha,Ha+=Ib-1}else if(29990101<qa[0]||29990101<qa[qa.length-1])for(Yb=new Date,Yb.setTime(qa[ka]),Ha=1E4*Yb.getFullYear()+100*(Yb.getMonth()+1)+Yb.getDate(),pb=eb=-100,tb=1,mb=ka+1;mb<Oa+Pa&&mb<ia+qa.length;mb++)Yb.setTime(qa[mb-ia]),ka=1E4*Yb.getFullYear()+100*(Yb.getMonth()+1)+Yb.getDate(),Ha!=ka&&0==ka%tb&&(Ib=z.getXFromIndex(mb),35<=Ib-pb&&(pb=Ib,1==Rb&&(ac[ac.length]=Ib),1==Zb&&(R.moveTo(Ib,ea.top+1),R.lineTo(Ib,ea.top+ea.height-1)),1==Q.scale.bottom.show&&
35<=Ib-eb&&(eb=Ib,R.fillText(Math.floor(ka/100)%100+"/"+ka%100,Ib,ea.top+ea.height+Za+5))),Ha=ka);else{hc=function(jc,Cc){1==Rb&&(ac[ac.length]=jc);1==Zb&&(R.moveTo(jc,ea.top+1),R.lineTo(jc,ea.top+ea.height));null!=Q.scale.bottom.format&&""!=Q.scale.bottom.format&&"auto"!=Q.scale.bottom.format&&(Cc=getValueFormatString(qa[mb],"dd",Q.scale.bottom.format));R.fillText(Cc,jc,ea.top+ea.height+Za+5+(1==Rb?3:0))};oc=mc=0;tb=100;ic=[];for(mb=ka;mb<Oa+Pa&&mb<qa.length+ia&&null==qa[mb-ia];mb++);for(;mb<Oa+
Pa&&mb<qa.length+ia;mb++){var qc=Math.floor(qa[mb-ia]/100);Ha!=qc&&((Yb=Math.floor(Ha/tb)!=Math.floor(qc/tb)?!0:!1)&&ic.push({index:mb,value:qc}),Ha=qc,Ib=z.getXFromIndex(mb),mc+=Ib-eb,eb=Ib,oc++)}var nc=1;"all"==Q.scale.xScale.type?(tb=1,pb=16):0<oc&&(mc/=oc,36>mc&&(nc=Math.round(36/mc)+1,4==nc||5==nc?nc=6:6<nc&&12>=nc?nc=100:12<nc&&(tb=1E4,nc=Math.ceil(nc/12))));Ha=Math.floor(qa[ka-ia]/tb)-1;eb=-100;for(Yb=0;Yb<ic.length;Yb++)Ib=z.getXFromIndex(ic[Yb].index),Ib-eb<pb||(eb=Ib,hc(Ib,Math.floor(ic[Yb].value/
100)));eb=-100;for(mb=ka;mb<Oa+Pa&&mb<qa.length&&null==qa[mb-ia];mb++);for(mb=ka;mb<Oa+Pa&&mb<qa.length+ia;mb++)if(qc=Math.floor(qa[mb-ia]/tb),Ha!=qc&&(Yb=Math.floor(Ha/tb)!=Math.floor(qc/tb)?!0:!1,0==(qc%100-1)%nc||1==Yb))Ib=z.getXFromIndex(mb),Ha=qc,ka=1==Yb||1E4==tb?1E4==tb?Ha:100==tb?Math.floor(Ha/100):Ha%100:Ha%100,1!=Q.scale.bottom.show||Yb||9999>qc||(1<nc&&100>nc&&ic.length?(Yb=ic.findIndex(function(jc){return jc.value==qc-nc}),oc=Yb+1,0>Yb?mb<ic[0].index?Ib-eb>=pb&&!(Ib+pb>z.getXFromIndex(ic[0].index))&&
(hc(Ib,ka),eb=Ib):Ib-eb>=pb&&(hc(Ib,ka),eb=Ib):(mc=z.getXFromIndex(ic[Yb].index),(oc=ic[oc]?z.getXFromIndex(ic[oc].index):null)?-1<Yb&&Ib>mc+pb&&Ib<oc-pb&&Ib-eb>pb&&(hc(Ib,ka),eb=Ib):-1<Yb&&Ib>mc+pb&&Ib-eb>pb&&(hc(Ib,ka),eb=Ib))):(hc(Ib,ka),eb=Ib))}1==Zb&&(Ib=parseLineSet(Q.scale.xLine,1,"#eee"),R.strokeStyle=Ib.color,R.lineWidth=Ib.width,R.setLineDash(Ib.dash),R.stroke());R.closePath();if(1==Rb&&0<ac.length){R.beginPath();R.strokeStyle=Q.scale.bottom.scaleColor;R.setLineDash([0]);for(mb=0;mb<ac.length;mb++)R.moveTo(ac[mb],
ea.top+ea.height),R.lineTo(ac[mb],ea.top+ea.height+3);R.stroke();R.closePath()}R.setLineDash([])}}};this.draw=function(R){if(null!=c&&1!=J){J=!0;var ka=c.parentElement.offsetWidth,qa=c.parentElement.offsetHeight;if(0!=ka&&0!=qa&&(1==R||W!=ka||Ca!=qa||ca!=Oa||ya!=Pa||1==R)&&(0==Q.cursor.show?cb.isShow=!1:1==Q.cursor.showAlways&&(cb.isShow=!0),Cb==Db||1!=z.query())){var Ha=!1;if(W!=ka||Ca!=qa)Ha=!0;W=ka;Ca=qa;ca=Oa;ya=Pa;ea.left=0;ea.top=0;ea.width=ka;ea.height=qa;Q.marginLeft&&(ea.left+=Q.marginLeft,
ea.width-=Q.marginLeft);Q.marginTop&&(ea.top+=Q.marginTop,ea.height-=Q.marginTop);Q.marginRight&&(ea.width-=Q.marginRight);Q.marginBottom&&(ea.height-=Q.marginBottom);var Za=xDeepCopy(ea);null==C&&(C=c.getContext("2d"));na=getPixelRatio(C);c.width=ka*na;c.height=qa*na;c.style.left=0;c.style.top=0;c.style.width=ka+"px";c.style.height=qa+"px";1<na&&C.setTransform(na,0,0,na,0,0);C.translate(.5,.5);C.save();C.lineWidth=1;C.fillStyle=Q.chart.backgroundColor;C.strokeStyle=Q.chart.backgroundColor;C.fillRect(-.5,
-.5,ka+1,qa+1);""!=Q.chart.border.left&&(C.beginPath(),C.moveTo(0,qa),C.lineTo(0,0),C.strokeStyle=Q.chart.border.left,C.stroke(),C.closePath());""!=Q.chart.border.top&&(C.beginPath(),C.moveTo(0,0),C.lineTo(ka,0),C.strokeStyle=Q.chart.border.top,C.stroke(),C.closePath());""!=Q.chart.border.right&&(C.beginPath(),C.moveTo(ka-1,0),C.lineTo(ka-1,qa),C.strokeStyle=Q.chart.border.right,C.stroke(),C.closePath());""!=Q.chart.border.bottom&&(C.beginPath(),C.moveTo(ka,qa-1),C.lineTo(0,qa-1),C.strokeStyle=Q.chart.border.bottom,
C.stroke(),C.closePath());if(O)for(ka=0;4>ka;ka++)if(O[ka]){qa=z.getGrid(ka);null==Y&&(Y=[]);Y[ka]={left:Za.left,top:Za.top,width:Za.width,height:Za.height};var eb=qa.size;null==eb?(eb=qa.option,null==eb?eb={lineHeight:28}:null==eb.lineHeight&&(eb.lineHeight=28),eb=O[ka].setCellsPosition(Y[ka],eb)):("auto"==eb.width&&(eb.width=0),"auto"==eb.height&&(eb.height=0),eb.h=eb.height);if(eb)switch(ka){case 2:ea.left+=eb.width;Y[ka].width=ea.left;break;case 3:ea.right-=eb.width;Y[ka].left=ea.right;Y[ka].width=
eb.width;break;default:ea.height-=eb.h,Y[ka].height=eb.h,1==ka?(Y[ka].top=Za.top+Za.height-eb.h,qa.option&&qa.option.marginTop&&(ea.height-=qa.option.marginTop),qa.option&&qa.option.marginBottom&&(Y[ka].top-=qa.option.marginBottom,ea.height-=qa.option.marginBottom)):(ea.top+=eb.h,qa.option&&qa.option.marginTop&&(Y[ka].top+=qa.option.marginTop,ea.top+=qa.option.marginTop,ea.height-=qa.option.marginTop),qa.option&&qa.option.marginBottom&&(ea.top+=qa.option.marginBottom,ea.height-=qa.option.marginBottom)),
qa.option&&qa.option.marginLeft&&(Y[ka].left+=qa.option.marginLeft,Y[ka].width-=qa.option.marginLeft),qa.option&&qa.option.marginRight&&(ea.width-=qa.option.marginRight)}O[ka].setCellsPosition(Y[ka],qa.option)}1==Q.chartTitle.show&&(ea.top+=Q.chartTitle.height,ea.height-=Q.chartTitle.height);1==Q.thumbnail.show&&(ja=xDeepCopy(ea),ea.height-=Q.thumbnail.height,ja.top=ea.top+ea.height,ja.height=Q.thumbnail.height,Y[4]=ja);qa=xDeepCopy(ea);1==Q.scale.left.show&&(ea.left=Q.scale.left.width,ea.width-=
Q.scale.left.width);1==Q.scale.right.show&&(ea.width-=Q.scale.right.width);1==Q.scale.bottom.show&&(ea.height-=Q.scale.bottom.height);C.fillStyle=Q.graph.backgroundColor;C.fillRect(ea.left,ea.top,ea.width,ea.height);C.fill();""!=Q.graph.border.left&&(C.beginPath(),C.moveTo(ea.left,ea.top+ea.height),C.lineTo(ea.left,ea.top),C.strokeStyle=Q.graph.border.left,C.stroke(),C.closePath());""!=Q.graph.border.top&&(C.beginPath(),C.moveTo(ea.left,ea.top),C.lineTo(ea.left+ea.width,ea.top),C.strokeStyle=Q.graph.border.top,
C.stroke(),C.closePath());""!=Q.graph.border.right&&(C.beginPath(),C.moveTo(ea.left+ea.width,ea.top),C.lineTo(ea.left+ea.width,ea.top+ea.height),C.strokeStyle=Q.graph.border.right,C.stroke(),C.closePath());""!=Q.graph.border.bottom&&(C.beginPath(),C.moveTo(ea.left+ea.width,ea.top+ea.height),C.lineTo(ea.left,ea.top+ea.height),C.strokeStyle=Q.graph.border.bottom,C.stroke(),C.closePath());Za=null;X&&(Za=X.getEngineData());if(1==Q.waterMark.show&&((ka=Q.waterMark.value)||(ka=getTableValue(Q.waterMark.field,
Za,cb.index,!0)),ka)){C.beginPath();C.font=Q.waterMark.font;eb=C.measureText(ka.value);if(eb.width>ea.width){var pb=parseFloat(C.font)-1;eb=Q.waterMark.font.indexOf(" ");for(fontName=Q.waterMark.font.substr(eb);9<pb&&!(C.font=pb+"px"+fontName,eb=C.measureText(ka.value),eb.width<=ea.width);pb--);}C.fillStyle=Q.waterMark.textColor;C.textBaseline="top";C.textAlign=Q.waterMark.textAlign;C.globalAlpha=.7;if("right"==Q.waterMark.textAlign)switch(Q.waterMark.textBaseline){case "middle":C.textBaseline="middle";
C.fillText(ka.value,ea.left+ea.width-Q.waterMark.position.x,ea.top+ea.height/2-Q.waterMark.position.y);break;case "bottom":C.textBaseline="bottom";C.fillText(ka.value,ea.left+ea.width-Q.waterMark.position.x,ea.top+ea.height-Q.waterMark.position.y);break;default:C.fillText(ka.value,ea.left+ea.width-Q.waterMark.position.x,ea.top+Q.waterMark.position.y)}else if("center"==Q.waterMark.textAlign)switch(Q.waterMark.textBaseline){case "middle":C.textBaseline="middle";C.fillText(ka.value,ea.left+ea.width/
2,ea.top+ea.height/2-Q.waterMark.position.y);break;case "bottom":C.textBaseline="bottom";C.fillText(ka.value,ea.left+ea.width/2,ea.top+ea.height-Q.waterMark.position.y);break;default:C.fillText(ka.value,ea.left+ea.width/2,ea.top+Q.waterMark.position.y)}else switch(Q.waterMark.textBaseline){case "middle":C.textBaseline="middle";C.fillText(ka.value,ea.left+Q.waterMark.position.x,ea.top+ea.height/2);break;case "bottom":C.textBaseline="bottom";C.fillText(ka.value,ea.left+Q.waterMark.position.x,ea.top+
ea.height-Q.waterMark.position.y);break;default:C.fillText(ka.value,ea.left+Q.waterMark.position.x,ea.top+Q.waterMark.position.y)}C.closePath();C.globalAlpha=1}if(null==Za||0==V.length||0>=ea.width)J=!1;else{Lb();0<=ia&&Oa<ia&&fa<T&&(ka=T+Q.chart.preReadItems+1-Oa,ka>hb&&(hb=ka,z.query()));pb=ea.top;var mb=[[1,0],[.65,.35],[.6,.2,.2],[.55,.15,.15,.15],[.52,.12,.12,.12,.12]];eb=V.length-1;var tb=ea.height*mb[eb][0];for(ka=0;ka<=eb;ka++)V[ka].setGraphicRect(ea.left,pb,ea.width,tb,qa,Q),V[ka].calcMaxMin(Oa-
ia,Pa,ka),0<ka&&(C.moveTo(ea.left,pb),C.lineTo(ea.left+ea.width,pb)),pb+=tb,tb=ka==eb-1?ea.height-(pb-ea.top):ea.height*mb[eb][ka+1];C.stroke();ha=0<Pa?(ea.width-2)/Pa:0<T?(ea.width-2)/T:1;if(2<ea.width){xb(C);for(ka=0;ka<V.length;ka++)if(qa=null,Q.graphTitle.buttons&&0<Q.graphTitle.buttons.length&&(qa=Q.graphTitle.buttons[ka],null==qa&&(qa=Q.graphTitle.buttons[Q.graphTitle.buttons.length-1]),eb=Q.formulaMenu[ka],null==eb&&(eb=Q.formulaMenu[Q.formulaMenu.length-1]),V[ka].setGraphCellsSet(z,ka,qa,
eb)),V[ka].draw(C,na,z.getXFromIndex_Graph,ea),qa&&(qa=V[ka].getGraphCells()))null==K&&(K=[]),K[K.length]=qa,(la||Na)&&qa.setScheme(la.xControl,Na);1==R&&1==Q.cursor.show&&z.drawLayers()}}C.restore();if(O){C.save();for(ka=0;4>ka;ka++)if(O[ka]){qa=z.getGrid(ka);if(qa.option&&qa.option.backgroundColor&&"transparent"!=qa.option.backgroundColor){C.beginPath();R=""==qa.option.backgroundColor||"transparent"==qa.option.backgroundColor?Q.backgroundColor:qa.option.backgroundColor;var Zb;eb=0;qa.option.border&&
(Zb=parseLineSet(qa.option.border));qa.option.borderRadius&&(eb=qa.option.borderRadius);fillRoundRect(C,Y[ka].left-.5,Y[ka].top-.5,Y[ka].width,Y[ka].height-1,eb,R,Zb?Zb.color:null);C.closePath()}O[ka].setValue(0,Za,B);1==O[ka].draw(C,qa,0,0,Y[ka])&&(O[ka].setCellsPosition(rectGrid0,qa.option),O[ka].draw(C,qa,0,0,Y[ka]))}if(1==Q.thumbnail.show&&(qa=z.getGrid(4),null==O[ka]&&Da(),O[ka].setCellsPosition(ja,{backgroundColor:"transparent",lineHeight:Q.thumbnail.height,marginLeft:0}),Zb=1==Q.thumbnail.show&&
O[4]?O[4].getCellById("@xchartThumbnail").object:void 0,Zb)){var Rb;R=0;pb=T;if(Za&&Za[0]&&Za[0].table&&Za[0].table.field){R=Za[0].table.info.begin;pb=Za[0].table.info.totalRows;(mb=Q.thumbnail.data)&&"Array"!=mb.constructor.name&&(mb=[Q.thumbnail.data]);if(mb&&0<mb.length)for(ka=0;ka<Za[0].table.field.length;ka++)for(eb=0;eb<mb.length;eb++)Za[0].table.field[ka][0].toLowerCase()==mb[eb].field.toLowerCase()&&(X&&X[0]&&X[0][ka]?null==Rb?Rb=[X[0][ka]]:Rb.push(X[0][ka]):null==Rb?Rb=[Za[0].table.data[ka]]:
Rb.push(Za[0].table.data[ka]));eb=Q.thumbnail.date;for(ka=0;ka<Za[0].table.field.length;ka++)if(Za[0].table.field[ka][0].toLowerCase()==eb.field.toLowerCase()){var ac=Za[0].table.data[ka];break}}Zb.setValue({value:{positon:Oa,offset:R,page:Pa,total:pb,minPage:Q.chart.minVisibleItems,type:"int",thumbnail:Rb,date:ac},type:"object"});O[4].draw(C,qa,0,0,Y[4]);if(B.startDate&&B.endDate&&Za&&Za[0]&&Za[0].table)for(ka=0;ka<Za[0].table.field.length;ka++)if("dd"==Za[0].table.field[ka][1]){Rb=Za[0].table.data[ka];
cb.startDate=Rb[Oa];cb.endDate=Oa+Pa>=T?Rb[T-1]:Rb[Oa+Pa-1];if(cb.startDate&&cb.endDate&&(B.startDate!=cb.startDate||B.endDate!=cb.endDate))for(B.startDate=cb.startDate,B.endDate=cb.endDate,Rb=getBoundValues(Wa,B,Za,cb.index,Qa()),ac=0;4>ac;ac++)O[ac]&&O[ac].synchBoundValue(Rb);break}}C.restore()}1==Ha&&ub.draw()}J=!1}};this.drawLayers=function(){ub.draw()};this.drawLayer0=function(R){var ka=c.parentElement.offsetHeight;if(!(0>=c.parentElement.offsetWidth||0>=ka)){R.save();ka=!1;if(0<T&&1==cb.isShow&&
0==cb.isOut&&1==Q.cursor.show&&(1==Q.cursor.showCross||1==Q.cursor.showValue)){var qa=z.getXFromIndex(cb.index),Ha=cb.y;if(1==da){Ha=z.getGraphIndexAtY(cb.x,cb.y).index;0>Ha&&(Ha=0);var Za=z,eb=Za.getYFromValue;var pb=V&&0<=Ha&&Ha<V.length?V[Ha].getLocateValueAtIndex(cb.index):void 0;Ha=eb.call(Za,pb,Ha)}if(Ha>=ea.top&&Ha<=ea.top+ea.height&&qa>ea.left&&qa<ea.left+ea.width&&(null==kb||null!=kb&&1==kb)){cb.x=qa;cb.y=Ha;ka=!0;var mb=cb.index}else Ka&&(Ka.style.display="none"),M&&M[0]&&M[0].table&&(mb=
ia+fa-1)}else M&&M[0]&&M[0].table&&(mb=ia+fa-1);0<T&&(z.drawStat(R),z.drawValuesAtIndex(R,mb),ka&&(Ha=c.parentElement.offsetWidth,mb=z.getXFromIndex(cb.index),Za=cb.y,1==Q.cursor.showCross&&(R.save(),R.setLineDash([Q.cursor.lineDash]),R.beginPath(),R.strokeStyle=Q.cursor.lineColor,R.lineWidth=Q.cursor.lineWidth?Q.cursor.lineWidth:1,R.globalAlpha=.6,R.moveTo(ea.left,cb.y),R.lineTo(ea.left+ea.width,cb.y),R.moveTo(cb.x,ea.top),R.lineTo(cb.x,ea.top+ea.height),R.stroke(),R.closePath(),R.restore()),1==
Q.cursor.showValue)&&(R.beginPath(),ka=xGlobal.systemFontOffsetY,eb=z.getValueStringFromY(mb,Za),R.textBaseline="middle",1==Q.scale.left.show&&1==Q.scale.left.cursorShow&&(R.font=getFontSizeWithFont(Q.scale.left.fontSize,Q.scale.left.fontFamily),qa=parseInt(R.font),R.textAlign="right",R.fillStyle=Q.cursor.backgroundColor,"left"==Q.scale.left.align?(R.textAlign="left",R.fillStyle=Q.cursor.backgroundColor,pb=R.measureText(eb).width,R.fillRect(ea.left,Za-(qa+4)/2,ea.left+pb+2,qa+4),R.fillStyle=Q.cursor.textColor,
R.fillText(eb,ea.left,Za+ka)):(R.textAlign="right",R.fillStyle=Q.cursor.backgroundColor,R.fillRect(1,Za-(qa+4)/2,ea.left,qa+4),R.fillStyle=Q.cursor.textColor,R.fillText(eb,ea.left-2,Za+ka))),1==Q.scale.right.show&&1==Q.scale.right.cursorShow&&(eb=z.getValueStringFromY(mb,Za,1))&&(R.font=getFontSizeWithFont(Q.scale.right.fontSize,Q.scale.right.fontFamily),qa=parseInt(R.font),R.textAlign="left",R.fillStyle=Q.cursor.backgroundColor,"left"==Q.scale.right.align?(R.textAlign="left",R.fillStyle=Q.cursor.backgroundColor,
R.fillRect(ea.left+ea.width+2,Za-(qa+4)/2,Ha-(ea.left-ea.width)-2,qa+5),R.fillStyle=Q.cursor.textColor,R.fillText(eb,ea.left+ea.width+8,Za+ka)):(R.textAlign="right",R.fillStyle=Q.cursor.backgroundColor,pb=R.measureText(eb).width,R.fillRect(ea.left+ea.width-pb-2,Za-(qa+4)/2,Ha-(ea.left-ea.width)-2,qa+5),R.fillStyle=Q.cursor.textColor,R.fillText(eb,ea.left+ea.width,Za+ka))),Ha=V[0].getXAxis(),1==Q.scale.bottom.show&&void 0!=Ha&&(Za=cb.index-ia,Za>Ha.length-1&&(Za=Ha.length-1),0>Za&&(Za=0),R.textBaseline=
"middle",R.textAlign="center",R.fillStyle=Q.cursor.backgroundColor,R.font=getFontSizeWithFont(Q.scale.bottom.fontSize,Q.scale.bottom.fontFamily),qa=parseInt(R.font),eb=Ha[Za],20990101<eb?Ha=v(eb,"YYYY/MM/DD, HH:mm"):(Ha=Math.floor(eb/1E4),Za=Math.floor(eb/100)%100,eb%=100,pb=new Date,pb.setFullYear(Ha,Za-1,eb),Ha=""+Ha+"/"+(10>Za?"0"+Za:Za)+"/"+(10>eb?"0"+eb:eb)+"("+weekday[pb.getDay()]+")"),Za=R.measureText(Ha),eb=mb-Za.width/2-4,0>eb&&(mb=Za.width/2+4,eb=0),R.fillRect(eb,ea.top+ea.height+1,Za.width+
8,qa+5),R.fillStyle=Q.cursor.textColor,R.fillText(Ha,mb,ea.top+ea.height+1+ka+(qa+4)/2),R.closePath())),z.drawLines(R,T-1));R.restore();if(0<T&&1==Q.cursor.show){if(0==cb.isOut&&cb.y>ea.top&&cb.y<ea.top+ea.height&&cb.x>ea.left&&cb.x<ea.left+ea.width&&("always"==Q.tip.show||"cursor"==Q.tip.show&&1==cb.isShow)){var tb=cb.showTip=!0;(null==Ka||Ka&&"none"==Ka.style.display)&&z.drawTipAtIndex(R,cb.index-ia,cb.x,cb.y,ha)}null==tb&&1==cb.showTip&&(cb.showTip=!1,xGlobal.xTip&&xGlobal.xTip.hidden())}}};this.drawStat=
function(R){var ka=X.getEngineData();if($a&&ka&&ka[0]&&ka[0].table&&1==$a.isShow&&Q.regionStatistics&&1==Q.regionStatistics.enable){var qa=ka[0].table,Ha=$a.beginIndex<=$a.endIndex?$a.beginIndex:$a.endIndex,Za=$a.beginIndex<=$a.endIndex?$a.endIndex:$a.beginIndex;Za>=T&&(Za=T-1);Ha=z.getXFromIndex(Ha);Za=z.getXFromIndex(Za);if(!(Ha<ea.left&&Za<ea.left||Ha>ea.left+ea.width&&Za>ea.left+ea.width)){R.save();R.beginPath();R.fillStyle=Q.regionStatistics.region.backgroundColor;R.globalAlpha=Q.regionStatistics.region.globalAlpha;
var eb=Ha<ea.left?ea.left:Ha,pb=Za>ea.left+ea.width?ea.left+ea.width:Za;R.fillRect(eb,ea.top+1,pb-eb,ea.height-2);R.closePath();R.beginPath();R.globalAlpha=1;R.strokeStyle=Q.regionStatistics.region.borderColor;R.setLineDash([0]);R.lineWidth=1;Ha==eb&&(R.moveTo(Ha,ea.top+1),R.lineTo(Ha,ea.top+ea.height-1));Za==pb&&(R.moveTo(Za,ea.top+1),R.lineTo(Za,ea.top+ea.height-1));R.stroke();R.closePath();R.restore();if(1==Q.regionStatistics.enable&&Q.regionStatistics.statistics.cells&&($a.tipBeginIndex!=$a.beginIndex||
$a.tipEndIndex!=$a.endIndex||0==$a.calc)&&($a.calc=!0,$a.tipBeginIndex=$a.beginIndex,$a.tipEndIndex=$a.endIndex,R=ob(qa).data,void 0!=R&&0<qa.info.rows&&0<=$a.beginIndex-ia)){$a.tipBeginDate=R[$a.beginIndex-ia];$a.tipEndDate=R[$a.endIndex-ia];qa=[];if(Q.regionStatistics.tables)if(R=Q.regionStatistics.tables,0>=R.length)qa.push(ka[0]);else for(Ha=0;Ha<R.length;Ha++)for(Za=R[Ha],eb=0;eb<ka.length;eb++){if(ka[eb]&&ka[eb].table&&ka[eb].table.info&&ka[eb].table.info.name==Za){qa.push(ka[eb]);break}}else qa.push(ka[0]);
ka=new statisticsRegion(qa,$a.beginIndex-ia,$a.endIndex-ia,Fa,Nb);null==ab&&(ab=new xStatisticTip(H,c.parentElement,z.closeStat));qa=Q.regionStatistics.statistics.cells;var mb=function(tb,Zb){for(var Rb=0;Rb<tb.length;Rb++)if(tb[Rb].script){var ac=tb[Rb].script,hc=ac.indexOf("{{ "),ic=ac.indexOf(" }}");0<=hc&&0<=ic?(ac=ac.substr(hc+3,ic-hc-3),ac=Zb.run(B[ac])):ac=Zb.run(tb[Rb].script);hc=tb[Rb].valueType;null==hc&&(hc=Zb.getValueType());tb[Rb].value={value:ac,type:hc}}else tb[Rb].vBox?mb(tb[Rb].vBox,
Zb):"Array"==tb[Rb].constructor.name&&mb(tb[Rb],Zb)};for(R=0;R<qa.length;R++)mb(qa[R],ka);ab.setGrid(Q.regionStatistics.statistics.cells,Q.regionStatistics.statistics);ab.draw()}}}};this.closeStat=function(R){$a.isShow=!1;ub.setCursor("default");ab&&(ab.hidden(),ub.draw())};this.drawLines=function(R,ka){for(var qa=0;qa<V.length;qa++)V[qa].drawLines(R,na,ka);gb&&gb.drawLocatePoint(R);ib&&ib.drawLocatePoint(R)};this.drawTipAtIndex=function(R,ka,qa,Ha,Za){for(var eb=0;eb<V.length;eb++)V[eb].drawTipAtIndex(z,
R,ka,qa,Ha,Za)};this.drawValuesAtIndex=function(R,ka){if(void 0!=M&&null!=X){var qa=X.getEngineData();if(1==Q.chartTitle.show&&Q.chartTitle.cells&&0<Q.chartTitle.cells.length&&0<T&&qa){R.save();ka>=T&&(ka=T-1);0>ka&&(ka=0);R.fillStyle="#000";R.textAlign="left";R.textBaseline="middle";var Ha=6,Za=ea.top-Q.chartTitle.height/2;null!=Q.chartTitle.marginTop&&(Za+=Q.chartTitle.marginTop);null!=Q.chartTitle.marginLeft&&(Ha+=Q.chartTitle.marginLeft);for(var eb,pb,mb=Q.chartTitle.cells,tb=0;tb<mb.length;tb++){var Zb=
xGlobal.systemFontOffsetY;R.font=getFontSizeWithFont(Q.chartTitle.fontSize,Q.chartTitle.fontFamily);R.fillStyle=Q.chartTitle.titleColor;null!=mb[tb].titleProperty&&null!=xLanguage.langMap[mb[tb].titleProperty]&&(mb[tb].title=xLanguage.langMap[mb[tb].titleProperty]);void 0!=mb[tb].title&&(pb=R.measureText(mb[tb].title),R.fillStyle=mb[tb].color?mb[tb].color:Q.chartTitle.titleColor,R.fillText(mb[tb].title,Ha,Za+Zb),Ha+=pb.width+2);void 0!=mb[tb].info&&(eb=eval("table.info."+mb[tb].info),void 0!=eb&&
(pb=R.measureText(eb),R.fillText(eb,Ha,Za+Zb),Ha+=pb.width+8));if(void 0!=mb[tb].field&&void 0!=ka){var Rb=void 0;null!=mb[tb].baseField&&(0<=mb[tb].baseField.indexOf("ref(")?(eb=mb[tb].baseField.substr(4,mb[tb].baseField.length-5),pb=eb.split(","),Rb=getTableData(pb[0],qa,ka-parseInt(pb[1])-ia,!0)):Rb=getTableData(mb[tb].baseField,qa,ka-ia,!0));pb=getTableValue(mb[tb].field,qa,ka-ia,!0);null==pb&&mb[tb].field1&&(pb=getTableValue(mb[tb].field1,qa,ka-ia,!0));null!=pb?(void 0!=Rb&&(pb.value>Rb?R.fillStyle=
Q.chart.upColor:pb.value<Rb&&(R.fillStyle=Q.chart.downColor)),eb=getValueFormatString(pb.value,pb.valueType,mb[tb].format)):eb="-";mb[tb].prefix&&(eb=mb[tb].prefix+eb);mb[tb].suffix&&(eb+=mb[tb].suffix);void 0!=mb[tb].font&&(R.font=mb[tb].font);R.measureText(eb);R.font=getFontSizeWithFont(Q.chartTitle.fontSize,Q.chartTitle.fontFamily);if(void 0!=mb[tb].Change&&null!=pb&&Rb)if(null!=pb.value&&Rb)switch(mb[tb].Change){case 1:eb=100*(pb.value-Rb)/Rb;Rb=pb.value-Rb;eb=getValueFormatString(pb.value,pb.valueType,
mb[tb].format)+" ("+getValueFormatString(eb,"f2","%+")+"%, "+getValueFormatString(Rb,pb.valueType,mb[tb].format+"%+")+")";break;case 2:eb=100*(pb.value-Rb)/Rb;Rb=pb.value-Rb;eb=getValueFormatString(eb,pb.valueType,"%%")+"("+getValueFormatString(Rb,pb.valueType,mb[tb].format)+")";break;case 3:eb=getValueFormatString(pb.value,pb.valueType,mb[tb].format);break;default:eb=100*(pb.value-Rb)/Rb,Rb=pb.value-Rb,eb="("+getValueFormatString(eb,"f2","%+")+"%, "+getValueFormatString(Rb,pb.valueType,mb[tb].format+
"%+")+")"}else eb="(-, -)";pb=R.measureText(eb);R.fillText(eb,Ha,Za+Zb);Ha+=pb.width+8}}R.restore()}if(1==Q.graphTitle.show)for(tb=0;tb<V.length;tb++)V[tb].drawValuesAtIndex(R,ka-ia,tb)}};this.getXFromIndex_Graph=function(R){return null==R?ha:2==na?ea.left+1+(R-(Oa-ia))*ha+ha/2:Math.floor(ea.left+1+(R-(Oa-ia))*ha+ha/2)};this.getIndexFromX_Graph=function(R){return Math.round(Oa+(R-(ea.left+1)-ha/2)/ha)};this.getXFromIndex=function(R){return null==R?ha:2==na?ea.left+1+(R-Oa)*ha+ha/2:Math.floor(ea.left+
1+(R-Oa)*ha+ha/2)};this.getIndexFromX=function(R){return Math.round(Oa+(R-(ea.left+1)-ha/2)/ha)};this.getYFromValue=function(R,ka){if(0<=ka&&ka<V.length)return V[ka].getYFromValue(R)};this.getValueFromY=function(R,ka){R=z.getGraphIndexAtY(R,ka).index;0>R&&(R=0);return V[R].getValueFromY(ka)};this.getValueStringFromY=function(R,ka,qa){R=z.getGraphIndexAtY(R,ka);var Ha=R.index;R.isTitle&&(Ha=-1);if(-1!=Ha)return V[Ha].getValueStringFromY(ka,qa)};this.getClosestValueFromYAtIndex=function(R,ka,qa){return 0<=
qa&&qa<V.length?V[qa].getClosestValueFromYAtIndex(R-ia,ka):ka};var ob=function(R){var ka=Fa(R,"date",!0),qa="d";if(null==ka&&(ka=Fa(R,"time",!0),qa="ts",null==ka)){if(R&&R.field&&R.data)for(var Ha=0;Ha<R.field.length;Ha++)if("dd"==R.field[Ha][1]||"dm"==R.field[Ha][1]||"dy"==R.field[Ha][1]||"ts"==R.field[Ha][1]||"tm"==R.field[Ha][1]||"tms"==R.field[Ha][1]||"th"==R.field[Ha][1]){ka=R.data[Ha];qa=R.field[Ha][1];break}null==ka&&(ka=R.data[0],qa=R.field[Ha][0])}return{data:ka,type:qa}};this.getIndexFromDate=
function(R){if(M[0]&&M[0].table){if(X){var ka=X.getEngineData();if(ka&&ka[0]&&(ka=ob(ka[0].table),ka.data)){ka=ka.data;for(var qa=0;qa<ka.length;qa++)if(ka[qa]==R||qa<ka.length-1&&ka[qa]<R&&ka[qa+1]>R)return qa+ia}}return null}};this.getDateFromIndex=function(R){var ka=M[0].table,qa;X&&(qa=X.getEngineData());if(qa&&qa[0])if((ka=X.getEngineData())&&ka[0])ka=ob(ka[0].table),ka=ka.data;else return 0;else ka=ob(ka),ka=ka.data;return ka[R-ia]};this.getGraphIndexAtY=function(R,ka){if(V)for(var qa=0;qa<
V.length;qa++){var Ha=V[qa].isInGraphRect(R,ka);if(-1==Ha)return{index:qa,isTitle:!0};if(Ha)return{index:qa,isTitle:!1}}return{index:-1,isTitle:!1}};this.getGraphicList=function(){return V};this.onMouseDown=function(R){xGlobal.focusObject=null;if(O)for(var ka=0;5>ka;ka++)if(O[ka]&&isInRect(R.offsetX,R.offsetY,Y[ka])){var qa=O[ka].onMouseDown(R);if(qa&&qa!=Z&&Z&&Z.onUnFocus)Z.onUnFocus();if(Z=qa){if(Z.onMouseDown)Z.onMouseDown(R,xGlobal.focusObject==Z?!0:!1);z.page&&z.page.setPageFocusWidget(z);xGlobal.focusObject=
Z;z.draw(!0)}return}for(ka=0;ka<V.length;ka++)if(qa=V[ka].getGraphCells()){if((qa=qa.onMouseDown(R))&&qa!=Z&&Z&&Z.onUnFocus)Z.onUnFocus();if(Z=qa){if(Z.onMouseDown)Z.onMouseDown(R,xGlobal.focusObject==Z?!0:!1);xGlobal.focusObject=Z;z.page&&z.page.setPageFocusWidget(z);z.draw(!0);return}}xGlobal.focusWidget=null;ab&&ab.setPointerEvent("none");qa=gb;gb=null;if(null!=V&&0!=V.length){if(!ib&&R.offsetX>ea.left&&R.offsetX<ea.left+ea.width){var Ha=z.getIndexFromX(R.offsetX);if(R.offsetY>ea.top&&R.offsetY<
ea.top+ea.height){var Za=z.getGraphIndexAtY(R.offsetX,R.offsetY);ka=Za.index;Za.isTitle&&(cb.isOut=!1);if(null!=bb&&0<=ka)ib=V[ka].newDrawLine(H,z,bb,Q.formulaIds[ka][0],ka,R.offsetX,R.offsetY,z.getXFromIndex,z.getIndexFromX,z.getDateFromIndex),bb=null,1==ib.getTotalDos()?(gb=ib,ib=null):gb=null;else{if(0<=ka){var eb=V[ka].isInGraphValuesRect(R.offsetX,R.offsetY);if(0<=eb&&1==R.buttons){if(checkIsMobile())return;z.setFormulaProperty(ka,eb);return}if(Za.isTitle)return;gb=V[ka].hitTestDrawLine(R.offsetX,
R.offsetY)}null==gb&&(1==R.buttons&&1==Hb||2==R.buttons?($a.dragIndex=0,$a.downIndex=Ha,$a.downBeginIndex=Oa):(!$a.isShow||$a.beginIndex!=Ha&&$a.endIndex!=Ha?(ka=z.getXFromIndex($a.beginIndex),ka-2<=R.offsetX&&ka+2>=R.offsetX?$a.dragIndex=1:(ka=z.getXFromIndex($a.endIndex),ka-2<=R.offsetX&&ka+2>=R.offsetX&&($a.dragIndex=2))):$a.dragIndex=$a.endIndex==Ha?2:1,null==$a.dragIndex&&1==Q.xAxis.move&&(Ab=!0,Gb=Ha,Ra=Oa)),cb.switching=!0)}}else R.offsetY>ea.top+ea.height+1&&1==Q.xAxis.zoom&&(Sb=!0,Ub=Ha,
fb=Oa+Pa-1,Ob=z.getXFromIndex(Ub),Fb=z.getXFromIndex(fb),Ya=Pa)}Bb=null!=gb?!0:!1;if(ib||qa!=gb)z.drawLayers(),null!=qa&&Ia("update",qa);z.page&&z.page.setPageFocusWidget(z);cb.x=R.offsetX;cb.y=R.offsetY;va("onMouseDown")}};this.onMouseUp=function(R){ab&&ab.setPointerEvent("");if(O)for(var ka=0;5>ka;ka++)if(O[ka]&&isInRect(R.offsetX,R.offsetY,Y[ka])){var qa=O[ka].onMouseUp(R);qa==Z&&Z?Z.onMouseUp&&(1==Q.enableFocus&&(xGlobal.focusObject=Z),Z.onMouseUp(R),z.draw(!0)):Z&&Z.onMouseUp&&(Z.onMouseUp(R),
z.draw(!0));return}for(ka=0;ka<V.length;ka++)if(qa=V[ka].getGraphCells())if(qa=qa.onMouseUp(R),qa==Z&&Z?Z.onMouseUp&&(1==Q.enableFocus&&(xGlobal.focusObject=Z),Z.onMouseUp(R),z.draw(!0)):Z&&Z.onMouseUp&&(Z.onMouseUp(R),z.draw(!0)),Z)return;0==R.button&&1==cb.switching&&cb.x==R.offsetX&&cb.y==R.offsetY&&(1==Q.cursor.showAlways?cb.isShow=!0:(cb.isShow=1==cb.isShow?!1:!0,1==Q.cursor.show&&(1!=cb.isShow?Oa+Pa>=T&&(cb.index=T-1):(cb.index=this.getIndexFromX(R.offsetX),cb.value=this.getValueFromY(R.offsetY)),
ub.draw())));Sb=Ab=cb.switching=!1;$a.dragIndex=void 0;ib&&0==ib.nextDot()&&((gb=ib)&&Ia("update",gb),ib=null);Hb=!1};this.onMouseMove=function(R){Q.callback_mouseMove&&Q.callback_mouseMove(R,Qa());ub.draw()};this.mouseMove=function(R){this.onMouseOver();if(1==R.buttons&&xGlobal.focusObject&&z==xGlobal.focusWidget)return xGlobal.focusObject.onMouseMove(R);if(R.clientX!=z.clientX||R.clientY!=z.clientY)if(0!=R.buttons||!(0>R.offsetX||0>R.offsetY||R.offsetX>R.offsetWidth||R.offsetY>R.offsetHeight)){var ka=
!1;ib?ka=!0:1==R.buttons&&gb&&(Bb=ka=!0);if(0==ka){var qa=!1,Ha;if(O)for(ka=0;5>ka;ka++)if(O[ka]&&Y&&isInRect(R.offsetX,R.offsetY,Y[ka])&&(Ha=O[ka].onMouseMove(R))){if(xGlobal.mouseOverObject!=Ha){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(R,z);xGlobal.mouseOverObject=Ha;z.draw(!0)}0==cb.isOut&&(cb.isOut=!0,ub.draw());return}Ha=null;for(ka=0;ka<V.length;ka++){var Za=V[ka].getGraphCells();if(Za&&(Ha=Za.onMouseMove(R))){if(xGlobal.mouseOverObject!=
Ha){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(R,z);xGlobal.mouseOverObject=Ha;qa=!0}if(Ha)break}}null==Ha&&xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut&&(xGlobal.mouseOverObject.onMouseOut(R,z),xGlobal.mouseOverObject=null,qa=!0);qa&&z.draw(!0);if(Ha)return;if(xGlobal.mouseOverObject){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(R,z);xGlobal.mouseOverObject=null;qa=!0}}Ha=z.clientX;
z.clientX=R.clientX;z.clientY=R.clientY;Za=z.getIndexFromX(R.offsetX);ka=z.getXFromIndex(Za);var eb=R.offsetY;da=!1;if(ib)ib.setPosition(Za,eb,z.getClosestValueFromYAtIndex),Bb=!0;else if(1==R.buttons&&1!=Hb)if(gb)gb.setPosition(Za,eb,z.getClosestValueFromYAtIndex);else{if(1==Ab){Za-=Oa-Ra;Oa=Za=Ra+(Gb-Za);Lb();cb.x=ka;cb.y=eb;z.draw();ub.draw();return}if(1==Sb){if(ka<Fb-5){R=Math.round(Ya*(Fb-Ob)/(Fb-ka));R<Q.chart.minVisibleItems&&(R=Q.chart.minVisibleItems);if(Pa>R){if(z.clientX>Ha)return}else if(Pa<
R&&z.clientX<Ha)return;Pa=R;Pa>Q.chart.maxVisibleItems&&(Pa=Q.chart.maxVisibleItems);Oa=fb-Pa+1;z.draw();ub.draw();return}}else 0<$a.dragIndex&&(Za>=T&&(Za=T-1),0>Za&&(Za=0),1==$a.dragIndex?$a.beginIndex=Za:$a.endIndex=Za)}else if((1==R.buttons&&1==Hb||2==R.buttons)&&void 0!=$a.dragIndex)Za>=T&&(Za=T-1),0>Za&&(Za=0),1<Math.abs(Za-$a.downIndex)&&0==$a.dragIndex&&($a.beginIndex=$a.downIndex,$a.endIndex=Za,$a.dragIndex=2,$a.isShow=!0),1==$a.dragIndex?$a.beginIndex=Za:2==$a.dragIndex&&($a.endIndex=Za);
else if(gb&&(Ha=gb.hitTest(R.offsetX,R.offsetY),100==Ha?gb.isLocked()?ub.setCursor("not-allowed"):ub.setCursor("move"):0<=Ha?gb.isLocked()?ub.setCursor("not-allowed"):ub.setCursor("crosshair"):ub.setCursor("default")),Sb=Ab=!1,$a.dragIndex=null,1==$a.isShow)if(Za==$a.beginIndex||Za==$a.endIndex)ub.setCursor("col-resize");else{Ha=!1;var pb=z.getXFromIndex($a.beginIndex);pb-2<=R.offsetX&&pb+2>=R.offsetX?(ub.setCursor("col-resize"),Ha=!0):(pb=z.getXFromIndex($a.endIndex),pb-2<=R.offsetX&&pb+2>=R.offsetX&&
(ub.setCursor("col-resize"),Ha=!0));0==Ha&&ub.setCursor("default")}Ha=!0;cb.x=ka;cb.y=eb;if(eb>ea.top&&eb<ea.top+ea.height&&ka>ea.left&&ka<ea.left+ea.width){cb.isOut=!1;1==cb.isShow&&1==Q.cursor.show&&(cb.index=Za,Ha=!0);for(ka=0;ka<V.length;ka++)V[ka].onMouseDown(R);cb.index>=T&&(cb.index=T-1);cb.index<=Oa&&(cb.index=Oa);eb=z.getGraphIndexAtY(R.offsetX,R.offsetY);ka=eb.index;eb.isTitle&&(ka=-1);if(0<=ka)if((Za=V[ka].getTip(Za,cb.x,cb.y))&&Za.data&&Za.data.startsWith("<div")&&Za.data.endsWith("</div>")){null==
Ka&&I();Ka.style.left=cb.x+20+"px";Ka.style.top=cb.y+20+"px";Ka.style.backgroundColor="rgba(64,64,64,0.9)";Ka.style.color="#fff";Ka.style.border="";Ka.style.borderRadius="3px";Ka.style.boxShadow="";Ka.style.padding="8px";Ka.style.display="block";eb="<p>"+Za.data+"</p>";Ka.innerHTML=eb;Za=c.clientWidth;eb=c.clientHeight;pb=Ka.scrollWidth;var mb=Ka.scrollHeight;cb.x+20+8+pb>Za&&(Ka.style.left=Za-pb-28+"px");cb.y+20+8+mb>eb&&(Ka.style.top=cb.y-mb-28+"px")}else if(Za&&Za.data){I();eb="";pb=Za.data.split("\r");
if(1<pb.length)for(ka=0;ka<pb.length;ka++)eb+="<p>"+pb[ka]+"</p>";else eb='<p style="white-space: nowrap;">'+Za.data+"</p>";Ka.innerHTML=eb;Ka.style.visibility="hidden";Ka.style.display="block";eb=Ka.offsetWidth;eb>cb.x||c.parentElement.offsetWidth-cb.x-12>eb?Za.pos=" ":eb>c.parentElement.offsetWidth-cb.x-12&&(Za.pos="bottom-left");Ka.style.left="";Ka.style.right="";Za.pos&&"bottom-left"==Za.pos?(Ka.style.right=c.parentElement.offsetWidth-cb.x+12+"px",Ka.style.top=cb.y+12+"px"):Za.pos&&"top-left"==
Za.pos?(Ka.style.right=c.parentElement.offsetWidth-cb.x+12+"px",Ka.style.top=c.parentElement.offsetHeight-cb.y+12+"px"):Za.pos&&"top-right"==Za.pos?(Ka.style.left=cb.x+12+"px",Ka.style.top=c.parentElement.offsetHeight-cb.y+12+"px"):(Ka.style.left=cb.x+12+"px",Ka.style.top=cb.y+12+"px");Ka.style.visibility="visible";cb.showTip=!1;xGlobal.xTip.hidden()}else ka=-1;else cb.isOut=!0;0>ka&&Ka&&"block"==Ka.style.display&&(Ka.style.display="none",D())}else 1==cb.isShow&&(Ha=cb.isOut=!0);qa&&z.draw(!0);1==
Ha&&ub.draw();1!=xGlobal.passiveSupported&&R.preventDefault();va("mouseMove")}};this.onDblClick=function(R){var ka=!0,qa=R.offsetX,Ha=R.offsetY;if(gb&&0<=gb.hitTest(R.offsetX,R.offsetY))gb.setDrawLine();else{if(O)for(R=0;R<O.length;R++)O[R]&&null!=O[R].rect&&O[R].rect.left<qa&&O[R].rect.left+O[R].rect.width>qa&&O[R].rect.top<Ha&&O[R].rect.top+O[R].rect.height>Ha&&(ka=!1);for(R=0;R<V.length;R++)V[R].isInGraphTitleRect(qa,Ha)&&(ka=!1);if(ka&&q&&q.doDblClick)for(ka=q.doDblClick,R=0;R<ka.length;R++)ka[R].action&&
doWidgetAction(ka[R].action,b,parent,B,z),ka[R].callback&&ka[R].callback(z)}};var kb,Vb=null;this.onTouchMove=function(R){kb&&R.preventDefault();var ka=R.targetTouches[0].target.getBoundingClientRect().x,qa=R.targetTouches[0].clientX-ka;ka=R.targetTouches[0].target.getBoundingClientRect().y;var Ha=R.targetTouches[0].clientY-ka;ka=z.getIndexFromX(qa);qa=z.getXFromIndex(ka);R.offsetX=qa;R.offsetY=Ha;qa<ea.left||qa>ea.left+ea.width||Ha<ea.top||Ha>ea.top+ea.height?(cb.isOut=!0,kb=cb.isShow=!1):(cb.isShow=
!0,cb.isOut=!1);ib||gb&&(Bb=!0);if(1==R.targetTouches.length)if(clearTimeout(Vb),gb)R=gb.hitTest(R.offsetX,R.offsetY),100==R?gb.isLocked()?ub.setCursor("not-allowed"):ub.setCursor("move"):0<=R?gb.isLocked()?ub.setCursor("not-allowed"):ub.setCursor("crosshair"):ub.setCursor("default"),gb&&(gb.setPosition(ka,Ha,z.getClosestValueFromYAtIndex),reDrawLayer0=!0),Sb=Ab=!1,z.draw(),ub.draw();else if(kb){cb.x=qa;cb.y=Ha;cb.index=ka;qa=z.getGraphIndexAtY(R.offsetX,R.offsetY);R=qa.index;qa.isTitle&&(R=-1);if(0<=
R)if((ka=V[R].getTip(ka,cb.x,cb.y))&&ka.data&&ka.data.startsWith("<div")&&ka.data.endsWith("</div>")){null==Ka&&I();Ka.style.left=cb.x+20+"px";Ka.style.top=cb.y+20+"px";Ka.style.backgroundColor="rgba(64,64,64,0.9)";Ka.style.color="#fff";Ka.style.border="";Ka.style.borderRadius="3px";Ka.style.boxShadow="";Ka.style.padding="8px";Ka.style.display="block";qa="<p>"+ka.data+"</p>";Ka.innerHTML=qa;ka=c.clientWidth;qa=c.clientHeight;Ha=Ka.scrollWidth;var Za=Ka.scrollHeight;cb.x+20+8+Ha>ka&&(Ka.style.left=
ka-Ha-28+"px");cb.y+20+8+Za>qa&&(Ka.style.top=cb.y-Za-28+"px")}else if(ka&&ka.data){I();qa="";Ha=ka.data.split("\r");if(1<Ha.length)for(R=0;R<Ha.length;R++)qa+="<p>"+Ha[R]+"</p>";else qa='<p style="white-space: nowrap;">'+ka.data+"</p>";Ka.innerHTML=qa;Ka.style.visibility="hidden";Ka.style.display="block";qa=Ka.offsetWidth;qa>cb.x||c.parentElement.offsetWidth-cb.x-12>qa?ka.pos=" ":qa>c.parentElement.offsetWidth-cb.x-12&&(ka.pos="bottom-left");Ka.style.left="";Ka.style.right="";ka.pos&&"bottom-left"==
ka.pos?(Ka.style.right=c.parentElement.offsetWidth-cb.x+12+"px",Ka.style.top=cb.y+12+"px"):ka.pos&&"top-left"==ka.pos?(Ka.style.right=c.parentElement.offsetWidth-cb.x+12+"px",Ka.style.top=c.parentElement.offsetHeight-cb.y+12+"px"):ka.pos&&"top-right"==ka.pos?(Ka.style.left=cb.x+12+"px",Ka.style.top=c.parentElement.offsetHeight-cb.y+12+"px"):(Ka.style.left=cb.x+12+"px",Ka.style.top=cb.y+12+"px");Ka.style.visibility="visible";cb.showTip=!1;xGlobal.xTip.hidden()}else R=-1;else cb.isOut=!0;0>R&&Ka&&"block"==
Ka.style.display&&(Ka.style.display="none",D());cb.isShow=!0;cb.isOut=!1;z.draw();ub.draw()}else cb.index=ka,1==Ab&&(ka-=Oa-Ra,Oa=ka=Ra+(Gb-ka),Lb(),cb.x=qa,cb.y=Ha,cb.isShow=!0,cb.isOut=!1,z.draw(),ub.draw());else if(ka=Math.abs(nb[0].x-nb[1].x)-Math.abs(R.targetTouches[0].pageX-R.targetTouches[1].pageX),!(20>Math.abs(ka))){if(1==Q.wheelOnFocus&&xGlobal.focusWidget!=z||0==Q.xAxis.move||0==Q.xAxis.wheelZoom)return!1;qa=1;1==cb.isShow&&(qa=(cb.index-Oa+1)/Pa);if(1<=Math.abs(ka*qa)){qa=Math.floor(Oa-
ka*qa);ka=Math.round(Pa+ka);ka>=Q.chart.minVisibleItems?(Oa=qa,Pa=ka,Pa>Q.chart.maxVisibleItems&&(Pa=Q.chart.maxVisibleItems)):Pa=Q.chart.minVisibleItems;if(Pa>T||0>=Oa+T)Oa=0;0>Oa&&T==fa&&(Oa=0)}z.draw();ub.draw();if(1<R.targetTouches.length)for(ka=0;ka<R.targetTouches.length;ka++)nb[ka]={x:R.targetTouches[ka].pageX,y:R.targetTouches[ka].pageY};1!=xGlobal.passiveSupported&&R.preventDefault();va();return!0}};this.onTouchEnd=function(R){var ka=R.changedTouches[0].target.getBoundingClientRect().x;ka=
R.changedTouches[0].clientX-ka;var qa=R.changedTouches[0].target.getBoundingClientRect().y;qa=R.changedTouches[0].clientY-qa;z.getIndexFromX(ka);R.offsetX=ka;R.offsetY=qa;for(ka=R.button=0;ka<R.targetTouches.length;ka++)nb[ka]={x:R.targetTouches[ka].pageX,y:R.targetTouches[ka].pageY};if(O)for(ka=0;5>ka;ka++)if(O[ka]&&isInRect(R.offsetX,R.offsetY,Y[ka])){qa=O[ka].onMouseUp(R);qa==Z&&Z?Z.onMouseUp&&(1==Q.enableFocus&&(xGlobal.focusObject=Z),Z.onMouseUp(R),z.draw(!0)):Z&&Z.onMouseUp&&(Z.onMouseUp(R),
z.draw(!0));return}for(ka=0;ka<V.length;ka++)if(qa=V[ka].getGraphCells())if(qa=qa.onMouseUp(R),qa==Z&&Z?Z.onMouseUp&&(1==Q.enableFocus&&(xGlobal.focusObject=Z),Z.onMouseUp(R),z.draw(!0)):Z&&Z.onMouseUp&&(Z.onMouseUp(R),z.draw(!0)),Z)return;R.targetTouches.length||(Ka&&"block"==Ka.style.display&&(Ka.style.display="none"),Ab=beginTouch=!1,cb.isShow=!1,cb.isOut=!1,z.draw(!0),ub.draw());kb=!1;clearTimeout(Vb)};this.onTouchStart=function(R){Q.tip.show=!1;var ka=R.targetTouches.length;if(Pa==T)kb=!1;else{beginTouch=
!0;for(var qa=0;qa<R.targetTouches.length;qa++)nb[qa]={x:R.targetTouches[qa].pageX,y:R.targetTouches[qa].pageY};qa=R.targetTouches[0].target.getBoundingClientRect().x;qa=R.targetTouches[0].clientX-qa;var Ha=R.targetTouches[0].target.getBoundingClientRect().y;Ha=R.targetTouches[0].clientY-Ha;var Za=z.getIndexFromX(qa);R.offsetX=qa;R.offsetY=Ha;R.button=0;cb.index=Za;z.onMouseDown(R)}2>ka?Vb=setTimeout(function(){beginTouch=kb=!0;for(var eb=0;eb<R.targetTouches.length;eb++)nb[eb]={x:R.targetTouches[eb].pageX,
y:R.targetTouches[eb].pageY};eb=R.targetTouches[0].target.getBoundingClientRect().x;eb=R.targetTouches[0].pageX-eb;var pb=R.targetTouches[0].target.getBoundingClientRect().y;pb=R.targetTouches[0].pageY-pb;var mb=z.getIndexFromX(eb);R.offsetX=eb;R.offsetY=pb;R.button=0;cb.index=mb;Lb();null==$a.dragIndex&&1==Q.xAxis.move&&(Ab=!0,Gb=mb,Ra=Oa);cb.x=eb;cb.y=pb;cb.index=mb;cb.isShow=!0;cb.isOut=!1;z.draw();ub.draw(!0);z.onMouseDown(R)},300):clearTimeout(Vb);if(O)for(ka=0;5>ka;ka++)if(O[ka]&&isInRect(R.offsetX,
R.offsetY,Y[ka])){if((qa=O[ka].onMouseDown(R))&&qa!=Z&&Z&&Z.onUnFocus)Z.onUnFocus();if(Z=qa){if(Z.onMouseDown)Z.onMouseDown(R,xGlobal.focusObject==Z?!0:!1);z.page&&z.page.setPageFocusWidget(z);xGlobal.focusObject=Z;z.draw(!0)}return}for(ka=0;ka<V.length;ka++)if(qa=V[ka].getGraphCells()){if((qa=qa.onMouseDown(R))&&qa!=Z&&Z&&Z.onUnFocus)Z.onUnFocus();if(Z=qa){if(Z.onMouseDown)Z.onMouseDown(R,xGlobal.focusObject==Z?!0:!1);xGlobal.focusObject=Z;z.page&&z.page.setPageFocusWidget(z);z.draw(!0);return}}xGlobal.focusWidget=
null;kb||(cb.index=null)};var Lb=function(){if(Q.xAxis.zoom||Q.xAxis.move)0>Oa&&(Oa=0),Oa+Pa>=T+Q.chart.maxRightReserveItems&&(Oa=T-Pa+Q.chart.maxRightReserveItems),M&&M[0]&&M[0].table&&Oa+Pa>T+Q.chart.reserveItems&&(Oa=T+Q.chart.reserveItems-Pa);cb.index>=T&&(cb.index=T-1)};this.onMouseWheel=function(R){if(1==Q.wheelOnFocus&&xGlobal.focusWidget!=z||0==Q.xAxis.move||0==Q.xAxis.wheelZoom)return!1;if(0!=R.deltaX){var ka=Oa;Oa+=Math.round(R.deltaX);Lb();if(Oa==ka)return}else if(ka=1,1==cb.isShow&&(ka=
(cb.index-Oa+1)/Pa),1<=Math.abs(R.deltaY*ka)){ka=Math.floor(Oa-R.deltaY*ka/2);var qa=Math.round(Pa+R.deltaY/2);qa>=Q.chart.minVisibleItems?(Oa=ka,Pa=qa,Pa>Q.chart.maxVisibleItems&&(Pa=Q.chart.maxVisibleItems),fa==T&&T<=Pa&&(Pa=fa+Q.chart.reserveItems)):Pa=Q.chart.minVisibleItems}0<R.deltaY&&(Pa>T||0>=Oa+T||fa==T)&&0>Oa&&(Oa=0);0>Oa&&T==fa&&(Oa=0);z.draw();ub.draw();1!=xGlobal.passiveSupported&&R.preventDefault();va();return!0};this.onMouseOver=function(R){Q.callback_mouseOver&&Q.callback_mouseOver(R,
Qa())};this.onMouseOut=function(R){Q.callback_mouseOut&&Q.callback_mouseOut(R,Qa());R.toElement!=Ka&&R.toElement!=c&&(cb.isOut=!0,ub.draw());$a.dragIndex=void 0;return!0};this.onKeyDown=function(R){if(void 0!=M){xGlobal.keyDown=!1;var ka=R.keyCode,qa=!1;if(1==R.shiftKey){if(35==ka||36==ka||37==ka||39==ka)qa=!0,void 0==$a.dragIndex&&($a.dragIndex=2,$a.beginIndex=cb.index,$a.endIndex=cb.index,$a.isShow=!0)}else 1==$a.isShow&&($a.dragIndex=void 0);var Ha=Oa,Za=Pa;cb.isOut=!1;null==cb.index&&(cb.index=
T-1);var eb=!0;if(!Q.callback_onKeydown||1!=Q.callback_onKeydown(Qa(),R))switch(ka){case 35:1==Q.xAxis.move?cb.index<Oa+Pa-1?(cb.index=Oa+Pa-1,cb.index>ia+fa-1?(cb.index=ia+fa-1,Oa=T-Pa+Q.chart.reserveItems+1):Oa=cb.index-Pa+1):(cb.index+=Pa-1,Oa+=Pa-1,cb.index>=ia+fa-1&&(cb.index=ia+fa-1),Oa>T-Pa+Q.chart.reserveItems+1&&(Oa=T-Pa+Q.chart.reserveItems+1)):cb.index=ia+fa-1;cb.isShow=!0;break;case 36:cb.index>Oa?cb.index=0>Oa?0:Oa:1==Q.xAxis.move&&(cb.index-=Pa-1,0>cb.index&&T==fa&&(cb.index=0));cb.isShow=
!0;break;case 37:1!=cb.isShow?cb.isShow=!0:(cb.isShow=!0,R.ctrlKey?cb.index-=10:--cb.index);0>cb.index&&T&&(cb.index=0);break;case 39:0>cb.index&&T==fa&&(cb.index=fa-1);1!=cb.isShow?cb.isShow=!0:(cb.isShow=!0,cb.index=R.ctrlKey?cb.index+10:cb.index+1,cb.index>=T&&(cb.index=T-1));break;case 38:z.chartZoomOut();break;case 40:z.chartZoomIn();break;case 27:null!=bb||1==Hb?(bb=null,Hb=!1):1==$a.isShow?z.closeStat(R):1==cb.isShow&&1!=Q.cursor.showAlways?cb.isShow=!1:eb=!1;ub.setCursor("default");break;
case 34:case 33:if(ta){if(ta.onKeyDown)return ta.onKeyDown(R)}else if(pa)for(var pb in B)if(pb.toLowerCase()==oa.toLowerCase()){var mb=pa.field;R=pa.data;for(var tb=0;tb<mb.length;tb++)if(Aa.toLowerCase()==mb[tb][0].toLowerCase()){if("row"==pa.info.rank)for(qa=0;qa<R.length&&(null==R[qa][tb]||R[qa][tb]!=B[pb]);qa++);else for(qa=0;qa<R.length&&(null==R[tb][qa]||R[tb][qa]!=B[pb]);qa++);Ha=!1;34==ka?qa+pa.info.dataBegin<pa.info.totalRows-1&&(B[pb]="row"==pa.info.rank?R[qa+1][tb]:R[tb][qa+1],Ha=!0):0<
qa+pa.info.dataBegin&&0<qa&&(B[pb]="row"==pa.info.rank?R[qa-1][tb]:R[tb][qa-1],Ha=!0);1==Ha&&(Ba(),u("keyDown="+(34==ka?"PageDown":"PageUp"),0),z.query());return}break}break;case 13:r("doEnter");u("keyDown=Enter",0,null,!0);break;case 46:if(gb)z.onDeleteDrawLine();else eb=!1;break;default:return}1==cb.isShow&&(cb.index>=T&&T==T&&(cb.index=T-1),(cb.index<Oa||0>Oa)&&1==Q.xAxis.move?(fa>=T&&0>cb.index&&(cb.index=fa-1),Oa=cb.index):cb.index>=Oa+Pa&&(Oa=cb.index-Pa+1));Lb();1==qa&&($a.endIndex=cb.index);
da=!0;Oa==Ha&&Pa==Za||z.draw();ub.draw();va("onKeyDown");return eb}};var va=function(R){!Q.callback_onOperate||!M||Xb&&Xb.visibleItems==Pa&&Xb.beginIndex==Oa&&Xb.cursorIndex==cb.index||(Xb={visibleItems:Pa,beginIndex:Oa,cursorIndex:cb.index},Q.callback_onOperate(Qa(),R,Xb))};this.getOperate=function(){return{visibleItems:Pa,beginIndex:Oa-ia,cursorIndex:cb.index-ia}};this.setOperate=function(R){if(null==Xb||null!=Xb.visibleItems&&Xb.visibleItems==R.visibleItems||null!=Xb.beginIndex&&Xb.beginIndex==
R.beginIndex||null!=Xb.cursorIndex&&Xb.cursorIndex==R.cursorIndex)null!=R.visibleItems&&(Pa=R.visibleItems),null!=R.beginIndex&&(Oa=R.beginIndex),null!=R.cursorIndex&&(cb.index=R.cursorIndex),z.draw(!0),Xb=xDeepCopy(R)};this.setCursorPostion=function(R){xCopyTo(R,cb);z.draw(!0)};this.setCursor=function(R){ub.setCursor(R)};this.setXScrollCursorPosition=function(R){null!=R.position&&(Oa=parseInt(R.position));null!=R.page&&(Pa=parseInt(R.page));z.draw(!0)};this.onContextMenu=function(R){1!=xGlobal.passiveSupported&&
R.preventDefault()};this.getPopupSubMenu=function(R){var ka=Q.popupMenu&&Q.popupMenu.subMenu?Q.popupMenu:null;if(ka){ka=ka.subMenu;for(var qa=0;qa<ka.length;qa++)if(ka[qa].capture==R)return ka[qa]}};var Qa=function(){return{target:z,option:Q,variables:B,page:z.getPage(),graphIndex:0}};this.setPopupMenu=function(R){Q.popupMenu=R};this.getPopupMenu=function(R){if(gb)return R=gb.getPopupMenu(),R.popup?R:{subMenu:gb.getPopupMenu()};R=z.getGraphIndexAtY(R.offsetX,R.offsetY);if(!(0>R.index)){var ka=Qa();
if(1!=R.isTitle){if(Q.popupMenu){if(Q.popupMenu.callback_popup)return{popup:Q.popupMenu.callback_popup(ka),variables:B};if(Q.popupMenu.popup)return{popup:Q.popupMenu.popup,variables:B}}""!=Q.popupMenuPrepareAction&&(R=Q.popupMenuPrepareAction.indexOf("getSelected"),0<=R&&(R=trimBracket(Q.popupMenuPrepareAction.slice(R+11)),R=trimBracket(R),Q.popupMenu.data=z.getSelected(R)));if(gb)return{subMenu:gb.getPopupMenu()}}if(Q.popupMenu&&Q.popupMenu.subMenu)return z.page.boundMenuStatus(Q.popupMenu.subMenu),
Q.popupMenu}};this.setFormulaProperty=function(R,ka){var qa=V[R].getFormulaPropertyHTML(ka),Ha=new xDialog(H,"\u4fee\u6539 "+qa.name+" \u53c2\u6570",z,qa.width,qa.height),Za=H.document.createElement("div");Za.id=Ha.getDialogId()+"-dlg";H.document.createAttribute("style");Za.innerHTML=qa.html;Ha.setDlg(Za,"overflow:auto;cursor:default;font-size:12px;font-family:"+xGlobal.systemFont+";");Ha.setButtons([{capture:"\u786e\u8ba4",action:"modifyFormulaPropertyOk(dlg, apply, "+R+","+ka+")"},{capture:"\u6062\u590d\u9ed8\u8ba4",
action:"resetFormulaPorpertyOk(dlg, apply, "+R+","+ka+")"}]);Ha.setAutoApply("modifyFormulaPropertyOk(dlg, apply,"+R+","+ka+")");Za.style.fontFamily="Courier"};this.modifyFormulaPropertyOk=function(R,ka,qa,Ha){0<=qa&&qa<V.length&&(V[qa].setFormulaPropertyHTML(ka,Ha),z.run())};this.resetFormulaPorpertyOk=function(R,ka,qa,Ha){0<=qa&&qa<V.length&&(V[qa].resetFormulaPorperty(Ha),z.run())};this.modifyFormula=function(R,ka){if(!(0>R||R>=V.length)){F=V[R].getEngine(ka);var qa=new xDialog(H,"\u4fee\u6539\u516c\u5f0f",
z,800,600),Ha=H.document.createElement("div");Ha.id=qa.getDialogId()+"-dlg";var Za=H.document.createElement("div");Ha.appendChild(Za);var eb=H.document.createAttribute("style");eb.value="position:absolute;top:0px;left:0px;right:0px;height:32px;font-size:14px";Za.setAttributeNode(eb);eb='<label style="position:absolute;left:8px;top:4px;">\u6307\u6807\u7b80\u79f0:</label></input><input type="text"name="editingEngine.formulaId" style="position:absolute;left:82px;width:128px;top:2px;height:20px;"value="'+
(F.formulaId+'">');eb=eb+'<label style="position:absolute;left:228px;top:4px;">\u6307\u6807\u5168\u79f0:</label></input><input type="text"name="editingEngine.formulaName" style="position:absolute;left:310px;width:268px;top:2px;height:20px;"value="'+(F.formulaName+'">');Za.innerHTML=eb+'<label style="position:absolute;left:8px;top:395px;">\u6307\u6807\u7528\u6cd5:</label>';qa.setDlg(Ha);qa.setButtons([{capture:"\u786e\u8ba4",action:"modifyFormulaOk(dlg, apply, "+R+","+ka+")"},{capture:"\u53d6\u6d88"}]);
R=H.document.createElement("div");eb=H.document.createAttribute("style");eb.value="position:absolute;top:32px;left:0px;right:0px;bottom:140px;";R.setAttributeNode(eb);Ha.appendChild(R);R.id=Ha.id+"-editor0";bc=createEditor(R.id,null,"javascript");bc.setValue(F.getFormulaScript());bc.setShowPrintMargin(!1);bc.selection.clearSelection();bc.getSession().setUseWorker(!1);bc.setOption("wrap","");R=H.document.createElement("div");eb=H.document.createAttribute("style");eb.value="position:absolute;height:112px;left:0px;right:0px;bottom:0px;";
R.setAttributeNode(eb);Ha.appendChild(R);R.id=Ha.id+"-editor1";za=createEditor(R.id);za.setShowPrintMargin(!1);za.setValue(F.formulaNote);za.selection.clearSelection();Ha.style.fontFamily="Courier";qa.setAceEditors([bc,za]);qa.setToScheme()}};var Ua=function(){return{editingEngine:F}};this.modifyFormulaOk=function(R,ka,qa,Ha){ka=ka.replace(/editingEngine/g,Ua.name+"().editingEngine");eval(ka);R=bc.getValue();ka=za.getValue();za=bc=null;V[qa].setFormulaScript(R,F.formulaId,F.formulaName,ka,Ha);z.run();
R=R.replace(/"/g,"%u0022%");R=R.replace(/'/g,"%u0027%");z.callbacks.sendUpdate(999,"update userChartFormula set script='"+R+"' where formulaId='KLine' and account='"+xGlobal.xGlobal+"'")};this.exportTableToCSV=function(){if(M&&M[0].table){for(var R=M[0].table,ka="",qa=0;qa<R.field.length;qa++)ka+=R.field[qa][0],qa<R.field.length-1&&(ka+=",");ka+="\n";for(var Ha=0;Ha<R.data[0].length;Ha++){for(qa=0;qa<R.field.length;qa++)ka+=R.data[qa][Ha],qa<R.field.length-1&&(ka+=",");ka+="\n"}xFileWriter(ka,R.info.name+
".csv")}};this.readFileTest=function(){xFileReader("md.quote_day('600000.SH').csv")};this.onShowAllDrawLine=function(R){for(var ka=0;ka<V.length;ka++)V[ka].showAllDrawLine(R);0==R&&(gb=!1,ub.setCursor("default"));z.drawLayers()};this.onDeleteAllDrawLine=function(R){null!=R&&0!=R||Ia("deleteAll");gb=null;for(R=0;R<V.length;R++)V[R].deleteAllDrawLine();ub.setCursor("default");z.drawLayers()};this.onDoNewDrawLine=function(R){Bb=!0;bb=R;gb=null;Hb=!1;ub.setCursor("crosshair")};this.onLockDrawLine=function(R){gb&&
gb.lock(R)};this.onSetDrawLine=function(){gb&&(gb.setDrawLine(),Ia("update",gb))};this.onHideDrawLine=function(){gb&&(gb.show(!1),Ia("update",gb),gb=null,z.drawLayers())};this.onDeleteDrawLine=function(){if(gb){for(var R=0;R<V.length;R++)V[R].deleteDrawLine(gb);Ia("delete",gb);gb=null;ub.setCursor("default");z.drawLayers()}};this.getSelected=function(R){for(var ka in B)if(ka.toLowerCase()==R.toLowerCase())return R={data:{}},R.data[ka]=B[ka],R};this.setExternalTable=function(R,ka){pa=R;R=ka.split("=");
1==R.length?Aa=oa=ka:(oa=R[0],Aa=R[1])};var Sa=function(R){for(var ka=0;ka<R.length;ka++)if(R[ka].element)for(var qa in B)null!=R[ka].element.variables[qa]&&(R[ka].element.variables[qa]=B[qa]);else R[ka].elements&&Sa(R[ka].elements)};this.viewData=function(R,ka,qa,Ha){R=new xDialog(window,R,this,qa,Ha);Sa(ka.elements);R.doBrowser(ka)};this.synchPageBoundValue=function(){u("",0,null,!0)};var db=function(R,ka){for(var qa={},Ha=ka;Ha<R.length;Ha++)if("("==R[Ha]){qa.name=R.substr(ka,Ha-ka);ka=0;for(var Za=
Ha+1;Za<R.length;Za++)if('"'==R[Za])for(Za++;Za<R.length&&'"'!=R[Za];Za++);else if("'"==R[Za])for(Za++;Za<R.length&&"'"!=R[Za];Za++);else if("`"==R[Za])for(Za++;Za<R.length&&"`"!=R[Za];Za++);else if("("==R[Za])ka++;else if(")"==R[Za])if(0==ka){qa.param=R.substr(Ha+1,Za-Ha-1);Za++;";"==R[Za]&&Za++;qa.nextPos=Za;break}else ka--;break}qa.param&&(qa.param=qa.param.replace(/\r/g,""),qa.param=qa.param.replace(/\n/g,""));return qa};this.doAction=function(R){R=trim(R);for(var ka=0;ka<R.length;){ka=db(R,ka);
if(null==ka.name||null==ka.param)break;if(ka.param&&""!=ka.param)try{var qa=eval("("+ka.param+")")}catch(Ha){qa=null,console.log(Ha)}switch(ka.name){case "setVariablesValue":z.setVariablesValue(qa);break;case "setOption":z.setOption(qa,!1);break;case "setToggle":z.setToggle(qa);break;case "resetChart":z.resetChart();break;case "clearQueryData":z.clearQueryData();break;case "setFormulaProperty":qa=eval("["+ka.param+"]");2<=qa.length&&z.setFormulaProperty(qa[0],qa[1]);break;case "modifyFormula":qa=
eval("["+ka.param+"]");2<=qa.length&&z.modifyFormula(qa[0],qa[1]);break;case "setFormula":try{qa=eval("["+ka.param+"]"),3==qa.length?z.setFormula(qa[0],qa[1],qa[2]):2==qa.length&&z.setFormula(qa[0],qa[1])}catch(Ha){console.log("params err:"+Ha+";\n"+ka.param)}break;case "setFormulaIds":qa=eval("["+ka.param+"]");z.setFormulaIds(qa);break;case "doRegionStatistics":z.doRegionStatistics();break;case "toggleFormula":z.toggleFormula(qa);break;case "toggleScale":z.toggleScale();break;case "charReset":Pa=
sa;cb.index=T-1;0<Q.chart.visibleItems?(Oa=T-Pa+Q.chart.reserveItems,0==Q.xAxis.move&&0>Oa&&(Oa=0)):Oa=0;z.draw(!0);break;case "chartZoomIn":S();break;case "chartZoomOut":xa();break;case "deleteFormula":qa=eval("["+ka.param+"]");z.deleteFormula(parseInt(qa[0]),qa[1]?parseInt(qa[1]):null);break;case "setOtherOption":(qa=JSON.parse(ka.param))&&z.setOtherOption(qa);break;case "viewData":qa=eval("["+ka.param+"]");z.viewData(qa[0],qa[1],qa[2],qa[3]);break;case "onDoNewDrawLine":if(null!=qa)z.onDoNewDrawLine(qa);
break;case "onShowAllDrawLine":if(null!=qa)z.onShowAllDrawLine(qa);break;case "onDeleteAllDrawLine":z.onDeleteAllDrawLine();break;case "onSetDrawLine":z.onSetDrawLine();break;case "onLockDrawLine":z.onLockDrawLine();break;case "onHideDrawLine":z.onHideDrawLine();break;case "onDeleteDrawLine":z.onDeleteDrawLine()}ka=ka.nextPos}};var vb=function(R,ka,qa){if("Array"==R.constructor.name)for(var Ha=0;Ha<R.length;Ha++){if(vb(R[Ha],ka,qa))return!0}else if(!(R.create&&R.create.title||R.optionGroup||R.title!=
ka.title||R.type!=ka.type)&&R.option&&ka.option&&R.option.type==ka.option.type)return R.title=qa.title,R.action=qa.action?qa.action:null,R.bounds=qa.bounds?qa.bounds:null,R.option.actionBounds=qa.option.actionBounds?qa.option.actionBounds:null,!0;return!1};this.modifyGrid=function(R,ka){for(var qa=0;4>qa;qa++){var Ha=z.getGrid(qa);if(Ha&&1==vb(Ha.init.vBox,R,ka))break}};this.refresh=function(){4>xGlobal.refreshCounter-ma&&(this.draw(!0),this.drawLayers())};var ub=new chartLayer0(H,z);c.addEventListener("mousemove",
z.onMouseMove);c.addEventListener("mouseout",z.onMouseOut)};var drawLineDefine=[{group:"line",groupName:"\u76f4\u7ebf",icon:"TrendBackslash",groupNameProperty:"chartForDrawStraightLine",type:"sLine",name:"\u76f4\u7ebf",nameProperty:"chartForDrawStraightLine",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],leftExt:!0,leftLen:60,rightExt:!0,rightLen:120},setEx:{showValue:!0}},{group:"line",type:"rLine",icon:"TwoSquaresTrendRays",name:"\u5c04\u7ebf",nameProperty:"chartForDrawRadial",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],rightExt:!0,rightLen:120},setEx:{showValue:!0}},
{group:"line",type:"dLine",icon:"BothEndsTrend",name:"\u7ebf\u6bb5",nameProperty:"chartForDrawLineSegment",set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"line",type:"hLine",icon:"SteadyTrendLine",name:"\u6c34\u5e73\u7ebf",nameProperty:"chartForDrawLevel",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],leftExt:!0,leftLen:120,rightExt:!0,rightLen:120},setEx:{showValue:!0,textColor:"#fff",backgroundColor:"#f00"}},{group:"line",type:"vLine",icon:"VerticalLineBtn",name:"\u5782\u76f4\u7ebf",nameProperty:"chartForDrawVerticalLine",
set:{lineColor:"#f00",lineWidth:1,lineDash:[0],leftExt:!0,leftLen:120,rightExt:!0,rightLen:120}},{group:"flag",groupName:"\u6807\u8bb0",icon:"RedUpArrow",groupNameProperty:"chartForDrawSign",type:"upArrow",name:"\u4e0a\u7bad\u5934",nameProperty:"chartForDrawUpArrow",dots:1,set:{lineColor:"#f00"}},{group:"flag",type:"downArrow",icon:"GreenDownArrow",name:"\u4e0b\u7bad\u5934",nameProperty:"chartForDrawDownArrow",dots:1,set:{lineColor:"#090"}},{group:"flag",type:"order",name:"\u6807\u53f7",nameProperty:"chartForDrawGrade",
dots:1,set:{lineColor:"#f00",lineWidth:1,lineDash:[0]},setEx:{text:"1",textColor:"#000",backgroundColor:"#aaa"}},{group:"flag",type:"text",name:"\u6587\u5b57",icon:"ALetter",nameProperty:"chartForDrawWrittenWords",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],indicateDot:!0},setEx:{text:"\u5728\u8fd9\u91cc\u5199\u5165\u6587\u672c",textColor:"#000",backgroundColor:"#aaa",opacity:.15}},{group:"flag",type:"date",name:"\u65e5\u671f",nameProperty:"chartForDrawDate",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],
indicateDot:!0},setEx:{textColor:"#000",backgroundColor:"#aaa",opacity:.15}},{group:"flag",type:"value",name:"\u6570\u636e",icon:"Numberline",nameProperty:"chartForDrawData",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],indicateDot:!0},setEx:{textColor:"#000",backgroundColor:"#aaa",opacity:.15}},{group:"flag",type:"dateValue",name:"\u65e5\u671f/\u6570\u636e",nameProperty:"chartForDrawDateOrData",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],indicateDot:!0},setEx:{textColor:"#000",backgroundColor:"#aaa",
opacity:.15}},{group:"vDiv",groupName:"\u5206\u5272",groupNameProperty:"chartForDrawSection",type:"golden",name:"\u9ec4\u91d1\u5206\u5272",nameProperty:"chartForDrawGoldenSection",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],rightExt:!0,rightLen:120},setEx:{parameter:[0,.191,.382,.5,.618,.809,1],lineColor:"#f00 #f00 #f00 #f00 #f00 #f00 #f00".split(" "),lineWidth:[1,1,1,1,1,1,1],lineDash:[[0],[0],[0],[0],[0],[0],[0]],show:[!0,!0,!0,!0,!0,!0,!0,!0],showParameter:!0,showValue:!0}},{group:"vDiv",type:"horizon",
name:"\u6c34\u5e73\u5206\u5272",icon:"FiveSpaceLine",nameProperty:"chartForDrawHorizontalSegmentation",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],rightExt:!0,rightLen:120},setEx:{parameter:[0,.25,.5,.75,1],lineColor:["#f00","#f00","#f00","#f00","#f00"],lineWidth:[1,1,1,1,1,1],lineDash:[[0],[0],[0],[0],[0]],show:[!0,!0,!0,!0,!0],showParameter:!0,showValue:!0}},{group:"hVid",groupName:"\u65f6\u95f4\u5468\u671f",icon:"FubonacciBtn",groupNameProperty:"chartForDrawCycleTime",type:"Fibonacci",name:"\u8d39\u6ce2\u7eb3\u5947\u5468\u671f",
nameProperty:"chartForDrawFibonacciPeriod",set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"hVid",type:"timeSplit",icon:"FourTineLine",name:"\u7b49\u8ddd\u65f6\u95f4\u5468\u671f",nameProperty:"chartForDrawEquidistantTimePeriod",set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"hVid",type:"sinWave",name:"\u6b63\u5f26\u6ce2",icon:"SineBtn",nameProperty:"chartForDrawSineWave",set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"angle",groupName:"\u89d2\u5ea6\u7ebf",iocn:"FiveRadialSpacetime",
groupNameProperty:"chartForDrawAngleLine",type:"angleGann",name:"\u6c5f\u6069\u89d2\u5ea6\u7ebf",icon:"GannAngleBtn",nameProperty:"chartForDrawGannFan",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],rightExt:!0,rightLen:120},setEx:{parameter:[82.5,75,71.5,63.75,26.25,18.25,15,7.25],lineColor:"#f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00".split(" "),lineWidth:[1,1,1,1,1,1,1,1],lineDash:[[0],[0],[0],[0],[0],[0],[0],[0]],show:[!0,!0,!0,!0,!0,!0,!0,!0],showParameter:!0,showValue:!0}},{group:"angle",type:"angleResi",
name:"\u963b\u901f\u7ebf",iocn:"ThreeRadialSpacetime",icon:"GannResistanceBtn",nameProperty:"chartForDrawResistanceLine",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],rightExt:!0,rightLen:120},setEx:{parameter:[.382,.618,.809,1],lineColor:["#f00","#f00","#f00","#f00"],lineWidth:[1,1,1,1],lineDash:[[0],[0],[0],[0]],show:[!0,!0,!0,!0],showParameter:!0,showValue:!0}},{group:"channel",groupName:"\u901a\u9053\u7ebf",groupNameProperty:"chartForDrawChannelLine",type:"Parallel",dots:3,name:"\u5e73\u884c\u7ebf",
icon:"ParallelLineBtn",nameProperty:"chartForDrawParallelLines",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],leftExt:!0,leftLen:120,rightExt:!0,rightLen:120},setEx:{parameter:[3,2,1,-1,-2,-3],lineColor:"#f00 #f00 #f00 #f00 #f00 #f00".split(" "),lineWidth:[1,1,1,1,1,1],lineDash:[[0],[0],[0],[0],[0],[0]],show:[!0,!0,!0,!0,!0,!0],showValue:!0}},{group:"channel",type:"Andrews",dots:3,name:"\u5b89\u5fb7\u9c81\u65af\u4e2d\u6570\u8f68\u9053",icon:"CycLine",nameProperty:"chartForDrawAndrewsMiddleNumberOrbit",
set:{lineColor:"#f00",lineWidth:1,lineDash:[0],rightExt:!0,rightLen:120},setEx:{parameter:[.75,.5,.25],color:["#f00","#f00","#f00"],show:[!0,!0,!0],showValue:!0}},{group:"channel",type:"stockBox",dots:3,name:"\u5e73\u884c\u80a1\u7968\u7bb1",icon:"ParallelBoxBtn",nameProperty:"chartForDrawParallelStockBox",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],leftExt:!0,leftLen:120,rightExt:!0,rightLen:120},setEx:{parameter:[8,7,6,5,4,3,2,1,-1,-2,-3,-4,-5,-6,-7,-8],lineColor:"#f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00 #f00".split(" "),
show:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]}},{group:"channel",type:"gridGann",name:"\u6c5f\u6069\u7f51\u683c",icon:"GannGridBtn",nameProperty:"chartForDrawGannGrid",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],leftExt:!0,leftLen:120,rightExt:!0,rightLen:120}},{group:"lines",groupName:"\u5f62\u6001",groupNameProperty:"chartForDrawForm",type:"2Lines",name:"\u4e24\u6bb5\u5f62\u6001",icon:"LightningTrend",nameProperty:"chartForDrawTwoStageForm",dots:3,set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},
{group:"lines",type:"3Lines",name:"\u4e09\u6bb5\u5f62\u6001",icon:"IncreaseTrend",nameProperty:"chartForDrawThreeStageForm",dots:4,set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"lines",type:"4Lines",name:"\u56db\u6bb5\u5f62\u6001",nameProperty:"chartForDrawFourStageForm",dots:5,set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"lines",type:"5Lines",name:"\u4e94\u6bb5\u5f62\u6001",nameProperty:"chartForDrawFiveStageForm",dots:6,set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"lines",
type:"6Lines",name:"\u516d\u6bb5\u5f62\u6001",nameProperty:"chartForDrawSixStageForm",dots:7,set:{lineColor:"#f00",lineWidth:1,lineDash:[0]}},{group:"shape",groupName:"\u51e0\u4f55\u5f62\u72b6",groupNameProperty:"chartForDrawGeometry",type:"triangle",name:"\u4e09\u89d2\u5f62",icon:"TriangleSpacetime",nameProperty:"chartForDrawTriangle",dots:3,set:{lineColor:"#f00",lineWidth:1,lineDash:[0],fillColor:"#f00",fillAlpha:.15}},{group:"shape",type:"parallelogram",name:"\u5e73\u884c\u56db\u8fb9\u5f62",icon:"QuadrilateralSpacetime",
nameProperty:"chartForDrawParallelogram",dots:3,set:{lineColor:"#f00",lineWidth:1,lineDash:[0],fillColor:"#f00",fillAlpha:.15}},{group:"shape",type:"rectangle",name:"\u77e9\u5f62",icon:"RectangleSpacetimeLine",nameProperty:"chartForDrawRectangle",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],fillColor:"#f00",fillAlpha:.15}},{group:"shape",type:"quadrangle",name:"\u56db\u8fb9\u5f62",nameProperty:"chartForDrawQuadrilateral",dots:4,set:{lineColor:"#f00",lineWidth:1,lineDash:[0],fillColor:"#f00",fillAlpha:.15}},
{group:"shape",type:"round",name:"\u5706\u5f62",nameProperty:"chartForDrawCircular",set:{lineColor:"#f00",lineWidth:1,lineDash:[0],fillColor:"#f00",fillAlpha:.15}}];
function chartDrawLine(a,b,c,g,k,q,f){var p=this,v=c,A=k,r=q,u=g,z=f,H,C,U,J=!0,G,B,L,ba=!0,N=!1,E=[],V,F,M=[],X,aa,ia,fa,T=[],Y=2,O=null;this.setCallback=function(ja,da,Oa,Pa,hb){v=ja;A=Oa;r=Pa;u=da;z=hb};this.initWithNew=function(ja,da,Oa,Pa,hb){G=(new Date).valueOf();B=ja;L=da;U=Oa;for(ja=0;ja<drawLineDefine.length;ja++)if(drawLineDefine[ja].type==B){V=eval("("+JSON.stringify(drawLineDefine[ja].set)+")");drawLineDefine[ja].setEx&&(F=eval("("+JSON.stringify(drawLineDefine[ja].setEx)+")"));drawLineDefine[ja].dots&&
(Y=drawLineDefine[ja].dots);break}Pa=A(Pa);ja=z(Pa);E[0]={index:Pa,time:ja,value:r(hb)};1<Y?(E[1]={index:Pa,time:ja,value:E[0].value},aa=1):aa=0};this.isModified=function(){return J};this.getJSON=function(){for(var ja="[",da=0;da<E.length;da++)ja+="["+z(E[da].index)+","+E[da].value+","+E[da].index+"]",da<E.length-1&&(ja+=",");ja+="]";da=JSON.stringify(V);da=da.replace(/"/g,"\u201c");da=da.replace(/'/g,"\u2018");var Oa=JSON.stringify(F);null!=Oa&&(Oa=Oa.replace(/"/g,"\u201c"),Oa=Oa.replace(/'/g,"\u2018"));
return{id:G,type:B,formula:L,dot:ja,set:da,setEx:Oa}};this.initWithSet=function(ja,da,Oa){ja=JSON.stringify(ja);U=da;da=JSON.parse(ja);da.set&&(ja=da.set.replace(/\u201c/g,'"'),ja=ja.replace(/\u2018/g,"'"),V=JSON.parse(ja));da.setEx&&(ja=da.setEx.replace(/\u201c/g,'"'),ja=ja.replace(/\u2018/g,"'"),F=JSON.parse(ja));G=da.id;B=da.type;L=da.formula;da=eval(da.dot);var Pa;for(ja=0;ja<da.length;ja++)E[ja]={index:Oa(da[ja][0]),time:da[ja][0],value:da[ja][1]},null!=E[ja].index&&null==Pa&&da[ja][2]&&(Pa=
{dot:ja,index:E[ja].index,delta:E[ja].index-da[ja][2]});if(Pa)for(ja=0;ja<da.length;ja++)null==E[ja].index&&null!=da[ja][2]&&(E[ja].index=da[ja][2]+Pa.delta);J=!1};this.getSet=function(){return V};this.getId=function(){return G};this.show=function(ja){ba=ja;J=!0};this.lock=function(ja){N=null!=ja?ja:N?!1:!0;J=!0};this.isLocked=function(){return N};this.draw=function(ja,da,Oa,Pa,hb){if(0!=ba&&null!=E){for(da=0;da<E.length;da++)if(null==E[da].index)return;O=hb;Oa&&(H=Oa);C=Pa;"string"==typeof V.lineDash&&
(V.lineDash=eval("["+V.lineDash+"]"));if(F&&F.lineDash)for(da=0;da<F.lineDash.length;da++)"string"==typeof F.lineDash[da]&&(F.lineDash[da]=eval("["+F.lineDash[da]+"]"));ja.save();ja.beginPath();ja.rect(H.left,H.top,H.width,H.height);ja.clip();ja.closePath();ja.beginPath();switch(B){case "sLine":case "rLine":case "dLine":case "hLine":case "vLine":K(ja);break;case "upArrow":case "downArrow":case "order":case "text":case "date":case "value":case "dateValue":Z(ja);break;case "golden":case "horizon":pa(ja);
break;case "Fibonacci":case "timeSplit":case "sinWave":oa(ja);break;case "angleGann":case "angleResi":ta(ja);break;case "Parallel":case "Andrews":case "stockBox":case "gridGann":Aa(ja);break;case "2Lines":case "3Lines":case "4Lines":case "5Lines":case "6Lines":sa(ja);break;case "triangle":ra(ja);break;case "parallelogram":la(ja);break;case "rectangle":Na(ja);break;case "quadrangle":Wa(ja);break;case "round":na(ja)}ja.font="12px "+xGlobal.systemFont;ja.strokeStyle=V.lineColor;ja.lineWidth=V.lineWidth;
V.lineDash&&ja.setLineDash(V.lineDash);for(da=0;da<M.length;da++)if(!(M[da].x0<=H.left&&M[da].x1<=H.left||M[da].y0<=H.top&&M[da].y1<=H.top||M[da].x0>=H.left+H.width&&M[da].x1>=H.left+H.width||M[da].y0>=H.top+H.height&&M[da].y1>=H.top+H.height)){if(M[da].x0!=Ma||M[da].y0!=rb)0<da&&ja.stroke(),ja.closePath(),ja.beginPath(),M[da].color&&(ja.strokeStyle=M[da].color),M[da].width&&(ja.lineWidth=M[da].width),M[da].dash&&("string"==typeof M[da].dash&&(M[da].dash=eval("["+M[da].dash+"]")),ja.setLineDash(M[da].dash)),
ja.moveTo(M[da].x0,M[da].y0);ja.lineTo(M[da].x1,M[da].y1);var Ma=M[da].x1;var rb=M[da].y1}ja.stroke();ja.closePath();ja.beginPath();for(da=0;da<M.length;da++)M[da].x0<=H.left&&M[da].x1<=H.left||M[da].y0<=H.top&&M[da].y1<=H.top||M[da].x0>=H.left+H.width&&M[da].x1>=H.left+H.width||M[da].y0>=H.top+H.height&&M[da].y1>=H.top+H.height||!M[da].text||(M[da].textAlign&&(ja.textAlign=M[da].textAlign),M[da].textBaseline&&(ja.textBaseline=M[da].textBaseline),ja.strokeStyle&&(ja.fillStyle=ja.strokeStyle),ja.beginPath(),
Oa=ja.lineWidth,Pa=ja.lineCap,ja.lineWidth=3,ja.lineCap="round",ja.moveTo(M[da].textX,M[da].textY),ja.lineTo(M[da].textX,M[da].textY),ja.stroke(),ja.fillText(M[da].text,M[da].textX+2,M[da].textY),ja.lineWidth=Oa,ja.lineCap=Pa,ja.closePath());if(1==V.indicateDot){ja.beginPath();ja.lineCap="round";for(da=0;da<E.length;da++)Oa=v(E[da].index),Pa=u(E[da].value),Oa>H.left&&Oa<H.left+H.width&&Pa>H.top&&Pa<H.top+H.height&&(ja.lineWidth=3,ja.moveTo(Oa,Pa),ja.lineTo(Oa,Pa));ja.stroke();ja.closePath()}ja.restore()}};
var K=function(ja){"hLine"==B?0==aa?E[1].value=E[0].value:1==aa&&(E[0].value=E[1].value):"vLine"==B&&(0==aa?E[1].index=E[0].index:1==aa&&(E[0].index=E[1].index));M[0]=ha({index:E[0].index,value:E[0].value},1==V.leftExt?V.leftLen:0,{index:E[1].index,value:E[1].value},1==V.rightExt?V.rightLen:0);M[0].width=V.lineWidth;M[0].color=V.lineColor;M[0].dash=V.lineDash;if("hLine"==B){if(M[0].y0>H.top&&M[0].y0<H.top+H.height&&!(M[0].x0<H.left&&M[0].x1<H.left&&M[0].x1>H.left+H.width&&M[0].x1<H.left+H.width)){var da=
H.left+H.width+1,Oa=M[0].y0;r(Oa);var Pa=r(M[0].y0).toFixed(3);X={left:da+1,top:Oa-8,width:56,height:16};ja.textAlign="left";ja.textBaseline="middle";ja.font="12px "+xGlobal.systemFont;ja.beginPath();ja.moveTo(da,Oa);ja.lineTo(da+4,X.top);ja.lineTo(da+X.width,X.top);ja.lineTo(da+X.width,X.top+X.height);ja.lineTo(da+4,X.top+X.height);ja.lineTo(da,Oa);ja.fillStyle=F.backgroundColor;ja.fill();ja.closePath();ja.beginPath();ja.fillStyle=F.textColor;ja.fillText(Pa,da+4,Oa);ja.closePath()}}else F&&1==F.showValue&&
Q(M[0])},Z=function(ja){function da(Ma,rb){Ma.font="14px "+xGlobal.systemFont;X.height=16;X.width=Ma.measureText(rb).width+4;X.width<X.height&&(X.width=X.height);Ma.beginPath();X.left=Pa-X.width/2-2;Ma.fillStyle=F.backgroundColor;Ma.strokeStyle=V.lineColor;Ma.lineWidth=V.lineWidth;Ma.setLineDash(V.lineDash);Ma.arc(X.left+X.width/2,X.top+X.height/2,X.width/2,0,2*Math.PI);Ma.fill();Ma.stroke();Ma.closePath();Ma.fillStyle=F.textColor;Ma.textBaseline="top";Ma.textAlign="center";Ma.textBaseline="middle";
Ma.fillText(rb,X.left+X.width/2,X.top+X.height/2)}function Oa(Ma,rb){v(E[0].index);var zb=u(E[0].value),Jb=v(E[1].index),Cb=u(E[1].value);M[0]=ha({index:E[0].index,value:E[0].value},0,{index:E[1].index,value:E[1].value},0);M[0].width=V.lineWidth;M[0].color=V.lineColor;M[0].dash=V.lineDash;Ma.font="14px "+xGlobal.systemFont;Ma.textBaseline="top";Ma.textAlign="center";X.height=18;X.width=Ma.measureText(rb).width+6;X.left=Jb-X.width/2;X.top=zb<Cb?Cb:Cb-X.height;Ma.beginPath();Ma.fillStyle=F.backgroundColor;
Ma.fillRect(X.left,X.top,X.width,X.height);Ma.closePath();Ma.beginPath();Ma.fillStyle=F.textColor;Ma.fillText(rb,X.left+X.width/2,X.top+3);Ma.fill();Ma.closePath()}ja.beginPath();var Pa=v(E[0].index),hb=u(E[0].value);X={left:Pa-4,top:hb,width:8,height:12};switch(B){case "upArrow":X.top-=12;drawArrowUp(ja,X,V.lineColor,V.lineColor);break;case "downArrow":drawArrowDown(ja,X,V.lineColor,V.lineColor);break;case "order":da(ja,F.text);break;case "text":Oa(ja,F.text);break;case "date":Oa(ja,getValueFormatString(z(E[0].index),
"dd","YYYY/MM/DD HH:mm"));break;case "value":Oa(ja,""+E[0].value.toFixed(2));break;case "dateValue":Oa(ja,getValueFormatString(z(E[0].index),"dd","YYYY/MM/DD HH:mm")+" : "+E[0].value.toFixed(2))}ja.closePath()},pa=function(ja){var da=1==V.leftExt?V.leftLen:0,Oa=1==V.rightExt?V.rightLen:0;ja=0;var Pa=[];M=[ha(E[0],0,E[1],0)];M[ja].width=V.lineWidth;M[ja].color=V.lineColor;M[ja++].dash=V.lineDash;for(var hb=0;hb<F.parameter.length;hb++)if(1==F.show[hb]){var Ma=E[0].value+(E[1].value-E[0].value)*F.parameter[hb],
rb=ha({index:E[0].index,value:Ma},da,{index:E[1].index,value:Ma},Oa);rb.y0>H.top&&rb.y0<H.top+H.height&&(Pa[ja]=Ma,M[ja]=rb,M[ja].width=F.lineWidth[hb],M[ja].color=F.lineColor[hb],M[ja++].dash=F.lineDash[hb])}if(1==F.showValue||1==F.showParameter)for(ja=1;ja<M.length;ja++)M[ja].textY=M[ja].y0,M[ja].textX=M[ja].x1-4,M[ja].textAlign="right",M[ja].textBaseline="bottom",da="",1==F.showParameter&&(da+=F.parameter[ja-1].toFixed(3)+", "),1==F.showValue&&(da+=Pa[ja].toFixed(3)),M[ja].text=da},oa=function(ja){M=
[];var da=0;ja=E[1].index-E[0].index;var Oa,Pa;if("sinWave"==B)M[0]=ha({index:E[0].index,value:E[0].value},0,{index:E[1].index,value:E[1].value},0);else{0==aa?E[1].value=E[0].value:1==aa&&(E[0].value=E[1].value);var hb=E[1].index;var Ma=v(E[0].index);M[da++]={x0:Ma,y0:H.top,x1:Ma,y1:H.top+H.height};Ma=v(E[1].index);M[da++]={x0:Ma,y0:H.top,x1:Ma,y1:H.top+H.height}}M[0].width=V.lineWidth;M[0].color=V.lineColor;M[0].dash=V.lineDash;if(0<ja)switch(B){case "Fibonacci":var rb=0;for(Pa=Oa=1;0<=hb&&!(2>rb?
hb+=ja:(hb+=(Oa+Pa)*ja,da=Oa,Oa=Pa,Pa+=da),Ma=v(hb),M[M.length]={x0:Ma,y0:H.top,x1:Ma,y1:H.top+H.height},Ma>H.left+H.width);rb++);break;case "timeSplit":for(rb=0;0<=hb&&!(hb+=ja,Ma=v(hb),M[M.length]={x0:Ma,y0:H.top,x1:Ma,y1:H.top+H.height},Ma>H.left+H.width);rb++);break;case "sinWave":ja=A(H.left);Oa=A(H.left+H.width);var zb=E[0].value-E[1].value,Jb=E[1].index-E[0].index;for(da=0;ja<=Oa;ja++)Ma=v(ja),hb=u(E[0].value-zb/2-Math.sin(Math.PI*(ja-E[0].index-Jb/2)/Jb)*zb/2),0==da?da++:M[M.length]={x0:Pa,
y0:rb,x1:Ma,y1:hb},Pa=Ma,rb=hb}},Aa=function(ja){M=[];ja=1==V.leftExt?V.leftLen:0;var da=1==V.rightExt?V.rightLen:0;M[0]=ha({index:E[0].index,value:E[0].value},ja,{index:E[1].index,value:E[1].value},da);M[0].width=V.lineWidth;M[0].color=V.lineColor;M[0].dash=V.lineDash;switch(B){case "Parallel":case "stockBox":if(2<E.length){var Oa=E[0].value-(E[1].value+(E[0].value-E[1].value)*(E[2].index-E[0].index)/(E[1].index-E[0].index)-(E[1].value-E[2].value));M[1]=ha({index:E[0].index,value:E[0].value-Oa},
ja,{index:E[1].index,value:E[1].value-Oa},da);for(var Pa=0;Pa<F.parameter.length;Pa++)if(1==F.show[Pa]){var hb=F.parameter[Pa];M[M.length]=ha({index:E[0].index,value:E[0].value-Oa*hb},ja,{index:E[1].index,value:E[1].value-Oa*hb},da)}}break;case "gridGann":Oa=2*(E[1].value-E[0].value);for(Pa=-8;8>Pa;Pa++)hb=Pa+1,M[M.length]=ha({index:E[0].index,value:E[0].value-Oa*hb},ja,{index:E[1].index,value:E[1].value-Oa*hb},da);for(Pa=-8;8>Pa;Pa++)hb=Pa+1,M[M.length]=ha({index:E[0].index,value:E[0].value-Oa*hb},
ja,{index:E[1].index,value:E[1].value-Oa*(hb+1)},da);break;case "Andrews":if(M[0]=ha({index:E[0].index,value:E[0].value},0,{index:E[1].index,value:E[1].value},0),2<E.length)for(Oa=(E[0].index+E[1].index)/2,Pa=(E[0].value+E[1].value)/2,M[1]=ha({index:E[2].index,value:E[2].value},ja,{index:Oa,value:Pa},da),M[2]=ha({index:E[0].index,value:E[0].value},ja,{index:E[0].index+Oa-E[2].index,value:E[0].value-(Pa-E[0].value)-(E[2].value-E[1].value)},da),M[3]=ha({index:E[1].index,value:E[1].value},ja,{index:E[1].index+
Oa-E[2].index,value:Pa-(E[2].value-E[1].value)},da),Pa=0;Pa<F.parameter.length;Pa++);}if(F&&void 0!=F.showValue&&1==F.showValue)for(Pa=0;Pa<M.length;Pa++)Q(M[Pa])},ta=function(ja){ja=1==V.rightExt?V.rightLen:0;var da=1;M=[ha(E[0],0,E[1],ja)];if("angleResi"==B)for(var Oa=0;Oa<F.parameter.length;Oa++){if(1==F.show[Oa]){var Pa=E[1].value+(E[0].value-E[1].value)*F.parameter[Oa];M[da]=ha({index:E[0].index,value:E[0].value},0,{index:E[1].index,value:Pa},ja);M[da].width=F.lineWidth[Oa];M[da].color=F.lineColor[Oa];
M[da++].dash=F.lineDash[Oa]}}else for(Oa=0;Oa<F.parameter.length;Oa++)if(1==F.show[Oa]){Pa=E[0];var hb=E[1];Pa=Pa.value+(hb.value-Pa.value)/(hb.index-Pa.index)*(hb.index-Pa.index)*Math.tan(F.parameter[Oa]/180*Math.PI);M[da]=ha({index:E[0].index,value:E[0].value},0,{index:E[1].index,value:Pa},ja);M[da].width=F.lineWidth[Oa];M[da].color=F.lineColor[Oa];M[da++].dash=F.lineDash[Oa]}if(1==F.showValue)for(da=0;da<M.length;da++)1==F.showValue&&Q(M[da])},Q=function(ja){var da=v(C),Oa=(ja.y1-ja.y0)/((ja.x1-
ja.x0)/(da-ja.x0))+ja.y0;da>H.left&&da<H.left+H.width&&Oa>H.top&&Oa<H.top+H.height&&(ja.textX=da,ja.textY=Oa,da=r(ja.textY).toFixed(3),ja.textAlign="left",ja.textBaseline="middle",ja.text=da)},sa=function(ja){M=[];for(ja=0;ja<E.length-1;ja++)M[ja]=ha(E[ja],0,E[ja+1],0)},ra=function(ja){M=[];for(var da=0;da<E.length-1&&2>da;da++)M[da]=ha({index:E[da].index,value:E[da].value},0,{index:E[da+1].index,value:E[da+1].value},0);2<E.length&&(da=2,M[da]=ha({index:E[da].index,value:E[da].value},0,{index:E[0].index,
value:E[0].value},0));if(V.fillColor){ja.save();ja.beginPath();da=0;ja.moveTo(v(E[0].index),u(E[0].value));for(da++;da<E.length;da++)ja.lineTo(v(E[da].index),u(E[da].value));ja.lineTo(v(E[0].index),u(E[0].value));ja.fillStyle=V.fillColor;ja.globalAlpha=V.fillAlpha;ja.fill();ja.closePath()}},la=function(ja){M=[];for(var da=0;da<E.length-1&&2>da;da++)M[da]=ha({index:E[da].index,value:E[da].value},0,{index:E[da+1].index,value:E[da+1].value},0);if(2<E.length){da=2;var Oa={index:E[da].index+(E[0].index-
E[1].index),value:E[da].value+(E[0].value-E[1].value)};M[da]=ha({index:E[da].index,value:E[da].value},0,Oa,0);M[da+1]=ha(Oa,0,{index:E[0].index,value:E[0].value},0);V.fillColor&&(ja.save(),ja.beginPath(),ja.moveTo(v(E[0].index),u(E[0].value)),ja.lineTo(v(E[1].index),u(E[1].value)),ja.lineTo(v(E[2].index),u(E[2].value)),ja.lineTo(v(E[0].index+(E[2].index-E[1].index)),u(E[2].value+(E[0].value-E[1].value))),ja.lineTo(v(E[0].index),u(E[0].value)),ja.fillStyle=V.fillColor,ja.globalAlpha=V.fillAlpha,ja.fill(),
ja.closePath())}},Na=function(ja){M[0]=ha({index:E[0].index,value:E[0].value},0,{index:E[0].index,value:E[1].value},0);M[1]=ha({index:E[0].index,value:E[1].value},0,{index:E[1].index,value:E[1].value},0);M[2]=ha({index:E[1].index,value:E[1].value},0,{index:E[1].index,value:E[0].value},0);M[3]=ha({index:E[1].index,value:E[0].value},0,{index:E[0].index,value:E[0].value},0);V.fillColor&&(ja.beginPath(),ja.moveTo(v(E[0].index),u(E[0].value)),ja.lineTo(v(E[0].index),u(E[1].value)),ja.lineTo(v(E[1].index),
u(E[1].value)),ja.lineTo(v(E[1].index),u(E[0].value)),ja.lineTo(v(E[0].index),u(E[0].value)),ja.fillStyle=V.fillColor,ja.globalAlpha=V.fillAlpha,ja.fill(),ja.closePath())},Wa=function(ja){M=[];for(var da=0;da<E.length;da++)M[da]=da<E.length-1?ha({index:E[da].index,value:E[da].value},0,{index:E[da+1].index,value:E[da+1].value},0):ha({index:E[da].index,value:E[da].value},0,{index:E[0].index,value:E[0].value},0);if(V.fillColor){ja.beginPath();da=0;ja.moveTo(v(E[0].index),u(E[0].value));for(da++;da<E.length;da++)ja.lineTo(v(E[da].index),
u(E[da].value));ja.lineTo(v(E[0].index),u(E[0].value));ja.fillStyle=V.fillColor;ja.globalAlpha=V.fillAlpha;ja.fill();ja.closePath()}},na=function(ja){M[0]=ha({index:E[0].index,value:E[0].value},0,{index:E[0].index,value:E[1].value},0);M[1]=ha({index:E[0].index,value:E[1].value},0,{index:E[1].index,value:E[1].value},0);ja.beginPath();ja.lineWidth=V.lineWidth;ja.strokeStyle=V.lineColor;var da=v(E[0].index),Oa=u(E[1].value),Pa=Math.abs(v(E[0].index)-v(E[1].index)),hb=Math.abs(u(E[0].value)-u(E[1].value));
ja.ellipse(da,Oa,Pa,hb,0,0,2*Math.PI,!0);ja.stroke();V.fillColor&&(ja.fillStyle=V.fillColor,ja.globalAlpha=V.fillAlpha,ja.fill());ja.closePath()},ha=function(ja,da,Oa,Pa){var hb=[];if(ja.index>Oa.index){var Ma=Oa.index;var rb=Oa.value;var zb=ja.index;ja=ja.value}else Ma=ja.index,rb=ja.value,zb=Oa.index,ja=Oa.value;void 0==da&&(da=0);void 0==Pa&&(Pa=0);Ma!=zb?(Oa="log"==O?ja-(zb-Ma)/(zb-Ma)*(Math.log(ja)-Math.log(rb)):ja-(zb-Ma)/(zb-Ma)*(ja-rb),hb[0]={x:v(Ma),y:u(Oa)},Oa="log"==O?rb+(zb-Ma)/(zb-Ma)*
(Math.log(ja)-Math.log(rb)):rb+(zb-Ma)/(zb-Ma)*(ja-rb),hb[1]={x:v(zb),y:u(Oa)},0<da&&(da=v(Ma-da),hb[0].y=hb[1].y+(hb[0].y-hb[1].y)*(hb[1].x-da)/(hb[1].x-hb[0].x),hb[0].x=da),0<Pa&&(da=v(zb+Pa),hb[1].y=hb[0].y+(hb[1].y-hb[0].y)*(da-hb[0].x)/(hb[1].x-hb[0].x),hb[1].x=da)):(hb[0]={x:v(Ma),y:u(rb)},0<da&&(rb>ja?hb[0].y=H.top:rb<ja&&(hb[0].y=H.top+H.height)),hb[1]={x:hb[0].x,y:u(ja)},0<Pa&&(ja>rb?hb[1].y=H.top:ja<rb&&(hb[1].y=H.top+H.height)));return{x0:hb[0].x,y0:hb[0].y,x1:hb[1].x,y1:hb[1].y}};this.drawLocatePoint=
function(ja){ja.save();ja.strokeStyle=V.lineColor;var da=lightDarkenColor(V.lineColor,70,.2),Oa=V.lineColor;b.getOption();ja.lineWidth=2;for(var Pa=0;Pa<E.length;Pa++){var hb=v(E[Pa].index),Ma=u(E[Pa].value);hb>=H.left&&hb<=H.left+H.width&&Ma>=H.top&&Ma<=H.top+H.height&&(ja.beginPath(),ja.fillStyle=Oa,ja.arc(hb,Ma,3,0,2*Math.PI),ja.fill(),ja.closePath(),ja.beginPath(),ja.fillStyle=da,ja.arc(hb,Ma,5,0,2*Math.PI),ja.fill(),ja.closePath())}ja.restore()};this.getTotalDos=function(){return Y};this.nextDot=
function(){return 1==ba&&aa<Y-1?(aa++,!0):!1};this.setPosition=function(ja,da,Oa){if(1!=N){Oa=Oa(ja,da,U);if(100==aa){Oa=ja-ia;da=r(da)-fa;for(var Pa=0;Pa<E.length;Pa++)ja=T[Pa].index+Oa,E[Pa]={index:ja,time:z(ja),value:T[Pa].value+da}}else E[aa]={index:ja,time:z(ja),value:Oa};J=!0}};this.setlineDash=function(ja,da,Oa){V.lineColor=ja;V.lineWidth=da;V.lineDash=Oa};this.relocate=function(ja,da){for(ja=0;ja<E.length;ja++){var Oa=da(E[ja].time);null!=Oa&&(E[ja].index=Oa)}};this.hitTest=function(ja,da){aa=
-1;if(0==ba)return aa;for(var Oa=0;Oa<E.length;Oa++){var Pa=v(E[Oa].index),hb=u(E[Oa].value);if(ja>=Pa-3&&ja<=Pa+3&&da>=hb-3&&da<=hb+3){aa=Oa;break}}if(-1==aa){if(X&&ja>=X.left&&ja<=X.left+X.width&&da>=X.top&&da<=X.top+X.height)aa=100;else for(Oa=0;Oa<M.length;Oa++)if(1==p.isOnLine(ja,da,M[Oa])){aa=100;break}if(100==aa)for(ia=A(ja),fa=r(da),Oa=0;Oa<E.length;Oa++)T[Oa]={index:E[Oa].index,time:z(E[Oa].index),value:E[Oa].value}}return aa};this.isOnLine=function(ja,da,Oa){var Pa=Oa.x0,hb=Oa.y0,Ma=Oa.x1,
rb=Oa.y1;Oa=!1;Pa==Ma?ja>=Pa-2&&ja<=Pa+2&&(da>=hb&&da<=rb||da>=rb&&da<=hb)&&(Oa=!0):hb==rb?da>=hb-2&&da<=hb+2&&(ja>=Pa&&ja<=Ma||ja>=Ma&&ja<=Pa)&&(Oa=!0):ja>=Pa&&ja<=Ma&&da>=hb&&da<=rb?(ja=hb+(ja-Pa)/(Ma-Pa)*(rb-hb),da>=ja-3&&da<=ja+3&&(Oa=!0)):ja>=Pa&&ja<=Ma&&da>=rb&&da<=hb?(ja=hb-(ja-Pa)/(Ma-Pa)*(hb-rb),da>=ja-3&&da<=ja+3&&(Oa=!0)):ja>=ja&&ja<=Pa&&da>=hb&&da<=rb?(ja=rb-(ja-Ma)/(Pa-Ma)*(rb-hb),da>=ja-3&&da<=ja+3&&(Oa=!0)):ja>=Ma&&ja<=Pa&&da>=rb&&da<=hb&&(ja=rb-(ja-Ma)/(Pa-Ma)*(rb-hb),da>=ja-3&&da<=
ja+3&&(Oa=!0));return Oa};this.getPopupMenu=function(ja,da){ja=[[{title:"\u8bbe\u7f6e",action:"onSetDrawLine()"}],[{type:"splitLine",height:1}],[{title:"\u9501\u5b9a",action:"onLockDrawLine()"}],[{title:"\u9690\u85cf",action:"onHideDrawLine()"}],[{title:"\u5220\u9664",action:"onDeleteDrawLine()"}]];1==N&&(ja[2][0].title="\u89e3\u9501");return{popup:ja}};this.setDrawLine=function(){for(var ja=0;ja<drawLineDefine.length;ja++)if(B==drawLineDefine[ja].type){var da=0,Oa="";Oa+='<span>\u7ebf\u6761\u989c\u8272:&#32</span><input type="text" class="xColorPicker" style="width:64px;border:1px solid #ddd" value="'+
V.lineColor.slice(1)+'" name="set.lineColor">';void 0!=V.lineWidth&&(Oa+='<span>&#32&#32\u7ebf\u5bbd:&#32</span><input type="number" class="xLineWidthPicker" style="width:32px" value="'+V.lineWidth+'" name="set.lineWidth">');void 0!=V.lineDash&&(Oa+='<span>&#32&#32\u7ebf\u578b:&#32</span><input type="text" class="xLineTypePicker" style="width:64px;" value="'+V.lineDash.join(",")+'" name="set.lineDash">');Oa+="</br>";da++;void 0!=V.fillColor&&(Oa+='<span>&#32&#32\u586b\u5145\u80cc\u666f:&#32</span><input class="xColorPicker" type="text" style="width:64px;border:1px solid #ddd" value="'+
V.fillColor+'" name="set.fillColor"></br>',da++);void 0!=V.fillAlpha&&(Oa+='<span>&#32&#32\u586b\u5145\u900f\u660e:&#32</span><input type="number" style="width:64px" value="'+V.fillAlpha+'" name="set.fillAlpha"></br>',da++);void 0!=V.leftExt&&(Oa+='<input type="checkbox" id="checkLeft" name="set.leftExt"',1==V.leftExt&&(Oa+=" checked"),Oa+=">",Oa+='<label for="checkLeft">&#32\u5f00\u59cb\u7aef\u5ef6\u957f:&#32</label></input><input type="number"  name="set.leftLen" style="width:64px;margin-top:4px;" value="'+
V.leftLen+'"></br>',da++);void 0!=V.rightExt&&(Oa+='<input type="checkbox" id="checkRight" name="set.rightExt"',1==V.rightExt&&(Oa+=" checked"),Oa+=">",Oa+='<label for="checkRight">&#32\u7ed3\u675f\u7aef\u5ef6\u957f:&#32</label></input><input type="number"  name="set.rightLen" style="width:64px;margin-top:4px;" value="'+V.rightLen+'"></br>',da++);if(F&&(void 0!=F.textColor&&(Oa+='<span>\u6587\u672c\u989c\u8272:&#32</span><input type="text" class="xColorPicker" style="width:64px;margin-top:4px;border:1px solid #ddd" name="setEx.textColor" value="'+
F.textColor.slice(1)+'"></br>',da++),void 0!=F.backgroundColor&&(Oa+='<span>\u6587\u672c\u80cc\u666f:&#32</span><input type="text" class="xColorPicker" style="width:64px;margin-top:4px;border:1px solid #ddd" name="setEx.backgroundColor" value="'+F.backgroundColor+'"></br>',da++),void 0!=F.text&&(Oa+='<span>\u6587\u672c\u5185\u5bb9:&#32</span><input type="text" style="width:240px;margin-top:4px;" name="setEx.text" value="'+F.text+'"></br>',da++),void 0!=F.showParameter&&(Oa+='<input type="checkbox" id="showParameter" name="setEx.showParameter"',
1==F.showParameter&&(Oa+=" checked"),Oa+=">",Oa+='<label for="showParameter" style="width:64px;margin-top:4px;">&#32\u663e\u793a\u5212\u7ebf\u53c2\u6570</label></br>',da++),void 0!=F.showValue&&(Oa+='<input type="checkbox" id="showValue" name="setEx.showValue"',1==F.showValue&&(Oa+=" checked"),Oa+=">",Oa+='<label for="showValue" style="width:64px;margin-top:4px;">&#32\u663e\u793a\u6700\u65b0\u4ea4\u70b9\u503c</label></br>',da++),void 0!=F.parameter)){Oa+="<table cellspacing='0' cellpadding='1'><th>\t</th><th>\u53c2\u6570</th><th>\u989c\u8272</th><th>\u7ebf\u5bbd</th><th>\u7ebf\u578b</th>";
da++;for(var Pa=0;Pa<F.parameter.length;Pa++)da++,Oa+="<tr>",F.show&&(Oa+='<td style="text-align:center;font-size:18px;width:24px;minwidth:24px"><input type="checkbox" name="setEx.show['+Pa+']"',1==F.show[Pa]&&(Oa+=" checked"),Oa+="></td>"),Oa+='<td><input type="number"  name="setEx.parameter['+Pa+']" style="width:60px" value="'+F.parameter[Pa]+'"</input></td>',F.lineColor&&(Oa+='<td><input type="text"  name="setEx.lineColor['+Pa+']" class="xColorPicker" style="width:64px;border:1px solid #ddd" value="'+
F.lineColor[Pa].slice(1)+'"</input></td>'),F.lineWidth&&(Oa+='<td><input type="number" class="xLineWidthPicker" name="setEx.lineWidth['+Pa+']" style="width:32px" value="'+F.lineWidth[Pa]+'"</input></td>'),F.lineDash&&(Oa+='<td><input type="text" class="xLineTypePicker" name="setEx.lineDash['+Pa+']" style="width:60wi dpx" value="'+F.lineDash[Pa]+'"</input></td>'),Oa+="</tr>";Oa+="</table>"}da=20<da?20:da;ja=new xDialog(a,"\u4fee\u6539 "+drawLineDefine[ja].name+" \u5c5e\u6027",p,368,96+24*da);da=document.createElement("div");
da.id=ja.getDialogId()+"-dlg";da.innerHTML=Oa;ja.setDlg(da,"overflow:auto;padding:8px;cursor:default;font-size:12px;font-family:"+xGlobal.systemFont+";");ja.setAutoApply("modifyDrawLineOk(dlg, apply)");ja.setButtons([{capture:"\u786e\u8ba4",action:"modifyDrawLineOk(dlg, apply)"},{capture:"\u53d6\u6d88"}]);break}};var ea=function(){return{set:V,setEx:F}};this.modifyDrawLineOk=function(ja,da){da=da.replace(/set\./g,ea.name+"().set.");(da=da.replace(/setEx\./g,ea.name+"().setEx."))&&0<da.length&&(eval(da),
b.drawLayers(),J=!0)}}
chartDrawLine.getPopupMenu=function(a){a=void 0===a?"":a;var b="",c=[];""!=a&&0<a.length&&(a+=".");for(var g=0;g<drawLineDefine.length;g++)if(b!=drawLineDefine[g].group){b=drawLineDefine[g].group;var k=c.length;for(c[k]={capture:drawLineDefine[g].groupName,captureProperty:drawLineDefine[g].groupNameProperty,subMenu:[]};g<drawLineDefine.length;g++){if(b!=drawLineDefine[g].group){g--;break}c[k].subMenu[c[k].subMenu.length]={capture:drawLineDefine[g].name,captureProperty:drawLineDefine[g].nameProperty,action:a+
"onDoNewDrawLine('"+drawLineDefine[g].type+"')"}}}c[c.length]={capture:"---"};c[c.length]={capture:"\u663e\u793a\u6240\u6709\u753b\u7ebf",captureProperty:"chartForDrawShowAllDashes",action:a+"onShowAllDrawLine(true)"};c[c.length]={capture:"\u9690\u85cf\u6240\u6709\u753b\u7ebf",captureProperty:"chartForDrawHideAllDashes",action:a+"onShowAllDrawLine(false)"};c[c.length]={capture:"---"};c[c.length]={capture:"\u5220\u9664\u6240\u6709\u753b\u7ebf",captureProperty:"chartForDrawDeleteAllDashes",action:a+
"onDeleteAllDrawLine()"};return c};
chartDrawLine.createPopupMenu=function(a){var b="",c=[];""!=a&&0<a.length&&(a+=".");for(var g=0;g<drawLineDefine.length;g++)if(b!=drawLineDefine[g].group){b=drawLineDefine[g].group;var k=c.length;c[k]=[{title:drawLineDefine[g].groupName,type:"xSaftButton",icon:drawLineDefine[g].icon}];for(var q=[];g<drawLineDefine.length;g++){if(b!=drawLineDefine[g].group){g--;break}q[q.length]=[{title:drawLineDefine[g].name,type:"xSaftButton",icon:drawLineDefine[g].icon,action:a+"onDoNewDrawLine('"+drawLineDefine[g].type+
"')"}]}c[k][0].option={popupMenu:{popup:q}}}c[c.length]=[{type:"splitLine"}];c[c.length]=[{title:"\u663e\u793a\u6240\u6709\u753b\u7ebf",type:"xSaftButton",icon:"ShowBtn",action:a+"onShowAllDrawLine(true)"}];c[c.length]=[{title:"\u9690\u85cf\u6240\u6709\u753b\u7ebf",type:"xSaftButton",icon:"CloseEye",action:a+"onShowAllDrawLine(false)"}];c[c.length]=[{type:"splitLine"}];c[c.length]=[{title:"\u5220\u9664\u6240\u6709\u753b\u7ebf",type:"xSaftButton",icon:"Close",action:a+"onDeleteAllDrawLine()"}];return c};var formulaScript=[{id:"TChart",name:"\u5206\u65f6\u8d70\u52bf\u56fe",script:["\n            setXAxis(Time);\n            setyAxisMiddleValue(quote.PreClose, quote.PreClose.dec,0.01);\n           \n            h:quote.High;\n            l:quote.Low;\n            if (typeof(VWAP)!='undefined') {\n                \u5747\u4ef7\u7ebf:VWAP, Color2;\n            };\n            if (typeof(IOPV)!='undefined'){\n                \u51c0\u503c:IOPV, Color3;\n            }\n            if (getVariable('showAuction') && auction){\n              drawRect(REFBARPOS(time==REF(auction.time, 0)),'chartTop', REFBARPOS(time==REFX(auction.time, 0)), 'chartBottom', RGB(64,72,72,0.15));\n              \u6210\u4ea4\u4ef7:Price, linethick1;\n            }else{\n                \u6210\u4ea4\u4ef7:Price, linethick1, beginValue:quote.Open;\n            }\n            "]},
{id:"TStock",name:"\u8d70\u52bf\u6da8\u8dcc\u56fe",script:["\n            setXAxis(Time);\n            setyAxisMiddleValue(quote.PreClose, quote.PreClose.dec, 0.4);\n            \u6210\u4ea4\u4ef7:Price, lineStock, linethick2, beginValue:quote.Open;\n            if (typeof(VWAP)!='undefined') {\n                \u5747\u4ef7\u7ebf:VWAP, color888888;\n            }"]},{id:"TArea",name:"\u8d70\u52bf\u9762\u79ef\u56fe",script:["\n            setXAxis(Time);\n            setyAxisMiddleValue(quote.PreClose, quote.PreClose.dec, 0.01);\n           \n            drawGradient(Price, Color1, 'bottom', 'backgroundColor', 0.1);\n            h:quote.High, drawnull;\n            l:quote.Low, drawnull;\n            if (typeof(VWAP)!='undefined') {\n                \u5747\u4ef7\u7ebf:VWAP, Color2;\n            }\n            if (typeof(IOPV)!='undefined'){\n                \u51c0\u503c:IOPV, Color3;\n            }\n            if (getVariable('showAuction') && typeof(auction)!='undefined'){\n              drawRect(REFBARPOS(time==REF(auction.time, 0)),'chartTop', REFBARPOS(time==REFX(auction.time, 0)), 'chartBottom', RGB(64,72,72,0.15));\n              \u6210\u4ea4\u4ef7:Price, linethick1;\n            }else{\n                \u6210\u4ea4\u4ef7:Price, linethick1,beginValue:quote.Open;\n            }\n            "]},
{id:"TClose",name:"\u5206\u65f6\u8d70\u52bf\u7ebf",script:["\n            setXAxis(Time);\n            setyAxisMiddleValue(quote.PreClose, quote.PreClose.dec, 0.15);\n            if (getVariable('showAuction') && typeof(auction)!=\"undefined\"){\n                drawRect(REFBARPOS(time==REF(auction.time, 0)),'chartTop', REFBARPOS(time==REFX(auction.time, 0)), 'chartBottom', RGB(64,72,72,0.15));\n                \u6210\u4ea4\u4ef7:Price, linethick1;\n            }else{\n                \u6210\u4ea4\u4ef7:Price, linethick1, beginValue:quote.Open;\n            }"]},
{id:"TAvgLine",name:"\u5747\u4ef7\u7ebf",script:["\n            setXAxis(Time);\n            setYSaleType('absolute');\n            if (typeof(VWAP)!=\"undefined\") {\n                \u5747\u4ef7\u7ebf:VWAP, color888888;\n            }"]},{id:"TOverlying",name:"\u53e0\u52a0\u54c1\u79cd",script:["INPUT:tag('600000.SH');","dat=query(\"select Time, Price from md.quote/trend('{{ tag }}') {{ last }} include flags sub 1000\", true);","dat1=query(\"select preclose, open from md.quote where code='{{ tag }}'\", true);",
"setyAxisMiddleValue(dat1.PreClose);","li:dat.Price, beginValue:dat1.Open;"]},{id:"TVol",name:"\u5206\u65f6\u6210\u4ea4\u91cf",script:["setXAxis(Time);","VOL:Volume,NoLine, Color1,format%V;","stickLine(Price>REF2(Price,1,quote.PreClose),0, VOL,1,1),ColorShine;","stickLine(Price<REF2(Price,1,quote.PreClose),0, VOL,1,0),ColorShade;","stickLine(Price==REF2(Price,1,quote.PreClose),0, VOL,1,0),ColorHold;"]},{id:"TAmount",name:"\u5206\u65f6\u6210\u4ea4\u989d",script:["setXAxis(Time);","Amount:Amount,NoLine, Color1,format%W%.2;",
"stickLine(Price>REF2(Price,1,quote.PreClose),0, Amount,1,1),ColorShine;","stickLine(Price<REF2(Price,1,quote.PreClose),0, Amount,1,0),ColorShade;","stickLine(Price==REF2(Price,1,quote.PreClose),0, Amount,1,0),ColorHold;"]},{id:"KLine",name:"K\u7ebf\u56fe",script:["\n            {{ var t = Time?Time:Date; setXAxis(t); }},\n            setOption(paddingTop=0, paddingBottom=0);\n            drawKLine(Open, High, Low, Close);\n            // PercentChange:=(Close-ref(Close,1))/ref(Close,1)*100;,\n            // drawText(factor.Info, 'top', '\u203b', formatValue(t,'YYYY/MM/DD') + ':\\r ' + factor.Info), fontSize12, offset10, align1, valign0;\n            \n            // \u4ef7\u683c\u8df3\u7a7a\n            if (getVariable('showPriceGap')) {\n                // \u8df3\u7a7a \u6da8\u5e45/\u8dcc\u5e45\u8d85\u8fc7 5%\n                zf := abs((open - ref(close,1))*100/ref(close,1));\n                gap := IFF(zf > 5, 1, 0);\n                // \u53cd\u5411\u8fc7\u6ee4\uff0c\u53ea\u53d6\u6700\u540e\u4e00\u4e2a\u8df3\u7a7a\n                gap := filterx(gap, 0);\n                // \u753b\u8df3\u7a7a\u8272\u5757\n                drawRect(RefBarPos(gap), refdata(ref(close,1), gap), 'right', refdata(open, gap), rgb(128,128,128,0.3));\n                // \u6807\u793a\u4ef7\u683c\u533a\u95f4\n                drawText(gap, (open + ref(close,1))/2, ref(close,1) + '-' + open);\n            }\n            if (typeof(factor)!=\"undefined\") {\n                drawText(factor.Info, low, 'q', formatValue(t,'YYYY/MM/DD') + '\\r ' + factor.Info), color2, fontSize12, offset10, align1, valign0, tipPos3;\n            }"]},
{id:"KLine_Solid",name:"K\u7ebf\u56fe",script:["\n              {{ var t = Time?Time:Date; setXAxis(t); }},\n              setOption(paddingTop=0, paddingBottom=0);\n              drawKLine(Open, High, Low, Close, 'fill');\n              // PercentChange:=(Close-ref(Close,1))/ref(Close,1)*100;,\n              // drawText(factor.Info, 'top', '\u203b', formatValue(t,'YYYY/MM/DD') + ':\\r ' + factor.Info), fontSize12, offset10, align1, valign0;\n              \n              // \u4ef7\u683c\u8df3\u7a7a\n              if (getVariable('showPriceGap')) {\n                  // \u8df3\u7a7a \u6da8\u5e45/\u8dcc\u5e45\u8d85\u8fc7 5%\n                  zf := abs((open - ref(close,1))*100/ref(close,1));\n                  gap := IFF(zf > 5, 1, 0);\n                  // \u53cd\u5411\u8fc7\u6ee4\uff0c\u53ea\u53d6\u6700\u540e\u4e00\u4e2a\u8df3\u7a7a\n                  gap := filterx(gap, 0);\n                  // \u753b\u8df3\u7a7a\u8272\u5757\n                  drawRect(RefBarPos(gap), refdata(ref(close,1), gap), 'right', refdata(open, gap), rgb(128,128,128,0.3));\n                  // \u6807\u793a\u4ef7\u683c\u533a\u95f4\n                  drawText(gap, (open + ref(close,1))/2, ref(close,1) + '-' + open);\n              }\n              if (typeof(factor)!=\"undefined\") {\n                  drawText(factor.Info, low, 'q', formatValue(t,'YYYY/MM/DD') + '\\r ' + factor.Info), color2, fontSize12, offset10, align1, valign0, tipPos3;\n              }"]},
{id:"AreaLine",name:"\u9762\u79ef\u56fe",script:["setXAxis(Time?Time:Date);","\u6536\u76d8:Close, ColorRed;","drawGradient(Close, Color1, 'bottom', 'backgroundColor', 1);"]},{id:"AreaLine1",name:"\u9762\u79ef\u56fe",script:["setXAxis(Time?Time:Date);","setOption(paddingTop=10, paddingBottom=10);","\u6536\u76d8:Close, rgb(57, 152, 186), linethick2;","drawGradient(Close, rgb(221, 242, 245), 'bottom', rgb(255, 255, 255), 0.8);"]},{id:"CloseLine",name:"\u6536\u76d8\u7ebf",script:["setXAxis(Time?Time:Date);",
"setOption(paddingTop=10, paddingBottom=10);","\u6536\u76d8:Close, Color1, linethick3;"]},{id:"AmericaLine",name:"\u7f8e\u56fd\u7ebf",script:"setXAxis(Time?Time:Date);{stickLine(Close>Open,High,Low,0,0), ColorShine;{stickLine(Close<Open,High,Low,0,0),ColorShade;{stickLine(Close==Open,High,Low,0,0),ColorHold;{stickLine(Close>Open,Close,Close,3.5,378),ColorShine;{stickLine(Close<Open,Close,Close,3.5,378),ColorShade;{stickLine(Close==Open,Close,Close,3.5,378),ColorHold;{stickLine(Close>Open,Open,Open,3.5,378*(-1)), ColorShine;{stickLine(Close<Open,Open,Open,3.5,378*(-1)), ColorShade;{stickLine(Close==Open,Open,Open,3.5,378*(-1)), ColorHold;".split("{")},
{id:"TownLine",name:"\u5b9d\u5854\u7ebf",script:"setXAxis(Time?Time:Date);{C1:=REF(Close,1);{C2:=REF(Close,2);{stickLine(C2>C1 && Close<C2 ,C1,Close,6,0),ColorDown;{stickLine(C2>C1 && C2>=Close && Close>C1,C1,Close,6,0),ColorDown;{stickLine(C2>C1 && Close>C2 ,C1,C2,6,0),ColorDown;{stickLine(C2>C1 && Close>C2 ,C2,Close,6,0),ColorUp;{stickLine(C2>C1 && Close==C1 ,Close,Close,6,0),ColorDown;{stickLine(C1>C2 && Close>C1,C1,Close,6,0),ColorUp;{stickLine(C1>C2 && C2<= Close && Close<C1,C1,Close,6,0),ColorUp;{stickLine(C1>C2 && Close<C2 ,C2,C1,6,0),ColorUp;{stickLine(C1>C2 && Close<C2,C2,Close,6,0),ColorDown;{stickLine(C1>C2 && Close==C1,Close,Close,6,0),ColorUp;{stickLine(C1==C2 && Close>C1,C1,Close,6,0),ColorUp;{stickLine(C1==C2 && Close<C1,C1,Close,6,0),ColorUp;{stickLine(C1==C2 && Close<C1,C1,C1,6,0),ColorUp;{stickLine(C1==C2 && Close<C1,C1,Close,6,0),ColorDown;{stickLine(C1==C2 && Close==C1,Close,Close,6,0),ColorUp;".split("{")},
{id:"overlying",name:"\u53e0\u52a0\u54c1\u79cd",script:["INPUT:M1('000002.SZ');","dat=query(\"select  {{ dateAttr }}, Open, High, Low, Close, Volume, Amount from {{ table }}('{{ M1 }}') at date > 20180101 {{ typeattr }} relation({{ relation }}) sub 1000\", true);","li:dat.Close, boundParam'M1';"]},{id:"MD23",name:"\u67f1\u72b6\u7ebf178",script:["INPUT:M1(5,2,500),M2(10,2,500),M3(20,2,500);","VOL:Volume,NoLine,Color1,format%K;","stickLine(Close>REF2(Close,1,Open),0, VOL,6,1),ColorShine;","stickLine(Close<REF2(Close,1,Open),0, VOL,5,0),ColorShade;",
"stickLine(Close==REF2(Close,1,Open),0, VOL,6,0),ColorHold;"]},{id:"MA3",name:"\u79fb\u52a8\u5e73\u5747\u7ebf3",script:["INPUT:M1(5,0,1000),M2(10,0,1000),M3(20,0,1000),M4(60,0,1000),M5(90,0,1000),M6(120,0,1000);","setYSaleType('absolute');","MA1:MA(Close,M1),colorSeaBlue, boundParam'M1';","MA6:MA(Close,M6),colorOrange, boundParam'M6';"]},{id:"MA2",name:"\u79fb\u52a8\u5e73\u5747\u7ebf2",script:["INPUT:M1(5,0,1000),M2(10,0,1000),M3(20,0,1000),M4(60,0,1000),M5(90,0,1000),M6(120,0,1000);","setYSaleType('absolute');",
"MA3:MA(Close,M3),colorSkyBlue, boundParam'M3';","MA4:MA(Close,M4),colorWhite, boundParam'M4';","MA5:MA(Close,M5),colorOrange, boundParam'M5';"]},{id:"MA",name:"\u79fb\u52a8\u5e73\u5747\u7ebf",script:"INPUT:M1(5,0,1000),M2(10,0,1000),M3(20,0,1000),M4(60,0,1000),M5(90,0,1000),M6(120,0,1000);{setYSaleType('absolute');{MA1:MA(Close,M1),Color1, boundParam'M1';{MA2:MA(Close,M2),Color2, boundParam'M2';{MA3:MA(Close,M3),Color3, boundParam'M3';{MA4:MA(Close,M4),Color4, boundParam'M4';{MA5:MA(Close,M5),Color5, boundParam'M5';{MA6:MA(Close,M6),Color6, boundParam'M6';".split("{"),
note:"\u4e00\u822c\u7528\u6cd5\uff1a;\u845b\u6c0f\u516b\u6cd5\u5219:;1. \u5e73\u5747\u7ebf\u4ece\u4e0b\u964d\u9010\u6e10\u8d70\u5e73\uff0c\u5f53\u80a1\u4ef7\u4ece\u5e73\u5747\u7ebf\u7684\u4e0b\u65b9\u7a81\u7834\u5e73\u5747\u7ebf\u65f6\u662f\u4e3a\u4e70\u8fdb\u4fe1\u53f7\u3002;2. \u80a1\u4ef7\u8fde\u7eed\u4e0a\u5347\u8fdc\u79bb\u5e73\u5747\u7ebf\u4e4b\u4e0a\uff0c\u80a1\u4ef7\u7a81\u7136\u4e0b\u8dcc\uff0c\u4f46\u672a\u8dcc\u7834\u4e0a\u5347\u7684\u5e73\u5747\u7ebf\uff0c\u80a1\u4ef7\u53c8\u518d\u5ea6\u4e0a\u5347\u65f6\uff0c\u53ef\u4ee5\u52a0\u7801\u4e70\u8fdb\u3002;3. \u80a1\u4ef7\u867d\u4e00\u65f6\u8dcc\u81f3\u5e73\u5747\u7ebf\u4e4b\u4e0b\uff0c\u4f46\u5e73\u5747\u7ebf\u4ecd\u5728\u4e0a\u626c\u4e14\u80a1\u4ef7\u4e0d\u4e45\u9a6c\u4e0a\u53c8\u6062\u590d\u5230\u5e73\u5747\u7ebf\u4e4b\u4e0a\u65f6\uff0c\u4ecd\u4e3a\u4e70\u8fdb\u4fe1\u53f7\u3002;4. \u80a1\u4ef7\u8dcc\u7834\u5e73\u5747\u7ebf\u4e4b\u4e0b\uff0c\u7a81\u7136\u8fde\u7eed\u66b4\u8dcc\uff0c\u8fdc\u79bb\u5e73\u5747\u7ebf\u65f6\uff0c\u5f88\u53ef\u80fd\u518d\u5411\u5e73\u5747\u7ebf\u5f39\u5347\uff0c\u8fd9\u4e5f\u662f\u4e70\u8fdb\u4fe1\u53f7\u3002;5. \u80a1\u4ef7\u6025\u901f\u4e0a\u5347\u8fdc\u8d85\u8fc7\u4e0a\u5347\u7684\u5e73\u5747\u7ebf\u65f6\uff0c\u5c06\u51fa\u73b0\u77ed\u7ebf\u7684\u56de\u8dcc\uff0c\u518d\u8d8b\u5411\u4e8e\u5e73\u5747\u7ebf\uff0c\u8fd9\u662f\u5356\u51fa\u4fe1\u53f7\u3002;6. \u5e73\u5747\u7ebf\u8d70\u52bf\u4ece\u4e0a\u5347\u9010\u6e10\u8d70\u5e73\u8f6c\u5f2f\u4e0b\u8dcc\uff0c\u800c\u80a1\u4ef7\u4ece\u5e73\u5747\u7ebf\u7684\u4e0a\u65b9\uff0c\u5f80\u4e0b\u8dcc\u7834\u5e73\u5747\u7ebf\u65f6\uff0c\u5e94\u662f\u5356\u51fa\u4fe1\u53f7\u3002;7. \u80a1\u4ef7\u8dcc\u843d\u4e8e\u5e73\u5747\u7ebf\u4e4b\u4e0b\uff0c\u7136\u540e\u5411\u5e73\u5747\u7ebf\u5f39\u5347\uff0c\u4f46\u672a\u7a81\u7834\u5e73\u5747\u7ebf\u5373\u53c8\u544a\u56de\u843d\uff0c\u4ecd\u662f\u5356\u51fa\u4fe1\u53f7\u3002;8. \u80a1\u4ef7\u867d\u4e0a\u5347\u7a81\u7834\u5e73\u5747\u7ebf\uff0c\u4f46\u7acb\u523b\u53c8\u6062\u590d\u5230\u5e73\u5747\u7ebf\u4e4b\u4e0b\u800c\u6b64\u65f6\u5e73\u5747\u7ebf\u53c8\u7ee7\u7eed\u4e0b\u8dcc\uff0c\u5219\u662f\u5356\u51fa\u4fe1\u53f7\u3002".split(";")},
{id:"BOLL",name:"BOLL",script:"INPUT:M(20,2,999);{BOLL:MA(Close,M);{UPPER:BOLL+2*STD(Close,M);{LOWER:BOLL-2*STD(Close,M);{stickLine(Close>Open,High,Low,0,0), ColorShine;{stickLine(Close<Open,High,Low,0,0),ColorShade;{stickLine(Close==Open,High,Low,0,0),ColorHold;{stickLine(Close>Open,Close,Close,3.5,378),ColorShine;{stickLine(Close<Open,Close,Close,3.5,378),ColorShade;{stickLine(Close==Open,Close,Close,3.5,378),ColorHold;{stickLine(Close>Open,Open,Open,3.5,378*(-1)), ColorShine;{stickLine(Close<Open,Open,Open,3.5,378*(-1)), ColorShade;{stickLine(Close==Open,Open,Open,3.5,378*(-1)), ColorHold;".split("{")},
{id:"SAR",name:"\u629b\u7269\u7ebf\u8f6c\u5411",script:["setXAxis(Time?Time:Date);","INPUT:S(20,1,100),M(200,1,100);","setYSaleType('absolute');","S1:SAR(S,M,Close,High,Low),CROSSDOT;"]},{id:"Zigzap",name:"Z\u5b57\u7ebf",script:["INPUT:PER(10,1,60,1);","setYSaleType('absolute');","Z:ZIG(Close,PER);"]},{id:"BBI",name:"\u591a\u7a7a\u6307\u6807",script:["INPUT:M1(3,2,100),M2(6,2,100),M3(12,2,100),M4(24,2,100);","setYSaleType('absolute');","BBI:(MA(Close,M1)+MA(Close,M2)+MA(Close,M3)+MA(Close,M4))/4;"]},
{id:"CDP",name:"\u9006\u52bf\u64cd\u4f5c",script:"PT:=REF(High+Low+Close,1)/3; setYSaleType('absolute'); NH:PT*2-REF(Low,1); AH:NH+REF(High-Low,1); CDP:REF(High+Low+Close,1)/3; NL:PT*2-REF(High,1); AL:NL-REF(High-Low,1);".split(" ")},{id:"EMA",name:"EMA",script:"INPUT:M1(5,1,300),M2(10,1,300),M3(20,1,300),M4(60,1,300),M5(120,1,300);{setYSaleType('absolute');{MA1:EMA(Close,M1), boundParam'M1';{MA2:EMA(Close,M2), boundParam'M2';{MA3:EMA(Close,M3), boundParam'M3';{MA4:EMA(Close,M4), boundParam'M4';{MA5:EMA(Close,M5), boundParam'M5';".split("{")},
{id:"EXPMA",name:"\u6307\u6570\u5e73\u5747\u7ebf",script:["INPUT:M1(12,2,500),M2(50,2,500);","EXP1:EMA(CLOSE,M1);","EXP2:EMA(CLOSE,M2);"]},{id:"Channel",name:"\u901a\u9053\u7ebf",script:["INPUT:M1(5,0,1000);","setYSaleType('absolute');","MA1:=MA(Close,M1);","UPPER:MA1*1.025;","lowER:MA1*0.975;"]},{id:"PBX",name:"\u7011\u5e03\u7ebf",script:"INPUT:M1(4,3,10),M2(6,3,20),M3(9,3,30),M4(13,3,40),M5(18,3,50),M6(24,3,60); setYSaleType('absolute'); PBX1:(EMA(Close,M1)+MA(Close,M1*2)+MA(Close,M1*4))/3; PBX2:(EMA(Close,M2)+MA(Close,M2*2)+MA(Close,M2*4))/3; PBX3:(EMA(Close,M3)+MA(Close,M3*2)+MA(Close,M3*4))/3; PBX4:(EMA(Close,M4)+MA(Close,M4*2)+MA(Close,M4*4))/3; PBX5:(EMA(Close,M5)+MA(Close,M5*2)+MA(Close,M5*4))/3; PBX6:(EMA(Close,M6)+MA(Close,M6*2)+MA(Close,M6*4))/3;".split(" ")},
{id:"VOL",name:"VOL",script:"INPUT:M1(5,2,500),M2(10,2,500),M3(20,2,500);{VOL:Volume,NoLine,Color1,format%V%N;{stickLine(Close>REF2(Close,1,Open),0, VOL,6,1),ColorShine;{stickLine(Close<REF2(Close,1,Open),0, VOL,5,0),ColorShade;{stickLine(Close==REF2(Close,1,Open),0, VOL,6,0),ColorHold;{MAVOL1:MA(Volume,M1), Color1, format'%V', boundParam'M1';{MAVOL2:MA(Volume,M2), Color2, format'%V', boundParam'M2';{MAVOL3:MA(Volume,M3), Color3, format'%V', boundParam'M3';".split("{")},{id:"Vol",name:"VOL",script:"INPUT:M1(5,2,500),M2(10,2,500),M3(20,2,500);{VOL:Volume,NoLine,Color1,format%V%N;{stickLine(Close>REF2(Close,1,Open),0, VOL,6,1),ColorShine;{stickLine(Close<REF2(Close,1,Open),0, VOL,5,0),ColorShade;{stickLine(Close==REF2(Close,1,Open),0, VOL,6,0),ColorHold;{MAVOL1:MA(Volume,M1), Color1, format'%V', boundParam'M1';{MAVOL2:MA(Volume,M2), Color2, format'%V', boundParam'M2';{MAVOL3:MA(Volume,M3), Color3, format'%V', boundParam'M3';".split("{")},
{id:"Vol_Solid",name:"\u6210\u4ea4\u91cf",script:"INPUT:M1(5,2,500),M2(10,2,500),M3(20,2,500);{VOL:Volume,NoLine,Color1,format%V;{stickLine(Close>REF2(Close,1,Open),0, VOL,6,0),ColorShine;{stickLine(Close<REF2(Close,1,Open),0, VOL,5,0),ColorShade;{stickLine(Close==REF2(Close,1,Open),0, VOL,6,0),ColorHold;{MAVOL1:MA(Volume,M1), Color1, format'%V', boundParam'M1';{MAVOL2:MA(Volume,M2), Color2, format'%V', boundParam'M2';{MAVOL3:MA(Volume,M3), Color3, format'%V', boundParam'M3';".split("{")},{id:"AMO",
name:"AMO",script:"INPUT:M1(5,2,500),M2(10,2,500),M3(20,2,500);{Amount:Amount,NoLine,Color1,format%W%.2;{stickLine(Close>REF2(Close,1,Open),0, Amount,6,1),ColorShine;{stickLine(Close<REF2(Close,1,Open),0, Amount,5,0),ColorShade;{stickLine(Close==REF2(Close,1,Open),0, Amount,6,0),ColorHold;{MAVOL1:MA(Amount,M1), Color1, format'%W%.2', boundParam'M1';{MAVOL2:MA(Amount,M2), Color2, format'%W%.2', boundParam'M2';{MAVOL3:MA(Amount,M3), Color3, format'%W%.2', boundParam'M3';".split("{")},{id:"Amount",name:"AMO",
script:"INPUT:M1(5,2,500),M2(10,2,500),M3(20,2,500);{Amount:Amount,NoLine,Color1,format%W%.2;{stickLine(Close>REF2(Close,1,Open),0, Amount,6,1),ColorShine;{stickLine(Close<REF2(Close,1,Open),0, Amount,5,0),ColorShade;{stickLine(Close==REF2(Close,1,Open),0, Amount,6,0),ColorHold;{MAVOL1:MA(Amount,M1), Color1, format'%W%.2', boundParam'M1';{MAVOL2:MA(Amount,M2), Color2, format'%W%.2', boundParam'M2';{MAVOL3:MA(Amount,M3), Color3, format'%W%.2', boundParam'M3';".split("{")},{id:"KDJ",name:"KDJ",script:"setXAxis(Date); INPUT:N(9,2,90),M1(3,2,30),M2(3,2,30); RSV:=(Close-LLV(Low,N))/(HHV(High,N)-LLV(Low,N))*100; K:SMA(RSV,M1,1),Color1; D:SMA(K,M2,1),Color2; J:3*K-2*D,Color3;".split(" ")},
{id:"MACD",name:"MACD",script:["INPUT:SHORT(12,2,200),LONG(26,2,200),MID(9,2,200);","DIF:EMA(Close,SHORT)-EMA(Close,LONG),Color1, precis4;","DEA:EMA(DIF,MID),Color2, precis4;;","MACD:(DIF-DEA)*2, rgb(155,0,0), ColorSTICK, precis4;"],note:"\u539f\u540d\u662fMoving Average Convergence and Divergence\u3002;\u672c\u6307\u6807\u662f\u4e00\u4e2a\u5f88\u6d41\u884c\u53c8\u7ba1\u7528\u7684\u6307\u6807\uff0c\u53ef\u4ee5\u53bb\u9664\u6389\u79fb\u52a8\u5e73\u5747\u7ebf\u9891\u70e6\u7684\u5047\u8baf\u53f7\u7f3a\u9677\u53c8\u80fd\u786e\u4fdd\u79fb\u52a8\u5e73\u5747\u7ebf\u6700\u5927\u7684\u6218\u679c\u3002;;\u8ba1\u7b97\u516c\u5f0f\uff1a;MACD\u662f\u5229\u7528\u4e24\u6761\u4e0d\u540c\u901f\u5ea6\uff08\u957f\u671f\u4e0e\u4e2d\u671f\uff09\u7684\u5e73\u6ed1\u79fb\u52a8\u5e73\u5747\u7ebf \uff08EMA\uff09\u6765\u8ba1\u7b97\u4e8c\u8005\u4e4b\u95f4\u7684\u5dee\u79bb\u72b6\u51b5\u4f5c\u4e3a\u7814\u5224\u884c\u60c5\u7684\u57fa\u7840\u3002\u5728\u7ed8\u5236\u7684\u56fe\u5f62\u4e0a\uff0cDIF\u4e0eDEA\u5f62\u6210\u4e86\u4e24\u6761\u5feb\u6162\u79fb\u52a8\u5e73\u5747\u7ebf\uff0c\u4e70\u8fdb\u5356\u51fa\u4fe1\u53f7\u4e5f\u5c31\u51b3\u5b9a\u4e8e\u8fd9\u4e24\u6761\u7ebf\u7684\u4ea4\u53c9\u70b9\u3002\u5f88\u660e\u663e\uff0cMACD\u662f\u4e00\u4e2a\u4e2d\u957f\u671f\u8d8b\u52bf\u7684\u6295\u8d44\u6280\u672f\u5de5\u5177\u3002;DIF\uff1dEMA\uff08CLOSE\uff0cSHORT\uff09\uff0dEMA\uff08CLOSE\uff0cLONG\uff09;DEA\uff1dEMA\uff08DIF\uff0cMID\uff09;MACD\uff1d\uff08DIF\uff0dDEA\uff09*2;\u5176\u4e2dLONG=26\uff0cSHORT=12\uff0cMID=9;;\u7f3a\u7701\u65f6\uff0c\u7cfb\u7edf\u5728\u526f\u56fe\u4e0a\u7ed8\u5236SHORT=12\uff0cLONG=26\uff0c MID=9\u65f6\u7684DIF\u7ebf\u3001DEA\u7ebf\u3001MACD\u7ebf\uff08\u67f1\u72b6\u7ebf\uff09\u3002;\u7528\u6cd5\uff1a;   1.DIFF\u3001DEA\u5747\u4e3a\u6b63\uff0cDIFF\u5411\u4e0a\u7a81\u7834DEA\uff0c\u4e70\u5165\u4fe1\u53f7\u3002;   2.DIFF\u3001DEA\u5747\u4e3a\u8d1f\uff0cDIFF\u5411\u4e0b\u8dcc\u7834DEA\uff0c\u5356\u51fa\u4fe1\u53f7\u3002;   3.DEA\u7ebf\u4e0eK\u7ebf\u53d1\u751f\u80cc\u79bb\uff0c\u884c\u60c5\u53cd\u8f6c\u4fe1\u53f7\u3002;   4.\u5206\u6790MACD\u67f1\u72b6\u7ebf\uff0c\u7531\u7ea2\u53d8\u7eff(\u6b63\u53d8\u8d1f)\uff0c\u5356\u51fa\u4fe1\u53f7\uff1b\u7531\u7eff\u53d8\u7ea2\uff0c\u4e70\u5165\u4fe1\u53f7\u3002;   5\uff0eMACD\u57280\u754c\u9650\u4ee5\u4e0a\u4e3a\u591a\u5934\u5e02\u573a\uff0c\u53cd\u4e4b\u4e3a\u7a7a\u5934\u5e02\u573a\u3002;   6\uff0e\u65e5\u7ebf\u3001\u5468\u7ebf\u3001\u6708\u7ebf\u3001\u5206\u949f\u7ebf\u914d\u5408\u8fd0\u7528\u6548\u679c\u4f1a\u66f4\u597d\u3002".split(";")},
{id:"RSI",name:"RSI",script:["INPUT:N1(6,2,120),N2(12,2,250),N3(24,2,500);","LC:=REF(Close,1);","RSI1:SMA(MAX(Close-LC,0),N1,1)/SMA(ABS(Close-LC),N1,1)*100,color1;","RSI2:SMA(MAX(Close-LC,0),N2,1)/SMA(ABS(Close-LC),N2,1)*100,color2;","RSI3:SMA(MAX(Close-LC,0),N3,1)/SMA(ABS(Close-LC),N3,1)*100,color3,;"]},{id:"W&R",name:"W&R",script:["INPUT:N(10,2,100),N1(6,2,100);","WR1:100*(HHV(High,N)-Close)/(HHV(High,N)-LLV(Low,N));","WR2:100*(HHV(High,N1)-Close)/(HHV(High,N1)-LLV(Low,N1));"]},{id:"BIAS",name:"BIAS",
script:["INPUT:N1(6,2,250),N2(12,2,250),N3(24,2,250);","BIAS1 :(Close-MA(Close,N1))/MA(Close,N1)*100,color1;","BIAS2 :(Close-MA(Close,N2))/MA(Close,N2)*100,color2;","BIAS3 :(Close-MA(Close,N3))/MA(Close,N3)*100,color3;"]},{id:"CCI",name:"CCI",script:["INPUT:N(14,2,100);","TYP:=(High+Low+Close)/3;","CCI:(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));"]},{id:"DMI",name:"DMI",script:"input:N1(14,2,100),MM(6,1,100);{TR:=SUM(MAX(MAX(High-Low,ABS(High-REF(Close,1))),ABS(LOW-REF(Close,1))),N1);{HD:=High-REF(High,1);{LD:=REF(LOW,1)-LOW;{DMP:=SUM(IFF(HD>0 AND HD>LD,HD,0),N1);{DMM:=SUM(IFF(LD>0 AND LD>HD,LD,0),N1);{DI1:DMP*100/TR,Color1;{DI2:DMM*100/TR,Color2;{ADX:MA(ABS(DI2-DI1)/(DI1+DI2)*100,MM),Color3;{ADXR:(ADX+REF(ADX,MM))/2,Color4;".split("{")},
{id:"PSY",name:"PSY",script:["setXAxis(Date);","INPUT:N(12,2,100),M(6,2,100);","PSY:COUNT(Close>REF(Close,1),N)/N*100;","PSYMA:MA(PSY,M);"]},{id:"DMA",name:"DMA",script:["INPUT:N1(10,2,60),N2(50,2,250),M(10,2,100);","DIF:MA(Close,N1)-MA(Close,N2);","DIFMA:MA(DIF,M);"]},{id:"CR",name:"CR",script:"INPUT:N1(26,2,100),M1(10,0,100),M2(20,0,100),M3(40,0,100) MID:=REF(HIGH+LOW,1)/2; CR:SUM(MAX(0,HIGH-MID),N1)/SUM(MAX(0,MID-LOW),N1)*100; MA1:REF(MA(CR,M1),M1/2.5+1); MA2:REF(MA(CR,M2),M2/2.5+1); MA3:REF(MA(CR,M3),M3/2.5+1);".split(" ")},
{id:"ARBR",name:"ARBR",script:["INPUT:N(26,2,120);","AR:SUM(High-Open,N)/SUM(Open-Low,N)*100;","BR:SUM(MAX(0,High-REF(Close,1)),N)/SUM(MAX(0,REF(Close,1)-Low),N)*100;"]},{id:"AD",name:"\u96c6\u6563\u6307\u6807",script:["AD:SUM(((CLOSE-LOW)-(HIGH-CLOSE))/(HIGH-LOW)*Volume,0)"]},{id:"ADTM",name:"\u52a8\u6001\u4e70\u5356\u6c14\u6307\u6807",script:"INPUT:N(23,2,100),M(8,2,100){DTM := IFF(OPEN<=REF(OPEN,1),0,MAX((HIGH-OPEN),(OPEN-REF(OPEN,1))));{DBM := IFF(OPEN>=REF(OPEN,1),0,MAX((OPEN-LOW),(OPEN-REF(OPEN,1))));{STM := SUM(DTM,N);{SBM := SUM(DBM,N);{ADTM:IFF(STM>SBM,(STM-SBM)/STM,IFF(STM==SBM,0,(STM-SBM)/SBM));{MAADTM:MA(ADTM,M);".split("{")},
{id:"AMV",name:"\u6210\u672c\u5747\u4ef7\u7ebf",script:"INPUT:M1(5,2,120),M2(13,2,120),M3(34,2,120),M4(60,2,120) AMOV:=Volume*(OPEN+CLOSE)/2; AMV1:SUM(AMOV,M1)/SUM(Volume,M1); AMV2:SUM(AMOV,M2)/SUM(Volume,M2); AMV3:SUM(AMOV,M3)/SUM(Volume,M3); AMV4:SUM(AMOV,M4)/SUM(Volume,M4);".split(" ")},{id:"ASI",name:"\u632f\u52a8\u5347\u964d\u6307\u6807",script:"INPUT:M1(26,5,300),M2(10,1,300){LC:=REF(CLOSE,1);{AA:=ABS(HIGH-LC);{BB:=ABS(LOW-LC);{CC:=ABS(HIGH-REF(LOW,1));{DD:=ABS(LC-REF(OPEN,1));{R:= IFF(AA>BB and AA>CC,AA+BB/2+DD/4,IFF(BB>CC and BB>AA,BB+AA/2+DD/4,CC+DD/4));{X:=(CLOSE-LC+(CLOSE-OPEN)/2+LC-REF(OPEN,1));{SI:16*X/R*MAX(AA,BB);{ASI:SUM(SI,M1);{ASIT:MA(ASI,M2);".split("{")},
{id:"ATR",name:"\u771f\u5b9e\u6ce2\u5e45",script:["INPUT:N(14,2,300)","MTR:MAX(MAX((HIGH-LOW),ABS(REF(CLOSE,1)-HIGH)),ABS(REF(CLOSE,1)-LOW));","ATR:MA(MTR,N);"]},{id:"BBIBOLL",name:"\u591a\u7a7a\u5e03\u6797\u7ebf",script:["INPUT:N(11,2,100),M(6,2,100)","CV:=CLOSE;","BBIBOLL:(MA(CV,3)+MA(CV,6)+MA(CV,12)+MA(CV,24))/4;","UPR:(BBIBOLL+M*STD(BBIBOLL,N));","DWN:(BBIBOLL-M*STD(BBIBOLL,N));"]},{id:"BIAS36",name:"\u4e09\u516d\u4e56\u79bb\u7387",script:["INPUT:M(6,2,60)","BIAS36:MA(CLOSE,3)-MA(CLOSE,6);","BIAS612:MA(CLOSE,6)-MA(CLOSE,12);",
"MABIAS:MA(BIAS36,M);"]},{id:"CHO",name:"\u4f73\u5e86\u6307\u6807",script:["INPUT:N1(10,2,60),N2(20,2,100),M(6,2,60)","MID:=SUM(Volume*(2*CLOSE-HIGH-LOW)/(HIGH+LOW),0);","CHO:MA(MID,N1)-MA(MID,N2);","MACHO:MA(CHO,M);"]},{id:"CYR",name:"\u5e02\u573a\u5f3a\u5f31",script:["INPUT:N(13,2,100),M(5,2,100);","DIVE:=0.01*EMA(Amount,N)/EMA(Volume,N);","CYR:(DIVE/REF(DIVE,1)-1)*100;","MACYR:MA(CYR,M);"]},{id:"DBCD",name:"\u5f02\u540c\u79bb\u5dee\u4e56\u79bb\u7387",script:["INPUT:N(5,2,100),M(16,2,100),T(5,2,100);",
"BIAS1:=(CLOSE-MA(CLOSE,N))/MA(CLOSE,N);","DIF:=(BIAS1-REF(BIAS1,M));","DBCD1:SMA(DIF,T,1),precis3;","MM:MA(DBCD1,5),precis4;"]},{id:"DDI",name:"\u65b9\u5411\u6807\u51c6\u79bb\u5dee\u6307\u6570",script:"INPUT:N(13,1,200),N1(26,1,200),M(1,1,200),M1(5,1,200); TR:=MAX(ABS(HIGH-REF(HIGH,1)),ABS(LOW-REF(LOW,1))); DMZ:=IFF((HIGH+LOW)<=(REF(HIGH,1)+REF(LOW,1)),0,MAX(ABS(HIGH-REF(HIGH,1)),ABS(LOW-REF(LOW,1)))); DMF:=IFF((HIGH+LOW)>=(REF(HIGH,1)+REF(LOW,1)),0,MAX(ABS(HIGH-REF(HIGH,1)),ABS(LOW-REF(LOW,1)))); DIZ:=SUM(DMZ,N)/(SUM(DMZ,N)+SUM(DMF,N)); DIF:=SUM(DMF,N)/(SUM(DMF,N)+SUM(DMZ,N)); DDI1:DIZ-DIF; ADDI:SMA(DDI1,N1,M); AD1:MA(ADDI,M1);".split(" ")},
{id:"DMA",name:"\u5e73\u884c\u7ebf\u5dee\u6307\u6807",script:["INPUT:N1(10,2,60),N2(50,2,250),M(10,2,100)","DIF:MA(CLOSE,N1)-MA(CLOSE,N2);","DIFMA:MA(DIF,M);"]},{id:"DPO",name:"\u533a\u95f4\u9707\u8361\u7ebf",script:["INPUT:N(20,2,90),M(6,2,60)","DPO:CLOSE-REF(MA(CLOSE,N),N/2+1);","MADPO:MA(DPO,M);"]},{id:"EMV",name:"\u7b80\u6613\u6ce2\u52a8\u6307\u6807",script:["INPUT:N(14,2,90),M(9,2,60)","VOLUME:=MA(Volume,N)/Volume;","MID:=100*(HIGH+LOW-REF(HIGH+LOW,1))/(HIGH+LOW);","EMV:MA(MID*Volume*(HIGH-LOW)/MA(HIGH-LOW,N),N);",
"MAEMV:MA(EMV,M);"]},{id:"ENV",name:"\u8f68\u9053\u7ebf",script:["INPUT:N(25,2,120),M1(6,2,120),M2(6,2,120)","UPPER:(1+M1/100)*MA(CLOSE,N);","LOWER:(1-M2/100)*MA(CLOSE,N);","ENE:(UPPER+LOWER)/2;"]},{id:"ICHIMOKU",name:"\u65e5\u672c\u4e91/\u4e00\u76ee\u5e73\u8861\u8868",script:"INPUT:SHORT(7,1,300),MID(22,1,300),LONG(44,1,300) zhx:(HHV(High,SHORT)+LLV(Low,SHORT))/2,COLORRED,LINETHICK2; jzx:(HHV(High,MID)+LLV(Low,MID))/2,COLORFF8040,LINETHICK2; cxd:REFX(CLOSE,MID),COLORGRAY,LINETHICK2; A:REF((zhx+jzx)/2,MID); B:REF((HHV(High,LONG)+LLV(Low,LONG))/2,MID); STICKLINE(A<B,A,B,2,1.5),COLOR339933; STICKLINE(A>=B,A,B,2,0.1),COLOR0033CC; PA:PLOYLINE(1,A),COLORBROWN; PB:PLOYLINE(1,B),COLORLIGREEN;".split(" ")},
{id:"KD",name:"\u968f\u673a\u9707\u8361\u6307\u6570",script:["INPUT:N(9,2,100),M1(3,2,100),M2(3,2,100)","RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;","K:SMA(RSV,M1,1);","D:SMA(K,M2,1);"]},{id:"LWR",name:"\u5a01\u5ec9\u6307\u6807",script:["INPUT:N(9,1,500),M1(3,1,500),M2(3,1,500)","RSV:= (HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N))*100;","LWR1:SMA(RSV,M1,1);","LWR2:SMA(LWR1,M2,1);"]},{id:"MASS",name:"\u6885\u65af\u7ebf",script:["INPUT:N1(9,2,120),N2(25,2,120),M(6,2,120)","MASS:SUM(MA(HIGH-LOW,N1)/MA(MA(HIGH-LOW,N1),N1),N2);",
"MAMASS:MA(MASS,M);"]},{id:"MFI",name:"\u8d44\u91d1\u6d41\u91cf\u6307\u6807",script:["INPUT:N(14,2,120),N2(6,2,60)","TYP := (HIGH + LOW + CLOSE)/3;","V1:=SUM(IFF(TYP>REF(TYP,1),TYP*Volume,0),N)/SUM(IFF(TYP<REF(TYP,1),TYP*Volume,0),N);","MFI:100-(100/(1+V1));"]},{id:"MI",name:"\u52a8\u91cf\u6307\u6807",script:["INPUT:N(12,1,100)","A:CLOSE-REF(CLOSE,N);","MI:SMA(A,N,1);"]},{id:"MICD",name:"\u5f02\u540c\u79bb\u5dee\u52a8\u529b\u6307\u6570",script:["INPUT:N(3,1,100),N1(10,1,100),N2(20,1,100)","MI1:CLOSE-REF(CLOSE,1);",
"AMI:=SMA(MI1,N,1);","DIF:MA(REF(AMI,1),N1)-MA(REF(AMI,1),N2);","MICD1:SMA(DIF,10,1)"]},{id:"MIKE",name:"\u9ea6\u514b\u652f\u6491\u538b\u529b",script:"INPUT:N(10,2,120) HLC:=REF(MA((HIGH+LOW+CLOSE)/3,N),1); HV:=EMA(HHV(HIGH,N),3); LV:=EMA(LLV(LOW,N),3); STOR:EMA(2*HV-LV,3); MIDR:EMA(HLC+HV-LV,3); WEKR:EMA(HLC*2-LV,3); WEKS:EMA(HLC*2-HV,3); MIDS:EMA(HLC-HV+LV,3); STOS:EMA(2*LV-HV,3);".split(" ")},{id:"MTM",name:"\u52a8\u91cf\u7ebf",script:["INPUT:N(12,2,120),M(6,2,60)","MTM:CLOSE-REF(CLOSE,N);","MTMMA:MA(MTM,M);"]},
{id:"NDB",name:"\u8111\u7535\u6ce2",script:"Var1:=IFF((CLOSE-REF(CLOSE,1))/REF(CLOSE,1)>0.98,REF(CLOSE,1),LOW);{Var2:=IFF((CLOSE-REF(CLOSE,1))/REF(CLOSE,1)<-0.98,REF(CLOSE,1),HIGH);{Var3:=SUM(CLOSE-LOW-HIGH+CLOSE,0);{\u8111\u7535\u6ce2: Var3;{\u5e73\u5747\u503c5\u65e5: MA(Var3,5);{\u5e73\u5747\u503c10\u65e5: MA(Var3,10);".split("{")},{id:"OBV",name:"OBV",script:["INPUT:M(30,2,100)","VA:=IFF(CLOSE>REF(CLOSE,1),Volume,Volume-Volume-Volume);","OBV:SUM(IFF(CLOSE==REF(CLOSE,1),0,VA),0);","MAOBV:MA(OBV,M);"]},
{id:"OSC",name:"\u9707\u8361\u91cf",script:["INPUT:N(20,2,100),M(6,2,100)","OSC:100*(CLOSE-MA(CLOSE,N));","MAOSC:EMA(OSC,M);"]},{id:"PRICEOSC",name:"\u4ef7\u683c\u6446\u52a8\u6307\u6807",script:["INPUT:M1(12,1,300),M2(26,1,300)","PRICEOSC:(MA(CLOSE,M1) - MA(CLOSE,M2))/MA(CLOSE,M1)*100;"]},{id:"PVT",name:"\u4ef7\u91cf\u8d8b\u52bf",script:["N:=CLOSE-REF(CLOSE,1)","M:=N/REF(CLOSE,1)","F:=M*Volume","PVT:SUM(F,0)"]},{id:"RCCD",name:"\u5f02\u540c\u79bb\u5dee\u53d8\u5316\u7387\u6307\u6570",script:["INPUT:N(59,1,200),N1(21,1,200),N2(18,1,200)",
"RC:=CLOSE/REF(CLOSE,N);","ARC:=SMA(REF(RC,1),N,1);","DIF:MA(REF(ARC,1),N1)-MA(REF(ARC,1),N2),precis4 ;","RCCD1:SMA(DIF,N,1),precis4"]},{id:"ROC",name:"ROC",script:["INPUT:N(12,2,120),M(6,2,60)","ROC:100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);","MAROC:MA(ROC,M);"]},{id:"SI",name:"\u6446\u52a8\u6307\u6807",script:"LC:=REF(CLOSE,1);{AA:=ABS(HIGH-LC);{bb:=ABS(LOW-LC);{CC:=ABS(HIGH-REF(LOW,1));{DD:=ABS(LC-REF(OPEN,1));{R:=IFF(AA>bb AND AA>CC,AA+bb/2+DD/4,IFF(bb>CC AND bb>AA,bb+AA/2+DD/4,CC+DD/4));{X:=(CLOSE-LC+(CLOSE-OPEN)/2+LC-REF(OPEN,1));{SI:16*X/R*MAX(AA,bb)".split("{")},
{id:"SKDJ",name:"\u6162\u901f\u968f\u673a\u6307\u6807",script:"INPUT:N(9,2,90),N1(3,2,30) LOWV:=LLV(LOW,N); HIGHV:=HHV(HIGH,N); RSV:=EMA((CLOSE-LOWV)/(HIGHV-LOWV)*100,N1); K:EMA(RSV,N1); D:MA(K,N1);".split(" ")},{id:"SRMI",name:"\u4fee\u6b63\u6307\u6807",script:["INPUT:N(9,1,100)","SRMI:IFF(CLOSE<REF(CLOSE,N),(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),IFF(CLOSE==REF(CLOSE,N),0,(CLOSE-REF(CLOSE,N))/CLOSE))"]},{id:"SD",name:"\u6807\u51c6\u5dee",script:["INPUT:N(26,1,100)","SD:STD(CLOSE,N)"]},{id:"TRIX",name:"TRIX",
script:["INPUT:N(12,2,100),M(9,2,100)","MTR:=EMA(EMA(EMA(CLOSE,N),N),N);","TRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;","MATRIX:MA(TRIX,M) ;"]},{id:"UDL",name:"\u5f15\u529b\u7ebf",script:["INPUT:N1(3,2,20),N2(5,2,30),N3(10,2,60),N4(20,2,120),M(6,2,10)","UDL:(MA(CLOSE,N1)+MA(CLOSE,N2)+MA(CLOSE,N3)+MA(CLOSE,N4))/4;","MAUDL:MA(UDL,M);"]},{id:"UOS",name:"\u7ec8\u6781\u6307\u6807",script:"INPUT:N1(7,2,30),N2(14,2,60),N3(28,2,120),M(6,2,30) TH:=MAX(HIGH,REF(CLOSE,1)); TL:=MIN(LOW,REF(CLOSE,1)); ACC1:=SUM(CLOSE-TL,N1)/SUM(TH-TL,N1); ACC2:=SUM(CLOSE-TL,N2)/SUM(TH-TL,N2); ACC3:=SUM(CLOSE-TL,N3)/SUM(TH-TL,N3); UOS:(ACC1*N2*N3+ACC2*N1*N3+ACC3*N1*N2)*100/(N1*N2+N1*N3+N2*N3); MAUOS:EMA(UOS,M);".split(" ")},
{id:"VMA",name:"\u53d8\u5f02\u5e73\u5747\u7ebf",script:"INPUT:M1(6,2,500),M2(12,2,500),M3(30,2,500),M4(72,2,500) VV:=(HIGH+OPEN+LOW+CLOSE)/4; VMA1:MA(VV,M1); VMA2:MA(VV,M2); VMA3:MA(VV,M3); VMA4:MA(VV,M4); VMA5:MA(VV,M5);".split(" ")},{id:"VMACD",name:"\u91cf\u6307\u6570\u5e73\u6ed1\u5f02\u540c\u5e73\u5747\u7ebf",script:["INPUT:SHORT(12,2,200),LONG(26,2,200),MID(9,2,200)","DIF:EMA(Volume/100,SHORT)-EMA(Volume/100,LONG);","DEA:EMA(DIF,MID);","MACD:DIF-DEA,COLORSTICK;"]},{id:"VOSC",name:"\u6210\u4ea4\u91cf\u632f\u8361\u5668",
script:["INPUT:SHORT(12,2,100),LONG(26,15,200)","VOSC:(MA(Volume,SHORT)-MA(Volume,LONG))/MA(Volume,SHORT)*100"]},{id:"VPT",name:"\u91cf\u4ef7\u66f2\u7ebf",script:["INPUT:N(51,2,120),M(6,2,60)","VPT:SUM(Volume/100*(CLOSE-REF(CLOSE,1))/REF(CLOSE,1),N);","MAVPT:MA(VPT,M);"]},{id:"VR",name:"VR\u5bb9\u91cf\u6bd4\u7387",script:"INPUT:N(26,2,100),M(6,2,100) TH:=SUM(IFF(CLOSE>REF(CLOSE,1),Volume,0),N); TL:=SUM(IFF(CLOSE<REF(CLOSE,1),Volume,0),N); TQ:=SUM(IFF(CLOSE==REF(CLOSE,1),Volume,0),N); VR:100*(TH*2+TQ)/(TL*2+TQ); MAVR:MA(VR,M);".split(" ")},
{id:"VRSI",name:"\u91cf\u76f8\u5bf9\u5f3a\u5f31",script:["INPUT:N1(6,2,100),N2(12,2,100),N3(24,2,100)","LC:=REF(Volume,1);","RSI1:SMA(MAX(Volume-LC,0),N1,1)/SMA(ABS(Volume-LC),N1,1)*100;","RSI2:SMA(MAX(Volume-LC,0),N2,1)/SMA(ABS(Volume-LC),N2,1)*100;","RSI3:SMA(MAX(Volume-LC,0),N3,1)/SMA(ABS(Volume-LC),N3,1)*100;"]},{id:"VSTD",name:"\u6210\u4ea4\u91cf\u6807\u51c6\u5dee",script:["INPUT:N1(26,1,100)","VSTD:STD(Volume,N1)"]},{id:"WAD",name:"\u5a01\u5ec9\u591a\u7a7a\u529b\u5ea6\u7ebf",script:["INPUT:M(30,2,120)",
"MIDA:=CLOSE-MIN(REF(CLOSE,1),LOW);","MIDB:=IFF(CLOSE<REF(CLOSE,1),CLOSE-MAX(REF(CLOSE,1),HIGH),0);","WAD:SUM(IFF(CLOSE>REF(CLOSE,1),MIDA,MIDB),0);","MAWAD:MA(WAD,M);"]},{id:"XS",name:"\u859b\u65af\u901a\u9053",script:"INPUT:N(13,2,120) VAR2:=CLOSE*Volume; VAR3:=EMA((EMA(VAR2,3)/EMA(Volume,3)+EMA(VAR2,6)/EMA(Volume,6)+EMA(VAR2,12)/EMA(Volume,12)+EMA(VAR2,24)/EMA(Volume,24))/4,N); SUP:1.06*VAR3; SDN:VAR3*0.94; VAR4:=EMA(CLOSE,9); LUP:EMA(VAR4*1.14,5); LDN:EMA(VAR4*0.86,5);".split(" ")},{id:"ZX",name:"\u91cd\u5fc3\u7ebf",
script:["AV:AMOUNT/Volume"]},{id:"BB",name:"\u5e03\u6797\u6781\u9650",script:["INPUT:N(20,5,300)","b1:=MA(CLOSE,N);","\u5e03\u6797\u6781\u9650:100*(CLOSE-b1)/STD(CLOSE,N);","\u5e03\u6797K\u503c:EMA(\u5e03\u6797\u6781\u9650,3);"]},{id:"WVAD",name:"\u5a01\u5ec9\u53d8\u5f02\u79bb\u6563\u91cf",script:["INPUT:N(24,2,120),M(6,2,60)","WVAD:SUM((CLOSE-OPEN)/(HIGH-LOW)*Volume,N)/10000;","MAWVAD:MA(WVAD,M);"]},{id:"V&R",name:"\u6ce2\u52a8\u533a\u95f4",script:["x:=(CLOSE-REF(CLOSE,1))/REF(CLOSE,1)*100;","VR:1.65*STD(x,250);",
"\u4e0a\u9650:(CLOSE+VR)/CLOSE,precis4;","\u4e0b\u9650:(CLOSE-VR)/CLOSE,precis4;"]},{id:"MARSI",name:"\u76f8\u5bf9\u5f3a\u5f31\u5e73\u5747\u7ebf",script:"INPUT:M1(10,2,100),M2(6,2,60);{DIF:= CLOSE-REF(CLOSE,1);{VU:=IFF(DIF>=0,DIF,0);{VD:=IFF(DIF<0,DIF-DIF-DIF,0);{MAU1:=SMA(VU,M1,1);{MAD1:=SMA(VD,M1,1);{MAU2:=SMA(VU,M2,1);{MAD2:=SMA(VD,M2,1);{RSI1:MA(100*MAU1/(MAU1+MAD1),M1);{RSI2:MA(100*MAU2/(MAU2+MAD2),M2);".split("{")}];
function getFormulaScript(a){for(var b=0;b<formulaScript.length;b++)if(a==formulaScript[b].id){a="";for(var c=0;c<formulaScript[b].script.length;c++)a=";"!=formulaScript[b].script[c][formulaScript[b].script[c].length-1]?a+(formulaScript[b].script[c]+";\n"):a+(formulaScript[b].script[c]+"\n");var g="";if(formulaScript[b].note)for(c=0;c<formulaScript[b].note.length;c++)g+=formulaScript[b].note[c]+"\n";return{script:a,formulaName:formulaScript[b].name,formulaNote:g}}return""}
function getFormulaForScript(a){if(!a)return"";for(var b="",c=0;c<a.script.length;c++)b+=a.script[c]+"\n";var g="";if(a.note)for(c=0;c<a.note.length;c++)g+=a.note[c]+"\n";return{script:b,formulaName:a.name,formulaNote:g}};function xCollection(a,b,c,g,k,q,f,p){function v(za,Ka){return za-Ka}function A(za,Ka){return Ka-za}function r(za,Ka){if(za&&0<za.length)for(var ab=0;ab<za.length;ab++){var W=za[ab].rect;if(W&&Ka.offsetX>=W.left&&Ka.offsetX<=W.left+W.width&&Ka.offsetY>=W.top&&Ka.offsetY<=W.top+W.height)return za=ab+ta}return null}function u(za,Ka){Ka=void 0===Ka?!0:Ka;var ab=H.callInfo?H.callInfo[za]:void 0;if(void 0!=ab)for(var W=0;W<ab.length;W++)if("page"==ab[W].id){var Ca="setActivePageWithBounds"==ab[W].action.substr(0,
23)?"_this.page."+ab[W].action.slice(0,-1)+", getBoundValues())":"_this.page."+ab[W].action;eval(Ca)}else if(Ca=globalPage.getActivePage())if(Ca=Ca.getObjectByElementId(ab[W].id))if(ab[W].param){if(H.page.getObjectByElementId(ab[W].id)){Ca="obj."+ab[W].action+"("+ab[W].param+")";try{eval(Ca)}catch(ca){console.log(ca)}}}else"setVariablesValue"==za?Ca.setVariablesValue(E.field,E.data[aa.index-ta]):"setExternalTable"==za&&Ca.setVariablesValue(E);Ka&&(0==na.enterConfirmation||1==na.enterConfirmation&&
"doEnter"==za)&&z(za,0,za)}function z(za,Ka,ab){if(null!=da&&E&&E.field&&E.data){for(var W=[],Ca=0,ca=0;ca<da.length;ca++)if(("synch"==da[ca].type||"send"==da[ca].type||"call"==da[ca].type&&null!=ia.index)&&(null==da[ca].trigger||da[ca].trigger&&ab&&da[ca].trigger==ab)){if(da[ca].field)var ya=da[ca].field;else da[ca].variable&&(ya=da[ca].variable.replace("{{ ",""),ya=ya.replace(" }}",""));if(ya){ya=ya.toLowerCase();var bb=ya;var ib={tableName:null,fieldName:bb};for(var gb=0;gb<bb.length;gb++)if("."==
bb[gb]){ib.tableName=bb.slice(0,gb);var Bb=gb+1;for(gb++;gb<bb.length;gb++)if("["==bb[gb]){ib.fieldName=bb.slice(Bb,gb);Bb=gb+1;for(gb++;gb<bb.length;gb++)if("="==bb[gb]){ib.boundFieldName=bb.slice(Bb,gb);Bb=gb+1;ib.obj={};ib.obj.fieldName=bb.slice(Bb,bb.length-1);for(gb++;gb<bb.length;gb++)if("."==bb[gb]){ib.obj.tableName=bb.slice(Bb,gb);Bb=gb+1;ib.obj.fieldName=bb.slice(Bb,bb.length-1);break}break}break}break}if(ib.tableName){if(ib.obj&&ib.obj.tableName&&ib.obj.fieldName&&N[0].table.info.name.toLowerCase()==
ib.obj.tableName.toLowerCase())for(bb=0;bb<E.field.length;bb++)if(E.field[bb][0].toLowerCase()==ib.obj.fieldName){gb=aa.index-E.info.dataBegin;var Hb;"col"==E.info.rank?0<=gb&&gb<E.data[bb].length&&(Hb=E.data[bb][gb]):0<=gb&&gb<E.data.length&&(Hb=E.data[gb][bb]);for(gb=0;gb<N.length;gb++)if(N[gb].table.info.name.toLowerCase()==ib.tableName){for(bb=0;bb<N[gb].table.field.length;bb++)if(N[gb].table.field[bb][0].toLowerCase()==ib.boundFieldName){if("row"==N[gb].table.info.rank)for(Bb=0;Bb<N[gb].table.data.length;Bb++)if(Hb==
N[gb].table.data[Bb][bb]){for(bb=0;bb<N[gb].table.field.length;bb++)if(N[gb].table.field[bb][0].toLowerCase()==ib.fieldName){W[Ca]={bound:da[ca],value:N[gb].table.data[Bb][bb]};Ca++;break}break}break}break}break}}else for(bb=0;bb<E.field.length;bb++)if(E.field[bb][0].toLowerCase()==ya){gb=aa.index-ta;0<=gb&&gb<E.info.rows&&(ib="col"==E.info.rank?E.data[bb]?E.data[bb][gb]:null:E.data[gb]?E.data[gb][bb]:null,da[ca].format&&(ib=getValueFormatString(ib,E.field[bb][1],da[ca].format)),W[Ca++]={bound:da[ca],
value:ib});break}}}0<W.length&&(null==H.page?globalPage.getActivePage().synchBoundValue(za,Ka+1,W,H):H.page.synchBoundValue(za,Ka+1,W,H))}}var H=this;this.page=b;var C,U=null;this.enableActive=!0;var J=xDeepCopy(g),G=xDeepCopy(k);if(p)for(var B in G)for(var L in p)if(B==L){G[B]=p[L];break}this.callInfo=q;this.callbacks=f;this.queryIndex=this.callbacks.getQueryIndex(this);var ba=[],N,E,V,F=!0,M=!1,X=1,aa={index:0,preIndex:-1,locateValue:null},ia={index:null},fa=[],T=null,Y=null,O=0,K=0,Z=0,pa=0,oa=
{left:0,top:0,right:0,bottom:0},Aa,ta=0,Q,sa=1,ra,la,Na,Wa=!1,na={wheelOnFocus:!1,cell:{backgroundColor:"#fff",borderColor:"#bbb",color:"#111",colors:xGlobal.colors,fontFamily:xGlobal.systemFont,fontSize:13,borderRadius:0,cursorBackgroundColor:""},rank:{type:"auto",scroll:"vertical",wheel:"smooth",minItemWidth:400,minItemHeight:360,maxItemWidth:500,maxItemHeight:460,itemWidth:400,itemHeight:260,cols:3,rows:3,gapX:3,gapY:3},margin:4,backgroundColor:"#fff",enableFocus:!0,allowCursor:!0,paging:!1,item:{height:32,
width:80,margin:0,padding:0,backgroundColor:"#eaeaea",borderLeft:"1px solid #ddd",borderRight:"1px solid #ddd",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderRadius:"0px",boxShadow:""},cursor:{backgroundColor:"#eee",borderLeft:"1px solid #ddd",borderRight:"1px solid #ddd",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderRadius:"0px",boxShadow:"0px 0px 10px rgba(17, 64, 76, 0.2)"},selected:{backgroundColor:"#ddd",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",
borderTop:"1px solid #ccc",borderBottom:"1px solid #ccc",borderRadius:"0px",boxShadow:"0px 0px 10px rgba(17, 64, 76, 0.2)"},alwaysShowSelected:!1,selectedIsCursor:!0,enableMultiSelected:!1,initCursorPos:"",scroller:{scrollerV:"show",scrollerH:"show",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"},sort:{sort:!1,order:"",field:"",type:""},toolBarPos:"bottom",popupMenu:"undefined",popupMenuPrepareAction:"undefined",enterConfirmation:!1,colSplitColor:"",colSplitHeight:0},ha,ea,ja,
da,Oa=0,Pa=0,hb=!0,Ma,rb,zb=0,Jb=1,Cb,Db,cb,Ab,Gb=0;this.getPage=function(){return this.page};this.getOption=function(){return na};this.getObjectClassName=function(){return"xCollection"};this.getObjectId=function(){return c.id};this.getCanvas=function(){return c};this.getContext=function(){return C};this.getQueryInfo=function(){return J};this.getQueryData=function(){return N};this.getVariables=function(){return G};this.getParentDiv=function(){return c};this.initToolbars=function(za,Ka){Cb=[];for(var ab=
0,W=0,Ca=0;Ca<Ka.length;Ca++){var ca=a.document.createElement("div");ca.id=c.id+"-toolbar";za.appendChild(ca);Cb[Ca]=new xToolbar(a,null,ca,Ka[Ca].option,Ka[Ca].init,null,H);var ya=a.document.createAttribute("style");ya.value="position:absolute;margin:0px;padding:0px;";switch(Cb[Ca].position){case "bottom":ya.value+="left:0px;right:0px;bottom:"+W+"px;height:"+Cb[Ca].height+"px";W+=Cb[Ca].height;break;case "left":ya.value+="left:24px;width:24px;top:0px;bottom:0px";break;case "right":ya.value+="right:24px;width:24px;top:0px;bottom:0px";
break;default:ya.value+="left:0px;right:0px;top:"+ab+"px;height:"+Cb[Ca].height+"px",ab+=Cb[Ca].height}ca.setAttributeNode(ya);Ka[Ca].option.page&&(na.paging=!0,null==G.pageNo&&(null==G&&(G={}),G.pageNo=0))}};this.destroy=function(){H.callbacks.sendCancelQuery(H.queryIndex);c.removeEventListener("mousemove",H.onMouseMove);c.removeEventListener("mouseout",H.onMouseOut);c.removeEventListener("mousedown",H.onMouseDown);c.removeEventListener("mouseup",H.onMouseUp);c.removeEventListener("mousewheel",H.onMouseWheel);
c.removeEventListener("contextmenu",H.onContextMenu);c.removeEventListener("dblclick",H.onDblClick);la&&(la.destroy(),la=null);Na&&(Na.destroy(),Na=null);c.parentElement.removeChild(c)};this.refresh=function(){4>xGlobal.refreshCounter-Gb&&this.draw(!0)};this.show=function(){1!=U&&(null!=U&&H.callbacks&&H.callbacks.sendRestartQuery(H.queryIndex),U=!0)};this.hidden=function(za){0!=U&&(U=!1,1!=za&&H.callbacks.sendPauseQuery(H.queryIndex))};this.isShow=function(){return U};this.query=function(za){if(null!=
Q&&null!=J){if(1!=za){if(0==U||0==sa)return;Ra();if(1==zb||0==c.offsetHeight||0==c.offsetWidth)return;Jb++}za=!1;null==ta&&(za=!0);1==Wa&&(Wa=!1,za=!0);for(var Ka=0;Ka<J.length;Ka++)if(null==J[Ka]||J[Ka].queryStatus)J[Ka]&&1==J[Ka].queryStatus&&(J[Ka].queryStatus=2);else{var ab;if(J[Ka].sql){var W=replaceVariablesValue(J[Ka].sql,G,N);ba[Ka]=parseTableName(W);0==Ka?J[Ka].limit?ab=J[Ka].limit:1==F&&""!=na.initCursorPos?ab=-1==na.initCursorPos?[na.initCursorPos,Q]:[na.initCursorPos,sa]:void 0!=ta&&(ab=
1==na.paging?[ta+1,Q]:[ta+1,sa+Aa.cols+1]):ab=null;if(!(null==W||""==W||0<=W.indexOf("{{ "))){if(null==J[Ka].query||J[Ka].query.script!=W)za=M=!0,J[Ka].queryStatus=1;if(null==J[Ka].query||J[Ka].query.limit&&ab&&(J[Ka].query.limit[0]!=ab[0]||J[Ka].query.limit[1]!=ab[1]))za=!0,J[Ka].queryStatus=1;if(1==J[Ka].queryStatus){var Ca;J[Ka].server&&G&&G[J[Ka].server.slice(10)]&&(Ca=G[J[Ka].server.slice(10)]);J[Ka].query={script:W,limit:ab,server:Ca}}}}else if(J[Ka].http){var ca=replaceVariablesValue(J[Ka].field,
G,N),ya=replaceVariablesValue(J[Ka].condition,G,N);W=sa;1==na.paging?(W=Q,null==G.pageNo&&(null==G&&(G={}),G.pageNo=0)):(G.pageNo=Math.trunc(ta/W),E&&ta+W>E.info.begin+E.info.rows&&G.pageNo++);1==F&&""!=na.initCursorPos?ab=0>na.initCursorPos?[-1,W]:[G.pageNo,W]:void 0!=ta&&(ab=[G.pageNo,W]);null==ya||""==ya||0<=ya.indexOf("{{ ")||(W=ca+";"+ya,null!=ta&&(null==J[Ka].query||J[Ka].query.script!=W||J[Ka].query&&J[Ka].query.limit&&ab&&(J[Ka].query.limit[0]!=ab[0]||J[Ka].query.limit[1]!=ab[1]))&&(J[Ka].query=
{script:W,limit:ab,field:ca,condition:ya},J[Ka].queryStatus=1,H.callbacks.sendHttpQuery(H.queryIndex,J,Ka,H.setTable)))}}za&&(zb=1,M=!0,H.callbacks.sendQuery(H.queryIndex,J,H.setTable));Jb=0}};this.getTableName=function(za){null==za&&(za=0);return ba[za]};this.setVariablesValue=function(za,Ka){var ab=!1;if("Object"==za.constructor.name&&null==Ka)for(var W in za)G[W]!=za[W]&&(G[W]=za[W],ab=!0);else if(Ka)for(W in G)for(var Ca=0;Ca<za.length;Ca++)za[Ca][0]==W&&G[W]!=Ka[Ca]&&(G[W]=Ka[Ca],ab=!0);1==ab&&
(F=!0,H.query())};this.setQuery=function(za){J.sql=[{name:"query",sql:za,prop:null}];H.query();1==hb&&(hb=!1)};var Ra=function(){H.page&&H.page.setPageBoundStatusForObject(H);if(Cb)for(var za=0;za<Cb.length;za++)Cb[za].boundStatus(G)};this.synchBoundValue=function(za,Ka,ab,W){if(W!=H&&void 0!=da&&0<da.length){za=!1;for(Ka=0;Ka<ab.length;Ka++)if(null!=ab[Ka]&&null!=ab[Ka].bound)for(W=0;W<da.length;W++)if(("synch"==da[W].type||"receive"==da[W].type)&&da[W].id==ab[Ka].bound.id&&da[W].variable==ab[Ka].bound.variable){if("variables."==
ab[Ka].bound.variable.slice(0,10)){W=ab[Ka].bound.variable.slice(10);try{G[W]!=ab[Ka].value&&(G[W]=ab[Ka].value,za=!0)}catch(Ca){console.log(Ca)}}else if(ab[Ka].bound.variable)try{eval(ab[Ka].bound.variable)!=ab[Ka].value&&(eval(ab[Ka].bound.variable+"=boundValue[i].value"),za=!0)}catch(Ca){console.log(Ca)}break}if(1==za){for(W=0;W<da.length;W++)if("cursor"==da[W].type){for(za=0;za<ab.length;za++)if(da[W].id==ab[za].id){aa.locateValue=ab[za].value;Sb(W);break}break}F=!0;H.query()}}};var Sb=function(za){if(null!=
E&&null!=E.field)for(var Ka=0;Ka<E.field.length;Ka++)if(E.field[Ka][0].toLowerCase()==da[za].field.toLowerCase()){for(za=0;za<E.info.rows;za++)if(aa.locateValue==E.data[za][Ka]){aa.index!=E.info.begin+za&&(aa.index=E.info.begin+za,1==na.enableMultiSelected&&(fa=[],fa[0]=E.info.begin+za),za>=Q?(ta++,K=ta*na.rowHeight,H.query()):aa.index==E.info.begin&&0<E.info.begin?(ta--,K=ta*na.rowHeight,H.query()):H.draw(!0));return}break}};this.setScheme=function(za,Ka){if(cb!=za||Ab!=Ka){if(za.xCollection){var ab;
(ab=za.xCollection[Ka]?za.xCollection[Ka]:za.xCollection.normal)&&xCopyAllTo(ab,na)}cb=za;Ab=Ka;1==U&&H.draw(!0);H.setControlScheme()}};this.setControlScheme=function(){if(cb&&ja){for(var za=0;za<ja.length;za++)ja[za]&&cb.xControl&&ja[za].setScheme(cb.xControl,Ab);H.draw(!0)}};this.setOption=function(za){xCopyTo(za,na);na.over=za.over;na.overCursor=za.overCursor;na.scrollButton=za.scrollButton;Ub(!0);"hidden"!=na.scroller.scrollerV?(null==la&&(la=new xScroll(a,c.parentElement,H,"vertical"),la.setPosition(void 0,
na.rowHeight,1,0)),la.setOption(za)):la=null;"hidden"!=na.scroller.scrollerH?(null==Na&&(Na=new xScroll(a,c.parentElement,H,"horizontal"),Na.setPosition(0,void 0,0,0,0)),Na.setOption(za)):Na=null};this.setBounds=function(za){da=za};this.setViewItems=function(za){null==ea&&(ea=[]);ea=xDeepCopy(za);hb=!1;if(E&&E.field)if(null==ea){hb=!0;ea=[];za=16;for(var Ka=0;Ka<E.field.length;Ka++){ea[Ka]={title:null,left:na.item.margin+na.item.padding,top:na.item.margin+na.item.padding,width:72,height:16,index:Ka,
field:E.field[Ka][0],textAlign:"left"};switch(E.field[Ka][1].substr(0,1)){case "i":ea[Ka].width=60;case "f":case "l":ea[Ka].field.textAlign="right";if("row"==E.info.rank)for(var ab=0;ab<E.info.rows;ab++){var W=8*(""+E.data[ab][Ka]).length+6;W>ea[Ka].width&&(ea[Ka].width=W)}else for(ab=0;ab<E.info.rows;ab++)W=8*(""+E.data[Ka][ab]).length+6,isChina(E.data[Ka][ab])&&(W*=2),W+=6,W>ea[Ka].width&&(ea[Ka].width=W);break;case "d":ea[Ka].width="dt"==E.field[Ka][1]?136:78;break;case "c":if("row"==E.info.rank)for(ab=
0;ab<E.info.rows;ab++)W=8*E.data[ab][Ka].length,isChina(E.data[ab][Ka])&&(W*=2),W+=6,W>ea[Ka].width&&(ea[Ka].width=W);else for(ab=0;ab<E.info.rows;ab++)W=8*E.data[Ka][ab].length,isChina(E.data[Ka][ab])&&(W*=2),W+=6,W>ea[Ka].width&&(ea[Ka].width=W)}za<ea[Ka].width+2*na.item.margin+2*na.item.padding&&(za=ea[Ka].width+2*na.item.margin+2*na.item.padding)}ab=Math.floor(na.itemWidth/za);1>ab&&(ab=1);var Ca=W=0;for(Ka=0;Ka<ea.length;Ka++)ea[Ka].left=W,ea[Ka].top=Ca,0==Ka%ab?(W=0,Ca+=ea[Ka].height):W+=za}else for(Ka=
0;Ka<ea.length;Ka++)ea[Ka].index=Ob(N[0].table,ea[Ka].field)};this.getToolbars=function(){return Cb};this.setToolbarOption=function(za){if(Cb){for(var Ka=0;Ka<Cb.length;Ka++)Cb[Ka].setOption(za);Ra()}};this.setTable=function(za,Ka,ab){if(!V){V=!0;if(1==ab)Wa=!0;else if(1!=U)for(var W=0;W<J.length;W++)if(J[W]){J[W].queryStatus=null;V=!1;return}zb=0;if(null==za||0>=za.length||null==za[0]||null==za[0].table)E=N=null,ra=0;else{if(1==na.sort.sort&&(W=na.sort,""!=W.order&&""!=W.field&&""!=W.type))for(var Ca=
0;Ca<za.length;Ca++){var ca=void 0,ya=za[Ca].table.field,bb=za[Ca].table.data;if(null!=ya&&0<ya.length)for(var ib=0;ib<ya.length;ib++)if(ya[ib][0]==W.field){ca=ib;break}ya=za[Ca].table;var gb=W.order,Bb=W.type;if(null!=ca&&null!=bb){ib=[];for(var Hb=[],nb=0;nb<bb.length;nb++)Hb.push(bb[nb][ca]);"string"==Bb?Hb.sort():"number"==Bb&&("asc"==gb?Hb.sort(v):"desc"==gb&&Hb.sort(A));for(gb=0;gb<Hb.length;gb++)for(Bb=0;Bb<bb.length;Bb++)if(Hb[gb]==bb[Bb][ca]){ib[gb]=bb[Bb];break}ca=ib}else ca=bb;ya.data=
ca}N=xDeepCopy(za);E=N[0].table;E.info.begin--;0>E.info.begin&&(E.info.begin=0);ra=E.info.totalRows}if(J&&N)for(W=0;W<J.length;W++)J[W]&&N[W]&&N[W].updateCounter!=J[W].updateCounter&&(J[W].updateCounter=N[W].updateCounter,J[W].callback_onMessage&&J[W].callback_onMessage(N[W],Ka,ab,getCallback_Param(),N),J[W].queryStatus=null,Gb=xGlobal.refreshCounter);Ub();0==O&&z("tableUpdate");H.draw(!0);H.query();u("doReceivedData",M);V=M=!1}};var Ub=function(za){if(E&&E.info&&ea&&0<ea.vBox.length){null==ja&&(ja=
[]);var Ka=0;if(Q){for(za=ta;Ka<Q;za++,Ka++)if(za>=E.info.dataBegin&&za<E.info.dataBegin+E.info.dataRows){if(null==ja[Ka]){var ab=createGrid(ea.vBox,N,G);ab=makeCells(ab,"hBox",H.draw);ja[Ka]=new xCells(H,ab,"vBox",G);ja[Ka].index=Ka}ja[Ka].setValue(za,N,G)}H.setControlScheme()}}};this.setPos=function(za,Ka){za==la?(K=Ka,0>K?K=0:(za=Math.ceil(ra/Aa.cols)*Aa.itemHeight+2*na.margin,K>za-rb&&(K=za-rb))):za==Na&&(Z=Ka,0>Z&&(Z=0),za=Math.ceil(ra/Aa.rows)*Aa.itemWidth+2*na.margin,Z>za-Ma&&(Z=za-Ma));H.draw(!0)};
this.setCursorIndex=function(za){aa.index=za;$a();H.draw(!0)};var Ob=function(za,Ka){if(za&&Ka)for(var ab=0;ab<za.field.length;ab++)if(za.field[ab][0].toLowerCase()==Ka.toLowerCase())return ab;return-1};this.draw=function(za){var Ka=c.parentElement.offsetWidth,ab=c.parentElement.offsetHeight;if(null!=c&&0!=Ka&&0!=ab&&(0!=(void 0===za?null:za)||Oa!=Ka||Pa!=ab)){Oa=Ka;Pa=ab;oa.left=oa.top=0;oa.height=ab;oa.width=Ka;Ma=oa.width;var W,Ca;if(Cb){for(var ca=0;ca<Cb.length;ca++)switch(Cb[ca].position){case "top":null==
W&&(W=0);W+=Cb[ca].height;break;case "bottom":null==Ca&&(Ca=0),Ca+=Cb[ca].height}null!=W&&(oa.top=W);null!=Ca&&(oa.bottom=Ca)}za={left:oa.left,top:oa.top,width:Ka-oa.left-oa.right,height:ab-oa.top-oa.bottom};if(na.scrollButton&&("left-right"==na.scrollButton.type||"top-bottom"==na.scrollButton.type)&&(null==Db&&(Db=[]),"left-right"==na.scrollButton.type)){ca=24;null!=na.scrollButton.width&&(ca=parseInt(na.scrollButton.width));if(null==ca||2>ca)ca=20;Db[0]={left:oa.left+1,top:oa.top+1,width:ca-2,height:oa.height-
2};Db[1]={left:oa.left-1+oa.width-ca,top:oa.top+1,width:ca-1,height:oa.height-2};var ya=1;null!=na.scrollButton.gap&&(ya=parseInt(na.scrollButton.gap));null==ya&&(ya=10);oa.left+=ca+ya;oa.width-=2*(ca+ya);Ma-=2*ca}ca=0;na.margin&&(ca=na.margin);oa.left+=ca;oa.top+=ca;Ma=oa.width-2*ca+1;rb=oa.height-2*ca+1;0>K&&(K=0);var bb=ca=0;na.item.margin&&(ca=na.item.margin);na.itemPadding&&(bb=na.item.padding);var ib=calcCollectionColsAndRows(Ma,rb,na.rank);if("vertical"==na.rank.scroll){var gb=Math.floor(K/
ib.itemHeight)*ib.cols;sa=ib.cols*Math.floor(rb/ib.itemHeight)}else gb=Math.floor(Z/ib.itemWidth)*ib.rows,sa=ib.rows*Math.floor(Ma/ib.itemWidth);"none"==ib.wheel&&(gb=Z=K=0);aa.index>ra-1&&(aa.index=ra-1,gb=ra-1-Q);0>aa.index&&(aa.index=0);gb+ib.items>ra&&(gb=ra-ib.items);0>gb&&(K=gb=0);Aa&&Aa.cols*Aa.rows!=ib.rows*ib.cols?(Aa=ib,Ub()):Aa=ib;if(ta!=gb||ib.items>Q||0!=Jb)if(ta=gb,Q=ib.items,H.query(),E)return;null==C&&(C=c.getContext("2d"));X=getPixelRatio(C);c.width=Ka*X;c.height=ab*X;c.style.left=
0;c.style.top=0;c.style.width=Ka+"px";c.style.height=ab+"px";1<X&&C.setTransform(X,0,0,X,0,0);C.translate(.5,.5);C.lineWidth=1;C.beginPath();C.fillStyle=na.backgroundColor;C.strokeStyle=na.borderColor;C.fillRect(za.left-.5,za.top-.5,za.width+1,za.width+1);C.closePath();C.fillStyle=na.cell.color;C.font="14px "+xGlobal.systemFont;if(E&&E.data){ta=gb;Q=items;C.beginPath();C.textBaseline="top";ib=ca+bb;for(var Bb=ta;Bb<ra&&Bb<ta+Q;Bb++){if("vertical"==Aa.scroll){ca=Bb/Aa.cols;za=parseInt(Bb/Aa.rows);
bb=oa.left-Z+za*Aa.itemWidth-1;gb=oa.top-K+ca*Aa.itemHeight-1;bb+=Aa.gapX*za;gb+=Aa.gapY*ca;if(0>=gb+Aa.itemHeight)continue;if(gb>rb)break}else{za=Bb%Aa.cols;ca=parseInt(Bb/Aa.cols);bb=oa.left-Z+za*Aa.itemWidth-1;gb=oa.top-K+ca*Aa.itemHeight-1;bb+=Aa.gapX*za;gb+=Aa.gapY*ca;if(0>=bb+Aa.itemWidth)continue;if(bb>Ma)break}ca=!1;za={left:bb+na.item.margin,top:gb+na.item.margin,width:Aa.itemWidth-2*na.item.margin,height:Aa.itemHeight-2*na.item.margin};E.info.dataRows&&(pa=Ma-Aa.itemWidth*E.info.dataRows);
""!=na.colSplitColor&&0!=za.left&&(C.beginPath(),C.moveTo(za.left,za.top+.5*(za.height-na.colSplitHeight))-5,C.lineTo(za.left,za.top+.5*(za.height-na.colSplitHeight)+na.colSplitHeight-5),C.strokeStyle=na.colSplitColor,C.stroke(),C.closePath());Bb!=aa.index||xGlobal.focusWidget!=H&&1!=na.alwaysShowSelected||(ca=!0);if(1==ca)null!=na.overCursor&&null!=ha&&ha==Bb?drawRect(C,za.left,za.top,za.width,za.height,na.overCursor):drawRect(C,za.left,za.top,za.width,za.height,na.cursor);else if(null!=na.over&&
null!=ha&&ha==Bb)drawRect(C,za.left,za.top,za.width,za.height,na.over);else if(null!=na.selected&&1==na.enableMultiSelected)for(ca=0;ca<fa.length;ca++){if(fa[ca]==Bb){drawRect(C,za.left,za.top,za.width,za.height,na.selected);C.fillStyle=na.cell.color;break}}else na.item.backgroundColor&&drawRect(C,za.left,za.top,za.width,za.height,na.item);ca=Bb-ta;ja&&0<=ca&&ja[ca]&&(ja[ca].setCellsPosition(za),ja[ca].arrangeRowCells(za),ja[ca].draw(C,na.cell,bb+ib,gb+ib,za))}C.closePath()}if(Db)for(ca=0;2>ca;ca++)za=
Db[ca].left,bb=Db[ca].top,gb=Db[ca].width,ib=Db[ca].height,gb+=ya,1==ca&&(za-=ya),C.beginPath(),C.fillStyle=na.backgroundColor,C.fillRect(za-2,bb-2,gb+4,ib+4),C.closePath(),ha==-(ca+1)?(drawRect(C,Db[ca].left,Db[ca].top,Db[ca].width,Db[ca].height,na.scrollButton.overButton),C.fillStyle=na.scrollButton.overButton&&na.scrollButton.overButton.color?na.scrollButton.overButton.color:"#fff"):(drawRect(C,Db[ca].left,Db[ca].top,Db[ca].width,Db[ca].height,na.scrollButton.normalButton),C.fillStyle=na.scrollButton.normalButton&&
na.scrollButton.normalButton.color?na.scrollButton.normalButton.color:"#fff"),C.beginPath(),C.textAlign="center",C.textBaseline="middle",C.font=""+.8*Db[ca].width+"px Arial",C.fillText(0==ca?"<":">",Db[ca].left+Db[ca].width/2,Db[ca].top+Db[ca].height/2,Db[ca].width),C.closePath();Cb&&na.colSplitLineColor&&""!=na.colSplitLineColor&&(C.beginPath(),W&&(C.moveTo(oa.left,oa.top+1),C.lineTo(oa.left+Ka,oa.top+1)),Ca&&(C.moveTo(oa.left,ab-oa.bottom-1),C.lineTo(oa.left+Ka,ab-oa.bottom-1)),C.strokeStyle=na.colSplitLineColor,
C.stroke(),C.closePath());1==na.paging?(la&&(la=null),Na&&(Na=null)):(la&&("vertical"==Aa.scroll?(la.setPosition(void 0,oa.top,1,Ca),la.setSliderPos(K,rb,Math.ceil(ra/Aa.cols)*Aa.itemHeight+2*na.margin)):la.setSliderPos(K,0,0)),Na&&("vertical"==Aa.scroll?Na.setSliderPos(Z,0,0):(Na.setPosition(0,void 0,0,Ca),Na.setSliderPos(Z,Ma,Math.round(ra/Aa.rows)*Aa.itemWidth+2*na.margin))))}};this.clearMultiSelected=function(){fa=[];H.query()};var Fb=function(za){if(1==na.enableMultiSelected){if(1==za.buttons&&
za.ctrlKey){za=!0;for(var Ka=0;Ka<fa.length;Ka++)if(fa[Ka]==aa.index){za=!1;delete fa[Ka];break}1==za&&(fa[fa.length]=aa.index);T=aa.index}else if(za.shiftKey)if(null==T)T=aa.index;else{za=T;var ab=Y;za>ab&&(za=Y,ab=T);for(Ka=0;Ka<fa.length;Ka++)fa[Ka]>=za&&fa[Ka]<=ab&&delete fa[Ka];za=T;ab=aa.index;za>ab&&(za=aa.index,ab=T);for(Ka=za;Ka<=ab;Ka++)fa[fa.length]=Ka}else if("mousedown"!=za.type||"mousedown"==za.type&&(1==za.buttons||1==fa.length))1<fa.length&&(fa=[]),T=fa[0]=aa.index;za=[];for(Ka in fa)za[za.length]=
fa[Ka];fa=za}},Ya=function(za,Ka){"vertical"==Aa.scroll?(Ka=Math.floor((K+Ka-oa.top)/Aa.itemHeight),za=Math.floor((Z+za-oa.left)/Aa.itemWidth),za+=Aa.cols*Ka):(Ka=Math.floor((K+Ka-oa.top)/Aa.itemHeight),za=Math.floor((Z+za-oa.left)/Aa.itemWidth),za=Ka+Aa.rows*za);return za};this.onDblClick=function(za){a:if(null!=ea){if(Db)for(var Ka=0;Ka<Db.length;Ka++)if(za.offsetX>=Db[Ka].left&&za.offsetX<=Db[Ka].left+Db[Ka].width){var ab=na.scrollButton.step;if(null==ab||1>ab)ab=30;if(0==Ka){if(0==Z)break a;Z-=
ab;0>Z&&(Z=0)}else if(Math.abs(pa)>Z+ab)Z+=ab;else break a;H.draw(!0);break a}ab=aa.index;var W=!0;null==ia.index&&(W=!1);ia.index=ab;E&&null!=E.data&&(Ka=Ya(za.offsetX,za.offsetY),Ka<ra&&(aa.index=Ka,Fb(za),H.draw(!0)));H.page&&H.page.setPageActiveObject&&H.page.setPageActiveObject(H);(0==za.shiftKey&&0==za.ctrlKey&&ab!=aa.index||0==W)&&z("mouseDown");Y=aa.index}if(za.offsetY>oa.top&&q&&isInRect(za.offsetX,za.offsetY,oa)&&q.doDblClick&&(Ka=r(ja,za),null!=Ka&&ja[Ka-ta]&&(za=ja[Ka-ta].onMouseDown(za))&&
za.doDblClick))for(Ka=0;Ka<q.doDblClick.length;Ka++)q.doDblClick[Ka].callback&&q.doDblClick[Ka].callback(za),q.doDblClick[Ka].action&&za.doDblClick(q.doDblClick[Ka].action)};var fb=function(){var za=xGlobal.focusWidget;xGlobal.focusWidget=H;za&&za!=H&&za.draw&&za.draw(!0)};this.onMouseOut=function(za){null!=ha&&(ha=null,H.draw(!0))};this.onMouseUp=function(za){var Ka=r(ja,za);null!=Ka&&ja[Ka-ta]&&((Ka=ja[Ka-ta].onMouseDown(za))&&Ka==xGlobal.focusObject?Ka.onMouseUp&&(1==na.enableFocus&&(xGlobal.focusObject=
Ka,fb()),Ka.onMouseUp(za),H.draw(!0)):Ka&&Ka.onMouseUp&&(Ka.onMouseUp(za),H.draw(!0)));if(H.callInfo instanceof Array&&0<H.callInfo.length)for(za=0;za<H.callInfo.length;za++)H.callInfo[za].onClick&&H.callInfo[za].onClick instanceof Array&&0<H.callInfo[za].onClick.length&&H.callInfo[za].onClick.map(function(ab){eval(ab.action)})};this.onMouseMove=function(za){if(1!=za.buttons&&""!=na.overBackgroundColor){if(Db)for(var Ka=0;Ka<Db.length;Ka++)if(za.offsetX>=Db[Ka].left&&za.offsetX<=Db[Ka].left+Db[Ka].width){ha!=
-(Ka+1)&&(ha=-(Ka+1),H.draw(!0));return}Ka=Ya(za.offsetX,za.offsetY);ha!=Ka&&(ha=Ka,H.draw(!0))}Ka=r(ja,za);if(null!=Ka&&ja[Ka-ta]){Ka=ja[Ka-ta].onMouseMove(za);var ab=!1;if(xGlobal.mouseOverObject!=Ka){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(za,H);xGlobal.mouseOverObject=Ka;ab=!0}ab&&H.draw(!0)}};this.onMouseDown=function(za){if(null!=ea&&null!=E){var Ka=r(ja,za);if(null!=Ka&&ja[Ka-ta]){var ab=!1,W=ja[Ka-ta].onMouseDown(za);if(W){if(W.onMouseDown)W.onMouseDown(za,
xGlobal.focusObject==W?!0:!1);H.page.setPageFocusWidget(H);1==na.enableFocus&&(xGlobal.focusObject=W);ab=!0}aa.index!=Ka&&(aa.index=Ka,ab=!0);ab&&H.draw(!0)}null!=E&&null!=E.data&&aa.index!=aa.preIndex&&E.data[aa.index-ta]&&(aa.preIndex=aa.index,u("doSelectChanged"))}};this.onMouseWheel=function(za){if((1!=na.wheelOnFocus||xGlobal.focusWidget==H)&&1!=na.paging&&"none"!=Aa.wheel&&E&&null!=E.data)if(0!=za.deltaY)"vertical"==Aa.scroll&&(K+=za.deltaY,za=Aa.itemHeight*Math.ceil(ra/Aa.cols),rb<za?(K+rb>
za&&(K=za-rb),0>K&&(K=0),H.draw(!0)):0!=K&&(K=0,H.draw(!0)));else if(0!=za.deltaX&&"col"==na.rank){var Ka=Aa.itemWidth*Math.ceil(ra/Aa.rows);ea&&0<ea.length&&Ma<Ka?(Z+=za.deltaX,Z>Ka-Ma&&(Z=Ka-Ma),0>Z&&(Z=0),H.draw(!0)):0!=Z&&(Z=0,H.draw(!0))}};this.onKeyDown=function(za){var Ka=!1;if(ja&&ja[aa.index]){if(1==ja[aa.index].onKeyDown(za)){H.draw(!0);1!=xGlobal.passiveSupported&&za.preventDefault();return}if(13==za.keyCode&&q.doEnter&&xGlobal.focusObject.getParent()==H){var ab=xGlobal.focusObject;if(ab&&
ab.doDblClick)for(var W=0;W<q.doEnter.length;W++)q.doEnter[W].callback&&q.doEnter[W].callback(ab),q.doEnter[W].action&&ab.doDblClick(q.doEnter[W].action)}}if(0!=na.allowCursor){switch(za.keyCode){case 40:"vertical"==Aa.scroll?aa.index+Aa.cols<ra&&(aa.index+=Aa.cols):aa.index++;break;case 38:"vertical"==Aa.scroll?0<=aa.index-Aa.cols&&(aa.index-=Aa.cols):aa.index--;break;case 34:Ka=!0;aa.index=ta+sa;"vertical"==Aa.scroll?K=Math.floor(aa.index/Aa.cols)*Aa.itemHeight:Z=Math.floor(aa.index/Aa.rows)*Aa.itemWidth;
break;case 33:Ka=!0;aa.index=ta-sa;"vertical"==Aa.scroll?K=Math.floor(aa.index/Aa.cols)*Aa.itemHeight:Z=Math.floor(aa.index/Aa.rows)*Aa.itemWidth;break;case 35:aa.index=ra-1;break;case 36:aa.index=0;break;case 39:"vertical"==Aa.scroll?aa.index++:aa.index+Aa.rows<ra&&(aa.index+=Aa.rows);break;case 37:"vertical"==Aa.scroll?aa.index--:0<=aa.index-Aa.rows&&(aa.index-=Aa.rows);break;case 13:null!=E&&null!=E.data&&u("doEnter");break;default:return}$a(Ka);Y!=aa.index&&(Fb(za),Y=aa.index);0==O&&1>=fa.length&&
z("keyDown");O=1;H.draw(!0);1!=xGlobal.passiveSupported&&za.preventDefault()}};this.onKeyUp=function(za){O=0;0!=za.shiftKey||"ArrowDown"!=za.code&&"ArrowUp"!=za.code||aa.preIndex==aa.index||z("keyUp")};var $a=function(za,Ka){0>aa.index&&(aa.index=0);aa.index>ra-1&&(aa.index=ra-1);"vertical"==Aa.scroll?(Ka=Math.floor(aa.index/Aa.cols),Ka*Aa.itemHeight<K&&(K=Ka*Aa.itemHeight),0==za&&(aa.index>=ta+sa&&(K=(Ka+1)*Aa.itemHeight-rb+2*na.margin),0>K&&(K=0))):(za=Math.floor(aa.index/Aa.rows),za*Aa.itemWidth<
Z&&(Z=za*Aa.itemWidth),aa.index>=ta+Math.floor(Z/Aa.itemWidth)*Aa.rows+sa&&(Z=(za+1)*Aa.itemWidth-Ma+2*na.margin),0>Z&&(Z=0))};this.isMyCanvas=function(za){return c==za?!0:!1};this.onContextMenu=function(za){1!=xGlobal.passiveSupported&&za.preventDefault()};this.getPopupMenu=function(za){if(na.popupMenu&&na.popupMenu.subMenu)return H.page.boundMenuStatus(na.popupMenu.subMenu),""!=na.popupMenuPrepareAction&&(za=na.popupMenuPrepareAction.indexOf("getSelected"),0<=za&&(za=trimBracket(na.popupMenuPrepareAction.slice(za+
11)),za=trimBracket(za),na.popupMenu.data=H.getSelected(za))),na.popupMenu};this.getSelected=function(za){var Ka=Ob(E,za);if(0<=Ka&&E.data){var ab=[];if(1==na.enableMultiSelected)if("row"==E.info.rank)for(var W=0;W<fa.length;W++)ab[W]="c"==E.field[Ka][1]?"'"+E.data[fa[W]-ta][Ka]+"'":E.data[fa[W]-ta][Ka];else ab[0]="c"==E.field[Ka][1]?"'"+E.data[Ka][aa.index-ta]+"'":E.data[Ka][aa.index-ta];else ab[0]="row"==E.info.rank?"c"==E.field[Ka][1]?"'"+E.data[aa.index-ta][Ka]+"'":E.data[aa.index-ta][Ka]:"c"==
E.field[Ka][1]?"'"+E.data[Ka][aa.index-ta]+"'":E.data[Ka][aa.index-ta];Ka={queryInfo:H.queryInfo,data:{}};Ka.data[za]=[ab];return Ka}};this.doAction=function(za){za=trim(za);var Ka=za.indexOf("setVariablesValue");0==Ka?(za=trimBracket(za.slice(17)),za=eval("("+za+")"),H.setVariablesValue(za)):(Ka=za.indexOf("setOption"),0==Ka&&(za=trimBracket(za.slice(10)),za=eval("("+za+")"),H.setOption(za)))};this.funcNameMap={setVariablesValue:H.setVariablesValue};c.addEventListener("mousemove",H.onMouseMove);
c.addEventListener("mouseout",H.onMouseOut);c.addEventListener("mousedown",H.onMouseDown);c.addEventListener("mouseup",H.onMouseUp);c.addEventListener("mousewheel",H.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1);c.addEventListener("contextmenu",H.onContextMenu);c.addEventListener("dblclick",H.onDblClick)};var calcCollectionColsAndRows=function(a,b,c){var g=c.rows,k=c.cols;switch(c.type){case "auto":k=parseInt(a/c.minItemWidth);g=parseInt(b/c.minItemHeight);a/k>c.maxItemWidth&&k++;b/g>c.maxItemHeight&&g++;items=g*k;a=c.gapX?(a-(k-1)*c.gapX)/k:a/k;b=c.gapY?(b-(g-1)*c.gapY)/g:b/g;break;case "fixedSize":"vertical"==c.scroll?(k=Math.floor(a/c.itemWidth),g=Math.ceil(b/c.itemHeight),"left-right"==c.scrollButton&&(g=1)):(k=Math.ceil(a/c.itemWidth),g=Math.floor(b/c.itemHeight));k=1>k?1:k;g=1>g?1:g;a=c.itemWidth;
b=c.itemHeight;break;default:items=g*k,a/=k,b/=g}"smooth"==c.wheel&&(items="vertical"==c.scroll?(g+1)*k:(k+1)*g);return{cols:k,rows:g,items:items,itemWidth:a,itemHeight:b,scroll:c.scroll,wheel:c.wheel,gapX:c.gapX,gapY:c.gapY}};
function xSuperCollection(a,b,c,g,k,q,f){var p=this,v=null;p.page=b;var A,r=k;if(r&&f)for(var u in r)for(var z in f)if(u==z){r[u]=f[z];break}this.queryIndex=q.getQueryIndex(this);var H,C,U,J=!1,G=!1,B=0,L=9,ba=9,N=0,E=0,V=0,F=0,M=0,X={style:"",marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,borderRadius:0,border:"1px solid transparent",backgroundColor:"transparent",cell:{marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,borderRadius:0,
border:"1px solid transparent"},rank:{type:"auto",scroll:"vertical",wheel:"smooth",minItemWidth:400,minItemHeight:360,maxItemWidth:500,maxItemHeight:460,itemWidth:400,itemHeight:260,cols:3,rows:3,gapX:0,gapY:0},scroller:{scrollerV:"show",scrollerH:"show",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"},initListVariable:null,initPreCell:[],hideNoVariable:!0},aa,ia,fa=[],T=function(){if(0==c.offsetWidth&&0==c.offsetHeight)return!1;var O=calcCollectionColsAndRows(c.offsetWidth,c.offsetHeight,
X.rank),K=0,Z=calcCollectionColsAndRows(c.offsetWidth,c.offsetHeight,X.rank);V=Z.rows;F=Z.cols;L=V*F;p.query();Z=0;if(H&&H[0]&&H[0].table&&H[0].table.info.totalRows)Z=H[0].table.info.totalRows;else if(X.initListVariable&&r){var pa=X.initListVariable.split(".");"variables"==pa[0]&&(Z=r[pa[1]].length)}Z+=X.initPreCell.length;for(pa=0;pa<V;pa++)for(var oa=0;oa<F;oa++)if(K<Z){if(null==fa[K]){var Aa=fa,ta=K,Q=E++,sa=a.document.createElement("div"),ra=a.document.createAttribute("style");ra.value=X.style+
";position:absolute;display:block;";sa.setAttributeNode(ra);sa.id=c.id+"_"+Q;c.appendChild(sa);Aa[ta]=sa;if(X.initPreCell&&0<X.initPreCell.length&&X.initPreCell.length>K)var la=X.initPreCell[K];else X.item&&X.item.element&&(la=X.item.element);if(la.class){Aa=a.document.createElement("canvas");Aa.id=fa[K].id;Aa.className=la.class;ta=a.document.createAttribute("style");ta.value="position: absolute; margin:0px;padding:0px; left: 0px; top: 0px; right: 0px; bottom: 0px; background-color: transparent; cursor: default;";
X.marginLeft&&(ta.value+="margin-left:"+X.marginLeft+"px;");X.marginRight&&(ta.value+="margin-right:"+X.marginRight+"px;");X.marginTop&&(ta.value+="margin-top:"+X.marginTop+"px;");X.marginBottom&&(ta.value+="margin-bottom:"+X.marginBottom+"px;");X.paddingLeft&&(ta.value+="padding-left:"+X.paddingLeft+"px;");X.paddingRight&&(ta.value+="padding-right:"+X.paddingRight+"px;");X.paddingTop&&(ta.value+="padding-top:"+X.paddingTop+"px;");X.paddingBottom&&(ta.value+="padding-bottom:"+X.paddingBottom+"px;");
X.borderRadius&&(ta.value+="border-radius:"+X.borderRadius+"px;");ta.value+=X.border;Aa.setAttributeNode(ta);fa[K].canvasDom=Aa;fa[K].appendChild(Aa);fa[K].variables=xDeepCopy(la.variables);var Na;"xList"==la.class?Na=new xList(a,null,Aa,la.query,null,null,fa[K].variables,la.calls,q):"xChart"==la.class?Na=new xChart(a,null,Aa,la.query,fa[K].variables,la.calls,q):"xGrid"==la.class&&(Na=new xGrid(a,null,Aa,la.query,null,fa[K].variables,la.calls,q));Na.setParentDiv&&Na.setParentDiv(p);fa[K].canvasObject=
Na;la.toolbars&&Na.initToolbars&&Na.initToolbars(e,la.toolbars);la.option&&Na.setOption(la.option);X.item&&X.item.bounds&&Na.setBounds(X.item.bounds);la.listData&&Na.setListData(la.listData);"xList"==la.class?la.init&&Na.setHeader(la.init.cells,la.init.firstRowCells):"xChart"!=la.class&&"xGrid"==la.class&&la.init&&Na.setGrid(la.init);la.initAction&&Na.query()&&Na.query();null!=p.parent&&null!=p.parent.getVariables&&(Aa=p.parent.getVariables(),null!=Aa&&null!=Na.setVariablesValue&&Na.setVariablesValue(Aa,
null,!1));1==v&&fa[K].canvasObject.show();aa&&ia&&fa[K].canvasObject.setScheme(aa,ia)}}K++}if(K<fa.length){for(la=K;K<fa.length;K++)fa[K]&&(fa[K].canvasObject&&fa[K].canvasObject.destroy(),Na=document.getElementById(fa[K].id),c.removeChild(Na));fa.splice(la,K-la)}if(0!=F&&0!=V){K=O.itemWidth;la=O.itemHeight;for(oa=pa=Z=Na=0;oa<V;oa++){for(Aa=0;Aa<F;Aa++)fa[pa]&&(fa[pa].style.left=0==Aa?Na+X.marginLeft+"px":Na+X.marginLeft+O.gapX+"px",fa[pa].style.top=0==oa?Z+X.marginTop+"px":Z+X.marginTop+O.gapY+
"px",fa[pa].style.width=K-(X.marginLeft+X.marginRight)+"px",fa[pa].style.height=la-(X.marginTop+X.marginBottom)+"px"),pa++,Na+=K,0<Aa&&(Na+=O.gapX);Z+=la;0<oa&&(Z+=O.gapY);Na=0}return!0}};this.create=function(){0==T()?this.initCreate=-1:(this.initCreate=!0,Y(),X.callback_init&&X.callback_init(p))};this.show=function(){if(1!=v){v=!0;-1==this.initCreate&&p.create();for(var O=0;O<fa.length;O++)fa[O].canvasObject.show()}};this.hidden=function(O){if(0!=v&&(O=v=!1,1!=O))for(var K=0;K<fa.length;K++)fa[K].canvasObject.hidden(O)};
this.resize=function(){v&&(T(),p.draw())};this.setScheme=function(O,K){aa=O;ia=K;for(var Z=0,pa=0;pa<V;pa++)for(var oa=0;oa<F;oa++)fa[Z]&&fa[Z].canvasObject&&(fa[Z].canvasDom.style.border+=X.border,fa[Z].canvasObject.setScheme(O,K)),Z++;O.xSuperCollection&&(O=O.xSuperCollection[K]?O.xSuperCollection[K]:O.xSuperCollection.normal)&&(xCopyAllTo(O,X),c.style.backgroundColor=X.backgroundColor);p.draw()};this.setOption=function(O){xCopyTo(O,X);O.item&&(X.item=xDeepCopy(O.item));O.initPreCell&&(X.initPreCell=
xDeepCopy(O.initPreCell));X.initListVariable=O.initListVariable;O.cell&&O.cell.default&&(X.cell.default=O.cell.default);null!=O.callback_init&&(X.callback_init=O.callback_init);"hidden"!=X.scroller.scrollerV?(null==C&&(C=new xScroll(a,c,p,"vertical")),C.setOption(O)):C=null;"hidden"!=X.scroller.scrollerH?(null==U&&(U=new xScroll(a,c,p,"horizontal"),U.setPosition(0,void 0,0,0,0)),U.setOption(O)):U=null};this.setBounds=function(O){A=O};this.synchBoundValue=function(O,K,Z,pa){if(pa!=p&&void 0!=A&&0<
A.length&&Z){O=!1;for(K=0;K<Z.length;K++)if(null!=Z[K]&&null!=Z[K].bound)for(pa=0;pa<A.length;pa++)if((null==A[pa].type||"synch"==A[pa].type||"receive"==A[pa].type)&&A[pa].id==Z[K].bound.id&&A[pa].variable==Z[K].bound.variable){if("variables."==Z[K].bound.variable.slice(0,10)){pa=Z[K].bound.variable.slice(10);try{if(-1!=pa.indexOf(".")){var oa=pa.split(".");if(2==oa.length){var Aa=oa[0],ta=oa[1];"Object"==r[Aa].constructor.name&&r[Aa][ta]!=Z[K].value&&(r[Aa][ta]=Z[K].value,variablesChangeQuery=O=
!0)}}else r&&r[pa]!=Z[K].value&&(r[pa]&&"Array"==r[pa].constructor.name?filterMatch(Z[K].value,r,pa,p):r[pa]=Z[K].value,variablesChangeQuery=O=!0)}catch(Q){console.log(Q)}}else if(Z[K].bound.variable)try{eval(Z[K].bound.variable)!=Z[K].value&&(eval(Z[K].bound.variable+"=boundValue[i].value"),O=!0)}catch(Q){console.log(Q)}break}if(1==O)for(pa=0;pa<A.length;pa++)if("cursor"==A[pa].type){for(oa=0;oa<Z.length;oa++)if(A[pa].id==Z[oa].id){locateCursorIndex(pa);break}break}J=!0;g&&g[0]&&g[0].callback_object?
(Z=p.onDoCallback(g[0].callback_object),p.setTable(Z)):p.query()}};this.setVariablesValue=function(O,K,Z){var pa=!1;if("Object"==O.constructor.name&&null==K)for(var oa in O)r[oa]!=O[oa]&&(r[oa]=O[oa],pa=!0);else if(K)for(oa in r)for(var Aa=0;Aa<O.length;Aa++)O[Aa][0]==oa&&r[oa]!=K[Aa]&&(r[oa]=K[Aa],pa=!0);null!=Z&&(pa=Z);1==pa&&(J=!0,g&&g[0]&&g[0].callback_object?(K=p.onDoCallback(g[0].callback_object),p.setTable(K)):p.query())};this.clearQueryData=function(){B=H=null;G=!0};this.reQuery=function(){for(var O=
0;O<g.length;O++)g[O].query=null;this.clearQueryData();this.changeSelect();this.changeCursor();this.query()};this.query=function(){var O=g;O&&-1!=O.indexOf("{{")&&(O=replaceVariablesValue(O,r,H));if(!(null==O||O[0]&&O[0].callback_object)&&0!=c.offsetWidth&&0!=c.offsetHeight){var K=!1;if(null==B||1==G)G=!1,K=!0;for(var Z=0;Z<O.length;Z++)if(null==O[Z]||O[Z].queryStatus)O[Z]&&1==O[Z].queryStatus&&(O[Z].queryStatus=2);else{var pa;if(O[Z].server&&""!=O[Z].server){var oa=O[Z].server.slice(10);r&&r[oa]&&
""!=r[oa]&&(pa=r[oa])}oa=void 0;O[Z].http&&(oa=replaceVariablesValue(O[Z].http,r,H));if(O[Z].sql&&(null==oa||"http"!=oa.substr(0,4).toLowerCase())){var Aa=replaceVariablesValue(O[Z].sql,r,H);parseTableName(Aa);if(0==Z){if(1==X.enableOrderBy&&""!=X.orderBy&&header)for(oa=0;oa<header.length;oa++){if(header[oa].cells&&X.orderBy==header[oa].cells[0].field){X.orderByType&&(Aa+=" order by "+X.orderBy,-1==X.orderByType&&(Aa+=" desc"));header[oa].order=X.orderByType;for(oa++;oa<header.length;oa++)header[oa].order=
0;break}header[oa].order=0}if(1==J&&""!=X.initCursorPos)var ta=[B,L];else if(void 0!=B)if(1==X.paging){if(null==O[Z].query||O[Z].query.script!=Aa)B=offsetY=offsetX=0;ta=[B+1,L]}else{if(null==O[Z].query||O[Z].query.script!=Aa)B=offsetY=offsetX=0;ta=[B+1,L+1]}}else ta=null;if(!(null==Aa||""==Aa||0<=Aa.indexOf("{{ ")||O[Z].server&&null==pa)){if(null==O[Z].query||O[Z].query.script!=Aa)K=isSynBound=!0,O[Z].queryStatus=1;if(null==O[Z].query||O[Z].query.limit&&ta&&(O[Z].query.limit[0]!=ta[0]||O[Z].query.limit[1]!=
ta[1]))K=!0,O[Z].queryStatus=1;1==O[Z].queryStatus&&(O[Z].query={script:Aa,limit:ta,server:pa})}}else if(O[Z].http&&oa&&""!=oa){O[Z].field&&replaceVariablesValue(O[Z].field,r,H);var Q=O[Z].script?replaceVariablesValue(O[Z].script,r,H):replaceVariablesValue(O[Z].condition,r,H);Aa=L;1==X.paging?(Aa=ba,null==r.pageNo&&(null==r&&(r={}),r.pageNo=0)):r.pageNo=Math.trunc(B/Aa);H&&H[Z]&&H[Z].table&&H[Z].table.info&&1!=X.paging&&(H[Z].table.info.begin<=B&&H[Z].table.info.begin+H[Z].table.info.rows<B+Aa||H[Z].table.info.begin+
H[Z].table.info.rows==B)&&(r.pageNo=parseInt((H[Z].table.info.begin+H[Z].table.info.rows)/Aa));var sa=void 0;1==J&&""!=X.initCursorPos?0>X.initCursorPos?sa=[-1,Aa]:null!=r.pageNo&&(sa=[r.pageNo,Aa]):void 0!=B&&(sa=[r.pageNo,Aa]);0==Z?ta=sa:null!=O[Z].limit?O[Z].limit.mode&&"main"==O[Z].limit.mode?ta=sa:null!=O[Z].limit.begin&&null!=O[Z].limit.items&&(ta=[O[Z].limit.begin,O[Z].limit.items]):ta=[];null==Q||""==Q||0<=Q.indexOf("{{ ")||(Aa=";"+Q,null!=B&&(null==O[Z].query||Aa!=O[Z].query.script||O[Z].query.limit&&
ta&&(g[Z].query.limit[0]!=ta[0]||g[Z].query.limit[1]!=ta[1]))&&(header=null,isInitHeader=!1,null!=O[Z].query&&Aa==O[Z].query.script||N++,O[Z].query={script:Aa,limit:ta,field:"",condition:Q,id:N,server:oa},O[Z].queryStatus=1,q.sendHttpQuery(p.queryIndex,O,Z,p.setTable),_condition=Q))}}K&&(q.sendQuery(p.queryIndex,O,p.setTable),_condition=Q)}};var Y=function(){for(var O=0,K=0;K<V;K++)for(var Z=0;Z<F;Z++){if(fa&&fa[O]&&fa[O].canvasObject){var pa=void 0;var oa=B+O;if(null!=H&&null!=H[0]||1==p.initCreate)for(var Aa=
X.item.bounds,ta=p.initCreate?[]:H[0].table,Q=0,sa=0;sa<Aa.length;sa++)if("receive"==Aa[sa].type){var ra;Aa[sa].field?ra=Aa[sa].field:Aa[sa].variable&&"variables."==Aa[sa].variable.slice(0,10)&&(ra=Aa[sa].variable.slice(10));if(ra){ra=ra.toLowerCase();var la=parseFieldObj(ra);if(la.tableName)if(la.obj&&la.obj.tableName&&la.obj.fieldName){if(H[0].table.info.name.toLowerCase()==la.obj.tableName.toLowerCase())for(var Na=0;Na<ta.field.length;Na++)if(ta.field[Na][0].toLowerCase()==la.obj.fieldName){var Wa=
M-dataBegin,na;"col"==ta.info.rank?0<=Wa&&Wa<ta.data[Na].length&&(na=ta.data[Na][Wa]):0<=Wa&&Wa<ta.data.length&&(na=ta.data[Wa][Na]);for(Wa=0;Wa<H.length&&null!=H[Wa].table;Wa++)if(H[Wa].table.info.name.toLowerCase()==la.tableName){for(Na=0;Na<H[Wa].table.field.length;Na++)if(H[Wa].table.field[Na][0].toLowerCase()==la.boundFieldName){if("row"==H[Wa].table.info.rank)for(var ha=0;ha<H[Wa].table.data.length;ha++)if(na==H[Wa].table.data[ha][Na]){for(Na=0;Na<H[Wa].table.field.length;Na++)if(H[Wa].table.field[Na][0].toLowerCase()==
la.fieldName){pa[Q]={bound:Aa[sa],value:H[Wa].table.data[ha][Na]};Q++;break}break}break}break}break}}else{if(la.tableName&&la.fieldName)for(Na=M-dataBegin,Wa=la.fieldName.replace(la.tableName+".",""),ha=0;ha<H.length;ha++)if(H[ha]&&H[ha].table&&H[ha].table.info.name==la.tableName&&H[ha].table.field&&"row"==H[ha].table.info.rank)for(var ea=0;ea<H[ha].table.field.length;ea++)if(H[ha].table.field[ea][0].toLowerCase()==Wa){pa[sa]={bound:Aa[sa],value:H[ha].table.data[Na][ea]};break}}else if(ta&&ta.field)for(pa=
[],Na=0;Na<ta.field.length;Na++)if(ta.field[Na][0].toLowerCase()==ra){Wa=oa;"col"==ta.info.rank?ta.data[Na]&&0<=Wa&&Wa<ta.data[Na].length&&(pa[Q++]={bound:Aa[sa],value:ta.data[Na][Wa]}):0<=Wa&&Wa<ta.data.length&&ta.data[Wa]&&(pa[Q++]={bound:Aa[sa],value:ta.data[Wa][Na]});break}}}else Aa[sa].bound&&(la=void 0,"variables."==Aa[sa].bound.slice(0,10)&&(la=Aa[sa].bound.slice(10)),r[la]&&(pa=[],pa[Q++]={bound:Aa[sa],value:r[la][oa]}));else pa=void 0;if(pa){oa=null;for(Aa=0;Aa<pa.length;Aa++)for(ta=0;ta<
A.length;ta++)if((null==A[ta].type||"synch"==A[ta].type||"receive"==A[ta].type)&&A[ta].id==pa[Aa].bound.id&&A[ta].variable==pa[Aa].bound.variable){"variables."==pa[Aa].bound.variable.slice(0,10)&&(ta=pa[Aa].bound.variable.slice(10),null==oa&&(oa={}),oa[ta]=pa[Aa].value);break}oa?(fa[O].style.display="block",fa[O].canvasObject.setVariablesValue(oa)):X.hideNoVariable&&(fa[O].style.display="none")}}O++}};this.setTable=function(O,K,Z){if(1!=v)for(var pa=0;pa<g.length;pa++)if(g[pa]){g[pa].queryStatus=
null;return}H=xDeepCopy(O);if(g&&H)for(pa=0;pa<g.length;pa++)g[pa]&&H[pa]&&H[pa].updateCounter!=g[pa].updateCounter&&(g[pa].updateCounter=H[pa].updateCounter,g[pa].callback_onMessage&&g[pa].callback_onMessage(H[pa],K,Z,{option:X,variables:r,target:p,page:p.page,callbacks:{openWidthBrowseCenter:function_openWithBrowseCenter}},H),g[pa].queryStatus=null);T();Y();"function"==typeof X.item.afterQuery&&(fa=X.item.afterQuery(fa,H,p)||[]);p.draw()};this.changeSelect=function(){B=0};this.changeCursor=function(){M=
0};this.draw=function(O){for(var K=0,Z=0;Z<V;Z++)for(var pa=0;pa<F;pa++)fa&&fa[K]&&fa[K].canvasObject&&fa[K].canvasObject.draw(O),K++};this.refresh=function(){for(var O=0,K=0;K<V;K++)for(var Z=0;Z<F;Z++)fa[O]&&fa[O].canvasObject&&fa[O].canvasObject.refresh&&fa[O].canvasObject.refresh(),O++};this.onKeyDown=function(O){if(void 0!=H&&null!=H[0]&&null!=H[0].table){O=O.keyCode;var K=H[0].table.info.totalRows;ba=F*V;switch(O){case 35:M=K-1;break;case 36:M=0;break;case 37:M--;break;case 39:M++;break;case 38:0<
B&&(B-=X.cols);break;case 40:B+=X.cols;break;case 27:break;case 34:M+=ba;break;case 33:M-=ba;break;case 13:break;default:return}0>M?M=0:M>=K&&(M=K-1);if(M!=B||M>=B+ba||0==M)B=parseInt(M/ba)*ba,p.query()}};this.getItemsParam=function(){var O=fa.map(function(K,Z){return K.canvasObject});return{option:X,variables:r,target:p,targetChildren:X.item.element,items:O,page:p.page}};this.getQueryInfo=function(){return g};this.reload=function(){T();for(var O=0;O<fa.length;O++)fa[O].style.display=O>=V*F?"none":
"";p.draw(!0)};this.doAction=function(O){for(var K=O.split(";"),Z=0;Z<K.length;Z++){O=K[Z];O=trim(O);for(var pa=0;pa<O.length&&"."!=O[pa];pa++)if("("==O[pa]){pa=0;break}if(0<pa){var oa=O.substr(0,pa);oa=globalPage.getActivePage().getWidgetByElementId(oa);if(null!=oa&&oa.doAction){O=O.slice(pa+1,O.length);oa.doAction(O);continue}}"setOption"==O.substr(0,9)?(O=O.substr(9,O.length-1),O=eval(O),this.setOption(O)):"reload"==O.substr(0,6)?this.reload():eval(O)}};c.style.backgroundColor=X.backgroundColor}
;function xComHtml(a,b,c,g,k,q,f){var p=this;this.win=a;this.formatData=this.initModel=this.bounds=null;this.variables=k?xDeepCopy(k):null;this.parentDom=c;this.callbacks=f;var v=0;this.queryInfo=g?xDeepCopy(g):null;this.queryData=null;this.queryIndex=this.callbacks.getQueryIndex();this.scheme=this.renderSuccessCallback=null;this.schemeName="";this.init=function(){this.initModel&&this.refreshData()};this.synchBoundValue=function(A,r,u,z){if(z!=this&&(A=this.bounds,r=this.variables,void 0!=A&&0<A.length&&
u)){z=!1;for(var H=0;H<u.length;H++)for(var C=0;C<A.length;C++)if((null==A[C].type||"synch"==A[C].type||"receive"==A[C].type)&&A[C].id==u[H].id&&A[C].variable==u[H].variable){if("variables."==u[H].variable.slice(0,10)){C=u[H].variable.slice(10);try{r[C]!=u[H].value&&(r[C]=u[H].value,z=!0)}catch(U){console.log(U)}}else if(u[H].variable)try{eval(u[H].variable)!=u[H].value&&(eval(u[H].variable+"=boundValue[i].value"),z=!0)}catch(U){console.log(U)}break}1==z&&this.query()}};this.query=function(){var A=
this.queryInfo,r=this.variables,u=this.queryData;if(A)for(var z=0;z<A.length;z++)if(null!=A[z]&&A[z].http){var H=replaceVariablesValue(A[z].field,r,u),C=replaceVariablesValue(A[z].condition,r,u);var U=H+";"+C;null!=A[z].query&&U==A[z].query.script||v++;A[z].query={script:U,limit:void 0,field:H,condition:C,id:v};A[z].queryStatus=1;this.callbacks.sendHttpQuery(this.queryIndex,A,z,this.setTable)}};this.setTable=function(A,r,u){if(A&&A[0]&&A[0].table&&(p.queryData=xDeepCopy(A),A=getTableForMap(A[0].table),
p.refreshData(A),p.queryInfo&&p.queryData))for(A=0;A<p.queryInfo.length;A++)p.queryInfo[A]&&p.queryData[A]&&p.queryData[A].updateCounter!=p.queryInfo[A].updateCounter&&(p.queryInfo[A].updateCounter=p.queryData[A].updateCounter,p.queryInfo[A].callback_onMessage&&p.queryInfo[A].callback_onMessage(p.queryData[A],p),p.queryInfo[A].queryStatus=null)};this.setOption=function(A){A};this.setScheme=function(A){if(p.initModel){var r=p.initModel.indexOf("class=")+7,u=p.initModel.indexOf('"',r);p.schemeName=
p.initModel.slice(r,u);A.xControl&&A.xControl.xComHtml&&(p.scheme=A.xControl.xComHtml[p.schemeName]);var z;p.queryData&&(z=getTableForMap(p.queryData[0].table));this.refreshData(z)}};this.setBounds=function(A){this.bounds=A};this.refreshData=function(A){var r=this.formatData,u=this.variables;if(A){u={};for(var z={},H=0;H<r.length;H++){var C=r[H];z[C.field]=C.format}for(var U in A)r=A[U],u[U]=getValueFormatString(r.value,r.valueType,z[U]);r=replaceVariablesValue(this.initModel,u);this.parentDom.innerHTML=
r;this.renderSuccessCallback&&this.renderSuccessCallback(this)}else{for(A=0;A<r.length;A++)z=r[A],U=z.variables,z=z.format,null!=U&&null!=z&&(u[U]=formatDate(u[U],null,z));r=replaceVariablesValue(this.initModel,this.variables);this.parentDom.innerHTML=r}this.replaceScheme(p.scheme)};this.replaceScheme=function(A){A&&(A=document.getElementsByClassName(p.schemeName)[0])&&this.modifyClassName(A)};this.modifyClassName=function(A){if(A){var r=A.getAttribute("class");p.scheme[r]&&A.setAttribute("class",
p.scheme[r]);A=A.children;for(r=0;r<A.length;r++)this.modifyClassName(A[r])}};this.getQueryData=function(){return p.queryData};this.initializedData=function(A){null!=A.formatData&&(this.formatData=xDeepCopy(A.formatData));null!=A.model&&(this.initModel=A.model);A.renderSuccessCallback&&(this.renderSuccessCallback=A.renderSuccessCallback);this.init()}};function xCalendar(a,b,c){var g=this,k;this.canvas=c;var q=0,f=0,p=0,v=0;this.getCanvas=function(){return g.canvas};this.draw=function(A){var r=c.parentElement.offsetWidth,u=c.parentElement.offsetHeight;if(null!=c&&0!=r&&0!=u&&(0!=(void 0===A?!1:A)||q!=r||f!=u)){q=r;f=u;null==k&&(k=c.getContext("2d"));A=getPixelRatio(k);c.width=r*A;c.height=u*A;c.style.left=0;c.style.top=0;c.style.width=r+"px";c.style.height=u+"px";1<A&&k.setTransform(A,0,0,A,0,0);k.translate(.5,.5);k.lineWidth=1;u=Math.floor(p/188);
A=188*u;0!=p&&(u++,A+=188);var z=new Date;r=1E4*z.getFullYear()+100*(z.getMonth()+1)+z.getDate();z.setMonth(z.getMonth()-u);var H=1E4*z.getFullYear()+100*(z.getMonth()+1)+1;u="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("");var C=A=p-A+8;k.save();k.fillStyle="#000";k.textBaseline="top";k.strokeStyle="#aaa";for(var U=0;3>U;U++){k.font="15px "+xGlobal.systemFont;k.textAlign="left";z=Math.floor(H/1E4);var J=Math.floor(H/100%100);k.fillText(z+"."+J,8,C);C+=20;k.font="13px "+xGlobal.systemFont;k.textAlign=
"center";k.moveTo(4,C-4);k.lineTo(180,C-4);k.moveTo(4,C+16);k.lineTo(180,C+16);k.stroke();for(var G=0;7>G;G++)k.fillText(u[G],20+24*G,C);G=[];var B=new Date(Math.floor(H/1E4),Math.floor(H%1E4/100)-1,1);var L=B.getDay();var ba=0;B.setMonth(B.getMonth()+1);B.setDate(0);B=B.getDate();G[0]=[];for(var N=0;N<B;N++)G[ba][L]=N+1,6==L?(L=0,ba++,G[ba]=[]):L++;L=G;H=100*Math.floor(H/100);C+=24;for(G=0;G<L.length;G++){for(ba=0;7>ba;ba++)L[G][ba]&&(k.fillText(L[G][ba],20+24*ba,C),r==H+L[G][ba]&&(k.save(),k.beginPath(),
k.fillStyle="#f00",k.strokeStyle=null,k.arc(20+24*ba,C+22-6,3,0,2*Math.PI,!0),k.fill(),k.closePath(),k.restore()));C+=22}C=A+188*(U+1);z=new Date(z,J,1);z.setDate(J+1);H=1E4*z.getFullYear()+100*(z.getMonth()+1)+1}v=188;k.beginPath();k.fillStyle="#f00";k.strokeStyle="#f00";k.arc(v+10,18,10,10,0,2*Math.PI,!0);0==p?k.stroke():k.fill();k.closePath();k.fillStyle=0==p?"#aaa":"#fff";k.fillText("\u4eca",v+10,12);k.restore()}};this.onMouseDown=function(A){A.offsetX>=v&&A.offsetX<=v+20&&8<=A.offsetY&&28>=A.offsetY&&
(p=0,g.draw(!0))};this.onMouseWheel=function(A){0!=A.deltaY&&(p-=A.deltaY,g.draw(!0))};c.addEventListener("mousedown",g.onMouseDown);c.addEventListener("mousewheel",g.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1)};function xColorPicker(a,b){var c=this,g,k,q,f,p,v,A,r=0,u=0,z=0,H=0,C={left:0,top:0,width:0,height:0},U={left:0,top:0,width:0,height:0},J={left:0,top:0,width:0,height:0},G={x:void 0,y:void 0},B={x:void 0,y:void 0},L=0,ba=!1,N=!1,E="#f00 #ff0 #0f0 #0ff #00f #f0f #f00".split(" "),V=[];this.boundEditor=function(O){g&&g.removeEventListener("input",c.onEditorInput);g=O;g.addEventListener("input",c.onEditorInput);O=getClientPos(g);k.style.left=O.x+"px";k.style.top=O.y+g.offsetHeight+1+"px";k.style.display=
"block";c.setColor(g.value)};this.onEditorInput=function(O){0==N&&c.setColor(g.value);N=!1};var F=function(){(function(){setTimeout(function(){var O=a.document.createEvent("HTMLEvents");O.initEvent("input",!0,!0);N=!0;g.dispatchEvent(O)},10)})()};this.setColor=function(O){p=O;xColorPicker.setEditorColor(g,p);v=!0;c.draw()};var M=function(O,K,Z){O<Z.left&&(O=Z.left);O>=Z.left+Z.width&&(O=Z.left+Z.width-1);K<Z.top&&(K=Z.top);K>=Z.top+Z.height&&(K=Z.top+Z.height-1);return{x:O,y:K}};this.onKeyDown=function(O){if((27==
O.keyCode||9==O.keyCode)&&"none"!=k.style.display)return k.style.display="none",!0};this.onMouseDown=function(O){"none"!=k.style.display&&(O.srcElement!=q&&O.srcElement!=g?k.style.display="none":A?(A=!1,k.style.display="none",g.focus()):(v=!1,O.offsetX>=C.left-8&&O.offsetX<=C.left+C.width+8?(G=M(O.offsetX,O.offsetY,C),L=0):O.offsetX>=U.left-8&&O.offsetX<=U.left+U.width+8?(G=M(O.offsetX,O.offsetY,U),L=1):O.offsetX<=J.left+J.width+2&&(B=M(O.offsetX,O.offsetY,J),ba=!0),c.draw(),F()))};this.onMouseMove=
function(O){1==O.buttons?(1==ba?B=M(O.offsetX,O.offsetY,J):0==L?G=M(O.offsetX,O.offsetY,C):1==L&&(G=M(O.offsetX,O.offsetY,U)),c.draw(),F()):(O.offsetX>=r&&O.offsetX<=r+z&&O.offsetY>=u&&O.offsetY<=u+H?1!=A&&(A=!0,c.draw()):1==A&&(A=!1,c.draw()),ba=!1)};this.draw=function(){var O=q.parentElement;if(!(0>=O.offsetWidth||0>=O.offsetHeight)){null==f&&(f=q.getContext("2d"));var K=getPixelRatio(f);q.width=O.offsetWidth*K;q.height=O.offsetHeight*K;q.style.left=0;q.style.top=0;q.style.width=O.offsetWidth+"px";
q.style.height=O.offsetHeight+"px";1<K&&f.setTransform(K,0,0,K,0,0);f.translate(.5,.5);K=O.offsetWidth;O=O.offsetHeight-24-12;r=K-20;H=z=u=8;C={left:K-36,top:24,width:24,height:O};U={left:C.left-30,top:24,width:24,height:C.height};J={left:12,top:U.top,width:U.left-20,height:U.height};f.beginPath();f.strokeStyle="#888";f.strokeRect(12,24,J.width,O);f.stroke();f.closePath();if(v){L=-1;var Z=ia(p);K=T(Z.r,Z.g,Z.b);O=Y(K.h,100,100);var pa=aa(O.r,O.g,O.b);if(0==Math.round(K.h)%30&&0==Math.round(K.s)%20&&
0==Math.round(K.v)%20)for(O=0;O<V.length;O++)if(pa===V[O]){L=0;G.x=C.left;G.y=C.top+O*C.height/V.length+C.height/V.length/2;B.x=J.left+(J.width-K.s/100*J.width);B.y=J.top+(J.height-K.v/100*J.height);break}-1==L&&(L=1,G.x=U.left,G.y=U.top+K.h/360*U.height,B.x=J.left+(J.width-K.s/100*J.width),B.y=J.top+(J.height-K.v/100*J.height))}A?(f.beginPath(),f.lineWidth=1,f.fillStyle="#f00",f.strokeStyle="#f00",f.arc(r+z/2,u+H/2,1*z,0,2*Math.PI),f.closePath(),f.fill(),f.stroke(),f.strokeStyle="#fff"):f.strokeStyle=
p;f.beginPath();f.lineWidth=2;f.moveTo(r,u);f.lineTo(r+z,u+H);f.moveTo(r,u+H);f.lineTo(r+z,u);f.closePath();f.stroke();pa=C.height/V.length;for(O=0;O<V.length;O++)f.beginPath(),f.fillStyle=V[O],f.fillRect(C.left,C.top+O*pa,C.width,pa),f.closePath();f.beginPath();K=f.createLinearGradient(U.left,U.top,U.left,U.top+U.height);for(O=0;O<E.length;O++)K.addColorStop(O/(E.length-1),E[O]);f.fillStyle=K;f.fillRect(U.left,U.top,U.width,U.height);f.closePath();void 0==G.x&&(G.x=C.left,G.y=C.top);if(0==L)K=C.left,
O=Math.round((G.y-C.top)/C.height*(V.length-1)),pa=V[O];else{K=U.left;pa=U.height/(E.length-1);O=Math.floor((G.y-U.top)/pa);O>=E.length-1&&(O=E.length-2);var oa=(G.y-(U.top+O*pa))/pa;var Aa=X(E[O],E[O+1],0,oa,0);var ta=X(E[O],E[O+1],1,oa,0);oa=X(E[O],E[O+1],2,oa,0);pa=aa(Aa,ta,oa)}f.beginPath();f.strokeStyle="#000";f.lineWidth=2;f.rect(K-3,G.y-2,U.width+6,6);f.stroke();f.closePath();f.beginPath();f.strokeStyle="#fff";f.lineWidth=1;f.rect(K-2,G.y-1,U.width+4,4);f.stroke();f.closePath();void 0==B.x&&
(B.x=J.left,B.y=J.top);if(0==L)for(Z=ia(pa),K=T(Z.r,Z.g,Z.b),O=0;6>O;O++)for(Aa=0;6>Aa;Aa++){Z=Y(K.h,20*(5-O),20*(5-Aa));f.beginPath();f.fillStyle=aa(Z.r,Z.g,Z.b);ta=J.left+O*J.width/6;oa=J.top+Aa*J.height/6;Z=J.width/6;var Q=J.height/6;f.fillRect(ta,oa,Z,Q);B.x>=ta&&B.x<ta+Z&&B.y>=oa&&B.y<oa+Q&&(pa=f.fillStyle);f.closePath()}else f.beginPath(),f.fillStyle=pa,f.fillRect(J.left,J.top,J.width,J.height),f.closePath(),O=f.createLinearGradient(J.left,J.top,J.left+J.width,J.top),O.addColorStop(0,"rgba(255, 255, 255, 0)"),
O.addColorStop(1,"rgba(255, 255, 255, 1)"),f.fillStyle=O,f.fillRect(J.left,J.top,J.width,J.height),f.closePath(),O=f.createLinearGradient(J.left,J.top,J.left,J.top+J.height),O.addColorStop(0,"rgba(0, 0, 0, 0)"),O.addColorStop(1,"rgba(0, 0, 0, 1)"),f.fillStyle=O,f.fillRect(J.left,J.top,J.width,J.height),f.closePath(),K=T(Aa,ta,oa),K.s=(J.width-(B.x-J.left))/J.width*100,K.v=(J.height-(B.y-J.top))/J.height*100,Z=Y(K.h,K.s,K.v),pa=aa(Z.r,Z.g,Z.b);f.beginPath();f.lineWidth=3;f.strokeStyle="#fff";f.moveTo(B.x-
8,B.y);f.lineTo(B.x+8,B.y);f.moveTo(B.x,B.y-8);f.lineTo(B.x,B.y+8);f.stroke();f.closePath();f.beginPath();f.lineWidth=1;f.strokeStyle="#000";f.moveTo(B.x-7,B.y);f.lineTo(B.x+7,B.y);f.moveTo(B.x,B.y-7);f.lineTo(B.x,B.y+7);f.stroke();f.closePath();0==v&&(g.value=pa.slice(1),xColorPicker.setEditorColor(g,pa))}};var X=function(O,K,Z,pa,oa){O=fa(O,Z);K=fa(K,Z);pa=O+Math.round((K-O)*pa);return pa+=Math.round(255*oa)},aa=function(O,K,Z){O=16>O?"0"+O.toString(16):O.toString(16);K=16>K?"0"+K.toString(16):
K.toString(16);Z=16>Z?"0"+Z.toString(16):Z.toString(16);return"#"+O+K+Z},ia=function(O){var K=fa(O,0),Z=fa(O,1);O=fa(O,2);return{r:K,g:Z,b:O}},fa=function(O,K){O="#"==O[0]?O.slice(1):O;6<=O.length?(O=O.slice(2*K,2*K+2),K=parseInt(O,16)):(O=O.slice(K,K+1),K=""==O||void 0==O?0:parseInt(O+O,16));isNaN(K)&&(K=0);return K},T=function(O,K,Z){O/=255;K/=255;Z/=255;var pa=Math.min(Math.min(O,K),Z),oa=Math.max(Math.max(O,K),Z),Aa=oa-pa;if(0===Aa)return{h:null,s:0,v:100*oa};O=O===pa?3+(Z-K)/Aa:K===pa?5+(O-Z)/
Aa:1+(K-O)/Aa;return{h:60*(6===O?0:O),s:Aa/oa*100,v:100*oa}},Y=function(O,K,Z){Z=Z/100*255;if(null===O)return{r:Z,g:Z,b:Z};O/=60;K/=100;var pa=Math.floor(O),oa=Math.round(Z*(1-K));O=Math.round(Z*(1-K*(pa%2?O-pa:1-(O-pa))));Z=Math.round(Z);switch(pa){case 6:case 0:return{r:Z,g:O,b:oa};case 1:return{r:O,g:Z,b:oa};case 2:return{r:oa,g:Z,b:O};case 3:return{r:oa,g:O,b:Z};case 4:return{r:O,g:oa,b:Z};case 5:return{r:Z,g:oa,b:O}}};xColorPicker.setEditorColor=function(O,K){var Z=ia(K);K=aa(Z.r,Z.g,Z.b);O.style.backgroundColor=
K;O.style.color=128>Z.r&&128>Z.g?"#fff":"#000"};xColorPicker.installColorPicker=function(){var O=a.document.getElementsByClassName("xColorPicker");if(O)for(var K=0;K<O.length;K++)xColorPicker.setEditorColor(O[K],O[K].value);if((K=globalPage.getActiveFrame())&&(K=K.getScheme())&&K.xColorPicker&&K.xColorPicker.normal)for(O=K.xColorPicker.normal.style.split(";"),K=0;K<O.length;K++){var Z=O[K].split(":");k.style[Z[0]]=Z[1]}};(function(){for(var O=0;360>O;O+=30){var K=Y(O,100,100);V[V.length]=aa(K.r,K.g,
K.b)}O="position:absolute;width:256px;height:160px;background-color:#fff;box-shadow:0px 0px 8px #333;border:none;display:none;z-index:"+xZIndex.picker;k=a.document.createElement("div");K=a.document.createAttribute("style");K.value=O;k.setAttributeNode(K);q=a.document.createElement("canvas");K=a.document.createAttribute("style");K.value="background-color:transparent;border:none;";q.setAttributeNode(K);q.addEventListener("mousedown",c.onMouseDown);q.addEventListener("mousemove",c.onMouseMove);k.appendChild(q);
b.appendChild(k)})()};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function _createClass(a,b,c){b&&_defineProperties(a.prototype,b);c&&_defineProperties(a,c);return a}
var DomCalendar=function(){function a(b){_classCallCheck(this,a);this.attributes={parent:"",chooseMapData:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[],DAYS:[],DATES:[],STYLES:{}};this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null,bodyMask:null,bodyParent:null};
this.data={minYear:0,maxYear:0,year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]};this.initialize(b).render().addEventListeners();return this}_createClass(a,[{key:"initialize",value:function(b){var c=a.getYear().value;this.set(a.defaults).set(b);var g=this.get("time");var k=this.get("pickMode");b=a.getMonth(g);var q=b.text;this.setYear(g).setMonth(g).setDate(g)._setYears(g);switch(k){case "multiple":this.data.picked.push(this.getDate().text);break;case "range":k=q+"-1";
b=q+"-"+this.get("DATES")[b.value-1];this.data.picked=[k,b];break;case "week":b=a.getWeekRanges(g),k=b[0],b=b[b.length-1],this.data.picked=[k,b]}this.data.minYear=c-100;this.data.maxYear=c+100;this._createElements();return this}},{key:"render",value:function(){var b=this.getEls(),c=b.wrap,g=b.header,k=b.switcher,q=b.body,f=b.bodyMask,p=b.bodyParent,v=b.footer,A=document.createDocumentFragment();this._renderTitle();g.appendChild(b.title);this.get("hasSwitcher")&&(k.appendChild(b.prev),k.appendChild(b.next),
g.appendChild(k));this._renderDays();q.appendChild(b.week);this._renderDates();q.appendChild(b.dates);this._renderMonths();q.appendChild(b.months);this._renderYears();q.appendChild(b.years);this.get("hasFooter")&&(this._renderFooter(),this.get("hasToday")&&v.appendChild(b.today),this.get("hasFinishBtn")&&v.appendChild(b.finishBtns));p.appendChild(f);p.appendChild(g);p.appendChild(q);c.appendChild(p);this.get("hasFooter")&&c.appendChild(v);A.appendChild(c);b.parent.appendChild(A);return this}},{key:"addEventListeners",
value:function(){var b=this.get("STYLES"),c="."+b.TITLE,g="."+b.PREV,k="."+b.NEXT,q="."+b.DATE,f="."+b.MONTH,p="."+b.YEAR,v="."+b.TODAY;b="."+b.FINISH_BUTTON;var A=a.Delegate,r=this.getEls().wrap;A.on(r,c,"click",this._titleClick,this);this.get("hasSwitcher")&&(A.on(r,g,"click",this._prevClick,this),A.on(r,k,"click",this._nextClick,this));A.on(r,q,"click",this._dateClick,this);A.on(r,f,"click",this._monthClick,this);A.on(r,p,"click",this._yearClick,this);if(this.get("hasClock"))A.on(r,v,"click",this._todayClick,
this);A.on(r,b,"click",this._finishClick,this);return this}},{key:"reload",value:function(b){this.destroy().initialize(b).render().addEventListeners();return this}},{key:"destroy",value:function(){this.removeEventListeners().hide().remove().reset();return this}},{key:"removeEventListeners",value:function(){var b=a.Delegate,c=this.getEls().wrap;b.off(c,"click",this._titleClick);this.get("hasSwitcher")&&(b.off(c,"click",this._prevClick),b.off(c,"click",this._nextClick));b.off(c,"click",this._dateClick);
b.off(c,"click",this._monthClick);b.off(c,"click",this._yearClick);this.get("hasClock")&&b.off(c,"click",this._todayClick);b.off(c,"click",this._finishClick);return this}},{key:"remove",value:function(){var b=this.getEls();b.parent.removeChild(b.wrap);return this}},{key:"reset",value:function(){this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,MONTHS:[],DAYS:[],DATES:[],STYLES:{}};this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,
prev:null,next:null,bodyMask:null,bodyParent:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null,year:null,month:null,date:null};this.data={minYear:0,maxYear:0,years:{start:0,end:0},year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]};return this}},{key:"get",value:function(b){return this.attributes[b]}},{key:"set",value:function(){Object.assign(this.attributes,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return this}},
{key:"getEls",value:function(){return this.elements}},{key:"getYear",value:function(){return this.data.year}},{key:"setYear",value:function(b){this.data.year=a.getYear(b).value;return this}},{key:"getMonth",value:function(){return this.data.month}},{key:"setMonth",value:function(b){this.data.month=a.getMonth(b).value;return this}},{key:"getDate",value:function(){return this.data.date}},{key:"setDate",value:function(b){this.data.date=a.getDate(b);return this}},{key:"getYears",value:function(){return this.data.years}},
{key:"getPicked",value:function(){return this.data.picked}},{key:"update",value:function(){this.updateViewMode(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0).updateView();return this}},{key:"updateViewMode",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;2<b?b=2:0>b&&(b=0);this.set({viewMode:b});return this}},{key:"updateView",value:function(){var b=this.get("STYLES").HIDDEN,c=a.DOM,g=c.addClass;c=c.removeClass;var k=this.getEls(),q=k.week,f=k.dates,p=k.months;
k=k.years;this._renderTitle();switch(this.get("viewMode")){case 0:g(p,b);g(k,b);c(q,b);c(f,b);this._repaintDates();break;case 1:g(q,b);g(f,b);g(k,b);c(p,b);this._repaintMonths();break;case 2:g(q,b),g(f,b),g(p,b),c(k,b),this._repaintYears()}return this}},{key:"prev",value:function(){var b=this.getYears().start,c=this.getYear(),g=this.getMonth(),k=this.data.minYear;switch(this.get("viewMode")){case 0:--g;1>g&&(g=12,--c,c<k&&(c=k));b=c+"-"+g+"-1";this.setYear(b).setMonth(b);break;case 1:--c;c<k&&(c=
k);this.setYear(c+"-1-1");break;case 2:b-=10,b<k&&(b=k+9),this._setYears(b.toString())}this.updateView();return this}},{key:"next",value:function(){var b=this.getYears().start,c=this.getYear(),g=this.getMonth(),k=this.data.maxYear;switch(this.get("viewMode")){case 0:g+=1;12<g&&(g=1,c+=1,c>k&&(c=k));b=c+"-"+g+"-1";this.setYear(b).setMonth(b);break;case 1:c+=1;c>k&&(c=k);this.setYear(c+"-1-1");break;case 2:b+=10,b>k&&(b=k-9),this._setYears(b.toString())}this.updateView();return this}},{key:"pickDate",
value:function(b){var c=this.get("STYLES").PICKED,g=a.DOM,k=g.hasClass,q=g.addClass,f=g.removeClass;g=a.Utils.isFunction;var p=this.get("pickMode"),v=this.getEls(),A=b.getAttribute("data-date"),r=this.get("onDatePick");if(k(b,c))switch(p){case "single":case "week":return!1;case "multiple":f(b,c);this._removePicked(A);k=this.getPicked();this.setDate(k[k.length-1]);g(r)&&r(k,b,this);break;case "range":this.data.picked=[],this.data.picked.push(A),this.setDate(A),v.date=b,this._updateDateRanges(),g(r)&&
r(this.getPicked(),b,this)}else switch(this.setYear(A).setMonth(A),p){case "single":(k=v.date)&&f(k,c);q(b,c);v.date=b;this.setDate(A);this.set({currentTime:A});g(r)&&r(A,b,this);break;case "multiple":this.data.picked.push(A);this.data.picked.sort();k=this.getPicked();this.setDate(k[k.length-1]);q(b,c);this.set({currentTime:k});g(r)&&r(this.getPicked(),b,this);break;case "range":switch(this.data.picked.length){case 0:case 1:this.data.picked.push(A);2==this.data.picked.length&&this.data.picked.sort();
k=this.getPicked();this.setDate(k[k.length-1]);v.date=b;this._updateDateRanges();this.set({currentTime:k});g(r)&&r(k,b,this);break;case 2:this.data.picked=[],this.data.picked.push(A),v.date=b,this._updateDateRanges()}break;case "week":c=a.getWeekRanges(A),this.data.picked=[c[0],c[c.length-1]],this.setDate(c[c.length-1]),v.date=b,this._updateWeekRanges(),this.set({currentTime:this.getPicked()}),g(r)&&r(this.getPicked(),b,this)}return this}},{key:"pickMonth",value:function(b){var c=this.get("STYLES").PICKED,
g=a.DOM,k=this.getEls(),q=k.month,f=b.getAttribute("data-month"),p=this.get("onMonthPick");g.hasClass(b,c)?this.update():(q&&g.removeClass(q,c),g.addClass(b,c),k.month=b,this.setYear(f).setMonth(f)._setYears(f).update());a.Utils.isFunction(p)&&p(f,b,this);return this}},{key:"pickYear",value:function(b){var c=this.get("STYLES").PICKED,g=a.DOM,k=this.getEls(),q=k.year,f=b.getAttribute("data-year"),p=this.get("onYearPick");g.hasClass(b,c)?this.setYear(f).update(1):(q&&g.removeClass(q,c),g.addClass(b,
c),k.year=b,this.setYear(f)._setYears(f).update(1));a.Utils.isFunction(p)&&p(f,b,this);return this}},{key:"pickToday",value:function(){var b=a.getToday().value,c=this.get("onTodayPick");this.setYear(b).setMonth(b).setDate(b)._setYears(b).update();a.Utils.isFunction(c)&&c(b,this.getEls().dates.querySelector("[data-date="+b+"]"),this);return this}},{key:"hide",value:function(){var b=this.get("STYLES").HIDDEN,c=this.getEls().wrap;a.DOM.addClass(c,b);return this}},{key:"show",value:function(){var b=this.get("STYLES").HIDDEN,
c=this.getEls().wrap;a.DOM.removeClass(c,b);return this}},{key:"toggle",value:function(){var b=this.get("STYLES").HIDDEN,c=this.getEls().wrap;a.DOM.hasClass(c,b)?this.show():this.hide();return this}},{key:"setChooseMap",value:function(b){this.set({chooseMapData:b});return this}},{key:"setPickMode",value:function(b){this.set({pickMode:b});return this}},{key:"setPickedData",value:function(b){this.data.picked=b;this.set({currentTime:b});return this}},{key:"_setYears",value:function(b){this.data.years=
a.getYears(b);return this}},{key:"_removePicked",value:function(b){var c=this.getPicked();b=c.indexOf(b);-1<b&&c.splice(b,1);return this}},{key:"_createElements",value:function(){var b=this.get("STYLES"),c=b.WRAP,g=b.WRAP_WITHOUT_FOOTER,k=b.HEADER,q=b.TITLE,f=b.SWITCHER,p=b.PREV,v=b.ICON_PREV,A=b.NEXT,r=b.ICON_NEXT,u=b.BODY,z=b.BODY_MASK,H=b.WEEK,C=b.DATES,U=b.MONTHS,J=b.YEARS,G=b.FOOTER,B=b.FOOTER_DATE,L=b.TODAY,ba=b.FOOTER_TIME,N=b.FINISH_BUTTON,E=b.TEXT,V=b.HIDDEN;b=b.BD_PAERENT;var F=this.get("hasFooter"),
M=this.getEls(),X=a.DOM.createElement;switch(this.get("viewMode")){case 0:U+=" "+V;J+=" "+V;break;case 1:H+=" "+V;C+=" "+V;J+=" "+V;break;case 2:H+=" "+V,C+=" "+V,U+=" "+V}F||(c+=" "+g);M.parent=document.getElementById(this.get("parent"));M.wrap=X("div",{id:a.Utils.guid("domcalendar"),className:c});M.header=X("div",{className:k});M.title=X("h4",{className:q},[X("span",{className:E})]);this.get("hasSwitcher")&&(M.switcher=X("div",{className:f}),M.prev=X("div",{className:p},[X("span",{className:E},
[X("i",{className:v})])]),M.next=X("div",{className:A},[X("span",{className:E},[X("i",{className:r})])]));M.bodyMask=X("div",{className:z});M.bodyParent=X("div",{className:b});M.body=X("div",{className:u});M.week=X("div",{className:H});M.dates=X("div",{className:C});M.months=X("div",{className:U});M.years=X("div",{className:J});F&&(M.footer=X("div",{className:G}),M.today=X("div",{className:B},[X("p",{className:L},[X("span",{className:E})])]),M.finishBtns=X("div",{className:ba},[X("p",{className:N},
[X("span",{className:E})])]));return this}},{key:"nextAnimation",value:function(){var b=a.DOM,c=this.get("STYLES").BD_NEXT_ANIMATION,g=this.getEls().bodyMask,k=this.getEls().header,q=this.getEls().body,f='<div class="next-mask"><div class="cal-hd">'+k.innerHTML+'</div><div class="cal-bd">'+q.innerHTML+"</div></div>";g.innerHTML+=f;b.addClass(k,c);b.addClass(q,c);setTimeout(function(){g.innerHTML=g.innerHTML.replace(f,"");b.removeClass(k,c);b.removeClass(q,c)},300)}},{key:"prevAnimation",value:function(){var b=
a.DOM,c=this.get("STYLES").BD_PREV_ANIMATION,g=this.getEls().bodyMask,k=this.getEls().header,q=this.getEls().body,f='<div class="prev-mask"><div class="cal-hd">'+k.innerHTML+'</div><div class="cal-bd">'+q.innerHTML+"</div></div>";g.innerHTML+=f;b.addClass(k,c);b.addClass(q,c);setTimeout(function(){g.innerHTML=g.innerHTML.replace(f,"");b.removeClass(k,c);b.removeClass(q,c)},300)}},{key:"_renderTitle",value:function(){var b=this.getEls().title.querySelector("."+this.get("STYLES").TEXT),c=this.getYears(),
g=this.getYear(),k="";switch(this.get("viewMode")){case 0:k=a.getMonth(g+"-"+this.getMonth()+"-1").fullText;break;case 1:k=a.getYear(g+"-1-1").fullText;break;case 2:k=c.start+" - "+c.end}b.innerHTML=k;return this}},{key:"_renderDays",value:function(){var b=this.get("STYLES"),c=b.DAY,g=b.WEEKEND,k=b.TEXT,q=this.get("DAYS"),f=a.DOM.createElement,p=document.createDocumentFragment();q.forEach(function(v,A){p.appendChild(f("div",{className:0===A||A===q.length-1?c+" "+g:c},[f("span",{className:k},[v])]))});
this.getEls().week.appendChild(p);return this}},{key:"_renderDates",value:function(){var b=this.get("DATES"),c=a.isLeapYear,g=document.createDocumentFragment(),k=this.getYear(),q=this.getMonth(),f=b[q-1],p=a.getDay(k+"-"+q+"-1").value,v=0>q-2?k-1:k,A=0>q-2?12:q-1;b=b[A-1];var r=12===q?k+1:k,u=12===q?1:q+1;c(k)&&2===A?b+=1:c(k)&&2===q&&(f+=1);c=42-(p+f);0!==p&&g.appendChild(this._getDatesFragment({year:v,month:A,start:b-(p-1),end:b,isPrev:!0,isNext:!1}));g.appendChild(this._getDatesFragment({year:k,
month:q,start:1,end:f,isPrev:!1,isNext:!1}));0<c&&g.appendChild(this._getDatesFragment({year:r,month:u,start:1,end:c,isPrev:!1,isNext:!0}));this.getEls().dates.appendChild(g);return this}},{key:"_repaintDates",value:function(){var b=this.get("STYLES").HIDDEN,c=a.DOM,g=this.getEls().dates;c.addClass(g,b);g.innerHTML="";c.removeClass(g,b);this._renderDates();return this}},{key:"_getDatesFragment",value:function(b){var c=this,g=b.year,k=b.month,q=b.start,f=b.end,p=b.isPrev,v=b.isNext;b=this.get("STYLES");
var A=b.DATE,r=b.DATE_PREV,u=b.DATE_NEXT,z=b.CURRENT,H=b.PICKED,C=b.PICKED_RANGE,U=b.WEEKEND,J=b.TEXT,G=a.DOM.createElement,B=a.isDatesEqual,L=document.createDocumentFragment(),ba=this.getEls(),N=q,E=this.get("pickMode"),V=this.getPicked();for(q=function(){var F,M;10>k?F="0"+k:F=k;10>N?M="0"+N:M=N;var X=g+"-"+F+"-"+M;M=a.isToday(X);var aa=a.getDay(X),ia=[G("span",{className:J},[N])],fa="";F=void 0;F=G("div",{"data-date":X},ia);fa+=A;p?fa+=" "+r:v&&(fa+=" "+u);M&&(fa+=" "+z);if(0===aa.value||6===aa.value)fa+=
" "+U;switch(E){case "single":M=c.getDate().text;B(X,M)&&(fa+=" "+H,ba.date=F);break;case "multiple":V.forEach(function(Y){B(X,Y)&&(fa+=" "+H)});break;case "range":case "week":var T=[];2===V.length?(T=a.getRanges(V[0],V[1]),T.forEach(function(Y,O){if(!B(X,Y))return!1;if(0!==O&&O!==T.length-1)fa+=" "+H,fa+=" "+C;else if(0===O||O===T.length-1)fa+=" "+H})):1===V.length&&(fa+=" "+H)}F.className=fa;L.appendChild(F)};N<=f;N+=1)q();return L}},{key:"_updateDateRanges",value:function(){var b=this.get("STYLES"),
c=b.PICKED,g=b.PICKED_RANGE;b=a.DOM;var k=b.hasClass,q=b.removeClass,f=b.addClass,p=this.getEls();b=this.elements.date;var v=p.dates;p=v.querySelectorAll("."+c);switch(this.data.picked.length){case 1:p.forEach(function(r){q(r,c);k(r,g)&&q(r,g)});f(b,c);break;case 2:var A=a.getRanges(this.data.picked[0],this.data.picked[1]);A.forEach(function(r,u){r=v.querySelector('[data-date="'+r+'"]');0<u&&u<A.length-1&&(f(r,c),f(r,g))});f(b,c)}return this}},{key:"_updateWeekRanges",value:function(){var b=this.get("STYLES"),
c=b.PICKED,g=b.PICKED_RANGE;b=a.DOM;var k=b.removeClass,q=b.addClass,f=this.getEls().dates;b=f.querySelectorAll("."+c);var p=this.getPicked(),v=a.getWeekRanges(p[0]);b.forEach(function(A){k(A,g);k(A,c)});v.forEach(function(A,r){A=f.querySelector('[data-date="'+A+'"]');0<r&&r<v.length-1?(q(A,c),q(A,g)):0!==r&&r!==v.length-1||q(A,c)});return this}},{key:"_renderMonths",value:function(){var b=this,c=this.get("STYLES"),g=c.CURRENT,k=c.PICKED,q=c.MONTH,f=c.MONTH_PREV,p=c.MONTH_NEXT,v=c.TEXT;c=this.get("MONTHS");
var A=a.DOM.createElement,r=document.createDocumentFragment(),u=this.getEls(),z=this.getYear(),H=a.getToday();c.forEach(function(C,U){var J=b.getDate(),G=q;if(2>U){G+=" "+f;z-1===J.year&&C===J.month&&(G+=" "+k);var B=A("div",{className:G,"data-month":z-1+"-"+C+"-1"},[A("span",{className:v},[C])])}else 2<=U&&13>=U?(z===H.year&&C===H.month&&(G+=" "+g),z===J.year&&C===J.month&&(G+=" "+k),B=A("div",{className:G,"data-month":z+"-"+C+"-1"},[A("span",{className:v},[z+"-"+C])])):13<U&&15>=U&&(G+=" "+p,z+
1===J.year&&C===J.month&&(G+=" "+k),B=A("div",{className:G,"data-month":z+1+"-"+C+"-1"},[A("span",{className:v},[C])]));r.appendChild(B)});u.months.appendChild(r);return this}},{key:"_repaintMonths",value:function(){var b=this.get("STYLES").HIDDEN,c=a.DOM,g=this.getEls().months;c.addClass(g,b);g.innerHTML="";c.removeClass(g,b);this._renderMonths();return this}},{key:"_renderYears",value:function(){var b=this.getYears(),c=b.start;b=b.end;var g=c-3,k=c-1,q=b+1,f=b+3,p=document.createDocumentFragment();
p.appendChild(this._getYearsFragment({start:g,end:k,isPrev:!0,isNext:!1}));p.appendChild(this._getYearsFragment({start:c,end:b,isPrev:!1,isNext:!1}));p.appendChild(this._getYearsFragment({start:q,end:f,isPrev:!1,isNext:!0}));this.getEls().years.appendChild(p);return this}},{key:"_repaintYears",value:function(){var b=this.get("STYLES").HIDDEN,c=a.DOM,g=this.getEls().years;c.addClass(g,b);g.innerHTML="";c.removeClass(g,b);this._renderYears();return this}},{key:"_getYearsFragment",value:function(b){var c=
b.start,g=b.end,k=b.isPrev;b=b.isNext;var q=this.get("STYLES"),f=q.YEAR,p=q.YEAR_PREV,v=q.YEAR_NEXT,A=q.CURRENT,r=q.PICKED,u=q.DISABLED;q=q.TEXT;for(var z=a.DOM.createElement,H=document.createDocumentFragment(),C=this.getEls(),U=this.data.minYear,J=this.data.maxYear;c<=g;c+=1){var G=this.getDate(),B=c===a.getToday().year;G=c===G.year;var L=f,ba=z("div",{"data-year":c+"-1-1"},[z("span",{className:q},[c])]);k?L+=" "+p:b&&(L+=" "+v);B&&(L+=" "+A);G&&(L+=" "+r,C.year=ba);if(c<U||c>J)L+=" "+u;ba.className=
L;H.appendChild(ba)}return H}},{key:"_renderFooter",value:function(){var b=this.get("STYLES").TEXT,c=this.getEls(),g=c.today.querySelector("."+b),k=a.getToday();g.innerHTML="&nbsp;&nbsp;&nbsp;Today\uff1a"+k.text;a.DOM.setAttribute(g,"data-date",k.value);c.finishBtns.querySelector("."+b).innerHTML="OK";return this}},{key:"calendarDateFormat",value:function(b){b||(b=this.getDate().text);var c=b.substring(0,4)+"-",g=b.substring(5,7);-1!=g.indexOf("-")&&(g="0"+g,g=g.substring(0,g.length-1));b=b.substring(b.length-
2,b.length);-1!=b.indexOf("-")&&(b=b.substring(b.length-1,b.length),b="0"+b);return c+(g+"-"+b)}},{key:"_finishClick",value:function(b){var c=a.Utils.isFunction,g=this.get("onDatePick");b=b.delegateTarget;var k=this.get("chooseMapData"),q=this.get("currentTime");q||(q=this.getDate().text);if(c(g))if(this.get("linkageFinishBtn")&&null!=this.get("linkageElement")){c=[];for(var f=this.get("linkageElement"),p=0;p<f.length;p++){var v=f[p],A=v.get("currentTime");A=v.calendarDateFormat(A);c.push(A)}q=this.calendarDateFormat(q);
c.push(q);g(c,b,this,!0,k)}else"string"==typeof q?(q=this.calendarDateFormat(q),g(q,b,this,!0,k)):g(q,b,this,!0,k)}},{key:"_titleClick",value:function(){var b=this.get("viewMode");b+=1;2<b&&(b=2);this.update(b);return this}},{key:"_prevClick",value:function(){this.prev();return this}},{key:"_nextClick",value:function(){this.next();return this}},{key:"_dateClick",value:function(b){b=b.delegateTarget;b.getAttribute("data-date");this.pickDate(b);this.getPicked();return this}},{key:"_monthClick",value:function(b){b=
b.delegateTarget;b.getAttribute("data-month");this.pickMonth(b);return this}},{key:"_yearClick",value:function(b){b=b.delegateTarget;b.getAttribute("data-year");this.pickYear(b);return this}},{key:"_todayClick",value:function(){var b=this.getEls(),c=a.getToday().text;this.pickToday();c=this.calendarDateFormat(c);this.set({currentTime:c});this.pickDate(b.dates.querySelector('[data-date="'+c+'"]'));if(1==this.get("linkageDate")&&null!=this.get("linkageElement"))for(var g=this.get("linkageElement"),
k=0;k<g.length;k++){var q=g[k];q.pickToday();c=q.calendarDateFormat(c);q.set({currentTime:c});q.pickDate(b.dates.querySelector('[data-date="'+c+'"]'))}return this}}],[{key:"getYear",value:function(b){b=(b?new Date(a.toAllSupported(b)):new Date).getFullYear();return{value:b,text:b.toString(),fullText:b+""}}},{key:"getMonth",value:function(b){var c=b?new Date(a.toAllSupported(b)):new Date;b=a.getYear(b);c=c.getMonth();c+=1;return{value:c,text:b.text+"-"+c,fullText:b.fullText+"-"+c}}},{key:"getDate",
value:function(b){var c=b?new Date(a.toAllSupported(b)):new Date,g=a.getYear(b),k=a.getMonth(b);c=c.getDate();b=a.getDay(b);return{year:g.value,month:k.value,date:c,day:b.value,text:g.value+"-"+k.value+"-"+c,fullText:k.fullText+c+"\u65e5 "+b.fullText}}},{key:"getDay",value:function(b){b=(b?new Date(a.toAllSupported(b)):new Date).getDay();var c=a.defaults.DAYS[b];return{value:b,text:c,fullText:"\u661f\u671f"+c}}},{key:"getToday",value:function(){return a.getDate()}},{key:"getYears",value:function(b){b=
a.getYear(b).value;var c=b.toString().split(""),g=parseInt(c[c.length-1],10);0===g?(c=b,b+=9):9===g?c=b-9:(c=b-g,b+=9-g);return{start:c,end:b}}},{key:"getWeekRanges",value:function(b){var c=a.defaults.DATES,g=a.isLeapYear,k=a.getDay(b).value,q=b.split("-");b=parseInt(q[0],10);var f=parseInt(q[1],10),p=parseInt(q[2],10);q=c[f-1];var v=b,A=f,r=p-k,u=b,z=f;k=p+(6-k);p=0;g(b)&&2===f&&(q+=1);1>r&&(p=f-2,--A,0>p?(--v,A=12,r=c[11]+r):r=c[p]+r);k>q&&(z+=1,k-=q,11<p&&(u+=1,z=1));return a.getRanges(v+"-"+A+
"-"+r,u+"-"+z+"-"+k)}},{key:"calendarDateFormat",value:function(b){b||(b=this.getDate().text);var c=b.substring(0,4)+"-",g=b.substring(5,7);-1!=g.indexOf("-")&&(g="0"+g,g=g.substring(0,g.length-1));b=b.substring(b.length-2,b.length);-1!=b.indexOf("-")&&(b=b.substring(b.length-1,b.length),b="0"+b);return c+(g+"-"+b)}},{key:"getRanges",value:function(b,c){var g=[];b=b.split("-");var k=c.split("-"),q=new Date;c=new Date;q.setUTCFullYear(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10));c.setUTCFullYear(parseInt(k[0],
10),parseInt(k[1],10)-1,parseInt(k[2],10));k=q.getTime();b=c.getTime();for(c=k;c<=b;c+=864E5)k=a.getDate(c).text,k=this.calendarDateFormat(k),g.push(k);return g}},{key:"isLeapYear",value:function(b){return(0===b%4||0===b%400)&&0!==b%100}},{key:"isToday",value:function(b){return a.isDatesEqual(b)}},{key:"isDatesEqual",value:function(b,c){var g=a.getDate;return a.isEqual(g(b).text,g(c).text)}},{key:"isEqual",value:function(b,c){var g=a.toAllSupported;return(new Date(g(b))).getTime()===(new Date(g(c))).getTime()}},
{key:"toAllSupported",value:function(b){var c=a.Utils,g=[];if(c.isNumber(b))return b;if(c.isString(b))return b.indexOf("-")?g=b.split("-"):b.indexOf("/")&&(g=b.split("/")),1===g.length?(g.push("1"),g.push("1")):2===g.length&&(4===g[0].length?g.push("1"):4===g[1].length&&g.unshift("1")),g.join("/")}}]);return a}();
DomCalendar.defaults={parent:"domcalendar",chooseMapData:"",currentTime:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasToday:!0,hasFinishBtn:!0,hasClock:!0,linkageDate:!1,linkageFinishBtn:!1,linkageElement:null,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2],DAYS:"Sun. Mon. Tues. Wed. Thur. Fri. Sat.".split(" "),DATES:[31,28,31,30,31,30,31,31,30,31,30,31],STYLES:{WRAP:"cal-md",WRAP_WITHOUT_FOOTER:"cal-md-without-footer",
HEADER:"cal-hd",TITLE:"cal-title",SWITCHER:"cal-switcher",PREV:"cal-prev",ICON_PREV:"icon-angle-up",NEXT:"cal-next",ICON_NEXT:"icon-angle-down",BODY:"cal-bd",BODY_MASK:"cal-bd-mask",WEEK:"cal-week",WEEKEND:"cal-weekend",DAY:"cal-day",DATES:"cal-dates",DATE:"cal-date",DATE_PREV:"cal-date-prev",DATE_NEXT:"cal-date-next",MONTHS:"cal-months",MONTH:"cal-month",MONTH_PREV:"cal-month-prev",MONTH_NEXT:"cal-month-next",YEARS:"cal-years",YEAR:"cal-year",YEAR_PREV:"cal-year-prev",YEAR_NEXT:"cal-year-next",FOOTER:"cal-ft",
FOOTER_DATE:"cal-ft-date",TODAY:"cal-today",FOOTER_TIME:"cal-ft-time",FINISH_BUTTON:"cal-button",TEXT:"cal-text",CURRENT:"cal-current",PICKED:"cal-picked",PICKED_RANGE:"cal-picked-range",PICKED_POINT:"cal-picked-point",DISABLED:"cal-disabled",HIDDEN:"cal-hidden",BD_NEXT_ANIMATION:"cal-bd-next",BD_PREV_ANIMATION:"cal-bd-prev",BD_PAERENT:"cal-bd-parent"}};
DomCalendar.Utils={uuid:0,isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.apply(a)},isFunction:function(a){return"function"===typeof a||"[object Function]"===Object.prototype.toString.apply(a)},isElement:function(a){return a&&a.nodeName&&a.tagName&&1===a.nodeType},guid:function(a){var b=DomCalendar.Utils;b.uuid+=1;return a?a+"-"+b.uuid:"guid-"+b.uuid},
trim:function(a){return a.replace(/^\s+/g,"").replace(/\s+$/g,"")},stripTags:function(a){return a.replace(/<\/?[^>]+(>|$)/g,"")}};
DomCalendar.DOM={createElement:function(a,b,c){var g=DomCalendar.Utils,k=document.createElement(a),q;for(q in b)b.hasOwnProperty(q)&&DomCalendar.DOM.setAttribute(k,q,b[q]);g.isArray(c)&&c.forEach(function(f){if(g.isElement(f))var p=f;else if(g.isString(f)||g.isNumber(f))f=g.isString(f)?g.trim(g.stripTags(f)):f.toString(),p=document.createTextNode(f);k.appendChild(p)});return k},setAttribute:function(a,b,c){var g=a.tagName.toLowerCase();switch(b){case "style":a.style.cssText=c;break;case "value":"input"===
g||"textarea"===g?a.value=c:a.setAttribute(b,c);break;case "className":a.className=c;break;default:a.setAttribute(b,c)}},hasClass:function(a,b){return(a=a.className)?a.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1},addClass:function(a,b){var c=a.className;if(DomCalendar.DOM.hasClass(a,b))return!1;c+=0<c.length?" "+b:b;a.className=c},removeClass:function(a,b){var c=a.className;if(!c||!DomCalendar.DOM.hasClass(a,b))return!1;c=DomCalendar.Utils.trim(c.replace(b,""));a.className=c}};
DomCalendar.Delegate={on:function(a,b,c,g,k,q,f){var p=DomCalendar.Delegate;if("mouseenter"===c||"mouseleave"===c)q=!0;g._delegateWrapper=g;a.addEventListener(c,function r(A){var u=p.getDelegateTarget(a,A.target,b);if(A.delegateTarget=u)!0===f&&p.off(a,c,r),g.call(k||a,A)},q||!1);return g},once:function(a,b,c,g,k,q){DomCalendar.Delegate.on(a,b,c,g,k,q,!0)},off:function(a,b,c,g){c._delegateWrapper&&(c=c._delegateWrapper,delete c._delegateWrapper);if("mouseenter"===b||"mouseleave"===b)g=!0;a.removeEventListener(b,
c,g||!1)},stop:function(a){var b=DomCalendar.Delegate;b.stopPropagation(a);b.preventDefault(a)},stopPropagation:function(a){var b=window.event;a.stopPropagation?a.stopPropagation():b.cancelBubble=!0},preventDefault:function(a){var b=window.event;a.preventDefault?a.preventDefault():b.returnValue=!1},getDelegateTarget:function(a,b,c){for(;b&&b!==a;){if(DomCalendar.DOM.hasClass(b,c.replace(".","")))return b;b=b.parentElement}return null}};
DomCalendar.Utils.isFunction(Object.assign)||Object.defineProperty(Object,"assign",{value:function(a,b){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),g=1;g<arguments.length;g++){var k=arguments[g];if(null!=k)for(var q in k)Object.prototype.hasOwnProperty.call(k,q)&&(c[q]=k[q])}return c},writable:!0,configurable:!0});function xLinePicker(a,b){var c=this,g,k,q,f,p,v=[],A=[],r=[],u,z=-1,H=-1,C=0;var U="#eee";var J="#888",G="#777";this.boundEditor=function(B,L){var ba=globalPage.getActiveFrame();if(ba&&(ba=ba.getScheme())&&ba.xLinePicker&&ba.xLinePicker.normal){for(var N=ba.xLinePicker.normal.style.split(";"),E=0;E<N.length;E++){var V=N[E].split(":");k.style[V[0]]=V[1]}ba.xLinePicker.normal.color&&(U=ba.xLinePicker.normal.color);ba.xLinePicker.normal.cursorBackgroundColor&&(J=ba.xLinePicker.normal.cursorBackgroundColor);
ba.xLinePicker.normal.selectedBackgroundColor&&(G=ba.xLinePicker.normal.selectedBackgroundColor)}g&&g.removeEventListener("input",c.onEditorInput);g=B;u=L;z=-1;switch(u){case "chartLineType":k.style.height=18*r.length+10+"px";C=r.length;for(E=0;E<v.length;E++)if(r[E].lineType.toLowerCase()==g.value.toLowerCase()){z=E;break}break;case "lineType":k.style.height=18*v.length+10+"px";C=v.length;for(E=0;E<v.length;E++)if(v[E].lineType==g.value){z=E;break}break;default:for(k.style.height=18*A.length+10+
"px",C=A.length,E=0;E<A.length;E++)if(A[E].lineType==g.value){z=E;break}}g.addEventListener("input",c.onEditorInput);B=getClientPos(g);k.style.left=B.x+"px";k.style.top=B.y+g.offsetHeight+1+"px";k.style.display="block";c.draw()};this.onMouseMove=function(B){B=Math.floor((B.offsetY-3)/18);B!=H&&(H=B>=C?-1:B,c.draw())};this.onKeyDown=function(B){if((27==B.keyCode||9==B.keyCode)&&"none"!=k.style.display)return k.style.display="none",!0};this.onMouseDown=function(B){if("none"!=k.style.display)if(B.srcElement!=
q&&B.srcElement!=g)k.style.display="none";else if(p)p=!1,k.style.display="none",g.focus();else{if(0<=H){z=H;switch(u){case "chartLineType":g.value=r[H].lineType;break;case "lineType":g.value=v[H].lineType;break;default:g.value=A[H].lineType}c.draw()}B=a.document.createEvent("HTMLEvents");B.initEvent("input",!0,!0);g.dispatchEvent(B)}};this.draw=function(){var B=q.parentElement;if(!(0>=B.offsetWidth||0>=B.offsetHeight)){null==f&&(f=q.getContext("2d"));var L=getPixelRatio(f);q.width=B.offsetWidth*L;
q.height=B.offsetHeight*L;q.style.left=0;q.style.top=0;q.style.width=B.offsetWidth+"px";q.style.height=B.offsetHeight+"px";1<L&&f.setTransform(L,0,0,L,0,0);f.translate(.5,.5);var ba=B.offsetWidth-24;L=12;f.font="12px "+xGlobal.systemFont;f.fillStyle=U;f.strokeStyle=U;f.textBaseline="top";0<=H&&(f.beginPath(),f.fillStyle=J,f.fillRect(8,L-9+18*H,ba+8,18),f.closePath());0<=z&&(f.beginPath(),f.fillStyle=G,f.fillRect(8,L-9+18*z,ba+8,18),f.closePath());f.fillStyle=U;switch(u){case "chartLineType":for(var N=
0;N<r.length;N++){f.beginPath();f.fillText(r[N].lineType,105,L-9+1);B=14;switch(r[N].lineType.toLowerCase()){case "colorstick":for(;100>B;B+=2)f.beginPath(),ba=6*Math.sin(Math.PI*(B-14)/4*Math.pow(10,15)),f.strokeStyle=0>ba?"#f00":"#090",f.moveTo(B,L),f.lineTo(B,L+ba),f.stroke(),f.closePath();f.strokeStyle=U;break;case "cross":case "crossdot":for(;100>B;B+=9)f.moveTo(B-2,L-2),f.lineTo(B+4,L+4),f.moveTo(B-2,L+4),f.lineTo(B+4,L-2);f.stroke();break;case "circledot":for(;100>B;B+=9)f.moveTo(B+2,L),f.arc(B,
L,2,0,2*Math.PI);f.stroke();break;case "pointdot":case "ball":for(;100>B;B+=9)f.beginPath(),f.arc(B,L,2,0,2*Math.PI),f.fill(),f.closePath();break;case "square":for(;100>B;B+=9)f.moveTo(B-2,L),f.lineTo(B,L-2),f.lineTo(B+2,L),f.lineTo(B,L+2),f.lineTo(B-2,L),f.lineTo(B,L-2);f.stroke();break;case "triangle":for(;100>B;B+=9)f.moveTo(B-2,L+2),f.lineTo(B,L-2),f.lineTo(B+2,L+2),f.lineTo(B-2,L+2),f.lineTo(B,L-2);f.stroke();break;case "invertedtriangle":for(;100>B;B+=9)f.moveTo(B-2,L-2),f.lineTo(B,L+2),f.lineTo(B+
2,L-2),f.lineTo(B-2,L-2),f.lineTo(B,L+2);f.stroke();break;case "horiline":for(;100>B;B+=9)f.moveTo(B-2,L),f.lineTo(B+2,L);f.stroke();break;case "linestock":var E=L;f.setLineDash([0]);for(B+=2;100>B;B+=2)f.beginPath(),ba=L+6*Math.sin(Math.PI*(B-14)/4*Math.pow(10,15)),f.strokeStyle=ba<E?"#f00":"#090",f.moveTo(B-2,E),f.lineTo(B,ba),E=ba,f.stroke(),f.closePath();f.strokeStyle=U;break;case "noline":case "nodraw":break;default:switch(r[N].lineType.toLowerCase()){case "linedash":f.setLineDash([5,3]);break;
case "linedashdot":f.setLineDash([5,4,2,4]);break;case "linedot":f.setLineDash([2]);break;default:f.setLineDash([0])}f.moveTo(B-2,L);f.lineTo(B+80,L);f.stroke()}f.closePath();L+=18}break;case "lineType":for(N=0;N<v.length;N++)f.beginPath(),B=14,f.setLineDash(v[N].lineType),f.moveTo(B,L),f.lineTo(B+ba-6,L),f.stroke(),f.closePath(),L+=18;break;default:for(N=0;N<A.length;N++)f.beginPath(),B=14,f.lineWidth=A[N].lineType,f.moveTo(B,L),f.lineTo(B+ba-6,L),f.stroke(),f.closePath(),L+=18}}};(function(){for(var B in chartSystemValue)"lineType"==
chartSystemValue[B][2]&&(r[r.length]={lineType:B,script:chartSystemValue[B][3]});B=[[0],[2],[4],[8],[4,1],[8,2]];for(var L=0;L<B.length;L++)v[v.length]={lineType:B[L],script:null};for(L=0;9>L;L++)A[A.length]={lineType:L+1,script:null};B="position:absolute;width:208px;height:"+(18*r.length+10)+"px;background-color:#fff;box-shadow:0px 0px 8px #333;;display:none;z-index:"+xZIndex.picker;k=a.document.createElement("div");L=a.document.createAttribute("style");L.value=B;k.setAttributeNode(L);q=a.document.createElement("canvas");
L=a.document.createAttribute("style");L.value="background-color:transparent;";q.setAttributeNode(L);q.addEventListener("mousedown",c.onMouseDown);q.addEventListener("mousemove",c.onMouseMove);k.appendChild(q);b.appendChild(k)})()};function drawMemory(){this.register=function(a,b,c,g){c={name:a,classed:b,depict:c,param:void 0===g?null:g};for(g=0;g<this.registList.length;g++)if(a==this.registList[g].name)return!1;try{null!=eval(b)&&(c.classed=b,this.registList.push(c))}catch(k){return console.log(k),!1}return!0}}drawMemory.getInstance=function(){this.instance||(this.instance=new drawMemory,this.instance.registList=[]);return this.instance};
function drawBase(){this.beforeCreate&&this.beforeCreate();this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.baseValue=this.value=null;this.beforeCreate=function(){};this.created=function(){};this.beforeDraw=function(){};this.drawed=function(){};this.beforeDestroy=function(){};this.destroyed=function(){};this.setCtx=function(a){this.ctx=a};this.setParent=function(a){this.parent=a};this.setGeneral=function(a){this.general=
a};this.setOption=function(a){this.option=Object.assign({},this.option,a)};this.setVariables=function(a){this.variables=a};this.setCallback_actionBounds=function(a){this.callback_actionBounds=a};this.setValue=function(a){this.value=a};this.setBaseValue=function(a){this.baseValue=a};this.setPosition=function(a){if(!this.position||a.height==this.position.height&&a.left==this.position.left&&a.width==this.position.width&&a.top==this.position.top)this.position=a;else this.onPosstionChange(a)};this.drawTime=
function(a,b){this.beforeDraw();1==this.autoDraw?(this.draw(a,b),this.drawed()):0==this.initDraw&&(this.initDraw=!0,this.draw(a,b),this.drawed())};this.draw=function(){};this.onPosstionChange=function(a){this.position=a};this.onMouseMove=function(){};this.onMouseDown=function(){};this.onMouseUp=function(){};this.onKeyDown=function(){};this.onMouseWheel=function(){}};function drawPie(a,b,c,g,k,q){b=c.width>c.height?c.height:c.width;b=(b-56)/2;var f=c.left+c.width/2;c=c.top+c.height/2+6;for(var p=-90,v=0,A=0;A<q.length;A++)v+=q[A].value;for(A=0;A<q.length;A++){a.beginPath();var r=k.colors[A]?k.colors[A]:"rgb("+[Math.ceil(255*Math.random()),Math.ceil(255*Math.random()),Math.ceil(255*Math.random())].join()+")";a.fillStyle=r;a.strokeStyle=r;var u=p*Math.PI/180;r=q[A].value/v*360;var z=(p+r-(k.space?k.space:0))*Math.PI/180,H=p+.5*r;90<H&&270>H&&(a.textAlign="end");
var C=(q[A].value/v*100).toFixed(2)+"%",U=a,J=U.fillText;var G=90<H&&270>H?f-45+Math.cos(H*Math.PI/180)*(b+20):f+45+Math.cos(H*Math.PI/180)*(b+20);J.call(U,C,G,c-3+Math.sin(H*Math.PI/180)*(b+20));a.moveTo(f,c);if(0>b)return;a.arc(f,c,b,u,z);a.fill();a.moveTo(f+Math.cos(H*Math.PI/180)*b,c+Math.sin(H*Math.PI/180)*b);a.lineTo(f+Math.cos(H*Math.PI/180)*(b+20),c+Math.sin(H*Math.PI/180)*(b+20));u=a;z=u.lineTo;U=90<H&&270>H?f-80+Math.cos(H*Math.PI/180)*(b+20):f+80+Math.cos(H*Math.PI/180)*(b+20);z.call(u,
U,c+Math.sin(H*Math.PI/180)*(b+20));a.stroke();p+=r}0<k.blank&&1>k.blank&&(a.beginPath(),a.moveTo(f,c),a.strokeStyle=k.backgroundColor?k.backgroundColor:g.backgroundColor,a.fillStyle=a.strokeStyle,a.arc(f,c,b*k.blank,0,360),a.fill())};function drawDashBoard(a,b,c,g,k,q){if(void 0!=q[0]&&null!=q[0].value){b=135;var f=118;g=c.width/k.option.width;var p=c.height/k.option.height;c=216*g;k=227*p;p>g?(b*=p,f*=p):(b*=g,f*=g);a.beginPath();a.arc(c,k,f,Math.PI/180*180,Math.PI/180*0,!1);a.lineCap="round";a.lineWidth=15*g+"";a.strokeStyle="#DCEBE3";a.stroke();a.beginPath();a.lineCap="round";var v=20*g+"";a.lineWidth=v;a.strokeStyle="#BDDECC";a.arc(c,k,b,Math.PI/180*180,Math.PI/180*0,!1);a.stroke();a.beginPath();a.fillStyle="#028F68";a.font=
40*g+"px Helvetica Neue Medium";f=q[0].value.toFixed(1);a.fillText(f+"",165*g,220*p);a.beginPath();a.fillStyle="#028F68";a.font=30*g+"px Helvetica Neue Medium";a.fillText("%",250*g,220*p);a.beginPath();f=a.createLinearGradient(0,0,180,0);f.addColorStop(0,"#BDDECC");f.addColorStop(1,"#48B181");a.lineCap="round";a.lineWidth=v;a.strokeStyle=f;f=1.8*q[0].value.toFixed(1)-180;a.arc(c,k,b,Math.PI/180*180,Math.PI/180*f,!1);a.stroke();a.beginPath();degDot=1.8*q[0].value;degDot=90-degDot;xDot=c-b*Math.sin(degDot*
Math.PI/180);yDot=k-b*Math.cos(degDot*Math.PI/180);a.arc(xDot,yDot,2,0,360,!1);a.fillStyle="white";a.fill();a.closePath();for(var A=0;50>=A;A++){a.beginPath();v=1.8*A;q=c-(b+10*g)*Math.sin(v*Math.PI/180);p=k-(b+10*g)*Math.cos(v*Math.PI/180);if(10==A||30==A||50==A){var r=c-(b+4*g)*Math.sin(v*Math.PI/180),u=k-(b+4*g)*Math.cos(v*Math.PI/180);if(10==A){var z=c-(b+25*g)*Math.sin(v*Math.PI/180)-10,H=k-(b+25*g)*Math.cos(v*Math.PI/180)+2;a.fillStyle="#68BD95";f=12;a.font=f+"px Helvetica Neue Medium";f="40";
a.fillText(f,z,H)}30==A&&(z=c-(b+25*g)*Math.sin(v*Math.PI/180)-10,H=k-(b+25*g)*Math.cos(v*Math.PI/180)+2,a.fillStyle="#68BD95",f=12,a.font=f+"px Helvetica Neue Medium",f="20",a.fillText(f,z,H));50==A&&(z=c-(b+25*g)*Math.sin(v*Math.PI/180)-10,H=k-(b+25*g)*Math.cos(v*Math.PI/180)+2,a.fillStyle="#68BD95",f=12,a.font=f+"px Helvetica Neue Medium",f="0",a.fillText(f,z,H))}else r=c-(b+8*g)*Math.sin(v*Math.PI/180),u=k-(b+8*g)*Math.cos(v*Math.PI/180);a.strokeStyle="#38844B";a.lineWidth=2*g;a.lineCap="square";
a.moveTo(q,p);a.lineTo(r,u);a.stroke()}for(A=0;50>=A;A++)a.beginPath(),v=-1.8*A,q=c-(b+10*g)*Math.sin(v*Math.PI/180),p=k-(b+10*g)*Math.cos(v*Math.PI/180),10==A||30==A||50==A?(r=c-(b+4*g)*Math.sin(v*Math.PI/180),u=k-(b+4*g)*Math.cos(v*Math.PI/180),10==A&&(z=c-(b+25*g)*Math.sin(v*Math.PI/180),H=k-(b+25*g)*Math.cos(v*Math.PI/180),a.fillStyle="#68BD95",f=12,a.font=f+"px Helvetica Neue Medium",f="60",a.fillText(f,z,H)),30==A&&(z=c-(b+25*g)*Math.sin(v*Math.PI/180),H=k-(b+25*g)*Math.cos(v*Math.PI/180),a.fillStyle=
"#68BD95",f=12,a.font=f+"px Helvetica Neue Medium",f="80",a.fillText(f,z,H)),50==A&&(z=c-(b+25*g)*Math.sin(v*Math.PI/180),H=k-(b+25*g)*Math.cos(v*Math.PI/180),a.fillStyle="#68BD95",f=12,a.font=f+"px Helvetica Neue Medium",f="100",a.fillText(f,z,H))):(r=c-(b+8*g)*Math.sin(v*Math.PI/180),u=k-(b+8*g)*Math.cos(v*Math.PI/180)),a.strokeStyle="#38844B",a.lineWidth=2*g,a.lineCap="square",a.moveTo(q,p),a.lineTo(r,u),a.stroke();a.closePath()}};function xDrawByCalculate(){function a(){var c=[].concat($jscomp.arrayFromIterable(b.field)),g=b.calculate;c.forEach(function(k,q){k=k.toLowerCase();g=g.replace(new RegExp(k,"gi"),b.value[q].value)});b.valueString=eval(g)}drawBase.call(this);var b=this;this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.value=null;this.calculate=this.valueString="";this.field=[];this.created=function(){this.field=this.option.field?
this.option.field:"";this.calculate=this.option.option?this.option.option.calculate?this.option.option.calculate:"":""};this.beforeDraw=function(){if(Gtype.isArray(this.field)){var c;if(c=b.calculate){for(c=0;c<b.value.length;c++)null==b.value[c].value&&(b.value[c].value=0);c=!0}c&&a()}};this.draw=function(){var c=b.position,g=c.top;c=c.height;b.option.fontsize||b.ctx.font.split("px");g=g+c/2+xGlobal.systemFontOffsetY;b.ctx.textBaseline="middle";var k=b.position;c=k.left;k=k.width;var q=b.option.textAlign?
b.option.textAlign.toLowerCase():"left";b.ctx.textAlign=q;c="left"==q?c+2:"right"==q?c+(k-2):c+k/2;k=b.parent.constructor.name.toLowerCase();k="xlist"==k||"xlistmobile"==k?b.parent.getOption().cell.color:"xgrid"==k?b.parent.getOption.color:void 0;b.ctx.fillStyle=k;b.ctx.fillText(b.valueString,c,g)}}drawMemory.getInstance().register("xDrawByCalculate",xDrawByCalculate.name,"\u8ba1\u7b97\u7ed8\u5236",{autoDraw:!1});function xDrawCalendar(){drawBase.call(this);this.dateInfo0=[];this.dateInfo1=[];this.dateInfo2=[];this.rectToday={left:0,top:8,width:20,height:20};this.offsetY=0;this.setVariables=function(a){this.variables=a};this.draw=function(a){this;this.drawCalendar(!0)};this.drawCalendar=function(a){var b=this.option.width,c=this.option.height,g=this.ctx.canvas;g.height=g.height;if(null!=g&&0!=b&&0!=c&&(0!=(void 0===a?!1:a)||0!=b||0!=c)){ctx&&(ctx=g.getContext("2d"));a=getPixelRatio(ctx);b*a!=g.width&&(g.width=
b);c*a!=g.height&&(g.height=c);g.style.left=0;g.style.top=0;g.style.width=b+"px";g.style.height=c+"px";ctx.translate(.5,.5);ctx.lineWidth=1;c=Math.floor(this.offsetY/188);g=188*c;0!=this.offsetY&&(c++,g+=188);var k=new Date;b=1E4*k.getFullYear()+100*(k.getMonth()+1)+k.getDate();k.setMonth(k.getMonth()-c);var q=1E4*k.getFullYear()+100*(k.getMonth()+1)+1;c="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("");a=g=this.offsetY-g+8;ctx.save();ctx.fillStyle="#000";ctx.textBaseline="top";ctx.strokeStyle=
"#aaa";for(var f=0;3>f;f++){ctx.font="15px "+xGlobal.systemFont;ctx.textAlign="left";k=Math.floor(q/1E4);var p=Math.floor(q/100%100);ctx.fillText(k+"."+p,8,a);a+=20;ctx.font="13px "+xGlobal.systemFont;ctx.textAlign="center";ctx.moveTo(4,a-4);ctx.lineTo(180,a-4);ctx.moveTo(4,a+16);ctx.lineTo(180,a+16);ctx.stroke();for(var v=0;7>v;v++)ctx.fillText(c[v],20+24*v,a);var A=this.getDaysOfMonth(q);q=100*Math.floor(q/100);a+=24;for(v=0;v<A.length;v++){for(var r=0;7>r;r++)A[v][r]&&(ctx.fillText(A[v][r],20+
24*r,a),0==f?this.dateInfo0.push({day:A[v][r],year:k,month:p,x:20+24*r,y:a}):1==f?this.dateInfo1.push({day:A[v][r],year:k,month:p,x:20+24*r,y:a}):this.dateInfo2.push({day:A[v][r],year:k,month:p,x:20+24*r,y:a}),b==q+A[v][r]&&(ctx.save(),ctx.beginPath(),ctx.fillStyle="#f00",ctx.strokeStyle=null,ctx.arc(20+24*r,a+22-6,3,0,2*Math.PI,!0),ctx.fill(),ctx.closePath(),ctx.restore()));a+=22}a=g+188*(f+1);k=new Date(k,p,1);k.setDate(p+1);q=1E4*k.getFullYear()+100*(k.getMonth()+1)+1}this.rectToday.left=188;ctx.beginPath();
ctx.fillStyle="#f00";ctx.strokeStyle="#f00";ctx.arc(this.rectToday.left+this.rectToday.width/2,this.rectToday.top+this.rectToday.height/2,this.rectToday.width/2,this.rectToday.width/2,0,2*Math.PI,!0);0==this.offsetY?ctx.stroke():ctx.fill();ctx.closePath();ctx.fillStyle=0==this.offsetY?"#aaa":"#fff";ctx.fillText("\u5f53",this.rectToday.left+this.rectToday.width/2,this.rectToday.top+4);ctx.restore()}};this.getDaysOfMonth=function(a){var b=[],c=new Date(Math.floor(a/1E4),Math.floor(a%1E4/100)-1,1);a=
c.getDay();var g=0;c.setMonth(c.getMonth()+1);c.setDate(0);c=c.getDate();b[0]=[];for(var k=0;k<c;k++)b[g][a]=k+1,6==a?(a=0,g++,b[g]=[]):a++;return b};this.onPosstionChange=function(a){this.position=a};this.onMouseWheel=function(a){0!=a.deltaY&&(this.offsetY-=a.deltaY,this.dateInfo0=[],this.dateInfo1=[],this.dateInfo2=[],this.drawCalendar(!0))};this.onMouseDown=function(a){a.offsetX>=this.rectToday.left&&a.offsetX<=this.rectToday.left+this.rectToday.width&&a.offsetY>=this.rectToday.top&&a.offsetY<=
this.rectToday.top+this.rectToday.height&&(this.offsetY=0,this.drawCalendar(!0))}}drawMemory.getInstance().register("xDrawCalendar",xDrawCalendar.name,"\u7ed8\u5236\u65e5\u5386");function xDrawHistogram(){function a(H,C){C*=A;var U=b.position.height,J=U-r-z;b.ctx.font=r+"px PingFangSC-Regular, PingFang SC";b.ctx.fillStyle=H.textColor;var G=b.ctx.measureText(H.name).width;if(G<A-5)G=C+(A-G)/2,b.ctx.fillText(H.name,G,U);else{G=b.ctx.measureText("...").width;for(var B="",L=0;L<H.name.length;L++){var ba=b.ctx.measureText(H.name[L]).width;if(ba+G<A-5)B+=H.name[L],G+=ba;else{B+="...";G=b.ctx.measureText(B).width;G=C+(A-G)/2;b.ctx.fillText(B,G,U);break}}}b.ctx.fillStyle=H.barColor;
G=C+(A-f)/2;U=p*H.percent;J-=U;b.ctx.fillRect(G,J,f,U);b.ctx.fillStyle=H.barColor;u&&(b.ctx.font="bold "+r+"px PingFangSC-Regular, PingFang SC");H=(H.value/1E8).toFixed(2);U=b.ctx.measureText(H).width;G=C+(A-U)/2;b.ctx.fillText(H,G,J-5)}drawBase.call(this);var b=this,c=[],g={},k=[],q=[],f=0,p=0,v=0,A=0,r=0,u=!1,z=0;this.draw=function(){A=(this.position.width-0)/(k.length+q.length);var H=0;0==v&&(v=1);for(var C=0;C<k.length;C++)k[C].percent=Math.abs(k[C].value)/v+.01,k[C].barColor=g.option.upBarColor,
k[C].textColor=g.option.textColor,a(k[C],H),H++;for(C=0;C<q.length;C++)q[C].percent=Math.abs(q[C].value)/v+.01,q[C].barColor=g.option.downBarColor,q[C].textColor=g.option.textColor,a(q[C],H),H++};this.setParent=function(H){c=H.getQueryData()};this.setOption=function(H){g=H;var C=g.option.compare,U=H.option.upTabel,J=H.option.downTabel;if(c instanceof Array){for(var G=0,B={},L=0;L<c.length;B={$jscomp$loop$prop$datas$519:B.$jscomp$loop$prop$datas$519,$jscomp$loop$prop$indexField$520:B.$jscomp$loop$prop$indexField$520,
$jscomp$loop$prop$indexName$521:B.$jscomp$loop$prop$indexName$521,$jscomp$loop$prop$datas$202$522:B.$jscomp$loop$prop$datas$202$522,$jscomp$loop$prop$indexField$199$523:B.$jscomp$loop$prop$indexField$199$523,$jscomp$loop$prop$indexName$200$524:B.$jscomp$loop$prop$indexName$200$524},L++)if(U==c[L].gid.name){var ba=c[L].table,N=ba.data;ba=ba.field;B.$jscomp$loop$prop$indexField$520=0;for(var E=B.$jscomp$loop$prop$indexName$521=0;E<ba.length;E++)ba[E][0].toLowerCase()==C.toLowerCase()&&(B.$jscomp$loop$prop$indexField$520=
E),"name"==ba[E][0].toLowerCase()&&(B.$jscomp$loop$prop$indexName$521=E);B.$jscomp$loop$prop$datas$519=[];N.forEach(function(V){return function(F){V.$jscomp$loop$prop$datas$519.push({value:F[V.$jscomp$loop$prop$indexField$520]||0,name:F[V.$jscomp$loop$prop$indexName$521]||""});Math.abs(F[2])>G&&(G=Math.abs(F[2]))}}(B));k=B.$jscomp$loop$prop$datas$519}else if(J==c[L].gid.name){ba=c[L].table;N=ba.data;ba=ba.field;B.$jscomp$loop$prop$indexField$199$523=0;for(E=B.$jscomp$loop$prop$indexName$200$524=0;E<
ba.length;E++)ba[E][0].toLowerCase()==C.toLowerCase()&&(B.$jscomp$loop$prop$indexField$199$523=E),"name"==ba[E][0].toLowerCase()&&(B.$jscomp$loop$prop$indexName$200$524=E);B.$jscomp$loop$prop$datas$202$522=[];N.forEach(function(V){return function(F){V.$jscomp$loop$prop$datas$202$522.push({value:F[V.$jscomp$loop$prop$indexField$199$523]||0,name:F[V.$jscomp$loop$prop$indexName$200$524]||""});Math.abs(F[2])>G&&(G=Math.abs(F[2]))}}(B));q=B.$jscomp$loop$prop$datas$202$522}v=G}f=g.option.barW;p=g.option.barH;
r=g.option.fontSize;u=H.option.fontBold||!1;z=H.option.interval||0}}drawMemory.getInstance().register("xDrawHistogram",xDrawHistogram.name,"\u67f1\u72b6\u6bd4\u4f8b\u5206\u914d\u56fe");function xDrawPie(){drawBase.call(this);this.autoDraw=!1;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.value=null;this.localData={};this.data=[];this.tipData=[];this.beforeCreate=function(a){a};this.created=function(){void 0!=this.option.autoDraw&&(this.autoDraw=this.option.autoDraw);this.localData=Object.assign({},{useSystemScheme:!0,borderRadius:6,paddingLeft:3,paddingTop:3,paddingRight:3,paddingBottom:3,marginLeft:3,
marginTop:3,marginRight:3,marginBottom:3,blank:.5,pieColors:"#c23531;#2f4554;#61a0a8;#d48265;#91c7ae; #749f83; #ca8622; #bda29a;#6e7074 ;#546570".split(";"),nameField:"",field:"",fontSize:12,textColor:"#000"},this.option.option,{legend:Object.assign({},{show:!1,pos:"top",marginTop:0,marginBottom:0,height:null,fontSize:12,textColor:"#000"},this.option.option.legend),popupOption:Object.assign({},{show:!1,fontSize:12,fontFamily:"Arial",textColor:"#fff",backgroundColor:["#000",.5],popupPercent:1.1,textAlign:"center",
lineHeight:20,padding:0,width:100,height:90},this.option.option.popupOption),tip:Object.assign({},{backgroundColor:"#444",backgroundColorAlpha:.9,borderColor:"#444",color:"#aaa",colors:["#fff","#f00","#0f0"],fontFamily:"Microsoft YaHei, Helvetica Neue",boxShadow:"0px 0px 6px #000",font:"10px sans-serif",show:"cursor"},this.option.option.tip),angleList:[],x0:200,y0:200,r1:100,r2:80,startAngle:-.5*Math.PI,sum:0,selectIndex:null})};this.beforeDraw=function(){var a=this,b=this.parent.getQueryData();if(null==
b||null==b[0]||null==b[0].table||null==b[0].table.data||0==b[0].table.data.length)this.data=[],this.drawPie();else{var c=getTableForMap(b[0].table);try{if(this.option.fieldGroup)for(var g=this.option.fieldGroup,k=0;k<g.length;k++)this.localData.type=c[g[k].field]?c[g[k].field].valueType:"c";else b&&b[0]&&b[0].table&&b[0].table.field&&this.option.field&&b[0].table.field.forEach(function(L,ba){L[0]==a.option.field.toLowerCase()&&(a.localData.type=L[1])})}catch(L){console.log("datas:"+c),console.log("queryData[0].table:"+
b[0].table)}if(this.option.fieldGroup){var q=[];for(k=0;k<this.option.fieldGroup.length;k++)for(var f=0;f<b[0].table.field.length;f++)this.option.fieldGroup[k].field==b[0].table.field[f][0]&&(this.option.fieldGroup[k].dataReverse?this.option.fieldGroup[k].name.forEach(function(L,ba){var N=0;b[0].table.data&&b[0].table.data[0][f]&&(N=b[0].table.data[0][f].length?b[0].table.data[0][f].length:0);q.push({name:a.option.fieldGroup[k].group+L,value:b[0].table.data[0][f]?b[0].table.data[0][f][N-1-ba]:null})}):
this.option.fieldGroup[k].name.forEach(function(L,ba){q.push({name:a.option.fieldGroup[k].group+L,value:b[0].table.data[0][f]?b[0].table.data[0][f][ba]:null})}));this.data=q}else this.data=getTable_NameValue(this.localData.nameField,this.option.field,b,"desc");var p=0;this.data.forEach(function(L){p+=L.value});this.localData.sum=p;this.data.forEach(function(L,ba){L.percent=(L.value/p*100).toFixed(2)+"%"});0==p&&(this.data=[]);c=this.localData.startAngle;var v=this.localData,A=v.legend;g=v.r1;var r=
v.blank;v=v.redius;var u=A.show,z=A.pos,H=this.position,C=H.top,U=H.height,J=H.width;this.localData.x0=J/2+H.left;if(u)if("top"==z)this.localData.y0=C+A.height+(U-A.height)/2;else if("bottom"==z)this.localData.y0=C+(U-A.height)/2;else return;else g=J>U?U/2*v:J/2*v,this.localData.r1=g,this.localData.r2=this.localData.r1*r,this.localData.y0=(U-C)/2+C;A=[];for(k=0;k<this.data.length;k++)r=c,c=v=c+this.data[k].value/p*Math.PI*2,A.push({st:r,end:v,r3:g});this.localData.angleList=A;if(this.localData.pieColors.length<
this.data.length)for(k=0;k<=this.data.length-this.localData.pieColors.length;k++)this.localData.pieColors.push("rgb("+[Math.ceil(255*Math.random()),Math.ceil(255*Math.random()),Math.ceil(255*Math.random())].join()+")");this.tipData=[[{title:"\u540d\u79f0:",data:[],maxline:1}],[{title:"\u6570\u636e:",data:[]}],[{title:"\u5360\u6bd4:",data:[]}]];var G=this.localData.type,B=this.option.format;""!=B&&this.data.forEach(function(L,ba){ba=getValueFormatString(L.value,G,B);L.value=ba});this.data.forEach(function(L){a.tipData[0][0].data.push(L.name);
a.tipData[1][0].data.push(L.value);a.tipData[2][0].data.push(L.percent)});this.draw()}};this.draw=function(){var a=this.localData.selectIndex;null!=a?this.drawPie(a):this.drawPie()};this.drawed=function(){};this.checkMouseinPie=function(a,b,c,g,k,q){return Math.pow(a-c,2)+Math.pow(b-g,2)<k*k&&Math.pow(a-c,2)+Math.pow(b-g,2)>q*q};this.drawPie=function(a){var b=this.localData,c=b.pieColors,g=b.popupOption,k=b.blank,q=b.x0,f=b.y0,p=b.r1,v=b.angleList,A=b.legend,r=b.fontSize,u=b.fontBold,z=b.fontFamily,
H=b.redius;if(g){b=g.popupPercent;var C=A.marginTop,U=A.marginBottom,J="#888";this.option.textColor?J=this.option.textColor:this.general&&this.general.textColor&&(J=this.general.textColor);this.ctx.fillStyle=J;if(this.data&&0==this.data.length)a=(this.position.width-this.ctx.measureText("\u6682\u65e0\u6570\u636e").width)/2+this.position.left,this.ctx.fillText("\u6682\u65e0\u6570\u636e",a,(this.position.height+this.position.top)/2);else{this.ctx.fillStyle=this.option.backgroundColor?this.option.backgroundColor:
this.general.backgroundColor;this.ctx.fillRect(this.position.left,this.position.top,this.position.width,this.position.height);var G="";u&&(G+="bold ");G=z?G+(r+"px "+z):G+(r+"px "+xGlobal.systemFont);this.ctx.font=G;this.ctx.lineWidth=2;var B=A.pos;z=this.position;r=z.left;var L=z.top;u=z.height;z=z.width;G=this.data;if(!A.show)f=L+u/2,this.localData.y0=f;else if("top"==B){p=A.height;this.ctx.textBaseline="middle";var ba=r+16;for(B=0;B<G.length;B++){var N=this.ctx.measureText(G[B].name).width;ba>
r&&ba+16+10+N>z&&(ba=r+16,p+=A.height);ba=ba+16+10+N}f=L+(u-p)/2+p;this.localData.y0=f;this.ctx.textBaseline="middle";ba=r+16;L+=20;p=u-p-C>z?z/2*H:(u-p-C)/2*H;this.localData.r1=p;for(B=0;B<G.length;B++)H=c[B]?c[B]:"#888",N=this.ctx.measureText(G[B].name).width,ba>r&&ba+16+10+N>z&&(ba=r+16,L+=A.height),fillRoundRect(this.ctx,ba,L,A.fontSize,A.fontSize,2,H,H),this.ctx.fillStyle=J,this.ctx.fillText(G[B].name,ba+16,L+A.fontSize/2),ba=ba+16+10+N}else if("bottom"==B){p=A.height;this.ctx.textBaseline="middle";
ba=r+16;for(B=0;B<G.length;B++)N=this.ctx.measureText(G[B].name).width,ba>r&&ba+16+10+N>z+r&&(ba=r+16,p+=A.height),ba=ba+16+10+N;f=L+(u-p)/2;this.localData.y0=f;ba=r+16;L=u-p+L-U;p=u-p-U>z?z/2*H:(u-p-U)/2*H;this.localData.r1=p;for(B=0;B<G.length;B++)H=c[B]?c[B]:"#888",N=this.ctx.measureText(G[B].name).width,ba>r&&ba+16+10+N>z+r&&(ba=r+16,L+=A.height),fillRoundRect(this.ctx,ba,L,A.fontSize,A.fontSize,2,H,H),this.ctx.fillStyle=J,this.ctx.fillText(G[B].name,ba+16,L+A.fontSize/2),ba=ba+16+10+N}k*=p;this.localData.r2=
k;for(B=0;B<this.data.length;B++)a==B?(g.show||(b=1),this.ctx.beginPath(),this.ctx.moveTo(q,f),this.ctx.arc(q,f,p*b,v[B].st,v[B].end)):(this.ctx.beginPath(),this.ctx.moveTo(q,f),this.ctx.arc(q,f,p,v[B].st,v[B].end)),this.ctx.fillStyle=c[B]?c[B]:"rgb("+[Math.ceil(255*Math.random()),Math.ceil(255*Math.random()),Math.ceil(255*Math.random())].join()+")",this.ctx.fill();this.ctx.beginPath();this.ctx.moveTo(q,f);this.ctx.arc(q,f,k,0,2*Math.PI);this.ctx.fillStyle=this.option.backgroundColor?this.option.backgroundColor:
this.general.backgroundColor;this.ctx.fill();this.ctx.restore()}}};this.drawRect=function(a,b,c){xGlobal.xTip.tip(this.parent,a,b,this.tipData,c,this.localData.tip)};this.prepareVariables=function(a,b,c){c=[];var g="",k=[],q=0;for(j=0;j<a.length;j++)for(name in a[j])if("table"==name){table=a[j][name];if((field=a[j][name].field)&&table.data){var f=null;tableName="";if(0<j){tableName=a[j].table.info.name+".";if("."==tableName)continue;g+="var "+a[j].table.info.name+"= {};"}else a[j].table.info.name&&
""!=a[j].table.info.name&&(f=a[j].table.info.name+".",g+="var "+a[j].table.info.name+"= {};");for(i=0;i<field.length;i++){for(l=0;l<k.length&&field[i][0]!=k[l];l++);if(l==k.length){if(0==j)k[q]=field[i][0];else{if("date"==field[i][0].toLowerCase()){c[c.length]="Date";continue}if("time"==field[i][0].toLowerCase()){c[c.length]="Time";continue}}q++;b&&b[j]&&b[j][i]?(tableName?g+=tableName+field[i][0]+" = arguments[1]["+j+"]["+i+"];\n":(g+="var "+tableName+field[i][0]+" = arguments[1]["+j+"]["+i+"];\n",
g+=f+field[i][0]+" = arguments[1]["+j+"]["+i+"];\n"),c&&(c[c.length]=field[i][0])):(dataCol=getFieldIndex(field,field[i][0]),0<=dataCol&&null!=table.data[dataCol]?(fieldIndex=getFieldIndex(a[j].table.field,field[i][0]),tableName?g+=tableName+field[i][0]+" = arguments[0]["+j+"].table.data["+fieldIndex+"];\n":(g+="var "+tableName+field[i][0]+" = arguments[0]["+j+"].table.data["+fieldIndex+"];\n",g+=f+field[i][0]+" = arguments[0]["+j+"].table.data["+fieldIndex+"];\n"),c&&(c[c.length]=field[i][0])):tableName?
g+=tableName+field[i][0]+" = null;\r":(g+="var "+tableName+field[i][0]+" = null;\r",g+=f+field[i][0]+" = null;\r"),g+=tableName+field[i][0]+".name='"+(null==field[i][2]?field[i][0]:field[i][2])+"';")}}}if(table.exchTime&&table.exchTime.table&&table.exchTime.table.data&&(data=[table.exchTime.table.data[0]],field))for(i=0;i<field.length;i++){for(l=0;l<k.length&&field[i][0]!=k[l];l++);if(l==k.length)for(k[q]=field[i][0],q++,g+="var "+field[i][0]+" = [",c&&(c[c.length]=field[i][0]),s=0;s<data.length;s++){if("object"==
typeof data[s][i]){string="[";for(s1=0;s1<data[s][i].length;s1++){string+="[";for(s2=0;s2<data[s][i][s1].length;s2++)string="string"==typeof data[s][i][s1][s2]?string+("'"+data[s][i][s1][s2]+"'"):string+(""+data[s][i][s1][s2]),s2<data[s][i][s1].length-1&&(string+=",");string+="]";s1<data[s][i].length-1&&(string+=",")}string+="]"}else string=data[s][i];g=s<data.length-1?g+(string+","):g+(string+"];")}}}else if("update"!=name&&a[j][name]&&(table=a[j][name].table)&&(field=table.field)&&table.data)for(g+=
"var "+name+"={};\r",i=0;i<field.length;i++){objField=name+"."+field[i][0];for(l=0;l<k.length&&objField!=k[l];l++);l==k.length&&(k[q]=objField,q++,dataCol=getFieldIndex(field,field[i][0]),0<=dataCol&&null!=table.data[dataCol]&&(g+=objField+" = arguments[0]["+j+"]."+name+".table.data[getFieldIndex(arguments[0]["+j+"]."+name+'.table.field, "'+field[i][0]+'")];\n',c&&(c[c.length]=objField)))}return g};this.onPosstionChange=function(a){this.position=a;var b=a.left,c=a.top,g=a.height;a=a.width;this.localData.r1=
(g-c)/2*.5;this.localData.r2=this.localData.r1*this.localData.blank;this.localData.x0=a/2+b;this.localData.y0=(g-c)/2+c;this.drawPie()};this.getIndexforAngleThenDraw=function(a,b,c){var g=this;if(this.data.length){var k=this.localData,q=k.r1,f=k.popupOption.popupPercent;this.localData.angleList.forEach(function(p,v){var A=p.end;a>p.st&&a<A?(p.r3=q*f,g.localData.selectIndex=v,g.drawPie(v),g.drawRect(b,c,v)):p.r3=q})}};this.onMouseMove=function(a){var b=this,c=a.offsetX,g=a.offsetY,k=this.localData,
q=k.x0,f=k.y0;a=k.r1;var p=k.r2;k=k.selectIndex;if(this.data&&0!=this.data.length&&(!this.option.fieldGroup||null==this.value||null!=this.value.value)){var v=Math.sqrt(Math.pow(q-q,2)+Math.pow(f-(f-100),2)),A=Math.sqrt(Math.pow(q-c,2)+Math.pow(f-g,2));v=Math.round(180*Math.acos((Math.pow(v,2)+Math.pow(A,2)-Math.pow(Math.sqrt(Math.pow(q-c,2)+Math.pow(f-100-g,2)),2))/(2*v*A))/Math.PI);var r=0;r=c>q?v/180*Math.PI-.5*Math.PI:(180-v)/180*Math.PI+.5*Math.PI;var u=!1;if(null!=k){a=this.localData.angleList;
if(!this.data.length)return;k=this.localData;var z=k.r1,H=k.popupOption.popupPercent;a.forEach(function(C,U){var J=C.end;r>C.st&&r<J?(C.r3=z*H,b.localData.selectIndex=U):C.r3=z});a.forEach(function(C,U){Math.pow(c-q,2)+Math.pow(g-f,2)<C.r3*C.r3&&Math.pow(c-q,2)+Math.pow(g-f,2)>p*p&&(u=!0)})}else u=this.checkMouseinPie(c,g,q,f,a,p);u?this.getIndexforAngleThenDraw(r,c,g):(this.localData.selectIndex=null,this.drawPie(),xGlobal.xTip.hidden())}};this.setOption=function(a){this.option=Object.assign({},
this.option,a);this.localData.tip&&(this.localData.tip=Object.assign({},this.localData.tip,this.option.option.tip))};this.onMouseDown=function(a){a};this.onMouseUp=function(a){a};this.onKeyDown=function(a){a};this.setLocalData=function(a,b){this.localData[a]=b}}drawMemory.getInstance().register("xDrawPie",xDrawPie.name,"\u7ed8\u5236\u997c\u72b6\u56fe",{autoDraw:!1});function xDrawSectionBar(){drawBase.call(this);this.autoDraw=!0;this.general=this.parent=this.ctx=null;this.option={option:{colors:["#C74535","#B5B5B5","#48B181"]}};this.position=this.callback_actionBounds=this.variables=null;this.initDraw=!1;this.baseValue=this.value=null;this.percentList=[];this.beforeDraw=function(){this.percentList=[];if((this.value||this.baseValue)&&this.value&&this.value.length){for(var a=0;a<this.value.length;a++)this.percentList.push(this.value[a].value/this.baseValue.value);
this.draw()}};this.draw=function(){var a=this.position,b=a.width,c=a.height,g=a.left;a=a.top;for(var k=0;k<this.value.length;k++)this.ctx.beginPath(),this.ctx.fillStyle=this.option.option.colors[k],this.ctx.rect(g,a,b*this.percentList[k],c),this.ctx.fill(),this.ctx.closePath(),g+=b*this.percentList[k]};this.setCtx=function(a){this.ctx=a};this.setParent=function(a){this.parent=a};this.setGeneral=function(a){this.general=a};this.setVariables=function(a){this.variables=a};this.setCallback_actionBounds=
function(a){this.callback_actionBounds=a};this.onPosstionChange=function(a){this.position=a}}drawMemory.getInstance().register("xDrawSectionBar",xDrawSectionBar.name,"\u5206\u6bb5Bar",{autoDraw:!1});function xDrawSwipBar(){drawBase.call(this);this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.content=this.right=this.top=this.left=this.value=null;this.draw=function(){if(this.value[0]){var a=0,b=0,c=this.value.length,g=c/2;for(i=0;i<g;i++)this.value[i].value&&"-"!=this.value[i].value&&(a+=this.value[i].value);for(i=g;i<c;i++)this.value[i].value&&"-"!=this.value[i].value&&(b+=this.value[i].value);a=b/
(a+b);b=this.position.top+(this.option.marginTop?this.option.marginTop:0);m=n=0;for(y=1;n<this.position.width;n+=8)this.ctx.beginPath(),n<this.position.width*a?(m=1<=m?m:m+.1,c="rgba(255,80,59,"+m+")"):(y=.1>=y?y:y-.06,c="rgba(114,255,190,"+y+")"),this.ctx.fillStyle=c,this.ctx.rect(n,b+6,4,4),this.ctx.fill()}};this.onPosstionChange=function(a){this.position=a;this.draw()}}drawMemory.getInstance().register("xDrawSwipBar",xDrawSwipBar.name,"\u4e70\u5356\u6863\u53e3\u667a\u80fd\u5c55\u793a\u706f");function xDrawUpDownText(){drawBase.call(this);this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.content=this.right=this.top=this.left=this.value=null;this.draw=function(){if(this.value[0]){this.top=this.option.top+13;this.position.width=this.option.width;var a=this.general.colors;for(var b=0;b<this.value.length;b++)this.value[b].value=this.value[b].value?this.value[b].value:0;b=[];for(var c=["\u8be5\u677f\u5757\u4e2d\u4e2a\u80a1\u603b\u5171 ",
"  \u4e2a ( "," / "," / "," ) \u4e2a"],g=0;9>g;g++)switch(g){case 0:b[g]=this.ctx.measureText(c[0]).width;break;case 1:b[g]=this.ctx.measureText(this.variables.totalRows).width;break;case 2:b[g]=this.ctx.measureText(c[1]).width;break;case 3:b[g]=this.ctx.measureText(this.value[0].value).width;break;case 4:b[g]=this.ctx.measureText(c[2]).width;break;case 5:b[g]=this.ctx.measureText(this.value[1].value).width;break;case 6:b[g]=this.ctx.measureText(c[3]).width;break;case 7:b[g]=this.ctx.measureText(this.value[2].value).width;
break;case 8:b[g]=this.ctx.measureText(c[4]).width}this.left=this.position.left+this.option.left-10;this.ctx.beginPath();this.ctx.font="12px "+xGlobal.systemFont;this.ctx.font=this.ctx.font;this.ctx.fillStyle=a[0];this.ctx.textAlign="right";this.ctx.textBaseline="hanging";this.ctx.fillText(c[4],this.left,this.top);this.ctx.fillStyle=a[2];this.left-=b[8];this.ctx.fillText(this.value[2].value,this.left,this.top);this.ctx.fillStyle=a[0];this.left-=b[7];this.ctx.fillText(c[3],this.left,this.top);this.ctx.fillStyle=
a[0];this.left-=b[6];this.ctx.fillText(this.value[1].value,this.left,this.top);this.ctx.fillStyle=a[0];this.left-=b[5];this.ctx.fillText(c[2],this.left,this.top);this.ctx.fillStyle=a[1];this.left-=b[4];this.ctx.fillText(this.value[0].value,this.left,this.top);this.ctx.fillStyle=a[0];this.left-=b[3];this.ctx.fillText(c[1],this.left,this.top);this.ctx.fillStyle=a[0];this.left-=b[2];this.ctx.fillText(this.variables.totalRows,this.left,this.top);this.ctx.fillStyle=a[0];this.left-=b[1];this.ctx.fillText(c[0],
this.left,this.top);this.ctx.closePath()}};this.onPosstionChange=function(a){this.position=a;this.draw()}}drawMemory.getInstance().register("xDrawUpDownText",xDrawUpDownText.name,"\u7ed8\u5236\u6da8\u8dcc\u5e73\u63a7\u4ef6");function leftArcColumnar(a,b,c,g,k,q){q=void 0===q?"#000":q;var f=Math.PI;a.beginPath();a.fillStyle=q;a.arc(b,c,k,3,f,!0);a.fill();a.fillRect(b+1,c-k,g,2*k);a.closePath()}function rightArcColumnar(a,b,c,g,k,q){q=void 0===q?"#000":q;var f=Math.PI;a.beginPath();a.fillStyle=q;a.arc(b,c,k,3,f,!0);a.fill();a.fillRect(b-g-1,c-k,g,2*k);a.closePath()}
function drawParallelogram(a,b,c,g,k,q,f){f=void 0===f?"#000":f;var p=[].concat($jscomp.arrayFromIterable(q));q=k/Math.tan(p[0]/180*Math.PI);p=k/Math.tan(p[1]/180*Math.PI);a.beginPath();a.moveTo(b,c+k);a.lineTo(b+q,c);a.lineTo(b+g+p,c);a.lineTo(b+g,c+k);a.lineTo(b,c+k);a.closePath();a.fillStyle=f;a.fill()}function drawColumnar(a,b,c,g,k,q){a.fillStyle=void 0===q?"#000":q;a.fillRect(b,c,g,k)}function drawText(a,b,c,g,k,q){a.font=b;a.fillStyle=c;a.fillText(g,k,q)}
function roundRect(a,b,c,g,k,q,f,p,v,A){f=void 0===f?!1:f;p=void 0===p?!1:p;v=void 0===v?"#028F68":v;A=void 0===A?"#D8D8D8":A;g<2*q&&(q=g/2);k<2*q&&(q=k/2);a.beginPath();a.strokeStyle=v;a.fillStyle=A;a.lineWidth=1;f&&(a.shadowColor=v,a.shadowBlur=5);a.moveTo(b+q,c);a.arcTo(b+g,c,b+g,c+k,q);a.arcTo(b+g,c+k,b,c+k,q);a.arcTo(b,c+k,b,c,q);a.arcTo(b,c,b+g,c,q);p?a.fill():a.stroke();f&&(a.shadowColor="#000",a.shadowBlur=null,a.shadowOffsetY=0);a.closePath()}
function drawVerticalLine(a,b,c,g,k){k=void 0===k?"#000000":k;a.beginPath();a.strokeStyle=k;a.moveTo(b,c);a.lineTo(b,g+c);a.stroke();a.closePath()}function drawCircle(a,b,c,g,k,q){k=void 0===k?!1:k;q=void 0===q?"#000000":q;a.beginPath();a.arc(b,c,g,0,2*Math.PI,!1);k?(a.fillStyle=q,a.fill()):(a.strokeStyle=q,a.stroke());a.closePath()}
function drawTextAutoLine(a,b,c,g,k,q,f,p,v,A){p=void 0===p?2:p;var r=0,u=1;q=Math.ceil(q);if(null!=a){parseInt(b.font);var z=g,H=[],C=0,U=0;var J=b.measureText(a).width;if(J>q)for(var G=J=0;G<a.length;G++){J+=b.measureText(a[G]).width;if(J>q||"\n"==a[G])"\n"!=a[G]&&("a"<=a[G]&&"z">=a[G]||"A"<=a[G]&&"Z">=a[G]||"0"<=a[G]&&"9">=a[G])&&0<U&&(G=U),U=0,C++,J=0,H.push(a.substring(r,G+1)),r=G+1;G==a.length-1&&(H.push(a.substring(r,G+1)),C++)}else H[0]=a,C=1;r=0;null==A.textBaseline||"middle"==A.textBaseline?
(C>parseInt(f/k)&&(C=parseInt(f/k)),g=z+f/2-k*C/2+k/2,g<z&&(g=z+k/2),r=k/2,b.textBaseline="middle"):b.textBaseline="top";for(C=0;C<H.length;C++){u++;U=H[C];if(0<p&&u>p&&a.length>C||g+k-r>=z+f)J=b.measureText(U).width,J>q&&(U=U.substring(0,U.length-2)+"...");0==markString(b,U,v,A,c,g)&&("right"==A.textAlign?b.fillText(U,c+q,g):"center"==A.textAlign?b.fillText(U,c+q/2,g):b.fillText(U,c,g));g+=k;if(0<p&&u>p&&a.length>C||g-r>=z+f)break}b.closePath()}}
function markString(a,b,c,g,k,q){var f=a.fillStyle,p=!1;if(c.value&&c.value.markValues)var v=c.value.markValues;else g&&g.marks&&(v=g.marks);c=g.mark&&null!=g.mark.color?g.mark.color:"#ff8000";if(v)for(g=0;g<v.length;g++)if(""!=v[g]){var A=b.toLowerCase().indexOf(v[g].toLowerCase());0<=A&&(0==A?(a.fillStyle=c,a.fillText(b.slice(0,v[g].length),k,q,width),p=a.measureText(b.slice(0,v[g].length)).width,a.fillStyle=f,a.fillText(b.slice(v[g].length,b.length),k+p,q)):(a.fillStyle=f,a.fillText(b.slice(0,
A),k,q),p=a.measureText(b.slice(0,A)).width,a.fillStyle=c,a.fillText(b.slice(A,A+v[g].length),k+p,q,width),p=a.measureText(b.slice(0,A+v[g].length)).width,a.fillStyle=f,a.fillText(b.slice(A+v[g].length,b.length),k+p,q,width)),p=!0)}return p}
function drawScreenPlus(a,b,c,g,k){c=void 0===c?!1:c;a.fillStyle=k;a.strokeStyle=g;a.beginPath();a.moveTo(b.left,b.top);a.lineTo(b.left+b.width,b.top);a.lineTo(b.left+b.width,b.top+b.height/7);a.lineTo(b.left+.75*b.width,b.top+b.height/2);a.lineTo(b.left+.75*b.width,b.top+1.1*b.height);a.lineTo(b.left+.65*b.width,b.top+1.1*b.height);a.lineTo(b.left+.35*b.width,b.top+b.height/1.2);a.lineTo(b.left+.35*b.width,b.top+b.height/2);a.lineTo(b.left,b.top+b.height/7);a.lineTo(b.left,b.top);c?a.fill():a.stroke();
a.closePath();a.fillStyle="#000000";a.strokeStyle="#ffffff"}function drawTrendLineBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;g=c.left;q=c.width;var f=c.height,p=c.top;a.arc(g+5+2,p-5+f-2,2,0,b,!1);a.moveTo(g+8,p+f-8);a.lineTo(g+q-8,c.top+8);a.moveTo(g+q-5,p+5+2);a.arc(g+q-5-2,p+5+2,2,0,b,!1);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawCycLineBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;var f=c.left,p=c.width;g=c.height;c=c.top;var v=p/5;q=[f];for(var A=1;4>=A;A++)q.push(f+A*v);q.push(f+p);f=g/5;p=[c];for(v=1;4>=v;v++)p.push(c+v*f);p.push(c+g);a.arc(q[1],p[4],2,0,b,!1);a.moveTo(q[1]+2,p[4]-2);a.lineTo(q[3],p[2]);a.moveTo(q[1]+2,p[2]-2);a.arc(q[1],p[2],2,0,b,!1);a.moveTo(q[1]+2,p[2]-2);a.lineTo(q[2],p[1]);a.moveTo(q[3]+2,p[4]-2);a.arc(q[3],p[4],2,0,b,!1);a.moveTo(q[3]+2,p[4]-2);a.lineTo(q[4],p[3]);a.moveTo(q[1]+2,p[2]+
2);a.lineTo(q[3]-2,p[4]-2);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}function drawStraightLineBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;g=c.left;q=c.width;var f=c.height,p=c.top;a.arc(g+5+2,p-5+f-2,2,0,b,!1);a.moveTo(g+.5-1,p+f-.5);a.lineTo(g+q-2+1,c.top+2);a.moveTo(g+q-5,p+5+2);a.arc(g+q-5-2,p+5+2,2,0,b,!1);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawRadialLineBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;g=c.left;q=c.width;var f=c.height,p=c.top;a.arc(g+5+2,p-5+f-2,2,0,b,!1);a.moveTo(g+8,p+f-8);a.lineTo(g+q-2+1,c.top+2);a.moveTo(g+q-5,p+5+2);a.arc(g+q-5-2,p+5+2,2,0,b,!1);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawlevelLineBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;g=c.left;q=c.width;var f=c.height;c=c.top;a.arc(g+5+2,c+f/2,2,0,b,!1);a.moveTo(g+5+4,c+f/2);a.lineTo(g+q-5-4,c+f/2);a.moveTo(g+q-5,c+f/2);a.arc(g+q-5-2,c+f/2,2,0,b,!1);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawVerticalLineBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;g=c.left;q=c.width;var f=c.height;c=c.top;a.arc(g+q/2+5+2,c+2+5,2,0,b,!1);a.moveTo(g+q/2+5+2,c+4+5);a.lineTo(g+q/2+5+2,c+f-4-5);a.moveTo(g+q/2+5+4,c+f-2-5);a.arc(g+q/2+5+2,c+f-2-5,2,0,b,!1);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawGoldenSectionBtn(a,b,c,g,k,q){a.beginPath();b=c.left;g=c.width;c=(c.top+c.height)/7;a.moveTo(b+5,1*c);a.lineTo(b+g-5,1*c);a.moveTo(b+5,2*c);a.lineTo(b+g-5,2*c);a.moveTo(b+5,4*c);a.lineTo(b+g-5,4*c);a.moveTo(b+5,6*c);a.lineTo(b+g-5,6*c);a.moveTo(b+5,7*c);a.lineTo(b+g-5,7*c);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawlevelSegBtn(a,b,c,g,k,q){a.beginPath();b=c.left;g=c.width;c=(c.top+c.height)/4;a.moveTo(b+5,1*c);a.lineTo(b+g-5,1*c);a.moveTo(b+5,2*c);a.lineTo(b+g-5,2*c);a.moveTo(b+5,3*c);a.lineTo(b+g-5,3*c);a.moveTo(b+5,4*c);a.lineTo(b+g-5,4*c);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawFibonacciBtn(a,b,c,g,k,q){a.beginPath();b=c.left;g=c.height;q=c.top;c=c.width/8;a.moveTo(b+1*c,q+5);a.lineTo(b+1*c,q+g-5);a.moveTo(b+2*c,q+5);a.lineTo(b+2*c,q+g-5);a.moveTo(b+4*c,q+5);a.lineTo(b+4*c,q+g-5);a.moveTo(b+7*c,q+5);a.lineTo(b+7*c,q+g-5);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawSineBtn(a,b,c,g,k,q){a.beginPath();b=c.left;g=c.width;q=c.height;c=c.top;for(var f=1,p,v,A=1;A<2.8*g;A++)a.moveTo(p,v),f+=.1,p=b+3*f,v=Math.sin(f)*q/3+c+q/2,a.lineTo(p,v);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawGannAngleBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;var f=c.left,p=c.width;g=c.height;c=c.top;var v=p/5;q=[f];for(var A=1;4>=A;A++)q.push(f+A*v);q.push(f+p);f=g/5;p=[c];for(v=1;4>=v;v++)p.push(c+v*f);p.push(c+g);a.arc(q[1],p[4],2,0,b,!1);a.moveTo(q[1],p[4]-2);a.lineTo(q[2],p[1]);a.moveTo(q[1]+2/3,p[4]-2);a.lineTo(q[3],p[1]);a.moveTo(q[1]+2,p[4]-2);a.lineTo(q[3]-2,p[2]+2);a.moveTo(q[3]+2,p[2]-2);a.arc(q[3],p[2],2,0,b,!1);a.moveTo(q[3]+2,p[2]-2);a.lineTo(q[4],p[1]);a.moveTo(q[1]+2,p[4]-
1);a.lineTo(q[4],p[2]);a.moveTo(q[1]+2,p[4]+.4);a.lineTo(q[4],p[3]);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawGannResistanceBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;var f=c.left,p=c.width;g=c.height;c=c.top;var v=p/5;q=[f];for(var A=1;4>=A;A++)q.push(f+A*v);q.push(f+p);f=g/5;p=[c];for(v=1;4>=v;v++)p.push(c+v*f);p.push(c+g);a.arc(q[1],p[4],2,0,b,!1);a.moveTo(q[1],p[4]-2);a.lineTo(q[1],p[1]);a.moveTo(q[1]+2/3,p[4]-2);a.lineTo(q[2],p[1]);a.moveTo(q[1]+2,p[4]-2);a.lineTo(q[3]-2,p[2]+2);a.moveTo(q[3]+2,p[2]-2);a.arc(q[3],p[2],2,0,b,!1);a.moveTo(q[3]+2,p[2]-2);a.lineTo(q[4],p[1]);a.moveTo(q[1]+2,
p[4]-2/3);a.lineTo(q[4],p[3]);a.moveTo(q[1]+2,p[4]);a.lineTo(q[4],p[4]);a.moveTo(q[1],p[2]);a.lineTo(q[3]-2,p[2]);a.moveTo(q[3],p[4]);a.lineTo(q[3],p[2]+2);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawGannGridBtn(a,b,c,g,k,q){a.beginPath();b=2*Math.PI;var f=c.left,p=c.width;g=c.height;c=c.top;var v=p/5;q=[f];for(var A=1;4>=A;A++)q.push(f+A*v);q.push(f+p);f=g/5;p=[c];for(v=1;4>=v;v++)p.push(c+v*f);p.push(c+g);a.moveTo(q[1],p[1]);a.lineTo(q[4]-2,p[1]);a.moveTo(q[1],p[1]);a.lineTo(q[1],p[4]-2);a.arc(q[1],p[4],2,0,b,!1);a.moveTo(q[1]+2,p[4]);a.lineTo(q[4],p[4]);a.moveTo(q[4],p[4]);a.lineTo(q[4],p[1]+2);a.moveTo(q[4]+2,p[1]);a.arc(q[4],p[1],2,0,b,!1);a.moveTo(q[2],p[1]);a.lineTo(q[2],p[4]);
a.moveTo(q[3],p[1]);a.lineTo(q[3],p[4]);a.moveTo(q[1],p[2]);a.lineTo(q[4],p[2]);a.moveTo(q[1],p[3]);a.lineTo(q[4],p[3]);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawParallelLineBtn(a,b,c,g,k,q){a.beginPath();q=c.left;var f=c.width;b=c.height;c=c.top;var p=f/5;g=[q];for(var v=1;4>=v;v++)g.push(q+v*p);g.push(q+f);q=b/5;f=[c];for(p=1;4>=p;p++)f.push(c+p*q);f.push(c+b);a.moveTo(g[1],f[3]);a.lineTo(g[3],f[1]);a.moveTo(g[2],f[4]);a.lineTo(g[4],f[2]);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();a.closePath()}
function drawParallelBoxBtn(a,b,c,g,k,q){a.beginPath();q=c.left;var f=c.width;b=c.height;c=c.top;var p=f/6;g=[q];for(var v=1;5>=v;v++)g.push(q+v*p);g.push(q+f);q=b/6;f=[c];for(p=1;5>=p;p++)f.push(c+p*q);f.push(c+b);a.moveTo(g[1],f[1]);a.lineTo(g[3],f[5]);a.moveTo(g[2],f[1]);a.lineTo(g[4],f[5]);a.moveTo(g[3],f[1]);a.lineTo(g[5],f[5]);a.moveTo(g[1],f[3]);a.lineTo(g[5],f[1]);a.moveTo(g[1],f[4]);a.lineTo(g[5],f[2]);a.moveTo(g[1],f[5]);a.lineTo(g[5],f[3]);a.strokeStyle=k.color?k.color:"#FFF";a.stroke();
a.closePath()};function xDrawVolumeBar(){drawBase.call(this);this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.baseValue=this.value=null;this.draw=function(){if(0<=this.value.value&&0<=this.baseValue.value){var a=this.position,b=a.left,c=a.width,g=a.height,k=a.top,q=this.value.value/this.baseValue.value,f=this.parent.getOption().cell.fontSize;a=k;var p=g,v=this.option.option.marginTop,A=this.option.option.marginBottom;
0<v&&(a+=v,p-=v);0<A&&(p-=A);g=k+(g-f)/2;"right"==this.option.option.direction?(this.ctx.textAlign="left",this.ctx.beginPath(),this.ctx.font=f+"px sans-serif",this.ctx.fillStyle=this.parent.getOption().cell.colors[0],this.ctx.fillText(this.value.value||"0",b+6,g,100),c-=100,q=(1-q)*c,c-=q,b=b+100+q,this.ctx.fillStyle=this.parent.getOption().cell.colors[1],this.ctx.rect(b,a,c,p)):(this.ctx.textAlign="right",this.ctx.beginPath(),k=b+c,c-=100,this.ctx.font=f+"px sans-serif",this.ctx.fillStyle=this.parent.getOption().cell.colors[0],
this.ctx.fillText(this.value.value||"0",k-6,g,100),this.ctx.fillStyle=this.parent.getOption().cell.colors[2],this.ctx.rect(b,a,c*q,p));this.ctx.fill();this.ctx.closePath()}};this.setCtx=function(a){this.ctx=a};this.setParent=function(a){this.parent=a};this.setGeneral=function(a){this.general=a};this.setVariables=function(a){this.variables=a};this.setCallback_actionBounds=function(a){this.callback_actionBounds=a};this.onPosstionChange=function(a){this.position=a}}
drawMemory.getInstance().register("xDrawVolumeBar",xDrawVolumeBar.name,"\u5355bar",{autoDraw:!1});function drawPilboy(a,b,c,g,k,q){var f=function(p,v){var A;if(null!=k){var r="<-10% -10% -7% -4% -1% 0 1% 4% 7% 10% >10%".split(" ");k.option.reverse=k.option.reverse?!0:!1;if(void 0!=q[1])if(k.option.reverse){var u=q[1].value.slice().reverse();0<q[0].value.length&&(r=q[0].value.slice().reverse());if(0<u.length){var z=A=1;var H=parseInt(k.option.hBarWidth*A);parseInt(k.option.hBarHeight*z);A=parseInt(k.option.hBarLeft*A);z=parseInt(k.option.hBarTop*z);var C=k.option.textTop?k.option.textTop:28;var U=
k.option.lineHeight?k.option.lineHeight:10;var J=k.option.lineTop?k.option.lineTop:1;var G=k.option.lineColor?k.option.lineColor:null;var B=k.colors?k.colors:null;p.translate(v.left,v.top);for(v=0;3>v;v++){p.beginPath();var L=p.createLinearGradient(A+H/3*v,z,A+H/3*v+H/3,z);2==v&&(L.addColorStop(0,"#C74535"),L.addColorStop(1,"#E98A7F"));1==v&&(L.addColorStop(0,"#E98A7F"),L.addColorStop(1,"#9ED3A2"));0==v&&(L.addColorStop(0,"#9ED3A2"),L.addColorStop(1,"#4BB282"));p.strokeStyle=null!=G?G:L;p.lineWidth=
U;p.lineCap="round";p.moveTo(A+H/3*v,J);p.lineTo(A+H/3*v+H/3,J);p.stroke();p.closePath()}U=u[0];L=u.length;for(v=1;v<L;v++)u[v]>U&&(U=u[v]);if(0!=U){var ba=parseInt(H/(r.length-1));for(v=0;v<r.length;v++){p.beginPath();H=A+v*ba;J=z-14;G=12;var N=u[v]/U*k.option.barHeight;J-=N;var E=B.length-1-v;5<v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#4BB282"),L.addColorStop(1,"#9ED3A2"),p.fillStyle=B&&B[E]?B[E]:L,p.fillRect(H,J,G,N));5==v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#9A9A9A"),
L.addColorStop(1,"#9A9A9A"),p.fillStyle=B&&B[E]?B[E]:L,p.fillRect(H,J,G,N));5>v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#E98A7F"),L.addColorStop(1,"#C74535"),p.fillStyle=B&&B[E]?B[E]:L,p.fillRect(H,J,G,N));tx=u[v];tx+="";p.fillText(tx,H,J-10);p.closePath();p.fillStyle="#808080";L=parseInt(p.measureText(r[v]).width);19<L?p.fillText(r[v],H-L/2,z+C):p.fillText(r[v],H,z+C)}}}}else{if(u=[].concat($jscomp.arrayFromIterable(q[1].value)),r=[].concat($jscomp.arrayFromIterable(q[0].value)),void 0!=
u){z=A=1;H=parseInt(k.option.hBarWidth*A);parseInt(k.option.hBarHeight*z);A=parseInt(k.option.hBarLeft*A);z=parseInt(k.option.hBarTop*z);C=k.option.textTop?k.option.textTop:28;U=k.option.lineHeight?k.option.lineHeight:10;J=k.option.lineTop?k.option.lineTop:1;G=k.option.lineColor?k.option.lineColor:null;B=k.colors?k.colors:null;p.translate(v.left,v.top);for(v=0;3>v;v++)p.beginPath(),L=p.createLinearGradient(A+H/3*v,z,A+H/3*v+H/3,z),0==v&&(L.addColorStop(0,"#C74535"),L.addColorStop(1,"#E98A7F")),1==
v&&(L.addColorStop(0,"#E98A7F"),L.addColorStop(1,"#9ED3A2")),2==v&&(L.addColorStop(0,"#9ED3A2"),L.addColorStop(1,"#4BB282")),p.strokeStyle=null!=G?G:L,p.lineWidth=U,p.lineCap="round",p.moveTo(A+H/3*v,J),p.lineTo(A+H/3*v+H/3,J),p.stroke(),p.closePath();U=u[0];L=u.length;for(v=1;v<L;v++)u[v]>U&&(U=u[v]);if(0!=U)for(ba=parseInt(H/(r.length-1)),v=0;v<r.length;v++)p.beginPath(),H=A+v*ba,J=z-14,G=12,N=u[v]/U*k.option.barHeight,J-=N,5>v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#C74535"),L.addColorStop(1,
"#E98A7F"),p.fillStyle=B&&B[v]?B[v]:L,p.fillRect(H,J,G,N)),5==v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#9A9A9A"),L.addColorStop(1,"#9A9A9A"),p.fillStyle=B&&B[v]?B[v]:L,p.fillRect(H,J,G,N)),5<v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#9ED3A2"),L.addColorStop(1,"#4BB282"),p.fillStyle=B&&B[v]?B[v]:L,p.fillRect(H,J,G,N)),tx=u[v],tx+="",p.fillText(tx,H,J-10),p.closePath(),p.fillStyle="#808080",L=parseInt(p.measureText(r[v]).width),19<L?p.fillText(r[v],H-L/2,z+C):p.fillText(r[v],
H,z+C)}}else if(k.option.reverse){if(u=q[0].value.slice().reverse(),0<q[0].value.length&&(r=r.slice().reverse()),0<u.length){z=A=1;H=parseInt(k.option.hBarWidth*A);parseInt(k.option.hBarHeight*z);A=parseInt(k.option.hBarLeft*A);z=parseInt(k.option.hBarTop*z);C=k.option.textTop?k.option.textTop:28;U=k.option.lineHeight?k.option.lineHeight:10;J=k.option.lineTop?k.option.lineTop:1;G=k.option.lineColor?k.option.lineColor:null;B=k.colors?k.colors:null;p.translate(v.left,v.top);for(v=0;3>v;v++)p.beginPath(),
L=p.createLinearGradient(A+H/3*v,z,A+H/3*v+H/3,z),2==v&&(L.addColorStop(0,"#C74535"),L.addColorStop(1,"#E98A7F")),1==v&&(L.addColorStop(0,"#E98A7F"),L.addColorStop(1,"#9ED3A2")),0==v&&(L.addColorStop(0,"#9ED3A2"),L.addColorStop(1,"#4BB282")),p.strokeStyle=null!=G?G:L,p.lineWidth=U,p.lineCap="round",p.moveTo(A+H/3*v,J),p.lineTo(A+H/3*v+H/3,J),p.stroke(),p.closePath();U=u[0];L=u.length;for(v=1;v<L;v++)u[v]>U&&(U=u[v]);if(0!=U)for(ba=parseInt(H/(r.length-1)),v=0;v<r.length;v++)p.beginPath(),H=A+v*ba,
J=z-14,G=12,N=u[v]/U*k.option.barHeight,J-=N,E=B.length-1-v,5<v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#4BB282"),L.addColorStop(1,"#9ED3A2"),p.fillStyle=B&&B[E]?B[E]:L,p.fillRect(H,J,G,N)),5==v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#9A9A9A"),L.addColorStop(1,"#9A9A9A"),p.fillStyle=B&&B[E]?B[E]:L,p.fillRect(H,J,G,N)),5>v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#E98A7F"),L.addColorStop(1,"#C74535"),p.fillStyle=B&&B[E]?B[E]:L,p.fillRect(H,J,G,N)),tx=u[v],
tx+="",p.fillText(tx,H,J-10),p.closePath(),p.fillStyle="#808080",L=parseInt(p.measureText(r[v]).width),19<L?p.fillText(r[v],H-L/2,z+C):p.fillText(r[v],H,z+C)}}else if(u=[].concat($jscomp.arrayFromIterable(q[0].value)),void 0!=u){z=A=1;H=parseInt(k.option.hBarWidth*A);parseInt(k.option.hBarHeight*z);A=parseInt(k.option.hBarLeft*A);z=parseInt(k.option.hBarTop*z);C=k.option.textTop?k.option.textTop:28;U=k.option.lineHeight?k.option.lineHeight:10;J=k.option.lineTop?k.option.lineTop:1;G=k.option.lineColor?
k.option.lineColor:null;B=k.colors?k.colors:null;p.translate(v.left,v.top);for(v=0;3>v;v++)p.beginPath(),L=p.createLinearGradient(A+H/3*v,z,A+H/3*v+H/3,z),0==v&&(L.addColorStop(0,"#C74535"),L.addColorStop(1,"#E98A7F")),1==v&&(L.addColorStop(0,"#E98A7F"),L.addColorStop(1,"#9ED3A2")),2==v&&(L.addColorStop(0,"#9ED3A2"),L.addColorStop(1,"#4BB282")),p.strokeStyle=null!=G?G:L,p.lineWidth=U,p.lineCap="round",p.moveTo(A+H/3*v,J),p.lineTo(A+H/3*v+H/3,J),p.stroke(),p.closePath();U=u[0];L=u.length;for(v=1;v<
L;v++)u[v]>U&&(U=u[v]);if(0!=U)for(ba=parseInt(H/(r.length-1)),v=0;v<r.length;v++)p.beginPath(),H=A+v*ba,J=z-14,G=12,N=u[v]/U*k.option.barHeight,J-=N,5>v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#C74535"),L.addColorStop(1,"#E98A7F"),p.fillStyle=B&&B[v]?B[v]:L,p.fillRect(H,J,G,N)),5==v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#9A9A9A"),L.addColorStop(1,"#9A9A9A"),p.fillStyle=B&&B[v]?B[v]:L,p.fillRect(H,J,G,N)),5<v&&(L=p.createLinearGradient(H,J,G,N),L.addColorStop(0,"#9ED3A2"),
L.addColorStop(1,"#4BB282"),p.fillStyle=B&&B[v]?B[v]:L,p.fillRect(H,J,G,N)),tx=u[v],tx+="",p.fillText(tx,H,J-10),p.closePath(),p.fillStyle="#808080",L=parseInt(p.measureText(r[v]).width),19<L?p.fillText(r[v],H-L/2,z+C):p.fillText(r[v],H,z+C)}}};this.setOption=function(p){f()};this.synchBoundValue=function(p,v,A,r){r!=_this&&this.createXDetails(A[0].value)};this.createXDetails=function(p){document.getElementById("xDetailsTitle").innerHTML=p};f(a,c)}
function xDrawPilboy(){drawBase.call(this);this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.value=null;this.dataList=[];this.created=function(){void 0!=this.option.autoDraw&&(this.autoDraw=this.option.autoDraw);this.BarOption=Object.assign({},{colors:"#1B9877 #1B9877 #1B9877 #1B9877 #1B9877 #9A9A9A #AD403E #AD403E #AD403E #AD403E #AD403E".split(" "),textShow:!0,height:100,barWidth:12,barHeight:85},this.option.option.barOption);
this.BaseOption={left:0,right:0,top:0,reverse:!0};this.BaseOption.left=this.option.left?this.option.left:0;this.BaseOption.right=this.option.right?this.option.right:0;this.BaseOption.top=this.option.top?this.option.top:0;this.BaseOption.reverse=this.option.reverse?!0:!1;this.TextOption=Object.assign({},{show:!0,color:"#FFF",top:5,fontSize:10,text:"<-10% -10% -7% -4% -1% 0 1% 4% 7% 10% >10%".split(" ")},this.option.option.textOption);this.GradientLineOption=Object.assign({},{show:!0,color:"2F2F2F",
lineTop:1,lineHeight:.5},this.option.option.gradientLineOption)};this.draw=function(){if(this.value.length&&"[object Array]"===Object.prototype.toString.call(this.value[0].value)){this.dataList=this.value[0].value;this.value[1]&&(this.TextOption.text=this.value[1].value);if(this.BaseOption.reverse&&this.dataList&&this.dataList.length){this.dataList=this.dataList.slice().reverse();var a=this.option.option.barOption.colors.slice().reverse();this.BarOption.colors=a;a=this.option.option.textOption.text.slice().reverse();
this.TextOption.text=a}this.drawBar();this.TextOption.show&&this.drawText();this.GradientLineOption.show&&this.drawGradientLine()}};this.drawBar=function(){if(null!=this.dataList){var a=this.position,b=this.BarOption,c=b.barHeight,g=b.barWidth;b=b.textShow;var k=this.BaseOption.left,q=(a.width-k-this.BaseOption.right-this.dataList.length*this.BarOption.barWidth)/(this.dataList.length-1);k=a.left+k;a=a.top+(this.BarOption.height-c);for(var f=this.dataList[0],p=this.dataList.length,v=1;v<p;v++)this.dataList[v]>
f&&(f=this.dataList[v]);for(v=0;v<this.dataList.length;v++)if(p=this.dataList[v]/f*c,this.ctx.font=this.BarOption.fontSize+"px sans-serif",this.ctx.fillStyle=this.BarOption.colors[v],this.ctx.fillRect(k+v*q+v*g,a+(c-p),g,p),b){var A=""+this.dataList[v],r=this.ctx.measureText(A).width;this.ctx.textBaseline="alphabetic";this.ctx.fillText(A,k+v*q+v*g+g/2-r/2,a+(c-p)-10)}}};this.drawText=function(){if(null!=this.dataList){var a=this.position,b=this.BarOption.barWidth,c=this.TextOption,g=c.fontSize;c=
c.color;var k=this.BaseOption.left,q=(a.width-k-this.BaseOption.right-this.dataList.length*this.BarOption.barWidth)/(this.dataList.length-1);k=a.left+k;a=a.top+this.BarOption.height+this.TextOption.top;this.ctx.textBaseline="top";for(var f=0;f<this.dataList.length;f++){var p=""+this.TextOption.text[f];this.ctx.beginPath();this.ctx.font=""+g+"px "+xGlobal.systemFont;this.ctx.fillStyle=c;var v=this.ctx.measureText(p).width;this.ctx.fillText(p,k+f*q+f*b+b/2-v/2,a);this.ctx.closePath()}}};this.drawGradientLine=
function(){if(null!=this.dataList){var a=this.position,b=this.GradientLineOption,c=b.color;b=b.lineHeight;var g=this.BaseOption.left,k=a.width-g-this.BaseOption.right;g=a.left+g;a=a.top+this.BarOption.height+this.GradientLineOption.lineTop;for(var q=0;3>q;q++){this.ctx.beginPath();var f=this.ctx.createLinearGradient(g+k/3*q,a,g+k/3*q+k/3,a);0==q&&(f.addColorStop(0,"#C74535"),f.addColorStop(1,"#E98A7F"));1==q&&(f.addColorStop(0,"#E98A7F"),f.addColorStop(1,"#9ED3A2"));2==q&&(f.addColorStop(0,"#9ED3A2"),
f.addColorStop(1,"#4BB282"));this.ctx.strokeStyle=null!=c?c:f;this.ctx.lineWidth=b;this.ctx.lineCap="round";this.ctx.moveTo(g+k/3*q,a);this.ctx.lineTo(g+k/3*q+k/3,a);this.ctx.stroke();this.ctx.closePath()}}};this.onPosstionChange=function(a){this.position=a;this.draw()}}drawMemory.getInstance().register("xDrawPilboy",xDrawPilboy.name,"\u67f1\u72b6\u5206\u5e03",{autoDraw:!0});function drawSubsection(a,b,c,g,k,q){b={style:{},width:c.width,type:k.option.type,radius:k.option.radius,data:q?q:k.option.data,fontFamily:k.option.fontFamily,fontSize:k.option.fontSize,fontTop:k.option.fontTop,paddingLeft:c.left,left:k.option.left,widthProportion:k.option.widthProportion,rect:c,colors:null!=k.option.colors?k.option.colors:xGlobal.colors,textColors:null!=k.option.textColors?k.option.textColors:xGlobal.colors,height:c.height,separator:k.option.separator,noBtmText:k.option.noBtmText};
b.top=null==b.top?c.top:c.top+b.top;null==b.height&&(b.height=c.height);null==b.radius&&(b.radius=5);null!=b.left&&(b.paddingLeft+=b.left);g=b.radius;b.widthProportion||(b.widthProportion=1);b.width*=b.widthProportion;var f=[];if(b.data){for(k=0;k<b.data.length;k++){var p=b.data[k].value;p?f.push(p):f.push(1)}f&&(b.data=f)}if("lcr"==b.type){for(k=f=0;k<b.data.length;k++)f+=b.data[k];var v=b.separator||0;var A=b.paddingLeft>b.width?(b.width-5)/f:(b.width-b.paddingLeft-5)/f;b.noBtmText&&(A=(b.width-
2*v-10)/f);p=.024*b.width+b.paddingLeft;k=.024*b.width+b.top;var r=b.data[0]*A;drawParallelogram(a,p,k,b.data[0]*A,2*g,[90,45],b.colors[0]);r=p+r+.005*b.width;var u=b.data[1]*A;drawParallelogram(a,r+v,k,u,2*g,[45,45],b.colors[1]);f=c.width-(r+u);c.width<r+u&&(f=c.width+c.left-(r+u));c=r+u+.005*b.width;b.noBtmText&&(f=b.data[2]*A,c=r+v+u);drawParallelogram(a,c,k,f,2*g,[45,90],b.colors[2]);b.noBtmText||(v="",q[0]&&(v=getValueFormatString(q[0].value,q[0].type,b?b.format:null,q[0].flags)),v||(v="0"),
A=b.fontSize?b.fontSize+"px "+b.fontFamily:.026*(b.width+b.height)+"px "+b.fontFamily,b.fontTop&&(k+=b.fontTop),drawText(a,A,b.textColors[0],v,p,4*g+k),v="",q[1]&&(v=getValueFormatString(q[1].value,q[1].type,b?b.format:null,q[1].flags)),v||(v="0"),p=a.measureText(v).width,drawText(a,A,b.textColors[1],v,r+u/2-p/2,4*g+k),v="",q[2]&&(v=getValueFormatString(q[2].value,q[2].type,b?b.format:null,q[2].flags)),v||(v="0"),q=a.measureText(v).width,drawText(a,A,b.textColors[2],v,c+f-q,4*g+k))}else if("lr"==
b.type){for(k=f=0;k<b.data.length;k++)f+=b.data[k];A=b.width/f;p=c.left;k=c.top;r=A*b.data[0];leftArcColumnar(a,p,k,r,g,"#48B181");rightY=k;f=b.width-r-3;rightArcColumnar(a,p+r+f+3+(b.separator||0),rightY,f,g,"#C74535")}else q=b.width,p=b.height/2,k=b.paddingLeft,f=b.height/2-p/2+b.top,roundRect(a,k,f,q,p,g,!1,!0,null,"#D8D8D8"),f+=p/2,g=.8*p,b=k-g+(b.data[2]-b.data[0])/(b.data[1]-b.data[0])*c.width,b>=k-g&&b<=k+q&&(drawCircle(a,b,f,g,!0,"#FFFFFF"),drawCircle(a,b,f,g,!1,"#028F68"))}
function xDrawSection(){drawBase.call(this);this.autoDraw=!0;this.position=this.callback_actionBounds=this.variables=this.option=this.general=this.parent=this.ctx=null;this.initDraw=!1;this.value=null;this.localData={};this.data=[];this.sectionOption={};this.textOption={};this.created=function(){void 0!=this.option.autoDraw&&(this.autoDraw=this.option.autoDraw);this.sectionOption=Object.assign({},{colors:["#EF5350","#9A9A9A","#1B9877"],height:5,left:10,right:10,top:0,zeroMinWidth:20},this.option.option.sectionOption);
this.textOption=Object.assign({},{show:!0,colors:["#EF5350","#9A9A9A","#1B9877"],fontSize:12,top:5},this.option.option.textOption)};this.draw=function(){var a=this.textOption.show;this.drawSection();a&&this.drawText()};this.drawSection=function(){var a=this.sectionOption,b=a.colors;a=a.zeroMinWidth;var c=this.position,g=c.width,k=this.sectionOption.left,q=this.sectionOption.height,f=c.top+this.sectionOption.top;c=[c.left+k];var p=[];g=g-k-this.sectionOption.right;k=0;for(var v=null,A=(this.value.length-
1)*g*.005,r=0;r<this.value.length;r++)0==this.value[r].value&&k++;if(k)for(r=0;r<this.value.length;r++)0!=this.value[r].value&&(null==v?v=this.value[r].value:v>this.value[r].value&&(v=this.value[r].value));var u=0,z=0;for(r=0;r<this.value.length;r++)0!=this.value[r].value&&(u+=this.value[r].value);if(a/g>v/u*.618){for(r=u=0;r<this.value.length;r++)0!==this.value[r].value&&(u+=this.value[r].value);z=v/u*g/2}else for(g-=k*z,z=a,r=u=0;r<this.value.length;r++)0!==this.value[r].value&&(u+=this.value[r].value);
for(r=0;r<this.value.length;r++)0==this.value[r].value?p.push(z):p.push(this.value[r].value/u*(g-A-k*z));this.widthList=p;for(r=1;r<p.length;r++)c.push(c[r-1]+p[r-1]+.005*g);this.xPositionList=c;for(r=0;r<this.value.length;r++)r,0==r?drawParallelogram(this.ctx,c[r],f,p[r],q,[90,45],b[r]):r==this.value.length-1?drawParallelogram(this.ctx,c[r],f,p[r],q,[45,90],b[r]):drawParallelogram(this.ctx,c[r],f,p[r],q,[45,45],b[r])};this.drawText=function(){var a=this.textOption,b=a.colors,c=this.position.top+
this.sectionOption.top+this.sectionOption.height+this.textOption.top-xGlobal.systemFontOffsetY;a=""+a.fontSize+"px "+xGlobal.systemFont;for(var g=0;g<this.value.length;g++){if(this.value[g].value){var k=this.ctx.measureText(this.value[g].value.toString()).width;var q=this.value[g].value.toString()}else k=this.ctx.measureText("0").width,q="0";0==g?drawText(this.ctx,a,b[g],q,this.xPositionList[g],c):g==this.value.length-1?drawText(this.ctx,a,b[g],q,this.xPositionList[g]+(this.widthList[g]-k),c):drawText(this.ctx,
a,b[g],q,this.xPositionList[g]+(this.widthList[g]-k)/2,c)}};this.onPosstionChange=function(a){this.position=a;this.draw()}}drawMemory.getInstance().register("xDrawSection",xDrawSection.name,"\u5206\u6bb5\u7ebf\u6bb5",{autoDraw:!0});
function drawTextAutoLineForCompany(a,b,c,g,k,q){var f=k.option.paddingLeft;g=k.option.top;b=k.option.maxLines;var p=k.option.fontColor,v=k.option.fontSize;k=k.option.fontFamily;f||(f=0);g||(g=0);a.fillStyle=p?p:"#000";k||(k="Roboto-Regular");a.font=v?v+"px "+k:"12px Roboto-Regular";k=c.left+f;g=c.top+g;f=c.height/b;p=c.width-k;void 0!=q&&q[0]&&drawTextAutoLine(q[0].value,a,k,g,f,p,c.height,b)}
function drawTextAutoLineByField(a,b,c,g,k,q){b=k.option.data;var f=k.option.paddingLeft;g=k.option.top;q=k.option.maxLines;var p=k.option.fontColor,v=k.option.fontSize;k=k.option.fontFamily;f||(f=0);g||(g=0);a.fillStyle=p?p:"#000";k||(k="Roboto-Regular");a.font=v?v+"px "+k:"12px Roboto-Regular";k=c.left+f;drawTextAutoLine(b,a,k,c.top+g,c.height/q,c.width-k,c.height,q)}
function drawRoundCake(a,b,c,g,k,q){b=k.option.data;g=k.option.textData;var f=k.option.colors,p=k.option.dataHeight,v=k.option.size;k.dataType&&"column"==k.dataType&&q&&q.value&&(b=q.value.data);var A=c.left+c.width/2,r=c.top+c.height/2-(k.offsetY||0);v=v?v:100;var u=-90,z=0;a.translate(A,r);for(var H=u*Math.PI/180,C=0;C<b.length;C++)z+=b[C];var U=u*Math.PI/180;for(C=0;C<b.length;C++)a.beginPath(),a.moveTo(0,0),U+=b[C]/50*Math.PI,a.strokeStyle="white",a.fillStyle=f[C],a.arc(0,0,v,H,U),a.fill(),a.closePath(),
a.stroke(),H+=b[C]/50*Math.PI;a.translate(-A,-r);for(C=0;C<b.length;C++){a.beginPath();f[C]||[Math.ceil(255*Math.random()),Math.ceil(255*Math.random()),Math.ceil(255*Math.random())].join();a.fillStyle="#141414";a.strokeStyle="#D8D8D8";H=b[C]/z*360;U=u+.5*H;90<U&&270>U&&(a.textAlign="end");var J=(b[C]/z*100).toFixed(2)+"%";k.noBorder&&(a.fillStyle=f[C],a.strokeStyle=f[C]);var G=a;var B=G.fillText;var L=90<U&&270>U?A+Math.cos(U*Math.PI/180)*(v+30)-10:A+Math.cos(U*Math.PI/180)*(v+30)+10;B.call(G,J,L,
r+5-3+Math.sin(U*Math.PI/180)*(v+20));if(k.noBorder)a.moveTo(A,r),a.lineTo(A+Math.cos(U*Math.PI/180)*(v+20),r+5+Math.sin(U*Math.PI/180)*(v+20));else{G=g[C]||"";B=a;J=B.fillText;L=G;var ba=90<U&&270>U?A+Math.cos(U*Math.PI/180)*(v+30)-10:A+Math.cos(U*Math.PI/180)*(v+30)+10;J.call(B,L,ba,r+5-(p?p:12)/2*1.3+Math.sin(U*Math.PI/180)*(v+20));a.moveTo(A+Math.cos(U*Math.PI/180)*v,r+Math.sin(U*Math.PI/180)*v);a.lineTo(A+Math.cos(U*Math.PI/180)*(v+20),r+5+Math.sin(U*Math.PI/180)*(v+20));B=a;J=B.lineTo;L=90<
U&&270>U?A-80+Math.cos(U*Math.PI/180)*(v+10)-2*G.length:A+80+Math.cos(U*Math.PI/180)*(v+10)+2*G.length;J.call(B,L,r+5+Math.sin(U*Math.PI/180)*(v+20));a.stroke();ba=A+Math.cos(U*Math.PI/180)*v;var N=r+Math.sin(U*Math.PI/180)*v;B=A+Math.cos(U*Math.PI/180)*(v+20);J=r+5-6+Math.sin(U*Math.PI/180)*(v+20);a.moveTo(ba,N);a.lineTo(B,J);a.stroke();L=p?p:22;ba=B;N=J;J-=L;a.moveTo(ba,N);a.lineTo(B,J);a.stroke();ba=B;N=J;a.moveTo(ba,N);a.lineTo(B,J);ba=a;N=ba.lineTo;U=B=90<U&&270>U?A-80+Math.cos(U*Math.PI/180)*
(v+10)-2*G.length:A+80+Math.cos(U*Math.PI/180)*(v+10)+2*G.length;N.call(ba,U,J);a.stroke();ba=B;N=J;J=J+L+6;a.moveTo(ba,N);a.lineTo(B,J)}a.stroke();u+=H;k.hasTextDesc&&(H=0==C%2?30:.5*c.width+10,U=r+v+30+25*Math.floor(C/2),a.fillRect(H,U,11,11),a.fillStyle="#000000",a.strokeStyle="#000000",q.value.text&&q.value.text[C]&&(a.textAlign="left",a.fillText(getSuitableString(a,q.value.text[C],.5*c.width-60),H+19,U+8,.5*c.width-60)))}}
function getSuitableString(a,b,c){return a.measureText(b).width<=c?b:getSuitableString(a,b.substring(0,b.length-1),c)}
function drawFilingsToolList(a,b,c,g,k,q){b=k.option.textData;g=k.option.numberData;k=k.option.colors;if(null!=q){b=[];g=[];for(var f=0;f<q.length;f++){var p=q[f];"f"==p.type&&g.push(p.value);"t"==p.type&&b.push(p.value)}}q=c.left;f=c.top;a.beginPath();f+=10;for(p=0;p<b.length;p++){var v=g[p],A=b[p],r=q+15;roundRect(a,r,f,.12*c.width,20,4,!1,!0,null,k[p%k.length]);var u=r+.12*c.width/2,z=f+10+2;a.textAlign="center";a.textBaseline="middle";drawText(a,a.font,"#FFF",v,u,z);v=r+.12*c.width+20;a.textAlign=
"left";a.textBaseline="middle";drawText(a,"14px Roboto-Medium","#000",A,v,z);f+=30}}function sureUI(a,b,c,g,k,q){var f=c.width,p=c.height;b=k.valueMap;var v=c.left+f/4,A=c.top+p/4;c=q.value;q=k.color;g=function(r,u){roundRect(a,v,A,f/2,p/2,4,!1,!0,null,r);r=v+f/4;var z=A+p/3.5;a.textAlign="center";a.textBaseline="middle";k.font&&(a.font=k.font);drawText(a,a.font,"#FFFFFF",u,r,z)};a.beginPath();null!=q?g(q,c):null!=b[c]&&g(b[c].color,b[c].name)};function GUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}
function xExcel(a,b,c,g,k,q,f,p,v,A){var r,u,z,H,C=this;this.page=b;var U,J={left:0,top:0,width:0,height:0},G,B,L,ba,N,E=-1,V=-1,F=!1,M=!1;this.callInfo=p;this.callbacks=v;this.queryIndex=this.callbacks.getQueryIndex(this);var X=xDeepCopy(g);xDeepCopy(k);xDeepCopy(q);var aa,ia=0,fa=xDeepCopy(f);null==fa&&(fa={});var T,Y,O=null,K=!1,Z,pa,oa,Aa,ta,Q=[],sa=[],ra={lock:[],col:[],row:[],cell:[[],[]]},la={backgroundColor:"#fff",border:"1px solid #bbb",marginLeft:8,marginTop:8,marginRight:8,marginBottom:8,
readOnly:!1,lockColor:"#333",header:{show:!0,height:28,backgroundColor:"#ddd",textColor:"#000",font:"14px "+xGlobal.systemFont,splitLine:"1px solid #fff",cellSplitLine:"1px solid #ddd"},order:{show:!0,width:60,backgroundColor:"#ddd",textColor:"#000",font:"14px "+xGlobal.systemFont,splitLine:"1px solid #fff",cellSplitLine:"1px solid #ddd"},cursor:{border:"2px solid #f88",multiBackgroundColor:"rgba(230,230,255,0.5)"},cell:{width:120,height:32,option:{maxLines:1,textAlign:"left",textBaseline:"middle",
lineHeight:20,margin:4,backgroundColor:"transparent",color:"#000",font:"14px "+xGlobal.systemFont}},scroller:{scrollerV:"show",scrollerH:"show",model:"apple",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"},callback_onChanged:null},Na,Wa,na,ha,ea=0,ja=0,da={col:0,row:0,endCol:null,endRow:null},Oa,Pa,hb="xExcel-Textarea-"+GUID(),Ma=!1;this.destroy=function(){if(pa)for(var W=0;4>W;W++)pa[W]&&pa[W].destroy();c.removeEventListener("mousemove",C.onMouseMove);c.removeEventListener("mouseout",
C.onMouseOut);c.removeEventListener("mousedown",C.onMouseDown);c.removeEventListener("mouseup",C.onMouseUp);c.removeEventListener("mousewheel",C.onMouseWheel);c.removeEventListener("dblclick",C.onDblClick);c.parentElement.removeChild(Pa);c.width=c.height=1};this.getPage=function(){return this.page};this.getCanvas=function(){return c};this.getContext=function(){return U};this.getOption=function(){return la};this.getQueryInfo=function(){return X};this.getVariables=function(){return fa};this.getParentDiv=
function(){return c};this.getObjectClassName=function(){return"xExcel"};this.getObjectId=function(){return c.id};this.setQueryInfo=function(W){X=xDeepCopy(W);C.query()};this.setOption=function(W){xCopyTo(W,la);W.margin&&(la.marginLeft=W.margin,la.marginTop=W.margin,la.marginRight=W.margin,la.marginBottom=W.margin);W.marginLeft&&(la.marginLeft=W.marginLeft);W.marginTop&&(la.marginTop=W.marginTop);W.marginRight&&(la.marginRight=W.marginRight);W.marginBottom&&(la.marginBottom=W.marginBottom);W.callback_mouseOver&&
(la.callback_mouseOver=W.callback_mouseOver);W.callback_mouseOut&&(la.callback_mouseOut=W.callback_mouseOut);"hidden"!=la.scroller.scrollerV?(null==Wa&&(Wa=new xScroll(a,c.parentElement,C,"vertical",la.scroller.model),Wa.setPosition(void 0,la.rowHeight,1,0)),Wa.setOption(W)):Wa=null;"hidden"!=la.scroller.scrollerH?(null==na&&(na=new xScroll(a,c.parentElement,C,"horizontal",la.scroller.model),na.setPosition(0,void 0,0,0,0)),na.setOption(W)):na=null;W.grid&&(null==la.grid?la.grid=xDeepCopy(W.grid):
xCopyAllTo(W.grid,la.grid));W.gridBottom&&(null==la.gridBottom?la.gridBottom=xDeepCopy(W.gridBottom):xCopyAllTo(W.gridBottom,la.gridBottom));la.callback_onChanged=W.callback_onChanged;Jb()};this.setScheme=function(W,Ca){if(T!=W||Y!=Ca){if(W.xList){var ca;(ca=W.xList[Ca]?W.xList[Ca]:W.xList.normal)&&xCopyAllTo(ca,la)}for(ca=0;4>ca;ca++)pa&&pa[ca]&&W.xControl&&W.xControl&&pa[ca].setScheme(W.xControl,Ca);T=W;Y=Ca;C.draw(!0)}};this.show=function(){if(1!=O){null!=O&&C.callbacks&&C.callbacks.sendRestartQuery(C.queryIndex);
O=!0;for(var W=0;4>W;W++)pa&&pa[W]&&pa[W].show();C.draw()}};this.hidden=function(W){if(0!=O){O=!1;1!=W&&C.callbacks.sendPauseQuery(C.queryIndex);for(W=0;4>W;W++)pa&&pa[W]&&pa[W].hidden();E=V=0;c.widget=c.height=1}};this.isShow=function(){return O};var rb=function(W,Ca){if(""==W||0<=W.indexOf("{{ "))if(Ca.callback_errorCondition){if(W=Ca.callback_errorCondition(Ca,W,zb()),typeof W!=W==null)return!1}else if(1==Ca.filterNull){var ca=W.split("and");W=[];Ca="";for(var ya=0;ya<ca.length;ya++)-1==ca[ya].indexOf("{{")&&
W.push(ca[ya]);for(ca=0;ca<W.length;ca++)Ca=0==ca||ca==Ca.length-1?Ca+W[ca]:Ca+("and "+W[ca]);W=Ca}else return;return W};this.query=function(W){if(null!=X){var Ca=X;if(!(null==Ca||Ca[0]&&Ca[0].callback_object)){-1!=Ca.indexOf("{{")&&(Ca=replaceVariablesValue(Ca,fa,aa));if(1!=W){if(0==O)return;C.page&&C.page.setPageBoundStatusForObject(C);if(0==c.offsetHeight||0==c.offsetWidth)return}W=!1;1==M&&(M=!1,W=!0);for(var ca=0;ca<Ca.length;ca++)if(null==Ca[ca]||Ca[ca].queryStatus)Ca[ca]&&1==Ca[ca].queryStatus&&
(Ca[ca].queryStatus=2);else{var ya=null;if(Ca[ca].server&&""!=Ca[ca].server){var bb=Ca[ca].server.slice(10);fa&&fa[bb]&&""!=fa[bb]&&(ya=fa[bb])}bb=null;Ca[ca].http&&(bb=replaceVariablesValue(Ca[ca].http,fa,aa));if(Ca[ca].sql&&(null==bb||"http"!=bb.substr(0,4).toLowerCase())){var ib=replaceVariablesValue(Ca[ca].sql,fa,aa,null,windowLimit);tableName[ca]=parseTableName(ib);bb=rb(ib,Ca[ca]);if(null!=bb&&(ib=bb,!(null==ib||""==ib||0<=ib.indexOf("{{ ")))){if(null==Ca[ca].query||Ca[ca].query.script!=ib)W=
isSynBound=!0,Ca[ca].queryStatus=1,1==noDefinedHeader&&(header=null,isInitHeader=!1);null==Ca[ca].query&&(W=!0,Ca[ca].queryStatus=1);1==Ca[ca].queryStatus&&(Ca[ca].query={script:ib,limit:limit,server:ya})}}else if(Ca[ca].http&&bb&&""!=bb){Ca[ca].field&&replaceVariablesValue(Ca[ca].field,fa,aa);var gb=Ca[ca].script?replaceVariablesValue(Ca[ca].script,fa,aa):replaceVariablesValue(Ca[ca].condition,fa,aa);ya=rb(gb,Ca[ca]);if(null!=ya&&(gb=ya,!(null==gb||""==gb||0<=gb.indexOf("{{ "))&&(ib=";"+gb,null==
Ca[ca].query||ib!=Ca[ca].query.script))){if(null==Ca[ca].query||ib!=Ca[ca].query.script)0<ca&&Ca[0].http||ia++;Ca[ca].queryStatus=1;Ca[ca].query={script:ib,limit:null,field:"",condition:gb,id:ia,server:bb};C.callbacks.sendHttpQuery(C.queryIndex,Ca,ca,C.setTable);_condition=gb}}}W&&(C.callbacks.sendQuery(C.queryIndex,Ca,C.setTable),_condition=gb)}}};var zb=function(){return{option:la,variables:fa,target:C,page:C.page}};this.setTable=function(W,Ca,ca,ya){aa=xDeepCopy(W);K=!1;if((W=X)&&aa)for("String"==
X.constructor.name&&-1!=X.indexOf("{{")&&(W=replaceVariablesValue(W,fa,aa)),ya=0;ya<W.length;ya++)W[ya]&&aa[ya]&&aa[ya].updateCounter!=W[ya].updateCounter&&(W[ya].callback_onMessage&&W[ya].callback_onMessage(aa[ya],Ca,ca,zb(),aa),W[ya].queryStatus=null)};this.getExcelData=function(){return ra};this.setExcelData=function(W){ra=xDeepCopy(W);N=null;C.draw(!0)};this.reCalculateRowHeight=function(W,Ca){if(null!=U){var ca=ra.row[Ca]||0,ya=ra.cell[W][Ca];void 0!=ya.value&&null!=ya.value&&""!=ya.value&&-1==
ya.option.maxLines&&(W=getHeight(U,ya.value,ya.option.font||la.cell.option.font,la.cell.option.lineHeight,ra.col[W]||la.cell.width),W+=20,32<W&&W>ca&&(ra.row[Ca]=W))}};this.draw=function(W){if(null!=c&&null!=c.parentElement){var Ca=c.parentElement.offsetWidth,ca=c.parentElement.offsetHeight;if(null!=c&&0!=Ca&&0!=ca&&(0!=W||E!=Ca||V!=ca)&&0!=F){E=Ca;V=ca;J.top=0;J.left=0;J.width=Ca;J.height=ca;B=xDeepCopy(J);null==U&&(U=c.getContext("2d"));pixelRatio=getPixelRatio(U);c.width=Ca*pixelRatio;c.height=
ca*pixelRatio;c.style.left=0;c.style.top=0;c.style.width=Ca+"px";c.style.height=ca+"px";1<pixelRatio&&U.setTransform(pixelRatio,0,0,pixelRatio,0,0);U.translate(.5,.5);U.lineWidth=1;U.beginPath();U.fillStyle=la.backgroundColor;U.fillRect(J.left-.5,J.top-.5,J.width+1,J.height+1);U.closePath();la.marginLeft&&(J.left+=la.marginLeft,J.width-=la.marginLeft);la.marginTop&&(J.top+=la.marginTop,J.height-=la.marginTop);la.marginRight&&(J.width-=la.marginRight);la.marginBottom&&(J.height-=la.marginBottom);G=
xDeepCopy(J);for(W=0;4>W;W++){var ya=C.getGrid(W);if(ya){null==Z&&(Z=[]);Z[W]={left:G.left,top:G.top,width:G.width-1,height:G.height-1};if(ya.size){var bb=ya.size.width;var ib=ya.size.height;"auto"==bb&&(bb=0);"auto"==ib&&(ib=0);switch(W){case 2:J.left+=bb;J.width-=bb;Z[W].width=J.left;break;case 3:Z[W].left=J.left+J.width-bb;Z[W].width=bb;J.height-=bb;break;case 1:Z[W].top=J.top+J.height-ib;Z[W].height=ib;J.height-=ib;break;case 4:Z[W].top=J.top+headerHeight;Z[W].height=ib;J.top+=headerHeight;J.height-=
ib;break;default:J.top+=ib,Z[W].height=ib,J.height-=ib}}bb=pa[W].setCellsPosition(Z[W],ya);if(pa[W]&&(null==ya.size||"auto"==ya.size.height)){ib=bb.height+8;switch(W){case 1:J.height-=ib;Z[W].top=J.top+J.height;break;default:J.top+=ib,J.height-=ib}Z[W].height=ib;ya.option&&(ya.option.marginLeft&&(Z[W].left+=ya.option.marginLeft,Z[W].width-=ya.option.marginLeft),ya.option.marginTop&&(Z[W].top+=ya.option.marginTop,Z[W].height-=ya.option.marginTop),ya.option.marginRight&&(Z[W].width-=ya.option.marginRight),
ya.option.marginBottom&&(Z[W].height-=ya.option.marginBottom))}}}L=1==la.header.show?{left:J.left+la.order.width,top:J.top,width:J.left+J.width-la.order.width,height:la.header.height}:{left:J.left,top:J.top,width:0,height:0};1==la.order.show?(r=J.left,u=L.top+L.height,z=la.order.width,H=J.top+J.height-(L.height+L.top)):(r=J.left,u=L.top+L.height,z=0,H=0);ba={left:L.left,top:u,width:J.width-z,height:J.height-L.height};W=1;ya=L.left+1;bb=u+1;var gb=ib=0,Bb=0,Hb=0;rect=ba;if(ra.lock&&null!=ra.lock[0]&&
null!=ra.lock[1]){rect=Cb(ra.lock[0]-1,ra.lock[1]-1);rect.left+=rect.width;rect.top+=rect.height;rect.width=J.width+J.left-rect.left;rect.height=J.height+J.top-rect.top;Bb=ib=ra.lock[0];for(var nb=0;nb<ib;nb++){Q[nb]=ya;ra.cell[nb]&&W<ra.cell[nb].length&&(W=ra.cell[nb].length);if(la.readOnly){if(nb>ra.cell[nb].length)break}else if(ya>E+64&&nb>ra.col.length)break;if(null!=ra.col[nb]){var Pb=parseInt(ra.col[nb]);isNaN(Pb)&&(Pb=ra.col[nb]=la.cell.width);ya+=Pb}else ya+=la.cell.width}0<ra.lock[0]&&ya++;
Hb=gb=ra.lock[1];for(nb=0;nb<gb;nb++){sa[nb]=bb;if(la.readOnly){if(nb>W)break}else if(bb>V+64)break;null!=ra.row[nb]?(Pb=parseInt(ra.row[nb]),isNaN(Pb)&&(ra.row[nb]=la.cell.height),bb+=ra.row[nb]):bb+=la.cell.height}0<ra.lock[1]&&bb++}else ra.lock=null;var bc=Cb(Q.length-1,sa.length-1);ya-=ea;for(nb=ib;;nb++){Q[nb]=ya;ra.cell[nb]&&W<ra.cell[nb].length&&(W=ra.cell[nb].length);if(la.readOnly){if(nb>=ra.cell.length){ea+rect.width>Q[nb]+bc.width-Q[Bb]&&(ea=Q[nb]+bc.width-Q[Bb]-rect.width,0>ea&&(ea=0));
Q.splice(nb);break}}else if(ya>E+64&&nb>ra.col.length){Q.splice(nb+1);break}null!=ra.col[nb]?(Pb=parseInt(ra.col[nb]),isNaN(Pb)&&(Pb=ra.col[nb]=la.cell.width),ya+=Pb):ya+=la.cell.width}bb-=ja;for(nb=gb;;nb++){sa[nb]=bb;if(la.readOnly){if(nb>=W){ja+rect.height>sa[nb]+bc.height-sa[Hb]&&(ja=sa[nb]+bc.height-sa[Hb]-rect.height);0>ja&&(ja=0);sa.splice(nb);break}}else if(bb>V+64&&nb>ra.row.length){sa.splice(nb+1);break}null!=ra.row[nb]?(Pb=parseInt(ra.row[nb]),isNaN(Pb)&&(ra.row[nb]=la.cell.height),bb+=
ra.row[nb]):bb+=la.cell.height}W=U;bb=parseLineSet(la.header.cellSplitLine);ib=parseLineSet(la.order.cellSplitLine);ya=Db();for(gb=0;4>gb;gb++){Pb=0;Bb=Q.length;Hb=0;bc=sa.length;if(ra.lock){nb=Cb(ra.lock[0]-1,ra.lock[1]-1);nb.left+=nb.width;nb.top+=nb.height;switch(gb){case 0:Pb=ra.lock[0];Hb=ra.lock[1];break;case 1:Bb=ra.lock[0];nb.width=nb.left-ba.left;nb.left=ba.left;nb.height=ba.height-nb.top+ba.top;0==ra.lock[1]&&(nb.top=J.top,nb.height=J.height);break;case 2:Pb=ra.lock[0];bc=ra.lock[1];nb.height=
nb.top-ba.top;nb.top=ba.top;nb.width=ba.width-nb.left+ba.left;0==ra.lock[0]&&(nb.left=J.left,nb.width=J.width);break;case 3:Bb=ra.lock[0],bc=ra.lock[1],nb.height=nb.top-ba.top,nb.width=nb.left-ba.left,nb.left=ba.left,nb.top=ba.top}gb&&(W.beginPath(),W.fillStyle=la.backgroundColor,W.fillRect(nb.left-.5,nb.top-.5,nb.width+1,nb.height+1),W.closePath())}for(;Pb<Bb&&!(Q[Pb]>J.let+J.width);Pb++)for(var Tb=Hb;Tb<bc;Tb++){var Xb=!0;if(sa[Tb]>J.top+J.height)break;null==ra.cell[Pb]||null==ra.cell[Pb][Tb]?Xb=
-1:!ra.cell[Pb][Tb].merge||ra.cell[Pb][Tb].merge.startCol==Pb&&ra.cell[Pb][Tb].merge.startRow==Tb||(Xb=!1);nb=Cb(Pb,Tb);if(!(nb.left+nb.width<ba.left||nb.top+nb.height<ba.top)){if(Xb){if(1==Xb){null==N&&(N=[]);null==N[Pb]&&(N[Pb]=[]);if(null==N[Pb][Tb]){null==ra.cell[Pb][Tb]&&(ra.cell[Pb][Tb]={});var ma=ra.cell[Pb][Tb].option;null==ma&&(ma=la.cell.option);N[Pb][Tb]=new xCell(C,ma);N[Pb][Tb].setValue({value:ra.cell[Pb][Tb].value,type:"t"})}N[Pb][Tb].geometry=nb}1==Xb&&ra.cell[Pb][Tb].prop&&ra.cell[Pb][Tb].prop.backgroundColor&&
"transparent"!=ra.cell[Pb][Tb].prop.backgroundColor&&(W.fillStyle=ra.cell[Pb][Tb].prop.backgroundColor,W.fillRect(nb.left,nb.top,nb.width,nb.height),W.fill());null!=da.endCol&&null!=da.endRow&&(Pb!=da.col||Tb!=da.row)&&Pb>=da.startCol0&&Pb<=da.endCol0&&Tb>=da.startRow0&&Tb<=da.endRow0&&(W.fillStyle=la.cursor.multiBackgroundColor,W.fillRect(nb.left,nb.top,nb.width,nb.height),W.fill());1==Xb&&N[Pb][Tb].draw(W)}W.beginPath();W.lineWidth=bb.width;W.strokeStyle=bb.color;W.setLineDash(bb.dash);W.moveTo(nb.left+
nb.width,nb.top);W.lineTo(nb.left+nb.width,nb.top+nb.height);W.stroke();W.closePath();W.beginPath();W.lineWidth=ib.width;W.strokeStyle=ib.color;W.setLineDash(ib.dash);W.moveTo(nb.left,nb.top+nb.height);W.lineTo(nb.left+nb.width,nb.top+nb.height);W.stroke();W.closePath()}}switch(gb){case 0:(null!=da.select&&null==ra.lock||da.col>=ya.col&&da.row>=ya.row)&&cb(W);break;case 1:null==da.select&&0<=da.col&&da.col<ya.col&&da.row>=ya.row&&cb(W);break;case 2:null==da.select&&0<=da.row&&da.col>=ya.col&&da.row<
ya.row&&cb(W);break;case 3:(null!=da.select||0<=da.col&&0<=da.row&&da.col<ya.col&&da.row<ya.row)&&cb(W)}if(null==ra.lock)break}ra.lock&&(bb=parseLineSet(la.lockColor),W.beginPath(),W.lineWidth=bb.width,W.strokeStyle=bb.color,W.setLineDash(bb.dash),ra.lock[0]&&(W.moveTo(ya.left,J.top),W.lineTo(ya.left,J.top+J.height)),ra.lock[1]&&(W.moveTo(J.left,ya.top),W.lineTo(J.left+J.width,ya.top)),W.stroke(),W.closePath());Ab(U);W=Db();(da.select||W.isLocked&&(0==da.col||da.col<W.col||null!=da.startCol0&&((0==
da.startCol0||da.startCol0<W.col)&&da.endCol0>=W.col||(0==da.startRow0||da.startRow0<W.row)&&da.endRow0>=W.row)))&&cb(U);U.fillStyle=la.backgroundColor;la.marginLeft&&(rect={left:-.5,top:-.5,width:r+.5,height:ca+.5},U.fillRect(rect.left,rect.top,rect.width,rect.height));la.marginTop&&(rect={left:-.5,top:-.5,width:Ca+.5,height:L.top+.5},U.fillRect(rect.left,rect.top,rect.width,rect.height));la.marginRight&&(rect={left:J.left+J.width+1,top:0,width:la.marginRight,height:ca},U.fillRect(rect.left,rect.top,
rect.width,rect.height));la.marginBottom&&(rect={left:-.5,top:J.top+J.height+1,width:Ca,height:la.marginBottom},U.fillRect(rect.left,rect.top,rect.width,rect.height));W=U;if(pa)for(ya=0;4>ya;ya++)if(bb=C.getGrid(ya)){W.beginPath();W.fillStyle=la.backgroundColor;ib=Z[ya].left-.5;gb=Z[ya].top-.5;Bb=Z[ya].width+1;Hb=Z[ya].height;switch(ya){case 0:ib=B.left;gb=B.top;Bb=B.width;Hb=J.top-B.top-1;break;case 1:ib=B.left,gb=J.top+J.height-1,Bb=B.width,Hb=B.top+B.height-(J.top+J.height)}W.fillRect(ib,gb,Bb,
Hb);W.closePath();var fc;ib=0;if(bb.option&&bb.option.backgroundColor&&"transparent"!=bb.option.backgroundColor){var wa=bb.option.backgroundColor;bb.option.border&&(fc=parseLineSet(bb.option.border));bb.option.borderRadius&&(ib=bb.option.borderRadius)}else bb.backgroundColor&&"transparent"!=bb.backgroundColor&&(wa=la.backgroundColor,bb.border&&(fc=parseLineSet(bb.border)),bb.borderRadius&&(ib=bb.borderRadius));wa&&"transparent"!=wa&&(W.beginPath(),fillRoundRect(W,Z[ya].left-.5,Z[ya].top-.5,Z[ya].width+
1,Z[ya].height-1,ib,wa,fc?fc.color:null),W.closePath());pa[ya].setValue(0,aa,fa);1==pa[ya].draw(W,bb,Z[ya].left,Z[ya].top,Z[ya])&&(pa[ya].setCellsPosition(rectGrid0,bb.option),pa[ya].draw(W,bb,Z[ya].left,Z[ya].top,Z[ya]))}W=Db();wa=Cb(Q.length-1,sa.length-1);Wa&&(Wa.setPosition(void 0,W.top,Ca-(W.left+W.width),ca-(W.top+W.height)),Wa.setSliderPos(ja,W.height,sa[sa.length-1]+wa.height-sa[W.row]));na&&(na.setPosition(W.left,void 0,ca-(W.top+W.height),Ca-(W.left+W.width)),na.setSliderPos(ea,W.width,
Q[Q.length-1]+wa.width-Q[W.col]))}}};this.setPos=function(W,Ca){var ca=0,ya=0;ra.lock&&(ca=ra.lock[0],ya=ra.lock[1]);var bb=Cb(Q.length-1,sa.length-1);W==Wa?(ja=Ca,0>ja&&(ja=0),ja>sa[sa.length-1]+bb.height-sa[ya]&&(ja=sa[sa.length-1]+bb.height-sa[ya])):W==na&&(ea=Ca,0>ea&&(ea=0),ea>Q[Q.length-1]+bb.width-Q[ca]&&(ea=Q[Q.length-1]+bb.width-Q[ca]));C.draw(!0)};this.getGridCells=function(W){return pa[W]};this.getGrid=function(W){switch(W){case 0:if(la.grid&&la.grid.init&&la.grid.init.vBox)var Ca=la.grid;
break;case 1:la.gridBottom&&la.gridBottom.init&&la.gridBottom.init.vBox&&(Ca=la.gridBottom);break;case 2:la.gridLeft&&la.gridLeft.init&&la.gridLeft.init.vBox&&(Ca=la.gridLeft);break;case 3:la.gridRight&&la.gridRight.init&&la.gridRight.init.vBox&&(Ca=la.gridRight)}return Ca};this.reCreateGrid=function(W){W=void 0===W?!0:W;Jb();W&&C.draw(!0)};var Jb=function(){for(var W=0;4>W;W++){var Ca=C.getGrid(W);Ca&&(null==pa&&(pa=[]),Ca=createGrid(Ca.init.vBox,aa,fa),Ca=makeCells(Ca,"hBox",C.draw),pa[W]=new xCells(C,
Ca,"vBox",fa),pa[W].setValue(0,aa,fa),T&&Y&&T.xControl&&T.xControl&&pa[W].setScheme(T.xControl,Y))}},Cb=function(W,Ca){if(ra.cell[W]&&ra.cell[W][Ca])var ca=ra.cell[W][Ca].merge;if(ca){var ya={left:Q[ca.startCol],top:sa[ca.startRow],width:0,height:0};for(W=ca.startCol;W<=ca.endCol;W++)ya.width=null!=ra.col[W]?ya.width+ra.col[W]:ya.width+la.cell.width;for(W=ca.startRow;W<=ca.endRow;W++)ya.height=null!=ra.row[W]?ya.height+ra.row[W]:ya.height+la.cell.height}else ya={left:Q[W],top:sa[Ca]},ya.width=null!=
ra.col[W]?ra.col[W]:la.cell.width,ya.height=null!=ra.row[Ca]?ra.row[Ca]:la.cell.height;return ya},Db=function(){var W=0,Ca=0,ca=xDeepCopy(ba);if(ra.lock){ca.isLocked=!0;W=ra.lock[0];Ca=ra.lock[1];var ya=Cb(0==W?0:W-1,0==Ca?0:Ca-1);0<W&&(ya.left+=ya.width,ca.width=ca.left+ca.width-ya.left,ca.left=ya.left);0<Ca&&(ya.top+=ya.height,ca.height=ca.top+ca.height-ya.top,ca.top=ya.top)}ca.col=W;ca.row=Ca;return ca},cb=function(W){if(null!=da.col&&null!=da.row){var Ca=Db(),ca=parseLineSet(la.cursor.border);
W.strokeStyle=ca.color;W.lineWidth=ca.width;W.setLineDash(ca.dash);if("corn"==da.select)W.beginPath(),W.moveTo(ba.left+ba.width,ba.top+1+.5),W.lineTo(ba.left+1+.5,ba.top+1+.5),W.lineTo(ba.left+1+.5,ba.width,ba.top+ba.height),W.stroke(),W.closePath();else if("col"==da.select){W.beginPath();var ya=ra.col[da.endCol0];null==ya&&(ya=la.cell.width);if(Ca.isLocked&&da.startCol0<ra.lock[0]&&da.endCol0>=ra.lock[0]){var bb={y:L.top+L.height};W.moveTo(Q[da.startCol0]+.5,ba.top+ba.height);W.lineTo(Q[da.startCol0]+
.5,ba.top+.5);Q[da.endCol0]+ya>Ca.left?(W.lineTo(Q[da.endCol0]+ya-3,ba.top+.5),W.moveTo(Q[da.endCol0]+ya-.5,ba.top+3),W.lineTo(Q[da.endCol0]+ya-.5,ba.top+ba.height),bb.x=Q[da.endCol0]+ya):(W.lineTo(Ca.left-3,ba.top+.5),W.moveTo(Ca.left-.5,ba.top+3),W.lineTo(Ca.left-.5,ba.top+ba.height),bb.x=Ca.left)}else Ca.isLocked&&da.startCol0>=ra.lock[0]?Q[da.endCol0]+ya>=Ca.left&&(bb={y:L.top+L.height},Q[da.startCol0]+.5<Ca.left?W.moveTo(Ca.left,ba.top+.5):(W.moveTo(Q[da.startCol0]+.5,ba.top+ba.height),W.lineTo(Q[da.startCol0]+
.5,ba.top+.5)),W.lineTo(Q[da.endCol0]+ya-3,ba.top+.5),W.moveTo(Q[da.endCol0]+ya-.5,ba.top+3),W.lineTo(Q[da.endCol0]+ya-.5,ba.top+ba.height),bb.x=Q[da.endCol0]+ya):Q[da.endCol0]>=Ca.left||da.col<Ca.col?Q[da.endCol0]<ba.left?Q[da.endCol0]+ya>=ba.left&&(W.moveTo(Q[da.endCol0]+ya-3,L.top+L.height+.5),W.lineTo(ba.left+.5,L.top+L.height+.5),W.moveTo(ba.left+.5,ba.top-.5+ba.height),W.lineTo(Q[da.endCol0]+ya-.5-.5,ba.top+ba.height),W.lineTo(Q[da.endCol0]+ya-.5,L.top+L.height+3),bb={x:Q[da.endCol0]+ya,y:L.top+
L.height}):(W.moveTo(Q[da.endCol0]+ya-3,L.top+L.height+.5),W.lineTo(Q[da.startCol0]+.5,L.top+L.height+.5),W.lineTo(Q[da.startCol0]+.5,ba.top-.5+ba.height),W.moveTo(Q[da.endCol0]+ya-.5-.5,ba.top+ba.height),W.lineTo(Q[da.endCol0]+ya-.5,L.top+L.height+3),bb={x:Q[da.endCol0]+ya,y:L.top+L.height}):Q[da.endCol0]+ya>=Ca.left&&(W.moveTo(Q[da.endCol0]+ya-3,L.top+L.height+.5),W.lineTo(Ca.left,L.top+L.height+.5),W.moveTo(Q[da.endCol0]+ya-.5,ba.top+ba.height),W.lineTo(Q[da.endCol0]+ya-.5,L.top+L.height+3),bb=
{x:Q[da.endCol0]+ya,y:L.top+L.height});W.stroke();W.closePath()}else"row"==da.select?(W.beginPath(),ya=ra.row[da.endRow0],null==ya&&(ya=la.cell.height),Ca.isLocked&&da.startRow0<ra.lock[1]&&da.endRow0>=ra.lock[1]?(bb={x:r+z},W.moveTo(ba.left+ba.width,sa[da.startRow0]+.5),W.lineTo(r+z,sa[da.startRow0]+.5),sa[da.endRow0]+ya>Ca.top?(W.lineTo(r+z,sa[da.endRow0]+ya-3),W.moveTo(r+z-.5+3,sa[da.endRow0]+ya-.5),W.lineTo(ba.left+ba.width,sa[da.endRow0]+ya-.5),bb.y=sa[da.endRow0]+ya):(W.lineTo(r+z,Ca.top-3),
W.moveTo(r+z-.5+3,Ca.top-.5),W.lineTo(ba.left+ba.width,Ca.top-.5),bb.y=Ca.top-.5)):Ca.isLocked&&da.startRow0>=ra.lock[1]?sa[da.endRow0]+ya>=Ca.top&&(bb={x:r+z},sa[da.startRow0]+.5<Ca.top?(W.moveTo(r+z,Ca.top),W.lineTo(r+z,sa[da.endRow0]+ya-3)):(W.moveTo(ba.left+ba.width,sa[da.startRow0]+.5),W.lineTo(r+z,sa[da.startRow0]+.5),W.lineTo(r+z,sa[da.endRow0]+ya-3-.5)),W.moveTo(r+z-.5+3,sa[da.endRow0]+ya-.5),W.lineTo(ba.left+ba.width,sa[da.endRow0]+ya-.5),bb.y=sa[da.endRow0]+ya):sa[da.endRow0]>=Ca.top||da.row<
Ca.row?sa[da.startRow0]<ba.top?sa[da.endRow0]+ya>=ba.top&&(W.moveTo(r+z,sa[da.endRow0]+ya-3),W.lineTo(r+z,ba.top+.5),W.moveTo(ba.left+ba.width,ba.top+.5),W.lineTo(ba.left+ba.width,sa[da.endRow0]+ya-.5),W.lineTo(r+z-.5+3,sa[da.endRow0]+ya-.5)):(W.moveTo(r+z,sa[da.endRow0]+ya-3),W.lineTo(r+z,sa[da.startRow0]+.5),W.lineTo(ba.left+ba.width,sa[da.startRow0]+.5),W.moveTo(ba.left+ba.width,sa[da.endRow0]+ya-.5),W.lineTo(r+z-.5+3,sa[da.endRow0]+ya-.5)):sa[da.startRow0]+ya>=Ca.top&&(W.moveTo(r+z,sa[da.startRow0]+
ya-3),W.lineTo(r+z,Ca.top),W.moveTo(ba.left+ba.width,sa[da.endRow0]+ya-.5),W.lineTo(r+z-.5+3,sa[da.endRow0]+ya-.5)),W.stroke(),W.closePath(),bb&&bb.y-2>ba.top&&(W.fillStyle=ca.color,W.fillRect(bb.x-2,bb.y-2,4,4))):(da.col>=Q.length&&(da.col=Q-1),0>da.col&&(da.col=0),da.row>=sa.length&&(da.row=sa.length-1),0>da.row&&(da.row=0),0<=da.col&&da.col<Q.length&&0<=da.row&&da.row<sa.length&&(ya=Cb(da.col,da.row),null!=da.startCol0&&(ya=Cb(da.startCol0,da.startRow0),Ca=Cb(da.endCol0,da.endRow0),ya.width=Ca.left+
Ca.width-ya.left,ya.height=Ca.top+Ca.height-ya.top,Ca=Db(),Ca.isLocked&&(da.startCol0<Ca.col&&da.endCol0>=Ca.col&&ya.left+ya.width<Ca.left&&(ya.width=Ca.left-ya.left),da.startRow0<Ca.row&&da.endRow0>=Ca.row&&ya.top+ya.height<Ca.top&&(ya.height=Ca.top-ya.top))),W.beginPath(),W.strokeStyle=ca.color,W.lineWidth=ca.width,W.setLineDash(ca.dash),Ca.isLocked?da.startCol0<ra.lock[0]&&da.startRow0>=ra.lock[1]&&ya.top<=Ca.top?ya.top+ya.height>Ca.top&&(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(ya.left+
.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,Ca.top+.5),W.moveTo(ya.left+ya.width-.5,Ca.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+ya.height-3),bb={x:ya.left+ya.width,y:ya.top+ya.height}):ra.lock[0]&&da.startCol0>=ra.lock[0]&&da.startRow0<ra.lock[1]&&ya.left<=Ca.left?ya.left+ya.width>Ca.left&&(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(Ca.left+.5,ya.top+ya.height-.5),W.moveTo(Ca.left+.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+ya.height-
3),bb={x:ya.left+ya.width,y:ya.top+ya.height}):ra.lock[1]&&da.startRow0<ra.lock[1]||ra.lock[0]&&da.startCol0<ra.lock[0]?ra.lock[1]&&null==da.startRow0&&da.row>=ra.lock[1]&&ya.top<Ca.top?ya.top+ya.height>Ca.top&&(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,Ca.top+.5),W.moveTo(ya.left+ya.width-.5,Ca.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+ya.height-3),bb={x:ya.left+ya.width,y:ya.top+ya.height}):(W.moveTo(ya.left+ya.width-3,ya.top+
ya.height-.5),W.lineTo(ya.left+.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+ya.height-3),bb={x:ya.left+ya.width,y:ya.top+ya.height}):(ya.top+ya.height>Ca.top&&ya.top<Ca.top?ya.top<Ca.top?(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,Ca.top+.5),W.moveTo(ya.left+ya.width-.5,Ca.top+.5)):(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(ya.left+
.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+.5)):(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+.5)),W.lineTo(ya.left+ya.width-.5,ya.top+ya.height-3),bb={x:ya.left+ya.width,y:ya.top+ya.height}):(W.moveTo(ya.left+ya.width-3,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+ya.height-.5),W.lineTo(ya.left+.5,ya.top+.5),W.lineTo(ya.left+ya.width-.5,
ya.top+.5),W.lineTo(ya.left+ya.width-.5,ya.top+ya.height-3),bb={x:ya.left+ya.width,y:ya.top+ya.height}),W.stroke(),W.closePath()));bb&&bb.y>=ba.top&&(W.fillStyle=ca.color,W.fillRect(bb.x-2,bb.y-2,4,4))}},Ab=function(W){var Ca=function(Pb){var bc="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")[Pb%26];0<parseInt(Pb/26)&&(bc+=Ca(parseInt(Pb/26)));return bc};if(1==la.header.show&&0<L.height){W.textAlign="center";W.textBaseline="middle";W.fillStyle="#000";W.font=la.header.font;nb=parseLineSet(la.header.splitLine);
for(var ca=0;2>ca;ca++){var ya=L.left,bb=L.top+la.header.height/2;ya=0;var ib=Q.length;ra.lock&&(0==ca?ya=ra.lock[0]:ib=ra.lock[0]);for(var gb=ya;gb<ib;gb++){ya=Q[gb];if(ya>J.left+J.width)break;var Bb=null!=ra.col[gb]?ra.col[gb]:la.cell.width;var Hb=!1;gb==da.col||null!=da.startCol0&&gb>=da.startCol0&&gb<=da.endCol0?(W.fillStyle=la.backgroundColor,W.fillRect(ya,L.top,Bb,L.height),"col"==da.select?(W.fillStyle=la.cursor.multiBackgroundColor,W.fillRect(ya,L.top,Bb,L.height)):(W.fillStyle=la.header.backgroundColor,
W.fillRect(ya,L.top,Bb,L.height),Hb=!0)):(W.fillStyle=la.header.backgroundColor,W.fillRect(ya,L.top,Bb,L.height));W.beginPath();W.strokeStyle=nb.color;W.lineWidth=nb.width;W.setLineDash(nb.dash);W.moveTo(ya,L.top);W.lineTo(ya,L.top+L.height);W.stroke();W.closePath();W.fillStyle=la.header.textColor;W.fillText(Ca(gb),ya+Bb/2,bb);Hb&&(W.beginPath(),Hb=parseLineSet(la.cursor.border),W.strokeStyle=Hb.color,W.lineWidth=Hb.width,W.setLineDash(Hb.dash),W.moveTo(ya-1,L.top+L.height-1),W.lineTo(ya+Bb+2,L.top+
L.height-1),W.stroke(),W.closePath())}if(null==ra.lock)break}}if(1==la.order.show&&0<z)for(W.font=la.order.font,nb=parseLineSet(la.order.splitLine),ca=0;2>ca;ca++)for(ya=r,bb=u,bb=0,ib=sa.length,ra.lock&&(0==ca?bb=ra.lock[1]:ib=ra.lock[1]),gb=bb;gb<ib;gb++){bb=sa[gb];if(bb>J.top+J.height)break;Bb=null!=ra.row[gb]?ra.row[gb]:la.cell.height;Hb=!1;gb==da.row||null!=da.startRow0&&gb>=da.startRow0&&gb<=da.endRow0?(W.fillStyle=la.backgroundColor,W.fillRect(ya,bb,z,Bb),"row"==da.select?(W.fillStyle=la.cursor.multiBackgroundColor,
W.fillRect(ya,bb,z,Bb)):(W.fillStyle=la.order.backgroundColor,W.fillRect(ya,bb,z,Bb),Hb=!0)):(W.fillStyle=la.order.backgroundColor,W.fillRect(ya,bb,z,Bb));W.beginPath();W.strokeStyle=nb.color;W.lineWidth=nb.width;W.setLineDash(nb.dash);W.moveTo(ya,bb);W.lineTo(ya+z,bb);W.stroke();W.closePath();W.fillStyle=la.order.textColor;W.fillText(gb+1,ya+z/2,bb+Bb/2);Hb&&(W.beginPath(),Hb=parseLineSet(la.cursor.border),W.strokeStyle=Hb.color,W.lineWidth=Hb.width,W.setLineDash(Hb.dash),W.moveTo(r+z-1,bb-1),W.lineTo(r+
z-1,bb+Bb+2),W.stroke(),W.closePath())}0<L.height&&0<z&&(ca=J.left,ya=J.top,bb=L.left-J.left,Hb=L.height,W.fillStyle=la.header.backgroundColor,W.fillRect(ca,ya,bb+1,Hb+1),W.beginPath(),nb=parseLineSet(la.header.splitLine),W.strokeStyle=nb.color,W.lineWidth=nb.width,W.setLineDash(nb.dash),W.moveTo(ca+bb+.5,ya),W.lineTo(ca+bb+.5,ya+Hb),W.stroke(),W.closePath(),W.beginPath(),nb=parseLineSet(la.order.splitLine),W.strokeStyle=nb.color,W.lineWidth=nb.width,W.setLineDash(nb.dash),W.moveTo(ca,ya+Hb+.5),W.lineTo(ca+
bb,ya+Hb+.5),W.stroke(),W.closePath());var nb=parseLineSet(la.border);W.beginPath();W.strokeStyle=nb.color;W.lineWidth=nb.width;W.setLineDash(nb.dash);W.moveTo(J.left,J.top);W.lineTo(J.left+J.width+1,J.top);W.lineTo(J.left+J.width+1,J.top+J.height+1);W.lineTo(J.left,J.top+J.height+1);W.lineTo(J.left,J.top);W.stroke();W.closePath()};this.setBounds=function(W){};var Gb=function(W,Ca,ca){if("col"==ca)for(ca=0;ca<Q.length;ca++){if(W>=Q[ca]&&W<=Q[ca]+(null!=ra.col[ca]?ra.col[ca]:la.cell.width))return{col:ca}}else if("row"==
ca)for(W=0;W<sa.length;W++){if(Ca>=sa[W]&&Ca<=sa[W]+(null!=ra.row[W]?ra.row[W]:la.cell.height))return{row:W}}else if(W>=J.left&&W<=J.left+J.width&&Ca>=J.top&&Ca<=J.top+J.height)for(ca=0;ca<Q.length;ca++)if(W>=Q[ca]&&W<=Q[ca]+(null!=ra.col[ca]?ra.col[ca]:la.cell.width)){for(W=0;W<sa.length;W++)if(Ca>=sa[W]&&Ca<=sa[W]+(null!=ra.row[W]?ra.row[W]:la.cell.height))return{col:ca,row:W};break}};this.onMouseOver=function(W){la.callback_mouseOver&&la.callback_mouseOver(W,zb())};this.onMouseMove=function(W){la.callback_mouseOver&&
la.callback_mouseOver(W,zb());if(1==W.buttons){if("block"!=Pa.style.display&&1==Oa)if(null!=Aa&&0<=Aa){var Ca=W.offsetX-Q[Aa];1>Ca&&(Ca=1);if(null==ra.col[Aa]||ra.col[Aa]!=Ca)ra.col[Aa]=Ca,C.draw(!0),K=!0}else if(null!=ta&&0<=ta){if(Ca=W.offsetY-sa[ta],1>Ca&&(Ca=1),null==ra.row[ta]||ra.row[ta]!=Ca)ra.row[ta]=Ca,C.draw(!0),K=!0}else{var ca=xDeepCopy(da);if("col"==da.select){if(W=Gb(W.offsetX,W.offsetY,"col"))da.endCol=W.col,da.startCol0=da.endCol<da.col?da.endCol:da.col,da.endCol0=da.endCol<da.col?
da.col:da.endCol}else if("row"==da.select){if(W=Gb(W.offsetX,W.offsetY,"row"))da.endRow=W.row,da.startRow0=da.endRow<da.row?da.endRow:da.row,da.endRow0=da.endRow<da.row?da.row:da.endRow}else if(W=Gb(W.offsetX,W.offsetY),!W||W.col==da.col&&W.row==da.row)W&&(null!=da.endCol||null!=da.endRow)&&ab();else if(da.endCol!=W.col||da.endRow!=W.row)da.endCol=W.col,da.endRow=W.row,da.col>da.endCol?(da.startCol0=da.endCol,da.endCol0=da.col):(da.startCol0=da.col,da.endCol0=da.endCol),da.row>da.endRow?(da.startRow0=
da.endRow,da.endRow0=da.row):(da.startRow0=da.row,da.endRow0=da.endRow);W&&0==xIsSame(ca,da)&&(W=Db(),W.isLocked&&((0==da.startCol0||da.startCol0<W.col)&&da.endCol0>=W.col&&(ea=0),(0==da.startRow0||da.startRow0<W.row)&&da.endRow0>=W.row&&(ja=0)),C.draw(!0))}}else if(W.offsetX>L.left&&W.offsetX<L.left+L.width&&W.offsetY>L.top&&W.offsetY<L.top+L.height){for(var ya=0;ya<Q.length;ya++)if(Ca=ra.col[ya],null==Ca&&(Ca=la.cell.width),W.offsetX>=Q[ya]+Ca-1&&W.offsetX<=Q[ya]+Ca+1){ca=ya;break}Aa!=ca&&(Aa=ca,
c.style.cursor=null!=Aa?"col-resize":"default")}else if(W.offsetX>r&&W.offsetX<r+z&&W.offsetY>u&&W.offsetY<u+H){for(ya=0;ya<sa.length;ya++)if(Ca=ra.row[ya],null==Ca&&(Ca=la.cell.height),W.offsetY>=sa[ya]+Ca-1&&W.offsetY<=sa[ya]+Ca+1){ca=ya;break}ta!=ca&&(ta=ca,c.style.cursor=null!=ta?"row-resize":"default")}};this.onMouseOut=function(W){la.callback_mouseOut&&la.callback_mouseOut(W,zb())};var Ra=function(){var W=da.col,Ca=da.row,ca=Cb(W,Ca),ya=Db();ya.isLocked?W>=ya.col&&ca.left<ya.left&&(ea=ca.left-
Q[ya.col]):ca.left<ya.left&&(ea=ca.left-Q[0]);ya.isLocked?Ca>=ya.row&&ca.top<ya.top&&(ja=ca.top-sa[ya.row]):ca.top<ya.top&&(ja=ca.top-sa[0]);C.draw(!0)},Sb=function(){for(var W=0,Ca=0;Ca<ra.cell.length;Ca++)ra.cell[Ca]&&W<ra.cell[Ca].length&&(W=ra.cell[Ca].length);return W};this.onMouseDown=function(W){Oa=!0;"block"==Pa.style.display&&Ka();xGlobal.focusObject=null;C.page&&C.page.setPageFocusWidget(C);if(null==Aa&&null==ta){for(var Ca=0;4>Ca;Ca++)if(pa&&pa[Ca]&&Z&&isInRect(W.offsetX,W.offsetY,Z[Ca])){if((Ca=
pa[Ca].onMouseDown(W))&&Ca!=oa){if(oa&&oa.onUnFocus)oa.onUnFocus();oa=Ca}if(oa){if(oa.onMouseDown)oa.onMouseDown(W,xGlobal.focusObject==oa?!0:!1);xGlobal.focusObject=oa;C.page.setPageFocusWidget(C);C.draw(!0)}return}if(W.offsetX>L.left&&W.offsetX<L.left+L.width&&W.offsetY>L.top&&W.offsetY<L.top+L.height){if(2!=W.buttons||"col"!=da.select)for(Ca=0;Ca<Q.length;Ca++){var ca=W.offsetX,ya=ra.col[Ca];null==ya&&(ya=la.cell.width);if(ca>Q[Ca]&&ca<Q[Ca]+ya){da.col=Ca;da.row=0;da.endCol=Ca;da.endRow=Sb()-1;
da.startCol0=Ca;da.startRow0=0;da.endCol0=da.endCol;da.endRow0=da.endRow;da.select="col";Ra();break}}}else if(W.offsetX>r&&W.offsetX<r+z&&W.offsetY>u&&W.offsetY<u+H){if(2!=W.buttons||"row"!=da.select)for(Ca=0;Ca<sa.length;Ca++)if(ca=W.offsetY,ya=ra.row[Ca],null==ya&&(ya=la.cell.height),ca>sa[Ca]&&ca<sa[Ca]+ya){da.col=0;da.row=Ca;da.endCol=ra.cell.length-1;da.endRow=Ca;da.startCol0=0;da.startRow0=da.row;da.endCol0=da.endCol;da.endRow0=da.endRow;da.select="row";Ra();break}}else W.offsetX>r&&W.offsetX<
r+z&&W.offsetY>L.top&&W.offsetY<L.top+L.height?(da.endCol=ra.cell.length-1,da.endRow=Sb()-1,da.startCol0=0,da.startRow0=0,da.endCol0=da.endCol,da.endRow0=da.endRow,da.select="corn",C.draw(!0)):(da.select=null,Ca=Gb(W.offsetX,W.offsetY),!Ca||Ca.col==da.col&&Ca.row==da.row&&null==da.endCol||2==W.buttons&&null!=da.endCol&&Ca.col>=da.startCol0&&Ca.col<=da.endCol0&&Ca.row>=da.startRow0&&Ca.row<=da.endRow0||(da.col=Ca.col,da.row=Ca.row,ab(),W=Cb(da.col,da.row),Ca=Db(),0==Ca.isLocked||Ca.isLocked&&(da.col<
Ca.col||da.row<Ca.row)?(W.left<ba.left&&(ea=W.left-Q[0]),W.top<ba.top&&(ja=W.top-sa[0])):(W.left<Ca.left&&(ea=W.left-Q[Ca.col]),W.top<Ca.top&&(ja=W.top-sa[Ca.row])),C.draw(!0)))}};this.onClcik=function(W){"block"==Pa.style.display&&Ka();xGlobal.focusObject=null;C.page&&C.page.setPageFocusWidget(C);if(null==Aa&&null==ta)for(var Ca=0;4>Ca;Ca++)if(pa&&pa[Ca]&&Z&&isInRect(W.offsetX,W.offsetY,Z[Ca])){if((Ca=pa[Ca].onMouseUp(W))&&Ca!=oa){if(oa&&oa.onUnFocus)oa.onUnFocus();oa=Ca}if(oa){if(oa.onMouseUp)oa.onMouseUp(W,
xGlobal.focusObject==oa?!0:!1);xGlobal.focusObject=oa;C.page.setPageFocusWidget(C);C.draw(!0)}break}};this.onMouseUp=function(W){ta=Aa=null;K&&(K=!1,la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb()));Oa=!1;c.style.cursor="default"};this.isMyCanvas=function(W){return c==W?!0:!1};var Ub=function(W){if(null!=da.endCol&&null!=da.endRow){for(W=da.startCol0;W<=da.endCol0;W++)for(var Ca=da.startRow0;Ca<=da.endRow0;Ca++)null==ra.cell[W]&&(ra.cell[W]=[]),null==ra.cell[W][Ca]&&(ra.cell[W][Ca]=
{}),ra.cell[W][Ca].merge={startCol:da.startCol0,startRow:da.startRow0,endCol:da.endCol0,endRow:da.endRow0},(W!=da.col||Ca!=da.row)&&N[W]&&N[W][Ca]&&(N[W][Ca].destroy(),delete N[W][Ca]);C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}},Ob=function(W){if(ra.cell[da.col]&&ra.cell[da.col][da.row]&&(W=ra.cell[da.col][da.row].merge)){for(var Ca=W.startCol;Ca<=W.endCol;Ca++)for(var ca=W.startRow;ca<=W.endRow;ca++)ra.cell[Ca]&&ra.cell[Ca][ca]&&delete ra.cell[Ca][ca].merge;C.draw(!0);
la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}},Fb=function(W){var Ca,ca=da.col,ya=da.row,bb=ca,ib=ya;ra.cell[ca]&&ra.cell[ca][ya]&&(Ca=ra.cell[ca][ya].merge)&&(ca=Ca.startCol,ya=Ca.startRow,bb=Ca.endCol,ib=Ca.endRow);null!=da.endCol&&null!=da.endRow&&(ca=da.startCol0,ya=da.startRow0,bb=da.endCol0,ib=da.endRow0);W=W.option.prop;null!=W.lock&&(0==W.lock?delete ra.lock:ra.lock=[ca,ya]);for(;ca<=bb;ca++)for(null==ra.cell[ca]&&(ra.cell[ca]=[]),Ca=ya;Ca<=ib;Ca++)if(null==ra.cell[ca][Ca]&&
(ra.cell[ca][Ca]={}),void 0!=ra.cell[ca][Ca].value&&""!=ra.cell[ca][Ca].value){if(1==W.clearProp)ra.cell[ca][Ca].option&&delete ra.cell[ca][Ca].option;else{null==ra.cell[ca][Ca].option&&(ra.cell[ca][Ca].option=xDeepCopy(la.cell.option));var gb=ra.cell[ca][Ca].option;W.backgroundColor&&("transparent"==W.backgroundColor?ra.cell[ca][Ca].prop&&ra.cell[ca][Ca].prop.backgroundColor&&delete ra.cell[ca][Ca].prop.backgroundColor:(null==ra.cell[ca][Ca].prop&&(ra.cell[ca][Ca].prop={}),ra.cell[ca][Ca].prop.backgroundColor=
W.backgroundColor));W.textColor&&(null==ra.cell[ca][Ca].prop&&(ra.cell[ca][Ca].prop={}),gb.color=W.textColor);W.textAlign&&(gb.textAlign=W.textAlign);W.textBaseline&&(gb.textBaseline=W.textBaseline);W.maxLines&&(gb.maxLines=W.maxLines,-1==gb.maxLines&&C.reCalculateRowHeight(ca,Ca))}N[ca]&&N[ca][Ca]&&(N[ca][Ca].destroy(),delete N[ca][Ca])}C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())};this.doCopy=function(W){W=da.col;var Ca=da.row,ca=1,ya=1;null!=da.startCol0&&(W=da.startCol0,
Ca=da.startRow0,ca=da.endCol0-da.startCol0+1,ya=da.endRow0-da.startRow0+1);for(var bb="",ib,gb=Ca;gb<Ca+ya;gb++){for(var Bb=W;Bb<W+ca;Bb++){if(ra.cell[Bb]&&ra.cell[Bb][gb]){ib=ra.cell[Bb][gb].value;var Hb=ra.cell[Bb][gb].merge;!Hb||Bb==Hb.startCol&&gb==Hb.startRow||(ib="")}else ib="";bb+=ib;Bb<W+ca-1&&(bb+="\t")}1<ya&&(bb+="\n")}return bb};this.doPaste=function(W){if(1!=la.readOnly){var Ca=W.clipboardData.getData("text/html");if(""==Ca||0>Ca.indexOf("<table"))Ca=W.clipboardData.getData("Text"),C.doPasteText(Ca);
else{Ca=Ca.slice(Ca.indexOf("<table"),Ca.indexOf("</table>")+8);W=document.createElement("div");W.setAttribute("id","excelPaste");W.innerHTML=Ca;var ca=W.getElementsByTagName("table")[0];Ca=[];for(var ya=0,bb=ca.rows.length;ya<bb;ya++){for(var ib=[],gb=0,Bb=ca.rows[ya].cells.length;gb<Bb;gb++)ib.push(ca.rows[ya].cells[gb].innerText);Ca.push(ib)}ca=da.col;ya=da.row;ra.cell[ca]&&ra.cell[ca][ya]&&(bb=ra.cell[ca][ya].merge)&&(ca=bb.startCol,ya=bb.startRow);for(ib=0;ib<Ca.length;ib++)for(bb=0;bb<Ca[ib].length;bb++)null!=
Ca[ib][bb]&&(null==ra.cell[bb+ca]&&(ra.cell[bb+ca]=[]),null==ra.cell[bb+ca][ib+ya]&&(ra.cell[bb+ca][ib+ya]={}),ra.cell[bb+ca][ib+ya].value=Ca[ib][bb]);N=[];W.remove();C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}}};this.doPasteText=function(W){if(null!=W){var Ca=W.split("\n");W=[];for(var ca=0;ca<Ca.length;ca++)W[ca]=Ca[ca].split("\t");var ya,bb;Ca=da.col;ca=da.row;ra.cell[Ca]&&ra.cell[Ca][ca]&&(ya=ra.cell[Ca][ca].merge)&&(Ca=ya.startCol,ca=ya.startRow);for(bb=0;bb<
W.length;bb++)for(ya=0;ya<W[bb].length;ya++)null!=W[bb][ya]&&(null==ra.cell[ya+Ca]&&(ra.cell[ya+Ca]=[]),null==ra.cell[ya+Ca][bb+ca]&&(ra.cell[ya+Ca][bb+ca]={}),ra.cell[ya+Ca][bb+ca].value=W[bb][ya]);N=[];C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}};var Ya=function(W){if(!la.readOnly&&W.option.prop){var Ca=da.col,ca=da.row,ya=1,bb=1;null!=da.startCol0&&(ya=da.endCol0-da.startCol0+1,bb=da.endRow0-da.startRow0+1);switch(W.option.prop.insert){case "row":ya=ra.cell.length;
bb=1;for(W=0;W<ya;W++)if(ra.cell[W]&&ra.cell[W].length>ca){for(var ib=ra.cell[W].splice(0,ca),gb=0;gb<bb;gb++)ib.push(null);for(gb=0;gb<ra.cell[W].length;gb++)ib.push(ra.cell[W][gb]);ra.cell[W]=ib}if(ra.row&&ra.row.length>ca){ya=ra.row.splice(0,ca);for(gb=0;gb<bb;gb++)ya.push(null);for(gb=0;gb<ra.row.length;gb++)ya.push(ra.row[gb]);ra.row=ya}break;case "col":ya=1;if(ra.cell.length>Ca){ib=ra.cell.splice(0,Ca);for(W=0;W<ya;W++)ib.push(null);for(W=0;W<ra.cell.length;W++)ib.push(ra.cell[W]);ra.cell=ib}if(ra.col&&
ra.col.length>Ca){bb=ra.col.splice(0,Ca);for(W=0;W<ya;W++)bb.push(null);for(W=0;W<ra.col.length;W++)bb.push(ra.col[W]);ra.col=bb}break;case "moveRight":for(gb=ca;gb<ca+bb;gb++){for(W=ra.cell.length-1;W>=Ca+ya-1;W--)null==ra.cell[W]&&(ra.cell[W]=[]),ra.cell[W][gb]=ra.cell[W-ya]&&ra.cell[W-ya][gb]?ra.cell[W-ya][gb]:null;for(W=Ca;W<Ca+ya;W++)ra.cell[W][gb]=null}break;case "moveDown":for(W=Ca;W<ya;W++)if(ra.cell[W]){ib=ra.cell[W].splice(0,ca);for(gb=0;gb<bb;gb++)ib.push(null);for(gb=0;gb<ra.cell.length;gb++)ib.push(ra.cell[W][gb]);
ra.cell[W]=ib}}N=null;C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}},fb=function(W){if(!la.readOnly&&W.option.prop){var Ca=da.col,ca=da.row,ya=1,bb=1;null!=da.startCol0&&(ya=da.endCol0-da.startCol0+1,bb=da.endRow0-da.startRow0+1);switch(W.option.prop.delete){case "row":for(W=0;W<ra.cell.length;W++)ra.cell[W]&&ra.cell[W].splice(ca,bb);break;case "col":Ca<ra.cell.length&&ra.cell.splice(Ca,ya);break;case "moveLeft":if(Ca<=ra.cell.length-1)for(var ib=ca;ib<ca+bb;ib++){for(W=
Ca;W<ra.cell.length-ya;W++)ra.cell[W][ib]=ra.cell[W+ya][ib];for(;W<ra.cell.length;W++)delete ra.cell[W][ib]}break;case "moveUp":for(W=Ca;W<Ca+ya;W++)ra.cell[W]&&ca<=ra.cell[W].length-1&&ra.cell[W].splice(ca,bb)}N=null;C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}},$a=function(){if(!la.readOnly){if(null==da.endCol)ra.cell[da.col]&&ra.cell[da.col][da.row]&&(ra.cell[da.col][da.row].value="",N[da.col]&&N[da.col][da.row]&&delete N[da.col][da.row]);else for(var W=da.startCol0;W<=
da.endCol0;W++)for(var Ca=da.startRow0;Ca<=da.endRow0;Ca++)ra.cell[W]&&ra.cell[W][Ca]&&(ra.cell[W][Ca].value="",N[W]&&N[W][Ca]&&delete N[W][Ca]);C.draw(!0);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb())}};this.getPopupMenu=function(W){if(!la.readOnly){var Ca=Gb(W.offsetX,W.offsetY),ca=W=!1,ya=da.col,bb=da.row;if(ra.cell[ya]&&ra.cell[ya][bb]){ra.cell[ya][bb].merge?ca=!0:W=!0;var ib=ra.cell[ya][bb].option;var gb=ra.cell[ya][bb].prop}else!Ca||Ca.col==ya&&Ca.row==bb&&null==da.endCol||
(W=!0);null==ib&&(ib=la.cell.option);Ca=ib.maxLines;gb=gb?gb.backgroundColor:ib.backgroundColor;ya=ib.color;bb=ib.textAlign;ib=ib.textBaseline;var Bb=!1,Hb=!1;"col"==da.select?Bb=!0:"row"==da.select?Hb=!0:"corn"!=da.select&&(Hb=Bb=!0);return{popup:[[{title:"\u63d2\u5165...",option:{popupMenu:{popup:[[{title:"\u6574\u884c",enable:Hb,prop:{insert:"row"},callback:Ya}],[{title:"\u6574\u5217",enable:Bb,prop:{insert:"col"},callback:Ya}],[{title:"\u5355\u5143\u683c\u53f3\u79fb\u5e76\u63d2\u5165\u65b0\u5355\u5143 \u21e8",
enable:Bb&&Hb?!0:!1,prop:{insert:"moveRight"},callback:Ya}],[{title:"\u5355\u5143\u683c\u4e0b\u79fb\u5e76\u63d2\u5165\u65b0\u5355\u5143 \u21e9",enable:Bb&&Hb?!0:!1,prop:{insert:"moveDown"},callback:Ya}]]}}}],[{title:"\u5220\u9664...",option:{popupMenu:{popup:[[{icon:"Close",title:"\u6574\u884c",enable:Hb,prop:{delete:"row"},callback:fb}],[{icon:"Close",title:"\u6574\u5217",enable:Bb,prop:{delete:"col"},callback:fb}],[{icon:"Close",title:"\u5220\u9664\u5355\u5143\u5e76\u5c06\u53f3\u4fa7\u6570\u636e\u5de6\u79fb \u21e6",
enable:Bb&&Hb?!0:!1,prop:{delete:"moveLeft"},callback:fb}],[{icon:"Close",title:"\u5220\u9664\u5355\u5143\u5e76\u5c06\u4e0b\u65b9\u6570\u636e\u4e0a\u79fb \u21e7",enable:Bb&&Hb?!0:!1,prop:{delete:"moveUp"},callback:fb}]]}}}],[{title:"\u6e05\u9664\u5185\u5bb9",callback:$a}],[{title:"\u590d\u5236",callback:C.doCopy}],[{type:"splitLine",height:1}],[{title:"\u5408\u5e76\u5355\u5143",enable:W,callback:Ub}],[{title:"\u62c6\u5206\u5355\u5143",enable:ca,callback:Ob}],[{title:"\u51bb\u7ed3",enable:ra.lock||
da.row||da.col,prop:{lock:ra.lock?!1:!0},option:{type:"check",status:ra.lock?"checked":"unchecked"},callback:Fb}],[{title:"\u81ea\u52a8\u6362\u884c",prop:{maxLines:-1==Ca?1:-1},option:{type:"check",status:-1==Ca?"checked":"unchecked"},callback:Fb}],[{type:"splitLine",height:1}],[{title:"\u80cc\u666f\u586b\u5145",option:{popupMenu:{popup:[[{title:"\u65e0\u586b\u5145",prop:{backgroundColor:"transparent"},option:{type:"radio",status:"transparent"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u7070\u8272",
prop:{backgroundColor:"#eee"},option:{type:"radio",status:"#eee"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u9ed1\u8272",prop:{backgroundColor:"#000"},option:{type:"radio",status:"#000"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u7ea2\u8272",prop:{backgroundColor:"#f00"},option:{type:"radio",status:"#f00"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u7eff\u8272",prop:{backgroundColor:"#0f0"},option:{type:"radio",status:"#0f0"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u84dd\u8272",
prop:{backgroundColor:"#00f"},option:{type:"radio",status:"#00f"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u9ec4\u8272",prop:{backgroundColor:"#ff0"},option:{type:"radio",status:"#ff0"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u6a59\u8272",prop:{backgroundColor:"#f93"},option:{type:"radio",status:"#f93"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u7070\u8272",prop:{backgroundColor:"#888"},option:{type:"radio",status:"#888"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u7ea2\u8272",
prop:{backgroundColor:"#800"},option:{type:"radio",status:"#800"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u7eff\u8272",prop:{backgroundColor:"#080"},option:{type:"radio",status:"#080"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u84dd\u8272",prop:{backgroundColor:"#008"},option:{type:"radio",status:"#008"==gb?"checked":"unchecked"},callback:Fb}],[{title:"\u767d\u8272",prop:{backgroundColor:"#fff"},option:{type:"radio",status:"#fff"==gb?"checked":"unchecked"},callback:Fb}]]}}}],
[{title:"\u6587\u672c\u989c\u8272",option:{popupMenu:{popup:[[{title:"\u7070\u8272",prop:{textColor:"#eee"},option:{type:"radio",status:"#eee"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u9ed1\u8272",prop:{textColor:"#000"},option:{type:"radio",status:"#000"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u7ea2\u8272",prop:{textColor:"#f00"},option:{type:"radio",status:"#f00"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u7eff\u8272",prop:{textColor:"#0f0"},option:{type:"radio",status:"#0f0"==
ya?"checked":"unchecked"},callback:Fb}],[{title:"\u84dd\u8272",prop:{textColor:"#00f"},option:{type:"radio",status:"#00f"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u9ec4\u8272",prop:{textColor:"#ff0"},option:{type:"radio",status:"#ff0"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u6a59\u8272",prop:{textColor:"#f93"},option:{type:"radio",status:"#f93"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u7070\u8272",prop:{textColor:"#888"},option:{type:"radio",status:"#888"==ya?
"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u7ea2\u8272",prop:{textColor:"#800"},option:{type:"radio",status:"#800"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u7eff\u8272",prop:{textColor:"#080"},option:{type:"radio",status:"#080"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u6df1\u84dd\u8272",prop:{textColor:"#008"},option:{type:"radio",status:"#008"==ya?"checked":"unchecked"},callback:Fb}],[{title:"\u767d\u8272",prop:{textColor:"#fff"},option:{type:"radio",status:"#fff"==
ya?"checked":"unchecked"},callback:Fb}]]}}}],[{title:"\u6587\u672c\u5bf9\u9f50",option:{popupMenu:{popup:[[{title:"\u5de6\u5bf9\u9f50",prop:{textAlign:"left"},option:{type:"radio",status:"left"==bb?"checked":"unchecked"},callback:Fb}],[{title:"\u5de6\u53f3\u5c45\u4e2d",prop:{textAlign:"center"},option:{type:"radio",status:"center"==bb?"checked":"unchecked"},callback:Fb}],[{title:"\u53f3\u5bf9\u9f50",prop:{textAlign:"right"},option:{type:"radio",status:"right"==bb?"checked":"unchecked"},callback:Fb}],
[{type:"splitLine",height:1}],[{title:"\u4e0a\u5bf9\u9f50",prop:{textBaseline:"top"},option:{type:"radio",status:"top"==ib?"checked":"unchecked"},callback:Fb}],[{title:"\u4e0a\u4e0b\u5c45\u4e2d",prop:{textBaseline:"middle"},option:{type:"radio",status:"middle"==ib?"checked":"unchecked"},callback:Fb}],[{title:"\u4e0b\u5bf9\u9f50",prop:{textBaseline:"bottom"},option:{type:"radio",status:"bottom"==ib?"checked":"unchecked"},callback:Fb}]]}}}],[{type:"splitLine",height:1}],[{title:"\u6e05\u9664\u6240\u6709\u5c5e\u6027",
prop:{clearProp:!0},callback:Fb}]]}}};this.onMouseWheel=function(W){if(1!=la.wheelOnFocus||xGlobal.focusWidget==C){"apple"==la.scroller.model&&(Na=!0,Wa&&(Wa.setSlideStatus(Na),na.setSlideStatus(Na),a.clearTimeout(ha),ha=setTimeout(function(){Na=!1;Wa&&Wa.setSlideStatus(Na);na&&na.setSlideStatus(Na);a.clearTimeout(ha)},2E3)));var Ca=Db(),ca=Cb(Q.length-1,sa.length-1),ya=ea,bb=ja;0!=W.deltaY?(ja+=W.deltaY,1==la.readOnly&&ja+Ca.height>=ca.height+sa[sa.length-1]-sa[Ca.row]&&(ja=ca.height+sa[sa.length-
1]-sa[Ca.row]-Ca.height),0>ja&&(ja=0)):0!=W.deltaX&&(ea+=W.deltaX,1==la.readOnly&&ea+Ca.width>=ca.width+Q[Q.length-1]-Q[Ca.col]&&(ea=ca.width+Q[Q.length-1]-Q[Ca.col]-Ca.width),0>ea&&(ea=0));if(ja!=bb||ea!=ya)"block"==Pa.style.display&&Ka(),C.draw(!0);1!=xGlobal.passiveSupported&&W.preventDefault()}};this.onDblClick=function(W){W.offsetX>ba.left&&W.offsetX<ba.left+ba.width&&W.offsetY>ba.top&&W.offsetY<ba.top+ba.height&&za()};var za=function(){if(!la.readOnly){var W=da.col,Ca=da.row,ca=Cb(W,Ca);if(ra.cell[W]&&
ra.cell[W][Ca]){var ya;if(ya=ra.cell[W][Ca].merge)W=ya.startCol,Ca=ya.startRow}ra.cell[W]&&ra.cell[W][Ca]?(ya=ra.cell[W][Ca].option,null==ya&&(ya=la.cell.option),Pa.value=ra.cell[W][Ca].value?ra.cell[W][Ca].value:""):(ya=la.cell.option,Pa.value="");Pa.style.left=ca.left+"px";Pa.style.top=ca.top+"px";Pa.style.width=ca.width-2*ya.margin+"px";Pa.style.height=ca.height-2*ya.margin+"px";Pa.style.resize="none";Pa.style.position="absolute";Pa.style.textAlign=ya.textAlign;Pa.style.paddingLeft=ya.margin+"px";
Pa.style.paddingTop=ya.margin+"px";Pa.style.paddingRight=ya.margin+"px";Pa.style.paddingBottom=ya.margin+"px";Pa.style.font=ya.font;Pa.style.lineHeight=ya.lineHeight+"px";Pa.style.display="block";Pa.selectionStart=0;Pa.selectionEnd=0;Pa.focus()}},Ka=function(){if(!la.readOnly){var W=da.col,Ca=da.row;if(ra.cell[W]&&ra.cell[W][Ca]){var ca;if(ca=ra.cell[W][Ca].merge)W=ca.startCol,Ca=ca.startRow}if(!ra.cell[W]||!ra.cell[W][Ca]||ra.cell[W][Ca].value!=Pa.value){Pa.value?(null==ra.cell[W]&&(ra.cell[W]=[]),
null==ra.cell[W][Ca]?ra.cell[W][Ca]={value:Pa.value}:ra.cell[W][Ca].value=Pa.value,null==N&&(N=[]),null==N[W]&&(N[W]=[]),null==N[W][Ca]&&(op=ra.cell[W][Ca].option,null==op&&(op=la.cell.option),N[W][Ca]=new xCell(C,op)),N[W][Ca].setValue({value:Pa.value,type:"t"})):ra.cell[W]&&ra.cell[W][Ca]?(ra.cell[W][Ca].value=Pa.value,N[W][Ca]&&N[W][Ca].setValue({value:Pa.value,type:"t"})):N&&N[W]&&N[W][Ca]&&(N[W][Ca]=null);ra.col.length>ra.cell.length&&ra.col.splice(ra.cell.length);for(W=Ca=0;W<ra.col.length;W++)ra.cell[W]&&
Ca<ra.cell[W].length&&(Ca=ra.cell[W].length);ra.row.length>Ca&&ra.row.splice(Ca);la.callback_onChanged&&1!=la.readOnly&&la.callback_onChanged(zb());C.draw(!0)}Pa.style.display="none"}};this.onKeyUp=function(W){if("block"==Pa.style.display)return Ma&&0==W.altKey&&0==W.metaKey?(13==W.keyCode?Ka():27==W.keyCode&&(Pa.style.display="none"),Ma=!1):Ma=!0,!0};var ab=function(){da.select=null;da.endCol=null;da.endRow=null;da.startCol0=null;da.startRow0=null;da.endCol0=null;da.endRow0=null};this.onKeyDown=
function(W){if("block"==Pa.style.display){if((1==W.altKey||1==W.metaKey)&&13==W.keyCode)return start=Pa.selectionStart,W=Pa.value.substr(0,start)+"\n"+Pa.value.substr(start),Pa.value=W,Pa.selectionStart=start+1,Pa.selectionEnd=start+1,!0;if(13==W.keyCode||9==W.keyCode)return W.preventDefault(),!0}var Ca=!0;if(ra.cell[da.col]&&ra.cell[da.col][da.row])var ca=ra.cell[da.col][da.row].merge;var ya=Db();switch(W.keyCode){case 40:ca?da.row=ca.endRow+1:da.row<sa.length-1&&da.row++;ca=Cb(da.col,da.row);da.row>=
ya.row&&ca.top<ya.top&&(ja=0);ca.top+ca.height>ya.top+ya.height-3&&(ja=sa[da.row]-sa[ya.row]+ca.height-ya.height+3);ab();break;case 38:ca?da.row=ca.startRow-1:da.row--;0>da.row&&(da.row=0);ca=Cb(da.col,da.row);ca.top<ya.top&&(ja=ca.top-sa[ya.row],0>ja&&(ja=0));ab();break;case 39:ca?da.col=ca.endCol+1:da.col<Q.length-1&&da.col++;ca=Cb(da.col,da.row);da.col>=ya.col&&ca.left<ya.left&&(ea=0);ca.left+ca.width>ya.left+ya.width-3&&(ea=Q[da.col]-Q[ya.col]+ca.width-ya.width+3);ab();break;case 37:ca?da.col=
ca.startCol-1:da.col--;0>da.col&&(da.col=0);ca=Cb(da.col,da.row);ca.left<ya.left&&(ea=ca.left-Q[ya.col],0>ea&&(ea=0));ab();break;case 34:break;case 33:break;case 35:Ca=!0;break;case 36:0<da.col||0<ea?ea=da.col=0:ja=da.row=0;ab();break;case 13:za();Ma=!1;break;case 27:break;case 46:$a();break;default:return!1}Ca&&(C.draw(!0),W.preventDefault());return Ca};(function(){a.document.getElementById("mainBody");Pa=a.document.createElement("textarea");Pa.id=hb;Pa.style.display="none";Pa.contenteditable=!0;
c.parentElement.appendChild(Pa);c.contenteditable=!0;c.addEventListener("mousemove",C.onMouseMove);c.addEventListener("mouseout",C.onMouseOut);c.addEventListener("mousedown",C.onMouseDown);c.addEventListener("click",C.onClcik);c.addEventListener("mouseup",C.onMouseUp);c.addEventListener("mousewheel",C.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1);c.addEventListener("dblclick",C.onDblClick);F=!0;for(var W=0;20>W;W++)ra.col[W]={width:120};for(W=0;60>W;W++)ra.row[W]={height:32}})()};var function_openWithBrowseCenter=function(a,b,c,g){g=void 0===g?!0:g;if(xGlobal.browseCenter&&(xGlobal.browseCenter.add(a,b,c),1==g)){mainPage.getWidgetByElementId("navBrowseCenterTree").setVariablesValue({browseUrl:c.url});xGlobal.browseCenter.activeBrowseCenterSrc({option:{params:c}});if(a=xGlobal.browseCenter.getPage())(a=a.getPageManager())?a.setActivePage("browseCenter"):globalSet.frame.activeFloatPage("browseCenter");xGlobal.browseCenter.redraw(!0)}};
function xBrowseCenterView(a,b,c,g,k){var q=this;this.page=b;this.resize=function(){};var f=[],p;this.addBrowseCenterSrc=function(v){var A;for(A=0;A<f.length;A++)if(f[A].params.url==v.url){p!=f[A].document&&(p.style.display="none");p=f[A].document;p.style.display="block";return}p&&(p.style.display="none");f[A]={params:v};if("pdf"==v.type.toLowerCase()||"html"==v.type.toLowerCase()||"url"==v.type.toLowerCase()||"link"==v.type.toLowerCase()){var r=document.createElement("iframe");r.src=v.url;r.style=
"width:100%;height:100%;border:none;"+(null!=v.frameStyle?v.frameStyle:"");c.appendChild(r);f[A].document=r;p=f[A].document;p.style.display="block"}};this.deleteBrowseCenterSrc=function(v){var A;for(A=0;A<f.length;A++)if(f[A].params.url==v.url){f[A].document==p&&(p=null);c.removeChild(f[A].document);f.splice(A,1);break}};this.activeBrowseCenterSrc=function(v){var A;for(A=0;A<f.length;A++)if(f[A].params.url==v.url){p&&p!=f[A].document&&(p.style.display="none");p=f[A].document;p.style.display="block";
return}q.addBrowseCenterSrc(v)}}
function xBrowseCenter(a,b,c,g,k){var q=this;this.page=b;var f;xGlobal.browseCenter=q;var p;this.getPage=function(){return this.page};this.getSubPage=function(){return mainPage};this.add=function(C,U,J){var G;null==p&&(p=[]);for(G=0;G<p.length;G++)if(p[G].title==C){if(null==p[G].items)p[G].items=[{title:U,params:J}];else{for(var B=0;B<p[G].items.length;B++)if(xIsSame(p[G].items[B].params,J))return;p[G].items[p[G].items.length]={title:U,params:J}}break}G==p.length&&(p[G]={title:C,items:[{title:U,params:J}]});
H()};q.activeBrowseCenterSrc=function(C){mainPage.getWidgetByElementId("browseCenterView").activeBrowseCenterSrc(C.option.params)};var v=function(C){mainPage.getWidgetByElementId("browseCenterView").deleteBrowseCenterSrc(C.option.params);for(var U=0;U<p.length;U++)for(var J=0;J<p[U].items.length;J++)if(xIsSame(p[U].items[J].params,C.option.params)){p[U].items.splice(J,1);0==p[U].items.length&&p.splice(U,1);H();break}},A=function(C,U){mainPage=U;f=C;f.setPageSet({elements:[{id:"browseCenterView",backgroundColor:"#eee",
element:{class:"xBrowseCenterView"}}]});f.show(!0);f.layout()},r=function(C,U){},u=function(C){},z=function(C){for(var U=0;U<p.length;U++)if(p[U].title==C.option.title)for(var J=p[U].items.length-1;0<=J;J--)v({option:{params:p[U].items[J].params}})},H=function(){var C={borderRadius:0,padding:0,paddingLeft:16,margin:0,marginLeft:0,present:"flat",type:"radio",operatorIcon:"close-float",normal:{color:"#000",backgroundColor:"transparent",borderColor:"#aaa"},disable:{color:"#000",backgroundColor:"transparent",
borderColor:"#aaa"},over:{color:"#000",backgroundColor:"transparent",borderColor:"#999"},focus:{color:"#000",backgroundColor:"transparent",borderColor:"#888"},focusOver:{color:"#000",backgroundColor:"transparent",borderColor:"#888"},push:{color:"#000",backgroundColor:"transparent",borderColor:"#888"},checked:{color:"#000",backgroundColor:"transparent",borderColor:"#888"},checkedOver:{color:"#000",backgroundColor:"transparent",borderColor:"#888"},callback_close:z},U={borderRadius:0,padding:0,paddingLeft:16,
margin:0,marginLeft:0,present:"flat",type:"radio",operatorIcon:"close-float",normal:{color:"#000",backgroundColor:"transparent",borderColor:"#aaa"},disable:{color:"#aaa",backgroundColor:"transparent",borderColor:"#aaa"},over:{color:"#2077B4FF",backgroundColor:"transparent",borderColor:"#999"},focus:{color:"#2077B4FF",backgroundColor:"transparent",fontBold:!0,borderColor:"#888"},focusOver:{color:"#2077B4FF",backgroundColor:"transparent",fontBold:!0,borderColor:"#888"},push:{color:"#2077B4FF",backgroundColor:"transparent",
fontBold:!0,borderColor:"#888"},checked:{color:"#2077B4FF",backgroundColor:"transparent",fontBold:!0,borderColor:"#888"},checkedOver:{color:"#2077B4FF",backgroundColor:"transparent",fontBold:!0,borderColor:"#888"},callback_close:v},J=p,G=[];if(J)for(var B,L=0;L<J.length;L++){s=G.length;G[s]=[{title:J[L].title,textAlign:"left",fontBold:!0,groupIndex:L,flexGroup:[],option:xDeepCopy(C)}];G[s][0].nodeId=J[L].title;if(J[L].items)for(B=0;B<J[L].items.length;B++)G[s][0].flexGroup[B]=[{title:J[L].items[B].title,
type:"xSaftButton",textAlign:"left",bounds:[{id:J[L].items[B].params.url,variable:"variables.browseUrl"}],option:xDeepCopy(U),params:J[L].items[B].params,callback:q.activeBrowseCenterSrc}],G[s][0].flexGroup[B][0].option.actionBounds=[{id:"browseUrl",variable:"variables.browseUrl",value:J[L].items[B].params.url}];G[s+1]=[{type:"splitLine",height:1}]}mainPage.getWidgetByElementId("navBrowseCenterTree").setGrid({vBox:G})};this.resize=function(){mainPage.layout();mainPage.redraw()};this.setScheme=function(C,
U){mainPage.setScheme(C,U)};this.redraw=function(C){mainPage.getWidgetByElementId("navBrowseCenterTree").draw(!0)};this.setSplitLinePos=function(C){return mainPage.setSplitLinePos(C)};(function(){var C={name:"\u6d4f\u89c8\u4e2d\u5fc3",id:"navBrowseCenter",elements:[{element:{id:"navBrowseCenterTree",class:"xGrid",variables:{browseUrl:null},bounds:[{id:"browseUrl",type:"synch",variable:"variables.browseUrl"}],option:{backgroundColor:"#fff",borderColor:"#000",color:"#000",colors:["rgba(255,255,255,1)",
"#FF503B","#72FFBE","#fff"],margin:0,fontSize:11,lineHeight:30,enableFocus:!0,isFocus:!0,scroller:{scrollerV:"show",scrollerH:"hidden"}}}},{class:"divider-col",dividerResize:"slider-left",left:320,width:8,style:"width:8px;",dividerColor:"#888",sliderColor:"#aaa"},{page:{id:"browsePage",callback_init:A,callback_onMessage:r,callback_createLay:u}}]};mainPage=new xPage(a,q.page.getPageManager(),this.page,c,C,null,null);mainPage.show(!0);H()})()};function xCarousel(a,b,c,g,k,q,f){function p(aa){playInterval=setInterval(function(){var ia=[];ia[0]=parseInt(V[0].style.left);ia[1]=parseInt(V[1].style.left);var fa=ba.autoPlay.step;fa=ia[0]<aa?fa:-fa;ia[0]+=fa;ia[1]+=fa;Math.abs(ia[0]-aa)>Math.abs(fa)?(V[0].style.left=ia[0]+"px",V[1].style.left=ia[1]+"px"):(clearInterval(playInterval),V[0].style.display="none",V[1].style.left="0px",ia=V[0],V[0]=V[1],V[1]=ia,H&&H[0]&&H[0].table&&(L++,L>=H[0].table.data.length&&(L=0),X(1,L)),v.timeIn=!1)},ba.autoPlay.step)}
var v=this,A=null;v.page=b;this.initCreate=-1;var r;if(k&&f)for(var u in k)for(var z in f)if(u==z){k[u]=f[z];break}this.queryIndex=q.getQueryIndex(this);var H,C=!1,U=!1,J=0,G=0,B=!1,L=0,ba={autoPlay:{play:!0,pause:6E3,step:5,direct:"to right"},wheelOnFocus:!1,isFocus:!1,isClick:!1,isWheel:!1,isKeyDown:!1,isCapture:!1,markPreActiveButton:!1,canMouseSelected:!1,backgroundColor:"#141414",borderLeft:"none",borderRight:"none",borderTop:"none",borderBottom:"none",color:"#fff",colors:["rgba(255,255,255,1)",
"#FF503B","#72FFBE","#fff"],cursor:{backgroundColor:"transparent"},fontFamily:xGlobal.systemFont,fontSize:12,lineHeight:28,dragable:!1,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,enableFocus:!0,setDefaultFocusObject:!1,keyEnenterTab:!0,tabKey:"",enterOrder:[],tabOrder:[],closePosition:{right:16,height:9,width:9,top:4},scroller:{scrollerV:"hidden",scrollerH:"hidden",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"}},N,E,V=[],F=function(){if(ba.item&&ba.item.element)var aa=
ba.item.element;if(aa)for(var ia=0;2>ia;ia++){if(null==V[ia]){var fa=ia,T=ia,Y=a.document.createElement("div"),O=a.document.createAttribute("style");O.value="position:absolute;display:none;left:0px;top:0px;bottom:0px;right:0px;";ba.style&&(O.value+=ba.style);Y.setAttributeNode(O);Y.id=c.id+"_"+T;c.appendChild(Y);V[fa]=Y;fa=a.document.createElement("canvas");fa.className="xGrid";T=a.document.createAttribute("style");T.value="display:block; position: absolute; margin:0px;padding:0px; left: 0px; top: 0px; right: 0px; bottom: 0px; background-color: transparent;border:none;  cursor: default;";
T.value+=ba.border;fa.setAttributeNode(T);V[ia].canvasDom=fa;V[ia].appendChild(fa);V[ia].variables=aa.variables?xDeepCopy(aa.variables):null;fa=new xGrid(a,null,fa,null,null,V[ia].variables,aa.calls,q);fa.setParentDiv&&fa.setParentDiv(v);V[ia].canvasObject=fa;aa.toolbars&&fa.initToolbars&&fa.initToolbars(e,aa.toolbars);aa.option&&fa.setOption(aa.option);aa.bounds&&fa.setBounds(aa.bounds);null!=v.parent&&null!=v.parent.getVariables&&(T=v.parent.getVariables(),null!=T&&null!=fa.setVariablesValue&&fa.setVariablesValue(T,
null,!1));N&&E&&V[ia].canvasObject.setScheme(N,E)}V[ia].canvasObject.setGrid(aa.init)}};this.create=function(){this.initCreate=!0;M();ba.callback_init&&ba.callback_init(v)};this.show=function(){1!=A&&(A=!0,-1==this.initCreate&&v.query(),V[0]&&V[0].canvasObject&&V[0].canvasObject.show())};this.hidden=function(aa){0!=A&&(A=!1,V[0]&&V[0].canvasObject&&V[0].canvasObject.hidden())};this.resize=function(){A&&v.draw()};this.setScheme=function(aa,ia){N=aa;E=ia;var fa;for(fa=0;fa<V.length;fa++)V[fa]&&V[fa].canvasObject&&
(V[fa].canvasDom.style.border+=ba.border,V[fa].canvasObject.setScheme(aa,ia));aa.xSuperCollection&&(aa=aa.xSuperCollection[ia]?aa.xSuperCollection[ia]:aa.xSuperCollection.normal)&&(xCopyAllTo(aa,ba),c.style.backgroundColor=ba.backgroundColor);v.draw()};this.setOption=function(aa){xCopyTo(aa,ba);aa.item&&(ba.item=xDeepCopy(aa.item));aa.initPreCell&&(ba.initPreCell=xDeepCopy(aa.initPreCell));ba.initListVariable=aa.initListVariable;aa.cell&&aa.cell.default&&(ba.cell.default=aa.cell.default);null!=aa.callback_init&&
(ba.callback_init=aa.callback_init);F()};this.setBounds=function(aa){r=aa};this.synchBoundValue=function(aa,ia,fa,T){if(T!=v&&void 0!=r&&0<r.length&&fa){aa=!1;for(ia=0;ia<fa.length;ia++)if(null!=fa[ia]&&null!=fa[ia].bound)for(T=0;T<r.length;T++)if((null==r[T].type||"synch"==r[T].type||"receive"==r[T].type)&&r[T].id==fa[ia].bound.id&&r[T].variable==fa[ia].bound.variable){if("variables."==fa[ia].bound.variable.slice(0,10)){T=fa[ia].bound.variable.slice(10);try{if(-1!=T.indexOf(".")){var Y=T.split(".");
if(2==Y.length){var O=Y[0],K=Y[1];"Object"==k[O].constructor.name&&k[O][K]!=fa[ia].value&&(k[O][K]=fa[ia].value,variablesChangeQuery=aa=!0)}}else k&&k[T]!=fa[ia].value&&(k[T]&&"Array"==k[T].constructor.name?filterMatch(fa[ia].value,k,T,v):k[T]=fa[ia].value,variablesChangeQuery=aa=!0)}catch(Z){console.log(Z)}}else if(fa[ia].bound.variable)try{eval(fa[ia].bound.variable)!=fa[ia].value&&(eval(fa[ia].bound.variable+"=boundValue[i].value"),aa=!0)}catch(Z){console.log(Z)}break}if(1==aa)for(T=0;T<r.length;T++)if("cursor"==
r[T].type){for(Y=0;Y<fa.length;Y++)if(r[T].id==fa[Y].id){cursor.locateValue=fa[Y].value;locateCursorIndex(T);break}break}C=!0;g&&g[0]&&g[0].callback_object?(fa=v.onDoCallback(g[0].callback_object),v.setTable(fa)):v.query()}};this.setVariablesValue=function(aa,ia,fa){var T=!1;if("Object"==aa.constructor.name&&null==ia)for(var Y in aa)k[Y]!=aa[Y]&&(k[Y]=aa[Y],T=!0);else if(ia)for(Y in k)for(var O=0;O<aa.length;O++)aa[O][0]==Y&&k[Y]!=ia[O]&&(k[Y]=ia[O],T=!0);null!=fa&&(T=fa);1==T&&(C=!0,g&&g[0]&&g[0].callback_object?
(ia=v.onDoCallback(g[0].callback_object),v.setTable(ia)):v.query())};this.clearQueryData=function(){J=H=null;U=!0};this.query=function(){var aa=g;if(!(null==aa||aa[0]&&aa[0].callback_object)&&(-1!=aa.indexOf("{{")&&(aa=replaceVariablesValue(aa,k,H)),0!=c.offsetWidth&&0!=c.offsetHeight)){var ia=!1;if(null==J||1==U)U=!1,ia=!0;for(var fa=0;fa<aa.length;fa++)if(null==aa[fa]||aa[fa].queryStatus)aa[fa]&&1==aa[fa].queryStatus&&(aa[fa].queryStatus=2);else{var T;if(aa[fa].server&&""!=aa[fa].server){var Y=
aa[fa].server.slice(10);k&&k[Y]&&""!=k[Y]&&(T=k[Y])}var O=void 0;aa[fa].http&&(O=replaceVariablesValue(aa[fa].http,k,H));if(aa[fa].sql&&(null==O||"http"!=O.substr(0,4).toLowerCase())){Y=replaceVariablesValue(aa[fa].sql,k,H);parseTableName(Y);if(0==fa){if(1==ba.enableOrderBy&&""!=ba.orderBy&&header)for(O=0;O<header.length;O++){if(header[O].cells&&ba.orderBy==header[O].cells[0].field){ba.orderByType&&(Y+=" order by "+ba.orderBy,-1==ba.orderByType&&(Y+=" desc"));header[O].order=ba.orderByType;for(O++;O<
header.length;O++)header[O].order=0;break}header[O].order=0}if(1==C&&""!=ba.initCursorPos)var K=[J,9];else if(void 0!=J)if(1==ba.paging){if(null==aa[fa].query||aa[fa].query.script!=Y)J=offsetY=offsetX=0;K=[J+1,9]}else{if(null==aa[fa].query||aa[fa].query.script!=Y)J=offsetY=offsetX=0;K=[J+1,10]}}else K=null;if(!(null==Y||""==Y||0<=Y.indexOf("{{ ")||aa[fa].server&&null==T)){if(null==aa[fa].query||aa[fa].query.script!=Y)ia=isSynBound=!0,aa[fa].queryStatus=1;if(null==aa[fa].query||aa[fa].query.limit&&
K&&(aa[fa].query.limit[0]!=K[0]||aa[fa].query.limit[1]!=K[1]))ia=!0,aa[fa].queryStatus=1;1==aa[fa].queryStatus&&(aa[fa].query={script:Y,limit:K,server:T})}}else if(aa[fa].http&&O&&""!=O){aa[fa].field&&replaceVariablesValue(aa[fa].field,k,H);var Z=aa[fa].script?replaceVariablesValue(aa[fa].script,k,H):replaceVariablesValue(aa[fa].condition,k,H);Y=void 0;1==C&&""!=ba.initCursorPos?0>ba.initCursorPos?Y=[-1,5]:null!=k.pageNo&&(Y=[0,5]):void 0!=J&&(Y=[0,5]);0==fa?K=Y:null!=aa[fa].limit?aa[fa].limit.mode&&
"main"==aa[fa].limit.mode?K=Y:null!=aa[fa].limit.begin&&null!=aa[fa].limit.items&&(K=[aa[fa].limit.begin,aa[fa].limit.items]):K=[];null==Z||""==Z||0<=Z.indexOf("{{ ")||(Y=";"+Z,null!=J&&(null==aa[fa].query||Y!=aa[fa].query.script||aa[fa].query.limit&&K&&(g[fa].query.limit[0]!=K[0]||g[fa].query.limit[1]!=K[1]))&&(header=null,isInitHeader=!1,null!=aa[fa].query&&Y==aa[fa].query.script||G++,aa[fa].query={script:Y,limit:K,field:"",condition:Z,id:G,server:O},aa[fa].queryStatus=1,q.sendHttpQuery(v.queryIndex,
aa,fa,v.setTable),_condition=Z))}}ia&&(q.sendQuery(v.queryIndex,aa,v.setTable),_condition=Z)}};var M=function(){for(var aa=0;aa<V.length;aa++)if(V&&V[aa]&&V[aa].canvasObject){var ia=void 0;var fa=J+aa;if(null==T||(null==H||null==H[0])&&1!=v.initCreate)ia=void 0;else for(var T=ba.item.bounds,Y=v.initCreate?[]:H[0].table,O=0,K=0;K<T.length;K++)if("receive"==T[K].type){var Z;T[K].field?Z=T[K].field:T[K].variable&&"variables."==T[K].variable.slice(0,10)&&(Z=T[K].variable.slice(10));if(Z){Z=Z.toLowerCase();
var pa=parseFieldObj(Z);if(pa.tableName)if(pa.obj&&pa.obj.tableName&&pa.obj.fieldName){if(H[0].table.info.name.toLowerCase()==pa.obj.tableName.toLowerCase())for(var oa=0;oa<Y.field.length;oa++)if(Y.field[oa][0].toLowerCase()==pa.obj.fieldName){var Aa=cursor.index-dataBegin,ta;"col"==Y.info.rank?0<=Aa&&Aa<Y.data[oa].length&&(ta=Y.data[oa][Aa]):0<=Aa&&Aa<Y.data.length&&(ta=Y.data[Aa][oa]);for(Aa=0;Aa<H.length&&null!=H[Aa].table;Aa++)if(H[Aa].table.info.name.toLowerCase()==pa.tableName){for(oa=0;oa<
H[Aa].table.field.length;oa++)if(H[Aa].table.field[oa][0].toLowerCase()==pa.boundFieldName){if("row"==H[Aa].table.info.rank)for(var Q=0;Q<H[Aa].table.data.length;Q++)if(ta==H[Aa].table.data[Q][oa]){for(oa=0;oa<H[Aa].table.field.length;oa++)if(H[Aa].table.field[oa][0].toLowerCase()==pa.fieldName){ia[O]={bound:T[K],value:H[Aa].table.data[Q][oa]};O++;break}break}break}break}break}}else{if(pa.tableName&&pa.fieldName)for(oa=cursor.index-dataBegin,Aa=pa.fieldName.replace(pa.tableName+".",""),Q=0;Q<H.length;Q++)if(H[Q]&&
H[Q].table&&H[Q].table.info.name==pa.tableName&&H[Q].table.field&&"row"==H[Q].table.info.rank)for(var sa=0;sa<H[Q].table.field.length;sa++)if(H[Q].table.field[sa][0].toLowerCase()==Aa){ia[K]={bound:T[K],value:H[Q].table.data[oa][sa]};break}}else if(Y&&Y.field)for(ia=[],oa=0;oa<Y.field.length;oa++)if(Y.field[oa][0].toLowerCase()==Z){Aa=fa;"col"==Y.info.rank?Y.data[oa]&&0<=Aa&&Aa<Y.data[oa].length&&(ia[O++]={bound:T[K],value:Y.data[oa][Aa]}):0<=Aa&&Aa<Y.data.length&&Y.data[Aa]&&(ia[O++]={bound:T[K],
value:Y.data[Aa][oa]});break}}}else T[K].bound&&(pa=void 0,"variables."==T[K].bound.slice(0,10)&&(pa=T[K].bound.slice(10)),k[pa]&&(ia=[],ia[O++]={bound:T[K],value:k[pa][fa]}));if(ia){fa=null;for(Y=0;Y<ia.length;Y++)for(O=0;O<r.length;O++)if((null==r[O].type||"synch"==r[O].type||"receive"==r[O].type)&&r[O].id==ia[Y].bound.id&&r[O].variable==ia[Y].bound.variable){"variables."==ia[Y].bound.variable.slice(0,10)&&(O=ia[Y].bound.variable.slice(10),null==fa&&(fa={}),fa[O]=ia[Y].value);break}fa?(V[aa].style.display=
"block",V[aa].canvasObject.setVariablesValue(fa)):ba.hideNoVariable&&(V[aa].style.display="none")}}};this.setTable=function(aa,ia,fa){H=xDeepCopy(aa);if(g&&H)for(aa=0;aa<g.length;aa++)g[aa]&&H[aa]&&H[aa].updateCounter!=g[aa].updateCounter&&(g[aa].updateCounter=H[aa].updateCounter,g[aa].callback_onMessage&&g[aa].callback_onMessage(H[aa],ia,fa,{option:ba,variables:k,target:v,page:v.page,callbacks:{openWidthBrowseCenter:function_openWithBrowseCenter}},H),g[aa].queryStatus=null);M();X(0,0);X(1,1);0==
B&&ba.autoPlay&&1==ba.autoPlay.play&&(B=!0,playInterval=setInterval(v.startAutoPlay,ba.autoPlay.pause))};var X=function(aa,ia){var fa=H[0].table;if(V[aa]&&V[aa].canvasObject){var T={},Y;for(Y in fa)switch(Y){case "data":"row"==fa.info.rank&&(T.data=[fa.data[ia]||[]]);break;case "info":T.info=xDeepCopy(fa.info);T.info.begin=0;T.info.rows=1;T.info.totalRows=1;T.info.dataBegin=0;break;case "field":T.field=fa.field}V[aa].canvasObject.setTable([{table:T}])}v.draw()};this.changeSelect=function(){J=0};this.draw=
function(aa){V&&V[0]&&("block"!=V[0].style.display&&(V[0].style.display="block"),V[0].canvasObject.draw(aa))};this.refresh=function(){V&&V[0]&&V[0].canvasObject.refresh()};this.onKeyDown=function(aa){};this.getItemsParam=function(){var aa=cells.map(function(ia,fa){return ia.canvasObject});return{option:ba,variables:k,target:v,targetChildren:ba.item.element,items:aa,page:v.page}};this.getQueryInfo=function(){return g};this.doAction=function(aa){for(var ia=aa.split(";"),fa=0;fa<ia.length;fa++){aa=ia[fa];
aa=trim(aa);for(var T=0;T<aa.length&&"."!=aa[T];T++)if("("==aa[T]){T=0;break}if(0<T){var Y=aa.substr(0,T);Y=globalPage.getActivePage().getWidgetByElementId(Y);if(null!=Y&&Y.doAction){aa=aa.slice(T+1,aa.length);Y.doAction(aa);continue}}"setOption"==aa.substr(0,9)?(aa=aa.substr(9,aa.length-1),aa=eval(aa),this.setOption(aa)):"reload"==aa.substr(0,6)?this.reload():eval(aa)}};this.startAutoPlay=function(){if(1!=v.timeIn&&0!=c.clientWidth){v.timeIn=!0;var aa=c.offsetWidth;V[0].style.left="0px";V[0].style.width=
aa+"px";V[0].style.display="block";V[1].style.left=""+aa+"px";V[1].style.width=aa+"px";V[1].style.display="block";V[1].canvasObject.draw();p(-aa)}};c.style.backgroundColor=ba.backgroundColor;c.style.overflow="hidden";F()};var xDialogList=[],xDialogHidden;function dialogHidden(){onCloseXDialog();onRemoveXDialog()}function checkXDialog(){if(0<xDialogList.length){var a=xDialogList[xDialogList.length-1];"none"==a.dialogDiv.style.pointerEvents&&(xDialogHidden=a,onRemoveXDialog())}}
function onCloseXDialog(a){checkXDialog();xDialogHidden=xDialogList[xDialogList.length-1];xDialogHidden.prepareClosed();xDialogHidden.dialogDiv.addEventListener("transitionend",onRemoveXDialog,!1);xDialogHidden.dialogDiv.className="xDialog-Hidden";xDialogHidden.dialogDiv.style.opacity=0;xDialogHidden.dialogDiv.style.pointerEvents="none";onRemoveXDialog()}
function onRemoveXDialog(){if(void 0!=xDialogHidden){xDialogHidden.dialogDiv.removeEventListener("transitionend",onRemoveXDialog);xDialogList[xDialogList.length-1].destroy();delete xDialogList[xDialogList.length-1];for(var a=[],b=0;b<xDialogList.length;b++)xDialogList[b]&&(a[a.length]=xDialogList[b]);xDialogList=a;xDialogHidden=void 0}}function onXDialogClickButton(a,b,c){xDialogList[a]&&xDialogList[a].clickButton(b,c)}
function xDialog(a,b,c,g,k,q,f,p,v){g=void 0===g?640:g;k=void 0===k?480:k;var A=this,r,u,z,H,C,U,J=c;this.dialogDiv=a.document.createElement("div");c=a.document.createAttribute("style");c.value="display:none; position:absolute; left:0px; top:0px; right:0px; bottom:0px";this.dialogDiv.setAttributeNode(c);a.document.getElementById("mainBody").appendChild(A.dialogDiv);this.dialogDiv.onselectstart=function(){return!1};var G=a.document.createElement("div"),B,L,ba,N,E,V,F,M,X,aa,ia=null,fa=null,T=3E4+frameCounter;
frameCounter++;var Y=xDialogList.length;G.id="xDialogId"+Y;xDialogList[Y]=this;var O,K,Z,pa,oa;this.setToScheme=function(){Aa(B)};var Aa=function(na){if(K){na=na.getElementsByTagName("input");for(var ha=K.split(";"),ea=[],ja=0;ja<ha.length;ja++)ea[ja]=ha[ja].split(":");for(ja=0;ja<na.length;ja++)for(ha=0;ha<ea.length;ha++)na[ja].style[ea[ha][0]]=ea[ha][1]}if(pa&&oa)for(ja=0;ja<oa.length;ja++)oa[ja].setTheme("ace/theme/"+pa)};this.createLayer=function(na,ha){ia=new xPage(a,A,null,B,na,null,null,{},
ha);null==xGlobal.refreshDialogList&&(xGlobal.refreshDialogList=[]);xGlobal.refreshDialogList.push(ia);ia.show(!0);if(na=xMe.getSystemScheme()){if(ha=na.xDialog.xDialog?na.xDialog.xDialog:na.xDialog.normal)ha.bodyStyle&&(G.style=getOptionStyle(G.style.cssText,{style:ha.bodyStyle})),ha.titleStyle&&(C.style=getOptionStyle(C.style.cssText,{style:ha.titleStyle})),ha.closeButtonStyle&&(U.style=getOptionStyle(U.style.cssText,{style:ha.closeButtonStyle}));ia.setScheme(na,"xDialog",!1)}ia.layout();ia.redraw();
ia.focus();fa=globalPage.getActivePage();globalPage.setActivePage(ia)};this.getFrameId=function(){if(T)return T};this.setAceEditors=function(na){oa=na};this.destroy=function(){xGlobal.focusObject&&"xSaftEdit"!=xGlobal.focusObject.constructor.name||!xGlobal.chineseIntercept||(xGlobal.chineseIntercept.style.display="none");ia&&(xGlobal.refreshDialogList&&xGlobal.refreshDialogList.pop(),ia.destroy(),ia=null);if(oa)for(var na=0;na<oa.length;na++)delete oa[na];a.document.getElementById("mainBody").removeChild(A.dialogDiv);
null!=fa&&globalPage.setActivePage(fa)};this.getDialogId=function(){return G.id};this.setDlg=function(na,ha){B=na;Aa(B);G.appendChild(B);na=a.document.createAttribute("style");na.value="position:absolute;left:8px;top:32px;right:8px;bottom:36px;border:1px solid #999;font-family:Courier;";O&&(na.value+=O+";");ha&&(na.value+=ha);B.setAttributeNode(na);xColorPicker.installColorPicker()};this.setAutoApply=function(na){(N=na)&&B&&ta(B)};this.prepareClosed=function(){var na=B;if(na)for(var ha=0;ha<na.childNodes.length;ha++)"INPUT"==
na.childNodes[ha].tagName?na.childNodes[ha].removeEventListener("input",A.autoApply):na.childNodes[ha].childNodes&&ta(na.childNodes[ha])};var ta=function(na){if(na)for(var ha=0;ha<na.childNodes.length;ha++)"INPUT"==na.childNodes[ha].tagName?na.childNodes[ha].addEventListener("input",A.autoApply):na.childNodes[ha].childNodes&&ta(na.childNodes[ha])};this.autoApply=function(){if(N){var na=A.getApplyModify(),ha=N,ea=N.indexOf("(");0<ea&&(ha=N.slice(0,ea));if(J&&null!=J[ha]){ea=N.indexOf("(");var ja=N.indexOf(")");
ea=N.slice(ea+1,ja).split(",");ja=[];for(var da=2;da<ea.length;da++)ja[da]=eval(ea[da]);J[ha](B,na,ja[2],ja[3],ja[4],ja[5],ja[6],ja[7])}}};this.setButtons=function(na){var ha=a.document.createElement("div"),ea=a.document.createAttribute("style");var ja="position:absolute;left:8px;height:24px;right:12px;bottom:6px;border:none;font-size:14px;font-family:"+(xGlobal.systemFont+";");ea.value=ja;ha.setAttributeNode(ea);G.appendChild(ha);ja="";for(ea=0;ea<na.length;ea++){var da="right";na[ea].align&&(da=
na[ea].align);var Oa=!0;0==na[ea].closeDialog&&(Oa=!1);ja+='<span class="xButton" style="padding-left:24px;padding-right:24px; margin-left:20px;';Z&&(ja+=Z);ja+=";border-radius:12px; ;transition:0.3s;cursor:default;float:"+da+'"';ja=void 0!=na[ea].action?ja+(' onclick="onXDialogClickButton('+Y+","+Oa+",&#39"+na[ea].action+'&#39)">'):ja+(' onclick="onXDialogClickButton('+Y+","+Oa+')">');ja+=na[ea].capture+"</span>"}ha.innerHTML=ja};this.clickButton=function(na,ha,ea){if("doSubOk()"==ha)A.doSubOk();
else if(void 0!=ha){ea=A.getApplyModify();var ja=ha,da=ha.indexOf("(");0<da&&(ja=ha.slice(0,da));if(J){if(null!=J[ja]){da=ha.indexOf("(");var Oa=ha.indexOf(")");ha=ha.slice(da+1,Oa).split(",");da=[];for(Oa=2;Oa<ha.length;Oa++)da[Oa]=eval(ha[Oa]);J[ja](B,ea,da[2],da[3],da[4],da[5],da[6],da[7])}}else ja==la.name?ba&&(ea=la(),-1==ea&&(na=!1)):ja==Na.name?ba&&(ea=Na(),-1==ea&&(na=!1)):(ea=Wa(ea),-1==ea&&(na=!1))}1==na&&onCloseXDialog(a)};this.closeDialog=function(){onCloseXDialog(a)};this.doSubOk=function(){var na=
ia.childs[0].object.getCursorValue()[1],ha=globalPage.getActivePage().childs[0].object;7>ha.buttons.length&&ha.buttons.splice(ha.buttons.length-3,0,{capture:na,action:'list.setVariablesValue({table:"rd.sector", id:" where Code in (select Code from rd.sector/composition(\'"+\''+ia.childs[0].object.getCursorValue()[0]+"'+\"') limit 1,20)\"})"});ha.resetBtn()};this.getApplyModify=function(){for(var na=B.getElementsByTagName("input"),ha="",ea=0;ea<na.length;ea++)if(na[ea].name)switch(na[ea].type){case "number":ha+=
na[ea].name+"="+na[ea].value+";";break;case "checkbox":ha+=na[ea].name+"="+na[ea].checked+";";break;default:ha="xColorPicker"==na[ea].className?"#"==na[ea].value[0]?ha+(na[ea].name+'="'+na[ea].value+'";'):ha+(na[ea].name+'="#'+na[ea].value+'";'):"xLineDash"==na[ea].className?"["==na[ea].value[0]?ha+(na[ea].name+"="+na[ea].value+";"):2>na[ea].value.length?ha+(na[ea].name+"=["+parseInt(na[ea].value)+"];"):ha+(na[ea].name+"=["+na[ea].value+"];"):ha+(na[ea].name+'="'+na[ea].value+'";')}return ha};this.onKeyDown=
function(na){if(27==na.keyCode)onCloseXDialog(a),ba&&(na=Na(),-1==na&&(closeDialog=!1));else if(13==na.keyCode)na.preventDefault(),ba&&(na=la(),-1==na&&(closeDialog=!1),na&&onCloseXDialog(a));else if(ia)ia.onKeyDown(na)};this.onKeyUp=function(na){if(ia)ia.onKeyUp(na)};var Q=function(na){r=na.clientX;u=na.clientY;z=parseFloat(G.style.left);H=parseFloat(G.style.top);xGlobal.ObjectMouseMove=A.onMouseMove},sa=function(na){if(colorPicker)if("xColorPicker"==na.srcElement.className)colorPicker.boundEditor(na.srcElement);
else colorPicker.onMouseDown(na);if(linePicker)if("xChartLineTypePicker"==na.srcElement.className)linePicker.boundEditor(na.srcElement,"chartLineType");else if("xLineTypePicker"==na.srcElement.className)linePicker.boundEditor(na.srcElement,"lineType");else if("xLineWidthPicker"==na.srcElement.className)linePicker.boundEditor(na.srcElement,"lineWidth");else linePicker.onMouseDown(na)},ra=function(na){"closeDialog"==na.srcElement.className&&r==na.clientX&&u==na.clientY&&onCloseXDialog(a);u=r=void 0};
this.onMouseMove=function(na){void 0!=r&&1==na.buttons&&(G.style.left=z+(na.clientX-r)+"px",G.style.top=H+(na.clientY-u)+"px",xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name&&xGlobal.focusObject.isChineseIntercept()&&autoLayerInChinese())};this.doAlert=function(na){this.setButtons([{capture:"\u5173\u95ed"}]);this.setDlg(parentDiv,"position: absolute;top:34px;left:20px;right:20px;bottom:40px;margin:0px;overflow:hidden;border: 0px solid #999;");this.createLayer({elements:[{innerHTML:"<a style='font-size:32px'>\u26a0\ufe0f</a><a style='font-size:16px;margin-left:16px'>"+
na+"</a>"}]})};this.doConfirm=function(na,ha,ea,ja){J=null;ba=!0;L=ea;E=ha;V=ja;ha=a.document.createElement("div");ha.id=A.getDialogId()+"-dlg";A.setDlg(ha);V?A.setButtons([{capture:"\u786e\u8ba4",action:la.name+"()"},{capture:"\u53d6\u6d88",action:Na.name+"()"}]):A.setButtons([{capture:"\u786e\u8ba4",action:la.name+"()"},{capture:"\u53d6\u6d88"}]);ea=window.document.createElement("div");ha.appendChild(ea);ja=a.document.createAttribute("style");ja.value="position: absolute;top:10px;left:20px;right:20px;bottom:40px;margin:0px;border: 0px solid #999;";
ea.setAttributeNode(ja);ea.innerHTML="<a style='font-size:32px'>\u26a0\ufe0f</a><a style='font-size:16px;margin-left:16px'>"+na+"</a>";ha.style.fontFamily="Courier"};var la=function(){var na=E(L);if(-1==na)return-1;if(na)return na},Na=function(){if(-1==V(L))return-1};this.doInput=function(na,ha){J=null;F=na;E=ha;na=a.document.createElement("div");na.id=A.getDialogId()+"-dlg";A.setButtons([{capture:"\u786e\u8ba4",action:Wa.name+"(apply)"},{capture:"\u53d6\u6d88"}]);ha=window.document.createElement("div");
na.appendChild(ha);var ea=a.document.createAttribute("style");ea.value="position:absolute;top:0px;left:0px;right:0px;height:32px;";ha.setAttributeNode(ea);ea="";for(var ja=8,da=0;da<F.length;da++){var Oa=F[da].width?F[da].width:128,Pa=F[da].labelWidth?F[da].labelWidth:92;ea+='<div style="position:absolute;text-align:right;width:'+(Pa-10)+"px;left:8px;top:"+ja+'px;">'+F[da].name+':</div></input><input type="text"';ea+='name="modalInParam['+da+'].value" style="position:absolute;left:'+Pa+"px;width:"+
Oa+"px;top:"+(ja-2)+'px;height:23px;padding-left:3px;padding-right:3px"';ea+='value="'+(F[da].value?F[da].value:"")+'">';ja+=32}ha.innerHTML=ea;na.style.fontFamily="Courier";A.setDlg(na);na=ha.getElementsByTagName("input");0<na.length&&na[0].focus()};var Wa=function(na){na=na.split("modalInParam[");for(var ha in na){var ea=na[ha];if(""!=ea&&1<ea.length){var ja=ea.substring(0,ea.indexOf("]"));ea=ea.slice(ea.indexOf("value=")+7,-2);F[parseInt(ja)].value=ea}}if(-1==E(F))return-1};this.doBrowser=function(na,
ha,ea,ja){J=null;M=ha;X=ea;aa=ja;ha=a.document.createElement("div");ha.id=A.getDialogId()+"-dlg";window.document.createAttribute("style");A.setDlg(ha,"overflow:auto;padding:8px;cursor:default;font-size:12px;font-family:"+xGlobal.systemFont+";");ea=[];M&&(ea[ea.length]={capture:"\u589e\u52a0",action:"doEditorAdd()",align:"left",closeDialog:!1});X&&(ea[ea.length]={capture:"\u4fee\u6539",action:"doEditorModify()",align:"left",closeDialog:!1});aa&&(ea[ea.length]={capture:"\u5220\u9664",action:"doEditorDelete()",
align:"left",closeDialog:!1});ea[ea.length]={capture:"\u5173\u95ed",action:null};A.setButtons(ea);ha.style.fontFamily="Courier";A.createLayer(na)};this.doBrowserItem=function(na,ha,ea,ja,da,Oa){J=null;M=ja;X=da;aa=Oa;na=na.replace(/"/g,"_|_");if(ha)for(var Pa in void 0)na=eval("sql.replace(/{{ "+(Pa+" }}/g, repValue)"));ha={elements:[{style:"height:100%;left:0px;top:0px;width:220px;",element:{id:"groupList",class:"xList",type:"canvas",option:{alwaysShowSelected:!0,selectedIsCursor:!0},query:{sql:[{name:b,
sql:na,prop:""}]},initAction:"query()",bounds:[{id:"id",type:"send",field:"watchListId",variable:"{{ id }}"}]}},{id:"h-handler0",class:"divider-col",style:"left:220px;width:8px;background-color:transparent;box-shadow:-3px 1px 3px #aaa;overflow:hidden"},{style:"left:228px;right:0px;top:0px;bottom:0px;border:0px solid #888;font-family:Courier",element:{id:"subList",class:"xCollection",type:"canvas",option:{rank:"col",itemWidth:120,itemHeight:40,alwaysShowSelected:!1,selectedIsCursor:!0},query:{sql:[{name:"",
sql:"select * from usr.watchList/'"+aboutMe.getAccount()+"'('{{ id }}')"}]},variables:{id:"0"},bounds:[{id:"id",type:"receive",variable:"{{ id }}"}]}}]};ea&&(ea.elements?(ha=ea,ha.elements[0].element.query={sql:[{name:b,sql:na,prop:""}]}):"Array"==ea.constructor.name&&(ha.elements[0].element.init=ea));ea=a.document.createElement("div");ea.id=A.getDialogId()+"-dlg";window.document.createAttribute("style");A.setDlg(ea,"overflow:auto;padding:8px;cursor:default;font-size:12px;font-family:"+xGlobal.systemFont+
";");Pa=[];M&&(Pa[Pa.length]={capture:"\u589e\u52a0",action:"doEditorAdd()",align:"left",closeDialog:!1});X&&(Pa[Pa.length]={capture:"\u4fee\u6539",action:"doEditorModify()",align:"left",closeDialog:!1});aa&&(Pa[Pa.length]={capture:"\u5220\u9664",action:"doEditorDelete()",align:"left",closeDialog:!1});Pa[Pa.length]={capture:"\u5173\u95ed",action:null};A.setButtons(Pa);ea.style.fontFamily="Courier";A.createLayer(ha)};this.doPage=function(na,ha){var ea=a.document.createElement("div");ea.id=A.getDialogId()+
"-dlg";window.document.createAttribute("style");A.setDlg(ea,"overflow:auto;padding:8px;cursor:default;font-size:12px;font-family:"+xGlobal.systemFont+";bottom:"+(ha?"36px":"8px")+";");A.createLayer(na);ha&&A.setButtons(ha)};(function(na,ha,ea){if(null==ha||null==ea){var ja=globalPage.getActiveFrame();if(ja&&(ja=ja.getScheme())&&ja.xDialog&&ja.xDialog.normal){var da=ja.xDialog.normal.bodyStyle;ha=ja.xDialog.normal.titleStyle;O=ja.xDialog.normal.frameStyle;closeButtonStyle=ja.xDialog.normal.closeButtonStyle;
K=ja.xDialog.normal.inputStyle;Z=ja.xDialog.normal.buttonStyle;pa=ja.xDialog.normal.aceEditorTheme}}void 0==q&&(q=(window.innerWidth-g)/2);void 0==f&&(f=(window.innerHeight-k)/2);ja=a.document.createAttribute("style");var Oa="display:none; position:absolute;left:"+(q+"px;top:"+f+"px;width:"+g+"px;height:"+k+"px;");Oa+="box-shadow:0px 0px 20px #333;font:12px "+xGlobal.systemFont;Oa+="z-index:"+(xZIndex.dialog+Y+1+1002)+";";ja.value=da?Oa+da:Oa+"background-color:#eee;";G.setAttributeNode(ja);C=a.document.createElement("div");
ja=a.document.createAttribute("style");Oa=null!=ha?ha:"position:absolute;top:0px;left:0px;right:0px;height:26px;background-color:#fff;text-align:center;line-height:26px;cursor:default;font:14px "+(xGlobal.systemFont+";");ja.value=Oa;C.setAttributeNode(ja);C.innerHTML=na;G.appendChild(C);U=a.document.createElement("div");U.className="closeDialog";ja=a.document.createAttribute("style");ja.value=null!=ea?ea:"position:absolute;top:3px;right:6px;height:18px;width:18px;text-align:center;line-height:18px;cursor:default;font-family:Webdings;font-size:18;transition:0.3s;";
U.setAttributeNode(ja);U.innerHTML="\uf072";C.appendChild(U);C.addEventListener("mousedown",Q);C.addEventListener("mouseup",ra);C.addEventListener("mousemove",A.onMouseMove);A.dialogDiv.addEventListener("mousedown",sa);A.dialogDiv.className="xDialog";A.dialogDiv.appendChild(G);G.style.display="block";A.dialogDiv.style.display="block";A.dialogDiv.style.zIndex=xZIndex.dialog+Y+1+1002})(b,p);return this}
function xAlert(a,b,c,g){b=new xDialog(window,b,null,void 0===c?490:c,void 0===g?182:g);c=document.createElement("div");b.setButtons([{capture:"\u5173\u95ed"}]);b.setDlg(c,"position: absolute;top:34px;left:20px;right:20px;bottom:40px;margin:0px;overflow:hidden;border: 0px solid #999;");b.createLayer({elements:[{innerHTML:"<a style='font-size:32px'>\u26a0\ufe0f</a><a style='font-size:16px;margin-left:16px'>"+a+"</a>"}],style:"display:block"})};function xDragdropLayout(a,b,c,g){function k(G,B,L){if(G<L.left+L.width/2){if(B<L.top+L.height/2)return G=L.top+(G-L.left)/L.width*L.height,B<G?"top":"left";G=L.top+(L.width-(G-L.left))/L.width*L.height;return B<G?"left":"bottom"}if(G>=L.left+L.width/2){if(B<L.top+L.height/2)return G=L.top+(L.width-(G-L.left))/L.width*L.height,B<G?"top":"right";G=L.top+(G-L.left)/L.width*L.height;return B<G?"right":"bottom"}}function q(G){G.preventDefault();if(1==G.buttons){for(var B=G.offsetX,L=G.offsetY,ba=0,N=
0,E=0;E<G.path.length&&G.path[E]!=r;E++)B+=G.path[E].offsetLeft,ba+=G.path[E].scrollLeft,L+=G.path[E].offsetTop,N+=G.path[E].scrollTop;G=v.getWidgetDivByXY(B,L,ba,N);var V=function(M,X){for(var aa=0;aa<M.length;aa++)if(M[aa]==X||M[aa].components==X||M[aa].components&&V(M[aa].components,X))return!0};G&&H.component&&G.component&&H.component.components&&(H.component==G.component||V(H.component.components,G.component))&&(G=null);ba=B-J.x;E=L-J.y;N=H.position.width;var F=H.position.height;if(G&&H.dom!=
G.dom&&"divider-col"!=G.component.type&&"divider-row"!=G.component.type)switch(U=k(B,L,G.position),C=G,U){case "left":ba=G.position.left;E=G.position.top;N=G.position.width/2;F=G.position.height;break;case "right":ba=G.position.left+G.position.width/2;E=G.position.top;N=G.position.width/2;F=G.position.height;break;case "top":ba=G.position.left;E=G.position.top;N=G.position.width;F=G.position.height/2;break;case "bottom":ba=G.position.left,E=G.position.top+G.position.height/2,N=G.position.width,F=
G.position.height/2}else C=U=null;z.style.left=ba+"px";z.style.top=E+"px";z.style.width=N+"px";z.style.height=F+"px"}}function f(G){u.style.border=A&&A.color&&A.color.drag&&A.color.drag.border?A.color.drag.border:"2px solid rgba(255,128,128,0.5)";z.style.pointerEvents="none";r.style.pointerEvents="auto";r.style.cursor="move";z.style.backgroundColor=A&&A.color&&A.color.drop&&A.color.drop.backgroundColor?A.color.drop.backgroundColor:"rgba(0,0,255,0.25)";z.style.border="none";z.style.left=u.style.left;
z.style.top=u.style.top;z.style.width=H.position.width+"px";z.style.height=H.position.height+"px";z.style.display="block";J={x:G.offsetX,y:G.offsetY};C=null;if(G=v.getPageSize())r.style.width=G.width+"px",r.style.height=G.height+"px"}function p(G){u.style.border="none";z.style.pointerEvents="auto";r.style.pointerEvents="none";r.style.cursor="default";z.style.left=u.style.left;z.style.top=u.style.top;z.style.width=H.position.width+"px";z.style.height="8px";C&&(C.component.element&&C.component.element!=
H.component.element||C.component!=H.component)&&(G=v.dragdrop(H,C,U),A.callback&&A.callback(H.component.element,C.component.element,U,G),z.style.display="none");C=null}var v=c,A=g,r,u,z,H,C,U;this.onMouseMove=function(G,B,L,ba,N){G!=z&&((G=v.getWidgetDivByXY(B,L,ba,N))&&"divider-col"!=G.component.type&&"divider-row"!=G.component.type?(H=G,u.style.backgroundColor="transparent",u.style.border="none",u.style.left=H.position.left-ba+"px",u.style.top=H.position.top-N+"px",B=4,A&&A.color&&A.color.drag&&
A.color.drag.border&&(B=2*parseInt(A.color.drag.border)),u.style.width=H.position.width-B+"px",u.style.height=H.position.height-B+"px",u.style.display="block",A&&A.color&&A.color.drop&&A.color.drop.backgroundColor&&(z.style.backgroundColor=A.color.drop.backgroundColor),z.style.left=G.position.left-ba+"px",z.style.top=G.position.top-N+"px",z.style.width=G.position.width+"px",z.style.height="8px",z.style.display="block"):(u.style.display="none",z.style.display="none"))};var J;(function(){r=a.document.createElement("div");
var G=a.document.createAttribute("style");G.value="margin:0px;padding:0px;position:absolute;top:0px;left:0px;right:0px;height:0px;display:block;background-color:transparent;pointer-events:none;z-index:999";r.setAttributeNode(G);b.appendChild(r);u=a.document.createElement("div");G=a.document.createAttribute("style");G.value="margin:0px;padding:0px;position:absolute;top:0px;left:0px;right:0px;bottom:0px;display:none;background-color:transparent;";u.setAttributeNode(G);r.appendChild(u);z=a.document.createElement("div");
z.className="dockObject";G=a.document.createAttribute("style");G.value="margin:0px;padding:0px;position:absolute;top:0px;left:0px;right:0px;bottom:0px;display:none;pointer-events:auto;cursor:move;";z.setAttributeNode(G);A&&A.color&&A.color.drop&&A.color.drop.backgroundColor&&(z.style.backgroundColor=A.color.drop.backgroundColor);r.appendChild(z);z.addEventListener("mousedown",f);r.addEventListener("mousemove",q);r.addEventListener("mouseup",p)})()};var frameCounter=1;
function xFrame(a,b){var c=this,g,k,q,f,p=0,v=3E4+frameCounter,A,r;frameCounter++;if(xGlobal.isMobile)C=H=z=u=0;else var u=72,z=0,H=0,C=0;this.setMainPagePos=function(N,E,V,F){N&&(u=N);E&&(z=E);V&&(H=V);F&&(C=F)};this.createPageManager=function(){null==g&&(g=new xPageManager(a,c));return g};this.getPageManager=function(){return g};this.setPages=function(N,E){null==g&&(g=new xPageManager(a,c));g.setPages(N,E);r=N[0].id};var U,J,G,B,L;this.setFloatPages=function(N,E){if(null==J){J=a.document.createElement("div");
var V=a.document.createAttribute("style");V.value="display:none; overflow:hidden; position:absolute; left:0px; top:0px; right:0px; bottom:0px; z-index:2021;background-color:#222422";J.setAttributeNode(V);a.document.getElementById("mainBody").appendChild(J);var F=a.document.createElement("div");V=a.document.createAttribute("style");V.value="overflow:hidden; position:absolute; left:0px; top:0px; right:0px; height:42px;";F.setAttributeNode(V);J.appendChild(F);E&&(F.appendChild(E),V=a.document.createAttribute("style"),
V.value="position:absolute; left:0px; top:0px; right:0px; bottom:0px;",E.setAttributeNode(V));B=a.document.createElement("div");B.className="closeDialog";V=a.document.createAttribute("style");html="position:absolute;top:12px;right:6px;height:18px;width:18px;text-align:center;color:#888;";html+="line-height:18px;cursor:default;font-family:Webdings;font-size:18;transition:0.3s;";V.value=html;B.setAttributeNode(V);B.innerHTML="\uf072";F.appendChild(B);B.onclick=ba;G=a.document.createElement("div");V=
a.document.createAttribute("style");V.value="overflow:hidden; position:absolute; left:0px; top:42px; right:0px; bottom:0px;";G.setAttributeNode(V);J.appendChild(G)}U=xDeepCopy(N);for(N=0;N<U.length;N++)1==U[N].option.preCreate&&(U[N].page=new xPage(a,null,null,G,U[N],null,{top:0,bottom:0,left:0,right:0},null,null,null,U[N]))};this.activeFloatPage=function(N){for(var E=0;E<U.length;E++)if(U[E].id==N){J.style.display="block";U[E].page.layout();J.focus();L=U[E];break}};var ba=function(){J.style.display=
"none"};this.onFloatPageFrameKeydown=function(N){if(J&&"block"==J.style.display&&L){if(27==N.keyCode)return J.style.display="none",N.preventDefault(),L=null,!0;L.onKeydown(N)}};this.setNavPage=function(N){q=N;this.setPageTabStatus(r)};this.getNavPage=function(){return q};this.createStatus=function(N,E){z=void 0===E?36:E;if(0==z)k=xGlobal.refreshFrameList=null;else return k=new xFootStatus(a,c,void 0===N?!0:N),null==xGlobal.refreshFrameList&&(xGlobal.refreshFrameList=[]),xGlobal.refreshFrameList[xGlobal.refreshFrameList.length]=
c,k};this.getBorderTopPos=function(){return null!=xGlobal.containerTop?xGlobal.containerTop:u};this.getBorderBottomPos=function(){return null!=xGlobal.containerBottom?xGlobal.containerBottom:z};this.getBorderLeftPos=function(){return null!=xGlobal.containerTop?xGlobal.containerLeft:H};this.getBorderRightPos=function(){return null!=xGlobal.containerRight?xGlobal.containerRight:C};this.getMainBody=function(){return b};this.sendPauseQuery=function(N){sendMessage("pause",v,pageId,N)};this.sendRestartQuery=
function(N){sendMessage("restart",v,pageId,N)};this.sendCancelQuery=function(N){sendMessage("cancel",v,pageId,N)};this.sendHttpQuery=function(N,E,V,F){postHttpMessage("query",v,"0",N,E,V,F)};this.sendQuery=function(N,E,V){sendMessage("query",v,"0",N,E,V)};this.sendUpdate=function(N,E,V,F){sendMessage("update",v,"0",N,E,V,F)};this.sendInsert=function(N,E,V){sendMessage("insert",v,"0",N,E,V)};this.sendDelete=function(N,E,V){sendMessage("delete",v,"0",N,E,V)};this.sendSubmit=function(N,E,V){sendMessage("submit",
v,"0",N,E,V)};this.sendHttpSubmit=function(N,E,V,F){postHttpMessage("submit",v,"0",N,E,V,F)};this.getQueryIndex=function(){return p++};this.setPageActiveObject=function(N){var E=xGlobal.activeObject;f=N;xGlobal.activeObject=N;E&&E.draw&&E.draw(!0);N&&N.draw&&N.draw(!0)};this.getPageActiveObject=function(){return f};this.getPageById=function(N){if(g)return g.getPageById(N)};this.setActivePage=function(N,E){return g.setActivePage(N,E)};this.setPageTabStatus=function(N){if(q)for(var E in q){var V=q[E].getWidgetByElementId("navHeaderGrid");
if(V){V.setFocusObjectById(N);break}}};this.activePageWithShortCut=function(N){if(g)return g.activePageWithShortCut(N)};this.doEscape=function(){return g.doEscape()};this.setVariablesValue=function(N,E,V){var F=g.getActivePage();F&&F.setVariablesValue(N,E,V)};this.getAcceptKeyGeniusPage=function(){return g.getAcceptKeyGeniusPage()};this.getCallbacks=function(){return{setPageActiveObject:c.setPageActiveObject,getPageActiveObject:c.getPageActiveObject,getGlobalActiveObject:c.getGlobalActiveObject,sendPauseQuery:c.sendPauseQuery,
sendRestartQuery:c.sendRestoreQuery,sendCancelQuery:c.sendCancelQuery,sendQuery:c.sendQuery,sendHttpQuery:c.sendHttpQuery,sendSubmit:c.sendSubmit,sendHttpSubmit:c.sendHttpSubmit,getQueryIndex:c.getQueryIndex,setVariablesValue:c.setVariablesValue}};this.setScheme=function(N){A=N;k&&k.setScheme(A);g&&g.setScheme(A);if(U)for(N=0;N<U.length;N++)U[N].page&&U[N].page.setScheme(A)};this.getScheme=function(){return A};this.setOption=function(N,E,V){"xFootStatus"==N?k&&k.setOption(E.normal):"xStatus"==N?k&&
k.setStatusOption(E.normal):g&&g.setOption(N,E,V)};this.getFrameId=function(){return v};this.setSplitLinePos=function(N){g&&g.setSplitLinePos(N)};this.layout=function(){if(q)for(var N in q)q[N].layout();g&&g.layout()};this.redraw=function(N){if(q)for(var E in q)q[E].redraw(N);g&&g.redraw(N);k&&k.redraw(N)};this.refresh=function(){k&&k.refresh()};globalPage.addFrame(c)};var xLanguage=new function(){function a(c){if(null!=xGlobal.currentSubMenu)for(var g=0;g<c.length;g++){var k=c[g].getAttribute("data-lang");if(null!=c[g].getAttribute("onclick")&&-1!=c[g].getAttribute("onclick").indexOf("doToolbarMenu")){var q=c[g].style.color,f=c[g].style.backgroundColor;if(document.createEvent){var p=document.createEvent("MouseEvents");p.initEvent("mousemove",!0,!1);c[g].dispatchEvent(p)}else document.createEventObject&&c[g].fireEvent("onmousemove");c[g].style.color=q;c[g].style.backgroundColor=
f;eval(c[g].getAttribute("onclick"));f=xGlobal.currentSubMenu.subMenu;for(p=q=0;p<f.length;p++)if(null!=f[p].radio&&"1"==f[p].radio){q=1;null!=xGlobal.currentSubMenu.bound&&null!=xGlobal.currentSubMenu.radioGroupId?c[g].previousSibling.innerHTML=f[p].capture:c[g].innerHTML=f[p].capture;break}f=document.createEvent("MouseEvents");f.initMouseEvent("mousedown",!0,!1);c[g].dispatchEvent(f);if(1==q)continue}null!=k&&null!=b.langMap[k]&&(-1!=k.indexOf("placeholder")?c[g].placeholder=b.langMap[k]:c[g].innerText=
b.langMap[k])}}var b=this;this.langMap={};this.country="";this.setLocalHttp=function(c){b.localHttp=c};this.getlanguage=function(c,g){};this.parseData=function(c){c=c.split(/\n/);for(var g=/(\\u.{4})/ig,k={map:{}},q=0,f=c.length;q<f;q++){var p=c[q];p=p.trim();if(0<p.length&&"#"!=p.match("^#")){var v=p.split("=");if(0<v.length){p=decodeURI(v[0]).trim();for(var A=1==v.length?"":v[1];-1!=A.search(/\\$/);)A=A.substring(0,A.length-1),A+=c[++q].trimRight();for(var r=2;r<v.length;r++)A+="="+v[r];0!=A.indexOf("[")&&
(A=A.replace(/"/g,""));(v=A.match(g))&&v.forEach(function(u){A=A.replace(u,unescapeUnicode(u))});k.map[p]=A}}}return k};this.changeCountry=function(c,g){b.getlanguage(c,function(k){null==k?b.changeCountry("zh-cn"):b.changeLang(g)})};this.changeLang=function(c){c=void 0===c?"mainBody":c;var g=document.getElementById("app-nav");null!=g&&(g=g.getElementsByTagName("*"),a(g));g=document.getElementById("appNavgation");null!=g&&(g=g.getElementsByTagName("*"),a(g));c=document.getElementById(c).getElementsByTagName("*");
a(c);null!=b.langMap.cellsMonthString&&(xGlobal.monthString_local=eval("("+b.langMap.cellsMonthString+")"));null!=b.langMap.cellsWeekString&&(xGlobal.weekString_local=eval("("+b.langMap.cellsWeekString+")"))}};var aboutMe=null,mainTab=null,colResizeLayerElement=null,rowResizeLayerElement=null,ResizeLayerSliderElement=null,leftButtonDownPos={x:0,y:0},keygeniusDiv=null,keygenius=null,xPopupMenu=null,colorPicker=null,linePicker=null,toolbarDropDownMenu,derivedCounter=1,resizeScr=!1,globalPage=new xGlobalPage,mainBody;function startInitApp(){mainDbServerStart()}function addColorSchemeOption(a,b){xMe.addColorSchemeOption(a,b)}function setFramePages(a,b){a.setPages(b)}
function insertStatusDiv(a,b,c){a.insertStatusDiv(b,c)}
function setNavPage(a,b,c){if(null==b){b=a.document.createElement("div");var g=a.document.createAttribute("style");g.value="display:block;position:fixed;width:100%;";var k=72;c.height&&(k=c.height);if(c.pos&&"bottom"==c.pos){g.value+="bottom:0px;";var q=0;var f=k}else g.value+="top:0px;",q=k,f=0;g.value+="height:"+k+"px;";b.setAttributeNode(g);xGlobal.frame.getMainBody().appendChild(b);globalSet.frame.setMainPagePos(q,f)}a=new xPage(a,this,null,b,c,null,null,null,null);null==xGlobal.sidebar&&(xGlobal.sidebar=
{});xGlobal.sidebar.header=a;a.layout();a.redraw();globalSet.frame.setNavPage(xGlobal.sidebar);xGlobal.systemSchemeSelected&&xGlobal.systemSchemeSelected.option&&a.setScheme(xGlobal.systemSchemeSelected.option);xGlobal.minPageList.frame.push(b);a.pageType="AppHeader";a&&(null==xGlobal.refreshPageList&&(xGlobal.refreshPageList=[]),xGlobal.refreshPageList.push(a));return a}function setKeyGenius(a){xGlobal.keyGenius=a}
function setSidebar(a,b,c){var g="display:block;position:absolute;";switch(b.pos){case "top":if(xGlobal.top)return;xGlobal.top=b.height;g+="top:0px;";g=xGlobal.left?g+("left:"+xGlobal.left+"px;"):g+"left:0px;";g+="height:"+b.height+"px;";g=xGlobal.right?g+("right:"+xGlobal.right+"px;"):g+"right:0px;";break;case "left":if(xGlobal.left)return;xGlobal.left=b.width;g+="left:0px;";g=xGlobal.top?g+("top:"+xGlobal.top+"px;"):g+"top:0px;";g+="width:"+b.width+"px;";g=xGlobal.bottom?g+("bottom:"+xGlobal.bottom+
"px;"):g+"bottom:0px;";break;case "right":if(xGlobal.right)return;xGlobal.right=b.width;g+="right:0px;";g=xGlobal.top?g+("top:"+xGlobal.top+"px;"):g+"top:0px;";g+="width:"+b.width+"px;";g=xGlobal.bottom?g+("bottom:"+xGlobal.bottom+"px;"):g+"bottom:0px;"}c=a.document.createElement("div");var k=a.document.createAttribute("style");k.value=g;c.setAttributeNode(k);xGlobal.frame.getMainBody().appendChild(c);globalSet.frame.setMainPagePos(xGlobal.top,xGlobal.bottom,xGlobal.left,xGlobal.right);a=new xPage(a,
this,null,c,b,null,null,null,null);null==xGlobal.sidebar&&(xGlobal.sidebar={});xGlobal.sidebar[b.pos]=a;a.layout();a.redraw();globalSet.frame.setNavPage(xGlobal.sidebar);xGlobal.systemSchemeSelected&&xGlobal.systemSchemeSelected.option&&a.setScheme(xGlobal.systemSchemeSelected.option);xGlobal.minPageList.frame.push(c);a.pageType="AppHeader";a&&(null==xGlobal.refreshPageList&&(xGlobal.refreshPageList=[]),xGlobal.refreshPageList.push(a));return a}
var xGlobal={refreshOff:!1,autoPopupMenu:!1,utcTime:!1,systemMaketIdCount:1,monthString:"January February March April May June July August September October November December".split(" "),monthString_short:"Jan. Feb. Mar. Apr. May. Jun. Jul. Aug. Sep. Oct. Nov. Dec.".split(" "),weekString:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekString_short:["Sun.","Mon.",,"Tue.","Wed.","Thur.","Fri.","Sat."],monthString_local:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
weekString_local:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),systemFont:"Microsoft YaHei, Helvetica Neue",systemFontOffsetY:1,pageMinWidth:null,systemFontName:["Helvetica Neue"],systemFontSize:[12],systemFontAdjustY:[1],popupShadow:"box-shadow:0px 0px 6px #888;",mainTab:null,actionToolbar:null,activePage:null,activeObject:null,ObjectMouseMove:null,ObjectMouseOver:null,ObjectMouseUp:null,ObjectMouseOut:null,
keyDown:null,refreshCounter:0,colors:["#444","#800","#080","#666"],refreshMode:"systemMode",systemRefreshMode:"dataBackground",refreshColor:["#444","#444","#444"],refreshDataColor:["#444","#800","#080","#666"],callback_setFramePages:function(a,b,c){a.setPages(b,c)},callback_setFloatPages:function(a,b,c){a.setFloatPages(b,c)},callback_setFrameNavPage:setNavPage,callback_addFrameSidebar:setSidebar,callback_setKeyGenuis:setKeyGenius,popupNetInformation:popupNetInformation,callback_addColorSchemeOption:addColorSchemeOption,
callback_chartDrawLine:null,callback_startClock:startStatusBarClock,callback_insertStatusDiv:insertStatusDiv,callback_login:null,callback_register:null,userInfo:{access_token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyaWQiOiIxNzg5NTA2MzM5MjQ3MjIyNzg0IiwianRpIjoiYWE1Njc2NDAtNDBiYi00MmZiLWIyN2EtM2E5N2FhMmRkZDVjIn0.9izgYXIyCrRebAnuw2CWXJN-lhMmCh-Us-E72WxcgHE",token_type:"bearer",refresh_token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyaWQiOiIxNzg5NTA2MzM5MjQ3MjIyNzg0IiwianRpIjoiNjZmOTY2NDktNjA2NS00ZGE0LThlYjktZTdhZTAzYTMyZDViIn0.nIe9E6BgtIqz1ElV-g8X7ugFO-D8Bqhg94icjCtUdso",
expires_in:7181,scope:"openid",clientid:"GT_BMS",userid:"1789506339247222784",jti:"aa567640-40bb-42fb-b27a-3a97aa2ddd5c"},country:"en",setCountry:function(a,b){this.country=a;xLanguage.changeCountry(a,b)},currentSubMenu:null,xPageManager:null,systemSchemeChangeCount:0,systemSchemeSelected:null,registerOption:{},minPageList:{frame:[],customDom:[]},passiveSupported:!1};
try{var options=Object.defineProperty({},"passive",{get:function(){xGlobal.passiveSupported=!0;window.removeEventListener("test")}});window.addEventListener("test",null,options)}catch(a){console.log(a)}
var registerOption=function(a,b){null==xGlobal.registerOption[a.name]&&(xGlobal.registerOption[a.name]={},xGlobal.registerOption[a.name].option=xDeepCopy(b))},xGlobalUserData={indexCount:5,query:{},variables:null},onGlobalQueryUserData=function(a){for(var b=0;b<a.length&&a[b].table;b++){var c=a[b].table.info.name;xGlobalUserData.query[c]&&(xGlobalUserData.query[c].table=xDeepCopy(a[b]),xGlobalUserData.query[c].callback&&xGlobalUserData.query[c].callback(xGlobalUserData.query[c].table))}},replaceUserVariablesValue=
function(a){xGlobalUserData.variables&&xGlobalUserData.variables.userId&&(a=a.replace(/{{ userid }}/g,xGlobalUserData.variables.userId),a=a.replace(/{{ userId }}/g,xGlobalUserData.variables.userId));var b=a.indexOf("{{ UserData.");if(0<=b)for(var c=12;c<a.length;c++)if("."==a[c]){var g=a.slice(12,c);if(xGlobalUserData.query[g]&&(g=xGlobalUserData.query[g].table))for(var k=c+1;k<a.length;k++)if("["==a[k])for(var q=a.slice(c+1,k),f=0;f<g.field.length;f++)if(g.field[f][0].toLowerCase()==q.toLowerCase()){q=
null;if("col"==a.slice(b+1,b+4).toLowerCase())if("c"==g.field[f][0][1]||"t"==g.field[f][0][1])if("row"==g.info.rand)for(k=0;k<g.data.length;k++)q="'"+g.data[k][f]+"'",k<g.data.length-1&&(q+=",");else for(k=0;k<g.data[f].length;k++)q="'"+g.data[f][k]+"'",k<g.data[f].length-1&&(q+=",");else if("row"==g.info.rand)for(k=0;k<g.data.length;k++)q=""+g.data[k][f],k<g.data.length-1&&(q+=",");else for(k=0;k<g.data[f].length;k++)q=""+g.data[f][k],k<g.data[f].length-1&&(q+=",");else k=parseInt(a.slice(b+1)),
q="c"==g.field[f][0][1]||"t"==g.field[f][0][1]?"row"==g.info.rand?"'"+g.data[k][f]+"'":"'"+g.data[f][k]+"'":"row"==g.info.rand?g.data[k][f]:g.data[f][k];k=a.indexOf(" }}");0<k&&(f=a.slice(b,k-b+3),a=a.replace(f,q),a=a.replace(f,q));break}}b=a.indexOf("{{ UserVariables.");if(0<=b)for(c=17;c<a.length;c++)if("."==a[c]){g=a.slice(b+17);c=g.indexOf(" }}");g=g.substring(0,c);xGlobalUserData.variables&&null!=xGlobalUserData.variables[g]&&(k=a.indexOf(" }}"),0<k&&(f=a.substring(b,k+3),a=a.replace(f,xGlobalUserData.variables[g]),
a=a.replace(f,xGlobalUserData.variables[g])));break}return a},idx=1E3,globalQueryUserData=function(a,b){if(null==a.name||""==a.name)return null;null==xGlobalUserData.query[a.name]&&(xGlobalUserData.query[a.name]={},xGlobalUserData.query[a.name].index=xGlobalUserData.indexCount++);globalPage||(globalPage=new xGlobalPage);if(a.sql){if(script=replaceUserVariablesValue(a.sql),null==a.query||a.query.script!=script)return a.query={script:script,limit:null},xGlobalUserData.query[a.name].query=a,xGlobalUserData.query[a.name].callback=
b,globalPage.sendQuery(xGlobalUserData.query[a.name].index,[a],onGlobalQueryUserData),!0}else if(a.http){var c=replaceUserVariablesValue(a.field),g=replaceUserVariablesValue(a.condition);script=c+";"+g;if(null==a.query||script!=a.query.script)return a.query={script:script,limit:null,field:c,condition:g,id:0},xGlobalUserData.query[a.name].query=a,xGlobalUserData.query[a.name].callback=b,a=[a],globalPage.sendHttpQuery(idx+=1,a,0,onGlobalQueryUserData),!0}return!1},globalGetUserData=function(){},globalClearUserData=
function(){xGlobalUserData.query={};xGlobalUserData.indexCount=5;xGlobalUserData.variables=null},globalSetUserVariables=function(a){null==xGlobalUserData.variables&&(xGlobalUserData.variables={});for(var b in a)xGlobalUserData.variables||(xGlobalUserData.variables={}),xGlobalUserData.variables[b]=a[b]},globalGetUserVariables=function(){return xGlobalUserData.variables},xGlobalFunctions={queryUserData:globalQueryUserData,getUserData:globalGetUserData,clearUserData:globalClearUserData,setUserVariables:globalSetUserVariables,
getUserVariables:globalGetUserVariables},globalSetFunction;(function(){function a(){"undefined"!=typeof getGlobalSetFunction?(globalSetFunction=getGlobalSetFunction(),globalSetFunction(xGlobal,xGlobalFunctions)):setTimeout(a,50)}a()})();var xZIndex={divider:100,popover:2E3,dialog:300,dialogDivider:301,menu:2100,picker:2200},clockList;
function displayClock(){if(1!=xGlobal.refresh_pause&&(xGlobal.refreshCounter++,!xGlobal.refreshOff||1!=xGlobal.refreshOff)){if(xGlobal.refreshPageList)for(var a=0;a<xGlobal.refreshPageList.length;a++)xGlobal.refreshPageList[a].refresh();if(xGlobal.refreshDialogList)for(a=0;a<xGlobal.refreshDialogList.length;a++)xGlobal.refreshDialogList[a].refresh();if(xGlobal.refreshFrameList)for(a=0;a<xGlobal.refreshFrameList.length;a++)xGlobal.refreshFrameList[a].refresh();xGlobal.focusObject&&xGlobal.focusObject.refresh&&
xGlobal.focusObject.refresh()}a=function(k){10>k&&(k="0"+k);return k};if(0==(xGlobal.refreshCounter-1)%2&&clockList){var b=new Date,c=b.getHours(),g=b.getMinutes();b=b.getSeconds();g=a(g);b=a(b);c=c+":"+g+":"+b;for(a=0;a<clockList.length;a++)clockList[a].innerHTML=c}}function isChina(a){return/.*[\u4e00-\u9fa5]+.*$/.test(a)?!0:!1}
function startStatusBarClock(){var a="Win32"==navigator.platform||"Windows"==navigator.platform;String(navigator.platform).indexOf("Linux");a&&("undefined"!=typeof callback_onWin&&callback_onWin&&callback_onWin(),xGlobal.systemFont="\u5fae\u8f6f\u96c5\u9ed1",xGlobal.systemFontOffsetY=3);window.setInterval("displayClock()",500)}
var initMobile=function(){var a=document.getElementById("mainBody");document.onselectstart=function(c){return!1};a.addEventListener("DOMMouseScroll",function(c){c=c||window.event;c.wheelDelta&&event.ctrlKey?c.returnValue=!1:c.detail&&(c.returnValue=!1)},!1);var b=null;a.addEventListener("touchstart",function(c){},!1);a.addEventListener("touchmove",function(c){0==c.defaultPrevented&&b&&(xAlert("x="+b.x+",\ny="+b.y,"slideslip"),b=!1)},!1);a.addEventListener("touchend",function(c){},!1);a.addEventListener("gesturechange",
function(c){},!1);history.pushState(null,null,document.URL);window.addEventListener("popstate",function(c){history.pushState(null,null,document.URL);c.preventDefault()})};function clearCookie(){var a=document.cookie.match(/[^\u00a0=;]+(?==)/g);if(a)for(var b=a.length;b--;)document.cookie=a[b]+"=0;expires="+(new Date(0)).toUTCString()}
function getPixelRatio(a){return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)}function createChineseIntercept(){var a=document.createElement("input");a.type="text";a.style.position="absolute";a.style.opacity=0;a.style.pointerEvents="none";a.style.zIndex=0;document.body.appendChild(a);xGlobal.chineseIntercept=a;xGlobal.chineseIntercept.style.display="none"}
function onWindowMouseDown(a){if(a.target!=xGlobal.chineseIntercept){if(xPopupMenu)xPopupMenu.onMouseDown(a);doPopover(a);if(keygeniusDiv&&"block"==keygeniusDiv.style.display&&"keygenius"!=a.srcElement.parentNode.parentNode.id&&"keygenius"!=a.srcElement.parentNode.parentNode.parentNode.id){keygeniusDiv.style.display="none";var b=document.getElementById("keygeniusinput");b.value="";b.blur()}xGlobal.saftPopup&&xGlobal.saftPopup.isMySelf&&0==xGlobal.saftPopup.isMySelf(a)&&(xGlobal.saftPopup.closeBox(),
xGlobal.saftPopup=null,xGlobal.autoPopupMenu=!1);xGlobal.popupBox&&xGlobal.popupBox.isMySelf&&0==xGlobal.popupBox.isMySelf(a)&&(xGlobal.popupBox.close(),xGlobal.popupBox=null);if(xGlobal.popupMenu&&0<xGlobal.popupMenu.length){for(b=0;b<xGlobal.popupMenu.length&&(!xGlobal.popupMenu[b].isMySelf||1!=xGlobal.popupMenu[b].isMySelf(a));b++);b!=xGlobal.popupMenu.length||null!=xGlobal.popupMenu[0].isPupupChild&&0!=xGlobal.popupMenu[0].isPupupChild(a.target)||xGlobal.saftPopup&&xGlobal.saftPopup.isMySelf&&
xGlobal.saftPopup.isMySelf(a)||(xGlobal.popupMenu[0].closeBox(),xGlobal.autoPopupMenu=!1)}a.target.className&&(a=a.target.className,"divider-row"==a||"divider-col"==a)&&(xGlobal.focusObject=null);xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name||hiddenIntercept()}}
function onWindowMouseUp(a){xGlobal.ObjectMouseMove=null;xGlobal.ObjectMouseOut&&(xGlobal.ObjectMouseOut(a),xGlobal.ObjectMouseOut=null);xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name&&xGlobal.focusObject.isChineseIntercept()&&autoLayerInChinese()}
function autoLayerInChinese(){var a=xGlobal.focusObject.getParent().getParentDiv().parentElement;if(null!=xGlobal.chineseIntercept){a.appendChild(xGlobal.chineseIntercept);var b=xGlobal.focusObject.getPosition();a=b.top;var c=b.left;b=b.height;var g=xGlobal.focusObject.getOption(),k=xGlobal.focusObject.getTextInputRect();xGlobal.chineseIntercept.focusPointer=xGlobal.focusObject.getParent();xGlobal.chineseIntercept.style.display="block";xGlobal.chineseIntercept.style.top=a+g.paddingTop+g.marginTop+
"px";xGlobal.chineseIntercept.style.left=c+g.paddingLeft+g.marginLeft+"px";xGlobal.chineseIntercept.style.width=k.width+"px";xGlobal.chineseIntercept.style.height=b-g.paddingBottom-g.paddingTop-g.marginTop-g.marginBottom+"px";xGlobal.chineseIntercept.style.zIndex=9999;xGlobal.chineseIntercept.style.opacity=1;xGlobal.chineseIntercept.style.backgroundColor=g.focus.backgroundColor;xGlobal.chineseIntercept.style.pointerEvents="all";xGlobal.chineseIntercept.style.border="none";xGlobal.chineseIntercept.style.borderRadius=
g.borderRadius+"px";xGlobal.chineseIntercept.style.outline="none";xGlobal.chineseIntercept.style.color=k.color;xGlobal.chineseIntercept.style.fontSize=g.fontSize+"px";xGlobal.chineseIntercept.style.boxSizing="border-box";xGlobal.chineseIntercept.style.textIndent="1px";xGlobal.chineseIntercept.style.position="absolute";a=xGlobal.focusObject.getString();xGlobal.chineseIntercept.value=a;xGlobal.chineseIntercept.focus()}}function onWindowMouseOver(a){}
function onWindowContextMenu(a){"TEXTAREA"!=a.srcElement.tagName&&"INPUT"!=a.srcElement.tagName&&a.preventDefault()}
var now_page=1,doEnter_KeyGenius=function(a){a=void 0===a?13:a;var b=xGlobal.keyGenius;if(xGlobal.sidebar)for(var c in xGlobal.sidebar){var g=xGlobal.sidebar[c].getWidgetByElementId("navHeaderGrid");if(g){var k=g.getCellObjectById("keyGenius");if(k)xGlobal.keyGenius=k.focusObject;else for(c=xGlobal.footStatus.getCanvasList(),g=0;g<c.length;g++)(k=c[g])&&k.canvas&&k.canvas.getCellObjectById&&(k=k.canvas.getCellObjectById("keyGenius"))&&(xGlobal.keyGenius=k.focusObject);break}}xGlobal.chineseIntercept.style.display=
"none";g=xGlobal.keyGenius.getBoundValues();var q;null!=b&&(q=b.getBoundValues());c=[{d:g,k:xGlobal.keyGenius},{d:q,k:b}];g.length>q.length?c=[{d:g,k:xGlobal.keyGenius}]:g.length<q.length&&(c=[{d:q,k:b}]);for(b=0;b<c.length;b++)a:{g=c[b],q=g.d;k=g.k;g=a;if(13==g){if(null==q)break a;for(var f=0;f<q.length;f++)if("stockCode"==q[f].id&&1==q[f].value.split(".").length){xGlobal.focusObject=null;k.setString("");k.closeBox();(k=globalPage.getActivePage())&&k.setFocus();break a}}xGlobal.focusObject=null;
k.setString("");k.closeBox();k=globalPage.getActivePage();13==g&&null==k.setKeyGenius(q)&&(g=globalPage.getActiveFrame())&&(k=g.getAcceptKeyGeniusPage(),k.synchBoundValue("keyGenius",0,q));k&&k.setFocus()}};
function onWindowKeyDown(a){if(1!=xGlobal.keyDown)if(67!=a.keyCode||1!=a.metaKey&&1!=a.ctrlKey)if(1==xPopupMenu.onKeyDown(a))a.preventDefault();else if(xGlobal.frame&&xGlobal.frame.onFloatPageFrameKeydown(a))a.preventDefault();else if(!xGlobal.keyGenius||xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name&&xGlobal.keyGenius.getParent()!=xGlobal.focusObject.getParent()||!checkKeyGeniusKeyDown(a))if(0<xDialogList.length){if(!(colorPicker&&1==colorPicker.onKeyDown(a)||linePicker&&
1==linePicker.onKeyDown(a))&&(checkXDialog(),0<xDialogList.length))xDialogList[xDialogList.length-1].onKeyDown(a)}else{var b=globalPage.getActiveFrame();b&&b.activePageWithShortCut(a.key)?a.preventDefault():xGlobal.focusWidget&&xGlobal.focusWidget.onKeyDown&&xGlobal.focusWidget.onKeyDown(a)?a.preventDefault():"F1"==a.key?a.preventDefault():b&&"Escape"==a.key&&b.doEscape()}else xGlobal.keyGenius.onKeyDown(a),a=xGlobal.keyGenius.getParent(),xGlobal.focusObject=a.getCellById("keyGenius").object.focusObject,
xGlobal.focusWidget=a,autoLayerInChinese();else xGlobal.selectedCell&&aboutMe&&aboutMe.copyTextToClipboard(xGlobal.selectedCell.value.value)}function checkKeyGeniusKeyDown(a){if(1==a.key.length)return"0"<=a.key&&"9">=a.key||"a"<=a.key&&"z">=a.key||"A"<=a.key&&"Z">=a.key;if("Process"==a.key){if("229"==a.keyCode){var b=a.code.replace("Digit","");b=b.replace("Numpad","");1==/^[0-9]$/.test(b)&&(a.customKey=b);"NumpadDecimal"==a.code&&(a.customKey=".")}return"0"<=a.customKey&&"9">=a.customKey}}
function onWindowKeyUp(a){if(1==xPopupMenu.onKeyUp(a))a.preventDefault();else if(0<xDialogList.length){if(checkXDialog(),0<xDialogList.length)xDialogList[xDialogList.length-1].onKeyUp(a)}else if(xGlobal.focusWidget&&xGlobal.focusWidget.onKeyUp)xGlobal.focusWidget.onKeyUp(a)&&a.preventDefault();else{var b=globalPage.getActivePage();b&&1==b.onKeyUp(a)&&a.preventDefault()}}
function onDocumentSelect(a){return xGlobal.focusWidget&&xGlobal.focusObject&&xGlobal.focusObject.doSelect?xGlobal.focusObject.doSelect(a):!1}function onDocumentInput(a){return xGlobal.focusWidget&&xGlobal.focusObject&&xGlobal.focusObject.onInput?xGlobal.focusObject.onInput(a):!1}function onDocumentCompositionend(a){xGlobal.focusObject&&xGlobal.focusObject.doCompositionend&&xGlobal.focusObject.doCompositionend(a)}
var sendClipboardText=function(a,b){a=document.getElementById("clipboardText");if(null==a){a=document.createElement("textArea");a.id="clipboardText";var c=document.createAttribute("style");c.value="position:absolute;width:0px;height:0px";a.setAttributeNode(c);mainBody=document.getElementById("mainBody");mainBody.appendChild(a)}c=document.activeElement;a.value=b;a.focus();a.setSelectionRange(0,a.value.length);document.execCommand("copy",!1,null);c.focus()};
function onDocumentCut(a){if(xGlobal.focusWidget&&xGlobal.focusObject&&xGlobal.focusObject.doCut){var b=xGlobal.focusObject.doCut(a);b&&sendClipboardText(a,b);return!0}return!1}function onDocumentCopy(a){if(xGlobal.focusWidget)if(xGlobal.focusObject){if(xGlobal.focusObject.doCopy){var b=xGlobal.focusObject.doCopy(a);b&&sendClipboardText(a,b);return!0}}else if(xGlobal.focusWidget.doCopy)return(b=xGlobal.focusWidget.doCopy(a))&&sendClipboardText(a,b),!0;return!1}
var getClipboardData=function(a){if(a=a.clipboardData||window.clipboardData)try{return a.getData("Text")}catch(b){return a.getData("text/plain")}};function onDocumentPaste(a){if(xGlobal.focusWidget){if(xGlobal.focusObject&&xGlobal.focusObject.doPaste)return xGlobal.focusObject.doPaste(a);if(xGlobal.focusWidget.doPaste)return xGlobal.focusWidget.doPaste(a)}return!1}
function getScreenXY(a){var b={x:a.offsetLeft,y:a.offsetTop-a.scrollTop};for(a=a.offsetParent;a;a=a.offsetParent)b.x+=a.offsetLeft-a.scrollLeft,b.y+=a.offsetTop-a.scrollTop;return b}function getMouseX(a,b){b=void 0===b?null:b;var c=a.clientX-4;if(void 0!=a.srcElement){null==b&&(b=document.getElementById("mainBody"));for(a=a.srcElement.parentElement;void 0!=a;a=a.parentElement)if(a==b){for(;void 0!=a;a=a.parentElement)void 0!=a.offsetLeft&&(c-=a.offsetLeft);break}return c}return-1}
function getMouseY(a,b){b=void 0===b?null:b;var c=a.clientY-2;if(void 0!=a.srcElement)for(null==b&&(b=document.getElementById("mainBody")),a=a.srcElement;void 0!=a;a=a.parentElement)if(a==b){for(;void 0!=a;a=a.parentElement)void 0!=a.offsetTop&&(c-=a.offsetTop);break}return c}
function getClientPos(a){if(void 0!=a){var b=a.offsetLeft,c=a.offsetTop,g=document.getElementById("mainBody");for(a=a.parentElement;void 0!=a&&a!=g;a=a.parentElement)void 0!=a.offsetLeft&&"TR"!=a.tagName&&(b+=a.offsetLeft,c+=a.offsetTop);return{x:b,y:c}}}
function onWindowMouseMove(a){if(1==a.buttons){var b=!1;if(xGlobal.ObjectMouseMove)xGlobal.ObjectMouseMove(a);else{if(colResizeLayerElement){var c=parseFloat(colResizeLayerElement.style.width),g=colResizeLayerElement.parentElement,k=g.offsetWidth;getMouseX(a,g);g=getScreenXY(g);g=a.x-g.x-c/2;if(colResizeLayerElement.adjustParent){g-=c;b=!0;var q={id:rowResizeLayerElement.id,top:""+g+"px",moveY:g-rowResizeLayerElement.offsetLeft,parentHeight:k+(g-rowResizeLayerElement.offsetLeft),element:colResizeLayerElement}}else if(a=
100*(g-0)/k,0<g&&0<a&&100>a){var f=colResizeLayerElement.previousElementSibling;a=colResizeLayerElement.nextElementSibling;f&&a&&(f=parseFloat(f.offsetLeft),a=parseFloat(a.offsetLeft)+parseFloat(a.offsetWidth),g<f&&(g=f),g>a-c&&(g=a-c),g>=f&&g<=a-c&&(b=!0,q={id:colResizeLayerElement.id,left:""+(g+c/2)+"px",parentWidth:k,element:colResizeLayerElement}))}}else rowResizeLayerElement&&(c=parseFloat(rowResizeLayerElement.style.height),g=rowResizeLayerElement.parentElement,k=g.offsetHeight,g=getScreenXY(g),
g=a.y-g.y+c/2,rowResizeLayerElement.adjustParent?(g-=c,b=!0,q={id:rowResizeLayerElement.id,top:""+g+"px",moveY:g-rowResizeLayerElement.offsetTop,parentHeight:k+(g-rowResizeLayerElement.offsetTop),element:rowResizeLayerElement}):(a=100*(g-0)/k,0<g&&0<a&&100>a&&(f=rowResizeLayerElement.previousElementSibling,a=rowResizeLayerElement.nextElementSibling,f&&a&&(f=parseFloat(f.offsetTop),a=parseFloat(a.offsetTop)+parseFloat(a.offsetHeight),g<f&&(g=f),g>a-c&&(g=a-c),g>=f&&g<=a-c&&(b=!0,q={id:rowResizeLayerElement.id,
top:""+(g-c/2)+"px",parentHeight:k,element:rowResizeLayerElement})))));1==b&&(hiddenIntercept(),b=globalPage.getActiveFrame())&&(b.setSplitLinePos(q),b.layout(),b.redraw())}}}function preResize(a){resizeScr=!0;rowResizeLayerElement=a.srcElement.parentNode}function pauseResize(a){if(1<a.movementY||0>a.movementY)resizeScr=!1}
function resizeBtn(a){rowResizeLayerElement=null;if(resizeScr){rowResizeLayerElement=a.srcElement.parentNode;a=rowResizeLayerElement.parentElement;var b=a.offsetHeight,c=30<b-rowResizeLayerElement.offsetTop?b-30:b-300;a=100*(c-a.offsetTop)/b;if(0<c&&0<a&&100>a&&(c=rowResizeLayerElement.previousElementSibling,b=rowResizeLayerElement.nextElementSibling,c&&b)){var g=0;""!=c.style.top&&(g=parseFloat(c.style.top));var k=b.style.height?parseFloat(b.style.top)+parseFloat(b.style.height):parseFloat(b.style.top)+
parseFloat(b.clientHeight);a>g&&a<k&&(c.style.height=a-g+"%",b.style.top=a+"%",b.style.height&&(b.style.height=k-a+"%"),rowResizeLayerElement.style.top=a+"%")}globalPage.getActiveFrame()&&globalPage.getActiveFrame().redraw()}}function hiddenIntercept(){xGlobal.chineseIntercept&&(xGlobal.chineseIntercept.focusPointer&&xGlobal.chineseIntercept.focusPointer.draw&&xGlobal.chineseIntercept.focusPointer.draw(!0),xGlobal.chineseIntercept.style.display="none")}
window.onresize=function(){if(globalPage&&globalPage.getActiveFrame()){document.getElementById("mainBody");var a=globalPage.getActiveFrame();hiddenIntercept();a&&(a.layout(),a.redraw());xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name&&xGlobal.focusObject.isChineseIntercept()&&autoLayerInChinese()}if("undefined"!=typeof GUI)GUI.onresize()};
function session(){return"<form onsubmit='return false;'><input type='text' name='message' value='Hello world!' style='position:absolute;left:8px;top:0px;right:96px;'/><input type='button' value='Send Message' onclick='send(this.form.message.value)' style='position:absolute;right:2px;width:92px;top:2px'/><div id='responseText' style='overflow:auto;padding:6px;position:absolute;left:6px;right:2px;top:37px;bottom:2px;border:1px solid #ddd;background-color:#def;font-family:Helvetica Neue;font-size:12px'></div></form>"}
var pageCounter=1;function doActivePageTab(a){var b=globalPage.getActivePage();b&&(b.setActiveTab(a.dataset.tabid),b.layout(),b.redraw(!0))}function doActiveFrameTab(a){var b=globalPage.getActiveFrame();b&&b.setActivePage(a.dataset.tabid)}function doActiveFrameTabId(a){var b=globalPage.getActiveFrame();b&&b.setActivePage(a)}function getObjectById(a){var b=globalPage.getActivePage();if(b)return b.getObjectByElementId(a)}
function xGlobalPage(){var a=this,b,c,g=0,k=null,q=[],f=1E3,p=0,v,A;this.addNetInformationDiv=function(r){null==v&&(v=[]);v[v.length]=r};this.setNetInformation=function(r){if(v)for(var u=0;u<v.length;u++)v[u].innerHTML=r};this.setActivePage=function(r){A=r;A.setFocus()};this.getActivePage=function(){return A};this.setPageActiveObject=function(r){var u=xGlobal.activeObject;k=r;xGlobal.activeObject=r;u&&u.draw&&u.draw(!0);r&&r.draw&&r.draw(!0)};this.getPageActiveObject=function(){return k};this.getGlobalActiveObject=
function(){return xGlobal.activeObject};this.sendPauseQuery=function(r){sendMessage("pause","global","global",r)};this.sendRestartQuery=function(r){sendMessage("restart","global","global",r)};this.sendCancelQuery=function(r){sendMessage("cancle","global","global",r)};this.sendHttpQuery=function(r,u,z,H){return postHttpMessage("query","global","global",r,u,z,H)};this.sendSubmit=function(r,u,z){sendMessage("submit","global","global",r,u,z)};this.sendHttpSubmit=function(r,u,z,H){postHttpMessage("submit",
"global","global",r,u,z,H)};this.sendActionHttpQuery=function(r,u,z){if(1==z)for(z=0;z<r.length;z++)r[z].query={script:r[z].script,field:r[z].field,condition:r[z].script,id:p,server:r[z].http},postHttpMessage("query","global","other",f,r,z,u),f++;else for(z=0;z<r.length;z++){var H=replaceVariablesValue(r[z].field,null,null),C=replaceVariablesValue(r[z].condition,null,null);C=H+";"+C;if(null==r[z].query||C!=r[z].query.script)null!=r[z].query&&C==r[z].query.script||p++,r[z].query={script:C,field:H,
condition:replaceVariablesValue(r[z].condition),id:p};postHttpMessage("query","global","other",f,r,z,u);f++}};this.sendQuery=function(r,u,z){sendMessage("query","global","global",r,u,z)};this.sendUpdate=function(r,u,z,H){};this.sendInsert=function(r,u,z){sendMessage("insert","global","global",r,u,z)};this.sendDelete=function(r,u,z){sendMessage("delete","global","global",r,u,z)};this.sendHttpDrawUpdate=function(r,u,z){postHttpMessage("submit","global","global",r,u,0,z)};this.sendHttpDrawDelete=function(r,
u,z){postHttpMessage("submit","global","global",r,u,0,z)};this.sendHttpDrawDeleteAll=function(r,u,z){postHttpMessage("submit","global","global",r,u,0,z)};this.getQueryIndex=function(){return g++};this.setVariablesValue=function(r,u,z){for(var H=0;H<q.length;H++)if(q[H].container==r){q[H].canvas.setVariablesValue(u,z);break}};this.getCallbacks=function(){return{setPageActiveObject:a.setPageActiveObject,getPageActiveObject:a.getPageActiveObject,getGlobalActiveObject:a.getGlobalActiveObject,sendPauseQuery:a.sendPauseQuery,
sendRestartQuery:a.sendRestartQuery,sendCancelQuery:a.sendCancelQuery,sendQuery:a.sendQuery,sendHttpQuery:a.sendHttpQuery,sendHttpSubmit:a.sendHttpSubmit,sendSubmit:a.sendSubmit,getQueryIndex:a.getQueryIndex,setVariablesValue:a.setVariablesValue,sendActionHttpQuery:a.sendActionHttpQuery}};this.setChild=function(r){q[q.length]=r};this.getActiveFrame=function(){return c};this.addFrame=function(r){null==b&&(b=[]);c=b[b.length]=r};this.setScheme=function(r){r.xGlobal&&r.xGlobal.backgroundColor&&(mainBody=
document.getElementById("mainBody"),mainBody.style.backgroundColor=r.xGlobal.backgroundColor);if(b)for(var u=0;u<b.length;u++)b[u].setScheme(r)};this.setOption=function(r,u,z){if(b)for(var H=0;H<b.length;H++)b[H].setOption(r,u,z)};this.redraw=function(r){if(b)for(var u=0;u<b.length;u++)b[u].redraw(r)}}
function getRecentView(){if(window.localStorage.recentView)try{var a=JSON.parse(window.localStorage.recentView);if(a){for(var b=0;b<a.length;b++)if(3>a[b].length)return delete window.localStorage.recentView,null;return a}}catch(c){console.log(c)}}
function onFocusKeygenius(a){a=document.getElementById(a);document.getElementById("selectbox").style.border="1px #028F68 solid";document.getElementById("keygenius").style.display="block";if(""==a.value){keygenius_data[0].table.data=[];keygenius_load=!0;if(a=getRecentView())keygenius_resent=a.length,keygenius_data[0].table.data=a;keygenius_data[0].table.info.totalRows=keygenius_data[0].table.data.length;keygenius_data[0].table.info.rows=keygenius_data[0].table.data.length;keygenius_load=!1}}
function initXPopoverCSS(){}
function xLeftIsSame(a,b){if(null==a&&null==b)return!0;if(null!=a&&null==b||null==a&&null!=b||a.constructor.name!=b.constructor.name)return!1;if("Array"==a.constructor.name){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(0==xLeftIsSame(a[c],b[c]))return!1}else if("Object"==a.constructor.name)for(c in a){if("checked"==c||"checkedOver"==c||"focus"==c||"focusOver"==c||"normal"==c||"over"==c||"push"==c)break;if(null==b[c]&&a[c]!=b[c]||0==xLeftIsSame(a[c],b[c]))return!1}else{if("String"==a.constructor.name&&
("#"==a[0]||0<=a.indexOf("rgb")))return!0;if(a!=b)return!1}return!0}function xDeepCopy(a){if(null!=a){var b=a.constructor===Array?[]:{};if("object"!==typeof a)return a;for(var c in a)b[c]="$pointer"==c?a[c]:null!=a[c]?"object"===typeof a[c]?xDeepCopy(a[c]):a[c]:null;return b}}
function xCopyTo(a,b){if("Array"==a.constructor.name)for(var c=0;c<a.length;c++)null==b[c]&&("Object"==a[c].constructor.name?b[c]={}:"Array"==a[c].constructor.name&&(b[c]=[])),xCopyTo(a[c],b[c]);else for(var g in a)if("$pointer"==name)b[g]=a[g];else if(null!=b[g])if(""==b[g])b[g]=a[g];else if(null==a[g])b[g]&&(b[g]=null);else if("Array"==a[g].constructor.name)for(c=0;c<a[g].length;c++)"Object"==a[g][c].constructor.name?null==b[g][c]?b[g][c]=xDeepCopy(a[g][c]):xCopyTo(a[g][c],b[g][c]):null!=b[g][c]&&
(b[g][c]=a[g][c]);else"Object"==a[g].constructor.name?xCopyTo(a[g],b[g]):b[g]=a[g]}
function xCopyAllTo(a,b){if(null!=a)if("Array"==a.constructor.name)for(var c=0;c<a.length;c++)"Object"==a[c].constructor.name?(null==b[c]&&(b[c]={}),xCopyAllTo(a[c],b[c])):"Array"==a[c].constructor.name?(null==b[c]&&(b[c]=[]),xCopyAllTo(a[c],b[c])):b[c]=a[c];else for(var g in a)if(null==a[g])b[g]=a[g];else if("Array"==a[g].constructor.name)for(null==b[g]&&(b[g]=[]),c=0;c<a[g].length;c++)"Object"==a[g][c].constructor.name?(null==b[g][c]&&(b[g][c]={}),xCopyAllTo(a[g][c],b[g][c])):"Array"==a[g][c].constructor.key?
(null==b[g][c]&&(b[g][c]=[]),xCopyAllTo(a[g][c],b[g][c])):b[g][c]=a[g][c];else"Object"==a[g].constructor.name?(null==b[g]&&(b[g]={}),xCopyAllTo(a[g],b[g])):b[g]=a[g]}
function xDeepSet(a,b){if(null!=b)if("Array"==b.constructor.name)for(var c=0;c<b.length;c++)null==a[c]&&("Object"==b[c].constructor.name?a[c]={}:"Array"==b[c].constructor.name&&(a[c]=[])),xDeepSet(a[c],b[c]);else for(var g in b)if(null==b[g])a[g]&&(a[g]=null);else if("Array"==b[g].constructor.name)for(null==a[g]&&(a[g]=[]),c=0;c<b[g].length;c++)"Object"==b[g][c].constructor.name?(null==a[g][c]&&(a[g][c]={}),xDeepSet(b[g][c],a[g][c])):a[g][c]=b[g][c];else"Object"==b[g].constructor.name?(null==a[g]&&
(a[g]={}),xDeepSet(a[g],b[g])):a[g]=b[g]}var popoverNetInfo;
function popupNetInformation(a){if(null==popoverNetInfo){mainBody=document.getElementById("mainBody");popoverNetInfo=new xPopover(mainBody,window,"top",360,240,!0);popoverNetInfo.setPos(a.clientX,a.clientY);a="<table style='text-align:left;font-size:12px;'>";for(var b=0;b<xSocket.receivedList.length;b++)a+="<tr><td>"+xSocket.receivedList[b]+"</td></tr>";popoverNetInfo.setInnerHTML(a+"</table>");popoverNetInfo.show()}else popoverNetInfo.destroy(),popoverNetInfo=null}
function popupCalendar(a){var b=document.getElementById("mainBody");b=new xPopover(b,window,"top",224,300);b.setObjectClassName("xCalendar");b.setPos(a.clientX,a.clientY);b.show()}
function startApp(a){initMobile();var b=window;document.getElementById("main-container");createChineseIntercept();var c=new xFrame(b,a);xGlobal.frame=c;xGlobal.win=b;xGlobal.mainBody=a;mainApp();xGlobal.isMobile?(window.addEventListener("mousemove",onWindowMouseMove),window.addEventListener("mouseup",onWindowMouseUp),window.addEventListener("mousedown",onWindowMouseDown)):(xPopupMenu=new xMenu(b),xGlobal.xTip=new xTip(b),window.addEventListener("mousemove",onWindowMouseMove),window.addEventListener("mouseup",
onWindowMouseUp),window.addEventListener("mousedown",onWindowMouseDown),window.addEventListener("mouseover",onWindowMouseOver),window.addEventListener("contextmenu",onWindowContextMenu),window.addEventListener("select",onDocumentSelect),window.addEventListener("input",onDocumentInput),window.addEventListener("cut",onDocumentCut),window.addEventListener("copy",onDocumentCopy),window.addEventListener("paste",onDocumentPaste),window.addEventListener("compositionend",onDocumentCompositionend),null!=xGlobal.applicationDidStart&&
xGlobal.applicationDidStart());displayClock();startStatusBarClock();colorPicker=new xColorPicker(b,a);linePicker=new xLinePicker(b,a);(a=b.document.getElementById("login"))&&a.parentNode.removeChild(a);(a=b.document.getElementById("loginBackground"))&&a.parentNode.removeChild(a);b=b.document.getElementById("nav");void 0!=b&&b.parentNode.removeChild(b)}
function getUserIP(){function a(q){g[q]?g[q]=!0:xGlobal.ip=q}var b=new (window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),c=function(){},g={},k=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;b.createDataChannel("");b.createOffer().then(function(q){q.sdp.split("\n").forEach(function(f){0>f.indexOf("candidate")||f.match(k).forEach(a)});b.setLocalDescription(q,c,c)}).catch(function(q){console.log(q)});b.onicecandidate=function(q){q&&
q.candidate&&q.candidate.candidate&&q.candidate.candidate.match(k)&&q.candidate.candidate.match(k).forEach(a)}}
function getUserIPs(){var a={},b=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;b||(b=document.createElement("iframe"),b.sandbox="allow-same-origin",b.style.display="none",document.body.appendChild(b),b=b.contentWindow,window.RTCPeerConnection=b.RTCPeerConnection,window.mozRTCPeerConnection=b.mozRTCPeerConnection,window.webkitRTCPeerConnection=b.webkitRTCPeerConnection,b=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection);var c=
void 0;window.webkitRTCPeerConnection&&(c={iceServers:[{urls:"stun:stun.services.mozilla.com"}]});var g=new b(c,{optional:[{RtpDataChannels:!0}]});g.onicecandidate=function(k){k.candidate&&(k=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(k.candidate.candidate)[1],void 0===a[k]&&(_type="",_type=k.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?"1":"2",null==xGlobal.localIp&&(xGlobal.localIp=[]),xGlobal.localIp.push({ip:k,type:_type}),null==xGlobal.ip&&(xGlobal.ip=k)),a[k]=!0)};g.createDataChannel("");
g.createOffer(function(k){g.setLocalDescription(k,function(){},function(){})},function(){})}getUserIP();
function detectOS(){var a=navigator.userAgent,b="Win32"==navigator.platform||"Windows"==navigator.platform,c="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return c?"Mac":"X11"!=navigator.platform||b||c?-1<String(navigator.platform).indexOf("Linux")?"Linux":b?-1<a.indexOf("Windows NT 5.0")||-1<a.indexOf("Windows 2000")?"Win2000":-1<a.indexOf("Windows NT 5.1")||-1<a.indexOf("Windows XP")?"WinXP":-1<a.indexOf("Windows NT 5.2")||
-1<a.indexOf("Windows 2003")?"Win2003":-1<a.indexOf("Windows NT 6.0")||-1<a.indexOf("Windows Vista")?"WinVista":-1<a.indexOf("Windows NT 6.1")||-1<a.indexOf("Windows 7")?"Win7":-1<a.indexOf("Windows NT 10")||-1<a.indexOf("Windows 7")?"Win10":"Windows":"other":"Unix"}xGlobal.OS=detectOS();
function environmentDesc(){var a={standard:"",frame:"Web"};if("undefined"!=typeof process){var b=process.versions;null!=b&&"object"==typeof b&&null!=b.electron&&(a.frame="Electron")}b="function"===typeof define;"undefined"!==typeof module&&module.exports?a.standard="COMMONJS":b&&(a.standard="AMD/CMD");return a}xGlobal.environment=environmentDesc();
function createEditor(a,b,c){eval('ace.require("ace/ext/language_tools")');a=ace.edit(a);a.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0});b&&a.setTheme("ace/theme/"+b);c&&a.session.setMode("ace/mode/"+c);a.setHighlightActiveLine(!0);return a};var appInitCallback;function xMe(a,b){this.initMainBody=function(){appInitCallback?appInitCallback():(globalPage||(globalPage=new xGlobalPage),startApp(c))};this.getAccount=function(){};this.changeLanuage=function(g){if(g!=xGlobal.country){var k=globalPage.getActivePage(),q=k.getPageDivId();k.country=g;xGlobal.setCountry(g,q)}};this.logout=function(){};selectSchemeName="\u767d\u8272\u65b9\u6848";var c=a.document.getElementById("mainBody")}xMe.Basic="R1RTX1RoaXJkX1BhcnR5Omdhbmd0aXNl";
xMe.setAppInitFunction=function(a){appInitCallback=a};
xMe.login=function(a,b,c,g,k,q){g=[];g.push("accessToken = '"+c+"'");g.push("userId = '"+b+"'");g.push("env = 'dev'");k="";for(var f=0;f<g.length;f++)k=0==f?g[f]:k+(" and "+g[f]);k=analysisES(k);var p=[{lang:"zh-cn",gid:{fm:"tenant"},http:[{gid:{name:"tenantCheck"},type:"query",field:"access_token token_type refresh_token expires_in tenantid deviceType clientid tenant_code user_id host_identifier".split(" "),condition:k.esCondition}]}];p=JSON.stringify(p);return new Promise(function(v,A){if(null!==
q){var r="",u;for(u in q)r="signature"===u||"scope"===u?r+(u+"="+encodeURIComponent(q[u])+"&"):r+(u+"="+q[u]+"&");a+="?"+r.slice(0,-1)}fetch(a,{body:p,method:"post",headers:xMe.header}).then(function(z){200==z.status&&z.text().then(function(H){H=JSON.parse(H);var C=getTableForMap(H[0].result[0].table),U={},J;for(J in C)U[J]=C[J].value;void 0!=U.access_token?(xMe.setUserData(U),xMe.userType="user",xMe.userarguments=[a,b,c],xMe.resetRefreshTokenTimer(U),v(U)):A(H)})}).catch(function(z){A(z)})})};
xMe.loginWithAnonymous=function(a){var b=function(c,g){for(var k=0;k<g.field.length;k++)if(c.toLowerCase()==g.field[k][0].toLowerCase())return g.data[0][k]};return new Promise(function(c,g){var k={name:"resetPwdGetcode",http:a+"thirdparty/login/tenantLogin",field:"access_token, token_type, refresh_token, expires_in, tenantid, deviceType, clientid, tenantcode, user_id",condition:'usertype="1" and userid="123"'},q=k.field,f=k.condition;k.query={script:q+";"+f,limit:[0,10],field:q,condition:f,id:"changeEmailgetcode"};
postHttpMessage("query","global","global",0,[k],0,function(p){if(p instanceof Array&&0<p.length){if(p[0].table&&p[0].table.data){var v=p[0].table;p.user_id=b("user_id",v);xMe.userType="visitor";xMe.userarguments=[a,"anony",""];p.expires_in=b("expires_in",v);p.access_token=b("access_token",v);p.token_type=b("token_type",v);p.refresh_token=b("refresh_token",v);xMe.setUserData(p);xMe.resetRefreshTokenTimer(p);c(p)}}else g(p)})})};xMe.selectSchemeName;
xMe.addColorSchemeOption=function(a,b){null==xMe.appSystemColorSchemeOptionList&&(xMe.appSystemColorSchemeOptionList=[]);xMe.appSystemColorSchemeOptionList[xMe.appSystemColorSchemeOptionList.length]={name:a,option:b}};xMe.getSystemScheme=function(){if(xMe.appSystemColorSchemeOptionList)for(var a=0;a<xMe.appSystemColorSchemeOptionList.length;a++)if(xMe.selectSchemeName==xMe.appSystemColorSchemeOptionList[a].name)return xMe.appSystemColorSchemeOptionList[a].option;return null};
xMe.setSystemScheme=function(a,b){null==a&&(a=xMe.selectSchemeName);xMe.selectSchemeName=a;for(var c=0;c<xMe.appSystemColorSchemeOptionList.length;c++)if(a==xMe.appSystemColorSchemeOptionList[c].name){xGlobal.systemSchemeChangeCount++;xGlobal.systemSchemeSelected=xMe.appSystemColorSchemeOptionList[c];a=xMe.appSystemColorSchemeOptionList[c].option;globalPage.setScheme(a);globalSet.flyText&&globalSet.flyText.setScheme(a,xMe.selectSchemeName);if(xGlobal.xMessageTipList&&0<xGlobal.xMessageTipList.length)for(c=
0;c<xGlobal.xMessageTipList.length;c++)xGlobal.xMessageTipList[c].setScheme(a,xMe.selectSchemeName);a.xPage&&(mainBody&&a.xPage.normal&&a.xPage.normal.backgroundColor&&(mainBody.style.backgroundColor=a.xPage.normal.backgroundColor),globalPage.setOption("xPage",a.xPage));if(a.xGlobal)for(var g in a.xGlobal)xGlobal[g]=a.xGlobal[g];b&&b.setScheme(a);break}};xMe.getHttp=function(){return xMe.http};xMe.setHeader=function(a){xMe.header=a};xMe.setBasic=function(a){xMe.basic=a};xMe.getBasic=function(){return xMe.basic};
xMe.tenantLogin=function(a){var b="http://"+a.url+":"+(a.port||"9000")+"/thirdparty/login/tenantLogin";xMe.http="http://"+a.url+":"+(a.port||"9000")+"/";var c=[];for(g in a)switch(g){case "userId":c.push("userId = '"+a[g]+"'");break;case "token":c.push("accessToken = '"+a[g]+"'");break;case "redirectUrl":c.push("redirecturi = '"+a[g]+"'");break;case "deviceId":c.push("deviceid = '"+a[g]+"'");break;case "url":break;default:c.push(g+" = '"+a[g]+"'")}var g="";for(var k=0;k<c.length;k++)g=0==k?c[k]:g+
(" and "+c[k]);0>g.indexOf("env =")&&(g+=" and env = 'pro'");g=analysisES(g);var q=[{lang:"zh-cn",gid:{fm:"tenant"},http:[{gid:{name:"tenantCheck"},type:"query",field:"access_token token_type refresh_token expires_in tenantid deviceType clientid tenantcode user_id".split(" "),condition:g.esCondition}]}];q=JSON.stringify(q);return new Promise(function(f,p){var v=new XMLHttpRequest;v.open("POST",b);v.setRequestHeader("Content-Type","application/json");if(null!=xMe.header)for(var A in xMe.header)v.setRequestHeader(A,
xMe.header[A]);v.resolve=f;v.reject=p;v.send(q);v.onreadystatechange=function(){if(4==v.readyState)if(200==v.status){if(void 0!=v.responseText){var r=v.responseText;if(r&&(r=JSON.parse(r),null!=r[0]))if(1==r[0].status&&r[0].result&&r[0].result[0]&&r[0].result[0].table){r=getTableForMap(r[0].result[0].table);var u={},z;for(z in r)u[z]=r[z].value;xMe.setUserData(u);xMe.userType="tenant";xMe.userarguments=[a];xMe.resetRefreshTokenTimer(u);v.resolve(u)}else v.reject(Error(r[0].msg))}}else v.reject(Error("\u8fde\u63a5\u670d\u52a1\u5931\u8d25[\u8fd4\u56de\u7801:"+
v.status+"],\u8bf7\u4e0e\u5ba2\u670d\u4eba\u5458\u8054\u7cfb."))}})};xMe.visitorLogin=function(a){return new Promise(function(b,c){gtsFingerprint.load().then(function(g){g.get().then(function(k){xMe.tenantLogin({url:a,deviceid:k.visitorId,usertype:1}).then(function(q){xMe.userType="visitor";xMe.userarguments=[a];b(q)}).catch(function(q){c(q)})})})})};
xMe.refreshToken=function(a){return new Promise(function(b,c){var g=new XMLHttpRequest,k=a.refresh_token;null==k&&(k=xMe.data.refresh_token);g.open("POST",httpGatWay+"auth/oauth/token?grant_type=refresh_token&refresh_token="+k);g.setRequestHeader("Content-Type","application/x-www-form-urlencoded");g.setRequestHeader("Authorization","Basic "+xMe.getBasic());g.send();g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status){if(void 0!=g.responseText){var q=g.responseText;q&&"{"==q[0]&&(q=
JSON.parse(q),void 0!=q.access_token?(xMe.setUserData(q),xMe.resetRefreshTokenTimer(q),b(q)):c(Error(q.msg)))}}else g.reject(Error("\u8fde\u63a5\u670d\u52a1\u5931\u8d25[\u8fd4\u56de\u7801:"+g.status+"],\u8bf7\u4e0e\u5ba2\u670d\u4eba\u5458\u8054\u7cfb."))}})};
xMe.getToken=function(){var a=this;return new Promise(function(b,c){var g=(new Date).getTime(),k=parseInt(getCookie("expires_time")),q=getCookie("access_token");g<k?b(q):xMe.refreshToken(xMe.data).then(function(f){b(f.access_token)}).catch(function(f){var p=xMe;f=p.userType;p=p.userarguments;var v;"user"==f?v=xMe.login.apply(a,p):"visitor"==f?v=xMe.visitorLogin.apply(a,p):"tenant"==f&&(v=xMe.tenantLogin.apply(a,p));v.then(function(A){xWebSocket.setToken(A.access_token);b(A.access_token)}).catch(function(A){c(A)})})})};
xMe.setUserData=function(a){xMe.data=a;var b=(new Date).getTime()+1E3*parseInt(a.expires_in);setCookie("userId",a.userid||a.user_id);setCookie("access_token",a.access_token);setCookie("refresh_token",a.refresh_token);setCookie("expires_time",b);globalSet.userId=a.userid||a.user_id;globalSetUserVariables({userId:a.userid||a.user_id})};
xMe.resetRefreshTokenTimer=function(a){var b=a.expires_in-1200;null!=xMe.refreshTokenTimer&&window.clearTimeout(xMe.refreshTokenTimer);xMe.refreshTokenTimer=window.setTimeout(function(c){var g=this;xMe.refreshToken(c).then(function(k){xWebSocket.setToken(k.access_token)}).catch(function(k){var q=xMe;k=q.userType;q=q.userarguments;var f;"user"==k?f=xMe.login.apply(g,q):"visitor"==k?f=xMe.visitorLogin.apply(g,q):"tenant"==k&&(f=xMe.tenantLogin.apply(g,q));f.then(function(p){xWebSocket.setToken(p.access_token)}).catch(function(p){})})},
1E3*b,a)};function xMenu(a){var b=this,c,g,k,q=[],f=[],p=[],v=[],A,r,u;this.popupMenu=function(J,G,B,L){r.style.display="block";A=L;k=J;xGlobal.currentSubMenu=k;z(k,G,B,[])};var z=function(J,G,B,L){if(null!=J&&null!=J.subMenu&&0!=J.subMenu.length){var ba=L.length,N=J.subMenu;q[ba].style.left=G+"px";q[ba].style.top=B+"px";q[ba].style.display="block";v[ba]=[];f[ba]=void 0;var E=L.slice(0),V="<table style=\"width:100%;\" cellspacing='0' cellpadding='0'>",F=0;J=!1;for(var M=0;M<N.length;M++,F++){E[L.length]=M;
E[L.length+1]=F;var X=N[M].captureProperty;null!=X&&null!=xLanguage.langMap[X]&&(N[M].capture=xLanguage.langMap[X]);var aa=' onmouseover="xPopupMenu.onMouseOver(this, '+ba+", ["+E+'])"';if("---"==N[M].capture)v[ba][F++]=void 0,v[ba][F]=void 0,X='<td style="height:2px;border-bottom:2px solid #ddd;margin-bottom:5px;">',V+='<tr class="menuBarDisable"'+aa+">"+X+X+X+"</tr>",X='<td style="height:2px;border:none"',V+='<tr class="menuBarDisable"'+aa+">"+X+X+X+"</tr>";else if(void 0!=N[M].subMenu||void 0!=
N[M].popupMenu)v[ba][F]="["+E+"]",V+='<tr class="menuBar"'+aa,V+=">",V+='<td style="width:20px;min-width:20px"</td>',V+='<td style="margin:2px;padding:2px">',V+=N[M].capture+"</td>",V+='<td style="width:40px;text-align:right;font-family:Arial">\u25ba&nbsp&nbsp</td>',V+="</tr>",J=!0;else{if(void 0!=N[M].action){v[ba][F]=N[M].action;var ia=N[M].action.replace(/'/g,"\\'");ia=ia.replace(/"/g,"__2__");var fa="";N[M].afterAction&&(fa=N[M].afterAction.replace(/'/g,"\\'"),fa=fa.replace(/"/g,"__2__"));ia=
"onclick=\"xPopupMenu.action(this, '"+N[M].capture+"',"+M+",'"+ia+"', '"+fa+"')\"";V+='<tr class="menuBar"'+aa+" "+ia+">";V+='<td style="width:20px;min-width:20px;font-family:Wingdings;text-align:center" ';N[M].boundTabId&&(V+='data-tabid="'+N[M].boundTabId+'" ');V+=">";N[M].check&&"1"==N[M].check?V+="\uf0fc</td>":N[M].radio&&"1"==N[M].radio&&(V+="\uf0a4</td>");V+='<td style="margin:2px;padding:2px;white-space:nowrap"';null!=X&&null!=xLanguage.langMap[X]&&(N[M].capture='<lable data-lang="'+X+'" style="pointer-events:none;">'+
xLanguage.langMap[X]+"</lable>");1==debug?V+=">"+N[M].capture+" :\t"+N[M].action+"</td>":null!=N[M].icon&&null!=N[M].icon.src?(V+='">',V+='<img src="'+N[M].icon.src+'"',V+='style="pointer-events:none;'+N[M].icon.style+'"> </img>',V+=N[M].capture+"</td>"):V+=">"+N[M].capture+"</td>";V+='<td style="width:20px;"></td>'}else v[ba][F]=void 0,V+='<tr class="menuBarDisable" style="color:#888"'+aa+">",V+='<td style="width:20px;min-width:20px"</td>',V+='<td style="margin:2px;padding:2px">'+N[M].capture+"</td>",
V+='<td style="width:40px;"></td>';V+="</tr>"}}q[ba].innerHTML=V+"</table>";L=q[ba].clientWidth;N=q[ba].clientHeight;G+L>window.innerWidth+5&&(0<ba&&(G=parseInt(q[ba-1].style.left),L+=12,0==J&&(L+=20)),G-=L+5,q[ba].style.left=(0>G?0:G)+"px");B+N>window.innerHeight+5&&(0<ba&&(B+=36),B-=N+5,q[ba].style.top=(0>B?0:B)+"px")}};this.onMouseOver=function(J,G,B){void 0!=p[G]&&(p[G].style.backgroundColor="#eaeaea",p[G].style.color="#000");if("menuBarDisable"==J.className)p[G]=void 0,q[B.length-1].style.display=
"none",v[B.length-1]=void 0;else{J.style.backgroundColor="#58f";J.style.color="#fff";p[G]=J;f[G]=B[B.length-1];J=q[G].offsetTop+J.offsetTop;var L=q[G].offsetLeft+q[G].clientWidth,ba=H(k,B.slice(0,B.length-1));if(void 0!=ba)for(void 0!=ba.subMenu?(z(ba,L,J,B.slice(0,B.length-1)),G+=2):G+=1;G<q.length;G++)q[G].style.display="none",v[G]=void 0;else q[G]&&"block"==q[G+1].style.display&&(q[G].style.display="none",v[G]=void 0)}};var H=function(J,G){if(null!=J&&null!=J.subMenu&&void 0!=G){var B=J.subMenu;
if(1<G.length)return H(B[G[0]],G.slice(1,G.length));if(void 0==B[G[0]]&&B.subMenu)return B.subMenu[G[0]];if(void 0!=B[G[0]]&&void 0!=B[G[0]].popupMenu){J=J.data;var L=B[G[0]].popupMenu.indexOf("aboutMe.getPopupMenu");return-1!=L?(G=B[G[0]].popupMenu.slice(L+20),G=trimBracket(G),G=G.split(","),{subMenu:aboutMe.getPopupMenu(trimBracket(G[0]),J)}):{subMenu:eval(B[G[0]].popupMenu)}}return B[G[0]]}};this.onMouseDown=function(J){2==J.button&&(c=J.clientX,g=J.clientY);if("block"==q[0].style.display&&(2!=
J.button||!J.target.excluded))for(J=J.srcElement.parentElement;void 0!=J;J=J.parentElement)if("DIV"==J.tagName){for(var G=0;G<q.length;G++)if(J==q[G])return;b.hidden();break}};this.onMouseUp=function(J){if(c==J.clientX&&g==J.clientY){var G=globalPage.getActivePage();G&&((G=G.getPopupMenu(J))&&G.menu&&G.menu.popup?(null==u&&(u=new xSaftButton),u.popupRMenu(c,g,G.menu,G.object)):G&&G.menu&&(b.popupMenu(G.menu,c,g,G.object),J.preventDefault()))}};this.onKeyDown=function(J){for(var G=0;G<q.length;G++)if("none"==
q[G].style.display){if(0==G)return;G--;break}var B=q[G].getElementsByTagName("tr");switch(J.keyCode){case 27:q[G].style.display="none";v[G]=void 0;break;case 40:for(var L=0;L<v[G].length&&(void 0==f[G]?f[G]=0:(f[G]++,f[G]>=v[G].length&&(f[G]=0)),void 0==v[G][f[G]]);L++);break;case 38:for(L=0;L<v[G].length&&(void 0==f[G]?f[G]=v[G].length-1:(f[G]--,0>f[G]&&(f[G]=v[G].length-1)),void 0==v[G][f[G]]);L++);break;case 37:0<G&&(q[G].style.display="none",v[G]=void 0);break;case 39:case 13:void 0!=v[G][f[G]]&&
("["==v[G][f[G]][0]?eval("xPopupMenu.onMouseOver(tr[selectedItem[i]],"+G+", "+v[G][f[G]]+")"):13==J.keyCode&&b.action(void 0,v[G][f[G]]));break;default:return!0}if(40==J.keyCode||38==J.keyCode)void 0!=p[G]&&(p[G].style.backgroundColor="#eaeaea",p[G].style.color="#000"),p[G]=B[f[G]],p[G].style.backgroundColor="#58f",p[G].style.color="#fff";return!0};this.onKeyUp=function(J){return!1};this.action=function(J,G,B,L,ba){J=k.data;C(J,L);C(J,ba);toolbarDropDownMenu&&(toolbarDropDownMenu.releaseDropDownMenu(G,
k.subMenu[B],L),toolbarDropDownMenu=null);b.hidden()};var C=function(J,G){if(null!=G&&""!=G){for(var B=!0,L=0;L<G.length&&"("!=G[L];L++)if("."==G[L]){var ba=G.substr(0,L),N=globalPage.getActivePage();if(N){var E=N.getObjectByElementId(ba);if(E){(B=N.getTabTdByObject(E))&&doActivePageTab(B);L=G.substr(L+1);L=L.replace(/__1__/g,"'");L=L.replace(/__2__/g,'"');E.doAction&&E.doAction(L);B=!1;break}else if("aboutMe"==ba&&(E=aboutMe),E){U(E,J,G.substr(L+1).replace(/__2__/g,'"'));B=!1;break}}}1==B&&A&&U(A,
J,G.replace(/__2__/g,'"'))}},U=function(J,G,B){eval("arguments[0]."+B)};this.hidden=function(){r.style.display="none";for(var J=0;J<q.length;J++)q[J].style.display="none";toolbarDropDownMenu&&(toolbarDropDownMenu.releaseDropDownMenu(null,null),toolbarDropDownMenu=null)};(function(){var J=a.document.getElementById("mainBody");r=a.document.createElement("div");var G=a.document.createAttribute("style");G.value="position:absolute;top:0px;left:0px;right:0px;bottom:0px;display:none;z-index:"+(xZIndex.menu-
1);r.setAttributeNode(G);r.addEventListener("mousedown",b.hidden);J.appendChild(r);for(var B=0;4>B;B++){q[B]=a.document.createElement("div");q[B].id="popupMenu"+(B+1);q[B].className="popupMenu";G=a.document.createAttribute("style");var L="display:none;font-size:14px;font-family:"+xGlobal.systemFont+";";L+="position:absolute;padding-left:0px;padding-right:0px;padding-top:3px;padding-bottom:3px;margin:0px;";L+="border:1px solid #999;border-radius:5px;box-shadow:0px 0px 15px #888;z-index:"+xZIndex.menu+
";";L+="background-color:#eaeaea;color:#000;opacity:0.98;";G.value=L;q[B].setAttributeNode(G);J.appendChild(q[B])}})()};function xPage(a,b,c,g,k,q,f,p,v,A,r){var u;function z(I){var D,S=Hb(ja,I.srcElement);S&&S.callback_Touch?D=S.callback_Touch(I):sa.callback_Touch&&(D=sa.callback_Touch(I));if((null==D||"goBack"==D)&&O)if("touchstart"==I.type)nb={down:{x:I.changedTouches[0].clientX,y:I.changedTouches[0].clientY}};else if("touchmove"==I.type)null==nb.direct&&(nb.direct=Math.abs(nb.down.y-I.changedTouches[0].clientY)<Math.abs(nb.down.x-I.changedTouches[0].clientX)?"left-right":"top-bottom"),"left-right"==nb.direct&&
(ha.style.left=0<I.changedTouches[0].clientX-nb.down.x?I.changedTouches[0].clientX-nb.down.x+"px":"0px",nb.last&&(nb.moveTo=nb.last.x<I.changedTouches[0].clientX?"right":"left"),nb.last={x:I.changedTouches[0].clientX,y:I.changedTouches[0].clientY},I.preventDefault());else if("touchend"==I.type){if("left-right"==nb.direct){var xa=10,Ba=I.changedTouches[0].clientX-nb.down.x;if("right"==nb.moveTo)O.popSubPage(Ba);else{var Ia=function(){Ba-=xa;6>xa&&xa--;0<Ba?(ha.style.left=Ba+"px",setTimeout(Ia,2)):
ha.style.left="0px"};setTimeout(Ia,1)}I.preventDefault()}nb=null}}function H(I){var D=Hb(ja,I.srcElement);D&&D.components&&M(D,!1,I.srcElement.scrollLeft,I.srcElement.scrollTop);xGlobal.xTip&&xGlobal.xTip.hidden()}function C(I){I.buttons&&("divider-slider"==I.srcElement.className?(Ra=I.srcElement,u=I.screenX,Sb=I.screenY,I=I.srcElement.parentElement):(Ra=null,I=I.srcElement),"divider-col"==I.className?Ab=I:"divider-row"==I.className&&(Gb=I))}function U(I){if(1!=xGlobal.customEvent)if(1!=I.buttons){if(cb){for(var D=
I.offsetX,S=I.offsetY,xa=0,Ba=0,Ia=null,Da=0;Da<I.path.length;Da++){if(I.path[Da]==ha){Ia=I.target;break}D+=I.path[Da].offsetLeft;xa+=I.path[Da].scrollLeft;S+=I.path[Da].offsetTop;Ba+=I.path[Da].scrollTop}cb.onMouseMove(Ia,D,S,xa,Ba)}}else if(S=!1,xGlobal.ObjectMouseMove)xGlobal.ObjectMouseMove(I);else if(Ab?(xa=parseFloat(Ab.style.width),Ia=Ab.parentElement,Ba=Ia.offsetWidth,getMouseX(I,Ia),Ia=getScreenXY(Ia),Ia=I.x-Ia.x-xa/2,Ab.adjustParent?(Ia-=xa,S=!0,D={id:Gb.id,top:""+Ia+"px",moveY:Ia-Gb.offsetLeft,
parentHeight:Ba+(Ia-Gb.offsetLeft),element:Ab}):(I=100*(Ia-0)/Ba,0<Ia&&0<I&&100>I&&(Da=Ab.previousElementSibling,I=Ab.nextElementSibling,Da&&I&&(Da=parseFloat(Da.offsetLeft),I=parseFloat(I.offsetLeft)+parseFloat(I.offsetWidth),Ia<Da&&(Ia=Da),Ia>I-xa&&(Ia=I-xa),Ia>=Da&&Ia<=I-xa&&(S=!0,D={id:Ab.id,left:""+(Ia+xa/2)+"px",parentWidth:Ba,element:Ab}))))):Gb&&(xa=parseFloat(Gb.style.height),Ia=Gb.parentElement,Ba=Ia.offsetHeight,Ia=getScreenXY(Ia),Ia=I.y-Ia.y+xa/2,Gb.adjustParent?(Ia-=xa,S=!0,D={id:Gb.id,
top:""+Ia+"px",moveY:Ia-Gb.offsetTop,parentHeight:Ba+(Ia-Gb.offsetTop),element:Gb}):(I=100*(Ia-0)/Ba,0<Ia&&0<I&&100>I&&(Da=Gb.previousElementSibling,I=Gb.nextElementSibling,Da&&I&&(Da=parseFloat(Da.offsetTop),I=parseFloat(I.offsetTop)+parseFloat(I.offsetHeight),Ia<Da&&(Ia=Da),Ia>I-xa&&(Ia=I-xa),Ia>=Da&&Ia<=I-xa&&(S=!0,D={id:Gb.id,top:""+(Ia-xa/2)+"px",parentHeight:Ba,element:Gb}))))),1==S&&(hiddenIntercept(),S=fa))S.setSplitLinePos(D),S.layout(),S.redraw()}function J(I){if(1!=xGlobal.customEvent&&
I.target!=xGlobal.chineseIntercept){if(xPopupMenu)xPopupMenu.onMouseDown(I);doPopover(I);if(keygeniusDiv&&"block"==keygeniusDiv.style.display&&"keygenius"!=I.srcElement.parentNode.parentNode.id&&"keygenius"!=I.srcElement.parentNode.parentNode.parentNode.id){keygeniusDiv.style.display="none";var D=document.getElementById("keygeniusinput");D.value="";D.blur()}xGlobal.saftPopup&&xGlobal.saftPopup.isMySelf&&0==xGlobal.saftPopup.isMySelf(I)&&(xGlobal.saftPopup.closeBox(),xGlobal.saftPopup=null,xGlobal.autoPopupMenu=
!1);xGlobal.popupBox&&xGlobal.popupBox.isMySelf&&0==xGlobal.popupBox.isMySelf(I)&&(xGlobal.popupBox.close(),xGlobal.popupBox=null);if(xGlobal.popupMenu&&0<xGlobal.popupMenu.length){for(D=0;D<xGlobal.popupMenu.length&&(!xGlobal.popupMenu[D].isMySelf||1!=xGlobal.popupMenu[D].isMySelf(I));D++);D!=xGlobal.popupMenu.length||null!=xGlobal.popupMenu[0].isPupupChild&&0!=xGlobal.popupMenu[0].isPupupChild(I.target)||xGlobal.saftPopup&&xGlobal.saftPopup.isMySelf&&xGlobal.saftPopup.isMySelf(I)||(xGlobal.popupMenu[0].closeBox(),
xGlobal.autoPopupMenu=!1)}I.target.className&&(I=I.target.className,"divider-row"==I||"divider-col"==I)&&(xGlobal.focusObject=null);xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name||hiddenIntercept()}}function G(I){if(1!=xGlobal.customEvent){xGlobal.ObjectMouseMove=null;xGlobal.ObjectMouseOut&&(xGlobal.ObjectMouseOut(I),xGlobal.ObjectMouseOut=null);var D=!1;if(Ra){if(I.screenX==u&&I.screenY==Sb)if(Ab){var S=Ab.previousElementSibling,xa=Ab.nextElementSibling,Ba=Ab.parentElement.offsetWidth;
S&&xa&&Ab.dataset&&("slider-left"==Ab.dataset.slider?(D=parseFloat(S.clientLeft),D==parseFloat(Ab.style.left)?Ab.style.left=Ab.dataset.lastPos:(Ab.dataset.lastPos=""!=Ab.style.left?Ab.style.left:Ab.style.right,Ab.style.left=""+D+"px"),D=!0):"slider-right"==Ab.dataset.slider&&(D=parseFloat(xa.clientLeft)+parseFloat(Ab.dataset.minSize)-parseFloat(Ab.style.width),Ab.autoAdsorbent&&D<Ba-S.offsetWidth&&(D=Ba-S.offsetWidth-parseFloat(Ab.style.width)),D==parseFloat(Ab.style.right)?Ab.style.right=Ab.dataset.lastPos:
(Ab.dataset.lastPos=""!=Ab.style.left?Ab.style.left:Ab.style.right,Ab.style.right=""+D+"px"),D=!0))}else S=Gb.previousElementSibling,xa=Gb.nextElementSibling,S&&xa&&Gb.dataset&&("slider-top"==Gb.dataset.slider?(D=parseFloat(S.clientLeft),D==parseFloat(Gb.style.top)?Gb.style.top=Gb.dataset.lastPos:(Gb.dataset.lastPos=""!=Gb.style.top?Gb.style.top:Gb.style.bottom,Gb.style.top=""+D+"px"),D=!0):"slider-bottom"==Gb.dataset.slider&&(D=parseFloat(xa.clientTop)+parseFloat(Gb.dataset.minSize),D==parseFloat(Gb.style.bottom)?
Gb.style.bottom=Gb.dataset.lastPos:(Gb.dataset.lastPos=""!=Gb.style.top?Gb.style.top:Gb.style.bottom,Gb.style.bottom=""+D+"px"),D=!0));Ra=null}Ab&&Ab.callback_Resize?Ab.callback_Resize(Ab):Gb&&Gb.callback_Resize&&Gb.callback_Resize(Gb);Gb=Ab=null;1==D&&(hiddenIntercept(),S=globalPage.getActiveFrame())&&(S.layout(),S.redraw());if(2==I.button&&xPopupMenu)xPopupMenu.onMouseUp(I);xGlobal.focusObject&&"xSaftEdit"==xGlobal.focusObject.constructor.name&&xGlobal.focusObject.isChineseIntercept()&&autoLayerInChinese()}}
function B(I){"TEXTAREA"!=I.srcElement.tagName&&"INPUT"!=I.srcElement.tagName&&I.preventDefault()}function L(I){if(1!=xGlobal.customEvent&&1!=xGlobal.keyDown)if(xGlobal.keyDown=!0,67==I.keyCode&&(1==I.metaKey||1==I.ctrlKey))xGlobal.selectedCell&&aboutMe&&aboutMe.copyTextToClipboard(xGlobal.selectedCell.value.value);else if(1==xPopupMenu.onKeyDown(I))I.preventDefault();else if(xGlobal.frame&&xGlobal.frame.onFloatPageFrameKeydown(I))I.preventDefault();else if(xGlobal.keyGenius&&(!xGlobal.focusObject||
"xSaftEdit"!=xGlobal.focusObject.constructor.name||xGlobal.keyGenius.getParent()==xGlobal.focusObject.getParent())&&checkKeyGeniusKeyDown(I))xGlobal.keyGenius.onKeyDown(I),I=xGlobal.keyGenius.getParent(),xGlobal.focusObject=I.getCellById("keyGenius").object.focusObject,xGlobal.focusWidget=I,autoLayerInChinese();else if(!(xGlobal.focusObject&&xGlobal.focusObject.onKeyDown&&xGlobal.focusObject.onKeyDown(I)))if(0<xDialogList.length){if(!(colorPicker&&1==colorPicker.onKeyDown(I)||linePicker&&1==linePicker.onKeyDown(I))&&
(checkXDialog(),0<xDialogList.length))xDialogList[xDialogList.length-1].onKeyDown(I)}else{var D=globalPage.getActiveFrame();if(D&&D.activePageWithShortCut(I.key))I.preventDefault();else{if(xGlobal.focusWidget&&xGlobal.focusWidget.onKeyDown){fa.beginQuery("keyDown");if(xGlobal.focusWidget.onKeyDown(I)){fa.endQuery("keyDown");I.preventDefault();return}fa.endQuery("keyDown")}D&&"Escape"==I.key&&D.doEscape()}}}function ba(I){if(1!=xGlobal.customEvent)if(xGlobal.keyDown=!1,1==xPopupMenu.onKeyUp(I))I.preventDefault();
else if(0<xDialogList.length){if(checkXDialog(),0<xDialogList.length)xDialogList[xDialogList.length-1].onKeyUp(I)}else xGlobal.focusWidget&&xGlobal.focusWidget.onKeyUp?xGlobal.focusWidget.onKeyUp(I)&&I.preventDefault():1==fa.onKeyUp(I)&&I.preventDefault()}function N(I,D,S,xa,Ba){xa=void 0===xa?null:xa;Ba=void 0===Ba?null:Ba;var Ia=0;S={getGlobalActiveObject:fa.getGlobalActiveObject,sendPauseQuery:fa.sendPauseQuery,sendRestartQuery:fa.sendRestartQuery,sendCancelQuery:fa.sendCancelQuery,sendQuery:fa.sendQuery,
sendHttpQuery:fa.sendHttpQuery,sendSubmit:fa.sendSubmit,sendHttpSubmit:fa.sendHttpSubmit,sendUpdate:fa.sendUpdate,getQueryIndex:fa.getQueryIndex,setVariablesValue:fa.setVariablesValue,doEscape:sa.doEscape};fa.callbacks=S;var Da=[],lb=D.length+1,wb=0;if(xa&&xa.activeTab)for(var Fa=0;Fa<xa.elements.length;Fa++)if(xa.elements[Fa].id==xa.activeTab){wb=Fa;break}lb>=D.length&&(lb=D.length-1);for(Fa=0;Fa<=lb;Fa++){var Nb=Da.length,yb=T.document.createElement("div");Ia=T.document.createAttribute("style");
var xb="position:absolute;margin:0px;padding:0px;";xa&&(Fa!=wb&&(xb+="display:none;"),yb.dataset.tabId=xa.elements[Fa].id);D[Fa].style&&(xb+=D[Fa].style);Ia.value=xb;yb.setAttributeNode(Ia);yb.id=null!=D[Fa]&&null!=D[Fa].id?D[Fa].id:null!=D[Fa]&&D[Fa].page&&null!=D[Fa].page.id?D[Fa].page.id:"sm_id_"+xGlobal.systemMaketIdCount++;D[Fa].minWidth&&xGlobal.minPageList.customDom.push({pageDiv:ha,element:yb,minWidth:D[Fa].minWidth,frameId:K});Ia=null;D[Fa].class&&(yb.className=D[Fa].class,"divider-col"==
D[Fa].class?(Ia=0,Pb(yb,D[Fa],Da),ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"divider-col",schemeName:D[Fa].schemeName,container:yb}:{type:"divider-col",container:yb},null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme),Da[Nb]={type:"divider-col"}):"divider-row"==D[Fa].class&&(Ia=1,bc(yb,D[Fa],Da),ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"divider-row",schemeName:D[Fa].schemeName,container:yb}:{type:"divider-row",container:yb},null!=
D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme),Da[Nb]={type:"divider-row"}));if(null==Ia){xb&&(xb+=";");if(null==yb.style.height||""==yb.style.height){if(null==yb.style.top||""==yb.style.top)yb.style.top="0px",xb+="top:0px;";if(null==yb.style.bottom||""==yb.style.bottom)yb.style.bottom="0px",xb+="bottom:0px;"}if(null==yb.style.width||""==yb.style.width){if(null==yb.style.left||""==yb.style.left)yb.style.left="0px",xb+="left:0px;";if(null==yb.style.right||""==yb.style.right)yb.style.right=
"0px",xb+="right:0px;"}}D[Fa].style&&(yb.dataset.style=xb);var ob=null;I.appendChild(yb);if(D[Fa].tabs){ob=new xTab(T,fa,yb,D[Fa].tabs,null,D[Fa].tabs.calls,S);ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"div",schemeName:D[Fa].schemeName,object:ob,container:yb}:{type:"div",object:ob,container:yb};null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme);var kb=T.document.createElement("div");Ia=21;var Vb=D[Fa].tabs.option;null==Vb&&(Vb={tabPos:"top",height:38});
null!=Vb.height?Ia=Vb.height:null!=Vb.width&&(Ia=Vb.width);xb="";switch(Vb.tabPos){case "top":xb+="position:absolute;left:0px;right:0px;top:"+Ia+"px;bottom:0px;";break;case "left":xb+="position:absolute;right:0px;top:0px;left:"+Ia+"px;bottom:0px;";break;case "right":xb+="position:absolute;left:0px;top:0px;right:"+Ia+"px;bottom:0px;";break;case "bottom":xb+="position:absolute;left:0px;right:0px;top:0px;bottom:"+Ia+"px;";break;default:xb+="position:absolute;right:0px;top:0px;left:0px;bottom:0px;"}null!=
D[Fa].tabs.style&&(xb=getOptionStyle(D[Fa].tabs.style,xb.style));Ia=T.document.createAttribute("style");Ia.value=xb;kb.setAttributeNode(Ia);yb.appendChild(kb);kb.className="xTabContainer";Ia=function(Sa){for(var db=[],vb=[],ub=0;ub<D[Fa].tabs.elements.length;ub++)null==D[Fa].tabs.elements[ub].id&&(D[Fa].tabs.elements[ub].id="system_make_id_"+xGlobal.systemMaketIdCount++),db[ub]=D[Fa].tabs.elements[ub].id,vb[ub]=D[Fa].tabs.elements[ub].bound,vb[ub]&&(vb[ub].tabId=db[ub]);ob.setBounds(vb);Nb=Da.length;
Da[Nb]={type:"tabs",option:xDeepCopy(D[Fa].tabs.option),components:N(kb,D[Fa].tabs.elements,ob,D[Fa].tabs,Sa)};D[Fa].tabs.activeTab&&(Da[Nb].activeTab=D[Fa].tabs.activeTab);ob.setTabDomList(Da[Nb])};if(null!=D[Fa].tabs.query&&null!=D[Fa].tabs.init){ob.beginCreateTab=Ia;return}Ia(Ba)}else if(D[Fa].elements)Da[Nb]={type:"container",components:N(yb,D[Fa].elements,null,null,Ba)},"auto"==yb.style.overflow&&yb.addEventListener("scroll",H),D[Fa].callback_Touch&&(yb.addEventListener("touchstart",z),yb.addEventListener("touchmove",
z),yb.addEventListener("touchend",z));else if(D[Fa].element){null==D[Fa].element.type&&("xList"==D[Fa].element.class?D[Fa].element.type="canvas":"xListMobile"==D[Fa].element.class?D[Fa].element.type="div":"xCollection"==D[Fa].element.class?D[Fa].element.type="canvas":"xChart"==D[Fa].element.class?D[Fa].element.type="canvas":"xGrid"==D[Fa].element.class?D[Fa].element.type="canvas":"xToolbar"==D[Fa].element.class?D[Fa].element.type="div":"xSuperCollection"==D[Fa].element.class?D[Fa].element.type="div":
"xComHtml"==D[Fa].element.class?D[Fa].element.type="div":"xExcel"==D[Fa].element.class?D[Fa].element.type="canvas":"xRichEditor"==D[Fa].element.class?D[Fa].element.type="div":"xCarousel"==D[Fa].element.class&&(D[Fa].element.type="div"));if("canvas"==D[Fa].element.type)xb=T.document.createElement("canvas"),null==D[Fa].element.id&&(D[Fa].element.id="sm_make_id_"+xGlobal.systemMaketIdCount++),xb.id=D[Fa].element.id,xb.className=D[Fa].element.class,Ia=T.document.createAttribute("style"),Ia.value=D[Fa].style+
";position:absolute;margin:0px;padding:0px;",xb.setAttributeNode(Ia),yb.appendChild(xb),"xList"==D[Fa].element.class?ob=new xList(T,fa,xb,D[Fa].element.query,D[Fa].element.submit,D[Fa].element.events,D[Fa].element.variables,D[Fa].element.calls,S,Ba):"xCollection"==D[Fa].element.class?ob=new xCollection(T,fa,xb,D[Fa].element.query,D[Fa].element.variables,D[Fa].element.calls,S,Ba):"xChart"==D[Fa].element.class?ob=new xChart(T,fa,xb,D[Fa].element.query,D[Fa].element.variables,D[Fa].element.calls,S,Ba):
"xGrid"==D[Fa].element.class?ob=new xGrid(T,fa,xb,D[Fa].element.query,D[Fa].element.submit,D[Fa].element.variables,D[Fa].element.calls,S,Ba):"xExcel"==D[Fa].element.class&&(ob=new xExcel(T,fa,xb,D[Fa].element.query,D[Fa].element.submit,D[Fa].element.events,D[Fa].element.variables,D[Fa].element.calls,S,Ba)),D[Fa].element.toolbars&&ob.initToolbars&&ob.initToolbars(yb,D[Fa].element.toolbars),D[Fa].element.option&&ob.setOption(D[Fa].element.option),D[Fa].element.bounds&&ob.setBounds(D[Fa].element.bounds),
D[Fa].element.listData&&ob.setListData(D[Fa].element.listData),"xList"==D[Fa].element.class?D[Fa].element.init?ob.setHeader(D[Fa].element.init.cells,D[Fa].element.init.firstRowCells):D[Fa].element.option&&D[Fa].element.option.init&&ob.setHeader(D[Fa].element.option.init.cells,D[Fa].element.option.init.firstRowCells):"xCollection"==D[Fa].element.class?D[Fa].element.init&&ob.setViewItems(D[Fa].element.init):"xChart"!=D[Fa].element.class&&"xGrid"==D[Fa].element.class&&D[Fa].element.init&&ob.setGrid(D[Fa].element.init),
D[Fa].element.created&&D[Fa].element.created(ob),null!=fa.parent&&null!=fa.parent.getVariables&&(Ia=fa.parent.getVariables(),null!=Ia&&null!=ob.setVariablesValue&&ob.setVariablesValue(Ia,null,!1)),ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"canvas",schemeName:D[Fa].schemeName,object:ob,finishLayer:!1,container:xb,bounds:D[Fa].element.bounds}:{type:"canvas",object:ob,finishLayer:!1,container:xb,bounds:D[Fa].element.bounds},null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=
D[Fa].useSystemScheme),Da[Nb]={type:"canvas"};else if("div"==D[Fa].element.type){Ia=yb;null==D[Fa].element.id&&(D[Fa].element.id="sm_id_"+xGlobal.systemMaketIdCount++);Ia.id=D[Fa].element.id;Ia.className=D[Fa].element.class;if("xListMobile"==D[Fa].element.class)ob=new xListMobile(T,fa,Ia,D[Fa].element.query,D[Fa].element.submit,D[Fa].element.events,D[Fa].element.variables,D[Fa].element.calls,S,Ba),D[Fa].element.toolbars&&ob.initToolbars&&ob.initToolbars(yb,D[Fa].element.toolbars),D[Fa].element.option&&
ob.setOption(D[Fa].element.option),D[Fa].element.bounds&&ob.setBounds(D[Fa].element.bounds),D[Fa].element.listData&&ob.setListData(D[Fa].element.listData),D[Fa].element.init?ob.setHeader(D[Fa].element.init.cells,D[Fa].element.init.firstRowCells):D[Fa].element.option.init&&ob.setHeader(D[Fa].element.option.init.cells,D[Fa].element.option.init.firstRowCells);else if("xToolbar"==D[Fa].element.class){if(D[Fa].element.functions){xb="derivedClass"+derivedCounter;Vb="function "+xb;Vb+="(aWin, aPage, aParent, aButtons, aMainTargetId)";
Vb+="{ xToolbar.call(this, aWin, aPage, aParent, aButtons, aMainTargetId);};";Vb+="\r\n(function(){\r\n var Super = function(){};\r\n";Vb+="Super.prototype = xToolbar.prototype;\r\n ";Vb+=xb+".prototype = new Super();})();";for(var Lb=D[Fa].element.functions,va=0;va<Lb.length;va++){var Qa=Lb[va].parameter,Ua;for(Ua in Lb[va]){Vb=null==Qa?Vb+("\r\n"+xb+".prototype."+Ua+"=function(){\r\n"+Lb[va][Ua]+";\r\n};"):Vb+("\r\n"+xb+".prototype."+Ua+"=function("+Qa+"){\r\n"+Lb[va][Ua]+";\r\n};");break}}Vb+=
"\r\n child = new "+xb+"(win, _this, div, elem[i].element.option, elem[i].element.init, elem[i].element.target);";eval(Vb)}else ob=new xToolbar(T,fa,Ia,D[Fa].element.option,D[Fa].element.init,D[Fa].element.variables,D[Fa].element.target,S);D[Fa].element.initAction&&ob.query(3,D[Fa].element.initAction.callback,"",D[Fa].element.initAction.query)}else"xSuperCollection"==D[Fa].element.class?ob=new xSuperCollection(T,fa,Ia,D[Fa].element.query,D[Fa].element.variables,S,Ba):"xCarousel"==D[Fa].element.class?
ob=new xCarousel(T,fa,Ia,D[Fa].element.query,D[Fa].element.variables,S,Ba):"xRichEditor"==D[Fa].element.class?ob=new xRichEditor(T,fa,Ia,D[Fa].element.query,D[Fa].element.variables,S,Ba):"xHtml"==D[Fa].element.class?ob=new xHtml(T,fa,Ia,D[Fa].element.options,D[Fa].element.variables,D[Fa].element.calls,S):"xTable"==D[Fa].element.class?ob=new xTable(T,fa,Ia,D[Fa].element.query,D[Fa].element.options,D[Fa].element.variables,D[Fa].element.calls,S):"xEdit"==D[Fa].element.class?ob=new xEdit(T,fa,Ia):"xReadFrame"!=
D[Fa].element.class&&("xDetails"==D[Fa].element.class?ob=new xDetails(T,fa,Ia,D[Fa].element):"xComHtml"==D[Fa].element.class?ob=new xComHtml(T,fa,Ia,D[Fa].element.query,D[Fa].element.variables,D[Fa].element.calls,S):"DeepInfo"==D[Fa].element.class?ob=new DeepInfo(T,fa,Ia,D[Fa].element.options,D[Fa].element.variables,D[Fa].element.calls,S):"DeepInfoTypeTitle"==D[Fa].element.class&&(ob=new DeepInfoTypeTitle(T,fa,Ia,D[Fa].element.option,D[Fa].element.variables,D[Fa].element.calls,S)));ob&&D[Fa].element.bounds&&
ob.setBounds&&ob.setBounds(D[Fa].element.bounds);ob&&D[Fa].element.option&&ob.setOption&&ob.setOption(D[Fa].element.option);ob&&D[Fa].element.init&&ob.initializedData&&ob.initializedData(D[Fa].element.init);ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"div",schemeName:D[Fa].schemeName,object:ob,container:Ia,bounds:D[Fa].element.bounds}:{type:"div",object:ob,container:Ia,bounds:D[Fa].element.bounds};null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme);
D[Fa].element.initAction&&(D[Fa].element.initAction.startsWith("query")&&ob.query?ob.query():D[Fa].element.initAction.startsWith("create")&&ob.create&&ob.create());D[Fa].element.created&&D[Fa].element.created(ob);Da[Nb]={type:"div"}}else if(D[Fa].element.class&&""!=D[Fa].element.class){Ia=yb;switch(D[Fa].element.class){case "xTradingPad":ob=new xTradingPad(T,fa,yb,D[Fa].element.variables,S);break;case "xTradingBankTransfer":ob=new xTradingBankTransfer(T,fa,yb,D[Fa].element.variables,S);break;default:ob=
new_xClass(D[Fa].element.class,T,fa,yb,D[Fa].element.variables,S)}ob?(ob&&D[Fa].element.bounds&&ob.setBounds&&ob.setBounds(D[Fa].element.bounds),ob&&D[Fa].element.option&&ob.setOption&&ob.setOption(D[Fa].element.option),ob&&D[Fa].element.init&&ob.initializedData&&ob.initializedData(D[Fa].element.init),ob.getCanvasObject?(canvasObject=ob.getCanvasObject(),xb=ob.getCanvas(),null==D[Fa].element.id&&(D[Fa].element.id="sm_make_id_"+xGlobal.systemMaketIdCount++),xb.id=D[Fa].element.id,ea[ea.length]=D[Fa].schemeName&&
""!=D[Fa].schemeName?{type:"canvas",schemeName:D[Fa].schemeName,object:ob,container:xb,bounds:D[Fa].element.bounds}:{type:"canvas",object:ob,container:xb,bounds:D[Fa].element.bounds},null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme),Da[Nb]={type:"canvas"}):(ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"div",schemeName:D[Fa].schemeName,object:ob,container:Ia,bounds:D[Fa].element.bounds}:{type:"div",object:ob,container:Ia,bounds:D[Fa].element.bounds},
null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme),Da[Nb]={type:"div",object:ob},ob.getSubPage&&(Da[Nb].page=ob.getSubPage()))):(Da[Nb]={type:"div"},yb.innerHTML="<div style=\"left:0px;top:0px;right:0px;bottom:0px;background-color:transparent;color:#f00;margin:16px;\">Can't find class '"+(D[Fa].element.class+"' !</div>"))}D[Fa].element&&D[Fa].element.customSet&&(D[Fa].id&&(yb.id=D[Fa].id),D[Fa].element.customSet(yb))}else D[Fa].page?((ob=new xPage(T,Y,fa,yb,D[Fa].page.pageSet,
null,null),D[Fa].page.variables)&&ob.setVariables&&ob.setVariables(D[Fa].page.variables),ob&&D[Fa].page.bounds&&ob.setBounds&&ob.setBounds(D[Fa].page.bounds),ob&&D[Fa].page.option&&ob.setOption&&ob.setOption(D[Fa].page.option),ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"xPage",schemeName:D[Fa].schemeName,object:ob,container:yb,bounds:D[Fa].page.bounds}:{type:"xPage",object:ob,container:yb,bounds:D[Fa].page.bounds},null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme),
D[Fa].page.callback_init&&D[Fa].page.callback_init(ob,fa),yb.firstChild.style.display="block",Da[Nb]={type:"xPage",pageObject:ob}):D[Fa].innerHTML?(Da[Nb]={type:"div"},yb.innerHTML=D[Fa].innerHTML,null!=D[Fa].calls&&(yb.dataMap=D[Fa].dataMap,yb.onclick=D[Fa].calls),-1!=D[Fa].innerHTML.indexOf("schemeName")&&(ea[ea.length]={type:"div",schemeState:!0,container:yb})):"editor"==D[Fa].type&&(null==D[Fa].id&&(D[Fa].id="sm_id_"+xGlobal.systemMaketIdCount++),yb.id=D[Fa].id,Ia=createEditor(yb.id,D[Fa].init?
D[Fa].init.theme:null,D[Fa].init?D[Fa].init.language:null),ea[ea.length]=D[Fa].schemeName&&""!=D[Fa].schemeName?{type:"div",schemeName:D[Fa].schemeName,object:Ia,container:yb,bounds:null}:{type:"div",object:Ia,container:yb,bounds:null},null!=D[Fa].useSystemScheme&&(ea[ea.length-1].useSystemScheme=D[Fa].useSystemScheme),Da[Nb]={type:"div"});D[Fa].load?yb.innerHTML=eval("("+D[Fa].load+")"):Da[Nb]&&Tb(Da[Nb],yb,D[Fa],ob);1==D.isActive&&(hb=ea[ea.length-1].object)}return Da}function E(I,D){var S={minWidth:0,
minHeight:0,maxWidth:0,maxHeight:0,limitWidth:!0,limitHeight:!0,width:0,height:0,leftSize:0,rightSize:0,topSize:0,bottomSize:0};if(1==I.length||(void 0===D?0:D)){for(var xa=0;xa<I.length;xa++)I[xa].components?(D=E(I[xa].components,"tabs"==I[xa].type?!0:!1),I[xa].componentsSize=D):I[xa].pageObject?(D=I[xa].pageObject.calcPageSize(),I[xa].componentsSize=D):D=null,D&&(D.minWidth>S.minWidth?S.minWidth=D.minWidth:D.maxWidth>S.maxWidth&&(S.maxWidth=D.maxWidth),D.minHeight>S.minHeight?S.minHeight=D.minHeight:
D.maxHeight>S.maxHeight&&(S.maxHeight=D.maxHeight),0==D.limitWidth&&(S.limitWidth=!1),0==D.limitHeight&&(S.limitHeight=!1));return S}for(xa=0;xa<I.length;xa++)"divider-col"==I[xa].type?(I[xa].left&&"right"!=I[xa].bottom?"%"!=I[xa].left[I[xa].left.length-1]&&(S.leftSize=parseFloat(I[xa].left)):I[xa].right&&"auto"!=I[xa].right&&"%"!=I[xa].right[I[xa].right.length-1]&&(S.rightSize=parseFloat(I[xa].right)),I[xa].width&&(S.minWidth+=I[xa].width,S.maxWidth+=I[xa].width)):"divider-row"==I[xa].type?(I[xa].top&&
"auto"!=I[xa].top?"%"!=I[xa].top[I[xa].top.length-1]&&(S.topSize=parseFloat(I[xa].top)):I[xa].bottom&&"auto"!=I[xa].bottom&&"%"!=I[xa].bottom[I[xa].bottom.length-1]&&(S.bottomSize=parseFloat(I[xa].bottom)),I[xa].height&&(S.minHeight+=I[xa].height,S.maxHeight+=I[xa].height)):I[xa].layout?(I[xa].layout.minWidth&&(S.minWidth+=I[xa].layout.minWidth),I[xa].layout.maxWidth?S.maxWidth+=I[xa].layout.maxWidth:S.limitWidth=!1,I[xa].layout.minHeight&&(S.minHeight+=I[xa].layout.minHeight),I[xa].layout.maxHeight?
S.maxHeight+=I[xa].layout.maxHeight:S.limitHeight=!1):(S.limitWidth=!1,S.limitHeight=!1);return S}function V(I,D){if(I.layout)if(I.layout.hiddenWidth)if(I.layout.maxWidth?I.width=I.layout.maxWidth:I.layout.minWidth&&(I.width=I.layout.minWidth),I.layout.hiddenWidth[0][0]>D.width)for(var S=I.layout.hiddenWidth.length-1;0<=S;S--){if(I.layout.hiddenWidth[S][0]>D.width){0==I.layout.hiddenWidth[S][1]?I.layout.autoHidden=!0:(I.layout.width=I.layout.hiddenWidth[S][1],I.layout.autoHidden=!1,I.width=I.layout.width);
break}}else I.layout.autoHidden=!1;else if(I.layout.hiddenHeight)if(I.layout.maxHeight?I.height=I.layout.maxHeight:I.layout.minHeight&&(I.height=I.layout.minHeight),I.layout.hiddenHeight[0][0]>D.height)for(S=I.layout.hiddenHeight.length-1;0<=S;S--){if(I.layout.hiddenHeight[S][0]>D.height){0==I.layout.hiddenHeight[S][1]?I.layout.autoHidden=!0:(I.layout.height=I.layout.hiddenHeight[S][1],I.layout.autoHidden=!1,I.height=I.layout.height);break}}else I.layout.autoHidden=!1}function F(I,D,S){var xa={left:0,
top:0,width:I.width,height:I.height};if(1==D.length||(void 0===S?0:S))for(S=0;S<D.length;S++){if(null==D[S].layout||0!=D[S].layout.show)if(null==D[S].layout||1!=D[S].layout.autoHidden)D[S].components?(xa=ma(D[S],xa),F(xa,D[S].components,"tabs"==D[S].type?!0:!1)):D[S].pageObject?D[S].pageObject.layout(xa):D[S].page&&D[S].page.layout(xa),D[S].pos={left:0,top:0,width:I.width,height:I.height}}else{xa.top=0;xa.left=0;var Ba={left:xa.left,top:xa.top,width:xa.width,height:xa.height},Ia={left:xa.left,top:xa.top,
width:xa.width,height:xa.height},Da,lb=!1,wb=0,Fa=0,Nb=0;for(S=0;S<D.length;S++)if(!D[S].layout||0!=D[S].layout.show&&1!=D[S].layout.autoHidden)if("divider-col"==D[S].type){var yb=0;void 0!=D[S].width&&(yb=parseFloat(D[S].width));if(null!=D[S].left){if("auto"==D[S].left){var xb=xa.left;for(Da=S-1;0<Da;Da--)if(null==D[Da].layout||0!=D[Da].layout.show&&1!=D[Da].layout.autoHidden){xb=null!=D[Da].width?xb+D[Da].width:D[Da].layout&&null!=D[Da].layout.initWidth?xb+D[Da].layout.initWidth:xb+D[Da].pos.width;
break}}else xb="%"==D[S].left[D[S].left.length-1]?I.width*parseFloat(D[S].left)/100-yb/2:parseFloat(D[S].left);Fa=xb}else if(null!=D[S].right){if("auto"==D[S].right){xb=0;for(Da=S;Da<D.length;Da++)if(null==D[Da].layout||0!=D[Da].layout.show&&1!=D[Da].layout.autoHidden)null!=D[Da].height?xb+=D[Da].width:D[Da].layout&&null!=D[Da].layout.initWidth&&(xb+=D[Da].layout.initWidth);xb=I.width-xb}else xb="%"==D[S].right[D[S].right.length-1]?I.width-I.width*parseFloat(D[S].right)/100-yb/2:I.width-parseFloat(D[S].right)-
yb;Nb=I.width-xb}else null!=D[S].leftOffset?xb=Fa+=parseFloat(D[S].leftOffset):null!=D[S].rightOffset&&(Nb+=parseFloat(D[S].rightOffset),xb=I.width-Nb-yb);Da=xb-xa.left;0<S&&D[S-1].layout&&D[S-1].layout.minWidth&&Da<D[S-1].layout.minWidth&&0!=D[S-1].layout.show&&1!=D[S-1].layout.autoHidden&&(Da=D[S-1].layout.minWidth,xb=xa.left+Da);D[S].pos={left:xb,top:xa.top,width:yb,height:xa.height};Ba.width=Da;Ba.left=xa.left;xa.left=xb+yb;0<S&&(null==D[S-1].layout||0!=D[S-1].layout.show&&1!=D[S-1].layout.autoHidden)&&
(D[S-1].pos={left:Ba.left,top:Ba.top,width:Ba.width,height:Ba.height},D[S-1].components&&F(Ba,D[S-1].components,"tabs"==D[S-1].type?!0:!1));S<D.length-1&&(null==D[S+1].layout||0!=D[S+1].layout.show&&1!=D[S+1].layout.autoHidden?(Ia.left=xa.left,Ia.width=I.width-xa.left,D[S+1].pos={left:Ia.left,top:Ia.top,width:Ia.width,height:Ia.height},lb=!0,xa=xDeepCopy(Ia),D[S+1].components&&(Ia=ma(D[S+1],Ia),F(Ia,D[S+1].components,"tabs"==D[S+1].type?!0:!1))):(xa.width=I.width-xa.left,lb=!1))}else if("divider-row"==
D[S].type){yb=0;void 0!=D[S].height&&(yb=parseFloat(D[S].height));if(null!=D[S].top){if("auto"==D[S].top){var ob=xa.top;for(Da=S-1;0<Da;Da--)if(null==D[Da].layout||0!=D[Da].layout.show)if(null==D[Da].layout||1!=D[Da].layout.autoHidden){ob=null!=D[Da].height?ob+D[Da].height:D[Da].layout&&null!=D[Da].layout.initHeight?ob+D[Da].layout.initHeight:ob+D[Da].pos.height;break}}else ob="%"==D[S].top[D[S].top.length-1]?I.height*parseFloat(D[S].top)/100-yb/2:parseFloat(D[S].top);wb=ob}else if(null!=D[S].bottom)if("auto"==
D[S].bottom){ob=0;for(Da=S;Da<D.length;Da++)if(null==D[Da].layout||0!=D[Da].layout.show)if(null==D[Da].layout||1!=D[Da].layout.autoHidden)null!=D[Da].height?ob+=D[Da].height:D[Da].layout&&null!=D[Da].layout.initHeight&&(ob+=D[Da].layout.initHeight);ob=I.height-ob}else ob="%"==D[S].bottom[D[S].bottom.length-1]?I.height-I.height*parseFloat(D[S].bottom)/100-yb/2:I.height-parseFloat(D[S].bottom);else D[S].topOffset?ob=wb+=parseFloat(D[S].topOffset):0<S&&null!=D[S-1].height&&(ob=D[S-1].pos.top+D[S-1].height);
Da=ob-xa.top;0<S&&D[S-1].layout&&D[S-1].layout.minHeight&&Da<D[S-1].layout.minHeight&&0!=D[S-1].layout.show&&(Da=D[S-1].layout.minHeight,ob=xa.top+Da);D[S].pos={left:xa.left,top:ob,width:xa.width,height:yb};Ba.height=Da;Ba.top=xa.top;xa.top=ob+yb;0<S&&(null==D[S-1].layout||0!=D[S-1].layout.show&&1!=D[S-1].layout.autoHidden)&&(D[S-1].pos={left:Ba.left,top:Ba.top,width:Ba.width,height:Ba.height},D[S-1].components&&(Ba=ma(D[S-1],Ba),F(Ba,D[S-1].components,"tabs"==D[S-1].type?!0:!1)));S<D.length-1&&(null==
D[S+1].layout||0!=D[S+1].layout.show&&1!=D[S+1].layout.autoHidden?(Ia.top=xa.top,Ia.height=I.height-xa.top,xa=xDeepCopy(Ia),Ia=ma(D[S+1],Ia),D[S+1].pos={left:Ia.left,top:Ia.top,width:Ia.width,height:Ia.height},lb=!0,D[S+1].components&&F(Ia,D[S+1].components,"tabs"==D[S+1].type?!0:!1)):(lb=!1,xa.height=I.height-xa.top))}else if(0==lb||S==D.length-1||D[S+1].layout&&(0==D[S+1].layout.show||1==D[S+1].layout.autoHidden))xa=ma(D[S],xa),D[S].pos={left:xa.left-xa.tabWidht,top:xa.top-xa.tabHeight,width:xa.width,
height:xa.height},D[S].components&&(xa.top-=xa.tabHeight,F(xa,D[S].components,"tabs"==D[S].type?!0:!1))}}function M(I,D,S,xa){D=[];null==I?(S=ja,I=Z):(S=I.components,I=I.dom);for(var Ba=0;Ba<S.length;Ba++){var Ia=S[Ba].dom;if(S[Ba].layout)if(1==S[Ba].layout.autoHidden||0==S[Ba].layout.show){"none"!=Ia.style.display&&(Ia.style.display="none");continue}else"none"==Ia.style.display&&(Ia.style.display="block");if("none"!=Ia.style.display)if("divider-col"==S[Ba].type)Ia.style.left=S[Ba].pos.left+"px";
else if("divider-row"==S[Ba].type)Ia.style.top=""+parseFloat(S[Ba].pos.top)+"px";else{if(S[Ba].dom){if(S[Ba].pos){if("fixed"==S[Ba].scrollTop&&xa&&S[Ba].pos.top<xa)Ia.parentElement==I&&(I.removeChild(Ia),I.parentElement.appendChild(Ia)),Ia.style.left=""+parseFloat(S[Ba].pos.left)+"px",Ia.style.width=""+parseFloat(S[Ba].pos.width)+"px",Ia.style.height=""+parseFloat(S[Ba].pos.height)+"px",Ia.style.top=xa&&S[Ba].pos.top<xa?""+parseFloat(I.offsetTop-1)+"px":""+(parseFloat(I.offsetTop)+parseFloat(S[Ba].pos.top)-
parseFloat(xa))+"px",D.push(S[Ba]);else{if("fixed"==S[Ba].scrollTop){var Da=parseFloat(Ia.style.top);Ia.parentElement!=I&&(I.parentElement.removeChild(Ia),I.appendChild(Ia))}Ia.style.left=""+parseFloat(S[Ba].pos.left)+"px";Ia.style.width=""+parseFloat(S[Ba].pos.width)+"px";Ia.style.top=""+parseFloat(S[Ba].pos.top)+"px";Ia.style.height=""+parseFloat(S[Ba].pos.height)+"px"}var lb=S[Ba].pos.width}else Ia.style.left="0px",Ia.style.right="0px",Ia.style.top="0px",Ia.style.bottom="0px",lb=Ia.offsetWidth;
S[Ba].layout&&S[Ba].layout.width&&"center"==S[Ba].layout.domAlign&&lb>=S[Ba].layout.width&&(Ia.style.left="-"+S[Ba].layout.width/2+"px",Ia.style.marginLeft="50%",Ia.style.width=""+parseFloat(S[Ba].layout.width)+"px");S[Ba].object?S[Ba].object.layout&&S[Ba].object.layout():S[Ba].pageObject&&S[Ba].pageObject.layout()}S[Ba].components&&M(S[Ba],"tabs"==S[Ba].type?!0:!1,S[Ba].dom.scrollLeft,S[Ba].dom.scrollTop)}}0<D.length&&Da&&(D=D[D.length-1],xa+D.pos.height>Da&&(D.dom.style.top=parseFloat(D.dom.style.top)-
(xa+D.pos.height-Da)+"px"))}function X(I){for(var D=0;D<I.length;D++)if("["==I[D])for(var S=D+2;S<I.length;S++)if("]"==I[S])return{key:I.substr(0,D),index:parseInt(I.substr(D+1,S-D-1))}}function aa(I,D){if(I)if("Array"==I.constructor.name)for(var S=0;S<I.length;S++){if(aa(I[S],D))return!0}else if(I==D)return!0;return!1}function ia(I){if(sa&&null!=sa[I])return sa[I]}f=void 0===f?{top:0,bottom:0,left:0,right:0}:f;var fa=this,T=a,Y=b,O=c;var K=Y&&Y.getFrameId?Y.getFrameId():O&&O.getFrameId?O.getFrameId():
"global";var Z=g;null==f&&(f={top:0,bottom:0,left:0,right:0});var pa=f.top,oa=f.bottom,Aa=f.left,ta=f.right,Q=pageCounter++,sa=k,ra=ia("loadPage");a=ia("pageDidCreate");var la=ia("pageWillAppear"),Na=ia("pageDidAppear"),Wa=ia("pageWillDisAppear"),na=ia("pageDisAppear");r&&r.id&&(Q=r.id);var ha,ea=[],ja=[],da,Oa,Pa=!1,hb=null,Ma=0,rb=!1,zb,Jb,Cb;this.parent=null!=v?v:null;this.childList=ea;var Db,cb,Ab=this.afterAction=null,Gb=null,Ra=null;var Sb=u=0;sa&&sa.afterAction&&(this.afterAction=eval(sa.afterAction));
this.getPageManager=function(){return Y};this.getPageById=function(I){return Y.getPageById(I)};this.getPageId=function(){return Q};this.getFrameId=function(){return K};this.setActivePage=function(I,D){Y.setActivePage(I,D)};var Ub,Ob,Fb;this.setVariables=function(I){Ub=xDeepCopy(I)};this.getVariables=function(){return Ub};this.setBounds=function(I){Ob=I};this.getBounds=function(){return Ob};this.setOption=function(I){Fb=xDeepCopy(I)};this.getOption=function(){return Fb};this.getDomList=function(){return ja};
this.setQueryInfo=function(I){queryInfo=I};this.getQueryInfo=function(){return queryInfo};this.getQueryData=function(){return queryData};this.setTable=function(I){};this.setPageSet=function(I,D){sa&&sa!=I&&fb();sa=I;ha.id="xPage-"+Q;fa.domId=ha.id;ha.className="xPage";I=T.document.createAttribute("style");sa&&sa.schemeName&&(ha.schemeName=sa.schemeName);null==sa||void 0==sa.style||""==sa.style?(I.value="margin:0px;padding:0px;position:absolute;top:"+(null==pa?0:pa)+"px;left:"+(null==Aa?0:Aa)+"px;right:"+
(null==ta?0:ta)+"px;bottom:"+(null==oa?0:oa)+"px;display:none;",ha.setAttributeNode(I)):(I.value=sa.style,ha.setAttributeNode(I),ha.style.top=null==ha.style.top||""==ha.style.top?""+(null==pa?0:pa)+"px":""+((null==pa?0:pa)+parseFloat(ha.style.top))+"px",ha.style.bottom=""+(null==oa?0:oa)+"px",ha.style.left=""+(null==Aa?0:Aa)+"px",ha.style.right=""+(null==ta?0:ta)+"px");sa&&sa.layout&&sa.layout.width&&(ha.style.width=sa.layout.width+"px");ha.addEventListener("mousemove",U);ha.addEventListener("mouseup",
G);ha.addEventListener("mousedown",J);ha.addEventListener("contextmenu",B);ha.addEventListener("keydown",L);ha.addEventListener("keyup",ba);T.document.getElementById("mainBody")==Z&&xGlobal.pageMinWidth&&(ha.style.minWidth=xGlobal.pageMinWidth+"px");null!=ra&&ra(fa);if(sa&&sa.elements){ja=N(ha,sa.elements,null,null,D);sa.callback_Touch&&(ha.addEventListener("touchstart",z),ha.addEventListener("touchmove",z),ha.addEventListener("touchend",z));if(ea&&0<ea.length){if(sa.activeObject)for(D=0;D<ea.length;D++){if(void 0!=
ea[D].object&&ea[D].container.id==sa.activeObject&&"canvas"==ea[D].type){hb=ea[D].object;break}}else hb=ea[0].object;"none"==ha.style.display&&(ha.style.display="block");fa.layout();fa.redraw()}if(sa.floatElements)for(da=[],D=0;D<sa.floatElements.length;D++)da[D]={id:sa.floatElements[D].id,page:new xPage(T,Y,fa,ha,sa.floatElements[D],null,null,null,"floatPage")},da[D].page.layout(),da[D].page.redraw(),1==sa.floatElements[D].show?da[D].page.show():da[D].page.hidden()}fa.setScheme(zb,Jb);sa&&sa.dragdropLayout&&
"undefined"!=typeof xDragdropLayout&&(cb=new xDragdropLayout(T,ha,fa,sa.dragdropLayout))};this.getPageSize=function(){var I=function(S,xa,Ba){for(var Ia,Da,lb=0;lb<S.length;lb++)"none"!=S[lb].dom.style.display&&(Da=S[lb].dom,Da={left:Da.offsetLeft+xa,top:Da.offsetTop+Ba,width:Da.offsetWidth,height:Da.offsetHeight},S[lb].components&&(Da=I(S[lb].components,Da.left,Da.top)),Da&&(null==Ia?Ia=Da:(Da.left+Da.width>Ia.left+Ia.width&&(Ia.width=Da.left+Da.width-Ia.left),Da.top+Da.height>Ia.top+Ia.height&&
(Ia.height=Da.top+Da.height-Ia.top))));return Ia},D=I(ja,0,0);return{width:D.width,height:D.height}};this.dragdrop=function(I,D,S){if(null!=sa.dragdropLayout&&null!=sa.dragdropLayout.divider&&null!=sa.dragdropLayout.divider.row&&null!=sa.dragdropLayout.divider.col){var xa=function(Da,lb,wb){for(var Fa=0;Fa<Da.length;Fa++){if(Da[Fa]==lb){lb=Da[Fa].dom.parentElement;var Nb=Da[Fa];var yb=wb[Fa];if(Fa<Da.length-1){lb.removeChild(Da[Fa].dom);if("divider-col"==Da[Fa+1].type||"divider-row"==Da[Fa+1].type){var xb=
Da[Fa+1];var ob=wb[Fa+1];lb.removeChild(Da[Fa+1].dom);Da.splice(Fa,2);wb.splice(Fa,2)}else Da.splice(Fa,1),wb.splice(Fa,1);Fa=Da.length-1;0<Fa&&("divider-col"==Da[Fa].type||"divider-row"==Da[Fa].type)&&(lb.removeChild(Da[Fa].dom),Da.splice(Fa,1),wb.splice(Fa,1))}else 0<Fa?(lb.removeChild(Da[Fa].dom),"divider-col"==Da[Fa-1].type||"divider-row"==Da[Fa-1].type?(xb=Da[Fa-1],ob=wb[Fa-1],lb.removeChild(Da[Fa-1].dom),Da.splice(Fa-1,2),wb.splice(Fa-1,2)):(Da.splice(Fa,1),wb.splice(Fa,1))):(lb.removeChild(Da[Fa].dom),
Da.splice(Fa,1),wb.splice(Fa,1));return{drag:Nb,split:xb,element:yb,divider:ob}}if(Da[Fa].components&&(Nb=xa(Da[Fa].components,lb,wb[Fa].tabs?wb[Fa].tabs.elements:wb[Fa].elements))){if(null==Da[Fa].components||0==Da[Fa].components.length)lb=Da[Fa].dom.parentElement,lb.removeChild(Da[Fa].dom),Fa<Da.length-1?"divider-col"==Da[Fa+1].type||"divider-row"==Da[Fa+1].type?(lb.removeChild(Da[Fa+1].dom),Da.splice(Fa,2),wb.splice(Fa,2)):(Da.splice(Fa,1),wb.splice(Fa,1)):0<Fa?"divider-col"==Da[Fa-1].type||"divider-row"==
Da[Fa-1].type?(lb.removeChild(Da[Fa-1].dom),Da.splice(Fa-1,2),wb.splice(Fa-1,2)):(Da.splice(Fa,1),wb.splice(Fa,1)):(Da.splice(Fa,1),wb.splice(Fa,1));return Nb}}},Ba=function(Da){var lb=T.document.createElement("div");lb.id="sm_id_"+xGlobal.systemMaketIdCount++;var wb=T.document.createAttribute("style");wb.value="position:absolute;left:0px;top:0px;right:0px;bottom:0px;background-color:transparent;";lb.setAttributeNode(wb);Da.appendChild(lb);Da={type:"container"};Tb(Da,lb,null);return Da};if(I=xa(ja,
I.component,sa.elements)){var Ia=function(Da,lb,wb,Fa,Nb,yb){for(var xb=0;xb<lb.length;xb++){if(lb[xb]==wb){wb=function(va,Qa){var Ua=Qa.parentNode;Ua.lastChild==Qa?Ua.appendChild(va):Ua.insertBefore(va,Qa.nextSibling)};if("top"==Nb||"bottom"==Nb){var ob=xDeepCopy(sa.dragdropLayout.divider.row);ob.type="divider-row"}else if("left"==Nb||"right"==Nb)ob=xDeepCopy(sa.dragdropLayout.divider.col),ob.type="divider-col";else break;var kb=lb[xb].dom.parentElement;if(Da&&"tabs"==Da.type||1<lb.length){for(var Vb,
Lb=0;Lb<lb.length;Lb++)if("divider-row"==lb[Lb].type){if("left"==Nb||"right"==Nb)Vb="col";break}else if("divider-col"==lb[Lb].type){if("top"==Nb||"bottom"==Nb)Vb="row";break}if(Da&&"tabs"==Da.type||Vb)container=Ba(kb),container.components=[lb[xb]],kb.removeChild(lb[xb].dom),container.dom.appendChild(lb[xb].dom),lb[xb]=container,yb[xb]={elements:[yb[xb]]},kb=container.dom,lb=container.components,yb=yb[xb].elements,xb=0;else if(Da?(Vb=Da.dom.offsetWidth,Da=Da.dom.offsetHeight):(Vb=ha.offsetWidth,Da=
ha.offsetHeight),"top"==Nb||"bottom"==Nb)ob.top=100*(lb[xb].dom.offsetTop/Da+lb[xb].dom.offsetHeight/Da*.5)+"%";else if("left"==Nb||"right"==Nb)ob.left=100*(lb[xb].dom.offsetLeft/Vb+lb[xb].dom.offsetWidth/Vb*.5)+"%"}Da=xDeepCopy(ob);Fa.split={dom:T.document.createElement("div")};Fa.split.dom.id="sm_id_"+xGlobal.systemMaketIdCount++;Fa.split.dom.className=ob.class;Vb=T.document.createAttribute("style");Lb="position:absolute;margin:0px;padding:0px;";ob.style&&(Lb+=ob.style);Vb.value=Lb;Fa.split.dom.setAttributeNode(Vb);
ob.style&&(Fa.split.dom.dataset.style=Lb);Da.dom=Fa.split.dom;Fa.divider=xDeepCopy(ob);switch(Nb){case "top":lb.splice(xb,0,Fa.drag);lb.splice(xb+1,0,Da);bc(Da.dom,ob);yb.splice(xb,0,Fa.element);yb.splice(xb+1,0,Fa.divider);kb.appendChild(Fa.drag.dom);kb.appendChild(Da.dom);kb.insertBefore(Fa.drag.dom,lb[xb+2].dom);kb.insertBefore(Da.dom,lb[xb+2].dom);break;case "bottom":lb.splice(xb+1,0,Da);lb.splice(xb+2,0,Fa.drag);bc(Da.dom,ob);yb.splice(xb+1,0,Fa.divider);yb.splice(xb+2,0,Fa.element);kb.appendChild(Da.dom);
kb.appendChild(Fa.drag.dom);wb(Fa.drag.dom,lb[xb].dom);wb(Da.dom,lb[xb].dom);break;case "left":lb.splice(xb,0,Fa.drag);lb.splice(xb+1,0,Da);Pb(Da.dom,ob);yb.splice(xb,0,Fa.element);yb.splice(xb+1,0,Fa.divider);kb.appendChild(Fa.drag.dom);kb.appendChild(Da.dom);kb.insertBefore(Fa.drag.dom,lb[xb+2].dom);kb.insertBefore(Da.dom,lb[xb+2].dom);break;case "right":lb.splice(xb+1,0,Da),lb.splice(xb+2,0,Fa.drag),Pb(Da.dom,ob),yb.splice(xb+1,0,Fa.divider),yb.splice(xb+2,0,Fa.element),kb.appendChild(Da.dom),
kb.appendChild(Fa.drag.dom),wb(Fa.drag.dom,lb[xb].dom),wb(Da.dom,lb[xb].dom)}Tb(Da,Da.dom,ob);return!0}if(lb[xb].components&&Ia(lb[xb],lb[xb].components,wb,Fa,Nb,yb[xb].tabs?yb[xb].tabs.elements:yb[xb].elements))return!0}};Ia(null,ja,D.component,I,S,sa.elements)}this.layout();this.redraw();return sa}};var Ya=function(I){for(var D=0;D<I.length;D++)I[D].object&&(I[D].object.destroy&&I[D].object.destroy(),delete I[D].object),I[D].components&&Ya(I[D].components)},fb=function(){function I(S){if(S.children)for(var xa=
0;xa<S.children.length;xa++)I(S.children[xa]),S.removeChild(S.children[xa])}if(null!=sa){fa.beginQuery("unloadPage");if(da)for(var D=0;D<da.length;D++)da[D].page.unloadPage();Ya(ja);fa.endQuery("unloadPage");ja=[];ea=[];hb=ha.innerHTML=null;I(ha)}};this.setActionTarget=function(I,D,S){function xa(Ba,Ia,Da,lb){for(var wb=0;wb<Ba.length;wb++)Ba[wb].object&&Ba[wb].object.setActionTarget?Ba[wb].object.setActionTarget(Ia,Da,lb):Ba[wb].components&&xa(Ba[wb].components,actionTarget,actionTargetButton,actionTargetPage)}
xa(ja,I,D,S)};this.domId="";this.getParentPage=function(){return O};this.appendChild=function(I){ea[ea.length]=I};this.getPageDivId=function(){return ha.id};this.getPageDiv=function(){return ha};var $a=function(I,D,S,xa,Ba,Ia,Da){for(var lb=0;lb<I.length;lb++)if("none"!=I[lb].dom.style.display){var wb=xa+I[lb].dom.offsetLeft+I[lb].dom.scrollLeft,Fa=Ba+I[lb].dom.offsetTop+I[lb].dom.scrollTop;if(D>wb&&D<wb+I[lb].dom.offsetWidth&&S>Fa&&S<Fa+I[lb].dom.offsetHeight){if(I[lb].option&&I[lb].option.isNoDrag)return"nodrag";
if(I[lb].option&&I[lb].option.isGroup||"divider-col"==I[lb].type||"divider-row"==I[lb].type||I[lb].object&&"xTab"!=I[lb].object.constructor.name)return{dom:I[lb].dom,component:I[lb],position:{left:xa+I[lb].dom.offsetLeft,top:Ba+I[lb].dom.offsetTop,width:I[lb].dom.offsetWidth,height:I[lb].dom.offsetHeight}}}if(I[lb].components&&(null==I[lb].option||1!=I[lb].option.isGroup)&&(wb=$a(I[lb].components,D,S,xa+I[lb].dom.offsetLeft,Ba+I[lb].dom.offsetTop,Ia+I[lb].dom.scrollLeft,Da+I[lb].dom.scrollTop)))return"nodrag"==
wb?{dom:I[lb].dom,component:I[lb],position:{left:xa+I[lb].dom.offsetLeft,top:Ba+I[lb].dom.offsetTop,width:I[lb].dom.offsetWidth,height:I[lb].dom.offsetHeight}}:wb}};this.getWidgetDivByXY=function(I,D,S,xa){return $a(ja,I,D,0,0,S,xa)};var za=function(I){for(var D=0;D<I.length;D++)if(!I[D].layout||0!=I[D].layout.show&&1!=I[D].layout.autoHidden)if(I[D].object&&I[D].object.show)I[D].object.show(!0);else if(I[D].components&&0<I[D].components.length)if("tabs"==I[D].type){var S=0;if(I[D].activeTab)for(var xa=
0;xa<I[D].components.length;xa++)if(I[D].activeTab==I[D].components[xa].dom.id){S=xa;break}I[D].components[S].components?za(I[D].components[S].components):I[D].components[S].object&&I[D].components[S].object.show&&I[D].components[S].object.show(!0)}else za(I[D].components)},Ka=function(I){for(var D=0;D<I.length;D++)if(!I[D].layout||0!=I[D].layout.show&&1!=I[D].layout.autoHidden)I[D].object&&I[D].object.show?I[D].object.hidden(!0):I[D].components&&Ka(I[D].components)},ab;this.show=function(I){la&&
la(fa);fa.beginQuery("show");"none"==ha.style.display&&(ha.style.display="block");1==ab&&(ha.className="xPage-Active",ab=null);1==I&&za(ja);var D=function(S){for(var xa=0;xa<S.length;xa++)S[xa].dom.style.display&&"none"!=S[xa].dom.style.display&&(S[xa].object&&S[xa].object.query&&S[xa].object.query(),S[xa].components&&D(S[xa].components))};D(ja);fa.pageState="show";if(da)for(I=0;I<da.length;I++)"hidden"!=da[I].page.pageState&&da[I].page.show(!0);fa.endQuery("show");Na&&Na(fa)};this.hidden=function(){Wa&&
Wa(fa);ha.style.display="none";fa.sendPauseQuery();Ka(ja);ab=!0;fa.pageState="hidden";na&&na(fa)};this.showFloat=function(I){if(da)for(var D=0;D<da.length;D++)if(da[D].id==I){da[D].page.show(!0);da[D].page.layout();da[D].page.redraw(!0);break}};this.hiddenFloat=function(I){if(da)for(var D=0;D<da.length;D++)if(da[D].id==I){da[D].page.hidden();break}};this.setFloatPostion=function(I,D){if(da)for(var S=0;S<da.length;S++)if(da[S].id==I){I=da[S].page.getPageDiv();null!=D.left&&(I.style.left=D.left+"px");
null!=D.top&&(I.style.top=D.top+"px");null!=D.width&&(I.style.width=D.width+"px");null!=D.height&&(I.style.height=D.height+"px");break}};this.setSplitLinePos=function(I){W(ja,I)};var W=function(I,D){for(var S=0;S<I.length;S++)if("none"!=I[S].dom.style.display)if("divider-col"==I[S].type){if(I[S].dom.id==D.id){if(I[S].left){if(I[S].left="%"==I[S].left[I[S].left.length-1]?100*parseFloat(D.left)/D.parentWidth+"%":D.left,D.element&&(D.element.adjust={left:I[S].left,components:I[S-1]}),D.parentWidth)for(S++;S<
I.length;S++)"divider-col"==I[S].type&&I[S].left&&D.moveX&&(I[S].left+=D.moveX)}else I[S].right&&(I[S].right="%"==I[S].right[I[S].right.length-1]?100*parseFloat(D.right)/D.parentWidth+"%":D.parentWidth-parseFloat(D.left),D.element&&(D.element.adjust={right:I[S].right,components:I[S+1]}));fa.layout();fa.redraw();return!0}}else if("divider-row"==I[S].type){if(I[S].dom.id==D.id){if(I[S].top){if(I[S].top="%"==I[S].top[I[S].top.length-1]?100*parseFloat(D.top)/D.parentHeight+"%":D.top,1<S&&I[S-1].minHeight&&
I[S].top-I[S-1].pos.y<I[S-1].minHeight&&(I[S].top=I[S-1].minHeight+I[S].pos.y),S<I.length-2&&I[S+1].minHeight&&I[S+1].pos.y-I[S].top<I[S+1].minHeight&&(I[S].top=I[S+1].pos.y-I[S+1].minHeight),D.element&&(D.element.adjust={top:I[S].top,components:I[S-1]}),D.parentHeight)for(S++;S<I.length;S++)"divider-row"==I[S].type&&I[S].top&&D.moveY&&(I[S].top+=D.moveY)}else if(I[S].bottom)if("auto"==I[S].bottom){for(var xa=0,Ba=0,Ia;S<I.length;S++)if(null==I[S].layout||0!=I[S].layout.show)null!=I[S].height?xa+=
I[S].height:I[S].layout&&null!=I[S].layout.initHeight&&(0<Ba?xa+=I[S].layout.initHeight:Ia=S,Ba++);null!=Ia&&(D=D.parentHeight-parseFloat(D.top)-xa,0<D&&(I[Ia].layout.initHeight=D))}else I[S].bottom="%"==I[S].bottom[I[S].bottom.length-1]?100*parseFloat(D.bottom)/D.parentHeight+"%":D.parentHeight-parseFloat(D.top),D.element&&(D.element.adjust={bottom:I[S].bottom,components:I[S+1]});fa.layout();fa.redraw();return!0}}else if(I[S].components){if(W(I[S].components,D))break}else if(I[S].object&&I[S].object.setSplitLinePos&&
I[S].object.setSplitLinePos(D))break};this.layout=function(I){if(null!=sa){if(null==I){var D=ha.offsetWidth;var S=ha.offsetHeight;var xa=ha.offsetLeft;var Ba=ha.offsetTop}else D=I.width,S=I.height,xa=I.left,Ba=I.top;if(0<D&&0<S){I=D;var Ia=S;xa={left:xa,top:Ba,width:I,height:Ia};xa.width<I&&(xa.width=I);Ba=E(ja);Ba.minWidth&&xa.width<Ba.minWidth&&(xa.width=Ba.minWidth);1==Ba.limitWidth&&Ba.maxWidth&&xa.width>Ba.maxWidth&&(xa.width=Ba.maxWidth);Ba.minHeight&&xa.width<Ba.minHeight&&(xa.height=Ba.minHeight);
1==Ba.limitHeight&&Ba.maxHeight&&xa.width>Ba.maxHeight&&(xa.height=Ba.maxHeight);sa.layout&&sa.layout.width&&(xa.width=sa.layout.width);Xb(ja,null,{width:D,height:S});F(xa,ja);M(null,!1,0,0);sa.layout&&"center"==sa.layout.domAlign&&sa.layout.width&&(ha.parentElement.offsetWidth>sa.layout.width?(ha.style.left="-"+sa.layout.width/2+"px",ha.style.marginLeft="50%",ha.parentElement.style.overflow="hidden"):(ha.style.left="0px",ha.style.marginLeft="",ha.parentElement.style.overflow="auto"),ha.style.width=
sa.layout.width+"px");I=Ba.minWidth>I?Ba.minWidth:I;I>D&&(ha.style.minWidth=I+"px",parseFloat(ha.style.width)<I?ha.style.width=ha.style.minWidth:ha.style.width="");Ia=Ba.minHeight>Ia?Ba.minHeight:Ia;Ia>S&&(ha.style.minHeight=Ia+"px",parseFloat(ha.style.width)<Ia?ha.style.width=ha.style.minHeight:ha.style.width="")}if(da)for(D=0;D<da.length;D++)"hidden"!=da[D].page.pageState&&da[D].page.layout()}};this.redraw=function(I){I=void 0===I?!1:I;fa.beginQuery("active page");Ca(ja,I);fa.endQuery("active page")};
var Ca=function(I,D){for(var S=0;S<I.length;S++)"none"!=I[S].dom.style.display&&(I[S].components?Ca(I[S].components,D):I[S].object&&(1!=I[S].object.finishLayer&&(I[S].object.finishLayer=!0,null!=I[S].object.viewWillAppear&&I[S].object.viewWillAppear()),I[S].object.draw&&I[S].object.draw(D),I[S].object.resize?I[S].object.resize():I[S].object.redraw&&I[S].object.redraw()));if(da)for(S=0;S<da.length;S++)"hidden"!=da[S].page.pageState&&da[S].page.redraw(D)};this.refresh=function(I){if(null==I){if("none"==
ha.style.display)return;if(Oa&&0<Oa.length){Oa[Oa.length-1].page.refresh();return}I=ja}for(var D=0;D<I.length;D++)"none"!=I[D].dom.style.display&&(I[D].components?fa.refresh(I[D].components):I[D].object&&(1!=I[D].object.finishLayer&&(I[D].object.finishLayer=!0,null!=I[D].object.viewWillAppear&&I[D].object.viewWillAppear()),I[D].object.refresh&&I[D].object.refresh()));if(da)for(D=0;D<da.length;D++)"hidden"!=da[D].page.pageState&&da[D].page.refresh()};this.setActiveWidget=function(I){for(var D=0;D<
ea.length;D++)if(void 0!=ea[D].object&&ea[D].container.id==I){if("canvas"==ea[D].type){var S=ea[D].object;if(S!=Y.activeObject){for(D=ea[D].container;D;D=D.parentElement){if("xTabContainer"==D.className&&xa&&xa.dataset.tabId){fa.setActiveTab(xa.dataset.tabId);break}var xa=D}D=Y.activeObject;fa.setPageFocusWidget(S);Y.activeObject=S;D&&D.draw&&D.draw(!0);S&&S.draw&&S.draw(!0);break}}return ea[D].object}if(da)for(D=0;D<da.length;D++)if(S=da[D].page.setActiveWidget(I))return S};this.setFocusObjectById=
function(I){for(var D=0;D<ea.length;D++)if(void 0!=ea[D].object&&ea[D].container.id==I){if("canvas"==ea[D].type&&(I=ea[D].object,I!=Y.activeObject)){for(D=ea[D].container;D;D=D.parentElement){if("xTabContainer"==D.className&&S&&S.dataset.tabId){fa.setActiveTab(S.dataset.tabId);break}var S=D}S=Y.activeObject;fa.setPageFocusWidget(I);Y.activeObject=I;S&&S.draw&&S.draw(!0);break}break}};this.setActivePageWithBounds=function(I,D,S,xa){Y.setActivePageWithBounds(I,D,S,xa)};this.getPageActiveObject=function(){return hb};
this.getGlobalActiveObject=function(){return Y.activeObject};this.getContainerByIndex=function(I){if(I<ea.length)return ea[I].container};this.getContainerById=function(I){for(var D=0;D<ea.length;D++)if(ea[D].container&&ea[D].container.id==I)return ea[D].container};this.getWidgetById=function(I){for(var D=0;D<ea.length;D++)if(ea[D].container&&ea[D].container.id==I)return ea[D].object};this.isChild=function(I){for(var D=0;D<ea.length;D++)if(void 0!=ea[D].object&&(ea[D].object==I||ea[D].object.getCanvas&&
ea[D].object.getCanvas()==I))return!0;return!1};this.switchToTabById=function(I){var D=function(S,xa,Ba){if(S.components)Ba&&(S.object.switchToTabById(xa),D(S.components,xa));else for(Ba=0;Ba<S.length;Ba++)"tabs"==S[Ba].type?D(S[Ba],xa,!0):S[Ba].components&&D(S[Ba].components,xa)};D(ja,I)};this.switchToTabByGroupId=function(I){var D=I.split(".");if(1<D.length){I=fc(ja,D[0]);for(var S=1;S<D.length-1&&(I=fc(I,D[S]),null!=I);S++);if(I){var xa=function(Ba,Ia){if(void 0!=Ba.object&&"xTab"==Ba.object.constructor.name)Ba.object.switchToTabByGroupId(Ia);
else if(Ba.components)for(var Da=0;Da<Ba.components.length;Da++)xa(Ba.components[Da],Ia)};xa(I,D[D.length-1])}}else for(S=0;S<ea.length;S++)void 0!=ea[S].object&&"xTab"==ea[S].object.constructor.name&&ea[S].object.switchToTabByGroupId(I)};this.showTabByGroupId=function(I){var D=function(S,xa,Ba){if(S.components)Ba&&(S.object.showTabByGroupId(xa),D(S.components,xa));else for(Ba=0;Ba<S.length;Ba++)"tabs"==S[Ba].type?D(S[Ba],xa,!0):S[Ba].components&&D(S[Ba].components,xa)};D(ja,I)};var ca=function(I,
D,S,xa,Ba,Ia){for(var Da=0;Da<I.length;Da++){if("tabs"==I[Da].type){var lb=I[Da].object.getTabTdByTabId(D);if(lb)return I[Da].object.setActiveTab(lb,!0,S,xa,Ba,Ia),I[Da].activeTab=D,I[Da]}if(I[Da].components&&0<I[Da].components.length&&(lb=ca(I[Da].components,D,S,xa,Ba,Ia)))return"tabs"==I[Da].type&&(I.activeTab=lb.id),I[Da]}};this.setActiveTab=function(I,D,S,xa,Ba){fa.beginQuery("active tab");if(ca(ja,I,D,S,xa,Ba))0!=Cb&&fa.layout(),fa.redraw();else if(da)for(var Ia=0;Ia<da.length;Ia++)da[Ia].page.setActiveTab(I,
D,S,xa,Ba);fa.endQuery("active tab")};this.setFocusWidget=function(I,D){null==D&&(D=ja);for(var S=0;S<D.length;S++){if(D[S].id==I&&D[S].object)return fa.setPageFocusWidget(D[S].object),D[S].object;if(D[S].components){var xa=fa.setFocusWidget(I,D[S].components);if(xa)return xa}}if(da)for(S=0;S<da.length;S++)da[S].page.setFocusWidget(I)};this.setFocusWidgetByGroupId=function(I,D){null==D&&(D=ja);for(var S=0;S<D.length;S++){if(D[S].groupId==I&&D[S].object)return fa.setPageFocusWidget(D[S].object),D[S].object;
if(D[S].components&&(!D[S].layout||0!=D[S].layout.show&&1!=D[S].layout.autoHidden)){var xa=fa.setFocusWidgetByGroupId(I,D[S].components);if(xa)return xa}}};this.getTabTdByTabId=function(I){for(var D=0;D<ea.length;D++)if(void 0!=ea[D].object&&"xTab"==ea[D].object.constructor.name){var S=ea[D].object.getTabTdByTabId(I);if(S)return S}};this.getTabTdByObject=function(I){for(var D=0;D<ea.length;D++)if(ea[D].object&&ea[D].object==I){for(I=ea[D].container;I;I=I.parentElement){if("xTabContainer"==I.className&&
S&&S.dataset.tabId)return fa.getTabTdByTabId(S.dataset.tabId);var S=I}break}};this.getObjectByIndex=function(I){if(0<=I&&I<ea.length){var D=ea[I].object;return null!=D?D:ea[I]}};this.getObjectByElementId=function(I){for(var D=0;D<ea.length;D++)if(ea[D].container.id==I&&ea[D].object)return ea[D].object;if(da)for(D=0;D<da.length;D++){var S=da[D].page.getObjectByElementId(I);if(S)return S}};var ya=function(I,D,S,xa,Ba){for(var Ia=0;Ia<I.length;Ia++)I[Ia].object&&I[Ia].object.setVariablesValue?I[Ia].object.setVariablesValue(D,
S,Ba):I[Ia].components&&ya(I[Ia].components,D,S,xa,Ba)};this.setWidgetVariablesValue=function(I){for(var D=0;D<I.length;D++){var S=fa.getObjectByElementId(I[D].id);S&&S.setVariablesValue&&S.setVariablesValue(I[D].values)}};this.setWidgetOption=function(I){for(var D=0;D<I.length;D++){var S=fa.getObjectByElementId(I[D].id);S&&S.setOption&&S.setVariablesValue(I[D].option)}};this.setVariablesValue=function(I,D,S,xa){if(I&&(ya(ja,I,D,S,xa),da))for(i=0;i<da.length;i++)da[i].page.setVariablesValue(I,D,S,
xa)};this.setKeyGenius=function(I,D){null!=q&&ya(ja,I,null,null,void 0===D?!1:D)};this.onKeyDown=function(I){return hb&&hb&&hb.onKeyDown?(hb.onKeyDown(I),Pa=!0):!1};this.onKeyUp=function(I){return hb&&1==Pa&&(Pa=!1,hb&&hb.onKeyUp)?(hb.onKeyUp(I),!0):!1};this.getPopupMenu=function(I){for(var D=0;D<ea.length;D++)if(ea[D].object)if(ea[D].object.isMyCanvas&&ea[D].object.isMyCanvas(I.srcElement)){if(void 0!=ea[D].object.getPopupMenu){var S=ea[D].object.getPopupMenu(I);return{menu:S,object:ea[D].object}}}else if((ea[D].object.isPage||
"xPage"==ea[D].object.constructor.name)&&ea[D].object.getPopupMenu&&(S=ea[D].object.getPopupMenu(I)))return S};var bb,ib,gb=0,Bb=!1;"undefined"!=typeof GLink_client&&(Bb=!0);this.beginQuery=function(I){0==gb&&(bb=GUI?null:[],ib=[]);gb++};this.endQuery=function(I){gb--;if(0==gb){I=bb;var D=ib;ib=bb=null;I&&0<I.length&&"undefined"!=typeof send_wsQuerys&&(1==Bb?GLink_client.sharedInstance().send_wsQuerys(I):send_wsQuerys(I));D&&0<D.length&&"undefined"!=typeof send_httpQuerys&&(1==Bb?GLink_client.sharedInstance().send_httpQuerys(D):
send_httpQuerys(D))}};this.sendPauseQuery=function(I){if(bb){for(var D=0;D<bb.length;D++)if(bb[D].type&&"pause"==bb[D].type){bb[D].pauses.push({frameId:K,pageId:Q,index:I});break}D==bb.length&&bb.push({pauses:[{frameId:K,pageId:Q,index:I}],type:"pause"})}else 1==Bb?GLink_client.sharedInstance().sendMessage("pause",K,Q,I):sendMessage("pause",K,Q,I)};this.sendRestartQuery=function(I){if(bb){for(var D=0;D<bb.length;D++)if(bb[D].type&&"restart"==bb[D].type){bb[D].restarts.push({frameId:K,pageId:Q,index:I});
break}D==bb.length&&bb.push({restarts:[{frameId:K,pageId:Q,index:I}],type:"restart"})}else 1==Bb?GLink_client.sharedInstance().sendMessage("restart",K,Q,I):sendMessage("restart",K,Q,I)};this.sendCancelQuery=function(I,D){1==Bb?GLink_client.sharedInstance().sendMessage("cancel",K,Q,I,D):sendMessage("cancel",K,Q,I,D)};this.sendUpdate=function(I,D,S,xa){sendMessage("update",K,Q,I,D,S,xa)};this.sendInsert=function(I,D,S){sendMessage("insert",K,Q,I,D,null,S)};this.sendDelete=function(I,D,S){sendMessage("delete",
K,Q,I,D,null,S)};this.sendQuery=function(I,D,S){var xa;for(xa=0;xa<D.length&&(!D[xa]||1!=D[xa].queryStatus);xa++);if(xa!=D.length)if(bb)for(xa=0;xa<D.length;xa++){if(D[xa]&&1==D[xa].queryStatus&&D[xa].sql){var Ba=void 0,Ia=!1,Da=!0;if(0>=bb.length)Ba=0,Da=!0;else if(0<bb.length)for(Ba=0;Ba<bb.length;Ba++)if(bb[Ba].server==D[xa].server&&(Ia=!0),"query"==bb[Ba].type){Da=!1;break}1==Da&&(bb.push({server:D[xa].server,querys:[],type:"query"}),Ia=!0);1==Ia&&(null==bb[Ba].querys?bb[Ba].querys:bb[Ba].querys.push({frameId:K,
pageId:Q,index:I,queryInfo:D,callback:S}))}}else 1==Bb?GLink_client.sharedInstance().sendMessage("query",K,Q,I,D,S):sendMessage("query",K,Q,I,D,S)};this.sendHttpQuery=function(I,D,S,xa){if(!D[S]||1==D[S].queryStatus)if(ib){if(D[S]&&1==D[S].queryStatus){var Ba,Ia=!1;for(Ba=0;Ba<ib.length;Ba++)if(ib[Ba].http==D[S].http){Ia=!0;break}Ba==ib.length&&(ib.push({http:D[S].http,querys:[]}),Ia=!0);1==Ia&&ib[Ba].querys.push({frameId:K,pageId:Q,index:I,queryInfo:D,queryIndex:S,callback:xa})}}else 1==Bb?GLink_client.sharedInstance().postHttpMessage("query",
K,Q,I,D,S,xa):postHttpMessage("query",K,Q,I,D,S,xa)};this.sendSubmit=function(I,D,S){sendMessage("submit",K,Q,I,D,S)};this.sendHttpSubmit=function(I,D,S,xa){1==Bb?GLink_client.sharedInstance().postHttpMessage("submit",K,Q,I,D,S,xa):postHttpMessage("submit",K,Q,I,D,S,xa)};this.getQueryIndex=function(I){fa.queryIndexMap||(fa.queryIndexMap={});var D=Ma++;fa.queryIndexMap[D]=I;return D};this.getWidgetForQueryId=function(I){if(fa.queryIndexMap)return fa.queryIndexMap[I]};var Hb=function(I,D){for(var S=
0;S<I.length;S++){if(I[S].dom==D)return I[S];if(I[S].components){var xa=Hb(I[S].components);if(xa)return xa}}},nb,Pb=function(I,D,S){1==D.adjustParent&&(I.adjustParent=!0);I.style.zIndex=xZIndex.divider;""==I.style.width&&(I.style.width=(D.width?D.width:0)+"px");I.style.height&&(I.style.height="");if(D.dividerResize){I.style.cursor="col-resize";I.addEventListener("mousedown",C);"line"!=D.dividerResize&&(html='<div class="divider-slider" style="position:absolute;',void 0!=D.sliderStyle&&""!=D.sliderStyle?
html+=D.sliderStyle+'"':(html+="transform: rotate(45deg);width: 60px; height: 60px;",html=null!=D.sliderColor?html+("background-color:"+D.sliderColor+";"):html+"background-color:#555;","slider-left"==D.dividerResize?html+='top:50%;margin-top: -30px; margin-left:-10px;cursor:pointer"':"slider-right"==D.dividerResize&&(html+='top:50%;margin-top: -30px;margin-left:-40px;cursor:pointer"')),html+="></div>",I.innerHTML=html);if(D.dividerPresent){var xa=I.getAttribute("style");"shadow-left"==D.dividerPresent?
xa+="opacity:0.3;box-shadow:-3px 0px 3px;":"shadow-right"==D.dividerPresent&&(xa+="opacity:0.3;box-shadow:3px 0px 3px;");I.setAttribute("style",xa)}I.dataset.slider=D.dividerResize;I.dataset.minSize=D.dividerMinSize?D.dividerMinSize:D.width&&""!=D.width?parseFloat(D.width):0}I.style.overflow="hidden";I.style.top="0px";I.style.bottom="0px";null!=D.dividerColor&&(I.style.backgroundColor=D.dividerColor);D.left?I.style.left=D.left:D.right&&(I.style.right=D.right);D.maxLeft?I.maxLeft=D.maxLeft:D.maxRight&&
(I.maxRight=D.maxRight);D.autoAdsorbent&&(I.autoAdsorbent=D.autoAdsorbent);sa.callback_Resize&&(I.callback_Resize=sa.callback_Resize,I.components=S)},bc=function(I,D,S){1==D.adjustParent&&(I.adjustParent=!0);I.style.zIndex=xZIndex.divider;""==I.style.height&&(I.style.height=(D.height?D.height:0)+"px");I.style.width&&(I.style.width="");if(D.dividerResize){I.style.cursor="row-resize";I.addEventListener("mousedown",C);"line"!=D.dividerResize&&(html='<div class="divider-slider" style="position:absolute;',
void 0!=D.sliderStyle&&""!=D.sliderStyle?html+=D.sliderStyle+'"':(html+="transform: rotate(45deg);width: 60px; height: 60px;",html=null!=D.sliderColor?html+("background-color:"+D.sliderColor+";"):html+"background-color:#555;","slider-top"==D.dividerResize?html+='left:50%;margin-left: -30px;cursor:pointer"':"slider-bottom"==D.dividerResize&&(html+='left:50%;margin-left: -30px;margin-top:-40px;cursor:pointer"')),html+="></div>",I.innerHTML=html);if(D.dividerPresent){var xa=I.getAttribute("style");"shadow-top"==
D.dividerPresent?xa+="opacity:0.3;box-shadow:0px -3px 3px;cursor:pointer":"shadow-bottom"==D.dividerPresent&&(xa+="opacity:0.3;box-shadow:0px 3px 3px;cursor:pointer");I.setAttribute("style",xa)}I.dataset.slider=D.dividerResize;I.dataset.minSize=D.dividerMinSize?D.dividerMinSize:D.width&&""!=D.width?parseFloat(D.width):0}I.style.overflow="hidden";I.style.left="0px";I.style.right="0px";null!=D.dividerColor&&(I.style.backgroundColor=D.dividerColor);null!=D.top?(I.style.top=D.top,topOffset=parseFloat(D.top)):
null!=D.bottom?I.style.bottom=D.bottom:null!=D.topOffset&&(topOffset+=parseFloat(D.topOffset),I.style.top=topOffset+"px");sa.callback_Resize&&(I.callback_Resize=sa.callback_Resize,I.components=S)},Tb=function(I,D,S,xa){I.id=D.id;I.dom=D;if(S&&(I.left=S.left,I.leftOffset=S.leftOffset,I.top=S.top,I.topOffset=S.topOffset,I.width=S.width,I.height=S.height,I,I.right=S.right,I.rightOffset=S.rightOffset,I.bottom=S.bottom,I.bottomOffset=S.bottomOffset,I.element="divider-col"==S.class||"divider-row"==S.class?
S:S.element,S.scrollTop&&(I.scrollTop=S.scrollTop),S.layout&&(I.layout=xDeepCopy(S.layout)),S.bound&&(I.bound=xDeepCopy(S.bound)),S.groupId&&(I.groupId=S.groupId),S.option))if(null==I.option)I.option=S.option;else for(var Ba in S.option)I.option[Ba]=S.option[Ba];xa&&(I.object=xa)};this.calcPageSize=function(I,D){return E(ja)};var Xb=function(I,D,S){var xa=0;if(D&&D.activeTab)for(var Ba=0;Ba<D.components.length;Ba++)if(D.components[Ba].dom.id==D.activeTab){xa=Ba;break}if(1==I.length||D)for(Ba=0;Ba<
I.length;Ba++){if(D){if(Ba!=xa){null==I[Ba].layout&&(I[Ba].layout={});I[Ba].layout.show=!1;continue}I[Ba].layout&&0==I[Ba].layout.show&&(I[Ba].layout.show=!0)}V(I[Ba],S);I[Ba].components&&Xb(I[Ba].components,"tabs"==I[Ba].type?I[Ba]:null,S)}else for(Ba=0;Ba<I.length;Ba++){D=!1;if(I[Ba].layout)if(V(I[Ba],S),1==I[Ba].layout.autoHidden){if(0<Ba)if(null!=I[Ba-1].right||null!=I[Ba-1].bottom)Ba<I.length-1?(null==I[Ba+1].layout&&(I[Ba+1].layout={}),D=I[Ba+1].layout.autoHidden=!0):(null==I[Ba-1].layout&&
(I[Ba-1].layout={}),I[Ba-1].layout.autoHidden=!0);else if(null!=I[Ba-1].top||null!=I[Ba-1].left)Ba<I.length-1?(null==I[Ba+1].layout&&(I[Ba+1].layout={}),D=I[Ba+1].layout.autoHidden=!0):(null==I[Ba-1].layout&&(I[Ba-1].layout={}),I[Ba-1].layout.autoHidden=!0);I[Ba].layout.autoHidden=!0;D&&Ba++;continue}else if(I[Ba].layout&&0==I[Ba].layout.autoHidden){if(0<Ba)if(null!=I[Ba-1].right||null!=I[Ba-1].bottom)Ba<I.length-1?I[Ba+1].layout&&(I[Ba+1].layout.autoHidden=!1):I[Ba-1].layout&&(I[Ba-1].layout.autoHidden=
!1);else if(null!=I[Ba-1].top||null!=I[Ba-1].left)Ba<I.length-1?I[Ba+1].layout&&(I[Ba+1].layout.autoHidden=!1):I[Ba-1].layout&&(I[Ba-1].layout.autoHidden=!1);I[Ba].layout.autoHidden=null}I[Ba].components&&Xb(I[Ba].components,"tabs"==I[Ba].type?I[Ba]:null,S)}},ma=function(I,D){D.tabHeight=0;D.tabWidht=0;if("tabs"==I.type&&I.option&&I.option.tabPos)switch(I.option.tabPos){case "top":D.top+=I.option.height;D.height-=I.option.height;D.tabHeight=I.option.height;break;case "bottom":D.height-=I.option.height;
D.tabHeight=I.option.height;break;case "left":D.left+=I.option.width;D.width-=I.option.width;break;case "right":D.width-=I.option.width}I.layout&&(0<I.layout.initWidth&&(D.width=I.layout.initWidth),0<I.layout.initHeight&&(D.height=0==I.layout.show||1==I.layout.autoHidden?0:I.layout.initHeight),I.layout.maxHeight<D.height&&(D.height=I.layout.maxHeight),I.layout.minHeight>D.height&&(D.height=I.layout.minHeight));I.dom.style.marginLeft&&(D.width-=parseFloat(I.dom.style.marginLeft));I.dom.style.marginRight&&
(D.width-=parseFloat(I.dom.style.marginRight));I.dom.style.marginTop&&(D.height-=parseFloat(I.dom.style.marginTop));I.dom.style.marginBottom&&(D.height-=parseFloat(I.dom.style.marginBottom));return D};this.setScheme=function(I,D,S){S=void 0===S?!0:S;if(zb!=I||Jb!=D)if(zb=I,Jb=D,null!=zb&&(!sa||null==sa.useSystemScheme||0!=sa.useSystemScheme)){zb.xPage&&(D=ha.schemeName,I=zb.xPage[D]?zb.xPage[D]:zb.xPage.normal)&&(I.style&&(ha.style=getOptionStyle(ha.style.cssText,I.style)),I.backgroundColor&&(ha.style.backgroundColor=
I.backgroundColor),I.borderColor&&(ha.style.border="1px solid "+I.borderColor));for(I=0;I<ea.length;I++)if("divider-row"==ea[I].type||"divider-col"==ea[I].type){var xa=ea[I].container;D=zb.xSplit;D=ea[I].schemeName&&D[ea[I].schemeName]?D[ea[I].schemeName]:D.normal;D.dividerColor&&(xa.style.backgroundColor=D.dividerColor);D.sliderColor&&xa.children&&xa.children[0]&&(xa.children[0].style.backgroundColor=D.sliderColor);if(ea[I].container.style["box-shadow"]&&""!=ea[I].container.style["box-shadow"]){xa=
ea[I].container.style["box-shadow"].indexOf("#");if(0==xa)for(xa+=1;xa<ea[I].container.style["box-shadow"].length;xa++){if(" "==ea[I].container.style["box-shadow"][xa]){var Ba=ea[I].container.style["box-shadow"].substr(xa+1);break}}else if(0<xa)Ba=ea[I].container.style["box-shadow"].substr(0,xa);else if(xa=ea[I].container.style["box-shadow"].indexOf("rgb"),0==xa)for(xa+=1;xa<ea[I].container.style["box-shadow"].length;xa++){if(")"==ea[I].container.style["box-shadow"][xa]){Ba=ea[I].container.style["box-shadow"].substr(xa+
1);break}}else 0<xa&&(Ba=ea[I].container.style["box-shadow"].substr(0,xa));ea[I].container.style["box-shadow"]=Ba+" "+D.dividerShadowColor}}else if("div"==ea[I].type&&ea[I].schemeState){D=ea[I].container.getElementsByTagName("*");xa=zb.xDiv;if(!xa)break;for(var Ia=0;Ia<D.length;Ia++){var Da=D[Ia].getAttribute("schemeName");if(null!=Da){Da=xa[Da];for(var lb in Da)D[Ia].style[lb]=Da[lb]}}}for(I=0;I<ea.length;I++)0!=ea[I].useSystemScheme&&ea[I].object&&ea[I].object.setScheme&&(D=ea[I].schemeName,null==
D&&(D=Jb,null==D&&(D="normal")),ea[I].object.setScheme(zb,D,S));if(zb.xDom)for(var wb in zb.xDom)Ba=document.getElementById(wb),lb=zb.xDom[wb],Ba&&lb.backgroundColor&&(Ba.style.backgroundColor=lb.backgroundColor);if(da)for(I=0;I<da.length;I++)da[I].page.setScheme(zb,Jb,S)}};this.setOption=function(I,D,S){if(null!=sa&&(null==sa.systemScheme||0!=sa.systemScheme)&&D){var xa=D.normal;null!=ha.schemeName&&(xa=null!=D[ha.schemeName]?D[ha.schemeName]:D.normal);if("xPage"==I)xa.backgroundColor&&(ha.style.backgroundColor=
xa.backgroundColor);else if("xSplit"==I)for(var Ba=0;Ba<ea.length;Ba++){if("divider-row"==ea[Ba].type||"divider-col"==ea[Ba].type)if(I=ea[Ba].container,xa=ea[Ba].schemeName&&D[ea[Ba].schemeName]?D[ea[Ba].schemeName]:D.normal,xa.dividerColor&&(I.style.backgroundColor=xa.dividerColor),xa.sliderColor&&I.children&&I.children[0]&&(I.children[0].style.backgroundColor=xa.sliderColor),ea[Ba].container.style["box-shadow"]&&""!=ea[Ba].container.style["box-shadow"]){I=ea[Ba].container.style["box-shadow"].indexOf("#");
if(0==I)for(I+=1;I<ea[Ba].container.style["box-shadow"].length;I++){if(" "==ea[Ba].container.style["box-shadow"][I]){var Ia=ea[Ba].container.style["box-shadow"].substr(I+1);break}}else if(0<I)Ia=ea[Ba].container.style["box-shadow"].substr(0,I);else if(I=ea[Ba].container.style["box-shadow"].indexOf("rgb"),0==I)for(I+=1;I<ea[Ba].container.style["box-shadow"].length;I++){if(")"==ea[Ba].container.style["box-shadow"][I]){Ia=ea[Ba].container.style["box-shadow"].substr(I+1);break}}else 0<I&&(Ia=ea[Ba].container.style["box-shadow"].substr(0,
I));ea[Ba].container.style["box-shadow"]=Ia+" "+xa.dividerShadowColor}}else for(Ba=0;Ba<ea.length;Ba++)0!=ea[Ba].useSystemScheme&&ea[Ba].object&&ea[Ba].object.setOption&&ea[Ba].object.constructor.name==I&&(xa=ea[Ba].schemeName&&D[ea[Ba].schemeName]?D[ea[Ba].schemeName]:D.normal,ea[Ba].object.setOption(xa),S&&ea[Ba].object.setToolbarOption&&(xa=ea[Ba].toolbarSchemeName&&D[ea[Ba].toolbarSchemeName]?S[ea[Ba].toolbarSchemeName]:S.normal,ea[Ba].object.setToolbarOption(xa)))}};this.getWidgetByElementId=
function(I){for(var D=0;D<ea.length;D++){if(ea[D].container.id==I)return ea[D].object;if(ea[D].object&&"xPage"==ea[D].object.constructor.name){var S=ea[D].object.getWidgetByElementId(I);if(S)return S}}return null};this.getWidgetByGroupId=function(I,D){for(var S=0;S<ea.length;S++)if(ea[S].object&&"xTab"==ea[S].object.constructor.name){var xa=ea[S].object.getTabElementByGroupId(I,D);if(xa){for(;S<ea.length;S++)if(xa.children[0]==ea[S].container)return ea[S].object;break}}};this.getBoundVariableValue=
function(I){for(var D=0;D<ea.length;D++)if(ea[D].bounds)for(var S=0;S<ea[D].bounds.length;S++)if(ea[D].bounds[S].variable==I){var xa=ea[D].bounds[S].variable.split("."),Ba;"option"==xa[0]?ea[D].object.getOption&&(Ba=ea[D].object.getOption()):"variable"==xa[0]&&ea[D].object.getVariables&&(Ba=ea[D].object.getVariables());if(Ba){I=Ba;for(D=1;D<xa.length;D++)S=X(xa[D]),I=null==S?I[xa[D]]:I[S.index][S.key];return I}}};this.setPageBoundStatusForObject=function(I){if(1==rb)for(var D=0;D<ea.length;D++)if(ea[D].object==
I||null==I){for(I=0;I<ea.length;I++)D!=I&&ea[I].object&&"xToolbar"==ea[I].object.constructor.name&&ea[I].object.setBoundStatus();break}};this.boundMenuStatus=function(I){if(void 0!=I)for(var D,S=0;S<I.length;S++)if(I[S].subMenu)fa.boundMenuStatus(I[S].subMenu);else if(I[S].bound){D=I[S].bound;b:{for(var xa=D,Ba=0;Ba<ea.length;Ba++)if(ea[Ba].bounds)for(var Ia=0;Ia<ea[Ba].bounds.length;Ia++)if(ea[Ba].bounds[Ia].variable==xa.variable){var Da=ea[Ba].bounds[Ia].variable.split(".");var lb;"option"==Da[0]?
ea[Ba].object.getOption&&(lb=ea[Ba].object.getOption()):"variable"==Da[0]?ea[Ba].object.getVariables&&(lb=ea[Ba].object.getVariables()):lb=ea[Ba].object[xa.variable];if(lb){xa=lb;for(Ba=1;Ba<Da.length;Ba++)Ia=X(Da[Ba]),xa=null==Ia?xa[Da[Ba]]:xa[Ia.index][Ia.key];Da=xa;break b}}Da=void 0}D=Da&&aa(Da,D.value)?!0:!1;"check"==I[S].bound.type?I[S].check=1==D?"1":"0":I[S].radio=1==D?"1":"0"}};this.synchBoundValueFromWidgetById=function(I){var D=fa.getWidgetByElementId(I);D&&D.synchPageBoundValue(I)};var fc=
function(I,D){for(var S=0;S<I.length;S++){if(I[S].id==D)return I[S];if(I[S].components){var xa=fc(I[S].components,D);if(xa)return xa}}},wa=function(I,D,S,xa,Ba,Ia){if(I.components)for(var Da=0;Da<I.components.length;Da++)wa(I.components[Da],D,S,xa,Ba,Ia);else I.object&&I.object.synchBoundValue(D,S,xa,Ba,Ia)};this.synchBoundValue=function(I,D,S,xa,Ba){fa.beginQuery("synch bound value ("+I+")");var Ia;Cb=!1;var Da,lb;for(Ia=0;Ia<S.length;Ia++)if(S[Ia].bound&&S[Ia].bound.toTarget){null==Da&&(Da={});
var wb=S[Ia].bound.toTarget;if("Array"==wb.constructor.name)for(var Fa=0;Fa<wb.length;Fa++)null==Da[wb[Fa]]&&(Da[wb[Fa]]=[]),Da[wb[Fa]].push(S[Ia]);else null==Da[wb]&&(Da[wb]=[]),Da[wb].push(S[Ia])}else null==lb&&(lb=[]),lb.push(S[Ia]);if(Da)for(wb in Da)(Ia=fc(ja,wb))&&wa(Ia,I,D,Da[wb],xa,Ba);if(lb){var Nb;ja&&S&&(Nb=Ea(ja,I,D,lb,xa));for(Ia=0;Ia<ea.length;Ia++)ea[Ia].object&&ea[Ia].object!=xa&&"xTab"==ea[Ia].object.constructor.name&&ea[Ia].object.synchBoundValue&&ea[Ia].object.synchBoundValue(I,
D,lb,xa,Ba);for(Ia=0;Ia<ea.length;Ia++)ea[Ia].object&&ea[Ia].object!=xa&&"xToolbar"==ea[Ia].container.className&&ea[Ia].object.synchBoundValue&&ea[Ia].object.synchBoundValue(I,D,lb,xa,Ba);for(Ia=0;Ia<ea.length;Ia++)ea[Ia].object&&(ea[Ia].bounds&&ea[Ia].object!=xa?ea[Ia].object.synchBoundValue&&ea[Ia].object.synchBoundValue(I,D,lb,xa,Ba):"xPage"==ea[Ia].object.constructor.name&&ea[Ia].object.synchBoundValue(I,D,lb,xa,Ba));if(Db)for(Ia=0;Ia<Db.length;Ia++)Db[Ia]!=xa&&Db[Ia].synchBoundValue&&Db[Ia].synchBoundValue(I,
D,lb,xa,Ba);if(da)for(Ia=0;Ia<da.length;Ia++)da[Ia].page.synchBoundValue(I,D,lb,xa,Ba);Cb=null;1==Nb&&(fa.layout(),fa.redraw())}fa.endQuery("synch bound value ("+I+")")};var Ea=function(I,D,S,xa,Ba){var Ia;for(Ia=0;Ia<I.length;Ia++){if(I[Ia].bound)for(var Da in I[Ia].bound){var lb=null;if("switch"==Da){var wb=I[Ia].bound[Da];if(wb.value)lb=wb.value;else for(var Fa=0;Fa<xa.length;Fa++)if(xa[Fa]&&xa[Fa].bound.variable==wb.variable){lb=xa[Fa].value;break}for(var Nb=0;Nb<wb.map.length;Nb++)for(Fa=0;Fa<
wb.map[Nb].value.length;Fa++)if(lb==wb.map[Nb].value[Fa]){fa.setActiveTab(wb.map[Nb].id,D,S,xa,Ba);break}}else{if(1==I[Ia].bound[Da]||0==I[Ia].bound[Da])lb=I[Ia].bound[Da];else for(Fa=0;Fa<xa.length;Fa++)if(null!=xa[Fa]&&xa[Fa].bound.variable==I[Ia].bound[Da]){lb=xa[Fa].value;break}if(null!=lb)switch(Da){case "leftShow":for(Fa=Ia+1;Fa<I.length;Fa++)if("divider-col"==I[Fa].type){null==I[Ia].layout&&(I[Ia].layout={});null==I[Fa].layout&&(I[Fa].layout={});0==lb?(I[Ia].layout.show=!1,I[Fa].layout.show=
!1,I[Ia].dom.style.display="none",I[Fa].dom.style.display="none"):(I[Ia].layout.show=!0,I[Fa].layout.show=!0,I[Ia].dom.style.display="block",I[Fa].dom.style.display="block");var yb=!0;break}break;case "topShow":for(Fa=Ia+1;Fa<I.length;Fa++)if("divider-row"==I[Fa].type){null==I[Ia].layout&&(I[Ia].layout={});null==I[Fa].layout&&(I[Fa].layout={});0==lb?(I[Ia].layout.show=!1,I[Fa].layout.show=!1,I[Ia].dom.style.display="none",I[Fa].dom.style.display="none"):(I[Ia].layout.show=!0,I[Fa].layout.show=!0,
I[Ia].dom.style.display="block",I[Fa].dom.style.display="block");yb=!0;break}break;case "rightShow":for(Fa=Ia-1;0<=Fa;Fa--)if("divider-col"==I[Fa].type){null==I[Ia].layout&&(I[Ia].layout={});null==I[Fa].layout&&(I[Fa].layout={});0==lb?(I[Ia].layout.show=!1,I[Fa].layout.show=!1,I[Ia].dom.style.display="none",I[Fa].dom.style.display="none"):(I[Ia].layout.show=!0,I[Fa].layout.show=!0,I[Ia].dom.style.display="block",I[Fa].dom.style.display="block");yb=!0;break}break;case "bottomShow":for(Fa=Ia-1;0<=Fa;Fa--)if("divider-row"==
I[Fa].type){null==I[Ia].layout&&(I[Ia].layout={});null==I[Fa].layout&&(I[Fa].layout={});0==lb?(I[Ia].layout.show=!1,I[Fa].layout.show=!1,I[Ia].dom.style.display="none",I[Fa].dom.style.display="none"):(I[Ia].layout.show=!0,I[Fa].layout.show=!0,I[Ia].dom.style.display="block",I[Fa].dom.style.display="block");yb=!0;break}break;case "active":fa.setActiveTab(lb)}}}I[Ia].components&&1==Ea(I[Ia].components,D,S,xa,Ba)&&(yb=!0)}return yb};this.setViewBound=function(I,D,S){null==S&&(S=ja);if(S){var xa;for(xa=
0;xa<S.length;xa++){if(S[xa].dom.id==I){S[xa].bound=xDeepCopy(D);break}S[xa].components&&fa.setViewBound(I,D,S[xa].components)}}};this.modifyViewBound=function(I,D,S){null==S&&(S=ja);if(S){var xa;for(xa=0;xa<S.length;xa++){if(S[xa].dom.id==I){for(var Ba in D)S[xa].bound[Ba]=D[Ba];break}S[xa].components&&fa.modifyViewBound(I,D,S[xa].components)}}};this.setBoundWidgets=function(I){Db=I};this.onKeyDown=function(I){for(i=0;i<ea.length;i++)if(ea[i].object&&ea[i].object==hb&&ea[i].object.onKeyDown){ea[i].object.onKeyDown(I);
break}};this.onKeyUp=function(I){for(i=0;i<ea.length;i++)if(ea[i].object&&ea[i].object==hb&&ea[i].object.onKeyUp){ea[i].object.onKeyUp(I);break}};this.setPageFocusWidget=function(I){hb=I;fa.setFocus()};this.getPageFocusWidget=function(){return hb};this.setFocus=function(){ha.focus();if(xGlobal.focusWidget!=hb){var I=xGlobal.focusWidget;xGlobal.focusPage=fa;xGlobal.focusWidget=hb;xGlobal.focusWidget&&xGlobal.focusWidget.setFocus?xGlobal.focusWidget.setFocus():xGlobal.focusObject=null;I&&I.draw&&I.draw(!0);
hb&&hb.draw&&hb.draw(!0);var D=function(S){for(var xa=0;xa<S.length;xa++)S[xa].object&&"xTab"==S[xa].object.constructor.name?S[xa].object.setTabFocus(S[xa].components,hb):S[xa].components&&D(S[xa].components)};D(ja)}};this.doAction=function(I){for(var D=[],S=0,xa=0;xa<I.length;xa++)'"'==I[xa]||"'"==I[xa]||"`"==I[xa]||"("==I[xa]?xa=skipFlag(I,xa):";"==I[xa]&&(D[D.length]=I.substr(S,xa-S),S=xa+1);xa>S+1&&(D[D.length]=I.substr(S,xa-S));if(1<D.length)for(I=0;I<D.length;I++)S=D[I],S=S.replace(/\u21b5/g,
""),S=S.trim(),this.doAction(S);else{xa=I.split("(");I="";for(D=1;D<xa.length;D++)I+="("+xa[D];S=xa[0].split(".");if(1<S.length)if((xa=fa.getWidgetByElementId(S[0]))&&xa.doAction){var Ba="";for(D=1;D<S.length;D++)""!=Ba&&(Ba+="."),Ba+=S[D];xa.doAction(Ba+I)}else"page"==S[0]&&O.doAction(S[1]);else for(D=0;D<I.length;D++)if("("==I[D]){Ba=[];S=D+1;for(D++;D<I.length;D++){if('"'==I[D]||"'"==I[D]){var Ia=I[D];for(D++;D<I.length;D++)if(I[D]==Ia){Ba.push(I.substr(S+1,D-S-1));break}for(D++;D<I.length&&","!=
I[D]&&")"!=I[D];D++);}else for(D++;D<I.length;D++)if(","==I[D]||")"==I[D]){Ba.push(I.substr(S,D-S));break}S=D+1}switch(xa[0]){case "setActiveTab":fa.setActiveTab(Ba[0]);break;case "showTabByGroupId":fa.showTabByGroupId(Ba[0]);break;case "switchToTabByGroupId":fa.switchToTabByGroupId(Ba[0]);break;case "setActiveWidget":fa.setActiveWidget(Ba[0]);break;case "setFocusWidget":fa.setFocusWidget(Ba[0]);break;case "setFocusWidgetByGroupId":fa.setFocusWidgetByGroupId(Ba[0]);case "setViewBound":S=JSON.parse(Ba[1]);
fa.setViewBound(Ba[0],S);break;case "modifyViewBound":fa.modifyViewBound(Ba[0],JSON.parse(Ba[1]));break;case "setFocusObjectById":fa.setFocusObjectById(Ba[0]);break;case "goBackPage":fa.popSubPage();break;case "setActivePage":fa.setActivePage(Ba[0],Ba[1])}}}};var Va=function(I){if(I&&I[0]&&I[0].table){var D=I[0].table;I=D.info.name;if(xGlobal.permissionPackage[I]){xGlobal.permissionPackage[I].permissionPackage=D;D=xGlobal.permissionPackage[I].callback_list;for(var S=0;S<D.length;S++)D[S](xGlobal.permissionPackage[I].permissionPackage);
xGlobal.permissionPackage[I].callback_list=[]}}};this.getPermissionPackage=function(I,D){var S={name:I,http:httpGatWay+"user/tbUserInfo/checkAuthorityPackage",field:"aid, authName",condition:"apCode=['"+I+"']"},xa=S.field,Ba=S.condition;S.query={script:xa+";"+Ba,limit:[0,10],field:xa,condition:Ba,id:"packetName"};S.queryStatus=1;null==xGlobal.permissionPackage&&(xGlobal.permissionPackage={},xGlobal.permissionPackageCounter=0);null==xGlobal.permissionPackage[I]?(xGlobal.permissionPackage[I]={callback_list:[D],
permissionPackage:null},postHttpMessage("query","permission",Q,xGlobal.permissionPackageCounter++,[S],0,Va)):D&&(null==xGlobal.permissionPackage[I].permissionPackage?xGlobal.permissionPackage[I].callback_list[xGlobal.permissionPackage[I].callback_list.length]=D:D(xGlobal.permissionPackage[I].permissionPackage))};this.pushSubPage=function(I,D){function S(){Ia-=Da;6>Da&&(Da-=.5);0<Ia?(Ba.style.left=Ia+"px",setTimeout(S,10)):(Ba.style.left="0px",Ka(ja),xGlobal.refresh_pause=!1)}null==Oa&&(Oa=[]);D=Oa.length;
Oa[D]={id:I.id,page:new xPage(T,Y,fa,ha,I,null,null,null,"subPage")};I={left:ha.offsetLeft,top:ha.offsetTop,width:ha.offsetWidth,height:ha.offsetHeight};var xa=T.document.getElementById("mainBody");I.left=0;I.top=0;I.width=xa.offsetWidth;I.height=xa.offsetHeight;var Ba=Oa[D].page.getPageDiv();Ba.style.left=I.width+"px";Oa[D].page.beginQuery("pushSubPage");Oa[D].page.layout(I);Oa[D].page.setScheme(zb,Jb);Oa[D].page.show(!0);Oa[D].page.endQuery("pushSubPage");var Ia=I.width,Da=16;xGlobal.refresh_pause=
!0;setTimeout(S,5);return Oa[D].page};this.popSubPage=function(I){function D(){var xa=Oa.length-1,Ba=Oa[xa].page.getPageDiv();I+=S;6>S&&(S-=.5);I<ha.clientWidth?(Ba.style.left=I+"px",setTimeout(D,10)):Oa&&0<Oa.length&&(Oa[xa].page.destroy(),ha.style.left="0px",ha.removeChild(Ba),delete Oa[xa],1<xa?(Oa[xa-1].page.show(!0),Oa[xa-1].page.redraw(!0)):Oa=null,xGlobal.refresh_pause=!1)}this.show(!0);this.redraw(!0);null==I&&(I=0);var S=16;xGlobal.refresh_pause=!0;setTimeout(D,1)};this.shortCut=function(I){if(sa&&
sa.callback_onShortCut)return sa.callback_onShortCut(fa,I)};(function(I){ha=T.document.createElement("div");fa.setPageSet(sa,I);Z.appendChild(ha);ha.tabIndex=0;ha.style.outline="none"})(p);rb=!0;sa&&(this.pageDidCreate=a?a():null);this.destroy=function(){fb();ha.removeEventListener("mousemove",U);ha.removeEventListener("mouseup",G);ha.removeEventListener("mousedown",J);ha.removeEventListener("contextmenu",B);ha.removeEventListener("keydown",L);ha.removeEventListener("keyup",ba)};this.focus=function(){ha.tabIndex=
0;ha.style.outline="none";ha.focus()}};function xPageManager(a,b){var c=this,g,k,q;this.getPageSet=function(){return g};this.getFrameId=function(){return b?b.getFrameId():""};this.setPages=function(f,p){if(g)for(p=0;p<g.length;p++)g[p].page&&(g[p].page.destroy(),delete g[p].page);g=f;f=[];for(p=0;p<g.length;p++)f[p]={capture:g[p].capture,captureProperty:g[p].captureProperty,radioGroupId:1,boundTabId:g[p].id},0==p&&(f[p].pushed=!0);for(p=0;p<g.length;p++)g[p].option&&1==g[p].option.preCreate&&c.getPageById(g[p].id);c.setActivePage(g[0].id);
b.setPageTabStatus(g[0].id)};this.appointInitPageId=function(f){for(var p=0;p<g.length;p++)if(f==g[p].id&&null==g[p].page){g[p].page=new xPage(a,c,null,b.getMainBody(),g[p].set,g[p].option?g[p].option.acceptKeyGenius:null,{top:b.getBorderTopPos(),bottom:b.getBorderBottomPos(),left:b.getBorderLeftPos(),right:b.getBorderRightPos()},null,null,null,g[p]);k=g[p].page;c.setColorScheme();k.setFocus();k.show(!0);k.layout();k.redraw();g[p].page.hidden();break}};this.appointCreatPage=function(f,p,v){f=new xPage(f,
c,null,b.getMainBody(),p,null,v);f.show(!0);f.layout();f.redraw();f.redraw();return f};this.appointShowPage=function(f){for(var p=0;p<g.length;p++)if(f.id==g[p].id){c.setActivePage(f.id);return}g[g.length]=f;c.setActivePage(f.id)};this.setActivePage=function(f,p,v){for(var A=!1,r=0;r<g.length;r++){if(f==g[r].id){var u=b.getNavPage();if(u)for(var z in u)u[z].setVariablesValue({pageId:f},null,null),u[z].getDomList()[0].object.showCell(f),u[z].redraw(!0);break}g[r].routes&&(A=!0)}if(r==g.length&&!A)return!1;
for(r=0;r<g.length;r++)if(f==g[r].id){if(k&&k.getPageId()==f)return g[r].page&&g[r].set&&g[r].set.callback_onActive&&g[r].set.callback_onActive(g[r].page,p,v),!0;q=k;g[r].page?(g[r].page.beginQuery("active page"),g[r].page.show(!0),k=g[r].page,c.setColorScheme(),g[r].set&&g[r].set.callback_onActive&&g[r].set.callback_onActive(g[r].page,p,v),k.setFocus(),k.redraw(!0)):(g[r].page=new xPage(a,c,null,b.getMainBody(),g[r].set,g[r].option?g[r].option.acceptKeyGenius:null,{top:b.getBorderTopPos(),bottom:b.getBorderBottomPos(),
left:b.getBorderLeftPos(),right:b.getBorderRightPos()},p,null,null,g[r]),g[r].page.beginQuery("active page"),k=g[r].page,c.setColorScheme(),g[r].set&&(g[r].set.callback_onActive&&g[r].set.callback_onActive(g[r].page,p,v),g[r].set.callback_onPushMsg&&(g[r].page.callback_onPushMsg=g[r].set.callback_onPushMsg)),k.layout(),k.show(!0),k.setFocus());if(null==k.country&&null!=xLanguage.country||k.country!=xLanguage.country)k.country=xLanguage.country,xLanguage.changeLang(k.getPageDivId());globalPage.setActivePage(k)}else g[r].page&&
"hidden"!=g[r].page.pageState&&g[r].page.hidden(),g[r].routes&&g[r].routes.map(function(H,C){H.id==f&&H.page&&(k=H.page,c.setColorScheme(),globalPage.setActivePage(k))});k&&(null==xGlobal.refreshPageList&&(xGlobal.refreshPageList=[]),xGlobal.refreshPageList[xGlobal.refreshPageList.length]=k,k.layout(),k.redraw(),k.focus(),b.setPageTabStatus(f),k.endQuery("active page"));return!0};this.getActivePage=function(){return k};this.getPageById=function(f){for(var p=0;p<g.length;p++)if(f==g[p].id)return null==
g[p].page&&(g[p].page=new xPage(a,c,null,b.getMainBody(),g[p].set,g[p].option?g[p].option.acceptKeyGenius:null,{top:b.getBorderTopPos(),bottom:b.getBorderBottomPos(),left:b.getBorderLeftPos(),right:b.getBorderRightPos()},null,null,null,g[p])),g[p].page};this.activePageWithShortCut=function(f){for(var p=0;p<g.length;p++)if(g[p].shortcut&&g[p].shortcut==f)return g[p].page&&k==g[p].page?k.shortCut(f):c.setActivePage(g[p].id,null,"shortCut,"+f),g[p].page;if(k&&k==xGlobal.focusPage)for(p=0;p<g.length;p++)if(g[p].page&&
k==g[p].page){if(g[p].set.shortCut){for(var v=!1,A=0;A<g[p].set.shortCut.length;A++)g[p].set.shortCut[A]==f&&k.shortCut(f)&&(v=!0);return v?g[p].page:null}break}};this.doEscape=function(){if(k&&k==xGlobal.focusPage)for(var f=0;f<g.length;f++)if(g[f].page&&k==g[f].page){if(g[f].option&&1==g[f].option.escape){if(q)for(f=0;f<g.length;f++)if(g[f].page&&q==g[f].page){c.setActivePage(g[f].id);break}return!0}break}};this.getAcceptKeyGeniusPage=function(){for(var f=0;f<g.length;f++)if(g[f].option&&"default"==
g[f].option.acceptKeyGenius)return c.setActivePage(g[f].id,null,"keyGenius"),g[f].page};this.setColorScheme=function(){var f=xMe.getSystemScheme();f&&k.setScheme(f)};this.setActivePageWithBounds=function(f,p,v,A){"string"==typeof p&&(p=[p]);for(v=0;v<g.length;v++)if(g[v].id==p[0]){1==c.setActivePage(g[v].id)&&(p[1]?(c.getActivePage().setActiveTab(p[1]),A&&c.getActivePage().synchBoundValue(f,0,A,null)):c.getActivePage().synchBoundValue(f,0,A,null));break}};this.setScheme=function(f){if(xGlobal.refreshPageList)for(var p=
0;p<xGlobal.refreshPageList.length;p++)if(xGlobal.refreshPageList[p].pageType&&"AppHeader"==xGlobal.refreshPageList[p].pageType){xGlobal.refreshPageList[p].setScheme(f);break}for(p=0;p<g.length;p++)g[p].page&&g[p].page.setScheme(f)};this.setOption=function(f,p,v){if(p&&"xMainTab"!=f)for(var A=0;A<g.length;A++)g[A].page&&g[A].page.setOption(f,p,v)};this.setSplitLinePos=function(f){k&&k.setSplitLinePos(f)};this.layout=function(){if(k)k.layout();else for(var f=0;f<g.length;f++)g[f].page&&g[f].page.layout()};
this.redraw=function(f){if(k)k.redraw(f);else for(var p=0;p<g.length;p++)g[p].page&&g[p].page.redraw(f)};xGlobal.xPageManager=c};var popoverCount=0,popoverList=[];function doPopover(a){for(var b=0;b<popoverList.length;b++)popoverList[b]&&0==popoverList[b].isMouseOn(a)&&(popoverList[b].destroy(),b--)}
function xPopover(a,b,c,g,k,q){var f,p,v,A,r,u=this,z=void 0===q?!1:q;this.destroy=function(){v.deleteRule(0);a.removeChild(f);for(var H=0;H<popoverList.length;H++)if(popoverList[H]==u){delete popoverList[H];var C=[];for(H=0;H<popoverList.length;H++)popoverList[H]&&(C[C.length]=popoverList[H]);popoverList=C;break}};this.isMouseOn=function(H){return H.clientX>=f.offsetLeft&&H.clientX<=f.offsetLeft+f.offsetWidth&&H.clientY>=f.offsetTop&&H.clientY<=f.offsetTop+f.offsetHeight?!0:!1};this.setPos=function(H,
C){var U=a.clientWidth,J=H-g/2;J+g>U+6&&(J=U-g-6);6>J&&(J=6);f.style.left=J+"px";f.style.top=C-30-k+"px";f.style.width=g+"px";f.style.height=k+"px";v.deleteRule(0);C=A;C+="top: "+(k+6)+"px;";H=g/2+4-(J-(H-g/2));H>g-30&&(H=g-30);30>H&&(H=30);C+="left: "+H+"px;width:30px;height:30px;}";v.insertRule(C,0)};this.setObjectClassName=function(H){var C=b.document.createElement("canvas"),U=b.document.createAttribute("style");U.value="position:absolute;margin:0px;padding:0px";C.setAttributeNode(U);p.appendChild(C);
"xCalendar"==H&&(r=new xCalendar(window,null,C),r.draw())};this.setInnerHTML=function(H){p.innerHTML=H};this.show=function(){f.style.display="block"};this.hidden=function(){f.style.display="none"};this.isShow=function(){return"block"==f.style.display?!0:!1};(function(){popoverCount++;var H=document.createElement("style");document.head.appendChild(H);v=H.sheet;A=".xPopover"+popoverCount+":after{position: absolute; content: ''; color: #f00;";A+="background-color:#ededed;box-shadow: 4px 4px 8px -5px #555;border-width: 1px;border-style: solid;";
A+="border-color: transparent #888 #888  transparent;margin-left:-21px;margin-top:-21px;";A+="transform: rotate(45deg);";v.insertRule(A+"}",0);f=document.createElement("div");f.id="popover"+popoverCount;f.className="xPopover"+popoverCount;H=document.createAttribute("style");var C="position:absolute;display:none;background-color:#ededed;box-shadow: 0px 0px 6px #555;border:1px solid #888;display: table-cell;text-align: center;vertical-align: middle;font-family: Helvetica Neue;opacity: 0.95;border-radius: 8px;width:"+
(g+"px;");C+="height:"+k+"px;";C+="z-index:"+xZIndex.popover;H.value=C;f.setAttributeNode(H);p=document.createElement("div");H=document.createAttribute("style");H.value="position:absolute;top:6px;left:6px;right:6px;bottom:6px;padding:8px;overflow:auto;z-index:500";p.setAttributeNode(H);f.appendChild(p);a.appendChild(f);0==z&&(popoverList[popoverList.length]=u)})()};function xScroll(a,b,c,g,k){k=void 0===k?"apple":k;var q=this,f,p,v,A,r,u,z,H,C=void 0===g?"vertical":g,U,J,G,B,L=0,ba=0,N,E={scroller:{backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#444"}},V=0;this.destroy=function(){f.removeEventListener("mouseover",q.onMouseOver);f.parentNode.removeChild(f)};this.setOption=function(F){xCopyTo(F,E);"transparent"!=f.style.backgroundColor&&(f.style.backgroundColor=E.scroller.backgroundColor);E&&E.scroller&&E.scroller.sliderColor&&(p.style.backgroundColor=
E.scroller.sliderColor)};this.setPosition=function(F,M,X,aa){if(U!=F||J!=M||G!=X||B!=aa)U=F,J=M,G=X,B=aa,"vertical"==C?(void 0==U&&(f.style.width="8px"),f.style.right=G+"px",f.style.top=J+"px"):(void 0==J&&(f.style.height="8px"),f.style.left=U+"px",f.style.right=G+"px"),f.style.bottom=B+"px"};this.setSliderPos=function(F,M,X,aa){if(v!=F||A!=M||r!=X||u!=f.clientWidth||z!=f.clientHeight)if(1!=H||0!=(void 0===aa?!1:aa)||"vertical"!=C)v=V=F,A=M,r=X,r<=A?"none"!=f.style.display&&(f.style.display="none"):
("none"==f.style.display&&(f.style.display="block"),u=f.clientWidth,z=f.clientHeight,r<=A?f.style.display="none":(f.style.display="block",F="vertical"==C?A/r*z:A/r*u,16>F&&(F=16),"vertical"==C?(p.style.top=v/(r-A)*(z-F)+"px",parseFloat(p.style.top)+F>z&&(F=z-parseFloat(p.style.top)),p.style.height=F+"px"):(p.style.left=v/(r-A)*(u-F)+"px",parseFloat(p.style.left)+F>u&&(F=u-parseFloat(p.style.left)),p.style.width=F+"px")))};this.setSlideStatus=function(F){F?p.style.display="block":"apple"==k&&(p.style.display=
"none")};this.onMouseOver=function(F){"apple"==k&&(p.style.display="block");"vertical"==C?(f.style.width="14px",f.style.borderLeft="1px solid #888"):(f.style.height="14px",f.style.borderTop="1px solid #888");E&&E.scroller&&(f.style.backgroundColor=E.scroller.backgroundColor,p.style.backgroundColor=E.scroller.activeSliderColor);1!=F.buttons&&(H=!1);f.addEventListener("mouseout",q.onMouseOut);f.addEventListener("mousedown",q.onMouseDown);f.addEventListener("mouseup",q.onMouseUp);f.addEventListener("mousemove",
q.onMouseMove);f.addEventListener("mousewheel",q.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1)};this.onMouseOut=function(F){F.target==f||F.target==p?(0>=V||V>=r-A||F.offsetX>=p.clientWidth)&&c.setPos(q,V):c.setPos(q,V);1!=F.buttons&&(H=!1,"apple"==k&&(p.style.display="none"),"vertical"==C?f.style.width="8px":f.style.height="8px",f.style.backgroundColor="transparent",f.style.border="none",E&&E.scroller&&E.scroller.sliderColor&&(p.style.backgroundColor=E.scroller.sliderColor),f.removeEventListener("mouseout",
q.onMouseOut),f.removeEventListener("mousedown",q.onMouseDown),f.removeEventListener("mouseup",q.onMouseDown),f.removeEventListener("mousemove",q.onMouseMove),f.removeEventListener("mousewheel",q.onMouseWheel))};this.onMouseUp=function(F){c.setPos(q,V)};this.onMouseDown=function(F){if(F.srcElement==f)"vertical"==C?parseInt(p.style.top)>=F.offsetY?c.setPos(q,v-A):c.setPos(q,v+A):parseInt(p.style.left)>=F.offsetX?c.setPos(q,v-A):c.setPos(q,v+A),H=!1;else if(F.srcElement==p){H=!0;var M=getClientPos(p);
N="vertical"==C?getMouseY(F)-M.y:getMouseX(F)-M.x;xGlobal.ObjectMouseMove=q.onMouseMove;xGlobal.ObjectMouseOut=q.onMouseOut}};this.onMouseMove=function(F){if(1==F.buttons&&1==H)if("vertical"==C){if(ba!=F.offsetY){ba=F.offsetY;var M=parseFloat(p.style.height),X=getClientPos(f);F=getMouseY(F)-X.y-N;F=F/(f.clientHeight-M)*(r-A);F>r-A?F=r-A:0>F&&(F=0);V=F;q.setSliderPos(F,A,r,!0)}}else L!=F.offsetX&&(L=F.offsetX,M=parseFloat(p.style.width),X=getClientPos(f),F=getMouseX(F)-X.x-N,F=F/(f.clientWidth-M)*
(r-A),F>r-A&&(F=r-A),c.setPos(q,F))};this.onMouseWheel=function(F){c.onMouseWheel(F)};(function(F){f=a.document.createElement("div");var M=a.document.createAttribute("style");M.value="display:none;position:absolute;background-color:transparent;opacity:0.45;transition:0.3s";f.setAttributeNode(M);F.appendChild(f);"vertical"==C?q.setPosition(void 0,0,1,0):q.setPosition(0,void 0,0,1);F="apple"==k?"none":"block";p=a.document.createElement("div");M=a.document.createAttribute("style");M.value="position:absolute;top:0px;bottom:0px;left:0px;right:0px;background-color:"+
E.scroller.sliderColor+";border-radius:8px;display:"+F+";";p.setAttributeNode(M);f.appendChild(p);f.addEventListener("mouseover",q.onMouseOver)})(b)};var xSubCenter=function(){this.ServerPower=[];this.LocalPower=[];this.power={server:this.ServerPower,local:this.LocalPower}};xSubCenter.getInstance=function(){this.instance||(this.instance=new xSubCenter);return this.instance};
xSubCenter.prototype.setServerPower=function(a,b,c){b={name:a,sql:b,source:c};for(var g=0;g<this.ServerPower.length;g++){if(this.ServerPower[g].name==a&&"SDK"!=c){console.error("\u7981\u6b62\u4f7f\u7528\u91cd\u590d\u7684\u670d\u52a1\u540d\u79f0\uff01 name: "+a);return}if(this.ServerPower[g].name==a&&"SDK"==c){this.ServerPower[g]=b;return}}this.ServerPower.push(b)};
xSubCenter.prototype.setLocalPower=function(a,b,c){var g={serverName:a,subPage:b,source:c};if("string"==typeof b&&"all"==b.toLocaleLowerCase()){b=[];for(var k=xGlobal.xPageManager.getPageSet(),q=0;q<k.length;q++)b.push(k[q].id);g.subPage=b}for(b=0;b<this.LocalPower.length;b++){if(this.LocalPower[b].serverName==a&&"SDK"!=c){console.error("\u7981\u6b62\u91cd\u590d\u8ba2\u9605\u8fdc\u7a0b\u670d\u52a1\uff0c\u8bf7\u914d\u7f6e\u63a5\u6536\u7684PageId\uff01 serverName: "+a);return}if(this.LocalPower[b].serverName==
a&&"SDK"==c){this.LocalPower[b]=g;return}}this.LocalPower.push(g)};xSubCenter.prototype.open=function(){if(0>=this.ServerPower.length||0>=this.LocalPower.length)return!1;this.linkDbserver();return!0};
xSubCenter.prototype.linkDbserver=function(){for(var a=0;a<this.ServerPower.length;a++){var b={limit:this.ServerPower[a].source&&"SDK"==this.ServerPower[a].source?null:[-1,1],script:this.ServerPower[a].sql,globalSub:!0};null==this.ServerPower[a].queryStatus&&(this.ServerPower[a].queryStatus=1,this.ServerPower[a].query=b,sendMessage("query",xGlobal.frame.getFrameId(),"subCenter",a,this.ServerPower,this.reciveMessage),this.ServerPower[a].queryStatus=0)}};
xSubCenter.prototype.reciveMessage=function(a,b){var c=a.result;if(c){a=c[0].table;var g=a.gid;null==g&&(g=c[0].gid);c=a.field;g=g.name;for(var k=xSubCenter.getInstance(),q=0;q<k.LocalPower.length;q++)if(k.LocalPower[q].serverName==g){if(null==k.LocalPower[q].connect&&null==k.LocalPower[q].source){k.LocalPower[q].connect=!0;k.LocalPower[q].field=c;break}else if(null==k.LocalPower[q].connect&&"SDK"==k.LocalPower[q].source){b=xDeepCopy(b);for(var f=0;f<b.length;f++){var p=b[f];if(null!=p&&p.gid.name==
g){a=p.table;k.LocalPower[q].field=a.field;break}}}null==c&&(a.field=k.LocalPower[q].field);k.proxyMessage(g,a,k.LocalPower[q].subPage);break}}};xSubCenter.prototype.proxyMessage=function(a,b,c){if("function"==typeof c)c({source:a,pushData:b});else for(var g=xGlobal.xPageManager.getPageSet(),k=0;k<c.length;k++)for(var q=c[k],f=0;f<g.length;f++)if(g[f].id==q&&g[f].page&&g[f].page.callback_onPushMsg){g[f].page.callback_onPushMsg({target:g[f].page,source:a,pushData:b});break}};function xTab(a,b,c,g,k,q,f){function p(){if(null!=V.elements&&0!=V.elements.length){var O,K=0;for(O=0;O<V.elements.length;O++)X[O]={capture:V.elements[O].name,captureProperty:V.elements[O].nameProperty,radioGroupId:1,boundTabId:V.elements[O].id,viewStyle:V.elements[O].viewStyle,action:V.elements[O].action},V.elements[O].icon&&(X[O].icon=V.elements[O].icon),V.activeTab&&V.activeTab==V.elements[O].id&&(K=O);X[K].pushed=!0;if(V.additionButtons&&0<V.additionButtons.length){X[O++]={capture:"---"};for(var Z=
0;Z<V.additionButtons.length;Z++)X[O++]=xDeepCopy(V.additionButtons[Z])}O="";switch(V.option.tabPos){case "left":O="position:absolute;bottom:0px;left:0px;top:0px;width:"+V.option.width+"px;";break;case "right":O="position:absolute;bottom:0px;right:0px;top:0px;width:"+V.option.width+"px;";break;case "bottom":O="position:absolute;bottom:0px;left:0px;right:0px;height:"+V.option.height+"px;";break;case "top":O="position:absolute;top:0px;left:0px;right:0px;height:"+V.option.height+"px;";break;default:O=
"position:absolute;top:0px;left:0px;right:0px;height:24px;display:none;"}V.option.style&&(O+=V.option.style);J.style=O;M=new xToolbar(r,u,J,V.option,{buttons:X},null,A);F.autoPlay&&1==F.autoPlay.play&&(L=setInterval(A.startAutoPlay,F.autoPlay.pause));F.preButton&&F.preButton.style&&(O=document.createElement("div"),O.style=F.preButton.style,F.preButton.innerHTML&&(O.innerHTML=F.preButton.innerHTML),O.onclick=function(){for(var pa=A.getToolbar().buttonsDiv,oa=0;oa<pa.length;oa++)if("toolbarButton active"==
pa[oa].className){0==oa?A.setActiveTab(pa[pa.length-1]):A.setActiveTab(pa[oa-1]);break}},J.appendChild(O));F.nextButton&&F.nextButton.style&&(O=document.createElement("div"),O.style=F.nextButton.style,F.nextButton.innerHTML&&(O.innerHTML=F.nextButton.innerHTML),O.onclick=function(){for(var pa=A.getToolbar().buttonsDiv,oa=0;oa<pa.length;oa++)if("toolbarButton active"==pa[oa].className){oa==pa.length-1?A.setActiveTab(pa[0]):A.setActiveTab(pa[oa+1]);break}},J.appendChild(O));O=0;for(Z=M.buttonsDiv[0];Z;Z=
Z.nextElementSibling,O++)if(O==K){U!=Z&&(U=H);H=Z;break}}}function v(O){L=setInterval(function(){var K=[];K[0]=parseInt(B[0].style.left);K[1]=parseInt(B[1].style.left);var Z=F.autoPlay.step;Z=K[0]<O?Z:-Z;K[0]+=Z;K[1]+=Z;Math.abs(K[0]-O)>Math.abs(Z)?(B[0].style.left=K[0]+"px",B[1].style.left=K[1]+"px"):(clearInterval(L),B[0].style.display="none",B[1].style.left="0px",A.setActiveTab(A.timeNextButton),A.timeIn=!1)},F.autoPlay.step)}var A=this,r=a,u=b,z,H,C,U,J=r.document.createElement("div");c.appendChild(J);
var G,B=[],L,ba={},N,E=0,V=xDeepCopy(g);null==V.option&&(V.option={tabPos:"top",height:38});var F=V.option,M,X=[],aa=null!=g.query?xDeepCopy(g.query):null,ia=null!=g.init?xDeepCopy(g.init):null;this.callInfo=q;this.callbacks=f;this.queryIndex=this.callbacks.getQueryIndex(this);this.getToolbar=function(){return M};this.destroy=function(){};this.setTabFocus=function(O,K){for(var Z=0;Z<O.length;Z++)if(O[Z].id==H.dataset.tabid){if(O[Z].object&&O[Z].object==K)return C=K,!0;if(O[Z].components)for(var pa=
0;pa<O[Z].components.length;pa++)if(O[Z].components[pa].object&&(O[Z].components[pa].object==K||"xTab"==O[Z].components[pa].object.constructor.name&&1==O[Z].components[pa].object.setTabFocus(O[Z].components[pa].components,K)))return!0;break}return!1};this.setFocus=function(){if(C&&C.setFocus)C.setFocus();else for(var O=0;O<g.elements.length;O++)if(g.elements[O].id==H.dataset.tabid){g.elements[O].object&&"xTab"==g.elements[O].object.constructor.name&&g.elements[O].object.setFocus();break}};this.getTabByTabId=
function(O){for(var K=M.buttonsDiv[0];K;K=K.nextElementSibling)if(K.dataset.tabid==O)return A};this.getTabTdByTabId=function(O){for(var K=M.buttonsDiv[0];K;K=K.nextElementSibling)if(K.dataset.tabid==O)return K};this.query=function(){if(null!=aa)for(var O=0;O<aa.length;O++)if(null!=aa[O]){var K;if(aa[O].http){var Z=replaceVariablesValue(aa[O].field,ba,N),pa=replaceVariablesValue(aa[O].condition,ba,N);var oa=Z+";"+pa;null!=aa[O].query&&oa==aa[O].query.script||E++;null!=F.fixedSize&&(K=[0,F.fixedSize]);
aa[O].query={script:oa,limit:K,field:Z,condition:pa,id:E};A.callbacks.sendHttpQuery(A.queryIndex,aa,O,A.setTable)}}};this.setTable=function(O,K){if(O&&O[0]&&O[0].table&&(N=xDeepCopy(O),O=N[0].table,(K=null!=O.info?O.info:null)&&"row"==K.rank)){ia;O=getTableMuRowForMap(O);g.elements=[];for(K=0;K<O.length;K++){var Z={};Z.id=ia.id+K;Z.name=ia.name;Z.innerHTML=ia.model;Z.dataMap=O[K];Z.calls=ia.calls;for(var pa in O[K]){var oa=O[K][pa];Z.innerHTML=Z.innerHTML.replace("{{ "+pa+" }}",oa);Z.innerHTML=Z.innerHTML.replace("{{ "+
pa+" }}",oa)}g.elements.push(Z)}V.elements=g.elements}p();A.beginCreateTab()};var fa=function(O){for(var K=0;K<c.children[1].children.length;K++)if(c.children[1].children[K].id==O)return c.children[1].children[K]};this.getTabElementByGroupId=function(O,K){if(K=V)for(var Z=0;Z<K.elements.length;Z++)if(K.elements[Z].groupId==O)return fa(K.elements[Z].id)};this.showTabByGroupId=function(O){var K=V;if(K)for(var Z=0;Z<K.elements.length;Z++)if(K.elements[Z].groupId==O)for(var pa=0,oa=M.buttonsDiv[0];oa;oa=
oa.nextElementSibling,pa++)if(pa==Z){A.setActiveTab(oa);break}};this.switchToTabById=function(O){var K=V;if(K)for(var Z=0;Z<K.elements.length;Z++)if(K.elements[Z].id==O)for(var pa=0,oa=M.buttonsDiv[0];oa;oa=oa.nextElementSibling,pa++)if(pa==Z){A.setActiveTab(oa,!1);break}};this.switchToTabByGroupId=function(O){var K=V;if(K)for(var Z=0;Z<K.elements.length;Z++)if(K.elements[Z].groupId==O)for(var pa=0,oa=M.buttonsDiv[0];oa;oa=oa.nextElementSibling,pa++)if(pa==Z){A.setActiveTab(oa,"block"==c.style.display?
!0:!1);break}};var T=function(O,K,Z,pa,oa){if(null!=O)if("tabs"!=O.type&&O.object)O.object.synchBoundValue&&pa&&O.object.synchBoundValue(K,Z,pa,oa),O.object.show&&O.object.show(),O.object.draw&&O.object.draw(!0);else if(O.components)if("tabs"==O.type){for(var Aa=0,ta=0;ta<O.components.length;ta++)if(O.activeTab==O.components[ta].dom.id){Aa=ta;break}T(O.components[Aa],K,Z,pa,oa)}else for(ta=0;ta<O.components.length;ta++)T(O.components[ta],K,Z,pa,oa)},Y=function(O){if("tabs"!=O.type&&O.object)O.object.hidden&&
O.object.hidden();else if(O.components)for(var K=0;K<O.components.length;K++)Y(O.components[K])};this.getPreActiveTabElementId=function(){var O=G.components;if(U)for(var K=0;K<O.length;K++)if(O[K].dom.id==U.dataset.tabid)return O[K].dom.id};this.getActiveTabElementId=function(){var O=G.components;if(null==H)return O[0].dom.id;for(var K=0;K<O.length;K++)if(O[K].dom.id==H.dataset.tabid)return O[K].dom.id};this.setActiveTab=function(O,K,Z,pa,oa,Aa){K=void 0===K?!0:K;Z=void 0===Z?null:Z;pa=void 0===pa?
null:pa;oa=void 0===oa?null:oa;Aa=void 0===Aa?null:Aa;for(var ta=0,Q=M.buttonsDiv[0];Q;Q=Q.nextElementSibling,ta++){if(ta>=V.elements.length)return;if(Q==O)break}U!=O&&(U=H);H=O;M.setActiveButton(O);Q=G.components;for(ta=0;ta<Q.length;ta++)Q[ta].dom.id!=O.dataset.tabid&&("none"!=Q[ta].dom.style.display&&(Q[ta].dom.style.display="none"),1==K&&Y(Q[ta]));for(ta=0;ta<Q.length;ta++)if(Q[ta].dom.id==H.dataset.tabid){"block"!=Q[ta].dom.style.display&&(G.activeTab=Q[ta].dom.id,Q[ta].dom.style.display="block");
1==K&&(T(Q[ta],Z,pa,oa,Aa),u&&"none"!=u.getPageDiv().style.display&&(u.layout(),u.show()));V.callback_activeTab&&V.callback_activeTab({tabsOption:V,option:F,variables:ba,target:A,page:u},H.dataset.tabid);break}A.timeIn=!1};this.setScheme=function(O,K){O.xTab&&O.xTab[K]&&A.setOption(O.xTab[K])};this.setOption=function(O){M&&M.setOption(O)};this.setBounds=function(O){z=O};this.synchBoundValue=function(O,K,Z,pa){if(pa!=A&&void 0!=z&&0<z.length)for(O=0;O<Z.length;O++)if(null!=Z[O]&&null!=Z[O].bound)for(K=
0;K<z.length;K++)if(z[K]&&(null==z[K].type||"receive"==z[K].type||"synch"==z[K].type)&&z[K].id==Z[O].bound.id){pa=!1;if("Array"==z[K].value.constructor.name)for(var oa=0;oa<z[K].value.length;oa++){if(z[K].value[oa]==Z[O].value){pa=!0;break}}else z[K].value==Z[O].value&&(pa=!0);if(1==pa){(K=A.getTabTdByTabId(z[K].tabId))&&this.setActiveTab(K);break}}};this.startAutoPlay=function(){if(1!=A.timeIn&&0!=c.clientWidth){A.timeIn=!0;var O=c.offsetWidth,K=M.getActiveButton();U!=K&&(U=K);H=K;for(K=M.buttonsDiv[0];K;K=
K.nextElementSibling)if(H==K){K=K.nextElementSibling;A.timeNextButton=null==K?M.buttonsDiv[0]:K;break}B[0]=fa(H.dataset.tabid);B[1]=fa(A.timeNextButton.dataset.tabid);B[0].style.left="0px";B[0].style.width=O+"px";B[1].style.left=""+O+"px";B[1].style.width=O+"px";B[1].style.display="block";v(-O)}};this.setTabDomList=function(O){G=O};null!=aa&&null!=ia?A.query():p()};var skipFlag=function(a,b){if('"'==a[b])for(b++;b<a.length&&'"'!=a[b];b++);else if("'"==a[b])for(b++;b<a.length&&"'"!=a[b];b++);else if("`"==a[b])for(b++;b<a.length&&"`"!=a[b];b++);else if("("==a[b])for(b++;b<a.length;b++)if('"'==a[b]||"'"==a[b]||"`"==a[b])b=skipFlag(a,b);else if("("==a[b])b=skipFlag(a,b);else if(")"==a[b])break;return b},setCallback_VariablesValue=function(a,b,c){var g=0;if(a)for(var k=0;k<a.length;k++)if(a[k].callback_variables){var q=a[k].variable.split(".");1==q.length&&(q[1]=
q[0]);b[q[1]]=a[k].callback_variables(b,c);g++}return g};
function xGrid(a,b,c,g,k,q,f,p,v){function A(Ya){var fb="";"undefined"!=typeof GSession&&(fb=GSession.sharedInstance().getHttpUrl());fb||(fb=localStorage.getItem("G_localHttp"));null!=Ya&&Ya.http&&(Ya.http.startsWith("http://")||Ya.http.startsWith("https://"))||(Ya.query.server=fb+Ya.http)}function r(Ya,fb){Ya=Ya.toLowerCase();if(ba.field&&ba.data)for(var $a=0;$a<ba.field.length;$a++)if(Ya==ba.field[$a][0].toLowerCase())return"row"==ba.info.rank?{type:ba.field[$a][1],value:ba.data[fb][$a],flags:null!=
ba.flags&&ba.flags[Ya]?ba.flags[Ya][fb]:void 0,status:null!=ba.dataStatus?ba.dataStatus[fb]:void 0}:{type:ba.field[$a][1],value:ba.data[$a][fb],flags:null!=ba.flags&&ba.flags[Ya]?ba.flags[Ya][fb]:void 0,status:null!=ba.dataStatus?ba.dataStatus[fb]:void 0};return{type:"c",value:void 0}}var u=this;this.page=b;var z,H=null,C=xDeepCopy(g),U=null!=k?xDeepCopy(k):null;if(q&&v)for(var J in q)for(var G in v)if(J==G){q[J]=v[G];break}this.callInfo=f;this.callbacks=p;this.queryIndex;this.callbacks&&(this.queryIndex=
this.callbacks.getQueryIndex(this));var B,L=0,ba,N,E=!0,V=!1,F=!1,M,X,aa,ia,fa,T,Y=0,O=0,K,Z,pa,oa,Aa,ta,Q,sa,ra,la,Na,Wa,na=!1,ha={wheelOnFocus:!1,isFocus:!1,isClick:!1,isWheel:!1,isKeyDown:!1,isCapture:!1,markPreActiveButton:!1,canMouseSelected:!1,gradient:[],backgroundColor:"#141414",borderLeft:"none",borderRight:"none",borderTop:"none",borderBottom:"none",color:"#fff",colors:["rgba(255,255,255,1)","#FF503B","#72FFBE","#fff"],cursor:{backgroundColor:"transparent"},fontFamily:xGlobal.systemFont,
fontSize:12,lineHeight:28,dragable:!1,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,enableFocus:!0,setDefaultFocusObject:!1,keyEnenterTab:!0,tabKey:"",enterOrder:[],tabOrder:[],closePosition:{right:16,height:9,width:9,top:4},scroller:{scrollerV:"hidden",scrollerH:"hidden",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"}},ea,ja=!0,da=0,Oa=0,Pa;this.preActiveButton;var hb=0,Ma,rb,zb,Jb,Cb,Db;this.setGid=function(Ya,fb,$a){Jb=Ya;Cb=fb;Db=$a};this.setQueryIndex=function(Ya){this.queryIndex=
Ya};this.setActionTarget=function(Ya,fb,$a){Ma=Ya;rb=fb;zb=$a};this.getPage=function(){return this.page};this.getCanvas=function(){return c};this.getContext=function(){return z};this.getActionTarget=function(){return{target:Ma,targetButton:rb,targetPage:zb}};this.getOption=function(){return ha};this.getObjectClassName=function(){return"xGrid"};this.getObjectId=function(){return c.id};this.getQueryInfo=function(){return C};this.getQueryData=function(){return B};this.getVariables=function(){return q};
this.getParentCanvas=function(){return c};this.getParentDiv=function(){return c};this.getGrid=function(){return N};this.submit=function(Ya){"String"==Ya.constructor.name&&(Ya=[{submit:Ya,callback:null}]);for(var fb={},$a=0;$a<Ya.length;fb={$jscomp$loop$prop$state$526:fb.$jscomp$loop$prop$state$526},$a++){var za=getSubmissionContents(U,Ya[$a].submit);fb.$jscomp$loop$prop$state$526=!0;za.map(function(Ka){return function(ab){if(ab.beforeSubmit){var W=Sb();W.query=ab;1!=ab.beforeSubmit(W)&&(Ka.$jscomp$loop$prop$state$526=
!1)}}}(fb));if(0==fb.$jscomp$loop$prop$state$526)break;1==Ya[$a].query&&(Ya[$a].callback=u.reload);u.sendSubmit(za,Ya[$a].callback)}};this.sendSubmit=function(Ya,fb,$a){for(var za=0;za<Ya.length;za++)if(null!=Ya[za])if(Ya[za].sql){var Ka=replaceVariablesValue(Ya[za].sql,q,B);var ab;Ya[za].server&&q&&q[Ya[za].server.slice(10)]&&(ab=q[Ya[za].server.slice(10)]);Ya[za].query={script:Ka,limit:void 0,server:ab};u.callbacks.sendSubmit(u.queryIndex,Ya,fb)}else if(Ya[za].http){var W=replaceVariablesValue(Ya[za].field,
q,B,$a),Ca=replaceVariablesValue(Ya[za].condition,q,B,$a);Ka=W+";"+Ca;null!=Ya[za].query&&Ka==Ya[za].query.script||L++;Ya[za].query={script:Ka,limit:null,field:W,condition:Ca,id:L,server:Ya[za].http};u.callbacks.sendHttpSubmit(u.queryIndex,Ya,za,fb)}};this.getCellObjectById=function(Ya){if(M)return M.getCellObjectById(Ya)};this.getCellById=function(Ya){if(M)return M.getCellById(Ya)};this.clickCell=function(Ya){M&&M.click(Ya)};this.setCallInfo=function(Ya){f=Ya};this.onDblClick=function(Ya){if(f&&
f.doDblClick){Ya=f.doDblClick;for(var fb=0;fb<Ya.length;fb++)Ya[fb].action?u.doAction(Ya[fb].action):Ya[fb].callback&&Ya[fb].callback(Sb())}else if(M)M.onDblClick(Ya)};this.onClick=function(Ya){ha.doClick&&ha.doClick(u)};var cb=function(Ya){xGlobal.focusObject=Ya;xGlobal.focuePage=this.page;1==ha.isFocus&&(Ya=xGlobal.focusWidget,xGlobal.focusWidget=u,Ya&&Ya!=u&&Ya.draw&&Ya.draw(!0))};this.isInCloseButton=function(Ya,fb){return Na&&isInRect(Ya,fb,la)&&Wa?!0:!1};this.onMouseDown=function(Ya){if(xGlobal.selectedCell||
Aa){Aa=null;var fb=xGlobal.selectedCell;xGlobal.selectedCell=null;fb&&fb.getParent&&(fb=fb.getParent())&&fb.draw&&fb.draw(!0)}if(1!=ha.isFocus&&1!=ha.isClick&&1!=ha.isCapture)xGlobal.focusObject=null;else if(null==M)xGlobal.focusObject=null;else{if((fb=M.onMouseDown(Ya))&&fb!=X){if(X&&X.onUnFocus)X.onUnFocus();X&&"xSaftButton"==X.constructor.name&&"xSaftButton"==fb.constructor.name&&1==ha.markPreActiveButton&&1==X.setToPreActiveButton(fb)&&(u.preActiveButton=X);X=fb}if(X){if(X.onMouseDown)X.onMouseDown(Ya,
xGlobal.focusObject==X?!0:!1);1==ha.enableFocus&&(xGlobal.focusObject=X);1==ha.isFocus&&u.page.setPageFocusWidget(u);u.draw(!0)}else ha.isCapture&&(null==Pa&&(Pa={}),Pa.moveX=Ya.clientX,Pa.moveY=Ya.clientY,fb=u.page.getPageDiv(),Pa.moveLeft=parseFloat(fb.style.left),Pa.moveTop=parseFloat(fb.style.top),xGlobal.ObjectMouseMove=u.onMouseMove);1==ha.canMouseSelected&&(Aa={left:Ya.offsetX,top:Ya.offsetY,width:0,height:0})}};this.setFocusObjectById=function(Ya){(Ya=M.getFocusObjectFromId(Ya))&&X&&"xSaftButton"==
X.constructor.name&&"xSaftButton"==Ya.constructor.name&&1==ha.markPreActiveButton&&1==X.setToPreActiveButton(Ya)&&(u.preActiveButton=X);X=Ya;u.draw(!0)};this.onMouseUp=function(Ya){if(1==ha.isFocus||1==ha.isClick||1==ha.isCapture)Na&&isInRect(Ya.offsetX,Ya.offsetY,la)&&Wa&&Wa({target:u}),null!=M&&(M.onMouseUp(Ya)==X&&X?X.onMouseUp&&(1==ha.enableFocus&&cb(X),X.onMouseUp(Ya),u.draw(!0)):X&&X.onMouseUp&&(X.onMouseUp(Ya),u.draw(!0)))};this.onMouseOut=function(Ya){ha.callback_mouseOut&&ha.callback_mouseOut(Ya,
Sb());var fb=!1;if(xGlobal.mouseOverObject){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(Ya,u);xGlobal.mouseOverObject=null;fb=!0}Na&&2==Na&&(Na=1,fb=!0);fb&&u.draw(!0)};this.onMouseMove=function(Ya){if(1==ha.isFocus||1==ha.isClick||1==ha.isCapture){ha.callback_mouseOver&&ha.callback_mouseOver(Ya,Sb());if(M){var fb=!1;if(1==Ya.buttons&&1==ha.canMouseSelected&&Aa)Aa.width=Ya.offsetX-Aa.left,Aa.height=Ya.offsetY-Aa.top,fb=!0;else{var $a=M.onMouseMove(Ya);
if(xGlobal.mouseOverObject!=$a){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(Ya,u);if((xGlobal.mouseOverObject=$a)&&$a.onMouseMove)$a.onMouseMove(Ya);fb=!0}if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseMove&&null!=xGlobal.mouseOverObject.autoDraw)xGlobal.mouseOverObject.onMouseMove(Ya)}}if(Na)if(la&&isInRect(Ya.offsetX,Ya.offsetY,la))1==Na&&(Na=2,fb=!0);else if(2==Na)Na=1,fb=!0;else if(ha.isCapture&&Pa&&void 0!=Pa.moveX&&1==Ya.buttons){$a=
Pa.moveLeft+(Ya.clientX-Pa.moveX);Ya=Pa.moveTop+(Ya.clientY-Pa.moveY);var za=u.page.getPageDiv(),Ka=parseFloat(za.style.height),ab=parseFloat(za.style.width),W=a.document.getElementById("mainBody"),Ca=getScreenXY(W);W=-Ca.x;Ca=-Ca.y;$a+ab>window.innerWidth+W-3&&($a=window.innerWidth+W-ab-3);Ya+Ka>window.innerHeight+Ca-3&&(Ya=window.innerHeight+Ca-Ka-3);$a<W+3&&($a=W+3);Ya<Ca+3&&(Ya=Ca+3);za.style.left=$a+"px";za.style.top=Ya+"px"}fb&&u.draw(!0)}};var Ab=function(Ya){var fb;ha.tabKey&&""!=ha.tabKey?
Ya.key==ha.tabKey.slice(0,Ya.key.length)?fb=!1:1<ha.tabKey.indexOf(Ya.key)&&(fb=!0):13==Ya.keyCode?fb=!0:9==Ya.keyCode&&(fb=1==Ya.shiftKey?!1:!0);0==ha.keyEnenterTab&&(fb=null);if(null!=fb){var $a=X;if(ha.enterOrder&&0<ha.enterOrder.length){if(13==Ya.keyCode)var za=ha.enterOrder;else 9==Ya.keyCode&&(za=ha.tabOrder);if(za)if(null==X){var Ka=za[0];X=M.getFocusObjectFromId(Ka)}else if(Ka=M.getIdFromFocusObject(X))for(var ab=0;ab<za.length;ab++){if(za[ab]==Ka){1==Ya.shiftKey||0==fb?Ka=0==ab?za[za.length-
1]:za[ab-1]:0!=fb&&(Ka=ab==za.length-1?za[0]:za[ab+1]);X=M.getFocusObjectFromId(Ka);break}}else za=null}if($a&&$a.onUnFocus)$a.onUnFocus();null==za&&(searchFocusObject=null,0==fb?(X=M.getPrevFoucsObject(X),null==X&&(X=M.getLastFoucsObject())):(X=M.getNextFoucsObject(X),null==X&&(X=M.getFirstFoucsObject())));if($a!=X&&$a&&$a.onSetFocus)$a.onSetFocus(!1,1==ha.enableFocus?!1:!0);X&&X.setSelected&&X.setSelected(0);if(X&&X.onSetFocus)X.onSetFocus(!0,1==ha.enableFocus?!1:!0);1==ha.enableFocus&&cb(X);return!0}};
this.onKeyUp=function(Ya){return 1!=ha.isFocus&&1!=ha.isKeyDown?!1:X&&X.onKeyUp&&ia==X?(ret=X.onKeyUp(Ya),u.draw(!0),!0):!1};this.onKeyDown=function(Ya){if(1!=ha.isFocus&&1!=ha.isKeyDown)return!1;if(X&&X.onKeyDown){if(ia==X&&27==Ya.keyCode)X.onKeyDown(Ya),ia=null;else{ia=X;if(1==X.onKeyDown(Ya))return u.draw(!0),!0;if(1!=Ab(Ya))return!1}u.draw(!0);return!0}return 1==Ab(Ya)?!0:!1};var Gb=function(Ya,fb){0<Ya.length&&(null==u.page?globalPage.getActivePage().synchBoundValue("init",1,Ya,fb?null:u):Ma&&
Ma.synchBoundValue?Ma.page?Ma.page.synchBoundValue("init",1,Ya,fb?null:u):Ma.synchBoundValue("init",1,Ya,fb?null:u):u.page.synchBoundValue("init",1,Ya,fb?null:u))};this.destroy=function(){u.callbacks&&u.callbacks.sendCancelQuery(u.queryIndex);M&&M.destroy();c.width=c.height=1;z=null};this.showCell=function(Ya){M&&M.showCell(Ya);N.vBox&&u.modifyCellById(Ya,{hidden:!1})};this.hideCell=function(Ya){M&&M.hideCell(Ya);N.vBox&&u.modifyCellById(Ya,{hidden:!0})};this.show=function(){1!=H&&(null!=H&&u.callbacks&&
u.callbacks.sendRestartQuery(u.queryIndex),H=!0,M&&M.show(),u.draw())};this.hidden=function(Ya){0!=H&&(H=!1,1!=Ya&&u.callbacks&&u.callbacks.sendPauseQuery(u.queryIndex),M&&M.hidden(),da=Oa=c.width=c.height=1)};this.isShow=function(){return H};this.query=function(Ya){if(!(null==C||C&&0<C.length&&C[0].callback_object||!u.callbacks&&!Jb)&&(1==Ya||0!=H&&null!=c&&0!=c.offsetHeight&&0!=c.offsetWidth)){Ya=!1;for(var fb=0,$a={$jscomp$loop$prop$i$277$530:0};$a.$jscomp$loop$prop$i$277$530<C.length;$a={$jscomp$loop$prop$i$277$530:$a.$jscomp$loop$prop$i$277$530,
$jscomp$loop$prop$_time$529:$a.$jscomp$loop$prop$_time$529,$jscomp$loop$prop$_time$278$531:$a.$jscomp$loop$prop$_time$278$531},$a.$jscomp$loop$prop$i$277$530++)if(null==C[$a.$jscomp$loop$prop$i$277$530]||C[$a.$jscomp$loop$prop$i$277$530].queryStatus)C[$a.$jscomp$loop$prop$i$277$530]&&1==C[$a.$jscomp$loop$prop$i$277$530].queryStatus&&(C[$a.$jscomp$loop$prop$i$277$530].queryStatus=2);else{var za=C[$a.$jscomp$loop$prop$i$277$530].limit,Ka;if(C[$a.$jscomp$loop$prop$i$277$530].server&&""!=C[$a.$jscomp$loop$prop$i$277$530].server){var ab=
C[$a.$jscomp$loop$prop$i$277$530].server.slice(10);q&&q[ab]&&""!=q[ab]&&(Ka=q[ab])}var W;C[$a.$jscomp$loop$prop$i$277$530].http&&(W=replaceVariablesValue(C[$a.$jscomp$loop$prop$i$277$530].http,q,B));if(C[$a.$jscomp$loop$prop$i$277$530].sql&&(null==W||"http"!=W.substr(0,4).toLowerCase()))ab=replaceVariablesValue(C[$a.$jscomp$loop$prop$i$277$530].sql,q,B),""==ab||0<=ab.indexOf("{{ ")||C[$a.$jscomp$loop$prop$i$277$530].server&&null==Ka||!(null==C[$a.$jscomp$loop$prop$i$277$530].query||C[$a.$jscomp$loop$prop$i$277$530].query.script!=
ab||C[$a.$jscomp$loop$prop$i$277$530].server&&C[$a.$jscomp$loop$prop$i$277$530].query.server!=Ka)||(Ya=isSynBound=!0,C[$a.$jscomp$loop$prop$i$277$530].queryStatus=1,C[$a.$jscomp$loop$prop$i$277$530].query={script:ab,server:Ka,limit:za});else if(C[$a.$jscomp$loop$prop$i$277$530].http&&W&&""!=W){C[$a.$jscomp$loop$prop$i$277$530].field&&replaceVariablesValue(C[$a.$jscomp$loop$prop$i$277$530].field,q,B);var Ca=C[$a.$jscomp$loop$prop$i$277$530].script?replaceVariablesValue(C[$a.$jscomp$loop$prop$i$277$530].script,
q,B):replaceVariablesValue(C[$a.$jscomp$loop$prop$i$277$530].condition,q,B);null==Ca||""==Ca||0<=Ca.indexOf("{{ ")||(ab=";"+Ca,null!=C[$a.$jscomp$loop$prop$i$277$530].query&&ab==C[$a.$jscomp$loop$prop$i$277$530].query.script)||(null!=C[$a.$jscomp$loop$prop$i$277$530].query&&ab==C[$a.$jscomp$loop$prop$i$277$530].query.script||L++,C[$a.$jscomp$loop$prop$i$277$530].query={script:ab,limit:za,field:"",condition:Ca,id:L,server:W},C[$a.$jscomp$loop$prop$i$277$530].queryStatus=1,u.callbacks?"undefined"!=
typeof GLink_client?($a.$jscomp$loop$prop$_time$529=void 0,za="","undefined"!=typeof GSession&&(za=GSession.sharedInstance().getHttpUrl()),za||(za=localStorage.getItem("G_localHttp")),za?(A(C[$a.$jscomp$loop$prop$i$277$530]),u.callbacks.sendHttpQuery(u.queryIndex,C,$a.$jscomp$loop$prop$i$277$530,u.setTable),clearInterval($a.$jscomp$loop$prop$_time$529)):$a.$jscomp$loop$prop$_time$529=setInterval(function(ca){return function(){var ya="";"undefined"!=typeof GSession&&(ya=GSession.sharedInstance().getHttpUrl());
ya||(ya=localStorage.getItem("G_localHttp"));ya&&(A(C[ca.$jscomp$loop$prop$i$277$530]),u.callbacks.sendHttpQuery(u.queryIndex,C,ca.$jscomp$loop$prop$i$277$530,u.setTable),clearInterval(ca.$jscomp$loop$prop$_time$529))}}($a),1)):u.callbacks.sendHttpQuery(u.queryIndex,C,$a.$jscomp$loop$prop$i$277$530,u.setTable):($a.$jscomp$loop$prop$_time$278$531=void 0,za="","undefined"!=typeof GSession&&(za=GSession.sharedInstance().getHttpUrl()),za||(za=localStorage.getItem("G_localHttp")),za?(A(C[$a.$jscomp$loop$prop$i$277$530]),
GLink_client.sharedInstance().postHttpMessage("query",Jb,Cb,Db,C,$a.$jscomp$loop$prop$i$277$530,u.setTable),clearInterval($a.$jscomp$loop$prop$_time$278$531)):$a.$jscomp$loop$prop$_time$278$531=setInterval(function(ca){return function(){var ya="";"undefined"!=typeof GSession&&(ya=GSession.sharedInstance().getHttpUrl());ya||(ya=localStorage.getItem("G_localHttp"));ya&&(A(C[ca.$jscomp$loop$prop$i$277$530]),GLink_client.sharedInstance().postHttpMessage("query",Jb,Cb,Db,C,ca.$jscomp$loop$prop$i$277$530,
u.setTable),clearInterval(ca.$jscomp$loop$prop$_time$278$531))}}($a),1)),_condition=Ca,fb++)}}Ya&&(u.callbacks?u.callbacks.sendQuery(u.queryIndex,C,u.setTable):GLink_client.sharedInstance().sendMessage("query",Jb,Cb,Db,C,u.setTable),_condition=Ca,fb++);if(0<fb)return!0}};this.setVariablesValue=function(Ya,fb,$a){var za=!1;if(null!=q){if("Object"==Ya.constructor.name&&null==fb)for(var Ka in Ya)q[Ka]!=Ya[Ka]&&(q[Ka]=Ya[Ka],za=!0);else{for(Ka in q)for(var ab=0;ab<Ya.length;ab++)if(Ya[ab][0]==Ka){eval("variables."+
Ka+'="'+fb[ab]+'"');za=!0;break}if(ea)for(Ya=0;Ya<ea.length;Ya++)if((null==ea[Ya].type||"synch"==ea[Ya].type||"send"==ea[Ya].type)&&(null==ea[Ya].trigger||ea[Ya].trigger&&ea[Ya].trigger==trigger)&&(ea[Ya].field&&(Ka=ea[Ya].field),Ka&&q&&0==za&&B))for(fb=0;fb<B.length;fb++)if(null!=B[fb]&&null!=B[fb].table){var W=B[fb].table;if(W.field&&W.data&&0<W.data.length)for(ab=0;ab<W.field.length;ab++)if(W.field[ab][0].toLowerCase()==Ka.toLocaleLowerCase()){var Ca;"row"==W.info.rank?1==W.data.length&&(Ca=W.data[0][ab]):
W.data&&1==W.data[ab].length&&(Ca=W.data[ab][0]);if(null!=Ca)for(var ca in q)if(ca==ea[Ya].id){q[ca]=Ca;break}break}}}null!=$a&&(za=$a);1==za&&(u.query(),u.synchPageBoundValue("",0,u))}};this.getVariables=function(){return q};var Ra=function(Ya,fb){for(var $a=0;$a<fb.length;$a++)if(fb[$a].bound.id==Ya)return!0;return!1};this.synchPageBoundValue=function(Ya,fb,$a){if(null!=ea){for(var za=[],Ka=0,ab=0;ab<ea.length;ab++)if((null==ea[ab].type||"synch"==ea[ab].type||"send"==ea[ab].type)&&(null==ea[ab].trigger||
ea[ab].trigger&&ea[ab].trigger==$a)){var W;ea[ab].variable?"variables."==ea[ab].variable.slice(0,10)&&(W=ea[ab].variable.slice(10)):ea[ab].field&&(W=ea[ab].field);if(W&&q){var Ca=!1;null!=q[W]&&0==Ra(ea[ab].id,za)&&(za[Ka++]={bound:ea[ab],value:q[W]},Ca=!0);if(0==Ca&&B)for(Ca=0;Ca<B.length;Ca++)if(null!=B[Ca]&&null!=B[Ca].table){var ca=B[Ca].table;if(ca.field&&ca.data&&0<ca.data.length)for(var ya=0;ya<ca.field.length;ya++)if(ca.field[ya][0]==W){0==Ra(ea[ab].id,za)&&("row"==ca.info.rank?za[Ka++]={bound:ea[ab],
value:ca.data[0][ya]}:za[Ka++]={bound:ea[ab],value:ca.data[ya][0]});break}}}}0<za.length&&(null==u.page?globalPage.getActivePage().synchBoundValue(Ya,fb+1,za,u):u.page.synchBoundValue(Ya,fb+1,za,u))}};this.synchBoundValue=function(Ya,fb,$a,za){if(za!=u&&void 0!=ea&&0<ea.length&&$a&&0<$a.length){fb=Ya=!1;for(za=0;za<$a.length;za++)if(null!=$a[za]&&null!=$a[za].bound)for(var Ka=0;Ka<ea.length;Ka++)if((null==ea[Ka].type||"synch"==ea[Ka].type||"receive"==ea[Ka].type)&&ea[Ka].id==$a[za].bound.id&&ea[Ka].variable==
$a[za].bound.variable){if("variables."==$a[za].bound.variable.slice(0,10)){Ka=$a[za].bound.variable.slice(10);try{if(q[Ka]!=$a[za].value&&(q[Ka]=$a[za].value,Ya=!0,C))for(var ab=0;ab<C.length;ab++)C[ab].server&&C[ab].server=="variables."+Ka&&C[ab].query&&C[ab].query.server!=q[Ka]&&(C[ab].queryStatus=null,C[ab].query=null,B&&B[ab]&&(B[ab]=null,fb=!0))}catch(W){console.log(W)}}else if($a[za].bound.variable)try{eval($a[za].bound.variable)!=$a[za].value&&(ab=$a[za].bound.variable+"=boundValue[i].value",
eval(ab),Ya=!0)}catch(W){console.log(W)}break}1==Ya&&(setCallback_VariablesValue(ea,q,Sb()),fb&&M&&(M.setValue(0,B,q),Fb(void 0,E)),u.reCreateGrid(1),u.query(),fb&&this.draw(!0))}};var Sb=function(){B&&B[0]&&B[0].table&&B[0].table.data&&B[0].table.data.length&&u.setVariablesValue(B[0].table.field,B[0].table.data);return{option:ha,variables:q,target:u,page:u.page,callbacks:{openWidthBrowseCenter:function_openWithBrowseCenter}}};this.setTable=function(Ya,fb,$a){if(1==$a)u.query();else if(1!=H&&C)for(var za=
0;za<C.length;za++)if(C[za]){C[za].queryStatus=null;return}B=xDeepCopy(Ya);if(C&&B)for(za=0;za<C.length;za++)C[za]&&B[za]&&B[za].updateCounter!=C[za].updateCounter&&(C[za].updateCounter=B[za].updateCounter,C[za].callback_onMessage&&C[za].callback_onMessage(B[za],fb,$a,Sb(),B),C[za].queryStatus=null,hb=xGlobal.refreshCounter);ba=B&&B[0]?B[0].table:null;N&&N.vBox&&isDynamicGrid(N.vBox)&&Ob(!1);M&&(M.setValue(0,B,q),Fb(void 0,E));E=!1;ja=!0;u.query();u.draw();sa=!1};this.reCreateGrid=function(Ya){1==
Ya?N&&N.vBox&&isDynamicGrid(N.vBox)?Ob():M?M.setValue(0,B,q):Ob():Ob();u.draw(!0)};u.modifyCellById=function(Ya,fb){if(N&&N.vBox)for(var $a=N.vBox,za=0;za<$a.length;za++)for(var Ka=0;Ka<$a[za].length;Ka++)if($a[za][Ka].id==Ya){$a[za][Ka]=Object.assign({},$a[za][Ka],fb);Ob();break}};var Ub=function(Ya,fb,$a){if("Array"==Ya.constructor.name)for(var za=0;za<Ya.length;za++){if(Ub(Ya[za],fb,$a))return!0}else if(!Ya.create||!Ya.create.title)if(Ya.optionGroup){if(Ya.define)for(var Ka in Ya.define)for(za=
0;za<Ya.define.length;za++)Ub(Ya.define[za],fb,$a)}else if((Ya.title&&Ya.title==fb.title||Ya.variable&&Ya.variable==fb.variable)&&Ya.type==fb.type&&Ya.option&&fb.option&&Ya.option.type==fb.option.type)return Ya.title=$a.title,Ya.action=$a.action?$a.action:null,Ya.bounds=$a.bounds?$a.bounds:null,Ya.option.actionBounds=$a.option.actionBounds?$a.option.actionBounds:null,!0;return!1};this.modifyGrid=function(Ya,fb){X=null;Ub(N.vBox,Ya,fb);ha.created&&ha.created()};var Ob=function(Ya){Ya=void 0===Ya?!0:
Ya;if(N&&N.vBox){var fb=createGrid(N.vBox,B,q);fb=makeCells(fb,"hBox",u.draw);null==M||1!=M.isSame(fb)?(fb=new xCells(u,fb,"vBox",q,ea,Gb),null==M?(M=fb,M.setValue(-1,B,q)):(fb.setValue(-1,B,q),X=fb.migrateCellObjects(M,X),M&&M.destroy(),M=fb,M.setValue(0,B,q))):M.setValue(0,B,q);var $a,za=function(Ka){if(null!=Ka)for(var ab=0;ab<Ka.length;ab++)if(null!=Ka[ab].defaultBoundIndex&&Ka[ab].defaultBoundIndex==ab){if(Ka[ab].bounds)for(var W=0;W<Ka[ab].bounds.length;W++)for(var Ca=0;Ca<ea.length;Ca++)if(ea[Ca].variable==
Ka[ab].bounds[W].variable){Ca=ea[Ca].variable.split(".");for(var ca in q)if(ca==Ca[1]&&(null==q[ca]||""==q[ca])){q[ca]=Ka[ab].bounds[W].tableData;$a=!0;break}break}break}else Ka[ab].objects&&za(Ka[ab].objects.getCells())};M&&(za(M.getCells()),$a&&u.synchPageBoundValue("",0,u));ta&&Q&&u.setScheme(ta,Q,Ya)}};this.getGridCells=function(){return M};this.clearGridCells=function(){M=null};this.setGrid=function(Ya,fb){N=xDeepCopy(Ya);a:{if(N&&N.vBox)for(Ya=N.vBox,fb=0;fb<Ya.length;fb++)for(var $a=0;$a<Ya[fb].length;$a++)if(Ya[fb][$a].type&&
Ya[fb][$a].type.startsWith("xDraw"))for(var za=drawMemory.getInstance().registList,Ka=0;Ka<za.length;Ka++)if(za[Ka].name==Ya[fb][$a].type&&za[Ka].param&&0==za[Ka].param.autoDraw){Ya=!1;break a}Ya=!0}ra=Ya;Ob();1==ha.setDefaultFocusObject&&(aa=!1)};this.setPos=function(Ya,fb){Ya==fa?(O=fb,0>O&&(O=0),O>oa-pa&&(O=oa-pa)):Ya==T&&(Ya?(Y=fb,0>Y&&(Y=0),Y>Z-K&&(Y=Z-K)):Y=O=0);u.draw(!0)};this.onMouseWheel=function(Ya){if(1!=ha.wheelOnFocus||xGlobal.focusWidget==u)if(M&&1==ha.isWheel){var fb=M.onMouseMove(Ya);
xGlobal.mouseOverObject!=fb&&(xGlobal.mouseOverObject=fb);if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseWheel)xGlobal.mouseOverObject.onMouseWheel(Ya);u.draw(!0)}else 0!=Ya.deltaY?pa<oa?(O+=Ya.deltaY,O+pa>oa&&(O=oa-pa),0>O&&(O=0),u.draw(!0),1!=xGlobal.passiveSupported&&Ya.preventDefault()):0!=O&&(O=0,u.draw(!0),1!=xGlobal.passiveSupported&&Ya.preventDefault()):0!=Ya.deltaX&&(K<Z?(Y+=Ya.deltaX,Y>Z-K&&(Y=Z-K),0>Y&&(Y=0),u.draw(!0),1!=xGlobal.passiveSupported&&Ya.preventDefault()):0!=Y&&
(Y=0,u.draw(!0),1!=xGlobal.passiveSupported&&Ya.preventDefault()))};this.reload=function(){u.clearQueryData();u.query()};this.clearFocus=function(){X=null};this.clearQueryData=function(){var Ya=C;-1!=Ya.indexOf("{{")&&(Ya=replaceVariablesValue(Ya,q,B));for(var fb=0;fb<Ya.length;fb++)Ya[fb]&&Ya[fb].query&&(Ya[fb].query.script=null);null!=c.linkList&&(c.linkList=null);ba=B=null;clearFlag=!0};this.resize=function(){void 0!=Z&&void 0!=oa&&ha.resize&&"function"==typeof ha.resize&&ha.resize(Z,oa,u)};this.setScheme=
function(Ya,fb,$a){$a=void 0===$a?!0:$a;Ya&&fb&&(ta=Ya,Q=fb);var za;ta.xGrid&&(za=ta.xGrid[Q]?ta.xGrid[Q]:ta.xGrid.normal);za&&(xCopyAllTo(za,ha),fa&&fa.setOption(za),T&&T.setOption(za),M&&ta.xControl&&M.setScheme(ta.xControl,Q),u.draw(!0),sa=!1,1==$a&&H&&u.draw(!0))};this.setOption=function(Ya){xCopyAllTo(Ya,ha);ha.borderColor&&0<ha.border&&(ha.borderLeft=ha.borderRight=ha.borderTop=ha.borderBottom=ha.border+" solid "+ha.borderColor);0<Ya.borderRadius&&(c.style.borderRadius=Ya.borderRadius+"px");
"show"==ha.scroller.scrollerV?(null==fa&&(fa=new xScroll(a,c.parentElement,u,"vertical"),fa.setPosition(void 0,ha.rowHeight,1,0),0==F&&(F=!0,c.addEventListener("mousewheel",u.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1))),fa.setOption(Ya)):(fa&&0==F&&(F=!0,c.addEventListener("mousewheel",u.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1)),fa=null);"show"==ha.scroller.scrollerH?(null==T&&(T=new xScroll(a,c.parentElement,u,"horizontal"),T.setPosition(0,void 0,0,0,0)),T.setOption(Ya)):
T=null;1==ha.isFocus||1==ha.isClick||1==ha.isWheel?(0==V&&(V=!0,c.addEventListener("mousedown",u.onMouseDown),c.addEventListener("mouseup",u.onMouseUp),c.addEventListener("mousemove",u.onMouseMove),c.addEventListener("mouseout",u.onMouseOut),c.addEventListener("dblclick",u.onDblClick),c.addEventListener("click",u.onClick)),1==ha.isWheel&&0==F&&(F=!0,c.addEventListener("mousewheel",u.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1))):1==V||1==F?(F=V=!1,c.removeEventListener("mousedown",u.onMouseDown),
c.removeEventListener("mouseup",u.onMouseUp),c.removeEventListener("mousemove",u.onMouseMove),c.removeEventListener("mouseout",u.onMouseOut),c.removeEventListener("mousewheel",u.onMouseWheel),c.removeEventListener("dblclick",u.onDblClick),c.removeEventListener("click",u.onClick)):ha.isCapture&&(c.addEventListener("mousedown",u.onMouseDown),c.addEventListener("mouseup",u.onMouseUp),c.addEventListener("mousemove",u.onMouseMove),c.addEventListener("mouseout",u.onMouseOut));ha.callback_onClose&&u.showCloseButton(ha.callback_onClose);
B&&Fb(void 0,!0)};this.setSubmitList=function(Ya){U=xDeepCopy(Ya)};this.setBounds=function(Ya){ea=Ya};this.getBounds=function(){return ea};var Fb=function(Ya,fb){fb=void 0===fb?!1:fb;try{if(Ya){for(var $a=0;$a<Ya.length;$a++)if("Array"==Ya[$a].constructor.name)Fb(Ya[$a],fb);else if(Ya[$a].title)1==fb&&Ya[$a].setOption(ha),Ya[$a].setValue({value:Ya[$a].title,type:"c"});else if(Ya[$a].field){1==fb&&Ya[$a].setOption(ha);if("Array"==Ya[$a].field.constructor.name){var za=[];for(var Ka=0;Ka<Ya[$a].field.length;Ka++)za[Ka]=
r(Ya[$a].field[Ka],0)}else za=r(Ya[$a].field,0);Ya[$a].setValue(za)}ja=!0}}catch(ab){console.log(ab),console.log(ab.message)}};this.refresh=function(){4>xGlobal.refreshCounter-hb&&this.draw(!0)};this.draw=function(Ya){var fb=c.parentElement.offsetWidth;var $a=c.parentElement.offsetHeight;1==(void 0===Ya?null:Ya)&&(ja=!0);0==ra&&1==sa&&(ja=!1);if(1!=na&&null!=c&&0!=fb&&0!=$a&&(0!=ja||da!=fb||Oa!=$a)&&1!=u.query()){na=!0;da=fb;Oa=$a;ja=!1;null==z&&(z=c.getContext("2d"));Ya=getPixelRatio(z);z.save();
c.width=fb*Ya;c.height=$a*Ya;c.style.left=0;c.style.top=0;c.style.width=fb+"px";c.style.height=$a+"px";1<Ya&&z.setTransform(Ya,0,0,Ya,0,0);z.translate(.5,.5);if(0<ha.gradient.length){Ya=ha.gradient;for(var za=z.createLinearGradient(fb/2,0,fb/2,$a),Ka=0;Ka<Ya.length;Ka++)za.addColorStop(Ya[Ka].index,Ya[Ka].color);z.fillStyle=za}else z.fillStyle=ha.backgroundColor;z.fillRect(-.5,-.5,fb+1,$a+1);for(Ya=0;4>Ya;Ya++){switch(Ya){case 0:var ab=ha.borderLeft;var W=[0,0];var Ca=[0,$a];break;case 1:ab=ha.borderRight;
W=[fb-1,0];Ca=[fb-1,$a];break;case 2:ab=ha.borderTop;W=[0,0];Ca=[fb,0];break;case 3:ab=ha.borderBottom,W=[0,$a-1],Ca=[fb,$a-1]}ab&&"none"!=ab&&(za=parseLineSet(ab))&&0<za.width&&(z.beginPath(),z.lineWidth=za.width,z.strokeStyle=za.color,z.setLineDash(za.dash),z.moveTo(W[0],W[1]),z.lineTo(Ca[0],Ca[1]),z.stroke(),z.closePath(),z.setLineDash([0]))}z.lineWidth=1;M&&(ab={left:0,top:0,width:fb,height:$a},ha.margin&&(ab.left+=ha.margin,ab.top+=ha.margin,ab.width-=2*ha.margin,ab.height-=2*ha.margin),ha.marginLeft&&
(ab.left=0+ha.marginLeft,ha.margin&&(ab.width+=2*ha.margin),ab.width-=ha.marginLeft),ha.marginTop&&(ab.top=ha.marginTop,ha.margin&&(ab.height+=2*ha.margin),ab.height-=ha.marginTop),ha.marginRight&&(ha.margin&&(ab.width+=2*ha.margin),ab.width-=ha.marginRight),ha.marginBottom&&(ha.margin&&(ab.height+=2*ha.margin),ab.height-=ha.marginBottom),W=M.setCellsPosition(ab,ha),K=fb,Z=W.width,pa=$a,oa=W.height,fa&&(fa.setPosition(void 0,0,1,0),fa.setSliderPos(O,pa,oa)),1==M.draw(z,ha,-Y,-O,ab)&&M.draw(z,ha,-Y,
-O,ab),0==aa&&(aa=!0,(X=M.getDefaultFocusObject())&&X.onSetFocus&&(X.onSetFocus(!0,1==ha.enableFocus?!1:!0),M.draw(z,ha,0,0,ab))),X&&X.draw(z,!1),sa=!0);Aa&&Aa.width&&Aa.height&&(z.beginPath(),z.strokeStyle="#999",z.setLineDash([1,1]),z.moveTo(Aa.left,Aa.top),z.lineTo(Aa.left+Aa.width,Aa.top),z.lineTo(Aa.left+Aa.width,Aa.top+Aa.height),z.lineTo(Aa.left,Aa.top+Aa.height),z.lineTo(Aa.left,Aa.top),z.stroke(),z.closePath());Na&&($a=0,2==Na&&($a=1,z.lineWidth=2),z.beginPath(),la={left:fb-ha.closePosition.right,
top:ha.closePosition.top,width:ha.closePosition.width,height:ha.closePosition.height},z.strokeStyle=ha.closePosition.color?ha.closePosition.color:ha.color,z.moveTo(la.left+0-$a+1,la.top+0+1-$a),z.lineTo(la.left+0+$a+1+la.width-2,la.top+0+1+la.height-2+$a),z.moveTo(la.left+0-$a+1,la.top+0+1+la.height-2+$a),z.lineTo(la.left+0+$a+1+la.width-2,la.top+0+1-$a),z.stroke(),z.lineWidth=1,z.closePath());z.restore();na=!1}};this.showCloseButton=function(Ya){Na=!0;Wa=Ya};this.hiddenCloseButton=function(){Na=
!1;Wa=null};this.setFocus=function(){1==ha.enableFocus&&(xGlobal.focusObject=X)};this.doAction=function(Ya){for(var fb=[],$a=0,za=0;za<Ya.length;za++)'"'==Ya[za]||"'"==Ya[za]||"`"==Ya[za]||"("==Ya[za]?za=skipFlag(Ya,za):";"==Ya[za]&&(fb[fb.length]=Ya.substr($a,za-$a),$a=za+1);za>$a+1&&(fb[fb.length]=Ya.substr($a,za-$a));for(Ya=0;Ya<fb.length;Ya++){$a=fb[Ya];$a=$a.replace(/\u21b5/g,"");$a=$a.trim();var Ka=void 0,ab;for(ab in q)za=q[ab],$a=$a.replace("{{ "+ab+" }}",za),$a=$a.replace("{{ "+ab+" }}",
za);for(za=0;za<$a.length&&"."!=$a[za];za++)if("("==$a[za]){za=0;break}if(0<za){var W=$a.substr(0,za),Ca;"page"!=W&&globalPage.getActivePage()&&(Ca=globalPage.getActivePage().getWidgetByElementId(W));if(null!=Ca&&Ca.doAction){za=$a.slice(za+1,$a.length);Ca.doAction(za);continue}}try{var ca=$a.split(".");Ka="";if(1<ca.length)for(var ya=1;ya<ca.length;ya++)""!=Ka&&(Ka+="."),Ka+=ca[ya];else if(ca=$a.split("("),1<ca.length)for(ya=1;ya<ca.length;ya++)Ka+="(",Ka+=ca[ya];switch(ca[0]){case "page":Ma?Ma.page.doAction(Ka):
u.page.doAction(Ka);break;case "thisPage":Ma?Ma.page.doAction(Ka):u.page.doAction(Ka);break;case "parentPage":u.page.getParentPage().doAction(Ka);break;case "parent":u.page.parent.setVariablesValue(q,null,!1);u.page.parent.doAction(Ka);break;case "setVariablesValue":Ka=trimBracket(Ka);var bb=eval("("+Ka+")");u.setVariablesValue(bb);break;case "submit":Ka=trimBracket(Ka);bb=eval("("+Ka+")");u.submit(bb);break;default:if(Ma&&1<ca.length){var ib=Ma.getPage().getWidgetByGroupId(ca[0]);ib?ib.doAction(Ka):
Ma.doAction($a)}else Ma?Ma.doAction($a):eval($a)}}catch(gb){console.log(gb),console.log("err:"+$a+", "+gb.message)}}};u.query()};function iconMemory(){this.register=function(a,b){b={name:a,classed:"",depict:b};for(var c=0;c<this.registList.length;c++)if(a==this.registList[c].name)return!1;try{null!=eval("icon_"+a)&&(b.classed="icon_"+a,this.registList.push(b))}catch(g){return console.log(g),!1}return!0};this.createIcon=function(a,b,c,g,k){for(var q=null,f=0;f<this.registList.length;f++)if(b==this.registList[f].name){q=eval("new "+this.registList[f].classed+"()");break}q&&this.drawIconWithObj(q,a,b,c,g,k);return q};this.drawIconWithObj=
function(a,b,c,g,k,q){a.setCtx(b);a.setName(c);a.setRect(g);a.setStatus(k);a.setOption(q);a.draw()}}iconMemory.getInstance=function(){this.instance||(this.instance=new iconMemory,this.instance.registList=[]);return this.instance};
function drawIconBase(){this.setCtx=function(a){this.ctx=a};this.setRect=function(a){this.rect=a};this.setOption=function(a){this.option=a};this.setStatus=function(a){this.status=a};this.setName=function(a){this.name=a};this.setDepict=function(a){this.depict=a};this.getCtx=function(){return this.ctx};this.getRect=function(){return this.rect};this.getOption=function(){return this.option};this.getStatus=function(){return this.status};this.getName=function(){return this.name};this.getDepict=function(){return this.depict}}
;function icon_DownArrow(){drawIconBase.call(this);this.setDepict("icon_DownArrow");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(32*f+g,52*f+b);a.lineTo(52*f+g,32*f+b);a.lineWidth=6*f;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,52*f+b);a.lineTo(12*f+g,32*f+b);a.lineWidth=6*f;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,52*f+b);a.lineTo(32*f+g,12*f+b);a.lineWidth=6*f;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(32*f+g,52*f+b,3*f,Math.PI,2*Math.PI,!0);a.closePath;a.lineWidth=3*f;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(32*f+g,12.5*f+b,3*f,0,Math.PI,!0);a.closePath;a.lineWidth=3*f;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(51.5*f+g,32.5*f+b,3*f,.25*Math.PI,1.25*Math.PI,!0);a.closePath;a.lineWidth=3*f;
a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(12.5*f+g,32.5*f+b,3*f,1.75*Math.PI,.75*Math.PI,!0);a.closePath;a.lineWidth=3*f;a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("DownArrow","\u5de5\u5177-\u5411\u4e0b\u7bad\u5934");
function icon_UpArrow(){drawIconBase.call(this);this.setDepict("UpArrow");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(32*f+g,12*f+b);a.lineTo(12*f+g,32*f+b);a.lineWidth=6*f;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,12*f+b);a.lineTo(52*f+g,32*f+b);a.lineWidth=6*f;a.strokeStyle=c.color?c.color:"#000";
a.stroke();a.beginPath();a.moveTo(32*f+g,12*f+b);a.lineTo(32*f+g,52*f+b);a.lineWidth=6*f;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(32*f+g,12*f+b,3*f,Math.PI,2*Math.PI,!1);a.closePath;a.lineWidth=3*f;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(32*f+g,51.5*f+b,3*f,0,Math.PI,!1);a.closePath;a.lineWidth=3*f;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(12.5*f+g,31.5*f+b,3*f,.25*Math.PI,1.25*Math.PI,!1);a.closePath;a.lineWidth=3*f;a.fillStyle=
c.color?c.color:"#000";a.fill();a.beginPath();a.arc(51.5*f+g,31.5*f+b,3*f,1.75*Math.PI,.75*Math.PI,!1);a.closePath;a.lineWidth=3*f;a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("UpArrow","\u5de5\u5177-\u5411\u4e0a\u7bad\u5934");
function icon_Restore(){drawIconBase.call(this);this.setDepict("Restore");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.lineWidth=1.5;a.arc(32*f+g,32*f+b,24*f,0,9*Math.PI/11+Math.PI/14,!1);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.lineWidth=1.5;a.moveTo(g+7*f,b+45*f);a.lineTo(g+14*f,b+41*f);a.lineTo(g+8*
f,b+37*f);a.lineTo(g+7*f,b+45*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.stroke();a.closePath();a.beginPath();a.lineWidth=1.5;a.arc(32*f+g,32*f+b,25*f,Math.PI,20*Math.PI/11+Math.PI/14,!1);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.lineWidth=1.5;a.moveTo(g+57*f,b+19*f);a.lineTo(g+50*f,b+23*f);a.lineTo(g+56*f,b+27*f);a.lineTo(g+57*f,b+19*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.stroke();a.closePath()}}iconMemory.getInstance().register("Restore","\u5e38\u7528\u56fe\u6807-\u6062\u590d");
function icon_AddStock(){drawIconBase.call(this);this.setDepict("AddStock");this.draw=function(){var a=this.getCtx(),b=this.getRect();this.getOption();this.getStatus();var c=b.left,g=b.width,k=b.height;b=b.top;var q=g<k?g/64:k/64,f=0;k>g&&(f=(k-g)/2);b+=f;a.beginPath();a.arc(c+32*q,b+32*q,25*q,0,2*Math.PI);a.fillStyle="rgba(255,255,255,0.5)";a.fill();a.closePath();a.beginPath();a.moveTo(c+45*q,b+32*q);a.lineTo(c+19*q,b+32*q);a.lineWidth="1.6";a.strokeStyle="#000";a.stroke();a.closePath();a.beginPath();
a.moveTo(32*q+c,45*q+b);a.lineTo(32*q+c,19*q+b);a.lineWidth="1.6";a.strokeStyle="#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("AddStock","\u6dfb\u52a0\u81ea\u9009\u80a1");
function icon_DeleteStock(){drawIconBase.call(this);this.setDepict("DeleteStock");this.draw=function(){var a=this.getCtx(),b=this.getRect();this.getOption();this.getStatus();var c=b.left,g=b.width,k=b.height;b=b.top;var q=g<k?g/64:k/64,f=0;k>g&&(f=(k-g)/2);b+=f;a.beginPath();a.arc(c+32*q,b+32*q,25*q,0,2*Math.PI);a.fillStyle="rgba(255,255,255,0.5)";a.fill();a.closePath();a.beginPath();a.moveTo(c+45*q,b+32*q);a.lineTo(c+19*q,b+32*q);a.lineWidth="1.6";a.strokeStyle="#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("DeleteStock","\u5220\u9664\u81ea\u9009\u80a1");
function icon_Collected(){drawIconBase.call(this);this.setDepict("\u6536\u85cf-\u4e94\u89d2\u661f");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);for(k=0;5>=k;k++)a.lineTo(24*Math.cos((18+72*k)/180*Math.PI)*f+32*f+g,24*-Math.sin((18+72*k)/180*Math.PI)*f+32*f+b+p),a.lineTo(15*Math.cos((54+72*k)/180*Math.PI)*f+32*f+g,15*-Math.sin((54+72*k)/180*Math.PI)*
f+32*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Collected","\u6536\u85cf-\u4e94\u89d2\u661f");
function icon_FullCollected(){drawIconBase.call(this);this.setDepict("\u6536\u85cf-\u586b\u5145\u4e94\u89d2\u661f");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/64:f/64,v=0;f>q&&(v=(f-q)/2);for(q=0;5>=q;q++)a.lineTo(24*Math.cos((18+72*q)/180*Math.PI)*p+32*p+k,24*-Math.sin((18+72*q)/180*Math.PI)*p+32*p+b+v),a.lineTo(15*Math.cos((54+72*q)/180*Math.PI)*p+32*p+k,15*-Math.sin((54+
72*q)/180*Math.PI)*p+32*p+b+v);a.closePath();a.lineWidth=1.5;"checked"==g&&(a.fillStyle=c.color?c.color:"#000",a.fill());a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("FullCollected","\u6536\u85cf-\u9759\u6001\u586b\u5145\u4e94\u89d2\u661f");
function icon_staticFullCollected(){drawIconBase.call(this);this.setDepict("\u6536\u85cf-\u9759\u6001\u586b\u5145\u4e94\u89d2\u661f");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);for(k=0;5>=k;k++)a.lineTo(24*Math.cos((18+72*k)/180*Math.PI)*f+32*f+g,24*-Math.sin((18+72*k)/180*Math.PI)*f+32*f+b+p),a.lineTo(15*Math.cos((54+72*k)/180*Math.PI)*f+32*
f+g,15*-Math.sin((54+72*k)/180*Math.PI)*f+32*f+b+p);a.closePath();a.lineWidth=1.5;a.fillStyle=c.color?c.color:"#000";a.fill();a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("staticFullCollected","\u6536\u85cf-\u9759\u6001\u586b\u5145\u4e94\u89d2\u661f");
function icon_Integral(){drawIconBase.call(this);this.setDepict("\u5e38\u7528\u56fe\u6807-\u677f\u5757\u7ba1\u7406");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.lineTo(1*f+g,3*f+b+p);a.lineTo(4.5*f+g,1.5*f+b+p);a.lineTo(8*f+g,3*f+b+p);a.lineTo(4.5*f+g,4.5*f+b+p);a.lineTo(1*f+g,3*f+b+p);a.moveTo(1*f+g,4*f+b+p);a.lineTo(4.5*f+g,5.5*f+b+p);a.lineTo(8*
f+g,4*f+b+p);a.moveTo(1*f+g,5*f+b+p);a.lineTo(4.5*f+g,6.5*f+b+p);a.lineTo(8*f+g,5*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Integral","\u5e38\u7528\u56fe\u6807-\u677f\u5757\u7ba1\u7406");
function icon_All(){drawIconBase.call(this);this.setDepict("\u5e38\u7528\u56fe\u6807-\u56db\u65b9\u5757");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.rect(8*f+g,8*f+b,18*f,18*f);a.rect(38*f+g,8*f+b,18*f,18*f);a.rect(8*f+g,38*f+b,18*f,18*f);a.rect(38*f+g,38*f+b,18*f,18*f);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}
iconMemory.getInstance().register("All","\u5e38\u7528\u56fe\u6807-\u56db\u65b9\u5757");
function icon_Category(){drawIconBase.call(this);this.setDepict("\u5206\u7c7b ");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.rect(8*f+g,8*f+b,12*f,12*f);a.rect(28*f+g,8*f+b,28*f,12*f);a.rect(8*f+g,26*f+b,12*f,12*f);a.rect(28*f+g,26*f+b,28*f,12*f);a.rect(8*f+g,44*f+b,12*f,12*f);a.rect(28*f+g,44*f+b,28*f,12*f);a.strokeStyle=
c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Category","\u5e38\u7528\u56fe\u6807-\u5206\u7c7b");
function icon_Mult(){drawIconBase.call(this);this.setDepict("3*3");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.rect(8*f+g,8*f+b,12*f,12*f);a.rect(26*f+g,8*f+b,12*f,12*f);a.rect(44*f+g,8*f+b,12*f,12*f);a.rect(8*f+g,26*f+b,12*f,12*f);a.rect(26*f+g,26*f+b,12*f,12*f);a.rect(44*f+g,26*f+b,12*f,12*f);a.rect(8*f+g,44*f+b,12*f,12*f);a.rect(26*f+
g,44*f+b,12*f,12*f);a.rect(44*f+g,44*f+b,12*f,12*f);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Mult","\u5e38\u7528\u56fe\u6807-3*3");
function icon_Left(){drawIconBase.call(this);this.setDepict("\u5de6");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(6*f+g,1.5*f+b+p);a.lineTo(3*f+g,4.5*f+b+p);a.lineTo(6*f+g,7.5*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("Left","\u5e38\u7528\u56fe\u6807-\u671d\u5de6");
function icon_DoubleLeft(){drawIconBase.call(this);this.setDepict("\u53cc\u7bad\u5934->\u5de6");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/9:f/9,v=0;f>q&&(v=(f-q)/2);"checked"!=g?(a.beginPath(),a.moveTo(4.5*p+k,1.5*p+b+v),a.lineTo(1.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,7.5*p+b+v),a.moveTo(7.5*p+k,1.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(7.5*p+k,7.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=
c.color?c.color:"#000",a.stroke(),a.closePath()):"checked"==g&&(a.beginPath(),a.moveTo(4.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,7.5*p+b+v),a.moveTo(1.5*p+k,1.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(1.5*p+k,7.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=c.color?c.color:"#000",a.stroke(),a.closePath())}}iconMemory.getInstance().register("DoubleLeft","\u5e38\u7528\u56fe\u6807-\u53cc\u7bad\u5934\u671d\u5de6");
function icon_SingleSelect(){drawIconBase.call(this);this.setDepict("\u5355\u52fe\u9009\u4e2d");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/9:f/9,v=0;f>q&&(v=(f-q)/2);"checked"!=g?(a.beginPath(),a.moveTo(1.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,7.5*p+b+v),a.lineTo(1.5*p+k,7.5*p+b+v),a.lineTo(1.5*p+k,1.5*p+b+v),a.lineWidth=1.2,a.strokeStyle=c.color?c.color:"#000",
a.stroke(),a.closePath()):"checked"==g&&(a.beginPath(),a.moveTo(1.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,7.5*p+b+v),a.lineTo(1.5*p+k,7.5*p+b+v),a.lineTo(1.5*p+k,1.5*p+b+v),a.moveTo(2.5*p+k,5*p+b+v),a.lineTo(4*p+k,6.5*p+b+v),a.lineTo(6.5*p+k,2.5*p+b+v),a.lineWidth=1.2,a.strokeStyle=c.color?c.color:"#000",a.stroke(),a.closePath())}}iconMemory.getInstance().register("SingleSelect","\u5e38\u7528\u56fe\u6807-\u5355\u52fe\u9009\u4e2d");
function icon_Back(){drawIconBase.call(this);this.setDepict("\u8fd4\u56de\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.arc(6*f+g,4.5*f+b+p,1.5*f,1.5*Math.PI,.5*Math.PI);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(3.5*f+g,1.6*f+b+p);a.lineTo(2.5*f+g,3*f+b+p);a.lineTo(3.5*f+g,
4.4*f+b+p);a.moveTo(2.5*f+g,3*f+b+p);a.lineTo(6*f+g,3*f+b+p);a.moveTo(3.5*f+g,6*f+b+p);a.lineTo(6*f+g,6*f+b+p);a.lineWidth=1.3;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Back","\u5e38\u7528\u56fe\u6807-\u8fd4\u56de\u6309\u94ae");
function icon_Right(){drawIconBase.call(this);this.setDepict("\u53f3");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(3*f+g,1.5*f+b+p);a.lineTo(6*f+g,4.5*f+b+p);a.lineTo(3*f+g,7.5*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Right","\u5e38\u7528\u56fe\u6807-\u671d\u53f3");
function icon_DoubleRight(){drawIconBase.call(this);this.setDepict("\u53cc\u7bad\u5934\u671d\u53f3");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/9:f/9,v=0;f>q&&(v=(f-q)/2);"checked"!=g?(a.beginPath(),a.moveTo(4.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,7.5*p+b+v),a.moveTo(1.5*p+k,1.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(1.5*p+k,7.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=
c.color?c.color:"#000",a.stroke(),a.closePath()):"checked"==g&&(a.beginPath(),a.moveTo(4.5*p+k,1.5*p+b+v),a.lineTo(1.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,7.5*p+b+v),a.moveTo(7.5*p+k,1.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(7.5*p+k,7.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=c.color?c.color:"#000",a.stroke(),a.closePath())}}iconMemory.getInstance().register("DoubleRight","\u5e38\u7528\u56fe\u6807-\u53cc\u7bad\u5934\u671d\u53f3");
function icon_DoubleUp(){drawIconBase.call(this);this.setDepict("\u53cc\u7bad\u5934\u5411\u4e0a");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/9:f/9,v=0;f>q&&(v=(f-q)/2);"checked"!=g?(a.beginPath(),a.moveTo(1.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,4.5*p+b+v),a.moveTo(1.5*p+k,7.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(7.5*p+k,7.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=
c.color?c.color:"#000",a.stroke(),a.closePath()):"checked"==g&&(a.beginPath(),a.moveTo(1.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,7.5*p+b+v),a.lineTo(7.5*p+k,4.5*p+b+v),a.moveTo(1.5*p+k,1.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(7.5*p+k,1.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=c.color?c.color:"#000",a.stroke(),a.closePath())}}iconMemory.getInstance().register("DoubleUp","\u5e38\u7528\u56fe\u6807-\u53cc\u7bad\u5934\u5411\u4e0a");
function icon_DoubleDown(){drawIconBase.call(this);this.setDepict("\u53cc\u7bad\u5934\u5411\u4e0a");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/9:f/9,v=0;f>q&&(v=(f-q)/2);"checked"!=g?(a.beginPath(),a.moveTo(1.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,7.5*p+b+v),a.lineTo(7.5*p+k,4.5*p+b+v),a.moveTo(1.5*p+k,1.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(7.5*p+k,1.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=
c.color?c.color:"#000",a.stroke(),a.closePath()):"checked"==g&&(a.beginPath(),a.moveTo(1.5*p+k,4.5*p+b+v),a.lineTo(4.5*p+k,1.5*p+b+v),a.lineTo(7.5*p+k,4.5*p+b+v),a.moveTo(1.5*p+k,7.5*p+b+v),a.lineTo(4.5*p+k,4.5*p+b+v),a.lineTo(7.5*p+k,7.5*p+b+v),a.lineWidth=1.5,a.strokeStyle=c.color?c.color:"#000",a.stroke(),a.closePath())}}iconMemory.getInstance().register("DoubleDown","\u5e38\u7528\u56fe\u6807-\u53cc\u7bad\u5934\u5411\u4e0b");
function icon_Down(){drawIconBase.call(this);this.setDepict("\u4e0b");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(1.5*f+g,3*f+b+p);a.lineTo(4.5*f+g,6*f+b+p);a.lineTo(7.5*f+g,3*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Down","\u5e38\u7528\u56fe\u6807-\u671d\u4e0b");
function icon_Up(){drawIconBase.call(this);this.setDepict("\u4e0a");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(1.5*f+g,6*f+b+p);a.lineTo(4.5*f+g,3*f+b+p);a.lineTo(7.5*f+g,6*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Up","\u5e38\u7528\u56fe\u6807-\u671d\u4e0a");
function icon_Add(){drawIconBase.call(this);this.setDepict("\u52a0\u53f7");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(1.5*f+g,4.5*f+b+p);a.lineTo(7.5*f+g,4.5*f+b+p);a.moveTo(4.5*f+g,1.5*f+b+p);a.lineTo(4.5*f+g,7.5*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("Add","\u5e38\u7528\u56fe\u6807-\u52a0\u53f7");
function icon_Reduce(){drawIconBase.call(this);this.setDepict("\u51cf\u53f7");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(1.5*f+g,4.5*f+b+p);a.lineTo(7.5*f+g,4.5*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Reduce","\u5e38\u7528\u56fe\u6807-\u51cf\u53f7");
function icon_Selected(){drawIconBase.call(this);this.setDepict("\u5bf9\u52fe");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.lineTo(1.5*f+g,4.5*f+b+p);a.lineTo(4.5*f+g,7.5*f+b+p);a.lineTo(7.5*f+g,0+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Selected","\u5e38\u7528\u56fe\u6807-\u5bf9\u52fe");
function icon_Close(){drawIconBase.call(this);this.setDepict("X");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.lineTo(2*f+g,2*f+b+p);a.lineTo(7*f+g,7*f+b+p);a.moveTo(2*f+g,7*f+b+p);a.lineTo(7*f+g,2*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Close","\u5e38\u7528\u56fe\u6807-X");
function icon_Download(){drawIconBase.call(this);this.setDepict("\u4e0b\u8f7d");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.lineTo(3*f+g,1.5*f+b+p);a.lineTo(1.5*f+g,3*f+b+p);a.lineTo(1.5*f+g,7.5*f+b+p);a.lineTo(7.5*f+g,7.5*f+b+p);a.lineTo(7.5*f+g,3*f+b+p);a.lineTo(6*f+g,1.5*f+b+p);a.moveTo(4.5*f+g,1.5*f+b+p);a.lineTo(4.5*f+g,6*f+
b+p);a.moveTo(3*f+g,4.5*f+b+p);a.lineTo(4.5*f+g,6*f+b+p);a.lineTo(6*f+g,4.5*f+b+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Download","\u5e38\u7528\u56fe\u6807-\u4e0b\u8f7d");
function icon_Ashbin(){drawIconBase.call(this);this.setDepict("\u5220\u9664");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();g=c[g];c=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;g=g.color?g.color:"#000";a.beginPath();a.moveTo(20*k+c,16*k+b);a.lineTo(20*k+c,8*k+b);a.lineTo(44*k+c,8*k+b);a.lineTo(44*k+c,16*k+b);a.moveTo(8*k+c,16*k+b);a.lineTo(56*k+c,16*k+b);a.moveTo(16*k+c,16*k+b);a.lineTo(17*k+c,56*k+b);a.lineTo(47*k+c,56*k+b);a.lineTo(48*
k+c,16*k+b);a.lineWidth=1.5;a.strokeStyle=g;a.stroke();a.closePath();a.beginPath();a.moveTo(25*k+c,28*k+b);a.lineTo(25*k+c,46*k+b);a.moveTo(39*k+c,28*k+b);a.lineTo(39*k+c,46*k+b);a.lineWidth=1;a.strokeStyle=g;a.stroke()}}iconMemory.getInstance().register("Ashbin","\u5e38\u7528\u56fe\u6807-\u5220\u9664");
function icon_ContractileLeft(){drawIconBase.call(this);this.setDepict("\u5411\u5de6\u6536\u7f29");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];if("checked"!=g){g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/20:q/20,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.rect(3*f+g,3*f+b+p,14*f,2*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.moveTo(3*f+g,10*f+b+p);a.lineTo(6*f+g,8*f+b+p);a.lineTo(6*f+g,12*f+b+p);a.lineTo(3*f+g,10*f+b+p);a.fillStyle=
c.color?c.color:"#000";a.fill();a.rect(8*f+g,9*f+b+p,9*f,2*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.rect(3*f+g,15*f+b+p,14*f,2*f);a.fillStyle=c.color?c.color:"#000";a.fill()}else"checked"==g&&(g=b.left,k=b.width,q=b.height,b=b.top,f=k<q?k/20:q/20,p=0,q>k&&(p=(q-k)/2),a.beginPath(),a.rect(3*f+g,3*f+b+p,14*f,2*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.moveTo(17*f+g,10*f+b+p),a.lineTo(14*f+g,8*f+b+p),a.lineTo(14*f+g,12*f+b+p),a.lineTo(17*f+g,10*f+b+p),a.fillStyle=c.color?c.color:"#000",
a.fill(),a.rect(3*f+g,9*f+b+p,9*f,2*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.rect(3*f+g,15*f+b+p,14*f,2*f),a.fillStyle=c.color?c.color:"#000",a.fill())}}iconMemory.getInstance().register("ContractileLeft","\u5e38\u7528\u56fe\u6807-\u5411\u5de6\u6536\u7f29");
function icon_ContractileRight(){drawIconBase.call(this);this.setDepict("\u5411\u53f3\u6536\u7f29");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];if("checked"!=g){g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/20:q/20,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.rect(3*f+g,3*f+b+p,14*f,2*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.moveTo(17*f+g,10*f+b+p);a.lineTo(14*f+g,8*f+b+p);a.lineTo(14*f+g,12*f+b+p);a.lineTo(17*f+g,10*f+b+p);a.fillStyle=
c.color?c.color:"#000";a.fill();a.rect(3*f+g,9*f+b+p,9*f,2*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.rect(3*f+g,15*f+b+p,14*f,2*f);a.fillStyle=c.color?c.color:"#000";a.fill()}else"checked"==g&&(g=b.left,k=b.width,q=b.height,b=b.top,f=k<q?k/20:q/20,p=0,q>k&&(p=(q-k)/2),a.beginPath(),a.rect(3*f+g,3*f+b+p,14*f,2*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.moveTo(3*f+g,10*f+b+p),a.lineTo(6*f+g,8*f+b+p),a.lineTo(6*f+g,12*f+b+p),a.lineTo(3*f+g,10*f+b+p),a.fillStyle=c.color?c.color:"#000",a.fill(),
a.rect(8*f+g,9*f+b+p,9*f,2*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.rect(3*f+g,15*f+b+p,14*f,2*f),a.fillStyle=c.color?c.color:"#000",a.fill())}}iconMemory.getInstance().register("ContractileRight","\u5e38\u7528\u56fe\u6807-\u5411\u53f3\u6536\u7f29");
function icon_ContractileDown(){drawIconBase.call(this);this.setDepict("\u5411\u4e0b\u6536\u7f29");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];if("checked"!=g){g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/20:q/20,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.rect(3*f+g,3*f+b+p,2*f,14*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.moveTo(10*f+g,17*f+b+p);a.lineTo(8*f+g,14*f+b+p);a.lineTo(12*f+g,14*f+b+p);a.lineTo(10*f+g,17*f+b+p);a.fillStyle=
c.color?c.color:"#000";a.fill();a.rect(9*f+g,3*f+b+p,2*f,9*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.rect(15*f+g,3*f+b+p,2*f,14*f);a.fillStyle=c.color?c.color:"#000";a.fill()}else"checked"==g&&(g=b.left,k=b.width,q=b.height,b=b.top,f=k<q?k/20:q/20,p=0,q>k&&(p=(q-k)/2),a.beginPath(),a.rect(3*f+g,3*f+b+p,2*f,14*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.moveTo(10*f+g,3*f+b+p),a.lineTo(12*f+g,6*f+b+p),a.lineTo(8*f+g,6*f+b+p),a.lineTo(10*f+g,3*f+b+p),a.fillStyle=c.color?c.color:"#000",a.fill(),
a.rect(9*f+g,8*f+b+p,2*f,9*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.rect(15*f+g,3*f+b+p,2*f,14*f),a.fillStyle=c.color?c.color:"#000",a.fill())}}iconMemory.getInstance().register("ContractileDown","\u5e38\u7528\u56fe\u6807-\u5411\u4e0b\u6536\u7f29");
function icon_ContractileUp(){drawIconBase.call(this);this.setDepict("\u5411\u4e0a\u6536\u7f29");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];if("checked"!=g){g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/20:q/20,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.rect(3*f+g,3*f+b+p,2*f,14*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.moveTo(10*f+g,3*f+b+p);a.lineTo(12*f+g,6*f+b+p);a.lineTo(8*f+g,6*f+b+p);a.lineTo(10*f+g,3*f+b+p);a.fillStyle=c.color?
c.color:"#000";a.fill();a.rect(9*f+g,8*f+b+p,2*f,9*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.rect(15*f+g,3*f+b+p,2*f,14*f);a.fillStyle=c.color?c.color:"#000";a.fill()}else"checked"==g&&(g=b.left,k=b.width,q=b.height,b=b.top,f=k<q?k/20:q/20,p=0,q>k&&(p=(q-k)/2),a.beginPath(),a.rect(3*f+g,3*f+b+p,2*f,14*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.moveTo(10*f+g,17*f+b+p),a.lineTo(8*f+g,14*f+b+p),a.lineTo(12*f+g,14*f+b+p),a.lineTo(10*f+g,17*f+b+p),a.fillStyle=c.color?c.color:"#000",a.fill(),
a.rect(9*f+g,3*f+b+p,2*f,9*f),a.fillStyle=c.color?c.color:"#000",a.fill(),a.rect(15*f+g,3*f+b+p,2*f,14*f),a.fillStyle=c.color?c.color:"#000",a.fill())}}iconMemory.getInstance().register("ContractileUp","\u5e38\u7528\u56fe\u6807-\u5411\u4e0a\u6536\u7f29");
function icon_Setup(){drawIconBase.call(this);this.setDepict("\u8bbe\u7f6e setup");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);k=8*f;q=20*f;var v=25*f;g=32*f+g;b=32*f+b+p;a.beginPath();a.arc(g,b,k,0,2*Math.PI);a.lineWidth=1.1;a.strokeStyle=c.color?c.color:"#000";a.closePath();a.stroke();a.beginPath();a.arc(g,b,q,23/12*Math.PI,1/12*Math.PI);a.arc(g,b,v,1/12*
Math.PI,.25*Math.PI);a.arc(g,b,q,.25*Math.PI,5/12*Math.PI);a.arc(g,b,v,5/12*Math.PI,7/12*Math.PI);a.arc(g,b,q,7/12*Math.PI,.75*Math.PI);a.arc(g,b,v,.75*Math.PI,11/12*Math.PI);a.arc(g,b,q,11/12*Math.PI,13/12*Math.PI);a.arc(g,b,v,13/12*Math.PI,1.25*Math.PI);a.arc(g,b,q,1.25*Math.PI,17/12*Math.PI);a.arc(g,b,v,17/12*Math.PI,19/12*Math.PI);a.arc(g,b,q,19/12*Math.PI,1.75*Math.PI);a.arc(g,b,v,1.75*Math.PI,23/12*Math.PI);a.closePath();a.strokeStyle=c.color?c.color:"#000";a.stroke()}}
iconMemory.getInstance().register("Setup","\u5e38\u7528\u56fe\u6807-\u8bbe\u7f6e");
function icon_Clock(){drawIconBase.call(this);this.setDepict("\u8ba1\u65f6");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.arc(32*f+g,32*f+b+p,22*f,1/6*Math.PI,11/6*Math.PI,!1);a.moveTo(32*f+g,32*f+b-17*f+p);a.lineTo(32*f+g,32*f+b+p);a.lineTo(32*f+g+11*f,32*f+b+10.392*f+p);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}
iconMemory.getInstance().register("Clock","\u5e38\u7528\u56fe\u6807-\u8ba1\u65f6");
function icon_Refresh(){drawIconBase.call(this);this.setDepict("\u5237\u65b0");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.arc(32*f+g,32*f+b+p,22*f,.75*Math.PI,.25*Math.PI,!1);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();k=Math.sqrt(4*f*f+4*f*f);a.beginPath();a.moveTo(32*f-20*f/Math.sqrt(2)+g,32*f+20*f/Math.sqrt(2)+b+p);a.lineTo(32*
f-20*f/Math.sqrt(2)+g,32*f+20*f/Math.sqrt(2)+k+b+p);a.lineTo(32*f-20*f/Math.sqrt(2)+g-k,32*f+20*f/Math.sqrt(2)+k+b+p);a.closePath();a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.fill();a.stroke()}}iconMemory.getInstance().register("Refresh","\u5e38\u7528\u56fe\u6807-\u5237\u65b0");
function icon_Link(){drawIconBase.call(this);this.setDepict("\u94fe\u63a5");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();g=c[g];c=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(22*f+c,42*f+b+p);a.lineTo(42*f+c,22*f+b+p);a.lineWidth=1.5;a.strokeStyle=g.color?g.color:"#000";a.stroke();a.beginPath();a.arc(20*f+c,44*f+b+p,12*f,.25*Math.PI,1.25*Math.PI,!1);a.strokeStyle=g.color?g.color:"#000";a.stroke();
a.beginPath();a.arc(44*f+c,20*f+b+p,12*f,1.25*Math.PI,.25*Math.PI,!1);a.strokeStyle=g.color?g.color:"#000";a.stroke();g=Math.sqrt(144*f*f/2);a.beginPath();a.moveTo(20*f+c-g,44*f+b-g+p);a.lineTo(28*f+c-g,36*f+b-g+p);a.stroke();a.beginPath();a.moveTo(20*f+c+g,44*f+b+g+p);a.lineTo(28*f+c+g,36*f+b+g+p);a.stroke();a.beginPath();a.moveTo(44*f+c-g,20*f+b-g+p);a.lineTo(36*f+c-g,28*f+b-g+p);a.stroke();a.beginPath();a.moveTo(44*f+c+g,20*f+b+g+p);a.lineTo(36*f+c+g,28*f+b+g+p);a.stroke()}}
iconMemory.getInstance().register("Link","\u5e38\u7528\u56fe\u6807-\u94fe\u63a5");
function icon_Earth(){drawIconBase.call(this);this.setDepict("Earth");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(32*f+g,32*f+b,24*f,0,2*Math.PI);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(32*f+g,32*f+b,24*f,Math.PI,1.5*Math.PI);a.moveTo(32*f+g,8*f+b);a.lineTo(36*f+g,12*f+b);a.lineTo(32*f+g,16*
f+b);a.lineTo(32*f+g,20*f+b);a.lineTo(36*f+g,24*f+b);a.lineTo(32*f+g,28*f+b);a.lineTo(32*f+g,28*f+b);a.lineTo(28*f+g,26*f+b);a.lineTo(24*f+g,28*f+b);a.lineTo(24*f+g,32*f+b);a.lineTo(32*f+g,36*f+b);a.lineTo(34*f+g,38*f+b);a.lineTo(36*f+g,40*f+b);a.lineTo(34*f+g,42*f+b);a.lineTo(32*f+g,44*f+b);a.lineTo(34*f+g,46*f+b);a.lineTo(32*f+g,48*f+b);a.lineTo(34*f+g,50*f+b);a.lineTo(32*f+g,52*f+b);a.lineTo(34*f+g,54*f+b);a.lineTo(32*f+g,56*f+b);a.lineTo(28*f+g,52*f+b);a.lineTo(24*f+g,52*f+b);a.lineTo(24*f+g,
48*f+b);a.lineTo(20*f+g,46*f+b);a.lineTo(22*f+g,40*f+b);a.lineTo(26*f+g,36*f+b);a.lineTo(24*f+g,36*f+b);a.lineTo(22*f+g,38*f+b);a.lineTo(20*f+g,34*f+b);a.lineTo(16*f+g,32*f+b);a.lineTo(8*f+g,32*f+b);a.closePath();a.lineWidth=1;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(32*f+g,32*f+b,24*f,.25*Math.PI,0,!0);a.moveTo(56*f+g,32*f+b);a.lineTo(52*f+g,32*f+b);a.lineTo(48*f+g,36*f+b);a.lineTo(44*f+g,36*f+b);a.lineTo(48*f+g,40*f+b);a.lineTo(46*f+g,44*f+b);a.lineTo(24*Math.cos(.25*Math.PI)*
f+32*f+g,24*Math.cos(.25*Math.PI)*f+32*f+b);a.closePath();a.lineWidth=1;a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("Earth","\u5e38\u7528\u56fe\u6807-\u5730\u7403");
function icon_Pie(){drawIconBase.call(this);this.setDepict("\u997c\u72b6\u56fe");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(32*f+g,32*f+b);a.arc(32*f+g,32*f+b,20*f,.25*Math.PI,1.5*Math.PI);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(36*f+g,28*f+b);a.arc(36*f+g,28*f+b,19*f,1.5*Math.PI,1.75*Math.PI);
a.fillStyle=c.color?c.color:"#000";a.fill();a.closePath();a.beginPath();a.moveTo(36*f+g,32*f+b);a.arc(36*f+g,32*f+b,20*f,1.75*Math.PI,.25*Math.PI);a.closePath();a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("Pie","\u5e38\u7528\u56fe\u6807-\u997c\u72b6\u56fe");
function icon_Data(){drawIconBase.call(this);this.setDepict("Data");this.drawEllipse=function(a,b,c,g,k){ctx.beginPath();ctx.ellipse(a,b,c,g,0,0,2*Math.PI);ctx.fillStyle=k;ctx.closePath();ctx.fill()};this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();g=c[g];c=g.color;g=g.backgroundColor;var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/64:f/64,v=0;f>q&&(v=(f-q)/2);b+=v;for(q=1;7>=q;q++)0!=q%2?(a.beginPath(),a.ellipse(32*p+k,(46-4*q+4)*p+b,20*p,8*p,
0,0,2*Math.PI),a.fillStyle=c):(a.beginPath(),a.ellipse(32*p+k,(46-4*q+4)*p+b,20*p,8*p,0,0,2*Math.PI),a.fillStyle=g),a.closePath(),a.fill()}}iconMemory.getInstance().register("Data","\u5e38\u7528\u56fe\u6807-\u6570\u636e\u5e93");
function icon_Bar(){drawIconBase.call(this);this.setDepict("\u67f1\u72b6\u8d70\u52bf");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.rect(8*f+g,40*f+b,12*f,16*f);a.rect(26*f+g,32*f+b,12*f,24*f);a.rect(44*f+g,24*f+b,12*f,32*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(8*f+g,32*f+b);a.lineTo(24*f+g,16*f+b);a.lineTo(32*
f+g,28*f+b);a.lineTo(56*f+g,8*f+b);a.strokeStyle=c.color?c.color:"#000";a.lineWidth=1.5;a.stroke();a.beginPath();a.moveTo(56*f+g,8*f+b);a.lineTo(56*f+g,16*f+b);a.lineTo(48*f+g,8*f+b);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("Bar","\u5e38\u7528\u56fe\u6807-\u67f1\u72b6\u56fe");
function icon_Analysis(){drawIconBase.call(this);this.setDepict("Analysis");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(32*f+g,32*f+b,4*f,0,2*Math.PI);a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(32*f+g,32*f+b,11*f,43/24*Math.PI,41/24*Math.PI);a.lineWidth=10*f;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();
a.arc(32*f+g,32*f+b,22*f,0,2*Math.PI);a.lineWidth=4*f;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("Analysis","\u5e38\u7528\u56fe\u6807-Analysis");
function icon_Dashboard(){drawIconBase.call(this);this.setDepict("Dashboard");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(44*f+g,56*f+b);a.arcTo(8*f+g,56*f+b,8*f+g,48*f+b,8*f);a.lineTo(8*f+g,16*f+b);a.arcTo(8*f+g,8*f+b,56*f+g,8*f+b,8*f);a.lineTo(48*f+g,8*f+b);a.arcTo(56*f+g,8*f+b,56*f+g,16*f+b,8*f);a.lineTo(56*f+g,44*f+b);a.strokeStyle=
c.color?c.color:"#000";a.lineWidth=1.5;a.stroke();a.beginPath();a.rect(16*f+g,16*f+b,12*f,12*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.rect(36*f+g,16*f+b,12*f,12*f);a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.rect(16*f+g,36*f+b,12*f,12*f);a.fillStyle=c.color?c.color:"#000";a.fill();k=Math.sqrt(25*f*f*2);a.beginPath();a.arc(42*f+g,42*f+b,k,0,2*Math.PI);a.strokeStyle=c.color?c.color:"#000";a.lineWidth=1.5;a.stroke();a.beginPath();a.moveTo(42*f+g+k*Math.cos(.25*Math.PI),
42*f+b+k*Math.cos(.25*Math.PI));a.lineTo(56*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.lineWidth=1.5;a.stroke()}}iconMemory.getInstance().register("Dashboard","\u5e38\u7528\u56fe\u6807-Dashboard");
function icon_User(){drawIconBase.call(this);drawIconBase.call(this);this.setDepict("User");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(20*f+g,56*f+b);a.arc(16*f+g,52*f+b,32*f,1.75*Math.PI,0);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(44*f+g,56*f+b);a.arc(48*f+g,52*f+b,32*f,Math.PI,1.25*Math.PI);
a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.arc(32*f+g,20*f+b,8*f,0,2*Math.PI);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.rect(16*f+g,52*f+b,32*f,4*f);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("User","\u5e38\u7528\u56fe\u6807-User");
function icon_CloseEye(){drawIconBase.call(this);this.setDepict("\u4e0d\u663e\u793a");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(16*f+g,35*f+b);a.lineTo(12*f+g,43*f+b);a.strokeStyle=c.color?c.color:"#000";a.lineWidth=1.5;a.stroke();a.closePath();a.beginPath();a.moveTo(24*f+g,38*f+b);a.lineTo(22*f+g,46*f+b);a.lineWidth=1.5;a.closePath();
a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,38*f+b);a.lineTo(32*f+g,47*f+b);a.closePath();a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(40*f+g,38*f+b);a.lineTo(42*f+g,47*f+b);a.strokeStyle=c.color?c.color:"#000";a.lineWidth=1.5;a.stroke();a.closePath();a.beginPath();a.moveTo(48*f+g,35*f+b);a.lineTo(52*f+g,43*f+b);a.closePath();a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(32*f+g,4*f+b,
34*f,.25*Math.PI,.75*Math.PI);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("CloseEye","\u5e38\u7528\u56fe\u6807-\u4e0d\u663e\u793a");
function icon_Modify(){drawIconBase.call(this);this.setDepict("\u4fee\u6539");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.moveTo(32*k+g,8*k+b);a.lineTo(8*k+g,8*k+b);a.lineTo(8*k+g,56*k+b);a.lineTo(56*k+g,56*k+b);a.lineTo(56*k+g,32*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(50*k+g,8*k+b);a.lineTo(22*k+g,36*
k+b);a.lineTo(22*k+g,42*k+b);a.lineTo(28*k+g,42*k+b);a.lineTo(56*k+g,14*k+b);a.lineTo(50*k+g,8*k+b);a.lineTo(49*k+g,8*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Modify","\u5e38\u7528\u56fe\u6807-\u4fee\u6539");
function icon_Annoy(){drawIconBase.call(this);this.setDepict("\u95f9\u94c3");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.moveTo(10*k+g,48*k+b);a.lineTo(54*k+g,48*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(19*k+g,48*k+b);a.lineTo(19*k+g,26*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.closePath();a.beginPath();a.moveTo(45*k+g,48*k+b);a.lineTo(45*k+g,26*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.arc(g+32*k,b+29*k,13*k,0,Math.PI,!0);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(32*k+g,48*k+b);a.lineTo(32*k+g,56*k+b);a.lineWidth=2.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(32*k+g,15*k+b);a.lineTo(32*k+g,12*k+b);a.lineWidth=2.5;
a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Annoy","\u5e38\u7528\u56fe\u6807-\u95f9\u94c3");
function icon_Attention(){drawIconBase.call(this);this.setDepict("\u6ce8\u610f");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.arc(g+32*k,b+32*k,22*k,0,2*Math.PI,!0);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(32*k+g,44*k+b);a.lineTo(32*k+g,41*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.closePath();a.beginPath();a.moveTo(32*k+g,36*k+b);a.lineTo(32*k+g,19*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Attention","\u5e38\u7528\u56fe\u6807-\u63d0\u793a");
function icon_Split(){drawIconBase.call(this);this.setDepict("\u5206\u5272");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.rect(10*k+g,20*k+b,15*k,26*k);a.moveTo(32*k+g,52*k+b);a.lineTo(32*k+g,12*k+b);a.rect(39*k+g,20*k+b,15*k,26*k);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Split","\u5e38\u7528\u56fe\u6807-\u5206\u5272");
function icon_Period(){drawIconBase.call(this);this.setDepict("\u65f6\u95f4\u5468\u671f");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.arc(32*k+g,32*k+b,22*k,0,2*Math.PI,!1);a.moveTo(32*k+g,21*k+b);a.lineTo(32*k+g,32*k+b);a.lineTo(32*k+g+11*k,32*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("Period","\u5e38\u7528\u56fe\u6807-\u5468\u671f");
function icon_Closed(){drawIconBase.call(this);this.setDepict("\u95ed\u5e02");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.arc(32*k+g,32*k+b,22*k,0,2*Math.PI,!1);a.moveTo(21*k+g,32*k+b);a.lineTo(32*k+g+11*k,32*k+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Closed","\u5e38\u7528\u56fe\u6807-\u95ed\u5e02");
function icon_Stop(){drawIconBase.call(this);this.setDepict("\u505c\u724c");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;k;a.beginPath();a.arc(32*k+g,32*k+b,22*k,0,2*Math.PI,!1);a.moveTo(25*k+g,23*k+b);a.lineTo(25*k+g,23*k+b+18*k);a.moveTo(39*k+g,23*k+b);a.lineTo(39*k+g,23*k+b+18*k);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("Stop","\u5e38\u7528\u56fe\u6807-\u505c\u724c");function icon_Circle(){drawIconBase.call(this);this.setDepict("\u5706");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.ellipse(32*k+g,32*k+b,22*k,17*k,0,0,2*Math.PI);a.lineWidth=1.5;a.strokeStyle=c.color;a.stroke();a.closePath()}}iconMemory.getInstance().register("Circle","\u5e38\u7528\u56fe\u6807-\u692d\u5706");
function icon_Rectangle(){drawIconBase.call(this);this.setDepict("\u957f\u65b9\u5f62");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;k=k<q?k/64:q/64;a.beginPath();a.rect(10*k+g,17*k+b,44*k,30*k);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Rectangle","\u5e38\u7528\u56fe\u6807-\u957f\u65b9\u5f62");
function icon_EqualTimePeriod(){drawIconBase.call(this);this.setDepict("EqualTimePeriod");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,12*f+b);a.lineTo(39*f+g,12*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(43*f+g,12*f+b,4*f,0,2*Math.PI);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(47*f+g,12*f+b);a.lineTo(56*f+g,12*f+b);a.stroke();a.beginPath();a.moveTo(8*f+g,24*f+b);a.lineTo(17*f+g,24*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(21*f+g,24*f+b,4*f,0,2*Math.PI);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(25*f+g,24*f+b);a.lineTo(56*f+g,24*f+b);a.stroke();a.beginPath();a.moveTo(8*f+g,36*f+b);a.lineTo(56*f+g,36*f+b);a.strokeStyle=c.color?c.color:"#000";
a.stroke();a.beginPath();a.moveTo(8*f+g,49*f+b);a.lineTo(56*f+g,49*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("EqualTimePeriod","\u7b49\u8ddd\u65f6\u95f4\u5468\u671f");
function icon_GoldenSection(){drawIconBase.call(this);this.setDepict("GoldenSection");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,12*f+b);a.lineTo(56*f+g,12*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.textAlign="center";a.textBaseline="middle";a.font="500 "+30*f+"px Arial";a.strokeStyle=
c.color?c.color:"#000";a.fillText("G",18*f+g,34*f+b);a.beginPath();a.moveTo(30*f+g,24*f+b);a.lineTo(56*f+g,24*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,36*f+b);a.lineTo(56*f+g,36*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,49*f+b);a.lineTo(56*f+g,48*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("GoldenSection","\u9ec4\u91d1\u5206\u5272");
function icon_FourthdShape(){drawIconBase.call(this);this.setDepict("FourthdShape");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(12*f+g,12*f+b,4*f,0,2*Math.PI);a.lineWidth=1.5;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(10*f+g,10*f+b);a.lineTo(27*f+g,49*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";
a.stroke();a.beginPath();a.moveTo(27*f+g,49*f+b);a.lineTo(36*f+g,20*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(36*f+g,20*f+b);a.lineTo(48*f+g,45*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(48*f+g,45*f+b);a.lineTo(54*f+g,20*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.fill();a.beginPath();a.arc(54*f+g,20*f+b,4*f,0,2*Math.PI);a.lineWidth=1.5;a.fillStyle=c.color?c.color:"#000";a.fill();
a.closePath()}}iconMemory.getInstance().register("FourthdShape","\u56db\u6bb5\u5f62\u6001");
function icon_FifthShape(){drawIconBase.call(this);this.setDepict("FifthShape");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(10*f+g,48*f+b,4*f,0,2*Math.PI);a.lineWidth=1.5;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(10*f+g,48*f+b);a.lineTo(22*f+g,14*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.beginPath();a.moveTo(22*f+g,15*f+b);a.lineTo(27*f+g,40*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(27*f+g,40*f+b);a.lineTo(36*f+g,15*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(36*f+g,15*f+b);a.lineTo(43*f+g,43*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(43*f+g,43*f+b);a.lineTo(54*f+g,10*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.beginPath();a.arc(54*f+g,10*f+b,4*f,0,2*Math.PI);a.lineWidth=2;a.fillStyle=c.color?c.color:"#000";a.fill();a.closePath()}}iconMemory.getInstance().register("FifthShape","\u4e94\u6bb5\u5f62\u6001");
function icon_SixthShape(){drawIconBase.call(this);this.setDepict("SixthShape");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(12*f+g,12*f+b,4*f,0,2*Math.PI);a.lineWidth=1.5;a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(12*f+g,12*f+b);a.lineTo(20*f+g,50*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.beginPath();a.moveTo(21*f+g,50*f+b);a.lineTo(28*f+g,20*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(29*f+g,20*f+b);a.lineTo(36*f+g,45*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(37*f+g,45*f+b);a.lineTo(43*f+g,20*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(44*f+g,20*f+b);a.lineTo(51*f+g,42*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.beginPath();a.moveTo(52*f+g,42*f+b);a.lineTo(58*f+g,15*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.arc(58*f+g,15*f+b,4*f,0,2*Math.PI);a.lineWidth=2;a.fillStyle=c.color?c.color:"#000";a.fill();a.closePath()}}iconMemory.getInstance().register("SixthShape","\u516d\u6bb5\u5f62\u6001");
function icon_Flag(){drawIconBase.call(this);this.setDepict("Flag");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.ellipse(32*f+g,48*f+b,16*f,10*f,0,7*Math.PI/4,5*Math.PI/4);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,48*f+b);a.lineTo(32*f+g,10*f+b);a.lineTo(55*f+g,20*f+b);a.lineTo(32*f+g,32*
f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("Flag","\u6807\u53f7");
function icon_Date(){drawIconBase.call(this);this.setDepict("Date");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.rect(10*f+g,12*f+b,42*f,46*f);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(10*f+g,25*f+b);a.lineTo(54*f+g,25*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();
a.moveTo(23*f+g,25*f+b);a.lineTo(23*f+g,3*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(41*f+g,25*f+b);a.lineTo(41*f+g,3*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.textAlign="center";a.textBaseline="middle";a.font="500 "+24*f+"px Arial";a.strokeStyle=c.color?c.color:"#000";a.fillText("7",32*f+g,43*f+b);a.closePath()}}iconMemory.getInstance().register("Date","\u65e5\u671f");
function icon_DateAndData(){drawIconBase.call(this);this.setDepict("\u65e5\u671f/\u6570\u636e");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.rect(10*f+g,12*f+b,42*f,46*f);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(10*f+g,25*f+b);a.lineTo(54*f+g,25*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(23*f+g,25*f+b);a.lineTo(23*f+g,3*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(41*f+g,25*f+b);a.lineTo(41*f+g,3*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.textAlign="center";a.textBaseline="middle";a.font="500 "+18*f+"px Arial";a.strokeStyle=c.color?c.color:"#000";a.fillText("123",30*f+g,41*f+b);a.beginPath();a.moveTo(48*f+g,52*f+b);a.lineTo(14*f+g,52*f+b);a.lineTo(19*f+
g,49*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("DateAndData","\u65e5\u671f/\u6570\u636e");
function icon_Prev(){drawIconBase.call(this);this.setDepict("Prev");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(32*f+g,10*f+b);a.lineTo(10*f+g,49*f+b);a.lineTo(54*f+g,49*f+b);a.lineTo(32*f+g,10*f+b);a.stroke();a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("Prev","\u5e38\u7528\u56fe\u6807-\u4e0a\u4e00\u4e2a");
function icon_Next(){drawIconBase.call(this);this.setDepict("Next");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(32*f+g,49*f+b);a.lineTo(10*f+g,10*f+b);a.lineTo(54*f+g,10*f+b);a.lineTo(32*f+g,49*f+b);a.stroke();a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("Next","\u5e38\u7528\u56fe\u6807-\u4e0b\u4e00\u4e2a");
function icon_BarrageOpen(){drawIconBase.call(this);this.setDepict("BarrageOpen");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(36*f+g,56*f+b);a.arcTo(8*f+g,56*f+b,8*f+g,48*f+b,8*f);a.lineTo(8*f+g,16*f+b);a.arcTo(8*f+g,8*f+b,56*f+g,8*f+b,8*f);a.lineTo(48*f+g,8*f+b);a.arcTo(56*f+g,8*f+b,56*f+g,16*f+b,8*f);a.lineTo(56*f+g,36*f+b);a.strokeStyle=
c.color?c.color:"#000";a.lineWidth=1;a.stroke();a.beginPath();a.textAlign="center";a.textBaseline="middle";a.font="500 "+30*f+"px Arial";a.fillText("\u5f39",32*f+g,34*f+b);a.beginPath();a.moveTo(46*f+g,50*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(64*f+g,40*f+b);a.strokeStyle="#f80";a.stroke()}}iconMemory.getInstance().register("BarrageOpen","\u5e38\u7528\u56fe\u6807-\u5f39\u5e55\u5f00");
function icon_BarrageClose(){drawIconBase.call(this);this.setDepict("BarrageClose");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(36*f+g,56*f+b);a.arcTo(8*f+g,56*f+b,8*f+g,48*f+b,8*f);a.lineTo(8*f+g,16*f+b);a.arcTo(8*f+g,8*f+b,56*f+g,8*f+b,8*f);a.lineTo(48*f+g,8*f+b);a.arcTo(56*f+g,8*f+b,56*f+g,16*f+b,8*f);a.lineTo(56*f+g,36*f+b);a.strokeStyle=
c.color?c.color:"#000";a.lineWidth=1;a.stroke();a.textAlign="center";a.textBaseline="middle";a.font="500 "+30*f+"px Arial";a.fillText("\u5f39",32*f+g,34*f+b);a.beginPath();a.arc(52*f+g,52*f+b,10*f,0,2*Math.PI);k=10*f/Math.sqrt(2);a.closePath();a.stroke();a.beginPath();a.strokeStyle=c.color?c.color:"#000";a.moveTo(52*f-k+g,52*f-k+b);a.lineTo(52*f+k+g,52*f+k+b);a.stroke()}}iconMemory.getInstance().register("BarrageClose","\u5e38\u7528\u56fe\u6807-\u5f39\u5e55\u5173");
function icon_WindowOpen(){drawIconBase.call(this);this.setDepict("WindowOpen");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(36*f+g,56*f+b);a.arcTo(8*f+g,56*f+b,8*f+g,48*f+b,8*f);a.lineTo(8*f+g,16*f+b);a.arcTo(8*f+g,8*f+b,56*f+g,8*f+b,8*f);a.lineTo(48*f+g,8*f+b);a.arcTo(56*f+g,8*f+b,56*f+g,16*f+b,8*f);a.lineTo(56*f+g,36*f+b);a.strokeStyle=
c.color?c.color:"#000";a.lineWidth=1;a.stroke();a.beginPath();a.textAlign="center";a.textBaseline="middle";a.font="500 "+30*f+"px Arial";a.fillText("\u7a97",32*f+g,34*f+b);a.beginPath();a.moveTo(46*f+g,50*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(64*f+g,40*f+b);a.strokeStyle="#f80";a.stroke()}}iconMemory.getInstance().register("WindowOpen","\u5e38\u7528\u56fe\u6807-\u5f39\u7a97\u5f00");
function icon_PageUp(){drawIconBase.call(this);this.setDepict("PageUp");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.fillStyle=c.color?c.color:"#000";a.moveTo(32*f+g,20*f+b);a.lineTo(32*f+g,44*f+b);a.lineTo(8*f+g,32*f+b);a.fill();a.closePath();a.beginPath();a.fillStyle=c.color?c.color:"#000";a.moveTo(56*f+g,20*f+b);a.lineTo(56*f+g,44*f+b);
a.lineTo(32*f+g,32*f+b);a.fill();a.closePath()}}iconMemory.getInstance().register("PageUp","\u5e38\u7528\u56fe\u6807-\u4e0a\u4e00\u9875");
function icon_PageDown(){drawIconBase.call(this);this.setDepict("WindowOpen");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.fillStyle=c.color?c.color:"#000";a.moveTo(8*f+g,20*f+b);a.lineTo(8*f+g,44*f+b);a.lineTo(32*f+g,32*f+b);a.fill();a.closePath();a.beginPath();a.fillStyle=c.color?c.color:"#000";a.moveTo(32*f+g,20*f+b);a.lineTo(32*f+g,44*
f+b);a.lineTo(56*f+g,32*f+b);a.fill();a.closePath()}}iconMemory.getInstance().register("PageDown","\u5e38\u7528\u56fe\u6807-\u4e0b\u4e00\u9875");
function icon_File(){drawIconBase.call(this);this.setDepict("WindowOpen");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.strokeStyle=c.color?c.color:"#000";a.lineJoin="round";a.moveTo(13*f+g,8*f+b);a.lineTo(36*f+g,8*f+b);a.lineTo(51*f+g,23*f+b);a.lineTo(51*f+g,56*f+b);a.lineTo(13*f+g,56*f+b);a.lineTo(13*f+g,8*f+b);a.stroke();a.closePath();
a.beginPath();a.strokeStyle=c.color?c.color:"#000";a.moveTo(36*f+g,8*f+b);a.lineTo(51*f+g,23*f+b);a.lineTo(36*f+g,23*f+b);a.lineTo(36*f+g,8*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle=c.color?c.color:"#000";a.moveTo(18*f+g,31*f+b);a.lineTo(46*f+g,31*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle=c.color?c.color:"#000";a.moveTo(18*f+g,40*f+b);a.lineTo(35*f+g,40*f+b);a.stroke();a.closePath()}}iconMemory.getInstance().register("File","\u5e38\u7528\u56fe\u6807-\u6587\u4ef6");
function icon_FloderHollow(){drawIconBase.call(this);this.setDepict("FloderHollow");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.strokeStyle=c.color?c.color:"#000";a.moveTo(8*f+g,13*f+b);a.lineTo(27*f+g,13*f+b);a.lineTo(31*f+g,20*f+b);a.lineTo(56*f+g,20*f+b);a.lineTo(56*f+g,51*f+b);a.lineTo(8*f+g,51*f+b);a.lineTo(8*f+g,13*f+b);a.stroke();
a.closePath()}}iconMemory.getInstance().register("FloderHollow","\u5e38\u7528\u56fe\u6807-\u6587\u4ef6\u5939\u7a7a\u5fc3");
function icon_FloderSolid(){drawIconBase.call(this);this.setDepict("FloderSolid");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.fillStyle=c?c:"#000";a.lineJoin="round";a.moveTo(8*f+g,13*f+b);a.lineTo(27*f+g,13*f+b);a.lineTo(32*f+g,20*f+b);a.lineTo(56*f+g,20*f+b);a.lineTo(56*f+g,51*f+b);a.lineTo(8*f+g,51*f+
b);a.lineTo(8*f+g,13*f+b);a.fill();a.closePath()}}iconMemory.getInstance().register("FloderSolid","\u5e38\u7528\u56fe\u6807-\u6587\u4ef6\u5939\u5b9e\u5fc3");
function icon_TreeOpen(){drawIconBase.call(this);this.setDepict("TreeOpen");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.strokeStyle=c?c:"#000";a.moveTo(8*f+g,8*f+b);a.lineTo(56*f+g,8*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(8*f+g,8*f+b);a.moveTo(18*f+g,32*f+b);a.lineTo(46*f+g,32*f+b);
a.moveTo(32*f+g,18*f+b);a.lineTo(32*f+g,46*f+b);a.stroke();a.closePath()}}iconMemory.getInstance().register("TreeOpen","\u5e38\u7528\u56fe\u6807-\u6811\u5c55\u5f00");
function icon_AttentionSolid(){drawIconBase.call(this);this.setDepict("AttentionSolid");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(g+32*f,b+32*f,22*f,0,2*Math.PI,!0);a.fillStyle=c?c:"#000";a.fill();a.closePath();a.beginPath();a.moveTo(32*f+g,44*f+b);a.lineTo(32*f+g,41*f+b);a.lineWidth=1.5;a.strokeStyle=
"#fff";a.stroke();a.closePath();a.beginPath();a.moveTo(32*f+g,36*f+b);a.lineTo(32*f+g,19*f+b);a.lineWidth=1.5;a.strokeStyle="#fff";a.stroke();a.closePath()}}iconMemory.getInstance().register("AttentionSolid","\u5e38\u7528\u56fe\u6807-\u5b9e\u5fc3\u63d0\u793a");
function icon_OkSolid(){drawIconBase.call(this);this.setDepict("OkSolid");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(g+32*f,b+32*f,22*f,0,2*Math.PI,!0);a.fillStyle=c?c:"#000";a.fill();a.closePath();a.beginPath();a.strokeStyle="#fff";a.moveTo(20*f+g,32*f+b);a.lineTo(32*f+g,44*f+b);a.lineTo(44*f+g,20*
f+b);a.stroke();a.closePath()}}iconMemory.getInstance().register("OkSolid","\u5e38\u7528\u56fe\u6807-\u5b9e\u5fc3\u5706\u5bf9\u52fe");
function icon_LocationSolid(){drawIconBase.call(this);this.setDepict("LocationSolid");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(g+32*f,b+32*f,22*f,0,2*Math.PI,!0);a.fillStyle=c?c:"#000";a.fill();a.closePath();a.beginPath();a.strokeStyle="#fff";a.arc(32*f+g,28*f+b,9*f,8/9*Math.PI,19/9*Math.PI,!1);a.moveTo(23*
f+g,30*f+b);a.lineTo(32*f+g,40*f+b);a.lineTo(41*f+g,30*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle="#fff";a.moveTo(26*f+g,45*f+b);a.lineTo(38*f+g,45*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle="#fff";a.arc(32*f+g,30*f+b,6*f,4/3*Math.PI,5/3*Math.PI,!1);a.stroke();a.closePath()}}iconMemory.getInstance().register("LocationSolid","\u5e38\u7528\u56fe\u6807-\u5b9e\u5fc3\u5b9a\u4f4d");
function icon_Picture(){drawIconBase.call(this);this.setDepict("Picture");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.strokeStyle=c?c:"#000";a.strokeRect(8*f+g,12.5*f+b,48*f,37*f);a.closePath();a.beginPath();a.strokeStyle=c?c:"#000";a.arc(22*f+g,26*f+b,5*f,0,2*Math.PI,!1);a.stroke();a.closePath();a.beginPath();
a.strokeStyle=c?c:"#000";a.moveTo(8*f+g,44*f+b);a.lineTo(20*f+g,36*f+b);a.lineTo(30*f+g,44*f+b);a.lineTo(43*f+g,26*f+b);a.lineTo(56*f+g,44*f+b);a.stroke();a.closePath()}}iconMemory.getInstance().register("Picture","\u5e38\u7528\u56fe\u6807-\u56fe\u50cf");
function icon_Copy(){drawIconBase.call(this);this.setDepict("Copy");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.strokeStyle=c?c:"#000";a.moveTo(17.5*f+g,8*f+b);a.lineTo(50.5*f+g,8*f+b);a.lineTo(50.5*f+g,52*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle=c?c:"#000";a.moveTo(12*f+g,14*f+b);a.lineTo(43*
f+g,14*f+b);a.lineTo(43*f+g,56*f+b);a.lineTo(22*f+g,56*f+b);a.lineTo(12*f+g,46*f+b);a.lineTo(12*f+g,14*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle=c?c:"#000";a.moveTo(12*f+g,46*f+b);a.lineTo(22*f+g,46*f+b);a.lineTo(22*f+g,56*f+b);a.lineTo(12*f+g,46*f+b);a.stroke();a.closePath()}}iconMemory.getInstance().register("Copy","\u5e38\u7528\u56fe\u6807-\u590d\u5236");
function icon_Share(){drawIconBase.call(this);this.setDepict("Share");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.strokeStyle=c?c:"#000";a.moveTo(32*f+g,8*f+b);a.lineTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(56*f+g,32*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle=
c?c:"#000";a.moveTo(40*f+g,8*f+b);a.lineTo(56*f+g,8*f+b);a.lineTo(56*f+g,24*f+b);a.stroke();a.closePath();a.beginPath();a.strokeStyle=c?c:"#000";a.moveTo(56*f+g,8*f+b);a.lineTo(32*f+g,32*f+b);a.stroke();a.closePath()}}iconMemory.getInstance().register("Share","\u5e38\u7528\u56fe\u6807-\u5206\u4eab");
function icon_AddBold(){drawIconBase.call(this);this.setDepict("\u52a0\u7c97\u52a0\u53f7");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/9:q/9,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.moveTo(1.5*f+g,4.5*f+b+p);a.lineTo(7.5*f+g,4.5*f+b+p);a.moveTo(4.5*f+g,1.5*f+b+p);a.lineTo(4.5*f+g,7.5*f+b+p);a.lineWidth=4.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("AddBold","\u5e38\u7528\u56fe\u6807-\u52a0\u7c97\u52a0\u53f7");
function icon_UserCircle(){drawIconBase.call(this);drawIconBase.call(this);this.setDepict("UserCircle");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(32*f+g,32*f+b,21*f,0,2*Math.PI);a.closePath();a.lineWidth=2;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.ellipse(32*f+g,26*f+b,6*f,8.1*f,0,0,2*Math.PI);a.closePath();a.fillStyle=
c.color?c.color:"#000";a.fill();a.beginPath();a.rect(29*f+g,32*f+b,6*f,4*f);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(32*f+g,33*f+b);a.lineTo(18.5*f+g,41.4*f+b);a.lineTo(18.5*f+g,44.4*f+b);a.lineTo(45.5*f+g,44.4*f+b);a.lineTo(45.5*f+g,41.4*f+b);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.translate(32*f+g,32*f+b);a.moveTo(0,0);a.arc(0,0,18*f,.23*Math.PI,.77*Math.PI);a.closePath();a.fillStyle=c.color?c.color:"#000";a.fill()}}
iconMemory.getInstance().register("UserCircle","\u5e38\u7528\u56fe\u6807-User\u5e26\u5708");
function icon_PrevSquare(){drawIconBase.call(this);this.setDepict("PrevSquare");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(56*f+g,8*f+b);a.lineTo(8*f+g,8*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(23*
f+g,40*f+b);a.lineTo(32*f+g,26*f+b);a.lineTo(41*f+g,40*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("PrevSquare","\u5e38\u7528\u56fe\u6807-\u4e0a\u4e00\u4e2a\u5e26\u6846");
function icon_NextSquare(){drawIconBase.call(this);this.setDepict("NextSquare");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(56*f+g,8*f+b);a.lineTo(8*f+g,8*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(23*
f+g,24*f+b);a.lineTo(32*f+g,38*f+b);a.lineTo(41*f+g,24*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("NextSquare","\u5e38\u7528\u56fe\u6807-\u4e0b\u4e00\u4e2a\u5e26\u6846");
function icon_SingleSelectBackground(){drawIconBase.call(this);this.setDepict("\u5355\u52fe\u9009\u4e2d\u5e26\u80cc\u666f\u8272");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];c=c.iconColor?c.iconColor:c.color;var k=b.left,q=b.width,f=b.height;b=b.top;var p=q<f?q/9:f/9,v=0;f>q&&(v=(f-q)/2);b+=v;"checked"!=g?(a.beginPath(),a.moveTo(2.75*p+k,2.75*p+b),a.lineTo(6.25*p+k,2.75*p+b),a.lineTo(6.25*p+k,6.25*p+b),a.lineTo(2.75*p+k,6.25*p+b),a.lineTo(2.75*
p+k,2.75*p+b),a.lineWidth=1,a.strokeStyle=c?c:"#000",a.stroke(),a.closePath()):"checked"==g&&(a.beginPath(),a.moveTo(2.75*p+k,2.75*p+b),a.lineTo(6.25*p+k,2.75*p+b),a.lineTo(6.25*p+k,6.25*p+b),a.lineTo(2.75*p+k,6.25*p+b),a.lineTo(2.75*p+k,2.75*p+b),a.fillStyle=c?c:"#0078B4",a.fill(),a.closePath(),a.beginPath(),a.moveTo(3.5*p+k,4.25*p+b),a.lineTo(4.25*p+k,5.25*p+b),a.lineTo(5.5*p+k,3.75*p+b),a.strokeStyle="#fff",a.lineWidth=1,a.stroke(),a.closePath())}}
iconMemory.getInstance().register("SingleSelectBackground","\u5e38\u7528\u56fe\u6807-\u5355\u52fe\u9009\u4e2d\u5e26\u80cc\u666f\u8272");
function icon_customizeUrl(){drawIconBase.call(this);var a=this;this.ImgMap={};this.overImg=null;var b;this.loaded=null;this.setDepict("\u7528\u6237\u81ea\u5b9a\u4e49url\u7ed8\u5236\u56fe\u6807");this.draw=function(){var g=this.getCtx(),k=this.getRect(),q=this.getOption(),f=this.getStatus(),p=k.left,v=k.width,A=k.height;k=k.top;var r=0;A>v&&(r=(A-v)/2);p={x:p,w:v,h:A,y:k+r,l:v<A?v/64:A/64};b=null;c(g,q.urlSet[f],a.ImgMap,f,p)};var c=function(g,k,q,f,p){try{var v=p.x,A=p.y,r=p.l;if(null==q[f]){var u=
new Image;u.src=k;q[f]=u}else u=q[f];u&&-1==u.src.indexOf(k)&&(u=new Image,u.src=k);null==b&&(u.onload=function(z){b=!0;u&&g.drawImage(u,8*r+v,8*r+A,48*r,48*r)},b=!0);1==b&&u&&g.drawImage(u,8*r+v,8*r+A,48*r,48*r)}catch(z){console.log(z)}}}iconMemory.getInstance().register("customizeUrl","\u5e38\u7528\u56fe\u6807-\u7528\u6237\u81ea\u5b9a\u4e49url\u7ed8\u5236\u56fe\u6807");function icon_Refresh1(){drawIconBase.call(this);this.setDepict("\u5237\u65b01");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.arc(32*f+g,32*f+b+p,22*f,1/6*Math.PI,11/6*Math.PI,!1);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();k=Math.sqrt(4*f*f+4*f*f);a.beginPath();a.moveTo(32*f+11*f*Math.sqrt(3)+g,32*f-11*f+b+p-k);a.lineTo(32*
f+11*f*Math.sqrt(3)+g,32*f-11*f+b+p);a.lineTo(32*f+11*f*Math.sqrt(3)+g-k,32*f-11*f+b+p);a.closePath();a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.fill();a.stroke()}}iconMemory.getInstance().register("Refresh1","\u5e38\u7528\u56fe\u6807-\u5237\u65b01");
function icon_Search(){drawIconBase.call(this);this.setDepict("\u67e5\u627e");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);a.beginPath();a.arc(26*f+g,26*f+b+p,18*f,0,2*Math.PI,!1);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(56*f+g,56*f+b+p);a.lineTo(40*f+g,40*f+b+p);a.closePath();a.lineWidth=1.5;a.strokeStyle=c.color?
c.color:"#000";a.fill();a.stroke()}}iconMemory.getInstance().register("Search","\u5e38\u7528\u56fe\u6807-\u67e5\u627e");
function icon_Check(){drawIconBase.call(this);this.setDepict("\u9009\u4e2d\u6846\uff08\u672a\u9009\u4e2d\uff09");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g].color;a.beginPath();g=b.height<b.width?b.height:b.width;var k=.5*g;b.left+=.2*g;b.width=k;b.top+=.2*g+1;b.width=k;a.strokeStyle=c;a.globalAlpha=.6;a.lineWidth=1;a.rect(b.left,b.top,k,k);a.stroke();a.closePath();a.globalAlpha=1}}iconMemory.getInstance().register("Check","\u5e38\u7528\u56fe\u6807-\u9009\u4e2d\u6846");
function icon_Checked(){drawIconBase.call(this);this.setDepict("\u9009\u4e2d");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g].color;a.beginPath();g=b.height<b.width?b.height:b.width;var k=.5*g;b.left+=.2*g;b.width=k;b.top+=.2*g+1;b.width=k;a.strokeStyle=c;a.globalAlpha=.6;a.lineWidth=1;a.rect(b.left,b.top,k,k);a.stroke();a.closePath();a.globalAlpha=1;a.beginPath();a.strokeStyle=c;a.lineWidth=2;a.moveTo(b.left+2,b.top+k/2);a.lineTo(b.left+k/2-
1,b.top+k-3);a.lineTo(b.left+k-2,b.top+2);a.stroke();a.closePath()}}iconMemory.getInstance().register("Checked","\u5e38\u7528\u56fe\u6807-\u9009\u4e2d");function icon_FiveSpaceLine(){drawIconBase.call(this);this.setDepict("FiveSpaceLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,12*f+b);a.lineTo(56*f+g,12*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,23*f+b);a.lineTo(56*f+g,23*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?
c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,34*f+b);a.lineTo(56*f+g,34*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,45*f+b);a.lineTo(56*f+g,45*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("FiveSpaceLine","\u4e94\u6761\u7a7a\u95f4\u7ebf");
function icon_ColumnarSpaceLine(){drawIconBase.call(this);this.setDepict("ColumnarSpaceLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(28*f+g,36*f+b);a.lineTo(40*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(32*f+g,56*f+b);a.lineTo(48*f+g,56*f+b);a.strokeStyle=
c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,44*f+b);a.lineTo(48*f+g,44*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,32*f+b);a.lineTo(48*f+g,32*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,20*f+b);a.lineTo(48*f+g,20*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,8*f+b);a.lineTo(48*f+g,8*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(40*f+g,
56*f+b);a.lineTo(40*f+g,8*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("ColumnarSpaceLine","\u7a7a\u95f4-\u67f1\u88c5\u7ebf");
function icon_PolylineSpaceLine(){drawIconBase.call(this);this.setDepict("PolylineSpaceLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,16*f+b);a.lineTo(28*f+g,56*f+b);a.lineTo(44*f+g,20*f+b);a.lineTo(54*f+g,40*f+b);a.lineWidth=1.2;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(36*f+g,
30*f+b);a.lineTo(52*f+g,30*f+b);a.lineWidth=1.2;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("PolylineSpaceLine","\u7a7a\u95f4-\u6298\u7ebf");
function icon_ZSpaceLine(){drawIconBase.call(this);this.setDepict("ZSpaceLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(56*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(30*f+g,8*f+b);a.lineTo(30*
f+g,12*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,14*f+b);a.lineTo(30*f+g,16*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,18*f+b);a.lineTo(30*f+g,22*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,23*f+b);a.lineTo(30*f+g,26*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,28*f+b);a.lineTo(30*
f+g,32*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,35*f+b);a.lineTo(30*f+g,39*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,42*f+b);a.lineTo(30*f+g,45*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,48*f+b);a.lineTo(30*f+g,51*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(30*f+g,53*f+b);a.lineTo(30*
f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("ZSpaceLine","\u65f6\u7a7a-Z\u5b57\u865a\u7ebf");
function icon_GSpaceline(){drawIconBase.call(this);this.setDepict("GSpaceline");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(56*f+g,8*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,40*f+b);a.lineTo(56*f+g,40*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.font="500 "+30*f+"px Arial";a.fillStyle=c.color?c.color:"#000";a.textAlign="center";a.textBaseline="middle";a.fillText("G",22*f+g,27*f+b)}}iconMemory.getInstance().register("GSpaceline","\u7a7a\u95f4-G\u5b57\u7ebf");
function icon_PercentageSpaceline(){drawIconBase.call(this);this.setDepict("PercentageSpaceline");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(56*f+g,8*f+b);a.lineWidth=1.5;a.strokeStyle=
c.color?c.color:"#000";a.stroke();a.font="500 "+30*f+"px Arial";a.fillStyle=c.color?c.color:"#000";a.textBaseline="middle";a.textAlign="center";a.fillText("%",22*f+g,27*f+b)}}iconMemory.getInstance().register("PercentageSpaceline","\u7a7a\u95f4-\u767e\u5206\u7ebf");
function icon_ShowBtn(){drawIconBase.call(this);this.setDepict("\u5de5\u5177-\u663e\u793a\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(32*f+g,40*f+b,24*f,1.1*Math.PI,1.9*Math.PI,!1);a.strokeStyle=c.color?c.color:"#000";a.lineWidth=1.75;a.stroke();a.beginPath();a.arc(32*f+g,24*f+b,24*f,.9*Math.PI,.1*Math.PI,!0);a.strokeStyle=
c.color?c.color:"#000";a.lineWidth=1.75;a.stroke();a.closePath();a.beginPath();a.arc(32*f+g,32*f+b,6.5*f,0,2*Math.PI);a.stroke();a.closePath()}}iconMemory.getInstance().register("ShowBtn","\u5de5\u5177-\u663e\u793a\u6309\u94ae");function icon_RectangleSpacetimeLine(){drawIconBase.call(this);this.setDepict("RectangleSpacetimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,16*f+b);a.lineTo(56*f+g,16*f+b);a.lineTo(56*f+g,44*f+b);a.lineTo(8*f+g,44*f+b);a.lineTo(8*f+g,16*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();
a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("RectangleSpacetimeLine","\u65f6\u7a7a-\u77e9\u5f62\u7ebf");
function icon_TriangleSpacetime(){drawIconBase.call(this);this.setDepict("TriangleSpacetime");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(32*f+g,20*f+b);a.lineTo(8*f+g,44*f+b);a.lineTo(56*f+g,44*f+b);a.closePath();a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}
iconMemory.getInstance().register("TriangleSpacetime","\u65f6\u7a7a-\u4e09\u89d2\u5f62");
function icon_QuadrilateralSpacetime(){drawIconBase.call(this);this.setDepict("QuadrilateralSpacetime");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(20*f+g,20*f+b);a.lineTo(8*f+g,44*f+b);a.lineTo(44*f+g,44*f+b);a.lineTo(56*f+g,20*f+b);a.lineTo(20*f+g,20*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("QuadrilateralSpacetime","\u65f6\u7a7a-\u56db\u8fb9\u5f62");
function icon_HalfarcSpacetimeline(){drawIconBase.call(this);this.setDepict("HalfarcSpacetimeline");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.arc(22*f+g,32*f+b,24*f,.5*Math.PI,1.5*Math.PI,!0);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,32*f+b);a.lineTo(54*f+g,32*f+b);a.lineWidth=1.5;a.strokeStyle=
c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("HalfarcSpacetimeline","\u65f6\u7a7a-\u534a\u5706\u5f27\u7ebf");
function icon_ThreeRadialineSpacetime(){drawIconBase.call(this);this.setDepict("ThreeRadialineSpacetime");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(36*f+g,12*f+b);a.lineTo(12*f+g,56*f+b);a.lineTo(56*f+g,40*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(12*f+g,56*f+b);a.lineTo(48*f+g,
25*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("ThreeRadialineSpacetime","\u65f6\u7a7a-\u4e09\u6761\u653e\u5c04\u7ebf");
function icon_FiveRadialineSpacetime(){drawIconBase.call(this);this.setDepict("FiveRadialineSpacetime");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(16*f+g,16*f+b);a.lineTo(16*f+g,52*f+b);a.lineTo(52*f+g,52*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(16*f+g,52*f+b);a.lineTo(28*
f+g,16*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(16*f+g,52*f+b);a.lineTo(40*f+g,16*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(16*f+g,52*f+b);a.lineTo(52*f+g,16*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(16*f+g,52*f+b);a.lineTo(52*f+g,28*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(16*f+g,52*f+b);a.lineTo(52*
f+g,40*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("FiveRadialineSpacetime","\u65f6\u7a7a-\u4e94\u6761\u653e\u5c04\u7ebf");
function icon_HSpacetimeLine(){drawIconBase.call(this);this.setDepict("HSpacetimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,48*f+b);a.lineTo(56*f+g,16*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?
c.color:"#000";a.stroke();a.beginPath();a.moveTo(56*f+g,8*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("HSpacetimeLine","\u65f6\u7a7a-H\u7ebf");
function icon_SunShapSpacetimeLine(){drawIconBase.call(this);this.setDepict("SunShapSpacetimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,44*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(8*f+g,20*f+b);a.lineTo(56*
f+g,8*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(8*f+g,38*f+b);a.lineTo(56*f+g,26*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("SunShapSpacetimeLine","\u65f6\u7a7a-\u65e5\u5f62\u7ebf");
function icon_LikeSunSpacetimeLine(){drawIconBase.call(this);this.setDepict("LikeSunSpacetimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,40*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(8*f+g,24*f+b);a.lineTo(56*f+g,8*f+b);a.strokeStyle=
c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,40*f+b);a.lineTo(56*f+g,24*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(40*f+g,8*f+b);a.lineTo(40*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("LikeSunSpacetimeLine","\u65f6\u7a7a-\u8fd1\u65e5\u5f62\u7ebf");
function icon_FiveRectangleSpacetime(){drawIconBase.call(this);this.setDepict("FiveRectangleSpacetime");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(16+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill();b.beginPath();b.moveTo((16+A)*v+f,(24+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?
q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(12*v+f,20*v+p);b.lineTo(12*v+f,44*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(12*v+f,44*v+p);b.lineTo(52*v+f,44*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(52*v+f,44*v+p);b.lineTo(52*
v+f,20*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(52*v+f,20*v+p);b.lineTo(12*v+f,20*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();a(0,0);a(40,0);a(0,24);a(40,24)}}iconMemory.getInstance().register("FiveRectangleSpacetime","\u65f6\u7a7a-\u4e94\u77e9\u5f62");function icon_ThreeTimeLine(){drawIconBase.call(this);this.setDepict("ThreeTimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(12*f+g,12*f+b);a.lineTo(12*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(32*f+g,12*f+b);a.lineTo(32*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?
c.color:"#000";a.stroke();a.beginPath();a.moveTo(52*f+g,12*f+b);a.lineTo(52*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("ThreeTimeLine","\u4e09\u6761\u65f6\u95f4\u7ebf");
function icon_FourTimeLine(){drawIconBase.call(this);this.setDepict("FourTimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(12*f+g,12*f+b);a.lineTo(12*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(25*f+g,12*f+b);a.lineTo(25*f+g,56*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?
c.color:"#000";a.stroke();a.beginPath();a.moveTo(39*f+g,12*f+b);a.lineTo(39*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(52*f+g,12*f+b);a.lineTo(52*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("FourTimeLine","\u56db\u6761\u65f6\u95f4\u7ebf");
function icon_FiveTimeLine(){drawIconBase.call(this);this.setDepict("FiveTimeLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(8*f+g,56*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(14*f+g,8*f+b);a.lineTo(14*f+g,56*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(26*f+g,8*f+b);a.lineTo(26*f+g,56*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(40*f+g,8*f+b);a.lineTo(40*f+g,56*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(56*f+g,8*f+b);a.lineTo(56*f+g,56*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("FiveTimeLine","\u4e94\u6761\u65f6\u95f4\u7ebf");
function icon_DownTimeArrow(){drawIconBase.call(this);this.setDepict("DownTimeArrow");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(12*f+g,32*f+b);a.lineTo(32*f+g,52*f+b);a.lineTo(52*f+g,32*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(32*f+g,52*f+b);a.lineTo(32*f+g,12*f+b);
a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("DownTimeArrow","\u65f6\u95f4-\u5411\u4e0b\u7bad\u5934\u7ebf");
function icon_NightTime(){drawIconBase.call(this);this.setDepict("NightTime");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(12*f+g,56*f+b);a.lineTo(12*f+g,24*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(12*f+g,48*f+b);a.lineTo(44*f+g,48*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(44*f+g,56*f+b);a.lineTo(44*f+g,24*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(12*f+g,40*f+b);a.lineTo(52*f+g,40*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(52*f+g,48*f+b);a.lineTo(52*f+g,12*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(20*f+g,24*f+b);a.lineTo(20*f+g,14*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:
"#000";a.stroke();a.beginPath();a.moveTo(36*f+g,24*f+b);a.lineTo(36*f+g,14*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(20*f+g,14*f+b);a.lineTo(36*f+g,14*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(28*f+g,28*f+b);a.lineTo(28*f+g,14*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("NightTime","\u65f6\u95f4-\u591c\u665a");
function icon_VirtualRealityTimeLine(){drawIconBase.call(this);this.setDepict("VirtualRealityTimeLine");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(8+r)*v+p);30;52;b.lineTo((8+A)*v+f,(12+r)*v+p);51;33;b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(14+r)*v+p);30;52;b.lineTo((8+A)*v+f,(16+r)*v+p);51;33;b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(18+r)*v+p);30;52;b.lineTo((8+
A)*v+f,(22+r)*v+p);51;33;b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(23+r)*v+p);30;52;b.lineTo((8+A)*v+f,(26+r)*v+p);51;33;b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(28+r)*v+p);b.lineTo((8+A)*v+f,(32+r)*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(35+r)*v+p);b.lineTo((8+A)*v+f,(39+r)*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:
"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(42+r)*v+p);b.lineTo((8+A)*v+f,(45+r)*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(48+r)*v+p);b.lineTo((8+A)*v+f,(51+r)*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo((8+A)*v+f,(53+r)*v+p);b.lineTo((8+A)*v+f,(56+r)*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),
q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(8*v+f,8*v+p);b.lineTo(8*v+f,56*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(14*v+f,8*v+p);b.lineTo(14*v+f,56*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(26*v+f,8*v+p);b.lineTo(26*v+f,56*v+p);b.lineWidth=1.5;b.strokeStyle=q.color?q.color:"#000";b.stroke();a(32,0);a(48,0)}}
iconMemory.getInstance().register("VirtualRealityTimeLine","\u865a\u5b9e\u65f6\u95f4\u7ebf");function icon_TrendLine(){drawIconBase.call(this);this.setDepict("\u753b\u7ebf\u5de5\u5177\u680f-\u7ebf\u6bb5\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=2*Math.PI;var k=b.left,q=b.width,f=b.height,p=b.top;a.arc(k+5+2,p-5+f-2,2,0,g,!1);a.moveTo(k+8,p+f-8);a.lineTo(k+q-8,b.top+8);a.moveTo(k+q-5,p+5+2);a.arc(k+q-5-2,p+5+2,2,0,g,!1);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_CycLine(){drawIconBase.call(this);this.setDepict("\u753b\u7ebf\u5de5\u5177\u680f-\u6c5f\u6069\u548c\u6590\u6ce2\u90a3\u9532\u5de5\u5177\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=2*Math.PI;var k=b.left,q=b.width,f=b.height;b=b.top;for(var p=q/5,v=[k],A=1;4>=A;A++)v.push(k+A*p);v.push(k+q);k=f/5;q=[b];for(p=1;4>=p;p++)q.push(b+p*k);q.push(b+f);a.arc(v[1],q[4],2,0,g,!1);a.moveTo(v[1]+2,q[4]-2);a.lineTo(v[3],
q[2]);a.moveTo(v[1]+2,q[2]-2);a.arc(v[1],q[2],2,0,g,!1);a.moveTo(v[1]+2,q[2]-2);a.lineTo(v[2],q[1]);a.moveTo(v[3]+2,q[4]-2);a.arc(v[3],q[4],2,0,g,!1);a.moveTo(v[3]+2,q[4]-2);a.lineTo(v[4],q[3]);a.moveTo(v[1]+2,q[2]+2);a.lineTo(v[3]-2,q[4]-2);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_StraightLineBtn(){drawIconBase.call(this);this.setDepict("\u76f4\u7ebf\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=2*Math.PI;var k=b.left,q=b.width,f=b.height,p=b.top;a.arc(k+5+2,p-5+f-2,2,0,g,!1);a.moveTo(k+.5-1,p+f-.5);a.lineTo(k+q-2+1,b.top+2);a.moveTo(k+q-5,p+5+2);a.arc(k+q-5-2,p+5+2,2,0,g,!1);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_RadialLineBtn(){drawIconBase.call(this);this.setDepict("\u5c04\u7ebf\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();a.beginPath();c=c[g];g=2*Math.PI;var k=b.left,q=b.width,f=b.height,p=b.top;a.arc(k+5+2,p-5+f-2,2,0,g,!1);a.moveTo(k+8,p+f-8);a.lineTo(k+q-2+1,b.top+2);a.moveTo(k+q-5,p+5+2);a.arc(k+q-5-2,p+5+2,2,0,g,!1);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_levelLineBtn(){drawIconBase.call(this);this.setDepict("\u6c34\u5e73\u7ebf\u6bb5");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();a.beginPath();c=c[g];g=2*Math.PI;var k=b.left,q=b.width,f=b.height;b=b.top;a.arc(k+5+2,b+f/2,2,0,g,!1);a.moveTo(k+5+4,b+f/2);a.lineTo(k+q-5-4,b+f/2);a.moveTo(k+q-5,b+f/2);a.arc(k+q-5-2,b+f/2,2,0,g,!1);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_VerticalLineBtn(){drawIconBase.call(this);this.setDepict("\u5782\u76f4\u7ebf\u6bb5");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(g+32*f,b+54*f);a.lineTo(g+32*f,b+10*f);a.lineWidth=2;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("VerticalLineBtn","\u5782\u76f4\u7ebf\u6bb5");
function icon_GoldenSectionBtn(){drawIconBase.call(this);this.setDepict("\u9ec4\u91d1\u5206\u5272");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width;b=(b.top+b.height)/7;a.moveTo(g+5,1*b);a.lineTo(g+k-5,1*b);a.moveTo(g+5,2*b);a.lineTo(g+k-5,2*b);a.moveTo(g+5,4*b);a.lineTo(g+k-5,4*b);a.moveTo(g+5,6*b);a.lineTo(g+k-5,6*b);a.moveTo(g+5,7*b);a.lineTo(g+k-5,7*b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_levelSegBtn(){drawIconBase.call(this);this.setDepict("\u6c34\u5e73\u5206\u5272");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width;b=(b.top+b.height)/4;a.moveTo(g+5,1*b);a.lineTo(g+k-5,1*b);a.moveTo(g+5,2*b);a.lineTo(g+k-5,2*b);a.moveTo(g+5,3*b);a.lineTo(g+k-5,3*b);a.moveTo(g+5,4*b);a.lineTo(g+k-5,4*b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_FibonacciBtn(){drawIconBase.call(this);this.setDepict("\u6590\u6ce2\u90a3\u5951");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.height,q=b.top;b=b.width/8;a.moveTo(g+1*b,q+5);a.lineTo(g+1*b,q+k-5);a.moveTo(g+2*b,q+5);a.lineTo(g+2*b,q+k-5);a.moveTo(g+4*b,q+5);a.lineTo(g+4*b,q+k-5);a.moveTo(g+7*b,q+5);a.lineTo(g+7*b,q+k-5);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_SineBtn(){drawIconBase.call(this);this.setDepict("\u6b63\u5f26\u6ce2");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=b.left;var k=b.width,q=b.height;b=b.top;for(var f=1,p,v,A=1;A<2.8*k;A++)a.moveTo(p,v),f+=.1,p=g+3*f,v=Math.sin(f)*q/3+b+q/2,a.lineTo(p,v);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_GannAngleBtn(){drawIconBase.call(this);this.setDepict("\u6c5f\u6069\u89d2\u5ea6");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=2*Math.PI;var k=b.left,q=b.width,f=b.height;b=b.top;for(var p=q/5,v=[k],A=1;4>=A;A++)v.push(k+A*p);v.push(k+q);k=f/5;q=[b];for(p=1;4>=p;p++)q.push(b+p*k);q.push(b+f);a.arc(v[1],q[4],2,0,g,!1);a.moveTo(v[1],q[4]-2);a.lineTo(v[2],q[1]);a.moveTo(v[1]+2/3,q[4]-2);a.lineTo(v[3],q[1]);a.moveTo(v[1]+
2,q[4]-2);a.lineTo(v[3]-2,q[2]+2);a.moveTo(v[3]+2,q[2]-2);a.arc(v[3],q[2],2,0,g,!1);a.moveTo(v[3]+2,q[2]-2);a.lineTo(v[4],q[1]);a.moveTo(v[1]+2,q[4]-1);a.lineTo(v[4],q[2]);a.moveTo(v[1]+2,q[4]+.4);a.lineTo(v[4],q[3]);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_GannResistanceBtn(){drawIconBase.call(this);this.setDepict("\u753b\u7ebf\u5de5\u5177\u680f-\u6c5f\u6069\u548c\u6590\u6ce2\u90a3\u9532\u5de5\u5177\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=2*Math.PI;var k=b.left,q=b.width,f=b.height;b=b.top;for(var p=q/5,v=[k],A=1;4>=A;A++)v.push(k+A*p);v.push(k+q);k=f/5;q=[b];for(p=1;4>=p;p++)q.push(b+p*k);q.push(b+f);a.arc(v[1],q[4],2,0,g,!1);a.moveTo(v[1],q[4]-
2);a.lineTo(v[1],q[1]);a.moveTo(v[1]+2/3,q[4]-2);a.lineTo(v[2],q[1]);a.moveTo(v[1]+2,q[4]-2);a.lineTo(v[3]-2,q[2]+2);a.moveTo(v[3]+2,q[2]-2);a.arc(v[3],q[2],2,0,g,!1);a.moveTo(v[3]+2,q[2]-2);a.lineTo(v[4],q[1]);a.moveTo(v[1]+2,q[4]-2/3);a.lineTo(v[4],q[3]);a.moveTo(v[1]+2,q[4]);a.lineTo(v[4],q[4]);a.moveTo(v[1],q[2]);a.lineTo(v[3]-2,q[2]);a.moveTo(v[3],q[4]);a.lineTo(v[3],q[2]+2);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_GannGridBtn(){drawIconBase.call(this);this.setDepict("\u6c5f\u6069\u7f51\u683c");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();g=2*Math.PI;var k=b.left,q=b.width,f=b.height;b=b.top;for(var p=q/5,v=[k],A=1;4>=A;A++)v.push(k+A*p);v.push(k+q);k=f/5;q=[b];for(p=1;4>=p;p++)q.push(b+p*k);q.push(b+f);a.moveTo(v[1],q[1]);a.lineTo(v[4]-2,q[1]);a.moveTo(v[1],q[1]);a.lineTo(v[1],q[4]-2);a.arc(v[1],q[4],2,0,g,!1);a.moveTo(v[1]+
2,q[4]);a.lineTo(v[4],q[4]);a.moveTo(v[4],q[4]);a.lineTo(v[4],q[1]+2);a.moveTo(v[4]+2,q[1]);a.arc(v[4],q[1],2,0,g,!1);a.moveTo(v[2],q[1]);a.lineTo(v[2],q[4]);a.moveTo(v[3],q[1]);a.lineTo(v[3],q[4]);a.moveTo(v[1],q[2]);a.lineTo(v[4],q[2]);a.moveTo(v[1],q[3]);a.lineTo(v[4],q[3]);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_ParallelLineBtn(){drawIconBase.call(this);this.setDepict("\u5e73\u884c\u7ebf");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();var k=b.left,q=b.width;g=b.height;b=b.top;for(var f=q/5,p=[k],v=1;4>=v;v++)p.push(k+v*f);p.push(k+q);k=g/5;q=[b];for(f=1;4>=f;f++)q.push(b+f*k);q.push(b+g);a.moveTo(p[1],q[3]);a.lineTo(p[3],q[1]);a.moveTo(p[2],q[4]);a.lineTo(p[4],q[2]);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_ParallelBoxBtn(){drawIconBase.call(this);this.setDepict("\u5e73\u884c\u80a1\u7968\u7bb1");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];a.beginPath();var k=b.left,q=b.width;g=b.height;b=b.top;for(var f=q/6,p=[k],v=1;5>=v;v++)p.push(k+v*f);p.push(k+q);k=g/6;q=[b];for(f=1;5>=f;f++)q.push(b+f*k);q.push(b+g);a.moveTo(p[1],q[1]);a.lineTo(p[3],q[5]);a.moveTo(p[2],q[1]);a.lineTo(p[4],q[5]);a.moveTo(p[3],q[1]);a.lineTo(p[5],q[5]);a.moveTo(p[1],
q[3]);a.lineTo(p[5],q[1]);a.moveTo(p[1],q[4]);a.lineTo(p[5],q[2]);a.moveTo(p[1],q[5]);a.lineTo(p[5],q[3]);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
function icon_RedUpArrow(){drawIconBase.call(this);this.setDepict("RedUpArrow");this.draw=function(){var a=this.getCtx(),b=this.getRect();this.getOption();this.getStatus();var c=b.left,g=b.width,k=b.height;b=b.top;var q=g<k?g/64:k/64,f=0;k>g&&(f=(k-g)/2);b+=f;a.beginPath();a.moveTo(32*q+c,12*q+b);a.lineTo(12*q+c,32*q+b);a.lineWidth=6*q;a.strokeStyle="#D44744";a.stroke();a.beginPath();a.moveTo(32*q+c,12*q+b);a.lineTo(52*q+c,32*q+b);a.lineWidth=6*q;a.strokeStyle="#D44744";a.stroke();a.beginPath();a.moveTo(32*
q+c,12*q+b);a.lineTo(32*q+c,52*q+b);a.lineWidth=6*q;a.strokeStyle="#D44744";a.stroke();a.beginPath();a.arc(32*q+c,12*q+b,3*q,Math.PI,2*Math.PI,!1);a.closePath;a.lineWidth=3*q;a.fillStyle="#D44744";a.fill();a.beginPath();a.arc(32*q+c,51.5*q+b,3*q,0,Math.PI,!1);a.closePath;a.lineWidth=3*q;a.fillStyle="#D44744";a.fill();a.beginPath();a.arc(12.5*q+c,31.5*q+b,3*q,.25*Math.PI,1.25*Math.PI,!1);a.closePath;a.lineWidth=3*q;a.fillStyle="#D44744";a.fill();a.beginPath();a.arc(51.5*q+c,31.5*q+b,3*q,1.75*Math.PI,
.75*Math.PI,!1);a.closePath;a.lineWidth=3*q;a.fillStyle="#D44744";a.fill()}}iconMemory.getInstance().register("RedUpArrow","\u5de5\u5177-\u7ea2\u8272\u7bad\u5934");
function icon_GreenDownArrow(){drawIconBase.call(this);this.setDepict("GreenDownArrow");this.draw=function(){var a=this.getCtx(),b=this.getRect();this.getOption();this.getStatus();var c=b.left,g=b.width,k=b.height;b=b.top;var q=g<k?g/64:k/64,f=0;k>g&&(f=(k-g)/2);b+=f;a.beginPath();a.moveTo(32*q+c,52*q+b);a.lineTo(52*q+c,32*q+b);a.lineWidth=6*q;a.strokeStyle="#579136";a.stroke();a.beginPath();a.moveTo(32*q+c,52*q+b);a.lineTo(12*q+c,32*q+b);a.lineWidth=6*q;a.strokeStyle="#579136";a.stroke();a.beginPath();
a.moveTo(32*q+c,52*q+b);a.lineTo(32*q+c,12*q+b);a.lineWidth=6*q;a.strokeStyle="#579136";a.stroke();a.beginPath();a.arc(32*q+c,52*q+b,3*q,Math.PI,2*Math.PI,!0);a.closePath;a.lineWidth=3*q;a.fillStyle="#579136";a.fill();a.beginPath();a.arc(32*q+c,12.5*q+b,3*q,0,Math.PI,!0);a.closePath;a.lineWidth=3*q;a.fillStyle="#579136";a.fill();a.beginPath();a.arc(51.5*q+c,32.5*q+b,3*q,.25*Math.PI,1.25*Math.PI,!0);a.closePath;a.lineWidth=3*q;a.fillStyle="#579136";a.fill();a.beginPath();a.arc(12.5*q+c,32.5*q+b,3*
q,1.75*Math.PI,.75*Math.PI,!0);a.closePath;a.lineWidth=3*q;a.fillStyle="#579136";a.fill()}}iconMemory.getInstance().register("GreenDownArrow","\u5de5\u5177-\u7eff\u8272\u7bad\u5934");
function icon_Numberline(){drawIconBase.call(this);this.setDepict("Numberline");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(16*f+g,44*f+b);a.lineTo(56*f+g,44*f+b);a.lineWidth=1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.font="500 "+26*f+"px Microsoft Yahei";a.fillStyle=c.color?c.color:"#000";a.textAlign="center";
a.textBaseline="middle";a.fillText("123",34.5*f+g,28*f+b);a.beginPath();a.moveTo(16*f+g,40*f+b);a.lineTo(24*f+g,40*f+b);a.lineTo(16*f+g,48*f+b);a.lineWidth=.1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(24*f+g,48*f+b);a.lineTo(24*f+g,40*f+b);a.lineTo(16*f+g,48*f+b);a.lineWidth=.1;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("Numberline","\u5de5\u5177-\u6570\u5b57\u7ebf");
function icon_ALetter(){drawIconBase.call(this);this.setDepict("ALetter");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.font="700 "+44*f+"px Microsoft Yahei";a.textBaseline="middle";a.fillStyle=c.color?c.color:"#000";a.textAlign="center";a.fillText("Aa",33*f+g,36*f+b)}}iconMemory.getInstance().register("ALetter","\u5de5\u5177-A\u5b57\u6bcd");
function icon_saveBtn(){drawIconBase.call(this);this.setDepict("saveBtn");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(12*f+g,8*f+b);a.lineTo(12*f+g,56*f+b);a.lineTo(52*f+g,56*f+b);a.lineTo(52*f+g,8*f+b);a.lineTo(12*f+g,8*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(20*f+
g,8*f+b);a.lineTo(20*f+g,24*f+b);a.lineTo(44*f+g,24*f+b);a.lineTo(44*f+g,8*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(38*f+g,12*f+b);a.lineTo(38*f+g,20*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("saveBtn","\u5de5\u5177-\u4fdd\u5b58\u6309\u94ae");
function icon_popupsBtn(){drawIconBase.call(this);this.setDepict("\u5de5\u5177-\u5f39\u7a97\u6309\u94ae");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,12*f+b);a.lineTo(56*f+g,12*f+b);a.lineTo(56*f+g,36*f+b);a.lineTo(8*f+g,36*f+b);a.lineTo(8*f+g,12*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();
a.beginPath();a.moveTo(8*f+g,40*f+b);a.lineTo(8*f+g,56*f+b);a.lineTo(56*f+g,56*f+b);a.lineTo(56*f+g,40*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath();a.beginPath();a.moveTo(24*f+g,18*f+b);a.lineTo(32*f+g,28*f+b);a.lineTo(40*f+g,18*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("popupsBtn","\u5de5\u5177-\u5f39\u7a97\u6309\u94ae");
var tooliconList=[{name:"TrendLine",depict:"\u753b\u7ebf\u5de5\u5177\u680f-\u7ebf\u6bb5\u6309\u94ae"},{name:"CycLine",depict:"\u753b\u7ebf\u5de5\u5177\u680f-\u6c5f\u6069\u548c\u6590\u6ce2\u90a3\u9532\u5de5\u5177\u6309\u94ae"},{name:"StraightLineBtn",depict:"\u76f4\u7ebf\u6309\u94ae"},{name:"RadialLineBtn",depict:"\u5c04\u7ebf\u6309\u94ae"},{name:"levelLineBtn ",depict:"\u6c34\u5e73\u7ebf\u6bb5"},{name:"VerticalLineBtn",depict:"\u5782\u76f4\u7ebf\u6bb5"},{name:"FibonacciBtn",depict:"\u6590\u6ce2\u90a3\u5951"},
{name:"SineBtn",depict:"\u6b63\u5f26\u6ce2"},{name:"GannAngleBtn",depict:"\u6c5f\u6069\u89d2\u5ea6"},{name:"GannResistanceBtn",depict:"\u6c5f\u6069\u963b\u901f"},{name:"GannGridBtn",depict:"\u6c5f\u6069\u7f51\u683c"},{name:"ParallelLineBtn",depict:"\u5e73\u884c\u7ebf"},{name:"ParallelBoxBtn",depict:"\u5e73\u884c\u80a1\u7968\u7bb1"}];tooliconList.forEach(function(a){iconMemory.getInstance().register(a.name,a.depict)});function icon_SteadyTrendLine(){drawIconBase.call(this);this.setDepict("SteadyTrendLine");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,34*f+b);a.lineTo(56*f+g,34*f+b);a.lineWidth=2;a.strokeStyle=c.color?c.color:"#000";a.stroke()}}iconMemory.getInstance().register("SteadyTrendLine","\u8d8b\u52bf-\u5e73\u7a33");
function icon_LightningTrend(){drawIconBase.call(this);this.setDepict("LightningTrend");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,8*f+b);a.lineTo(28*f+g,40*f+b);a.lineTo(36*f+g,24*f+b);a.lineTo(52*f+g,52*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("LightningTrend","\u8d8b\u52bf-\u95ea\u7535");
function icon_WTrend(){drawIconBase.call(this);this.setDepict("WTrend");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,16*f+b);a.lineTo(20*f+g,48*f+b);a.lineTo(32*f+g,20*f+b);a.lineTo(44*f+g,48*f+b);a.lineTo(56*f+g,16*f+b);a.lineWidth=1.2;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("WTrend","\u8d8b\u52bf-W\u7ebf");
function icon_IncreaseTrend(){drawIconBase.call(this);this.setDepict("IncreaseTrend");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(18*f+g,38*f+b);a.lineTo(24*f+g,48*f+b);a.lineTo(36*f+g,24*f+b);a.lineTo(40*f+g,36*f+b);a.lineTo(55*f+g,10*f+b);a.lineWidth=1.5;a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}
iconMemory.getInstance().register("IncreaseTrend","\u8d8b\u52bf-\u589e\u957f\u7ebf");
function icon_FourPeakTrend(){drawIconBase.call(this);this.setDepict("FourPeakTrend");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,56*f+b);a.lineTo(14*f+g,38*f+b);a.lineTo(18*f+g,48*f+b);a.lineTo(22*f+g,32*f+b);a.lineTo(26*f+g,40*f+b);a.lineTo(32*f+g,18*f+b);a.lineTo(42*f+g,42*f+b);a.lineTo(48*f+g,24*f+b);a.lineTo(56*f+g,52*
f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.closePath()}}iconMemory.getInstance().register("FourPeakTrend","\u8d8b\u52bf-\u56db\u5cf0\u7ebf");
function icon_ThreePeakTrend(){drawIconBase.call(this);this.setDepict("ThreePeakTrend");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(8*f+g,52*f+b);a.lineTo(16*f+g,34*f+b);a.lineTo(24*f+g,52*f+b);a.lineTo(32*f+g,12*f+b);a.lineTo(40*f+g,52*f+b);a.lineTo(48*f+g,35*f+b);a.lineTo(56*f+g,52*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();
a.closePath()}}iconMemory.getInstance().register("ThreePeakTrend","\u8d8b\u52bf-\u4e09\u5cf0\u7ebf");
function icon_ArrowTrend(){drawIconBase.call(this);this.setDepict("ArrowTrend");this.draw=function(){var a=this.getCtx(),b=this.getRect(),c=this.getOption(),g=this.getStatus();c=c[g];g=b.left;var k=b.width,q=b.height;b=b.top;var f=k<q?k/64:q/64,p=0;q>k&&(p=(q-k)/2);b+=p;a.beginPath();a.moveTo(16*f+g,48*f+b);a.lineTo(56*f+g,8*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(56*f+g,8*f+b);a.lineTo(44*f+g,8*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();
a.moveTo(56*f+g,8*f+b);a.lineTo(56*f+g,20*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.beginPath();a.moveTo(8*f+g,48*f+b);a.lineTo(16*f+g,48*f+b);a.lineTo(8*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.fillStyle=c.color?c.color:"#000";a.fill();a.beginPath();a.moveTo(16*f+g,56*f+b);a.lineTo(16*f+g,48*f+b);a.lineTo(8*f+g,56*f+b);a.strokeStyle=c.color?c.color:"#000";a.stroke();a.fillStyle=c.color?c.color:"#000";a.fill()}}iconMemory.getInstance().register("ArrowTrend","\u8d8b\u52bf-\u7bad\u5934\u7ebf");
function icon_BothEndsTrend(){drawIconBase.call(this);this.setDepict("BothEndsTrend");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(16+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill();b.beginPath();b.moveTo((16+A)*v+f,(24+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";b.stroke();
b.fillStyle=q.color?q.color:"#000";b.fill()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(16*v+f,48*v+p);b.lineTo(56*v+f,8*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();a(0,32);a(40,-8)}}iconMemory.getInstance().register("BothEndsTrend","\u8d8b\u52bf-\u4e24\u65b9\u7ebf\u6bb5");
function icon_TwoSquaresTrendRays(){drawIconBase.call(this);this.setDepict("TwoSquaresTrendRays");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(16+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill();b.beginPath();b.moveTo((16+A)*v+f,(24+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=
q.color?q.color:"#000";b.fill()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(16*v+f,48*v+p);b.lineTo(56*v+f,8*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();a(0,32);a(20,12)}}iconMemory.getInstance().register("TwoSquaresTrendRays","\u8d8b\u52bf-\u4e24\u65b9\u5c04\u7ebf");
function icon_TrendBackslash(){drawIconBase.call(this);this.setDepict("TrendBackslash");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(16+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill();b.beginPath();b.moveTo((16+A)*v+f,(24+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";
b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(8*v+f,8*v+p);b.lineTo(56*v+f,56*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();a(12,4);a(28,20)}}iconMemory.getInstance().register("TrendBackslash","\u8d8b\u52bf-\u4e24\u65b9\u53cd\u659c\u7ebf");
function icon_ParallelTowTrendLine(){drawIconBase.call(this);this.setDepict("ParallelTowTrendLine");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(16+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill();b.beginPath();b.moveTo((16+A)*v+f,(24+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:
"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(44*v+f,12*v+p);b.lineTo(16*v+f,40*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(52*v+f,24*v+p);b.lineTo(24*v+f,52*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();a(32,-8);a(4,20);a(40,4);a(12,32)}}
iconMemory.getInstance().register("ParallelTowTrendLine","\u8d8b\u52bf-\u5e73\u884c\u4e24\u65b9\u7ebf\u6bb5");
function icon_DifferParallelTrend(){drawIconBase.call(this);this.setDepict("DifferParallelTrend");this.draw=function(){function a(A,r){b.beginPath();b.moveTo((8+A)*v+f,(16+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill();b.beginPath();b.moveTo((16+A)*v+f,(24+r)*v+p);b.lineTo((16+A)*v+f,(16+r)*v+p);b.lineTo((8+A)*v+f,(24+r)*v+p);b.lineWidth=.1;b.strokeStyle=q.color?q.color:
"#000";b.stroke();b.fillStyle=q.color?q.color:"#000";b.fill()}var b=this.getCtx(),c=this.getRect(),g=this.getOption(),k=this.getStatus(),q=g[k],f=c.left;g=c.width;k=c.height;var p=c.top,v=g<k?g/64:k/64;c=0;k>g&&(c=(k-g)/2);p+=c;b.beginPath();b.moveTo(40*v+f,16*v+p);b.lineTo(20*v+f,36*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();b.beginPath();b.moveTo(20*v+f,54*v+p);b.lineTo(48*v+f,28*v+p);b.strokeStyle=q.color?q.color:"#000";b.stroke();a(32,-8);a(4,20);a(40,4);a(26,18)}}
iconMemory.getInstance().register("DifferParallelTrend","\u8d8b\u52bf-\u5f02\u5e73\u884c\u4e24\u65b9\u7ebf\u6bb5");var sortTable=function(a,b,c){function g(H,C){return H[1]&&C[1]?H[1].localeCompare(C[1],"zh"):H[1]?1:C[1]?-1:0}function k(H,C){return H[1]&&C[1]?C[1].localeCompare(H[1],"zh"):H[1]?-1:C[1]?1:0}function q(H,C){return H[1]-C[1]}function f(H,C){return C[1]-H[1]}var p=0,v=b.split(".");if(1<v.length)for(b=v[1].toLowerCase(),p=0;p<a.length;p++){if(a[p]&&a[p].table&&a[p].table.info&&a[p].table.info.name.toLowerCase()==v[0].toLowerCase()){var A=a[p].table;break}}else b=v[0].toLowerCase(),a&&a[0]&&(A=a[0].table);
if(null!=A&&null!=A.data&&0!=A.data.length){for(a=0;a<A.field.length;a++)if(A.field[a][0].toLowerCase()==b){var r=a;var u="t"==A.field[a][1]?!0:!1;break}if(null!=r){p=[];if("row"==A.info.rank)for(b=0;b<A.data.length;b++){if(!A.data[b])return;p[b]=[b,A.data[b][r]]}else for(b=0;b<A.data[0].length;b++)p[b]=[b,A.data[r][b]];"desc"==c?u?p.sort(k):p.sort(f):u?p.sort(g):p.sort(q);c=[];if("row"==A.info.rank){for(b=0;b<A.data.length;b++)c[b]=A.data[p[b][0]];for(var z in A.flags){r=null!=A.flags[z]?[]:null;
for(b=0;b<A.data.length;b++)r&&(r[b]=A.flags[z][p[b][0]]);A.flags[z]=r}}else for(a=0;a<A.field.length;a++)for(c[a]=[],b=0;b<A.data[0].length;b++)c[a][b]=A.data[a][p[b][0]];A.data=c;return!0}}},parseTableName=function(a){var b="",c=a.indexOf(" from ");for(c+=6;c<a.length&&" "!=a[c];c++)b+=a[c];return b},makeStringArray=function(a){a=a.split(",");for(var b="",c=0;c<a.length;c++)b+="'"+a[c],c<a.length-1&&(b+="',");return b};
function parseFieldObj(a){for(var b={tableName:null,fieldName:a},c=0;c<a.length;c++)if("."==a[c]){b.tableName=a.slice(0,c);var g=c+1;for(c++;c<a.length;c++)if("["==a[c]){b.fieldName=a.slice(g,c);if("]"==a[c+1])b.isAllData=!0;else for(g=c+1,c++;c<a.length;c++)if("="==a[c]){b.boundFieldName=a.slice(g,c);g=c+1;b.obj={};b.obj.fieldName=a.slice(g,a.length-1);for(c++;c<a.length;c++)if("."==a[c]){b.obj.tableName=a.slice(g,c);g=c+1;b.obj.fieldName=a.slice(g,a.length-1);break}break}break}break}return b}
function replaceFilter(a,b,c){if(b&&"Array"==b.constructor.name)for(var g=0;g<b.length;g++){var k=c;null!=b[g].name&&(k+="[name=='"+b[g].name+"']");if(null!=b[g].data&&0<b[g].data.length){k+=".data.";for(var q=[],f=void 0,p="",v=0;v<b[g].data.length;v++)for(var A in b[g].data[v]){var r=k+A;-1!=a.indexOf(r)&&(f=r,q.push(b[g].data[v][A]))}if(null!=f&&0<q.length)if(-1!=a.indexOf("{{")){for(k=0;k<q.length;k++)p=k==q.length-1?p+("'"+q[k]+"'"):p+("'"+q[k]+"',");a=a.replace("{{ "+f+" }}",p)}else{for(k=0;k<
q.length;k++)p=k==q.length-1?p+q[k]:p+(q[k]+" ");a=a.replace(f,p)}}}return a}function replaceArr(a,b,c){b&&"Array"==b.constructor.name&&"String"==a.constructor.name&&a=="{{ "+c+" }}"&&(a=b);return a}function replaceObject(a,b,c){if(b&&"Object"==b.constructor.name)for(var g in b)a=a.replace("{{ "+(c+"."+g)+" }}",b[g]);return a}
var parseGetFunction=function(a,b){for(var c=b;c<a.length;c++)if("("==a[c]){b=c+1;for(c++;c<a.length;c++)if("'"==a[c])for(c++;c<a.length&&"'"!=a[c];c++);else if("("==a[c])for(c++;c<a.length&&")"!=a[c];c++);else if(")"==a[c])return a.substr(b,c-b);break}},clearQuotationMarks=function(a){a=a.trim();"'"==a[0]&&(a=a.substr(1,a.length-2));return a},replaceVariablesValue=function(a,b,c,g,k){if(null!=a){var q=a.indexOf("{{ template(");if(0<=q){var f=parseGetFunction(a,q);if(f){var p=f.split(","),v=clearQuotationMarks(p[0]).toLowerCase(),
A=clearQuotationMarks(p[1]);for(q=2;q<p.length;q++)var r=null==r?p[q]:r+(","+p[q]);q=r.indexOf("param(");if(0<=q&&(r=parseGetFunction(r,q))&&(p=r.split(","),c)){for(q=0;q<c.length;q++)if(c[q]&&c[q].table&&c[q].table.data&&0<c[q].table.data.length&&c[q].table.info.name.toLowerCase()==v){q=c[q].table;var u=q.data.length;"col"==q.info.rank&&(u=q.data[0].length);for(r=0;r<u;r++){var z=null==z?A+(r+1):z+(","+A+(r+1));z+="(";for(var H=0;H<p.length;H++){var C=p[H].indexOf("{{ ");if(0<=C){for(var U=C+3;U<
p[H].length&&(" "!=p[H][U]||"}"!=p[H][U+1]||"}"!=p[H][U+2]);U++);U=p[H].substr(C,U-C+3);C=U.replace("{{ ","");C=C.replace(" }}","");var J=C.split(".");1==J.length&&(J[1]=J[0],J[0]=v);J[1]=J[1].toLowerCase();var G;for(C=0;C<J[1].length;C++)if("["==J[1][C]){var B=C+1;for(C++;C<J[1].length;C++)if("]"==J[1][C]){C>=B+1&&(G=parseInt(J[1].substr(B,C-B)));break}J[1]=J[1].substr(0,B-1);break}for(C=0;C<q.field.length;C++)if(J[1]==q.field[C][0].toLowerCase()){C="row"==q.info.rank?null!=G?q.data[G][C]:q.data[r][C]:
null!=G?q.data[C][G]:q.data[C][r];var L=p[H].replace(U,C);z+=L;break}}else z+=p[H];H<p.length-1&&(z+=",")}z+=") "}break}z&&(a=a.replace("{{ template("+f+") }}",z))}}}f=["{{ today() }}","{{ todayString() }}"];for(C=0;C<f.length;C++)if(q=a.indexOf(f[C]),0<=q){p=new Date;switch(f[C]){case "{{ today() }}":L=""+(1E4*p.getFullYear()+100*(p.getMonth()+1)+p.getDate());break;case "{{ todayString() }}":L=""+p.getFullYear()+"-",10>p.getMonth()+1&&(L+="0"),L+=""+(p.getMonth()+1)+"-",10>p.getDate()&&(L+="0"),
L+=""+p.getDate()}a=a.replace(f[C],L);a=a.replace(f[C],L)}for(q=0;3>q;q++)for(var ba in b)if(null!=b[ba]&&""!==b[ba]&&(L=b[ba],null!=L)){if("Array"==L.constructor.name){f="";for(r=0;r<L.length;r++)0<r&&(f+=","),"string"==typeof L[r]?f+="'"+L[r]+"'":"object"===typeof L[r]?("Array"!=f.constructor.name&&(f=[]),f.push(L[r])):f+=L[q];L=f}a=replaceFilter(a,L,ba);a=replaceArr(a,L,ba);a=replaceObject(a,L,ba);if("Array"==a.constructor.name)return a;f="{{ "+ba+" }}";a=a.replace(f,L);a=a.replace(f,L);a=a.replace(f,
L);a=a.replace(f,L);a=a.replace(f,L);a=a.replace(f,L)}L=getFieldNameArr(a);if(0<L.length&&null!=g)for(b=0;b<L.length;b++)f=L[b],null!=g[f]&&null!=g[f].value&&(a=a.replace("{ "+f+" }",g[f].value),a=a.replace("{ "+f+" }",g[f].value));a=replaceUserVariablesValue(a);for(a=replaceUserVariablesValue(a);;)if(g=0,C=a.indexOf("{{ "),0<=C){U=a.indexOf(" }}");if(0<=U){if(b=a.slice(C+3,U),v=parseTableVariable(b),c)for(L=0;L<c.length;L++)if(c[L]&&c[L]!={}&&(f=c[L].table)&&f.info&&f.info.name==v.tableName&&f.field&&
f.data){if(0<f.data.length)for(p=0;p<f.field.length;p++){if(v.field==f.field[p][0].toLowerCase()){L=null;if(null!=v.toArrayIndex)"row"==f.info.rank?(v=v.toArrayIndex,0<=v&&v<f.data.length&&f.data[v][p]&&(L="t"==f.field[p][1][0]?"'"+f.data[v][p]+"'":f.data[v][p])):(v=v.toArrayIndex,0<=v&&v<f.data[p].length&&f.data[p][v]&&(L="t"==f.field[p][1][0]?"'"+f.data[p][v]+"'":f.data[p][v]));else{v=0;A="row"==f.info.rank?f.data.length:f.data[p].length;null!=k&&(v=k[0],A=k[1]);if("row"==f.info.rank)for(;v<A;v++)f.data[v]&&
f.data[v][p]&&"[]"!=f.data[v][p]&&(null==L&&(L=""),z=f.data[v][p],"string"==typeof z&&(z=z.trim(),"["==z[0]?(z=z.replace("[",""),z=z.replace("]","")):(z=trimSingle(z),z=trimDbSingle(z))),L+=z,v<A-1&&(L+=","));else for(;v<A;v++)f.data[p]&&f.data[p][v]&&"[]"!=f.data[p][v]&&(null==L&&(L=""),z=f.data[p][v],"string"==typeof z&&(z=z.trim(),"["==z[0]?(z=z.replace("[",""),z=z.replace("]","")):(z=trimSingle(z),z=trimDbSingle(z))),L+=z,v<A-1&&(L+=","));if(null!=L){v=L.split(",");A={};for(q=0;q<v.length;q++)v[q]=
v[q].trim(),v[q]=trimSingle(v[q]),A[v[q]]=q;L="";if("t"==f.field[p][1][0])for(ba in A)""!=ba&&(L+="'"+ba+"',");else if("c"==f.field[p][1][0])for(ba in A)""!=ba&&(L+="'"+ba+"',");else for(ba in A)""!=ba&&(L+=""+ba+",");L=L.slice(0,-1)}}L&&(f="{{ "+b+" }}",a=a.replace(f,L),a=a.replace(f,L),a=a.replace(f,L),a=a.replace(f,L),a=a.replace(f,L),a=a.replace(f,L),g++);break}}else f="{{ "+b+" }}",a=a.replace(f,"''"),a=a.replace(f,"''"),a=a.replace(f,"''"),g++;break}}else a="";if(0==g)break}else break;return a}};
function getFieldNameArr(a){var b=[];a=a.split("{");for(var c=0;c<a.length;c++){var g=a[c].indexOf("}");-1!=g&&"}"!=a[c].substring(g+1,g+2)&&(g=a[c].indexOf("}"),g=a[c].substring(0,g).replace(/ /g,""),b.push(g))}return b}
function getBoundValues(a,b,c,g,k){if(null!=a){var q=[];if(c&&c[0])var f=c[0].table;for(var p=0;p<a.length;p++)if(null==a[p].type||"synch"==a[p].type||"send"==a[p].type){if(a[p].field)var v=a[p].field;else a[p].variable&&"variables."==a[p].variable.slice(0,10)&&(v=a[p].variable.slice(10),b[v]&&q.push({bound:a[p],value:b[v]}),v=null);if(v){v=v.toLowerCase();var A=parseFieldObj(v);if(A.tableName)if(A.obj&&A.obj.tableName&&A.obj.fieldName&&null!=g){if(c[0].table.info.name.toLowerCase()==A.obj.tableName.toLowerCase())for(var r=
0;r<f.field.length;r++)if(f.field[r][0].toLowerCase()==A.obj.fieldName){var u=g-f.info.dataBegin,z;"col"==f.info.rank?0<=u&&u<f.data[r].length&&(z=f.data[r][u]):0<=u&&u<f.data.length&&f.data[u]&&(z=f.data[u][r]);for(var H=0;H<c.length&&null!=c[H].table&&null!=c[H].table.field;H++)if(c[H].table.info.name.toLowerCase()==A.tableName){for(r=0;r<c[H].table.field.length;r++)if(c[H].table.field[r][0].toLowerCase()==A.boundFieldName){if("row"==c[H].table.info.rank)for(u=0;u<c[H].table.data.length;u++)if(z==
c[H].table.data[u][r]){for(r=0;r<c[H].table.field.length;r++)if(c[H].table.field[r][0].toLowerCase()==A.fieldName){q.push({bound:a[p],value:c[H].table.data[u][r]});break}break}break}break}break}}else{if(A.tableName&&A.fieldName&&null!=g){r=g-f.info.dataBegin;H=A.fieldName.replace(A.tableName+".","");A.isAllData&&(r=-1);for(var C=0;C<c.length;C++)if(c[C]&&c[C].table&&c[C].table.info&&c[C].table.info.name&&c[C].table.info.name.toLowerCase()==A.tableName&&c[C].table.field&&"row"==c[C].table.info.rank)for(var U=
0;U<c[C].table.field.length;U++)if(c[C].table.field[U][0].toLowerCase()==H){if(0>r){var J=[];for(u=0;u<c[C].table.data.length;u++)J.push(c[C].table.data[u][U]);q.push({bound:a[p],value:J})}else!c[C].table.data[r]&&c[C].table.data[0]?q.push({bound:a[p],value:c[C].table.data[0][U]}):q.push({bound:a[p],value:c[C].table.data[r]?c[C].table.data[r][U]:null});break}}}else if(f&&f.field&&null!=g&&f.data)for(r=0;r<f.field.length;r++)if(f.field[r][0].toLowerCase()==v){u=g-f.info.dataBegin;"col"==f.info.rank?
f.data[r]&&0<=u&&u<f.data[r].length&&q.push({bound:a[p],value:f.data[r][u]}):0<=u&&u<f.data.length&&f.data[u]&&q.push({bound:a[p],value:f.data[u][r]});break}}}setCallback_VariablesValue(a,b,k);return q}}
var parseParam=function(a,b){a=eval("("+a+")");if(b)for(var c in a)if(a[c]&&"String"==a[c].constructor.name){var g=a[c].split(".");2==g.length&&"variables"==g[0]&&(a[c]=b[g[1]])}return a},parseFunctionParams=function(a){var b=[],c=0;a=a.trim();for(var g=0;g<a.length;g++){for(;g<a.length&&" "==a[g];g++)c=g;if("'"==a[g]||'"'==a[g])for(g++;g<a.length;g++){if(a[g]==a[c]){b[b.length]=a.substr(c,g-c+1);for(g++;g<a.length&&","!=a[g];g++);break}}else if("{"==a[g]||"["==a[g]){var k=0,q="{"==a[g]?"}":"]";for(g++;g<
a.length;g++)if(a[g]==a[c])k++;else if(a[g]==q)if(0<k)k--;else{b[b.length]=a.substr(c,g-c+1);for(g++;g<a.length&&","!=a[g];g++);break}}else for(g++;g<a.length;g++)if(","==a[g]){b[b.length]=a.substr(c,g-c+1);break}g==a.length&&(b[b.length]=a.substr(c,g-c))}return b};
function download(a,b,c){a=(window.TextEncoder?function(v){v=(new TextEncoder("utf8")).encode(v);for(var A="",r=0;r<v.length;++r)A+=String.fromCharCode(v[r]);return A}:function(v){return eval("'"+encodeURI(v).replace(/%/gm,"\\x")+"'")})(a);var g=document,k=arguments,q=g.createElement("a"),f=k[1];q.href="data:"+c+"charset=utf-8,"+escape(a);if(window.MSBlobBuilder)return k=new MSBlobBuilder,k.append(a),navigator.msSaveBlob(k,b);if("download"in q)return q.setAttribute("download",f),q.innerHTML="downloading...",
g.body.appendChild(q),setTimeout(function(){var v=g.createEvent("MouseEvents");v.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);q.dispatchEvent(v);g.body.removeChild(q)},66),!0;var p=g.createElement("iframe");g.body.appendChild(p);p.src="data:"+(k[2]?k[2]:"application/octet-stream")+(window.btoa?";base64":"")+","+(window.btoa?window.btoa:escape)(a);setTimeout(function(){g.body.removeChild(p)},333);return!0}
var saveAllDataToFile=function(a){download(a[0].data,a[0].value,"text/plain")},doWidgetAction=function(a,b,c,g,k){a=replaceVariablesValue(a,g);a=a.split(";");for(c=0;c<a.length;c++){action=a[c];action=trim(action);var q=action.indexOf("(");if(!(0>q)){var f=action.substr(q+1,action.length-q-2).trim();q=action.substr(0,q).split(".");var p=null;if(2<q.length&&"aboutMe"!=q[0]){var v=b.getPageById(q[0]);v&&(p="page"==q[1]?v:v.getWidgetByElementId(q[1]))&&(q[0]=q[2])}else 1<q.length&&"aboutMe"!=q[0]?("page"==
q[0]?(null==b&&(b=globalPage.getActivePage()),v=p=b):"parent"==q[0]?(b.parent.setVariablesValue&&g&&b.parent.setVariablesValue(g,null,!1),p=b.parent):p=b.getWidgetByElementId(q[0]),q[0]=q[1]):(p=k,q&&"aboutMe"==q[0]&&(q[0]=q[1]));if(p)switch(q[0]){case "setVariablesValue":p.setVariablesValue(parseParam(f,g));break;case "setOption":p.setOption(parseParam(f));break;case "clearQueryData":p.clearQueryData();break;case "query":p.query();break;case "setHeader":p.setHeader(parseParam(f));case "setQueryInfo":p.setQueryInfo(parseParam(f));
break;case "submit":p.submit(parseParam(f));break;case "doEnter":if(p.onKeyDown)p.onKeyDown({keyCode:13});break;case "reload":p.reload();break;case "setActivePage":params=parseFunctionParams(f);1<params.length?v.setActivePage(params[0].substr(1,params[0].length-2),parseParam(params[1],g)):v.setActivePage(params[0].substr(1,params[0].length-2));break;case "setFocusObjectById":v.setFocusObjectById(f.substr(1,f.length-2));break;case "setActiveTab":v.setActiveTab(f.substr(1,f.length-2));break;case "saveAllToFile":f=
"";p=k.getQueryData()[0].table;q=p.data;p=p.field;for(var A=0,r=0;r<p.length;r++)"obj"!=p[r][1]&&(0<A&&(f+=","),f+=p[r][0],A++);f+="\n";for(var u=0;u<q.length;u++){for(r=A=0;r<p.length;r++)"obj"!=p[r][1]&&(0<A&&(f+=","),f=null==q[u][r]?f+"":f+q[u][r],A++);f+="\n"}f=[{name:"\u6587\u4ef6\u540d\u79f0",labelWidth:90,width:300,value:"filename.txt",data:f}];(new xDialog(window,"\u4fdd\u5b58\u5230\u6587\u4ef6",this,420,108)).doInput(f,saveAllDataToFile);break;case "copyAllToClipboard":case "copyToClipboard":f=
"";if("copyToClipboard"==q[0])for(q=k.getSelected(),u=0;u<q.data.length;u++)f+=q.data[u]+"\n";else{p=k.getQueryData()[0].table;q=p.data;p=p.field;for(r=A=0;r<p.length;r++)"obj"!=p[r][1]&&(0<A&&(f+=","),f+=p[r][0],A++);f+="\n";for(u=0;u<q.length;u++){for(r=A=0;r<p.length;r++)"obj"!=p[r][1]&&(0<A&&(f+=","),f=null==q[u][r]?f+"":f+getValueFormatString(q[u][r],p[r][1],p[r][4]&&p[r][4][1]?p[r][4][1]:null),A++);f+="\n"}}q=new xDialog(window,"\u590d\u5236",this,812,500);p=document.createElement("div");A=
document.createElement("textarea");r=document.createAttribute("style");r.value="display:block;margin:6px;width:800px;height:430px;resize: none;outline:none;word-wrap: normal;background-color:#222;color:#fff";A.setAttributeNode(r);A.id="copy";p.appendChild(A);A.textContent=f;A.title=f;A.text=f;A.focus();A.setSelectionRange?A.setSelectionRange(0,A.value.length):A.select();q.setDlg(p,"position: absolute;top:26px;left:0px;right:0px;bottom:0px;margin:0px;overflow:hidden;border: 0px solid #999;");q.setButtons([{capture:"\u9000\u51fa"}]);
A.focus();break;default:eval(q+"("+f+")")}}}};function xListHeader(){this.geometry={left:0,top:0,width:0,height:0};this.setHeader=function(){}}
function drawTreeExpand(a,b,c,g,k,q,f,p){"normal"==f?(a.beginPath(),a.fillStyle=b.expandColor,"+"==q?(a.moveTo(c-k/2,g-k/2),a.lineTo(c+k/2,g),a.lineTo(c-k/2,g+k/2)):(a.moveTo(c-k/2,g-k/2),a.lineTo(c+k/2,g-k/2),a.lineTo(c,g+k/2)),a.lineTo(c-k/2,g-k/2),a.fill(),a.closePath()):"special"==f&&(a.beginPath(),a.strokeStyle=b.expandColor,"+"==q?(a.moveTo(p.left+p.width-k-15,g-k/4),a.lineTo(p.left+p.width-k/2-15,g+k/4),a.lineTo(p.left+p.width-15,g-k/4)):(a.moveTo(p.left+p.width-k-15,g+k/4),a.lineTo(p.left+
p.width-k/2-15,g-k/4),a.lineTo(p.left+p.width-15,g+k/4)),a.stroke(),a.closePath())}
function xList(a,b,c,g,k,q,f,p,v,A){var r,u,z,H;function C(P,ua,Ga){if(!pb){var Ja=P-.025*ua;.008>P/ua||(P=1E3*Math.abs(.025*P+.025*ua*.0125)/window.devicePixelRatio*4,na=Ga?na-P:na+P,0>na&&(na=0),P=ma.rowHeight*Ra,na+ea>P&&(na=P-ea),N.draw(!0),setTimeout(function(){C(.945*Ja,ua,Ga)},25))}}function U(P){var ua,Ga,Ja=null==(ua=GSession)?void 0:null==(Ga=ua.sharedInstance())?void 0:Ga.getHttpUrl();null!=P&&P.http&&(P.http.startsWith("http://")||P.http.startsWith("https://"))||(P.query.server=Ja+P.http)}
function J(P,ua){if(P&&0<=P.tableIndex&&P.tableIndex<oa.length&&0<=ua&&0<=P.fieldIndex){var Ga=oa[P.tableIndex].table,Ja=P.fieldIndex;if(Ga.field&&Ga.data){if(P.match){if(null==P.match.match)for(var Xa=0;Xa<Ga.field.length;Xa++)if(Ga.field[Xa][0].toLowerCase()==P.match.matchField){P.match.match=Xa;break}if(null==P.match.to){var La=P.match.toField.indexOf(".");if(0<=La){Xa=P.match.toField.slice(0,La);La=P.match.toField.slice(La+1);for(var Ta=0;Ta<oa.length;Ta++)if(oa[Ta].table.info.name.toLowerCase()==
Xa){P.match.to={};P.match.to.tableIndex=Ta;Ta=oa[Ta].table;for(Xa=0;Xa<Ta.field.length;Xa++)if(Ta.field[Xa][0].toLowerCase()==La){P.match.to.fieldIndex=Xa;break}break}}}}if("row"==Ga.info.rank){if(ua<Ga.info.rows&&Ga.data[ua]){La=Ga.field[Ja][0].toLowerCase();if(null==P.match)return{type:Ga.field[Ja][1],value:Ga.data[ua][Ja],flags:Ga.flags&&Ga.flags[La]?Ga.flags[La][ua]:void 0,status:Ga.dataStatus?Ga.dataStatus[ua]:void 0};Ja=oa[P.match.to.tableIndex].table;if("row"==Ja.info.rank){var jb=P.match.to.fieldIndex;
for(Xa=0;Xa<Ga.data.length;Xa++)if(Ta=Ga.data[Xa][P.match.match],Ta==Ja.data[ua][jb])return{type:Ga.field[P.fieldIndex][1],value:Ga.data[Xa][P.fieldIndex],flags:Ga.flags&&Ga.flags[La]?Ga.flags[La][Xa]:void 0,status:Ga.dataStatus?Ga.dataStatus[Xa]:void 0}}else if("col"==Ja.info.rank)for(jb=P.match.to.fieldIndex,Xa=0;Xa<Ga.data.length;Xa++)if(Ta=Ga.data[Xa][P.match.match],Ta==Ja.data[jb][ua])return{type:Ga.field[P.fieldIndex][1],value:Ga.data[Xa][P.fieldIndex],flags:Ga.flags&&Ga.flags[La]?Ga.flags[La][Xa]:
void 0,status:Ga.dataStatus?Ga.dataStatus[Xa]:void 0}}}else if(ua<Ga.data[Ja].length)return La=Ga.field[Ja][0].toLowerCase(),{type:Ga.field[Ja][1],value:Ga.data[Ja][ua],flags:Ga.flags&&ta.flags[La]?Ga.flags[La][ua]:void 0,status:Ga.dataStatus?Ga.dataStatus[ua]:void 0}}}else if(P&&"order"==P.fieldIndex)return{type:"i",value:ta.info.dataBegin+ua+1};return{type:"c",value:void 0}}function G(P){if(db){var ua=P;1==ma.orderReverse&&0>ma.initCursorPos&&(ua=db.length-1-P);if(db[ua])return{y:-na+db[ua][1]+
kb.top,height:db[ua][0]}}else return 1==ma.multiseriate.show&&ma.multiRowHeight?{y:-na+P*ma.multiRowHeight+kb.top,height:ma.multiRowHeight}:{y:-na+P*ma.rowHeight+kb.top,height:ma.rowHeight}}function B(P){if(ma.containCell&&0!=ma.containCell.show&&1==ma.containCell.show)switch(M||(M=[]),P){case "rect":return{left:0,top:0,width:ja,height:ma.containCell.size?ma.containCell.size.height:0}}return!1}function L(P,ua){ua=void 0===ua?!0:ua;Qc();var Ga=N.callInfo?N.callInfo[P]:void 0;if(void 0!=Ga)for(var Ja=
0;Ja<Ga.length;Ja++)if("page"==Ga[Ja].id)if("setActivePageWithBounds"==Ga[Ja].action.substr(0,23)){var Xa=Ga[Ja].action.split("'");if(null==Xa)return;N.page.setActivePageWithBounds(P,Xa[1],["code"],getBoundValues(Fa,Y,oa,la.index,jc()))}else{Xa=Ga[Ja].action.indexOf("(");var La=Ga[Ja].action.indexOf(")");La=eval(Ga[Ja].action.slice(Xa+1,La));Xa=Ga[Ja].action.slice(0,Xa);if(null!=N.funcNameMap.thisPage[Xa])N.funcNameMap.thisPage[Xa](La)}else if(null!=Ga[Ja].id){if(Xa=globalPage.getActivePage())if(Xa=
Xa.getObjectByElementId(Ga[Ja].id))if(Ga[Ja].param){if(N.page.getObjectByElementId(Ga[Ja].id)){Xa="obj."+Ga[Ja].action+"("+Ga[Ja].param+")";try{eval(Xa)}catch(Eb){console.log(Eb)}}}else"doOpenNewsDetails"!=P&&("setVariablesValue"==P?ta&&Xa.setVariablesValue(ta.field,ta.data[la.index-Ma]):"setExternalTable"==P?ta&&Xa.setVariablesValue(ta):"setVariablesValue"==Ga[Ja].function&&ta&&Xa.setVariablesValue(ta.field,ta.data[la.index-Ma]))}else Ga[Ja].callback?(Xa={target:N,data:N.getRowData(la.index),row:la.index,
col:Na.col,colObject:ca[Na.col]},Ga[Ja].callback(Xa)):Ga[Ja].action&&(getBoundValues(Fa,Y,oa,la.index,jc()),N.doAction(Ga[Ja].action));else if(N.callInfo)for(Ga=0;Ga<N.callInfo.length;Ga++)for(Ja in N.callInfo[Ga])switch(Xa=N.callInfo[Ga][Ja][0],Ja){case "doClickOnRow":if(null!=Xa.field&&null!=Xa.callback)for(La=0;La<ca.length;La++)if(ca[La].objects){var Ta=ca[La].objects[la.index].getCells(),jb={};if(Ta){for(var qb=0;qb<Ta.length;qb++)Ta[qb].field&&Ta[qb].object.value&&(jb[Ta[qb].field]=Ta[qb].object.value);
for(qb=0;qb<Ta.length;qb++){var sb=Ta[qb].object.rect;sb&&clickEvent.offsetX>=sb.x&&clickEvent.offsetX<=sb.x+sb.width&&clickEvent.offsetY>=sb.y-sb.height&&clickEvent.offsetY<=sb.y+sb.height&&Ta[qb].field==Xa.field&&Xa.callback(jb,N,Ta)}}}}ua&&(0==ma.enterConfirmation||1==ma.enterConfirmation&&"doEnter"==P)&&N.synchPageBoundValue(P,0,P);"doSelectChanged"==P&&ma.callback_onSelectChange&&ma.callback_onSelectChange(jc())}function ba(P){if(null!=ta&&null!=ta.data)if("row"==ta.info.rank){if(ta.data[la.index-
Ab]||null!=Xb&&ta.data&&ta.data[Xb])la.preIndex=la.index,L("doSelectChanged")}else"col"==ta.info.rank&&(ta.data[0]&&ta.data[0][la.index-Ab]||null!=Xb&&ta.data[0]&&ta.data[0][Xb])&&(la.preIndex=la.index,L("doSelectChanged"))}var N=this;this.page=b;var E=c,V,F=null,M,X=null;this.enableActive=!0;var aa=xDeepCopy(g),ia=xDeepCopy(k),fa=xDeepCopy(q),T=!1,Y=xDeepCopy(f);null==Y&&(Y={});Y.totalPages=0;Y.pageNo=0;Y.totalRows=0;if(A)for(var O in Y)for(var K in A)if(O==K){Y[O]=A[K];break}this.callInfo=p;if(this.callbacks=
v)this.queryIndex=this.callbacks.getQueryIndex(this);var Z=[],pa,oa,Aa,ta,Q=!0,sa,ra=1,la={index:0,preIndex:-1,locateValue:null,rect:{left:0,top:0,width:0,height:0}},Na={data:void 0,multiSelected:[],beginSelectedIndex:0,lastCursorIndex:null,col:null},Wa=0,na=0,ha=0,ea,ja,da,Oa,Pa,hb=!1,Ma=0,rb=0,zb=0,Jb=!1,Cb=!1,Db,cb,Ab,Gb,Ra=0,Sb,Ub,Ob,Fb,Ya,fb=[],$a=null,za=null,Ka=!1,ab=0,W=0,Ca=!0,ca,ya,bb=[],ib,gb,Bb="",Hb,nb,Pb=!1,bc=!1,Tb,Xb,ma={marginLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginBackgroundColor:"",
active:{type:""},header:{show:!0,height:36,backgroundColor:"#ddd",color:"#222",fontFamily:xGlobal.systemFont,splitColor:"#cacaca",splitLineHeight:36,borderColor:"#cacaca",textAlign:"center",paddingLeft:"3px",paddingRight:"3px",fontSize:16,shadowColor:"#000000",fullWidth:!1,fontBold:!1,full:!1,enableAdjust:!0,group:""},multiseriate:{show:!1,maxCol:100,colMaxWidth:200,showColSplitLine:!1,multiColsSplitColor:"transparent"},rotate:{rotate:!1,field:"code",name:"\u62a5\u4ef7\u9879\u76ee",nameWidth:120,
titleCell:{},dataWidth:90,dataCell:{}},title:{show:!1,height:36,backgroundColor:"#ddd",color:"#222",position:"top",font:"14px DINPro-Medium,DINPro",text:" {{ result information }} \uff01",splitColor:"",textAlign:"left",paddingLeft:"3px",paddingRight:"3px"},cell:{backgroundColor:"#fefefe",borderColor:"#bbb",color:"#111",colors:["#333","#f33","#090","#000"],fontFamily:xGlobal.systemFont,fontSize:13,fontBold:!1,top:0,left:0,paddingLeft:3,paddingRight:3,default:null},onlyOnePage:!1,paging:!1,localPaging:!1,
isFocus:!1,rowHeight:26,rowHeightField:"",rowLineHeight:18,wheelOnFocus:!1,cursorOnWheel:!1,preQueryItems:0,prepareHalfPage:!0,resetOption:!0,queryResetX:!0,showCrossBackground:!0,showContentHeight:!1,backgroundColor:"#fefefe",crossBackgroundColor:"#eee",frozenColumnBackgroundColor:"#f0f0f0",frozenColumnCrossBackgroundColor:"#e0e0e0",showRowSplitLine:!0,rowSplitLineDash:[0],rowSplitLineColor:"#E9EAEC",rowSplitLineHeight:1,showColSplitLine:!0,colSplitLineDash:[0],colSplitLineColor:"#ddd",frozenColumn:!1,
frozenColumns:0,showFrozenSplitLine:!1,frozenSplitLineDash:[0],frozenSplitLineColor:"#aaa",scrollerFrozenSplitLineColor:"#dbdbdb",borderColor:"#transparent",cursorColor:"#ccc",selectedColor:"#aaa",frozenColumnSelectedColor:"#999",overBackgroundColor:"",focusSelectCursorColor:{type:"",width:3,backgroundColor:"#b40"},toolbarSplitLineColor:"",expandColor:"#888",adjustHeaderColor:"rgba(128,128,128,0.3)",alwaysShowSelected:!1,selectedIsCursor:!0,enableMultiSelected:!1,showMultiSelectedBackground:!0,initCursorPos:"",
enableOrderBy:!1,orderBy:"",orderByType:"",orderByLocal:!1,orderBy3S:!1,orderByDont:[""],orderReverse:!1,adjustDataOrder:{enable:!1,model:"timely",field:"",backgroundColor:"rgb(128,0,0,0.6)",callback_adjustOrder:null},scroller:{scrollerV:"show",scrollerH:"show",model:"apple",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"},listBoxShadow:{show:!1,hShadow:0,vShadow:0,blur:0,spread:0,color:"#333"},toolBarPos:"top",popupMenu:"",popupMenuPrepareAction:"",slidingShadow:!0,dynamicSynchBound:{onceOnCursor:null,
synchFieldName:null,alwaysOnCursor:null,cursorSynch:"",setExtenalTableTo:[{target:"",tableName:"",keyName:""}]},showGrid:{top:!0,bottom:!0,left:!0,right:!0},branchSend:!0,autoCursor:!1,enterConfirmation:!1,dragX:!1,dragDropCallback:!1,hasCheckBox:!1,checkboxColumnNo:0,firstRowHeight:0,moveCallback:"",plugsColors:["#000000","#666666","transparent","#DBE3E1"],callback_doPaste:null,callback_onKeydown:null,callback_enter:null,callback_queryBefore:null,callback_drawBefore:null,callback_drawAfter:null,
callback_getSelected:null,callback_adjustHeader:null,treeModel:"normal",treeItemBackground:"",resize:null,cursorVariables:null},fc=!1,wa=0,Ea=0,Va=!1,I=!1,D=0,S=0,xa=0,Ba={from:0,to:null},Ia=null,Da=[],lb,wb,Fa,Nb=0,yb=0,xb=0,ob=0,kb={left:0,top:0,right:0,bottom:0},Vb=0,Lb=0,va=1,Qa=!1,Ua,Sa,db,vb=!0,ub=!1,R=!1,ka=0,qa=!1,Ha=!1;1==ma.paging&&(null==Y&&(Y={}),Y.pageNo=0);this.getPage=function(){return this.page};this.getCanvas=function(){return E};this.getContext=function(){return V};this.getOption=
function(){return ma};this.getQueryInfo=function(){return aa};this.getVariables=function(){return Y};this.getParentDiv=function(){return E};this.getObjectClassName=function(){return"xList"};this.getObjectId=function(){return E.id};this.setQueryInfo=function(P){aa=xDeepCopy(P);N.query();1==Ca&&(ca=null,hb=!1)};this.setOffsetY=function(P){na+=P;N.draw()};this.getOffsetY=function(){return na};this.moveToBottom=function(){ma.rowHeight&&Ra&&ea&&(la.index=Ra-1,uc(),N.draw(!0))};this.setOffsetX=function(P){ha+=
P;N.draw()};this.getOffsetX=function(){return ha};var Za=0,eb=0;this.onTouchStart=function(P){Za=P.touches[0].clientY;eb=P.touches[0].clientX;mb=Date.now();P.touches[0]&&P.touches[0].clientY&&(Zb=P.touches[0].clientY)};this.onTouchLeave=function(P){pb=!1;W=touchMovingOffsetX=ab=eb=Za=0;tb=Date.now();P.changedTouches[0]&&P.changedTouches[0].clientY&&(Rb=P.changedTouches[0].clientY);0<tb-mb&&(P=(Rb-Zb)/(tb-mb),0<Rb-Zb?C(Math.abs(P),.5,1):C(Math.abs(P),.5,0))};var pb=!1;this.onTouchMove=function(P){var ua=
P.touches[0].clientY-Za,Ga=P.touches[0].clientX-eb;if(1!=ma.paging&&ta&&null!=ta.data){Q=!1;if(0!=ua){ua=0-ua;var Ja=ma.rowHeight*Ra;Da&&0<Da.length&&(Ja=0==Ra?ma.firstRowHeight:ma.firstRowHeight+ma.rowHeight*Ra);if(ma.moveCallback&&!ma.moveCallback()){W=ua;return}pb||(mb=Date.now(),Zb=P.touches[0].clientY);pb=!0;Math.abs(ua)>Math.abs(Ga)&&(ea<Ja?(0==ab?(ab=na-W,na+=ua-W):na=ab+ua,na+ea>Ja&&(na=Ja-ea),0>na&&(na=0),N.draw(!0)):0!=na&&(na=0,N.draw(!0)))}0!=Ga&&(Ga=0-Ga,Ja=Oa,pb||(mb=Date.now()),pb=
!0,Math.abs(ua)<Math.abs(Ga)&&(ja<Ja?(0==touchMovingOffsetX?(touchMovingOffsetX=ha,ha+=Ga):ha=touchMovingOffsetX+Ga,ha+ja>Ja&&(ha=Ja-ja),0>ha&&(ha=0),N.draw(!0)):0!=ha&&(ha=0,N.draw(!0))))}0!=na&&(P.stopPropagation?P.stopPropagation():P.cancelBubble=!0,!xGlobal.passiveSupported&&P.preventDefault?P.preventDefault():P.returnValue=!1)};var mb=0,tb=0,Zb=0,Rb=0;this.destroy=function(){E.width=E.height=1;E.removeEventListener("mousemove",N.onMouseMove);E.removeEventListener("mouseout",N.onMouseOut);E.removeEventListener("mousedown",
N.onMouseDown);E.removeEventListener("mouseup",N.onMouseUp);E.removeEventListener("mousewheel",N.onMouseWheel);E.removeEventListener("contextmenu",N.onContextMenu);E.removeEventListener("dblclick",N.onDblClick);Sb&&(Sb.destroy(),Sb=null);Ub&&(Ub.destroy(),Ub=null);if(ib)for(var P=0;6>P;P++)ib[P]&&ib[P].destroy();N.callbacks.sendCancelQuery(N.queryIndex);E.parentElement.removeChild(E);V=E=null};this.show=function(){if(1!=F){null!=F&&N.callbacks&&N.callbacks.sendRestartQuery(N.queryIndex);F=!0;for(var P=
0;6>P;P++)ib&&ib[P]&&ib[P].show();N.draw()}};this.hidden=function(P){if(0!=F){F=!1;1!=P&&N.callbacks.sendPauseQuery(N.queryIndex);for(P=0;6>P;P++)ib&&ib[P]&&ib[P].hidden();xb=ob=0;E.widget=E.height=1}};this.isShow=function(){return F};this.clearQueryData=function(){var P=aa;-1!=P.indexOf("{{")&&(P=replaceVariablesValue(P,Y,oa));for(var ua=0;ua<P.length;ua++)P[ua]&&P[ua].query&&(P[ua].query.script=null);null!=E.linkList&&(E.linkList=null);ta=oa=null;clearFlag=!0;la.preIndex=null;Ma=na=la.index=0};
this.initOffSet=function(){na=ha=0;N.draw()};var ac=function(P,ua){if(null!=P&&(""==P||0<=P.indexOf("{{ ")))if(ua.callback_errorCondition){if(P=ua.callback_errorCondition(ua,P,jc()),typeof P!=P==null)return!1}else if(1==ua.filterNull){var Ga=P.split("and");P=[];ua="";for(var Ja=0;Ja<Ga.length;Ja++)-1==Ga[Ja].indexOf("{{")&&P.push(Ga[Ja]);for(Ga=0;Ga<P.length;Ga++)ua=0==Ga||Ga==ua.length-1?ua+P[Ga]:ua+("and "+P[Ga]);P=ua}else return;return P},hc=function(P,ua){var Ga=null;if("none"==P.limit&&ma.enableOrderBy&&
ma.orderByLocal)Ga=null;else if(1==Q&&""!=ma.initCursorPos)Ga=P.limit?P.limit:[ma.initCursorPos,zb+ma.preQueryItems];else if(void 0!=Ma)if(1==ma.paging){if(null==P.query||P.query.script!=ua)Ma=na=ha=0;Ga=[Ma+1,zb]}else if(0>ma.initCursorPos&&1==ma.orderReverse)if(P=ta.info.begin-zb,ua=zb+1,Ga=Ma+zb+1,ta.info.begin>Ra-Ga)ua>Ra-Ga&&(P=1,ua=Ra),Ga=[P,ua];else return;else{if(null==P.query||P.query.script!=ua)1==I?I=!1:1==ma.resetPosition&&(1==ma.queryResetX&&(ha=0),Ma=na=0);Ga=1==ma.multiseriate.show?
[Ma+1,zb+ma.preQueryItems]:[Ma+1,zb+1+ma.preQueryItems];P.limit&&P.limit.init&&(Ga=[P.limit.begin,P.limit.items+ +ma.preQueryItems],na=Ga[0]*ma.rowLineHeight,Ma=P.limit.begin,P.limit.init=!1)}return Ga};this.query=function(P){if(null!=aa){var ua=aa;-1!=ua.indexOf("{{")&&(ua=replaceVariablesValue(ua,Y,oa));if(!(null==ua||ua[0]&&ua[0].callback_object)){va++;if(1!=P){if(1!=F||0==zb)return;ic();if(null==E||0==E.offsetHeight||0==E.offsetWidth)return}if(!qa){qa=!0;var Ga=Qa=!1;if(null==Ma||1==Cb)Cb=!1,
Ga=!0;for(var Ja=0,Xa={},La=0;La<ua.length;Xa={$jscomp$loop$prop$_time$533:Xa.$jscomp$loop$prop$_time$533},La++)if(null==ua[La]||ua[La].queryStatus)ua[La]&&1==ua[La].queryStatus&&(ua[La].queryStatus=null,Ja++);else{var Ta=null,jb=null,qb=null;ua[La].server&&""!=ua[La].server&&(Ta=ua[La].server.slice(10),Y&&Y[Ta]&&""!=Y[Ta]&&(qb=Y[Ta]));var sb=null;ua[La].http&&(sb=replaceVariablesValue(ua[La].http,Y,oa));if(ua[La].sql&&(null==sb||"http"!=sb.substr(0,4).toLowerCase())){jb=null;ua[La].limit&&ua[La].limit.mode&&
"window"==ua[La].limit.mode&&void 0!=Ma&&(jb=[Ma,rb+Ma+2]);Ta=replaceVariablesValue(ua[La].sql,Y,oa,null,jb);Z[La]=parseTableName(Ta);if(0==La||1==ua[La].mainOrder){sb=ac(Ta,ua[La]);null!=sb&&(Ta=sb);Ta=replaceVariablesValue(Ta,Y,oa,null,jb);if(1==ma.enableOrderBy&&""!=ma.orderBy&&0==ma.orderByLocal&&ca)for(jb=0;jb<ca.length;jb++){sb=null!=ca[jb].cells[0].orderByAlias?ca[jb].cells[0].orderByAlias:ca[jb].cells[0].field;if(ca[jb].cells&&ma.orderBy.toLocaleLowerCase()==sb.toLocaleLowerCase()){ma.orderByType&&
(Ta+=" order by "+ma.orderBy+" "+ma.orderByType);ca[jb].order=ma.orderByType;for(jb++;jb<ca.length;jb++)ca[jb].order=0;break}ca[jb].order=0}else if(sb=Ta.indexOf("order by"),-1!=sb&&ca){var Eb=Ta.substr(sb+9).trim().split(" ");for(sb=0;2>sb&&sb<Eb.length;sb++)Eb[sb]=Eb[sb].trim().toLowerCase();for(jb=0;jb<ca.length;jb++)for(sb=ca[jb].order=0;sb<ca[jb].cells.length;sb++)if(ca[jb].cells[sb].field.toLowerCase()==Eb[0]){ca[jb].order=Eb[1];break}}if(0<bb.length){Ta+=" expand(";jb="";for(sb=0;sb<bb.length;sb++)bb[sb]&&
(jb+=bb[sb]+",");Ta+=jb.slice(0,-1)+")"}jb=1==ma.orderByLocal?null:hc(ua[La],Ta)}else{Ta=ac(Ta,ua[La]);if(null==Ta)continue;jb=ua[La].limit&&"synch"==ua[La].limit.mode?hc(ua[La],Ta):null}sb=null;jb&&(sb=[jb[0],jb[1]]);null==Ta||""==Ta||0<=Ta.indexOf("{{ ")||(null==ua[La].query||ua[La].query.script!=Ta?(Ga=!0,ua[La].queryStatus=1,1==Ca&&(ca=null,hb=!1)):ua[La].query.script==Ta&&(null==jb||ua[La].query&&ua[La].query.orgLimit&&ua[La].query.orgLimit[0]==jb[0]&&ua[La].query.orgLimit[1]==jb[1])?ua[La].queryStatus=
null:(ua[La].queryStatus=1,jb?-1!=jb[0]&&(oa&&oa[La]&&oa[La].table&&(Eb=oa[La].table.info,jb[0]>=Eb.begin&&jb[0]+jb[1]<=Eb.begin+Eb.rows&&(ua[La].queryStatus=null),ma.multiseriate.show&&0>ma.initCursorPos&&la.index>Ma&&Ma>=Ab&&la.index<Ma+zb&&Ma+zb<=Ra&&Ab+Gb>=Ra?ua[La].queryStatus=null:jb[0]-1+jb[1]>=Eb.totalRows&&0>ma.initCursorPos&&(jb[0]=-1,ua[La].queryStatus=1)),-1!=jb[0]&&ma.prepareHalfPage&&(jb[0]-=parseInt(jb[1]/2),0>jb[0]&&(jb[0]=0),jb[1]+=2*parseInt(jb[1]/2))):ua[La].query.script==Ta&&(ua[La].queryStatus=
null)),1==ua[La].queryStatus&&(ua[La].query={script:Ta,limit:jb,orgLimit:sb,server:qb},Ga=ua[La].changed=!0,Ha=0==La&&jb&&-1==jb[0]?!0:!1))}else if(ua[La].http&&sb&&""!=sb){ua[La].field&&replaceVariablesValue(ua[La].field,Y,oa);var Mb=ua[La].script?replaceVariablesValue(ua[La].script,Y,oa):replaceVariablesValue(ua[La].condition,Y,oa);qb=ac(Mb,ua[La]);if(null!=qb){Mb=qb;qb=zb;1==ma.paging?(qb=rb,null==Y.pageNo&&(null==Y&&(Y={}),Y.pageNo=0)):(Y.pageNo=Math.trunc(Ma/qb),ta&&oa[La]&&oa[La].table&&oa[La].table.info&&
Ma+qb>ta.info.begin+ta.info.rows&&Ma+qb<=oa[La].table.info.totalRows&&Ma>=oa[La].table.info.begin&&Y.pageNo++);if(oa&&oa[La]&&oa[La].table&&oa[La].table.info&&1!=ma.paging)if(Ma>=oa[La].table.info.begin&&Ma+qb<=oa[La].table.info.begin+oa[La].table.info.rows){if(Bb==Mb)if(0==Jb)continue;else Jb=!1}else if(oa[La].table.info.dataLength&&Ma+qb<=oa[La].table.info.begin+oa[La].table.info.dataLength&&Ma>=oa[La].table.info.begin&&oa[La].table.info.dataRows-oa[La].table.info.begin==oa[La].table.info.dataLength&&
Bb==Mb&&0==Jb)continue;ua[La].query&&ua[La].query.condition!=Mb&&1==ma.autoCursor&&(na=0,1==ma.queryResetX&&(ha=0),la.preIndex=null,la.index=0,Y.pageNo=0);Ta=void 0;1==Q&&""!=ma.initCursorPos?0>ma.initCursorPos?Ta=[-1,qb]:Y.pageNo&&(Ta=[Y.pageNo,qb]):void 0!=Ma&&(Ta=[Y.pageNo,qb]);null!=ua[La].limit?ua[La].limit.mode&&"main"==ua[La].limit.mode?jb=Ta:null!=ua[La].limit.begin&&null!=ua[La].limit.items&&(jb=[ua[La].limit.begin,ua[La].limit.items]):jb=0==La?Ta:[];if(!(null==Mb||""==Mb||0<=Mb.indexOf("{{ "))&&
(Ta=";"+Mb,P||null!=Ma&&(null==ua[La].query||oa&&oa[La]&&oa[La].table&&Ma<oa[La].table.info.begin||Ta!=ua[La].query.script||ua[La].query.limit&&jb&&(ua[La].query.limit[0]!=jb[0]||ua[La].query.limit[1]!=jb[1])))){1==Ca&&(ca=null,hb=!1);if(null==ua[La].query||Ta!=ua[La].query.script)0<La&&ua[0].http||Vb++;ua[La].queryStatus=1;ua[La].query={script:Ta,limit:jb,field:"",condition:Mb,id:Vb,server:sb};N.callbacks&&("undefined"!=typeof GLink_client?(Xa.$jscomp$loop$prop$_time$533=void 0,GSession.sharedInstance().getHttpUrl()?
(U(ua[La]),N.callbacks.sendHttpQuery(N.queryIndex,ua,La,N.setTable),clearInterval(Xa.$jscomp$loop$prop$_time$533)):Xa.$jscomp$loop$prop$_time$533=setInterval(function(Qb){return function(){GSession.sharedInstance().getHttpUrl()&&(U(ua[La]),N.callbacks.sendHttpQuery(N.queryIndex,ua,La,N.setTable),clearInterval(Qb.$jscomp$loop$prop$_time$533))}}(Xa),1)):N.callbacks.sendHttpQuery(N.queryIndex,ua,La,N.setTable));Bb=Mb}}}}Ga&&(N.callbacks?N.callbacks.sendQuery(N.queryIndex,ua,N.setTable):GLink_client.sharedInstance().sendMessage("query",
_miniFrameId,_miniPageId,_miniIndex,aa,N.setTable),Bb=Mb,0==Ja&&(va=0));qa=!1}}}};this.submitData=function(P,ua,Ga){N.sendSubmit([P],ua,Ga)};this.submit=function(P){"String"==P.constructor.name&&(P=[{submit:P,callback:null}]);for(var ua={},Ga=0;Ga<P.length;ua={$jscomp$loop$prop$state$535:ua.$jscomp$loop$prop$state$535},Ga++){var Ja=getSubmissionContents(ia,P[Ga].submit);ua.$jscomp$loop$prop$state$535=!0;Ja.map(function(La){return function(Ta){if(Ta.beforeSubmit){var jb=jc();jb.query=Ta;1!=Ta.beforeSubmit(jb)&&
(La.$jscomp$loop$prop$state$535=!1)}}}(ua));if(0==ua.$jscomp$loop$prop$state$535)break;var Xa=null;1==P[Ga].row&&(Xa=N.getRowData(la.index));1==P[Ga].query&&(P[Ga].callback=N.reload);N.sendSubmit(Ja,P[Ga].callback,Xa)}};this.sendSubmit=function(P,ua,Ga){for(var Ja=0;Ja<P.length;Ja++)if(null!=P[Ja]){var Xa=null;P[Ja].http&&(Xa=replaceVariablesValue(P[Ja].http,Y,oa));if(P[Ja].sql){var La=replaceVariablesValue(P[Ja].sql,Y,oa);var Ta;P[Ja].server&&Y&&Y[P[Ja].server.slice(10)]&&(Ta=Y[P[Ja].server.slice(10)]);
P[Ja].query={script:La,limit:void 0,server:Ta};N.callbacks.sendSubmit(N.queryIndex,P,ua)}else if(P[Ja].http){var jb=replaceVariablesValue(P[Ja].field,Y,oa,Ga),qb=replaceVariablesValue(P[Ja].condition,Y,oa,Ga);La=jb+";"+qb;null!=P[Ja].query&&La==P[Ja].query.script||Lb++;P[Ja].query={script:La,limit:null,field:jb,condition:qb,id:Vb,server:Xa};N.callbacks.sendHttpSubmit(N.queryIndex,P,Ja,ua)}}};this.setSubmitList=function(P){ia=xDeepCopy(P)};this.getTableName=function(P){null==P&&(P=0);return Z[P]};
this.getCursorValue=function(){return ta.data[la.index-Ab]};this.setVariablesValue=function(P,ua,Ga){var Ja=!1;if("Object"==P.constructor.name&&null==ua)for(var Xa in P)Y[Xa]!=P[Xa]&&(Y[Xa]=P[Xa],Ja=!0);else if(ua)for(Xa in Y)for(var La=0;La<P.length;La++)P[La][0]==Xa&&Y[Xa]!=ua[La]&&(Y[Xa]=ua[La],Ja=!0);null!=Ga&&(Ja=Ga);1==Ja&&(Q=!0,aa&&aa[0]&&aa[0].callback_object?(ua=N.onDoCallback(aa[0].callback_object),N.setTable(ua)):N.query())};this.setQuery=function(P){aa.sql=[{name:"query",sql:P,prop:null}];
N.query();1==Ca&&(ca=null,hb=!1)};this.setIgnoreOverlap=function(P){Jb=P};this.getTable=function(){return ta};var ic=function(){N.page&&N.page.setPageBoundStatusForObject(N);if(wb)for(var P=0;P<wb.length;P++)wb[P].boundStatus(Y)};this.synchBoundValue=function(P,ua,Ga,Ja){if(Ja!=N&&void 0!=Fa&&0<Fa.length&&Ga){P=!1;for(ua=0;ua<Ga.length;ua++)if(null!=Ga[ua]&&null!=Ga[ua].bound)for(var Xa=0;Xa<Fa.length;Xa++)if((null==Fa[Xa].type||"synch"==Fa[Xa].type||"receive"==Fa[Xa].type)&&Fa[Xa].id==Ga[ua].bound.id&&
Fa[Xa].variable==Ga[ua].bound.variable){if(Ga[ua].bound.variable&&"variables."==Ga[ua].bound.variable.slice(0,10)){if(Xa=Ga[ua].bound.variable.split("."),Y){var La=Y;for(Ja=1;Ja<Xa.length;Ja++)if(La[Xa[Ja]]&&"object"==typeof La[Xa[Ja]])La=La[Xa[Ja]];else{if(La[Xa[Ja]]!=Ga[ua].value){if(Y[Xa[1]]&&"Array"==Y[Xa[1]].constructor.name)filterMatch(Ga[ua].value,Y,Xa[1],N);else switch(Xa.length){case 2:Y[Xa[1]]=Ga[ua].value;break;case 3:Y[Xa[1]]&&(Y[Xa[1]][Xa[2]]=Ga[ua].value);break;case 4:Y[Xa[1]][Xa[2]]&&
(Y[Xa[1]][Xa[2]][Xa[3]]=Ga[ua].value);break;case 5:Y[Xa[1]][Xa[2]][Xa[3]]&&(Y[Xa[1]][Xa[2]][Xa[3]][Xa[4]]=Ga[ua].value);break;case 6:Y[Xa[1]][Xa[2]][Xa[3]][Xa[4]]&&(Y[Xa[1]][Xa[2]][Xa[3]][Xa[4]][Xa[5]]=Ga[ua].value)}Qa=P=!0}break}}}else if(Ga[ua].bound.variable)try{eval(Ga[ua].bound.variable)!=Ga[ua].value&&(eval(Ga[ua].bound.variable+"=boundValue[i].value"),P=!0)}catch(Ta){console.log(Ta)}break}if(1==P)for(Xa=0;Xa<Fa.length;Xa++)if("cursor"==Fa[Xa].type){for(Ja=0;Ja<Ga.length;Ja++)if(Fa[Xa].id==
Ga[Ja].bound.id){la.locateValue=Ga[Ja].value;mc(Xa);break}break}Q=!0;aa&&aa[0]&&aa[0].callback_object?(Ga=N.onDoCallback(aa[0].callback_object),N.setTable(Ga)):N.query()}};this.clearCurosr=function(){la.index=null;la.preIndex=null;la.locateValue=null};this.setCursorIndexTo=function(P,ua){ua=void 0===ua?!1:ua;for(var Ga=0;Ga<Fa.length;Ga++)if("cursor"==Fa[Ga].type){la.locateValue=P;1==ua||0==mc(Ga)?(Ia=P,N.clearCurosr()):Ia=null;break}};var mc=function(P){if(ta&&ta.field)for(var ua=0;ua<ta.field.length;ua++)if(ta.field[ua][0].toLowerCase()==
Fa[P].field.toLowerCase()){if("row"==ta.info.rank)for(P=0;P<ta.data.length;P++){if(ta.data[P]&&la.locateValue==ta.data[P][ua])return la.index!=Ab+P&&(la.index=Ab+P,1==ma.enableMultiSelected&&(Na.multiSelected=[],Na.multiSelected[0]=Ab+P),la.index>=Ma+rb?(Ma=la.index-rb+1,na=Ma*ma.rowHeight,N.query()):la.index<Ma||la.index==ta.info.begin&&0<ta.info.begin?(Ma=la.index,Ma==ta.info.dataBegin&&Ma--,0>Ma&&(Ma=0),na=Ma*ma.rowHeight,N.query()):(la.index==Ma&&(na=Ma*ma.rowHeight),N.draw(!0))),N.draw(!0),!0}else if("col"==
ta.info.rank)for(P=0;P<ta.data[ua].length;P++)if(ta.data[ua][P]&&la.locateValue==ta.data[ua][P])return la.index!=Ab+P&&(la.index=Ab+P,1==ma.enableMultiSelected&&(Na.multiSelected=[],Na.multiSelected[0]=Ab+P),P>=rb?(Ma=P-rb+1,na=Ma*ma.rowHeight,N.query()):P<Ma||la.index==ta.info.begin&&0<ta.info.begin?(Ma=P,na=Ma*ma.rowHeight,N.query()):N.draw(!0)),!0;break}return!1};this.setScheme=function(P,ua){if(Hb!=P||nb!=ua){if(P.xList){var Ga;(Ga=P.xList[ua]?P.xList[ua]:P.xList.normal)&&xCopyAllTo(Ga,ma)}for(Ga=
0;6>Ga;Ga++)ib&&ib[Ga]&&P.xControl&&P.xControl&&ib[Ga].setScheme(P.xControl,ua);if(wb&&wb){for(Ga=0;Ga<wb.length;Ga++)wb[Ga].setScheme(P,ua);ic()}Hb=P;nb=ua;0==setControlSchemeWithWidget(P,ca)?(N.draw(!0),setControlSchemeWithWidget(P,ca)):N.draw(!0)}};this.setParentDiv=function(P){};this.setOption=function(P){xCopyTo(P,ma);P.margin&&(ma.marginLeft=P.margin,ma.marginTop=P.margin,ma.marginRight=P.margin,ma.marginBottom=P.margin);P.marginLeft&&(ma.marginLeft=P.marginLeft);P.marginTop&&(ma.marginTop=
P.marginTop);P.marginRight&&(ma.marginRight=P.marginRight);P.marginBottom&&(ma.marginBottom=P.marginBottom);P.marks&&(ma.marks=xDeepCopy(P.marks));P.init&&(ma.init=xDeepCopy(P.init));P.rotate&&(P.rotate.dataCell&&(ma.rotate.dataCell=xDeepCopy(P.rotate.dataCell)),P.rotate.titleCell&&(ma.rotate.titleCell=xDeepCopy(P.rotate.titleCell)));vc(!0);P.cell&&P.cell.default&&(ma.cell.default=P.cell.default);"hidden"!=ma.scroller.scrollerV?(null==Sb&&(Sb=new xScroll(a,E.parentElement,N,"vertical",ma.scroller.model),
Sb.setPosition(void 0,ma.rowHeight,1,0)),Sb.setOption(P)):Sb=null;"hidden"!=ma.scroller.scrollerH?(null==Ub&&(Ub=new xScroll(a,E.parentElement,N,"horizontal",ma.scroller.model),Ub.setPosition(0,void 0,0,0,0)),Ub.setOption(P)):Ub=null;P.grid&&(null==ma.grid?ma.grid=xDeepCopy(P.grid):xCopyAllTo(P.grid,ma.grid));P.gridBottom&&(null==ma.gridBottom?ma.gridBottom=xDeepCopy(P.gridBottom):xCopyAllTo(P.gridBottom,ma.gridBottom));P.gridRight&&(null==ma.gridRight?ma.gridRight=xDeepCopy(P.gridRight):xCopyAllTo(P.gridRight,
ma.gridRight));P.adjustDataOrder&&xCopyAllTo(P.adjustDataOrder,ma.adjustDataOrder);P.dynamicSynchBound&&xCopyAllTo(P.dynamicSynchBound,ma.dynamicSynchBound);P.containCell&&(null==ma.containCell?ma.containCell=xDeepCopy(P.containCell):xCopyAllTo(P.containCell,ma.containCell));P.callback_doPaste&&(ma.callback_doPaste=P.callback_doPaste);P.callback_onKeydown&&(ma.callback_onKeydown=P.callback_onKeydown);P.callback_enter&&(ma.callback_enter=P.callback_enter);P.callback_queryBefore&&(ma.callback_queryBefore=
P.callback_queryBefore);P.callback_drawAfter&&(ma.callback_drawAfter=P.callback_drawAfter);P.callback_drawBefore&&(ma.callback_drawBefore=P.callback_drawBefore);P.callback_onSelectChange&&(ma.callback_onSelectChange=P.callback_onSelectChange);P.callback_onGetSelected&&(ma.callback_onGetSelected=P.callback_onGetSelected);P.callback_getSelected&&(ma.callback_getSelected=P.callback_getSelected);P.callback_adjustHeader&&(ma.callback_adjustHeader=P.callback_adjustHeader);Ib();0==hb&&oc();1==ma.listBoxShadow.show&&
N.initListBoxShadow();P.resize&&(ma.resize=P.resize)};var Ib=function(){for(var P=0;6>P;P++){var ua=N.getGrid(P);ua&&(null==ib&&(ib=[]),ua=createGrid(ua.init.vBox,oa,Y),ua=makeCells(ua,"hBox",N.draw),ib[P]=new xCells(N,ua,"vBox",Y),ib[P].setValue(0,oa,Y),Hb&&nb&&Hb.xControl&&Hb.xControl&&ib[P].setScheme(Hb.xControl,nb))}};this.setListData=function(P){Aa=P};this.setBounds=function(P){Fa=P};this.setHeader=function(P,ua){Ca=!1;qc();ya=xDeepCopy(P);ca=xDeepCopy(P);ua&&(Da=xDeepCopy(ua));if(1==ma.header.full&&
ca)for(P=0;P<ca.length;P++)ca[P].initWidth=ca[P].width;if(1==ma.enableOrderBy&&ca)for(P=0;P<ca.length;P++)if(ca[P].cells&&ca[P].cells[0].field&&ma.orderBy.toLowerCase()==ca[P].cells[0].field.toLowerCase()){ca[P].order=ma.orderByType;break}hb=!1;oc()};this.initToolbars=function(P,ua){wb=[];for(var Ga=0,Ja=0,Xa=0;Xa<ua.length;Xa++){var La=a.document.createElement("div");La.id=E.id+"-toolbar";P.appendChild(La);wb[Xa]=new xToolbar(a,null,La,ua[Xa].option,ua[Xa].init,null,N);var Ta=a.document.createAttribute("style");
Ta.value="position:absolute;margin:0px;padding:0px;";switch(wb[Xa].position){case "bottom":Ta.value+="top:;left:0px;right:0px;bottom:"+Ja+"px;height:"+wb[Xa].height+"px";Ja+=wb[Xa].height;break;case "left":Ta.value+="left:24px;width:24px;top:0px;bottom:0px";break;case "right":Ta.value+="right:24px;width:24px;top:0px;bottom:0px";break;default:Ta.value+="left:0px;right:0px;top:"+Ga+"px;height:"+wb[Xa].height+"px",Ga+=wb[Xa].height}La.setAttributeNode(Ta);ua[Xa].option.page&&(ma.paging=!0,null==Y.pageNo&&
(null==Y&&(Y={}),Y.pageNo=0))}};this.initListBoxShadow=function(){if(1==ma.listBoxShadow.show&&null==N.boxShadowDiv){var P=ma.listBoxShadow,ua=a.document.createElement("div");ua.id=E.id+"-boxShadow";E.parentElement.appendChild(ua);var Ga=a.document.createAttribute("style");Ga.value="position:absolute;margin:0px;padding:0px;left: 0px;right: 0px;top: 0px;bottom:0px;pointer-events: none;";Ga.value+="box-shadow:"+P.hShadow+"px "+P.vShadow+"px "+P.blur+"px "+P.spread+"px "+P.color;ua.setAttributeNode(Ga);
N.boxShadowDiv=ua}};this.getToolbars=function(){return wb};this.goPage=function(P){Y.pageNo=P;la.index=Y.pageNo*rb;uc();N.draw(!0);nc()};this.goPrePage=function(){0<Y.pageNo&&(N.goPage(Y.pageNo-1),nc())};this.goNextPage=function(){Y.pageNo<Y.totalPages-1&&(N.goPage(Y.pageNo+1),nc())};this.setToolbarOption=function(P){if(wb){for(var ua=0;ua<wb.length;ua++)wb[ua].setOption(P);ic()}};var Yb=function(P,ua){var Ga={title:P[2]?P[2]:P[0],width:72,cells:[{field:P[0],textAlign:"right",refreshMode:globalSet.refreshMode}]};
if("tm"==P[1]||"tms"==P[1]||"ts"==P[1]||"th"==P[1])Ga.width=130;else if("ti"==P[1])Ga.width=156;else switch(P[1].substr(0,1)){case "i":case "x":Ga.width=92,Ga.cells[0].format="%,";case "f":case "l":Ga.cells[0].textAlign="right";Ga.cells[0].format="%,";if("row"==ta.info.rank)for(var Ja=ta.info.begin;Ja<ta.info.begin+ta.info.rows&&Ja<Ra;Ja++)ta.data[Ja]&&ta.data[Ja][ua]&&(width=8*(""+ta.data[Ja][ua]).length+6,width>Ga.width&&(Ga.width=width));else for(Ja=ta.info.begin;Ja<ta.info.begin+ta.info.rows&&
Ja<Ra;Ja++)ta.data[ua]&&ta.data[ua][Ja]?(width=8*(""+ta.data[ua][Ja]).length+6,isChina(ta.data[ua][Ja])&&(width*=2)):width=0,width+=6,width>Ga.width&&(Ga.width=width);break;case "d":Ga.width="t"==ta.field[1]?136:78;Ga.cells[0].textAlign="center";break;case "t":case "c":if("row"==ta.info.rank)for(Ja=ta.info.begin;Ja<ta.info.begin+ta.info.rows&&Ja<Ra;Ja++)width=0,ta.data[Ja]&&ta.data[Ja][ua]&&(width=8*ta.data[Ja][ua].length,isChina(ta.data[Ja][ua])&&(width*=2)),width+=6,width>Ga.width&&(Ga.width=width);
else for(Ja=ta.info.begin;Ja<ta.info.begin+ta.info.rows&&Ja<Ra;Ja++)width=0,ta.data[ua]&&ta.data[ua][Ja]&&(width=8*ta.data[ua][Ja].length,isChina(ta.data[ua][Ja])&&(width*=2)),width+=6,width>Ga.width&&(Ga.width=width);Ga.cells[0].textAlign="left";Ga.cells[0].maxLines=1;if(ma.rowHeightField&&oa)for(ua="Array"==ma.rowHeightField.constructor.name?ma.rowHeightField:[ma.rowHeightField],Ja=0;Ja<ua.length;Ja++)if(ua[Ja].toLowerCase()==P[0].toLowerCase()){Ga.cells[0].textBaseline="top";Ga.cells[0].maxLines=
-1;Ga.cells[0].lineHeight=ma.rowLineHeight;Ga.cells[0].marginLeft=8;Ga.cells[0].marginRight=8;Ga.cells[0].marginTop=8;Ga.cells[0].marginBottom=8;break}break;default:Ga.width=78}if(ma.init&&ma.init.cells)for(ua=0;ua<ma.init.cells.length;ua++)if(ma.init.cells[ua].field.toLowerCase()==P[0].toLowerCase()){Ga.cells[0]=xDeepCopy(ma.init.cells[ua]);break}return Ga};this.resetList=function(){if(0==hb||1==Ca)1==Ca&&(ca=null),oc();N.reCreateGrid(!1);vb=!0;vc(!0);N.draw(!0)};var oc=function(){if(ta&&ta.field)if(hb=
!0,ta.rotate){Ca=!0;ca=[];var P=ta.rotate.field,ua=xDeepCopy(ma.rotate.titleCell);ua.cells=[{field:P[0][0],textAlign:"left"}];ca[0]=ua;for(ua=1;ua<P.length;ua++){var Ga=xDeepCopy(ma.rotate.dataCell);Ga.title=P[ua][0];Ga.valueType=P[ua][1];Ga.cells=[{field:P[ua][0],textAlign:"left"}];ca[ua]=Ga}}else if(null==ca){ca=null;Ca=!0;ca=[];ua=ta.field;Da&&0<Da.length&&(Da=[]);for(P=0;P<ua.length;P++)ca[P]=Yb(ua[P],P),Da&&0<Da.length&&(Da[P]=Yb(ua[P],P));if(ta.info.name&&oa&&1<oa.length&&ma.init&&null!=ma.init.tableAlignField){Ga=
ta.info.name+"."+ma.init.tableAlignField;for(var Ja=1;Ja<oa.length;Ja++)if(oa[Ja].table&&oa[Ja].table.field&&oa[Ja].table.info&&oa[Ja].table.info.name)for(ua=oa[Ja].table.field,P=0;P<ua.length;P++)if(ua[P][0].toLowerCase()==ma.init.tableAlignField.toLowerCase()){for(var Xa=0;Xa<ua.length;Xa++)Xa!=P&&(ca[ca.length]=Yb(ua[Xa],Xa),ca[ca.length-1].cells[0].field=oa[Ja].table.info.name+"."+ua[Xa][0]+"["+ma.init.tableAlignField+"="+Ga+"]");break}}if(1==ma.header.fullWidth&&(ua=ja/ca.length))for(P=0;P<ca.length;P++)ca[P].width=
ua;"tree"==ta.info.mode&&(ca[0].width=220)}else if(""!=ma.header.group){Xa=ta.field;var La={name:"",parent:"",root:"",level:0,col:null},Ta=[];switch(ma.header.group){case "column":for(var jb=0;jb<Xa.length;jb++){var qb=Xa[jb][0],sb=Xa[jb][2];if(!(null==sb||2>sb.split("$r$").length)){sb=sb.split("$r$");for(var Eb=0;Eb<ca.length;Eb++)for(var Mb=0;Mb<ca[Eb].cells.length;Mb++)if(ca[Eb].cells[Mb].field&&ca[Eb].cells[Mb].field.toLowerCase()==qb.toLowerCase()){Mb=xDeepCopy(La);Mb.level=sb.length;Mb.name=
sb[sb.length-1];Mb.parent=sb[sb.length-2];Mb.root=sb[0];Mb.col=Eb;Ta[Eb]=Mb;break}}}}Xa={};for(La=0;La<ca.length;La++)null!=Ta[La]?(null==Xa[Ta[La].parent]&&(Xa[Ta[La].parent]={level:Ta[La].level-1,name:Ta[La].parent,mergeCol:[],elements:[]}),jb={level:Ta[La].level,name:Ta[La].name,col:Ta[La].col,elements:[]},Xa[Ta[La].parent].mergeCol.push(Ta[La].col),Xa[Ta[La].parent].elements.push(jb)):Xa["cells"+La]={level:null,name:ca[La].title,col:La};Ta={};for(ua in Xa)if(null==Xa[ua].level){La={};jb=Xa[ua].col;
for(Ga in ca[jb])"cells"!=Ga&&"index"!=Ga&&"objects"!=Ga&&(La[Ga]=xDeepCopy(ca[jb][Ga]));La.height||(La.height=ma.header.height);La.color=ca[jb].color?ca[jb].color:ma.header.color;La.backgroundColor=ca[jb].backgroundColor?ca[jb].backgroundColor:ma.header.backgroundColor;La.fontBold=ca[jb].fontBold?ca[jb].fontBold:ma.header.fontBold;La.fontSize=ca[jb].fontSize?ca[jb].fontSize:parseFloat(ma.header.fontSize);La.borderColor=ca[jb].borderColor?ca[jb].borderColor:ma.header.borderColor;La.borderTop=!0;La.borderBottom=
!0;La.borderLeft=!0;La.borderRight=!0;Ta[""+jb]=[[La]]}else{Eb=La=Xa[ua];Mb=!1;jb=[];qb={title:"",height:0,width:0};for(sb=0;!Mb;)0==Eb.elements.length?Mb=!0:Eb=Eb.elements[0],sb++;var Qb=void 0;Eb="";for(Mb=0;Mb<sb;Mb++){var Wb=[];if(0==Mb)Qb=xDeepCopy(qb),Qb.title=La.name,Qb.height=ma.header.height/sb,Qb.color=ma.header.color,Qb.backgroundColor=ma.header.backgroundColor,Qb.fontBold=ma.header.fontBold,Qb.textAlign=ma.header.textAlign,Qb.fontSize=parseFloat(ma.header.fontSize),Qb.borderColor=ma.header.borderColor,
Qb.borderTop=!0,Qb.borderBottom=!0,Qb.borderLeft=!0,Qb.borderRight=!0,La=La.elements,Wb.push(Qb),jb.push(Wb);else{for(var Kb=0;Kb<La.length;Kb++){var gc=La[Kb].col,dc={};for(Ja in ca[gc])"cells"!=Ja&&"index"!=Ja&&"objects"!=Ja&&(dc[Ja]=xDeepCopy(ca[gc][Ja])),"width"==Ja&&(Qb.width+=dc[Ja]),dc.height=ma.header.height/sb;dc.color=ca[gc].color?ca[gc].color:ma.header.color;dc.backgroundColor=ca[gc].backgroundColor?ca[gc].backgroundColor:ma.header.backgroundColor;dc.fontBold=ca[gc].fontBold?ca[gc].fontBold:
ma.header.fontBold;dc.fontSize=ca[gc].fontSize?ca[gc].fontSize:parseFloat(ma.header.fontSize);dc.borderColor=ca[gc].borderColor?ca[gc].borderColor:ma.header.borderColor;dc.borderTop=!0;dc.borderBottom=!0;dc.borderLeft=!0;dc.borderRight=!0;Eb+=gc+",";Wb.push(dc)}jb.push(Wb)}}Ta[Eb]=jb}gb||(gb={});for(P in Ta)ua=makeCells(Ta[P],"hBox",N.draw),gb[P]=new xCells(N,ua,"vBox",Y),gb[P].setValue(0,oa,Y)}if(ca){for(ua=P=0;ua<ca.length;ua++)ca[ua].x=P,ca[ua].index=[],P+=ca[ua].width;if(Da&&0<Da.length)for(ua=
P=0;ua<Da.length;ua++)Da[ua].x=P,Da[ua].index=[],P+=Da[ua].width}vc(!0)},qc=function(){if(ca)for(var P=ca.begin=0;P<ca.length;P++)if(ca[P].cell){for(var ua=0;ua<ca[P].cell.length;ua++)for(var Ga=0;Ga<ca[P].cell[ua].length;Ga++)delete ca[P].cell[ua][Ga];ca[P].cell=void 0}if(Da&&0<Da.length)for(P=0;P<Da.length;P++)if(Da[P].cell){for(ua=0;ua<Da[P].cell.length;ua++)for(Ga=0;Ga<Da[P].cell[ua].length;Ga++)delete Da[P].cell[ua][Ga];Da[P].cell=void 0}};this.getQueryData=function(){return oa};var nc=function(){if(wb)for(var P=
0;P<wb.length;P++)1==wb[P].isPageToolbar()&&wb[P].setPageButtons(Y.pageNo,Y.totalPages,rb,Ra,Y)};this.clearLinkValue=function(){E&&(E.linkList=null)};var jc=function(){return{option:ma,variables:Y,target:N,page:N.page,callbacks:{openWidthBrowseCenter:function_openWithBrowseCenter}}};this.update=function(){this.query(!0)};this.setTable=function(P,ua,Ga,Ja,Xa){P=Cc(P);if(1!=T){T=!0;if(null!=Ja)Ja.errorCode==ERRORHTTP.NULL_MUST_PARAM?"Array"==aa.constructor.name?aa[Ja.queryIndex].queryStatus=null:"String"==
aa.constructor.name&&-1!=aa.indexOf("{{")&&(P=aa,P=replaceVariablesValue(P,Y,oa),P[Ja.queryIndex].queryStatus=null):"Array"==aa.constructor.name&&(aa[Ja.queryIndex].queryStatus=null);else{if(1==Ga)Cb=!0;else if(1!=F)for(Ja=0;Ja<aa.length;Ja++)if(aa[Ja]){aa[Ja].queryStatus=null;T=!1;return}Ja=function(qb,sb){if("NoNeedCache"==sb)return qb;pa=1==ma.orderByLocal&&1==ma.orderBy3S?qb:null;return oa=xDeepCopy(qb)};var La=!1,Ta=0;P&&P[0]&&P[0].table&&P[0].table.data?(0>ma.initCursorPos&&(void 0==Ra||0==
Ra||la.index==Ra-1&&Ma==Ra-zb)&&(Q=!0),0>=P[0].table.data.length&&N.clearLinkValue(),oa&&oa[0]&&oa[0].table&&oa[0].table.info&&oa[0].table.info.key&&oa[0].table.info.key!=P[0].table.info.key&&(qc(),Ta=oa[0].table.info.totalRows),oa=Ja(P,Xa),La=!0,1==ma.rotate.rotate&&"rotate_addrow"==ma.header.group&&oa[0].table.rotate&&(sa=Rc(oa)),ta=oa[0].table,Ra=ta.info&&ta.info.totalRows?ta.info.totalRows:0,Y.totalRows=Ra,ta.info&&0>ta.info.begin&&(ta.info.begin=0)):(ta=oa=null,Ma=Ra=0,na=la.index=0,qc());if(0==
La&&P)for(La=0;La<P.length;La++)if(null!=P[La]&&P[La].table){oa=Ja(P,Xa);break}P=aa;T=!1;if(aa&&oa)for("String"==aa.constructor.name&&-1!=aa.indexOf("{{")&&(P=replaceVariablesValue(P,Y,oa)),Ja=0;Ja<P.length;Ja++)P[Ja]&&oa[Ja]&&(P[Ja].callback_onMessage&&(P[Ja].callback_onMessage(oa[Ja],ua,Ga,jc(),oa),0==Ja&&(Ra=(ta=oa[0].table)&&ta.info?ta.info&&ta.info.totalRows?ta.info.totalRows:0:0,Y.totalRows=Ra)),P[Ja].queryStatus=null,ka=xGlobal.refreshCounter);1!=ma.orderByLocal||"asc"!=ma.orderByType&&"desc"!=
ma.orderByType||sortTable(oa,ma.orderBy,ma.orderByType);1==Q&&(0>ma.initCursorPos&&1==ma.orderReverse?(Ma=0,na=la.index=0):0>ma.initCursorPos&&aa&&aa[0]&&aa[0].query&&aa[0].query.limit&&-1==aa[0].query.limit[0]&&(Ma=Ra-rb,0>Ma&&(Ma=0),la.index>=Ta-1&&(la.index=Ra-1),na=1==ma.multiseriate.show?Ma*ma.multiRowHeight:Ma*ma.rowHeight));if(0==hb||1==Ca)1==Ca&&(ca=null),oc();ta&&ta.rotate?(Ra=ta.rotate.data.length,Ab=0,Gb=Ra):ta&&ta.info?(Ab=ta.info.dataBegin,Gb=ta.info.dataRows):Gb=Ab=0;N.reCreateGrid(!1);
vb=!0;vc(!0);ua=!1;P&&P[0].callback_object?P[0].callback_object.callback_query&&(ua=!0):(N.query(),ua=!0);for(Ja=0;6>Ja;Ja++)if(N.getGrid(Ja)){ua=!0;break}Ga=function(qb,sb){if("String"==qb.constructor.name){if(qb=qb.toLowerCase(),oa)for(var Eb=0;Eb<oa.length;Eb++)if(sb[Eb]&&oa[Eb]&&oa[Eb].updateCounter!=sb[Eb].updateCounter&&oa[Eb].table&&oa[Eb].table.info&&qb&&qb==oa[Eb].table.info.name.toLowerCase())return oa[Eb].table}else if(oa&&(Eb=qb,sb[Eb]&&oa[Eb]&&oa[Eb].updateCounter!=sb[Eb].updateCounter&&
oa[Eb].table&&oa[Eb].table.info))return oa[Eb].table};Ia&&N.setCursorIndexTo(Ia);if(ma.dynamicSynchBound){if(null!=ma.dynamicSynchBound.onceOnCursor&&(Xa=Ga(ma.dynamicSynchBound.onceOnCursor,P))){var jb=Xa.info.name;oa.forEach(function(qb,sb){if(qb&&qb.table&&qb.table.data&&qb.table.info.name==jb){sb=0;if(ma.dynamicSynchBound.synchFieldName)for(var Eb=0;Eb<qb.table.field.length;Eb++)if(qb.table.field[Eb][0].toLowerCase()==ma.dynamicSynchBound.synchFieldName.toLowerCase()){sb=Eb;break}0<qb.table.data.length&&
qb.table.data[0][sb]&&(ma.dynamicSynchBound.onceOnCursor=null,ba())}})}null!=ma.dynamicSynchBound.alwaysOnCursor&&0==Wa&&Ga(ma.dynamicSynchBound.alwaysOnCursor,P)&&(la.preIndex=null,ba());if(ma.dynamicSynchBound.setExtenalTableTo)for(Ja=0;Ja<ma.dynamicSynchBound.setExtenalTableTo.length;Ja++)ma.dynamicSynchBound.setExtenalTableTo[Ja].target&&(Xa=Ga(ma.dynamicSynchBound.setExtenalTableTo[Ja].tableName,P))&&(Ta=N.page,La=ma.dynamicSynchBound.setExtenalTableTo[Ja].target.split("."),1==La.length?(La[1]=
La[0],La[0]=""):Ta=N.page.getPageById(La[0]),Ta&&(Ta=Ta.getObjectByElementId(La[1]))&&Ta.setExternalTable&&Ta.setExternalTable(Xa,ma.dynamicSynchBound.setExtenalTableTo[Ja].keyName));ma.dynamicSynchBound.cursorSynch&&(Ja=Y[ma.dynamicSynchBound.cursorSynch])&&!Wa&&N.setCursorIndexTo(Ja)}nc();if(aa&&oa){for(Ja=0;Ja<P.length;Ja++)P[Ja]&&oa[Ja]&&(P[Ja].updateCounter=oa[Ja].updateCounter);for(Ja=0;Ja<oa.length;Ja++)oa[Ja]&&oa[Ja].table&&(oa[Ja].table.dataStatus=[])}ua&&N.draw(!0)}T=!1}};var Cc=function(P){for(var ua in P){var Ga=
P[ua]&&P[ua].table&&P[ua].table.data?P[ua].table.data:null;if(!Ga)break;var Ja;a:for(Ja in Ga)for(var Xa in Ga[Ja])if(""!==Ga[Ja][Xa]&&null!==Ga[Ja][Xa]&&"undefined"!==typeof Ga[Ja][Xa])break a}return P},vc=function(P){if(ca&&oa&&oa[0]&&oa[0].table&&oa[0].table.info){1==(void 0===P?!1:P)&&Jc();P=Ma;for(var ua=oa[0].table.info.dataBegin+oa[0].table.info.dataRows,Ga,Ja=0;Ja<ca.length;Ja++){var Xa=0;Ga=P;if(!oa[0].table.info)return;null==ca[Ja].objects?ca[Ja].objects=[]:ca.begin<Ga?ca[Ja].objects.splice(0,
Ga-ca.begin):ca.begin>Ga&&(Ga=ca.begin-Ga,ca[Ja].objects.splice(ca[Ja].objects.length-Ga,Ga),Ga=Array(Ga).fill(null),ca[Ja].objects=Ga.concat(ca[Ja].objects));for(Ga=Ma;Ga<ua&&Xa<rb+2;Ga++,Xa++){var La=Ja;var Ta=Ga;var jb=Xa;if(0<=La&&La<ca.length){null==ca[La].objects&&(ca[La].objects=[]);var qb=Ta;if(null==ca[La].objects[jb])if(ta&&ta.rotate){if(0==La)ca[La].objects[qb]=new xCells(N,[{field:ma.rotate.field,marginLeft:10,fontSize:parseFloat(ma.header.fontSize),textAlign:"left"}],null,Y);else{b:{jb=
ta.rotate.data[Ta][0];if(ya)for(var sb=0;sb<ta.rotate.data.length;sb++)for(var Eb=0;Eb<ya.length;Eb++)for(var Mb=0;Mb<ya[Eb].cells.length;Mb++)if(ya[Eb].cells[Mb].field&&ya[Eb].cells[Mb].field.toLowerCase()==jb.toLowerCase()){jb=ya[Eb].cells[Mb];break b}jb=void 0}jb?(jb=xDeepCopy(jb),jb.field=ta.rotate.data[Ta][0],ca[La].objects[qb]=new xCells(N,[jb],null,Y)):ca[La].objects[qb]=new xCells(N,[{field:ta.rotate.data[Ta][0],textAlign:isTextType(ta.rotate.data[Ta][1])?"left":"right",refreshMode:ma.rotate.refreshMode}],
null,Y)}jb=ca[La].objects[qb];Ta=La-1}else ca[La].objects[jb]=new xCells(N,ca[La].cells,null,Y),jb=ca[La].objects[jb];else jb=ca[La].objects[jb],ta&&ta.rotate&&(Ta=La-1);setSelectorValue=!1;if(sb=jb.getCells())for(Eb=0;Eb<sb.length;Eb++)if(Mb=sb[Eb],"xSaftButton"==Mb.type&&Mb.option&&null!=Mb.option.selector){setSelectorValue=!0;break}sb=!1;1==ma.enableMultiSelected&&Na.multiSelected.includes(Ta)&&(sb=!0);ta&&ta.rotate&&0==La?(La=ta.rotate.data[qb][2]?ta.rotate.data[qb][2]:ta.rotate.data[qb][0],-1!=
La.indexOf("$r$")&&"rotate_tree"==ma.header.group?(Ta=La.split("$r$"),La=Ta[Ta.length-1],jb.getCells()[0].marginLeft=10*Ta.length):"rotate_addrow"==ma.header.group&&(-1!=La.indexOf("$r$")?(La=La.split("$r$"),La=La[La.length-1]):-1!=La.indexOf("$Add$")&&(La=La.split("$Add$")[0],jb.getCells()[0].fontBold=!0)),jb.setValueText(La)):null!=Aa?jb.setValue(Ta,oa,Y,sb,Aa,null,ma.orderReverse):1==setSelectorValue?jb.setValue(Ta,oa,Y,sb,null,setSelectorValue,ma.orderReverse):1==ma.orderReverse?jb.setValue(Gb-
Ta-1+ta.info.dataBegin,oa,Y,sb,null,null,ma.orderReverse):jb.setValue(Ta,oa,Y,sb,null,null,ma.orderReverse);if(ma.marks){La=[];for(Ta=0;Ta<ma.marks.length;Ta++){qb=ma.marks[Ta].variable.indexOf("[");sb=ma.marks[Ta].variable.indexOf("]");if(-1!=qb&&-1!=sb&&(qb=ma.marks[Ta].variable.slice(0,qb),(sb=Y[qb])&&"Array"==sb.constructor.name)){La[Ta]=replaceFilter(ma.marks[Ta].variable,sb,qb);continue}null!=Y[ma.marks[Ta].variable]?La[Ta]=Y[ma.marks[Ta].variable]:null!=Y[ma.marks[Ta].value]&&(La[Ta]=Y[ma.marks[Ta].value])}0<
La.length&&jb.setMarkValues(La)}}jb=G(Xa);La=1==ma.multiseriate.show?kb.height*Ua:kb.height;if(null==jb||jb.y>kb.top+La)break}ca[Ja].objects.length>ua&&(0==ua?ca[Ja].objects=null:ca[Ja].objects.splice(ua-Ma))}ca.begin=Ma}};this.reCreateGrid=function(P){P=void 0===P?!0:P;Ib();P&&N.draw(!0)};this.setPos=function(P,ua){1!=ma.paging&&(P==Sb?(na=ua,0>na&&(na=0),1==ma.multiseriate.show?na>Ra*ma.multiRowHeight-ea*Ua&&(na=Ra*ma.multiRowHeight-ea*Ua):""==ma.rowHeightField&&na>Ra*ma.rowHeight-ea&&(na=Ra*ma.rowHeight-
ea)):P==Ub&&(ha=ua,0>ha&&(ha=0),ha>Oa-ja&&(ha=Oa-ja)),Q=!1,N.draw(!0))};this.setCursorIndex=function(P,ua){la.index=P;uc();ua&&(ba(),Na.lastCursorIndex=P);N.draw(!0)};var yc=function(){var P=0;1==ma.frozenColumn&&0<ma.frozenColumns&&(P=ma.frozenColumns);ca&&P>ca.length&&(P=ca.length);return P},Hc=function(){if(ta&&ta.info&&"tree"==ta.info.mode){for(var P=-1,ua=-1,Ga=-1,Ja=-1,Xa=0,La=0;La<ta.field.length;La++)"_level"==ta.field[La][0]?P=La:"_members"==ta.field[La][0]?ua=La:"_expand"==ta.field[La][0]?
Ga=La:"_path"==ta.field[La][0]?Ja=La:"id"==ta.field[La][0]&&(Xa=La);if(null!=P&&null!=ua)return{offset:16,levelIndex:P,childrenIndex:ua,expandIndex:Ga,expandPathIndex:Ja,idIndex:Xa}}return{offset:0}};this.refresh=function(){4>xGlobal.refreshCounter-ka&&this.draw(!0)};this.getHeader=function(){return ca};this.getGridCells=function(P){return ib[P]};this.getGrid=function(P){switch(P){case 0:case "top":if(ma.grid&&ma.grid.init&&ma.grid.init.vBox&&1==ma.showGrid.top)var ua=ma.grid;break;case 1:case "bottom":ma.gridBottom&&
ma.gridBottom.init&&ma.gridBottom.init.vBox&&1==ma.showGrid.bottom&&(ua=ma.gridBottom);break;case 2:case "left":ma.gridLeft&&ma.gridLeft.init&&ma.gridLeft.init.vBox&&1==ma.showGrid.left&&(ua=ma.gridLeft);break;case 3:case "right":ma.gridRight&&ma.gridRight.init&&ma.gridRight.init.vBox&&1==ma.showGrid.right&&(ua=ma.gridRight);break;case 4:ma.headerBottom&&ma.headerBottom.init&&ma.headerBottom.init.vBox&&(ua=ma.headerBottom);break;case 5:ma.containCell&&ma.containCell.init&&ma.containCell.init.vBox&&
1==ma.containCell.show&&(ua=ma.containCell)}return ua};this.modifyGridCellSetById=function(P,ua,Ga){var Ja=this.getGrid(P);if(Ja){a:{Ja=Ja.init.vBox;for(var Xa=0;Xa<Ja.length;Xa++)for(var La=0;La<Ja[Xa].length;La++)if(Ja[Xa]&&Ja[Xa][La]&&Ja[Xa][La].id==ua){Ja=Ja[Xa][La];break a}Ja=void 0}Ja&&(xCopyTo(Ga,Ja),ib[P]&&(ib[P].modifyGridCellSetById(ua,Ga),ib[P].setValue(0,oa,Y)))}};var Ic=function(P,ua,Ga){if("Array"==P.constructor.name)for(var Ja=0;Ja<P.length;Ja++){if(Ic(P[Ja],ua,Ga))return!0}else if(!P.create||
!P.create.title)if(P.optionGroup){if(P.define)for(var Xa in P.define)for(Ja=0;Ja<P.define.length;Ja++)Ic(P.define[Ja],ua,Ga)}else if((P.title&&P.title==ua.title||P.variable&&P.variable==ua.variable)&&P.type==ua.type&&P.option&&ua.option&&P.option.type==ua.option.type)return P.title=Ga.title,P.action=Ga.action?Ga.action:null,P.bounds=Ga.bounds?Ga.bounds:null,P.option.actionBounds=Ga.option.actionBounds?Ga.option.actionBounds:null,!0;return!1};this.modifyGrid=function(P,ua){for(var Ga=0;6>Ga;Ga++){var Ja=
N.getGrid(Ga);Ja&&Ic(Ja.init.vBox,P,ua)}ma.created&&ma.created()};this.setGrid=function(P,ua){"right"==P&&(ma.gridRight=ua,Ib(),this.draw())};this.draw=function(P){if(1==F&&null!=E&&null!=E.parentElement){var ua=E.parentElement.offsetWidth,Ga=E.parentElement.offsetHeight;if(null!=E&&0!=ua&&0!=Ga&&(0!=(void 0===P?null:P)||xb!=ua||ob!=Ga)&&0!=bc){null!=ma.callback_drawBefore&&ma.callback_drawBefore(N);xb!=ua&&(vb=!0);xb=ua;ob=Ga;kb.top=0;kb.left=0;kb.width=ua;kb.height=Ga;null==V&&(V=E.getContext("2d"));
ra=getPixelRatio(V);E.width=ua*ra;E.height=Ga*ra;E.style.left=0;E.style.top=0;E.style.width=ua+"px";E.style.height=Ga+"px";1<ra&&V.setTransform(ra,0,0,ra,0,0);V.translate(.5,.5);V.lineWidth=1;V.beginPath();V.fillStyle=ma.backgroundColor;V.strokeStyle="";V.fillRect(kb.left-.5,kb.top-.5,kb.left+kb.width+1,kb.top+kb.height+1);V.closePath();P=xDeepCopy(kb);ma.marginLeft&&(kb.left+=ma.marginLeft,kb.width-=ma.marginLeft);ma.marginTop&&(kb.top+=ma.marginTop,kb.height-=ma.marginTop);ma.marginRight&&(kb.width-=
ma.marginRight);ma.marginBottom&&(kb.height-=ma.marginBottom);for(var Ja=xDeepCopy(kb),Xa=0;5>Xa;Xa++){var La=N.getGrid(Xa);if(La){null==M&&(M=[]);M[Xa]={left:Ja.left,top:Ja.top,width:Ja.width,height:Ja.height};var Ta=La.size;null==Ta?(Ta=La.option,null==Ta?Ta={lineHeight:28}:null==Ta.lineHeight&&(Ta.lineHeight=28),Ta=ib[Xa].setCellsPosition(M[Xa],Ta)):("auto"==Ta.width&&(Ta.width=0),"auto"==Ta.height&&(Ta.height=0),Ta.h=Ta.height);if(Ta)switch(Xa){case 2:kb.left+=Ta.width;M[Xa].width=kb.left-M[Xa].left;
break;case 3:kb.width-=Ta.width;M[Xa].left=kb.left+kb.width;M[Xa].width=Ta.width;break;default:kb.height-=Ta.h,M[Xa].height=Ta.h,1==Xa?(M[Xa].top=Ja.top+Ja.height-Ta.h,La.option&&La.option.marginTop&&(kb.height-=La.option.marginTop),La.option&&La.option.marginBottom&&(M[Xa].top-=La.option.marginBottom,kb.height-=La.option.marginBottom)):(kb.top+=Ta.h,La.option&&La.option.marginTop&&(M[Xa].top+=La.option.marginTop,kb.top+=La.option.marginTop,kb.height-=La.option.marginTop),La.option&&La.option.marginBottom&&
(kb.top+=La.option.marginBottom,kb.height-=La.option.marginBottom)),La.option&&La.option.marginLeft&&(M[Xa].left+=La.option.marginLeft,M[Xa].width-=La.option.marginLeft),La.option&&La.option.marginRight&&(kb.width-=La.option.marginRight)}ib[Xa].setCellsPosition(M[Xa],La)}}Ta=kb.top;1==ma.header.show?(Pa={left:kb.left,top:kb.top,width:ua,height:ma.header.height},da=ma.header.height):da=0;1==ma.title.show&&(r=kb.left,u=kb.top,z=ua,H=ma.title.height,"bottom"==ma.title.position?u=kb.top+da:1==ma.header.show&&
(Pa.top=kb.top+ma.title.height),da+=ma.title.height);kb.top+=da;kb.height-=da;ja=kb.width;ea=kb.height;1==ma.listBoxShadow.show&&null!=N.boxShadowDiv&&(Xa=ma.listBoxShadow,N.boxShadowDiv.style.top=kb.top-da+1+"px",N.boxShadowDiv.style.height=ea+da-1+"px",N.boxShadowDiv.style.right=ma.marginRight+"px",N.boxShadowDiv.style.left=ma.marginLeft+1+"px",N.boxShadowDiv.style.boxShadow=Xa.hShadow+"px "+Xa.vShadow+"px "+Xa.blur+"px "+Xa.spread+"px "+Xa.color);1==ma.multiseriate.show?N.multiseriateDraw(V,ua,
Ga,P,Ja):N.normalDraw(V,ua,Ga,P,Ja);if(ib)for(Xa=0;5>Xa;Xa++)if(La=N.getGrid(Xa)){V.beginPath();V.fillStyle=ma.backgroundColor;ua={left:M[Xa].left-.5,top:M[Xa].top-.5,width:M[Xa].width+1,height:M[Xa].height+1};switch(Xa){case 0:ua.left=P.left;ua.top=P.top;ua.width=P.width;ua.height=Ta-P.top;break;case 1:ua.left=P.left;ua.top=kb.top+kb.height-1;ua.width=P.width;ua.height=P.top+P.height-(kb.top+kb.height);break;case 3:ua.left=kb.left+kb.width,ua.top=P.top,ua.width=P.width-kb.width,ua.height=P.height,
M[Xa]=ua}V.fillRect(M[Xa].left-.5,M[Xa].top-.5,M[Xa].width+1,M[Xa].height+1);V.closePath();var jb;ua=0;if(La.option&&La.option.backgroundColor&&"transparent"!=La.option.backgroundColor){var qb=La.option.backgroundColor;La.option.border&&(jb=parseLineSet(La.option.border));La.option.borderRadius&&(ua=La.option.borderRadius)}else La.backgroundColor&&"transparent"!=La.backgroundColor&&(qb=La.backgroundColor,La.border&&(jb=parseLineSet(La.border)),La.borderRadius&&(ua=La.borderRadius));qb&&"transparent"!=
qb&&(V.beginPath(),fillRoundRect(V,M[Xa].left-.5,M[Xa].top-.5,M[Xa].width+1,M[Xa].height+1,ua,qb,jb?jb.color:null),V.closePath());ib[Xa].setValue(0,oa,Y);1==ib[Xa].draw(V,La,0,0,M[Xa])&&(ib[Xa].setCellsPosition(M[Xa],La),ib[Xa].draw(V,La,0,0,M[Xa]))}null!=ma.callback_drawAfter&&ma.callback_drawAfter(N)}}};this.resize=function(){this.draw(!0);0>ma.initCursorPos&&1==Ha&&this.moveToBottom()};var Jc=function(){if(ma.rowHeightField&&oa&&E){db=[];var P="Array"==ma.rowHeightField.constructor.name?ma.rowHeightField:
[ma.rowHeightField];for(var ua=0;ua<P.length;ua++){var Ga=oa[0].table,Ja=P[ua].split(".");if(1<Ja.length)for(var Xa=0;Xa<oa.length;Xa++){if(oa[Xa]&&oa[Xa].table&&Ja[0].toLowerCase()==oa[Xa].table.info.name.toLowerCase()){Ga=oa[Xa].table;break}}else Ja[1]=Ja[0];if(null==Ga||null==Ga.field){db=null;return}a:{var La=Ga;Xa=Ja[1];for(var Ta=La.info.dataRows,jb=0;jb<La.field.length;jb++)if(La.field[jb][0].toLowerCase()==Xa.toLowerCase()){for(Ja=0;Ja<ca.length;Ja++)if(ca[Ja].cells)for(Ga=0;Ga<ca[Ja].cells.length;Ga++)if(Xa.toLowerCase()==
ca[Ja].cells[Ga].field.toLowerCase()){var qb=ca[Ja].width;Xa=ma.rowLineHeight;ca[Ja].cells[Ga].lineHeight&&(Xa=ca[Ja].cells[Ga].lineHeight);var sb=null!=ca[Ja].cells[Ga].marginLeft?ca[Ja].cells[Ga].marginLeft:ca[Ja].cells[Ga].margin?ca[Ja].cells[Ga].margin:0,Eb=null!=ca[Ja].cells[Ga].marginRight?ca[Ja].cells[Ga].marginRight:ca[Ja].cells[Ga].margin?ca[Ja].cells[Ga].margin:0,Mb=null!=ca[Ja].cells[Ga].marginTop?ca[Ja].cells[Ga].marginTop:ca[Ja].cells[Ga].margin?ca[Ja].cells[Ga].margin:0,Qb=null!=ca[Ja].cells[Ga].marginBottom?
ca[Ja].cells[Ga].marginBottom:ca[Ja].cells[Ga].margin?ca[Ja].cells[Ga].margin:0;sb&&(qb-=sb);Eb&&(qb-=Eb);validate=!0;Eb=E.getContext("2d");var Wb="14px "+xGlobal.systemFont;if("row"==La.info.rank)for(sb=0;sb<Ta;sb++)if(null==db[sb])db[sb]=[getHeight(Eb,La.data[sb][jb],Wb,Xa,qb-6-6)],Mb&&(db[sb][0]+=Mb),Qb&&(db[sb][0]+=Qb);else{var Kb=getHeight(Eb,La.data[sb][jb],Wb,Xa,qb-6-6);Mb&&(Kb+=Mb);Qb&&(Kb+=Qb);Kb>db[sb][0]&&(db[sb]=[Kb])}else for(sb=0;sb<Ta;sb++)db[sb]?(db[sb]=[getHeight(Eb,La.data[jb][sb],
Wb,Xa,qb)],Mb&&(db[sb][0]+=Mb),Qb&&(db[sb][0]+=Qb)):(Kb=getHeight(Eb,La.data[jb][sb],Wb,Xa,qb),Mb&&(Kb+=Mb),Qb&&(Kb+=Qb),Kb>db[sb][0]&&(db[sb]=[Kb]));db.begin=La.info.dataBegin;if(0<ca[Ja].cells.length){for(jb=Ta=La=0;jb<ca[Ja].cells.length;jb++)jb!=Ga&&(0<ca[Ja].cells[jb].top?ca[Ja].cells[jb].top+Xa>La&&(La=ca[Ja].cells[jb].top+Xa):ca[Ja].cells[jb].top<Ta&&(Ta=ca[Ja].cells[jb].top));if(La||Ta)for(sb=0;sb<db.length;sb++)db[sb][0]<La&&(db[sb][0]=La),Ta&&(db[sb][0]-=Ta);Ja=0;if(1==ma.orderReverse)for(sb=
db.length-1;0<=sb;sb--)db[sb][1]=Ja,Ja+=db[sb][0];else for(sb=0;sb<db.length;sb++)db[sb][1]=Ja,Ja+=db[sb][0]}break a}break}}}0==db.length&&(db=null)}},Dc=function(){if(db)if(1==ma.orderReverse)var P=db[0][0]+db[0][1];else 0<db.length&&(P=db.length-1,P=db[P][0]+db[P][1]);else P=ma.rowHeight*Ra,1==ma.showContentHeight&&(P=Gb+rb,P=ma.rowHeight*(P<Ra?P:Ra)),ma.multiseriate.show&&ma.multiRowHeight&&(P=Gb+rb,P=ma.multiRowHeight*(P<Ra?P:Ra));return P};this.normalDraw=function(P,ua,Ga,Ja,Xa){if(ma.header&&
1==ma.header.full){var La=ja;Ja=ca;if(1==ma.header.full&&null!=Ja){for(var Ta=0,jb=0,qb=0;qb<Ja.length;qb++)null!=Ja[qb].initWidth&&(Ta+=Ja[qb].initWidth,jb++);if(jb==Ja.length)for(La/=Ta,Ta=0;Ta<Ja.length;Ta++)Ja[Ta].width=Ja[Ta].initWidth*La;else for(qb=0;qb<Ja.length;qb++)null==Ja[qb].initWidth&&(Ja[qb].width=(La-Ta)/(Ja.length-jb),0>Ja[qb].width&&(Ja[qb].width=0));wc()}1==vb&&(vb=!1,Jc())}Ja=yc();La=N.checkNextQuery();P.save();P.fillStyle=ma.cell.color;P.font="14px "+xGlobal.systemFont;if(ta&&
ta.data&&ca){jb=Hc();Ma=La;P.beginPath();P.textBaseline="top";qb=0==B("rect")?null:B("rect");for(var sb=0;2>sb;sb++){var Eb=0,Mb=0;La=Ma;if(ca.begin<Ma)for(;ca.begin+Mb!=Ma;Mb++);else if(ca.begin>Ma)for(;ca.begin!=La;La++);for(var Qb=La;Qb<Ra;Qb++,Mb++){var Wb=G(Qb);if(null!=Wb){var Kb=Wb.y;var gc=0,dc=0;La=!1;0==sb&&1==ma.showCrossBackground&&1==Qb%2&&(P.fillStyle=ma.crossBackgroundColor,P.fillRect(kb.left,Kb,kb.left+kb.width,Wb.height));if(0==sb&&null!=ma.overBackgroundColor&&""!=ma.overBackgroundColor&&
null!=lb&&lb==Qb)P.fillStyle=ma.overBackgroundColor,P.fillRect(kb.left,Kb,kb.left+kb.width,Wb.height);else{1==sb&&1==ma.adjustDataOrder.enable&&1==fc&&(dc=D-S-Kb);var $b=!1;if(1==ma.enableMultiSelected&&Na.multiSelected&&1<Na.multiSelected.length&&1==sb)for(Ta=0;Ta<Na.multiSelected.length;Ta++)if(Na.multiSelected[Ta]==Qb){ma.showMultiSelectedBackground&&(P.fillStyle=ma.selectedColor,P.fillRect(kb.left+gc,Kb+dc,kb.left+kb.width,ma.rowHeight),P.fillStyle=ma.cell.color);La=$b=!0;break}if(Qb!=la.index||
xGlobal.focusWidget!=N&&1!=ma.alwaysShowSelected)0==sb&&(La=!0);else if(1==sb&&(La=!0,1==ma.adjustDataOrder.enable&&1==fc?(P.fillStyle=ma.adjustDataOrder.backgroundColor,gc=2):P.fillStyle=ma.cursorColor,la.rect={left:kb.left+gc,top:Kb+dc,width:kb.width,height:Wb.height},P.fillRect(la.rect.left,la.rect.top,la.rect.width,la.rect.height),P.fillStyle=ma.cell.color,"border-left"==ma.active.type&&(P.beginPath(),P.strokeStyle="#ec8721",P.lineWidth="3",P.lineCap="round",P.moveTo(la.rect.left,la.rect.top),
P.lineTo(la.rect.left,la.rect.top+la.rect.height),P.stroke(),P.lineCap="butt",P.closePath()),xGlobal.focusWidget==N&&ma.focusSelectCursorColor&&ma.focusSelectCursorColor.type))switch(ma.focusSelectCursorColor.type){case "left":P.beginPath();P.fillStyle=ma.focusSelectCursorColor.backgroundColor;P.fillRect(la.rect.left,la.rect.top,ma.focusSelectCursorColor.width,la.rect.height);P.closePath();break;case "right":P.beginPath();P.fillStyle=ma.focusSelectCursorColor.backgroundColor;P.fillRect(la.rect.left+
cc.width-focusSelectCursorColor.width,la.rect.top,ma.focusSelectCursorColor.width,la.rect.height);P.closePath();break;case "all":P.beginPath(),P.fillStyle=ma.focusSelectCursorColor.backgroundColor,P.fillRect(la.rect.left,la.rect.top,la.rect.width,la.rect.height),P.closePath()}}if(1==La)for(var sc=0;2>sc&&0<ca.length;sc++){Ta=Ja;var tc=ca.length;1==sc&&(Ta=0,tc=Ja,P.fillStyle=1==Qb%2&&1==ma.showCrossBackground?ma.frozenColumnCrossBackgroundColor:ma.frozenColumnBackgroundColor,P.fillRect(kb.left+gc,
Kb+dc,ca[Ja-1].x+ca[Ja-1].width,Wb.height),1==ma.enableMultiSelected&&1==$b&&(P.fillStyle=ma.selectedColor,P.fillRect(kb.left+gc,Kb+dc,ca[Ja-1].x+ca[Ja-1].width,Wb.height)),Qb!=la.index||xGlobal.focusWidget!=N&&1!=ma.alwaysShowSelected||(P.fillStyle=ma.cursorColor,1==ma.adjustDataOrder.enable&&1==fc&&(P.fillStyle=ma.adjustDataOrder.backgroundColor),P.fillRect(kb.left+gc,Kb+dc,ca[Ja-1].x+ca[Ja-1].width,Wb.height)),P.fillStyle=ma.cell.color);for(;Ta<tc;Ta++){La=ca[Ta].x+kb.left+gc;Ta>=Ja&&(La-=ha);
var kc=ca[Ta].width;null==ca[Ta].width&&(kc=ja);if(1==sc||La+kc>ca[Ja].x){if(null!=ca[Ta].graph&&"progress"==ca[Ta].graph.type&&(kc=J(ca[Ta].graph.index,Qb-ta.info.begin),void 0!=kc)){P.beginPath();var pc=kc.value;0<kc.value?P.fillStyle=ma.cell.colors[1]:(P.fillStyle=ma.cell.colors[2],pc*=-1);P.globalAlpha=ca[Ta].graph.alpha?ca[Ta].graph.alpha:.5;null!=ca[Ta].graph.value.factor&&(pc*=ca[Ta].graph.value.factor);pc=ca[Ta].width*pc/100;pc>ca[Ta].width&&(pc=ca[Ta].width);P.fillRect(La,Kb,pc,Wb.height);
P.fill();P.closePath();P.globalAlpha=1}kc=ca[Ta].width;if(0<jb.offset&&0==Ta&&0<=Qb&&Qb<ta.data.length){if(null==ta.data[Mb])continue;kc=ta.data[Qb][jb.levelIndex]+1;var xc=ta.data[Qb][jb.childrenIndex],Ec=ta.data[Qb][jb.expandIndex];"+"!=Ec&&"-"!=Ec&&kc--;pc=jb.offset-6;6>pc&&(pc=6);var zc=La+ca[Ta].x;zc+=jb.offset*kc;if(zc>=ja)break;var Fc=zc;if(0<xc){if("normal"!=ma.treeModel&&ma.treeModel){var cc={left:ca[Ta].x,top:Kb,width:ca[Ta].width,height:Wb.height};P.beginPath();P.fillStyle=ma.backgroundColor;
P.rect(cc.left,cc.top,cc.width,cc.height);P.fill();P.closePath();drawTreeExpand(P,ma,zc-pc/2-2,Kb+Wb.height/2,pc,Ec,"special",cc)}else drawTreeExpand(P,ma,zc-pc/2-2,Kb+Wb.height/2,pc,Ec,"normal",cc);Fc-=jb.offset;kc--}P.save();P.beginPath();P.strokeStyle=ma.expandColor;P.setLineDash([1,1]);for(xc=kc;1<xc;xc--)P.moveTo(Fc-pc/2-2,Kb),P.lineTo(Fc-pc/2-2,Kb+Wb.height),Fc-=jb.offset;P.stroke();P.closePath();P.restore();La+=jb.offset*(kc+1);kc=ca[Ta].width-jb.offset*(kc+1)}ca[Ta].objects&&ca[Ta].objects[Mb]&&
(cc={left:La,top:Kb,width:kc,height:Wb.height},ca[Ta].objects[Mb].setCellsPosition(cc),"special"==ma.treeModel&&0<jb.offset&&0==Ta&&0<=Qb&&Qb<ta.data.length&&(xc=ta.data[Qb][jb.childrenIndex],0==xc&&Qb!=la.index&&(P.beginPath(),P.fillStyle=ma.treeItemBackground?ma.treeItemBackground:ma.backgroundColor,P.rect(ca[Ta].x,Kb,ca[Ta].width,Wb.height),P.fill(),P.closePath())),ca[Ta].objects[Mb].draw(P,ma.cell,La,Kb+dc,cc))}}if(0==Ja)break}Eb++;if(null!=qb&&Qb==ta.info.dataRows-1){if(qb.top=Kb+Wb.height,M[5]=
qb,Kc(P,qb),Kb>=kb.top+ea+qb.height||1==ma.paging&&Eb>=rb){Eb=0;break}}else{if(Mb==ta.info.dataRows-1)break;Wb=G(Qb+1);if(null==Wb)break;Kb=Wb.y;if(Kb>=kb.top+ea||1==ma.paging&&Eb>=rb)break}}}if(0==sb){qb&&0==Eb&&(qb.top=0,M[5]=qb,Kc(P,qb));if(1==ma.showRowSplitLine){P.beginPath();P.setLineDash(ma.rowSplitLineDash);P.strokeStyle=ma.rowSplitLineColor;P.lineWidth=ma.rowSplitLineHeight;Kb=Da&&0<Da.length?-na+Ma*ma.rowHeight+ma.firstRowHeight-ma.rowHeight:-na+Ma*ma.rowHeight;for(Qb=Ma;Qb<Ra;Qb++){Wb=
G(Qb);if(null==Wb)break;Kb=Wb.y+Wb.height;if(Kb>=kb.top+ea)break;P.moveTo(kb.left,Kb);P.lineTo(kb.left+ja,Kb)}P.stroke();P.closePath()}if(1==ma.showColSplitLine){P.beginPath();P.setLineDash(ma.colSplitLineDash);P.strokeStyle=ma.colSplitLineColor;for(Ta=0;Ta<ca.length;Ta++){La=ca[Ta].x+ca[Ta].width+kb.left;Ta>=Ja&&(La-=ha);if(La>=ja)break;if(!(Ta>=Ja&&La<ca[Ja].x))if("rotate_addrow"==ma.header.group){if(null!=sa){Eb=1;Mb=[];Wb=[];for(var ec in sa)Mb.push(parseFloat(ec)+Eb),1!=Eb&&Wb.push(parseFloat(ec)+
Eb-1),Eb++;Wb.push(ca[0].objects.length);for(Eb=0;Eb<Mb.length;Eb++)P.moveTo(La,kb.top-na+Mb[Eb]*ma.rowHeight),P.lineTo(La,kb.top-na+Wb[Eb]*ma.rowHeight)}}else P.moveTo(La,kb.top),P.lineTo(La,kb.top+ea)}P.stroke();P.closePath()}1==ma.adjustDataOrder.enable&&1==fc&&null!=Ba.to&&Ba.to!=Ba.from&&(P.beginPath(),P.fillStyle=ma.adjustDataOrder.backgroundColor,Kb=kb.top-na+Ba.to*ma.rowHeight+ma.firstRowHeight,P.fillRect(kb.left,Kb-1,ja,3),P.closePath())}}}if(1==ma.header.show){P.beginPath();P.save();P.fillStyle=
ma.header.backgroundColor;0<na&&1!=ma.paging&&1==ma.slidingShadow&&(P.shadowBlur=20<na?20:na,P.shadowColor=ma.header.shadowColor,P.shadowOffsetX=0,P.shadowOffsetY=5<na?5:na);P.strokeStyle="";P.fillRect(Pa.left-.5,Pa.top-.5,Pa.width+1,Pa.height+1);P.restore();if(ca&&0<ca.length){P.fillStyle=ma.header.color;P.strokeStyle=ma.header.splitColor;P.textBaseline="middle";P.textAlign="center";P.font=getFontSizeWithFont(ma.header.fontSize,ma.header.fontFamily);Kb=P.font;ma.header&&ma.header.fontBold&&(P.font=
"bold "+Kb);var rc=null,Ac=null,Gc=null;Kb=Pa.top+Pa.height/2+1;if(gb)for(lc in gb){cc=lc.split(",");if(1==cc.length){La=ca[lc].x-ha+kb.left-3;if(La>=ja)break;Ta={left:La,top:Pa.top,width:ca[lc].width,height:Pa.height}}else for(Ta={left:0,top:Pa.top,width:0,height:Pa.height},$b=0;$b<cc.length;$b++)""!=cc[$b]&&(ec=parseInt(cc[$b]),0==$b&&(La=ca[ec].x-ha+kb.left-3,Ta.left+=La),Ta.width+=ca[ec].width);null==Ta.width&&(Ta.width=ja);ma.header.paddingLeft&&(Ta.left+=parseInt(ma.header.paddingLeft),Ta.width-=
parseInt(ma.header.paddingLeft));ma.header.paddingRight&&(Ta.width-=parseInt(ma.header.paddingRight));gb[lc].setCellsPosition(Ta,ma.header);gb[lc].draw(P,ma.cell,0,0,Ta)}else for(Ta=Ja;Ta<ca.length;Ta++){La=ca[Ta].x-ha+kb.left;if(La>=ja)break;var lc=La;$b=ca[Ta].width;null==$b&&($b=ja);ma.header.paddingLeft&&(lc+=parseInt(ma.header.paddingLeft),$b-=parseInt(ma.header.paddingLeft));ma.header.paddingRight&&($b-=parseInt(ma.header.paddingRight));null!=ca[Ta].plugs&&null!=ca[Ta].plugs.type&&(ec=.3*ma.header.height,
8>ec&&(ec=8),cc={left:La+ca[Ta].width-1.3*ec-2,top:Pa.top+(Pa.height-ec)/2,width:ec,height:ec},ca[Ta].plugs.rect=cc,ca[Ta].plugs.colors?(ec=ca[Ta].plugs.colors[0],jb=ca[Ta].plugs.colors[1],sb=ca[Ta].plugs.colors[2],qb=ca[Ta].plugs.colors[3]):(ec=ma.plugsColors[0],jb=ma.plugsColors[1],sb=ma.plugsColors[2],qb=ma.plugsColors[3]),ca[Ta].plugs.status&&(roundRect(P,La,Pa.top,ca[Ta].width,Pa.height,0,!1,!0,null,qb),roundRect(P,La,Pa.top,ca[Ta].width,Pa.height,0,!1,!1,sb,null)),null!=ca[Ta].plugs.condition&&
1==ca[Ta].plugs.condition?drawScreenPlus(P,cc,!0,ec,jb):drawScreenPlus(P,cc,ca[Ta].plugs.status,ec,jb),N.plugs[Ta]=ca[Ta].plugs);ec=.3*ma.header.height;if(0==Ja||La>=ca[Ja-1].x+ca[Ja-1].width-ha+kb.left)P.textAlign=ca[Ta].textAlign?ca[Ta].textAlign:ma.header.textAlign?ma.header.textAlign:"center",null!=ca[Ta].titleProperty&&null!=xLanguage.langMap[ca[Ta].titleProperty]&&(ca[Ta].title=xLanguage.langMap[ca[Ta].titleProperty]),cc=0,null!=ca[Ta].order&&0!=ca[Ta].order&&(Ja?La+ca[Ta].width-ec-4>ca[Ja-
1].x+ca[Ja-1].width&&(rc=ca[Ta].order,Ac=La,Gc=ca[Ta].width,cc+=16):(rc=ca[Ta].order,Ac=La,Gc=ca[Ta].width,cc+=16)),jb=ec=0,ca[Ta].marginLeft&&(ec=ca[Ta].marginLeft),ca[Ta].marginRight&&(jb=ca[Ta].marginRight),"{{ check }}"==ca[Ta].field?R?drawCheckBox(P,{left:ca[Ta].x+ca[Ta].width/4,top:Kb/2,width:.5*ca[Ta].width,height:.5*ca[Ta].height},!0,1,ma.header.color,"transparent",ma.header.color):drawCheckBox(P,{left:ca[Ta].x+ca[Ta].width/4,top:Kb/2,width:.5*ca[Ta].width,height:.5*ca[Ta].height},!1,1,ma.header.color,
"transparent",ma.header.color):(qb=ca[Ta].title,ca[Ta].format&&(qb=getValueFormatString(qb,ca[Ta].valueType,ca[Ta].format,null)),"right"==P.textAlign?P.fillText(qb,lc+$b-cc-jb,Kb,$b-2-cc):"left"==P.textAlign?P.fillText(qb,lc+ec,Kb,$b-2):P.fillText(qb,lc+$b/2,Kb,$b-2));if(!ca[Ta].plugs||ca[Ta].plugs&&!ca[Ta].plugs.status)if(0==Ja||La>ca[Ja-1].x)P.beginPath(),cc=0,ma.header.splitLineHeight<Pa.height&&(cc=Pa.height-ma.header.splitLineHeight),P.moveTo(La+ca[Ta].width,Pa.top+cc),P.lineTo(La+ca[Ta].width,
Pa.top+Pa.height-cc),P.stroke(),P.closePath()}}if(0<Ja&&ca&&1<ca.length){P.beginPath();P.fillStyle=ma.header.backgroundColor;P.fillRect(Pa.left,Pa.top,ca[Ja-1].x+ca[Ja-1].width,Pa.height);P.fillStyle=ma.header.color;for(Ta=0;Ta<Ja;Ta++){La=ca[Ta].x;if(La>=ja)break;lc=La;$b=ca[Ta].width;ma.header.paddingLeft&&(lc+=parseInt(ma.header.paddingLeft),$b-=parseInt(ma.header.paddingLeft));ma.header.paddingRight&&($b-=parseInt(ma.header.paddingRight));P.textAlign=ca[Ta].textAlign?ca[Ta].textAlign:ma.header.textAlign?
ma.header.textAlign:"center";ec=cc=0;ca[Ta].marginLeft&&(cc=ca[Ta].marginLeft);ca[Ta].marginRight&&(ec=ca[Ta].marginRight);null!=ca[Ta].titleProperty&&null!=xLanguage.langMap[ca[Ta].titleProperty]&&(ca[Ta].title=xLanguage.langMap[ca[Ta].titleProperty]);jb=P.font;ma.header&&ma.header.fontBold&&(P.font="bold "+jb);"right"==P.textAlign?P.fillText(ca[Ta].title,lc+$b-ec,Kb,$b-2):"left"==P.textAlign?P.fillText(ca[Ta].title,lc+cc,Kb,$b-2):P.fillText(ca[Ta].title,lc+$b/2,Kb,$b-2);P.moveTo(La+ca[Ta].width,
Pa.top+3);P.lineTo(La+ca[Ta].width,Pa.top+ma.header.height-3);null!=ca[Ta].order&&0!=ca[Ta].order&&(rc=ca[Ta].order,Ac=ca[Ta].x,Gc=ca[Ta].width);P.font=jb}P.stroke();P.closePath()}null!=Ac&&(P.globalAlpha=1,ec=.3*ma.header.height,8>ec&&(ec=8),cc={left:Ac+Gc-ec-4,top:Pa.top+(Pa.height-.8*ec)/2,width:.8*ec,height:.8*ec},"desc"==rc?drawTriangleDown(P,cc,ma.header.color,ma.header.color):"asc"==rc&&drawTriangleUp(P,cc,ma.header.color,ma.header.color));ma.header.borderColor&&""!=ma.header.borderColor&&
(P.beginPath(),P.strokeStyle=ma.header.borderColor,P.moveTo(Pa.left,Pa.top+Pa.height),P.lineTo(Pa.left+ja,Pa.top+Pa.height),P.stroke(),P.closePath());void 0!=Fb&&ub&&(P.beginPath(),Ta=Fb,La=ca[Ta].x-ha+kb.left,P.fillStyle=ma.header.backgroundColor,P.globalAlpha=.8,P.fillRect(La,Pa.top,ca[Ta].width,Pa.height),P.globalAlpha=1,P.fillStyle=ma.header.color,lc=La,$b=ca[Ta].width,ma.header.paddingLeft&&(lc+=parseInt(ma.header.paddingLeft),$b-=parseInt(ma.header.paddingLeft)),ma.header.paddingRight&&($b-=
parseInt(ma.header.paddingRight)),P.textAlign=ca[Ta].textAlign?ca[Ta].textAlign:ma.header.textAlign?ma.header.textAlign:"center","right"==P.textAlign?P.fillText(ca[Ta].title,lc+$b,Kb,$b-2):"left"==P.textAlign?P.fillText(ca[Ta].title,lc,Kb,$b-2):P.fillText(ca[Ta].title,lc+$b/2,Kb,$b-2),P.strokeStyle=ma.header.splitColor,P.fillStyle=ma.adjustHeaderColor,P.fillRect(La,kb.top,ca[Ta].width,ea),P.closePath())}ca&&0<Ja&&Ja<ca.length&&(La=ca[Ja].x+kb.left,La<ja&&(P.beginPath(),P.setLineDash(ma.frozenSplitLineDash),
P.strokeStyle=ma.frozenSplitLineColor,0<ha&&(P.shadowBlur=10<ha?1:0,P.shadowColor=ma.scrollerFrozenSplitLineColor,P.shadowOffsetX=3<ha?1:0,P.shadowOffsetY=0),P.moveTo(La,Pa.top),P.lineTo(La,Pa.top+Pa.height+ea),P.stroke(),P.shadowBlur=0,P.shadowOffsetX=0,P.closePath()));ma.title.show&&(ma.title.paddingLeft&&(r+=parseInt(ma.title.paddingLeft),z-=parseInt(ma.title.paddingLeft)),ma.title.paddingRight&&(z-=parseInt(ma.title.paddingRight)),P.beginPath(),P.fillStyle=ma.title.color,P.textBaseline="middle",
P.textAlign=ma.title.textAlign,La=r,"right"==P.textAlign?La=r+z:"center"==P.textAlign&&(La=r+z/2),Kb=ma.title.text,rc=Y.date||"2019.10.31",Kb=Kb.replace(/{{ date }}/gi,rc),Kb=Kb.replace(/{{ week }}/gi,"Wensday"),rc=Ra,Kb=Kb.replace(/{{ total }}/gi,rc),0<=Kb.indexOf("{{ result information }}")&&(oa&&oa[0]?(rc=oa[0].table.info.message?"\u67e5\u8be2\u5931\u8d25\uff1a"+oa[0].table.info.message:"\u5171\u67e5\u8be2\u5230 "+oa[0].table.info.totalRows+" \u4e2a\u7ed3\u679c",oa[0].table.info.msg&&(rc+=", "+
oa[0].table.info.msg),Kb=Kb.replace(/{{ result information }}/gi,rc)):Kb=""),P.fillStyle=ma.title.backgroundColor,P.fillRect(r,u,z,H),P.fillStyle=ma.title.color,ma.title.font&&(P.font=ma.title.font),P.fillText(Kb,La,u+H/2),""!=ma.title.splitColor&&(P.strokeStyle=ma.title.splitColor,P.lineWidth=1,P.moveTo(r,u+H),P.lineTo(r+z,u+H),P.stroke()),P.closePath());P.fillStyle=ma.marginBackgroundColor&&""!=ma.marginBackgroundColor&&"transparent"!=ma.marginBackgroundColor?ma.marginBackgroundColor:ma.backgroundColor;
ma.marginLeft&&P.fillRect(0,-.5,Xa.left,Ga);ma.marginTop&&P.fillRect(0,-.5,ua,Xa.top+1);ma.marginRight&&P.fillRect(Xa.left+Xa.width-.5,-.5,ua-(Xa.left+Xa.width)+1,Ga);ma.marginBottom&&P.fillRect(0,Xa.top+Xa.height-.5,ua,Ga-(Xa.top+Xa.height)+1);ma.borderColor&&""!=ma.borderColor&&"transparent"!=ma.borderColor&&(P.beginPath(),P.strokeStyle=ma.borderColor,P.moveTo(kb.left,kb.top-da),P.lineTo(kb.left+kb.width-1,kb.top-da),P.lineTo(kb.left+kb.width-1,kb.top+kb.height-1),P.lineTo(kb.left,kb.top+kb.height-
1),P.lineTo(kb.left,kb.top-da),P.stroke(),P.closePath());Oa=0;if(ca)for(Ta=0;Ta<ca.length;Ta++)Oa+=ca[Ta].width;1==ma.paging?(Sb&&(Sb=null),Ub&&(Ub=null)):(Sb&&(Sb.setPosition(void 0,kb.top,ua-(kb.left+kb.width),Ga-(kb.top+kb.height)),Sb.setSliderPos(na,ea,Dc())),!ma.header.full&&Ub?(Ub.setPosition(kb.left,void 0,ua-(kb.left+kb.width),Ga-(kb.top+kb.height)),Ub.setSliderPos(ha,ja,Oa)):Ub=null);P.restore()};var Kc=function(P,ua){var Ga=ib[5];P.beginPath();P.fillStyle=ma.containCell.option.backgroundColor;
P.fillRect(ua.left-.5,ua.top-.5,ua.width+1,ua.height+1);P.closePath();Ga.setCellsPosition(ua);Ga.draw(P,ma.containCell.option,ua.left,ua.top,ua)};this.multiseriateDraw=function(P,ua,Ga,Ja,Xa){Ua=Xa=Math.ceil(ua/ma.multiseriate.colMaxWidth);Ja=ua/Xa;for(var La=ca,Ta=0,jb=0,qb=0;qb<La.length;qb++)null!=La[qb].initWidth&&(Ta+=La[qb].initWidth,jb++);if(jb==La.length)for(Ta=Ja/Ta,jb=0;jb<La.length;jb++)for(La[jb].width=La[jb].initWidth*Ta,qb=La[jb].offsetX=0;qb<jb;qb++)La[jb].offsetX+=La[qb].width;wc();
N.checkNextQuery();N.clearCtx(ua,Ga);if(1==ma.header.show)for(P.beginPath(),P.save(),P.fillStyle=ma.header.backgroundColor,P.strokeStyle="",P.fillRect(Pa.left-.5,Pa.top-.5,Pa.width+1,Pa.height+1),P.restore(),La=0;La<Xa;La++)if(Ta=La*Ja+kb.left,ma.header.borderColor&&""!=ma.header.borderColor&&(P.beginPath(),P.strokeStyle=ma.header.borderColor,P.moveTo(Ta,Pa.top+Pa.height),P.lineTo(Ta+Ja,Pa.top+Pa.height),P.stroke(),P.closePath()),ca&&0<ca.length)for(P.fillStyle=ma.header.color,P.strokeStyle=ma.header.splitColor,
P.textBaseline="middle",P.textAlign="center",P.font=""+ma.header.fontSize+"px "+ma.header.fontFamily,jb=P.font,ma.header&&ma.header.fontBold&&(P.font="bold "+jb),jb=Pa.top+Pa.height/2+1,qb=0;qb<ca.length;qb++){var sb=Ta+kb.left+ca[qb].offsetX,Eb=ca[qb].width;null==Eb&&(Eb=ja);ma.header.paddingLeft&&(sb+=parseInt(ma.header.paddingLeft),Eb-=parseInt(ma.header.paddingLeft));ma.header.paddingRight&&(Eb-=parseInt(ma.header.paddingRight));P.textAlign=ca[qb].textAlign?ca[qb].textAlign:ma.header.textAlign?
ma.header.textAlign:"center";var Mb=0,Qb=0;ca[qb].marginLeft&&(Mb=ca[qb].marginLeft);ca[qb].marginRight&&(Qb=ca[qb].marginRight);var Wb=ca[qb].title;ca[qb].format&&(Wb=getValueFormatString(Wb,ca[qb].valueType,ca[qb].format,null));"right"==P.textAlign?P.fillText(Wb,sb+Eb-xOrderyBy-Qb,jb,Eb-2-xOrderyBy):"left"==P.textAlign?P.fillText(Wb,sb+Mb,jb,Eb-2):P.fillText(Wb,sb+Eb/2,jb,Eb-2)}if(ta&&ta.data){Ta=0;P.beginPath();P.textBaseline="top";Sa=jb=rb/Xa;La=[];for(qb=0;qb<Xa;qb++)for(sb=qb*Ja+kb.left,Eb=
kb.top,Mb=Ma+qb*jb,Qb=0;Qb<jb;Qb++){Wb=Mb+Qb;for(var Kb=0,gc=0,dc=0;dc<ca.length;dc++)if(null!=ca[dc].objects&&ca[dc].objects[Ta]){var $b=ca[dc].x+kb.left+sb,sc=ca[dc].width,tc=Eb+Qb*ma.rowHeight,kc=ma.rowHeight;ea/ma.rowHeight>jb?(tc=Eb+Qb*ea/jb,kc=ea/jb,ma.multiRowHeight=kc):ma.multiRowHeight=ma.rowHeight;0!=Kb||Wb!=la.index||xGlobal.focusWidget!=N&&1!=ma.alwaysShowSelected||(P.fillStyle=ma.cursorColor,P.fillRect(sb,tc,Ja,ma.multiRowHeight?parseInt(ma.multiRowHeight):ma.rowHeight),P.fillStyle=ma.cell.color);
gc=tc+kc;sc={left:$b,top:tc,width:sc,height:kc};ca[dc].objects[Ta].setCellsPosition(sc);ca[dc].objects[Ta]&&(ca[dc].objects[Ta].draw(P,ma.cell,$b,tc,sc),Kb++)}Ta++;gc&&(La[Qb]=gc)}P.closePath();if(1==ma.showRowSplitLine){P.beginPath();P.setLineDash(ma.rowSplitLineDash);P.strokeStyle=ma.rowSplitLineColor;P.lineWidth=ma.rowSplitLineHeight;for(Ta=0;Ta<La.length;Ta++)jb=parseInt(La[Ta]),P.moveTo(kb.left,jb),P.lineTo(kb.left+ja,jb);P.stroke();P.closePath()}if(1==ma.showColSplitLine){P.beginPath();P.setLineDash(ma.colSplitLineDash);
P.strokeStyle=ma.colSplitLineColor;for(La=0;La<Xa;La++)for(Ta=La*Ja+kb.left,Ta=parseInt(Ta),P.moveTo(Ta,0),P.lineTo(Ta,kb.top+ea),jb=0;jb<ca.length;jb++)qb=ca[jb].x+kb.left+Ta,qb=parseInt(qb),P.moveTo(qb,0),P.lineTo(qb,kb.top+ea);P.stroke();P.closePath()}}Sb&&0==ma.cursorOnWheel&&(Sb.setPosition(void 0,kb.top,ua-(kb.left+kb.width),Ga-(kb.top+kb.height)),Sb.setSliderPos(na,ea*Ua,Ra*ma.multiRowHeight));if(1==ma.multiseriate.showColSplitLine){P.beginPath();P.strokeStyle=ma.multiseriate.multiColsSplitColor;
for(ua=1;ua<Ua;ua++)P.moveTo(ua*Ja,0),P.lineTo(ua*Ja,Ga);P.stroke();P.closePath()}};this.clearCtx=function(P,ua){null==V&&(V=E.getContext("2d"));ra=getPixelRatio(V);V.save();E.width=P*ra;E.height=ua*ra;E.style.left=0;E.style.top=0;E.style.width=P+"px";E.style.height=ua+"px";1<ra&&V.setTransform(ra,0,0,ra,0,0);V.translate(.5,.5);V.lineWidth=1;V.beginPath();V.fillStyle=ma.backgroundColor;V.strokeStyle="";V.fillRect(kb.left-.5,kb.top-.5,kb.left+kb.width+1,kb.top+kb.height+1);V.closePath();V.fillStyle=
ma.cell.color;V.font="14px "+xGlobal.systemFont};this.checkNextQuery=function(){0>na&&(na=0);var P=0;if(db)for(var ua=0;ua<db.length;ua++){if(na>=db[ua][1]&&na<db[ua][1]+db[ua][0]){P=ua;1==ma.orderReverse&&0>ma.initCursorPos&&(P=db.length-1-ua);break}}else ma.rowHeight&&(P=Math.floor(na/ma.rowHeight)),Da&&0<Da.length&&(P=ma.firstRowHeight>na?0:Math.floor((na-ma.firstRowHeight)/ma.rowHeight)+1),1==ma.multiseriate.show&&(null==ma.multiRowHeight&&ca.begin?P=ca.begin:isNaN(P)&&isNaN(na)&&null!=ma.multiRowHeight&&
ca.begin?(P=ca.begin,na=ca.begin*ma.multiRowHeight):P=ma.multiRowHeight?Math.ceil(na/ma.multiRowHeight):Math.ceil(na/ma.rowHeight));ua=zb;rb=parseInt(ea/ma.rowHeight);zb=Math.ceil(ea/ma.rowHeight);1==ma.multiseriate.show&&(rb=parseInt(ea/ma.rowHeight)*Ua,zb=Math.floor(ea/ma.rowHeight)*Ua);Y.totalPages=Math.ceil(Ra/rb);la.index>Ra-1&&(la.index=Ra-1,P=Ra-1-rb,0>P&&(P=0));0>la.index&&(la.index=0);P+rb>Ra&&(P=Ra-rb,0>P&&(na=P=0));if(aa&&0<aa.length&&aa[0].callback_object)null==aa[0].callback_object.callback_query&&
N.setTable(N.onDoCallback(aa[0].callback_object));else{a:{if(aa){var Ga=aa;-1!=Ga.indexOf("{{")&&(Ga=replaceVariablesValue(Ga,Y,oa));for(var Ja=0;Ja<Ga.length;Ja++){var Xa=Ga[Ja];if(Xa.limit&&Xa.limit.mode&&("window"==Xa.limit.mode||"synch"==Xa.limit.mode)){Ga=!0;break a}}}Ga=void 0}if(1==Ga)Ma=P,N.query(),vc(!1);else if(Ma!=P||zb!=ua||0!=va){if(null==ta||null==ta.info||P<ta.info.begin||zb!=ua||1==Qa||1==Q&&""!=ma.initCursorPos||ta.info.begin+ta.info.rows<ta.info.totalRows&&P+zb>=ta.info.dataBegin+
ta.info.rows-1&&1!=ma.localPaging)Ma=P,Qa=!1;Ma=P;N.query();vc(!1)}}return P};var wc=function(){if(ca)for(var P=0,ua=0;ua<ca.length;ua++)ca[ua].x=P,P+=ca[ua].width;oc()},Lc=function(P){if(0<=bb.indexOf(P))for(var ua=0;ua<bb.length;ua++){if(bb[ua]==P){bb.splice(ua,1);break}}else bb[bb.length]=P;N.query()};this.onMouseOut=function(P){eb=Za=0;ub=!1;if(Va||void 0!=Fb)N.onMouseUp(P);null!=lb&&(lb=null,N.draw(!0))};this.onMouseMove=function(P){var ua=P.clientX-eb,Ga=!1;if(M)for(var Ja=0;5>Ja;Ja++)if(ib&&
ib[Ja]&&M[Ja]&&isInRect(P.offsetX,P.offsetY,M[Ja])){Ja=ib[Ja].onMouseMove(P);if(xGlobal.mouseOverObject!=Ja){if(xGlobal.mouseOverObject&&xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(P,N);xGlobal.mouseOverObject=Ja;Ga=!0}Ga&&N.draw(!0);return}if(null!=xGlobal.mouseOverObject&&xGlobal.mouseOverObject!=X){if(X=xGlobal.mouseOverObject,xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(P,N)}else xGlobal.mouseOverObject||(X=null);if(null!=this.linkList){Ja=0;
for(var Xa in this.linkList)if(Ja=this.linkList[Xa],Ja.rect.x<=P.offsetX&&P.offsetX<=Ja.rect.x+Ja.rect.width&&Ja.rect.y-Ja.rect.height<=P.offsetY&&P.offsetY<=Ja.rect.y+Ja.rect.height){this.httpLink=Ja.link;Ja=1;break}else Ja=0;1==Ja?this.style.cursor="pointer":this.httpLink=this.style.cursor=""}if(1==P.buttons){var La=yc();if(0<=Ob)ua=kb.left,Ob>=La&&(ua-=ha),0<Ob&&(ua=ca[Ob-1].x+ca[Ob-1].width,Ob>=La&&(ua-=ha)),ca[Ob].width=P.offsetX-ua,wc();else if(ma.header.enableAdjust&&null!=Fb&&Fb>=La)30<Math.abs(ua)&&
(ub=!0,ua=kb.left+P.offsetX-Ya-ha,Fb<ca.length-1&&P.offsetX>ca[Fb+1].x+ca[Fb+1].width/2-ha?(P=ca[Fb],ca[Fb]=ca[Fb+1],Fb++,ca[Fb]=P,wc()):0<Fb&&P.offsetX<ca[Fb-1].x+ca[Fb-1].width/2-ha&&(P=yc(),Fb>P&&(P=ca[Fb],ca[Fb]=ca[Fb-1],Fb--,ca[Fb]=P,wc())),ca[Fb].x=ua+ha-kb.left);else if(1==ma.adjustDataOrder.enable&&1<Ra)if("delayed"!=ma.adjustDataOrder.model&&1==Va&&(xa+5<P.offsetY||xa-5>P.offsetY)&&Va&&(fc=!0),1==fc)D=P.offsetY,D<xa?(Ba.to=Bc(la.rect.top+la.rect.height/3).row,0>Ba.to&&(Ba.to=0)):(Ba.to=Bc(la.rect.top+
la.rect.height-la.rect.height/3).row+1,Ba.to>Ra&&(Ba.to=Ra)),Ba.to==Ba.from&&(Ba.to=null);else{"delayed"==ma.adjustDataOrder.model&&(Va=!1);return}N.draw(!0)}else{if(null==Fb&&ca){Xa=Bc(P.offsetY).row;Xa-=ca.begin;ma.overBackgroundColor&&""!=ma.overBackgroundColor&&lb!=Xa&&(lb=Xa,Ga=!0);if(0<=Xa&&ca)for(Ja=0;Ja<ca.length;Ja++)if(ua=ca[Ja].x,P.offsetX>ua-1&&P.offsetX<ua+ca[Ja].width){ca[Ja].objects&&ca[Ja].objects[Xa]&&(La=ca[Ja].objects[Xa].onMouseMove(P));break}if(xGlobal.mouseOverObject!=La){if(xGlobal.mouseOverObject&&
xGlobal.mouseOverObject.onMouseOut)xGlobal.mouseOverObject.onMouseOut(P,N);xGlobal.mouseOverObject=La;Ga=!0}}Fb=null;Xa=void 0;if(1==ma.header.show&&ca&&Pa&&P.offsetY>=Pa.top&&P.offsetY<Pa.top+Pa.height)for(La=yc(),Ja=0;Ja<ca.length;Ja++)if(ua=ca[Ja].x+ca[Ja].width+kb.left,Ja>=La&&(ua-=ha),P.offsetX>=ua-1&&P.offsetX<=ua+1){Xa=-Ja;break}Ob!=Xa&&0==ma.header.full&&(Ob=Xa,E.style.cursor=void 0!=Ob?"col-resize":"default");Ga&&N.draw(!0)}};this.clearMultiSelected=function(){Na.multiSelected=[];R=!1;N.query()};
this.getVisibleItems=function(){return zb};var Mc=function(P,ua){if(1==ma.enableMultiSelected)if(1==P.buttons&&P.ctrlKey){ua=!0;for(P=0;P<Na.multiSelected.length;P++)if(Na.multiSelected[P]==la.index){ua=!1;delete Na.multiSelected[P];break}1==ua&&(Na.multiSelected[Na.multiSelected.length]=la.index);Na.beginSelectedIndex=la.index}else if(P.shiftKey)if(null==Na.beginSelectedIndex)Na.beginSelectedIndex=la.index;else{ua=Na.beginSelectedIndex;var Ga=Na.lastCursorIndex;ua>Ga&&(ua=Na.lastCursorIndex,Ga=Na.beginSelectedIndex);
for(P=0;P<Na.multiSelected.length;P++)Na.multiSelected[P]>=ua&&Na.multiSelected[P]<=Ga&&delete Na.multiSelected[P];ua=Na.beginSelectedIndex;Ga=la.index;ua>Ga&&(ua=la.index,Ga=Na.beginSelectedIndex);for(P=ua;P<=Ga;P++)Na.multiSelected[P]=P}else if("mousedown"!=P.type||"mousedown"==P.type&&(1==P.buttons||1==Na.multiSelected.length))if(!ma.hasCheckBox)0<Na.multiSelected.length&&(Na.multiSelected=[]),Na.multiSelected[0]=la.index,Na.beginSelectedIndex=la.index;else if(ua){ua=!0;for(P=0;P<Na.multiSelected.length;P++)if(Na.multiSelected[P]==
la.index){ua=!1;Na.multiSelected.splice(P,1);break}1==ua&&(Na.multiSelected[Na.multiSelected.length]=la.index)}};this.onDblClick=function(P){Nc(P,!0);if(isInRect(P.offsetX,P.offsetY,kb))if(p&&p.doDblClick){getBoundValues(Fa,Y,oa,la.index,jc());P=p.doDblClick;for(var ua=0;ua<P.length;ua++)P[ua].action?N.doAction(P[ua].action):P[ua].callback&&P[ua].callback(jc())}else if(cb&&cb.onDblClick)cb.onDblClick(P);else if(Db)Db.onDblClick(P);ma.callback_enter&&ma.callback_enter(jc());if(N.page&&N.page.parent&&
"xSaftEdit"==N.page.parent.constructor.name)N.page.parent.onKeyDown({keyCode:13})};this.clickInRect=function(P){var ua=Dc(),Ga=this.getOffsetY();return P>da&&P+Ga<ua+da?!0:!1};this.setFocus=function(){};var Oc=function(P,ua){ua-=kb.top-na;if(db){for(P=0;P<db.length;P++)if(ua>db[P][1]&&ua<db[P][1]+db[P][0])return 1==ma.orderReverse&&0>ma.initCursorPos&&(P=ta.info.totalRows-ta.info.dataBegin-1-P),P;return null}return Math.floor(ua/ma.rowHeight)},Bc=function(P){return{row:Oc(1,P),col:0}};this.onMouseDown=
function(P){ub=!1;Za=P.clientY;eb=P.clientX;xGlobal.focusObject=null;for(var ua=0;6>ua;ua++)if(ib&&ib[ua]&&M&&isInRect(P.offsetX,P.offsetY,M[ua])){if(5==ua&&M[ua]&&0==ma.containCell.show)break;var Ga=ib[ua].onMouseDown(P);if(Ga&&Ga!=cb){if(cb&&cb.onUnFocus)cb.onUnFocus();cb=Ga}if(cb){if(cb.onMouseDown)cb.onMouseDown(P,xGlobal.focusObject==cb?!0:!1);xGlobal.focusObject=cb;N.page.setPageFocusWidget(N);N.draw(!0)}return}if(null!=ca&&null!=ta){Nb=P.offsetX;yb=P.offsetY;null!=this.httpLink&&""!=this.httpLink&&
window.open(this.httpLink);var Ja=Bc(P.offsetY).row;if(0<=Ja&&ca)for(Ja-=ca.begin,ua=0;ua<ca.length;ua++)if(x=ca[ua].x,P.offsetX>x-1&&P.offsetX<x+ca[ua].width){ca[ua].objects&&ca[ua].objects[Ja]&&(Ga=ca[ua].objects[Ja].onMouseDown(P));break}if(Ga!=cb){if(cb&&cb.onUnFocus)cb.onUnFocus();cb=Ga}if(cb&&cb.onMouseDown)cb.onMouseDown(P,xGlobal.focusObject==cb?!0:!1);xGlobal.focusObject=cb;Nc(P,!1);null==Ob&&null==Fb&&1==ma.adjustDataOrder.enable&&(Ba.data=ma.adjustDataOrder.field?N.getSelected(ma.adjustDataOrder.field):
null,Ba.from=Ja+Ma,Ba.to=null,xa=D=P.offsetY,S=P.offsetY-(ma.rowHeight*la.index-na+kb.top+ma.firstRowHeight),"delayed"==ma.adjustDataOrder.model?function(){wa++;Va=!0;setTimeout(function(){Ea++;Va&&wa==Ea&&(fc=!0,N.draw(!0))},250)}():Va=!0)}};var Nc=function(P,ua){for(var Ga=yc(),Ja=0,Xa=0;Xa<Ga;Xa++)Ja+=ca[Xa].width;if(null!=ca){if(0>=Ob)Ob*=-1;else if(ma.header.show&&Pa&&P.offsetY>=Pa.top&&P.offsetY<=Pa.top+Pa.height&&""==ma.header.group){if(Ga&&0!=Ga)if(P.offsetX<Ja)for(Ga=0;Ga<ca.length;Ga++){if(ua=
ca[Ga].x+ca[Ga].width,P.offsetX>ca[Ga].x&&P.offsetX<ua){Fb=Ga;Ya=P.offsetX-ca[Ga].x;break}}else for(Ga=0;Ga<ca.length;Ga++){if(ua=ca[Ga].x+ca[Ga].width-ha,P.offsetX>ca[Ga].x-ha&&P.offsetX<ua){Fb=Ga;Ya=P.offsetX-ca[Ga].x;break}}else for(Ga=0;Ga<ca.length;Ga++)if(ua=ca[Ga].x+ca[Ga].width-ha,P.offsetX>ca[Ga].x-ha&&P.offsetX<ua){Fb=Ga;Ya=P.offsetX-ca[Ga].x;break}null!=Fb&&null!=ca[Fb].plugs&&(ua=ca[Fb].plugs.rect,P.offsetX>=ua.left&&P.offsetX<=ua.left+ua.width&&P.offsetY>=ua.top&&P.offsetY<=ua.top+ua.height&&
(N.plugs[Fb].status=!0,xListPlugs(P,ca[Fb],ma,N)))}else{Ga=ma.header.show?ma.header.height:0;wb&&0<wb.length&&"top"==wb[0].position&&(Ga+=wb[0].height);if(Ga<=P.offsetY&&ma.dragX)if($a=za=Math.floor((P.offsetY-Ga+na)/ma.rowHeight),1==ma.enableMultiSelected){Ja=!1;for(Ga=0;Ga<Na.multiSelected.length;Ga++)if(adjustRows[Na.multiSelected[Ga]]==$a){Ja=!0;break}Ja||0!=P.ctrlKey||ma.hasCheckBox||(Na.multiSelected=[]);for(Ga=0;Ga<Na.multiSelected.length;Ga++)Ja=Na.multiSelected[Ga],fb.includes(Ja)||fb.push(Ja);
Ga=getRowIndex($a);fb.includes(Ga)||fb.push(Ga)}else Pa&&P.offsetY>=Pa.top&&P.offsetY>Pa.top+Pa.height&&(Ga=Math.floor((na+P.offsetY-kb.top)/ma.rowHeight),fb=[getRowIndex(Ga)],getRowIndex(Ga));clickEvent=P;if(P.offsetY>kb.top&&P.offsetY<kb.top+kb.height&&P.offsetX>kb.left&&P.offsetX<kb.left+kb.width&&ta&&void 0!=ta.data)if(1==ma.multiseriate.show){ua=ja/Ua;for(Ga=1;Ga<=Ua;Ga++)if(P.offsetX>(Ga-1)*ua&&P.offsetX<Ga*ua){var La=Ga-1;break}for(ua=1;ua<=Sa;ua++)if(P.offsetY>kb.top+ma.multiRowHeight*(ua-
1)&&P.offsetY<kb.top+ma.multiRowHeight*ua){var Ta=ua-1;break}Ga=Ma+La*Sa+Ta;la.index=Ga;N.draw(!0)}else if(Ga=Oc(P.offsetX,P.offsetY),Ga<Ra){la.index=Ga;La=Hc();if(0<La.offset&&(Ga-=Ab,0<=Ga&&Ga<ta.data.length&&ta.data[Ga])){Ta=ta.data[Ga][La.levelIndex];Ja=ta.data[Ga][La.childrenIndex];Xa=La.offset-6;6>Xa&&(Xa=6);var jb=ca[0].x;jb+=La.offset*Ta;if(0<Ja)if("normal"!=ma.treeModel&&ma.treeModel)"special"==ma.treeModel&&(1==ua||P.offsetX>=kb.left&&P.offsetX<=kb.left+kb.width)&&(ua=ta.data[Ga][La.expandPathIndex],
ua=""==ua?"'"+ta.data[Ga][La.idIndex]+"'":ua+"/'"+ta.data[Ga][La.idIndex]+"'",Lc(ua));else if(1==ua||P.offsetX+kb.left>=jb&&P.offsetX+kb.left<=jb+Xa)ua=ta.data[Ga][La.expandPathIndex],ua=""==ua?"'"+ta.data[Ga][La.idIndex]+"'":ua+"/'"+ta.data[Ga][La.idIndex]+"'",Lc(ua)}La=ua=0;if(ma.hasCheckBox&&ca)for(Ta=0;Ta<ca.length;Ta++)if(ma.checkboxColumnNo==Ta){La+=ca[Ta].width;break}else ua+=ca[Ta].width,La+=ca[Ta].width;Mc(P,P.offsetX>=ua&&P.offsetX<=La);N.draw(!0)}a:if(null==ca)ua=0;else{for(La=0;La<ca.length;La++)if(ua=
ca[La].x+ca[La].width-ha,P.offsetX>ca[La].x-ha&&P.offsetX<ua){ua=La;break a}ua=void 0}Na.col=ua;0>ma.initCursorPos&&1==ma.orderReverse&&Gb&&(Xb=Gb-la.index-1);N.page&&N.page.setPageFocusWidget(N);0==P.shiftKey&&0==P.ctrlKey&&ba();Na.lastCursorIndex=la.index}N.page&&N.page.setPageFocusWidget(N)}};this.onMouseUp=function(P){for(var ua=0;6>ua;ua++)if(ib&&ib[ua]&&M&&isInRect(P.offsetX,P.offsetY,M[ua])){if(5==ua&&M[ua]&&0==ma.containCell.show)break;var Ga=ib[ua].onMouseUp(P);Ga==cb&&cb?cb.onMouseUp&&(1==
ma.enableFocus&&(xGlobal.focusObject=cb),cb.onMouseUp(P),N.draw(!0)):cb&&cb.onMouseUp&&(cb.onMouseUp(P),N.draw(!0));return}null!=Ob&&0<=Ob&&(ma.callback_adjustHeader&&ma.callback_adjustHeader(jc(),ca),Ob=null);if(void 0!=Fb){if(Nb==P.offsetX&&yb==P.offsetY){ua=!0;for(var Ja=null!=ca[Fb].cells[0].orderByAlias?ca[Fb].cells[0].orderByAlias:ca[Fb].cells[0].field,Xa=0;Xa<ma.orderByDont.length;Xa++)if(Ja.toLowerCase()==ma.orderByDont[Xa].toLowerCase()){ua=!1;break}if(1==ma.enableOrderBy&&"{{ order number }}"!=
Ja&&1==ua){ma.orderBy!=Ja?(ma.orderBy=Ja,"desc"!=ma.orderByType&&"asc"!=ma.orderByType&&(ma.orderByType="desc")):1==ma.orderBy3S?""==ma.orderByType?ma.orderByType="desc":"desc"==ma.orderByType?ma.orderByType="asc":"asc"==ma.orderByType&&(ma.orderByType=""):"desc"==ma.orderByType?ma.orderByType="asc":"asc"==ma.orderByType&&(ma.orderByType="desc");if(1==ma.orderByLocal)if("desc"==ma.orderByType||"asc"==ma.orderByType){if(1==sortTable(oa,ma.orderBy,ma.orderByType))for(ua=0;ua<ca.length;ua++)ma.orderBy.toLocaleLowerCase()==
ca[ua].cells[0].field.toLowerCase()?ca[ua].order=ma.orderByType:ca[ua].order=null}else if(pa){if(oa=xDeepCopy(pa))for(ua=0;ua<oa.length;ua++)oa[ua]&&oa[ua].table&&(oa[ua].table.dataStatus=[]);for(ua=0;ua<ca.length;ua++)ca[ua].order=null}N.query()}}wc();ma.callback_adjustHeader&&ma.callback_adjustHeader(jc(),ca);Fb=void 0;N.draw(!0)}if(0<fb.length){if(1==ma.dragX&&Ka){var La,Ta;fb.map(function(qb){La=qb;Ta=adjustRows[qb]});if(null!=fa.adjustOrder)for(ua=0;ua<fa.adjustOrder.length;ua++)if(Ja=fa.adjustOrder[ua],
null!=Ja.submit){Xa=getSubmissionContents(ia,Ja.submit);var jb=N.getRowData(La);jb.index={value:Ta};N.sendSubmit(Xa,Ja.callback,jb)}}fb=[];$a=za=null;N.draw(!0)}Ka=!1;if(p instanceof Array&&0<p.length)for(ua=0;ua<p.length;ua++)p[ua].onClick&&p[ua].onClick instanceof Array&&0<p[ua].onClick.length&&p[ua].onClick.map(function(qb){qb=qb.action;qb=qb.replace(")",", "+P.clientX+")");eval(qb)});Ja=Bc(P.offsetY).row;if(0<=Ja&&ca)for(Ja-=ca.begin,ua=0;ua<ca.length;ua++)if(x=ca[ua].x,P.offsetX>x-1&&P.offsetX<
x+ca[ua].width){ca[ua].objects&&ca[ua].objects[Ja]&&(Ga=ca[ua].objects[Ja].onMouseUp(P),null==Ga&&(Db=ca[ua].objects[Ja].getMouseDownCell(P)));break}Ga==cb&&cb?cb.onMouseUp&&(xGlobal.focusObject=cb,cb.onMouseUp(P),N.draw(!0)):cb&&cb.onMouseUp&&(cb.onMouseUp(P),N.draw(!0));1==ma.adjustDataOrder.enable&&(Va=!1,1==fc&&(fc=!1,I=!0,ma.adjustDataOrder.callback_adjustOrder&&null!=Ba.to&&(Ba.to>Ba.from&&Ba.to--,Ba.to!=Ba.from&&(ma.adjustDataOrder.callback_adjustOrder(jc(),Ba),la.index=Ba.to)),N.draw(!0)));
if(ma.enableMultiSelected&&(Ga={left:0,height:0,top:0,width:0},Ga.left=ca[ma.checkboxColumnNo].x,Ga.width=ca[ma.checkboxColumnNo].width,Ga.height=ma.header.height,isInRect(P.offsetX,P.offsetY,Ga))){if(R)R=!R,N.clearMultiSelected();else for(R=!R,Ga=0,Ga=Ra<zb?Ra:zb,ua=0;ua<Ga;ua++)Na&&Na.multiSelected.includes(Ma+ua)||Na.multiSelected.push(Ma+ua);N.draw(!0)}};this.onMouseWheel=function(P){if(1!=ma.wheelOnFocus||xGlobal.focusWidget==N)if("apple"==ma.scroller.model&&(Pb=!0,Sb&&(Sb.setSlideStatus(Pb),
a.clearTimeout(Tb),Tb=setTimeout(function(){Pb=!1;Sb&&Sb.setSlideStatus(Pb);a.clearTimeout(Tb)},2E3))),1!=ma.paging&&1!=ma.onlyOnePage&&ta&&null!=ta.data)if(0!=P.deltaY&&1==ma.cursorOnWheel){if(0>P.deltaY)la.index--;else{if(la.index==Ra-1)return;la.index++}Q=!1;uc();N.draw(!0);1!=xGlobal.passiveSupported&&P.preventDefault()}else{var ua=ha,Ga=na;Q=!1;if(0!=P.deltaY&&0==P.shiftKey){var Ja=Dc();ea<Ja?(1==ma.multiseriate.show?(na=0>P.deltaY?na-ma.multiRowHeight:na+ma.multiRowHeight,Number(Number(na+ea*
Ua).toFixed(6))>Number(Number(ma.multiRowHeight*Ra).toFixed(6))&&(na=ma.multiRowHeight*Ra-ea*Ua)):(na+=P.deltaY,ma.containCell&&1==ma.containCell.show&&ma.containCell.size.height?na+ea>Ja+ma.containCell.size.height&&(na=Ja-ea+ma.containCell.size.height):na+ea>Ja&&(na=Ja-ea)),0>na&&(na=0),N.draw(!0)):ea>=Ja&&ma.containCell&&1==ma.containCell.show&&ma.containCell.size.height?(na+=P.deltaY,na+ea>Ja+ma.containCell.size.height&&(na=Ja-ea+ma.containCell.size.height)):0!=na&&(na=0,N.draw(!0))}else 0!=P.deltaY&&
1==P.shiftKey?Pc(Math.floor(P.deltaY/5)):0!=P.deltaX&&Pc(P.deltaX);na==Ga&&ha==ua||1==xGlobal.passiveSupported||P.preventDefault()}};var Pc=function(P){ca&&0<ca.length&&ja<Oa?(ha+=P,ha>Oa-ja&&(ha=Oa-ja),0>ha&&(ha=0),N.draw(!0)):0!=ha&&(ha=0,N.draw(!0))};this.onKeyDown=function(P){xGlobal.keyDown=!1;if(ib&&xGlobal.focusObject&&xGlobal.focusObject==cb&&xGlobal.focusObject.onKeyDown){if(cb.onKeyDown(P)&&!ma.isFocus)return N.draw(!0),!0;N.draw(!0);return!1}var ua=!1,Ga=Hc();Q=!1;if(ma.callback_onKeydown&&
1==ma.callback_onKeydown(jc(),P))ua=!0;else switch(P.keyCode){case 40:1==ma.paging||1==ma.onlyOnePage?la.index<Ab+Gb&&la.index++:la.index++;ua=!0;break;case 38:1==ma.paging||1==ma.onlyOnePage?la.index>Ab&&la.index--:la.index--;ua=!0;break;case 34:if(db)if(1==ma.orderReverse&&0>ma.initCursorPos)for(Ga=ta.info.totalRows-1-Ma-db.begin;0<=Ga;Ga--){if(db[Ga][0]+db[Ga][1]>kb.height+na){la.index=ta.info.totalRows-ta.info.begin-1-Ga;na=db[Ga][1];break}}else for(Ga=Ma;Ga<Ma+2*(rb-1);Ga++){if(!db[Ga]){la.index=
Ga-1;break}if(db[Ga][1]+db[Ga][0]>2*kb.height+na){la.index=Ga-1;na=db[Ga-1][1]-kb.height;break}}else 1==ma.paging?Y.pageNo<parseInt(ta.info.totalRows/rb)&&(Y.pageNo++,la.index=Y.pageNo*rb):1!=ma.onlyOnePage&&(ua=Dc(),la.index=la.index*ma.rowHeight>ua?Math.ceil(ua/ma.rowHeight):Ma+2*(rb-1));ua=!0;break;case 33:if(db)if(1==ma.orderReverse&&0>ma.initCursorPos)for(Ga=ta.info.totalRows-1-Ma-db.begin,ua=na-kb.height,Ma=0,na=la.index=0;Ga<db.length;Ga++){if(db[Ga][0]+db[Ga][1]<ua){Ga-=2;la.index=ta.info.totalRows-
ta.info.begin-1-Ga;na=db[Ga][1];break}}else for(Ga=Ma;0<=Ga;Ga--){if(!db[Ga]||0>na-kb.height){na=la.index=0;break}if(db[Ga][1]<na-kb.height){la.index=Ga;na=db[Ga][1];break}}else 1==ma.paging?0<Y.pageNo&&(Y.pageNo--,la.index=Y.pageNo*rb):1!=ma.onlyOnePage&&(la.index=Ma-(rb-1));ua=!0;break;case 35:null==db&&(1==ma.paging?(Y.pageNo=parseInt(Ra/rb),Ra/rb<=parseInt(Ra/rb)&&Y.pageNo--,la.index=Y.pageNo*rb):1!=ma.onlyOnePage&&(1==ma.showContentHeight?la.index=Gb?Gb-1:0:(la.index=Ra-1,uc(),ma.initCursorPos&&
-1==ma.initCursorPos&&(Q=!0))));ua=!0;break;case 36:1==ma.paging&&(Y.pageNo=0);na=la.index=0;uc();ua=!0;break;case 39:if(0<Ga.offset){var Ja=la.index-Ab;if(0==Ja||"+"==ta.data[Ja][Ga.expandIndex]&&0<ta.data[Ja][Ga.childrenIndex])N.onDblClick({offsetY:kb.top+((Ja-Ma)*ma.rowHeight+7)}),ua=!0;break}1==ma.multiseriate.show&&(ua=la.index+Sa,ua>=Ma+rb-1&&(ua=Ma+rb-1+rb/Ua),la.index=ua,ua=!0);"hidden"!=ma.scroller.scrollerH&&(ha+=30,ha>Oa-ja&&(ha=0<Oa-ja?Oa-ja:0),ua=!0);break;case 37:if(0<Ga.offset){Ja=
la.index-Ab;"-"==ta.data[Ja][Ga.expandIndex]&&0<ta.data[Ja][Ga.childrenIndex]&&(N.onDblClick({offsetY:kb.top+((Ja-Ma)*ma.rowHeight+7)}),ua=!0);break}1==ma.multiseriate.show&&(ua=la.index-Sa,ua<=Ma&&(ua=Ma-rb/Ua),la.index=ua,ua=!0);"hidden"!=ma.scroller.scrollerH&&(ha-=30,0>ha&&(ha=0),ua=!0);break;case 13:if(N.page&&N.page.parent&&"xSaftEdit"==N.page.parent.constructor.name)N.page.parent.onKeyDown({keyCode:13});else L("doEnter");ua=!0;break;case 27:if(27==P.keyCode&&1==ma.adjustDataOrder.enable&&1==
fc){fc=!1;ua=!0;break}N.callbacks.doEscape&&(N.callbacks.doEscape(),ua=!0);break;default:return!1}ua&&(uc(),Na.lastCursorIndex!=la.index&&(Mc(P),Na.lastCursorIndex=la.index),0==Wa&&1>=Na.multiSelected.length&&ba(),Wa=1,N.draw(!0),P.preventDefault());return ua};this.onKeyUp=function(P){Wa=0;0!=P.shiftKey||"ArrowDown"!=P.code&&"ArrowUp"!=P.code||la.preIndex==la.index||ba()};this.doPaste=function(P){ma.callback_doPaste&&ma.callback_doPaste(P,jc())};var uc=function(){if(null!=la.index)if(0>la.index&&
(la.index=0),la.index>Ra-1&&(la.index=Ra-1),db)if(1==ma.orderReverse&&0>ma.initCursorPos){var P=db.length-1-la.index;0>db[P][1]-na?na=db[P][1]:db[P][1]+db[P][0]-na>kb.height&&(na=db[P][1]-(kb.height-db[P][0])-1)}else db[la.index]&&(db[la.index][1]+db[la.index][0]-kb.height>na?na=db[la.index][1]-(kb.height-db[la.index][0]):db[la.index][1]<na&&(na=db[la.index][1]));else 1==ma.paging?(null==Y.pageNo&&(Y.pageNo=0),Y.pageNo*rb>Ra&&(Y.pageNo=0,la.index=0),na=Y.pageNo*rb*ma.rowHeight):1==ma.multiseriate.show?
(la.index*ma.multiRowHeight<na&&(na=la.index*ma.multiRowHeight),la.index>=Ma+rb&&ea&&(na=(la.index+1)*ma.multiRowHeight-ea*Ua,0>na&&(na=0))):(la.index*ma.rowHeight<na&&(na=la.index*ma.rowHeight),la.index>=Ma+rb&&ea&&(na=(la.index+1)*ma.rowHeight-ea,0>na&&(na=0)))};this.isMyCanvas=function(P){return E==P?!0:!1};this.onContextMenu=function(P){1!=xGlobal.passiveSupported&&P.preventDefault()};this.getPopupMenu=function(P){P={target:N,variables:Y};if(ma.popupMenu){if(ma.popupMenu.callback_popup)return{popup:ma.popupMenu.callback_popup(P),
variables:Y};if(ma.popupMenu.popup)return{popup:ma.popupMenu.popup,variables:Y}}if(ma.popupMenu&&ma.popupMenu.subMenu)return N.page.boundMenuStatus(ma.popupMenu.subMenu),""!=ma.popupMenuPrepareAction&&(P=ma.popupMenuPrepareAction.indexOf("getSelected"),0<=P&&(P=trimBracket(ma.popupMenuPrepareAction.slice(P+11)),P=trimBracket(P),ma.popupMenu.data=N.getSelected(P))),ma.popupMenu};this.getSelected=function(P){if(ma.callback_onGetSelected)return{data:ma.callback_onGetSelected(P,1==ma.enableMultiSelected&&
1<Na.multiSelected.length?Na.multiSelected:[la.index],oa)};if(P){var ua=[];if(1==ma.enableMultiSelected&&1<Na.multiSelected.length)for(var Ga=0;Ga<Na.multiSelected.length;Ga++){var Ja=N.getFieldData(P,Na.multiSelected[Ga]-Ab);ua[Ga]=Ja.value}else Ja=N.getFieldData(P,la.index-Ab),ua[0]=Ja.value;Ga={queryInfo:N.queryInfo,data:{}};Ga.data=[ua]}else{ua=[];if(1==ma.enableMultiSelected&&0<Na.multiSelected.length)for(Ga=0;Ga<Na.multiSelected.length;Ga++)for(ua[Ga]=[],P=0;P<ca.length;P++)null!=Na.multiSelected[Ga]&&
ca[P].objects[Na.multiSelected[Ga]-Ab]&&(Ja=ca[P].objects[Na.multiSelected[Ga]-Ab].getValue(),ua[Ga][ua[Ga].length]=Ja);else for(ua[0]=[],P=0;P<ca.length;P++)Ja=ca[P].objects[la.index-Ab].getValue(),ua[0][ua[0].length]=Ja;Ga={queryInfo:N.queryInfo};Ga.data=ua}return Ga};this.getFieldData=function(P,ua){P=getFieldIndex(P,oa,Y);return getFieldDataFromIndex(P,ua,oa)};var Qc=function(P,ua){P=null!=P?P:Fa;if(oa&&oa[0]&&oa[0].table&&oa[0].table.data&&P){var Ga=oa[0].table,Ja=la.index-Ga.info.dataBegin;
null!=Xb&&(Ja=Xb+Ga.info.dataBegin);Ja=null!=ua?ua:Ja;for(ua=0;ua<P.length;ua++)if(P[ua].field&&P[ua].variable){var Xa=N.getFieldData(P[ua].field,Ja);Ga=P[ua].variable.split(".");Ga=Ga[1];if(null!=Y[Ga])Y[Ga]=Xa.value;else for(var La in Y)if(La==Ga){Y[Ga]=Xa.value;break}}}};this.getRowData=function(P){if(null==P)return null;for(var ua={},Ga=0,Ja=ca.length;Ga<Ja;Ga++)if(ca[Ga].objects){var Xa=ca[Ga].objects[P].getCells();if(Xa)for(var La=0,Ta=Xa.length;La<Ta;La++)Xa[La].field&&Xa[La].object.value&&
(ua[Xa[La].field]=Xa[La].object.value)}return ua};this.getBegin=function(){return Ma};this.readNew=function(P,ua,Ga,Ja){var Xa=function(){if(P.field)for(var Ta=0;Ta<P.field.length;Ta++)if(P.field[Ta][0]==Ga)return Ta;return-1}(),La=function(){if(P.field)for(var Ta=0;Ta<P.field.length;Ta++)if(P.field[Ta][0]==ua)return 12<ta.data[la.index][Ta].length?ta.data[la.index][Ta].slice(0,12):ta.data[la.index][Ta];return-1}();-1!=Xa&&N.page.setActivePageWithBounds(Ja,null,ta.data[la.index][Xa]+"&!!"+La)};this.synchPageBoundValue=
function(P,ua){P=void 0===P?"":P;ua=void 0===ua?0:ua;var Ga=ma.branchSend;if(null!=Fa&&ta&&ta.field&&ta.data){var Ja=null!=Xb?getBoundValues(Fa,Y,oa,Xb+ta.info.dataBegin,jc()):getBoundValues(Fa,Y,oa,la.index,jc());if(0<Ja.length)if(Ga)null==N.page?globalPage.getActivePage().synchBoundValue(P,ua+1,Ja,N):N.page.synchBoundValue(P,ua+1,Ja,N);else{Ga=-1;if(oa[0]&&"tree"==oa[0].table.info.mode){for(var Xa=0;Xa<oa[0].table.field.length;Xa++)"_expand"==oa[0].table.field[Xa][0]&&(Ga=Xa);Ga="~"==oa[0].table.data[la.index][Ga]?
!1:!0}else Ga=!0;Ga||(null==N.page?globalPage.getActivePage().synchBoundValue(P,ua+1,Ja,N):N.page.synchBoundValue(P,ua+1,Ja,N))}}};this.createDialog=function(P){createDialogForParent(a,P,N)};this.doAction=function(P){doWidgetAction(P,N.page,parent,Y,N)};this.onDoCallback=function(P){var ua=P.callback;if(P.object&&P.function&&"variables."==P.object.slice(0,10).toLowerCase()){var Ga=Y[P.object.slice(10)];Ga&&Ga[P.function]&&(ua=Ga[P.function])}if(ua){var Ja;if(P.parameter){for(var Xa in P.parameter)"data"!=
Xa&&(null==Ja&&(Ja={}),Ja[Xa]=P.parameter[Xa]);if(P=P.parameter.data){if(oa&&oa[0]&&oa[0].table){var La=oa[0].table.field;var Ta=oa[0].table.data;var jb=oa[0].table.info}null==Ja&&(Ja={});null==Ja.data&&(Ja.data=[]);null==Ja.data[0]&&(Ja.data[0]={});for(Xa in P)if(P[Xa].field)if("{{ order number }}"==P[Xa].field.toLowerCase())Ja.data[0][Xa]=la.index;else if("{{ check }}"==P[Xa].field.toLowerCase())Ja.data[0][Xa]=la.index;else{if(La&&Ta&&0<Ta.length)for(Ga=0;Ga<La.length;Ga++)if(P[Xa].field.toLowerCase()==
La[Ga][0].toLowerCase()){Ja.data[0][Xa]="row"==jb.rank?Ta[la.index-Ab][Ga]:Ta[Ga][la.index-Ab];break}}else P[Xa].variable?"variables."==P[Xa].variable.slice(0,10).toLowerCase()?Ja.data[0][Xa]=Y[P[Xa].variable.slice(10)]:Ja.data[0][Xa]=Y[P[Xa].variable]:Ja.data[0][Xa]=P[Xa]}}return ua(Ja)}};this.viewWillAppear=function(){zb=0;bc=!0};this.getWin=function(){return a};this.getCursor=function(){return Object.assign({},la,{row:la.index,col:Na.col})};this.reload=function(){N.clearQueryData();N.query()};
var Rc=function(P){for(var ua={},Ga,Ja=[],Xa=0;Xa<P[0].table.rotate.data.length;Xa++)if(-1!=P[0].table.rotate.data[Xa][2].indexOf("$r$")){var La=P[0].table.rotate.data[Xa][2].split("$r$")[0];Ga!=La&&(Ga=La,ua[Xa]=La)}Ga=0;for(var Ta in ua){Ta=parseFloat(Ta);Xa=["field"+Ta+"$Add$","t",ua[Ta]+"$Add$"];if(0!=Ta)for(Ja[Ta+Ga]=Xa,Xa=Ta-jb,La=0;La<Xa;La++)Ja[La+Ga+jb]=P[0].table.rotate.data[La+jb];else Ja[Ta]=Xa;var jb=Ta;Ga++}Ta=P[0].table.rotate.data.length-jb;for(Xa=0;Xa<Ta;Xa++)Ja[Xa+Ga+jb]=P[0].table.rotate.data[Xa+
jb];P[0].table.rotate.data=Ja;return ua};N.funcNameMap={goPage:N.goPage,goPrePage:N.goPrePage,goNextPage:N.goNextPage,setVariablesValue:N.setVariablesValue,doEnter:N.doEnter,thisPage:N.page};E.addEventListener("mousemove",N.onMouseMove);E.addEventListener("mouseout",N.onMouseOut);E.addEventListener("mousedown",N.onMouseDown);E.addEventListener("mouseup",N.onMouseUp);E.addEventListener("mousewheel",N.onMouseWheel,xGlobal.passiveSupported?{passive:!0}:!1);E.addEventListener("contextmenu",N.onContextMenu);
E.addEventListener("dblclick",N.onDblClick);E.addEventListener("touchstart",N.onTouchStart,xGlobal.passiveSupported?{passive:!0}:!1);E.addEventListener("touchmove",N.onTouchMove,xGlobal.passiveSupported?{passive:!0}:!1);E.addEventListener("touchleave",N.onTouchLeave);E.addEventListener("touchend",N.onTouchLeave);aa&&aa[0]&&aa[0].callback_object&&aa[0].callback_object.callback_query&&aa[0].callback_object.callback_query(N,N.setTable)};function xListMobileHeader(a,b,c,g){var k=this,q,f,p=0,v=0,A,r,u=a.document.createElement("div"),z=a.document.createElement("canvas");u.style="position:absolute;margin:0px;padding:0px;";z.style="position:absolute;margin:0px;padding:0px;";c.appendChild(u);u.appendChild(z);u.addEventListener("touchstart",H,!1);u.addEventListener("touchmove",C,!1);var H=function(J){A=J.targetTouches[0].pageX},C=function(J){var G=J.targetTouches[0].pageX-A;0!=G&&g.setOffsetX(-G);A=J.targetTouches[0].pageX;return!1},U=
0;this.destroy=function(){z.width=1;z.height=1;u.removeChild(z);c.removeChild(u)};this.setPosition=function(J,G,B,L){u.style.left=J+"px";u.style.top=G+"px";u.style.width=B+"px";u.style.height=L+"px";Math.floor(z.parentElement.offsetHeight*getPixelRatio(r))!=z.height&&(z.height=z.parentElement.offsetHeight*getPixelRatio(r))};this.setOption=function(J){q=J};this.setHeader=function(J){f=J};this.setOffsetX=function(J){U=J};this.getContext=function(){null==r&&(r=z.getContext("2d"));return r};this.draw=
function(J){if(1==q.header.show&&null!=z&&null!=z.parentElement){var G=z.parentElement.offsetWidth,B=z.parentElement.offsetHeight;if(null!=z&&0!=G&&0!=B&&(1==J||p!=G||v!=B)&&(p!=G&&(isCalcRowsHeight=!0),p=G,v=B,null==r&&(r=z.getContext("2d")),pixelRatio=getPixelRatio(r),z.width=G*pixelRatio,z.height=B*pixelRatio,z.style.left=0,z.style.top=0,z.style.width=G+"px",z.style.height=B+"px",1<pixelRatio&&r.setTransform(pixelRatio,0,0,pixelRatio,0,0),r.translate(.5,.5),r.lineWidth=1,x=0-U,r.beginPath(),r.fillStyle=
q.header.backgroundColor,r.strokeStyle="",r.fillRect(-.5,-.5,G+1,B+1),r.restore(),J=0,1==q.frozenColumn&&0<q.frozenColumns&&(J=q.frozenColumns),f&&0<f.length)){r.fillStyle=q.header.color;r.strokeStyle=q.header.splitColor;r.textBaseline="middle";r.textAlign="center";r.font=getFontSizeWithFont(q.header.fontSize,q.header.fontFamily);var L=r.font;q.header&&q.header.fontBold&&(r.font="bold "+L);for(var ba=null,N=null,E=null,V=B/2+1,F=J;F<f.length;F++){x=f[F].x-U;if(x>=G)break;L=x;var M=f[F].width;null==
M&&(M=G);q.header.paddingLeft&&(L+=parseInt(q.header.paddingLeft),M-=parseInt(q.header.paddingLeft));q.header.paddingRight&&(M-=parseInt(q.header.paddingRight));if(null!=f[F].plugs&&null!=f[F].plugs.type){var X=.3*q.header.height;8>X&&(X=8);var aa={left:x+f[F].width-1.3*X-2,top:(B-X)/2,width:X,height:X};f[F].plugs.rect=aa;if(f[F].plugs.colors){X=f[F].plugs.colors[0];var ia=f[F].plugs.colors[1];var fa=f[F].plugs.colors[2];var T=f[F].plugs.colors[3]}else X=q.plugsColors[0],ia=q.plugsColors[1],fa=q.plugsColors[2],
T=q.plugsColors[3];f[F].plugs.status&&(roundRect(r,x,0,f[F].width,B,0,!1,!0,null,T),roundRect(r,x,0,f[F].width,B,0,!1,!1,fa,null));null!=f[F].plugs.condition&&1==f[F].plugs.condition?drawScreenPlus(r,aa,!0,X,ia):drawScreenPlus(r,aa,f[F].plugs.status,X,ia);k.plugs[F]=f[F].plugs}X=.3*q.header.height;if(0==J||x>=f[J-1].x+f[J-1].width-U)r.textAlign=f[F].textAlign?f[F].textAlign:q.header.textAlign?q.header.textAlign:"center",null!=f[F].titleProperty&&null!=xLanguage.langMap[f[F].titleProperty]&&(f[F].title=
xLanguage.langMap[f[F].titleProperty]),aa=0,null!=f[F].order&&0!=f[F].order&&(J?x+f[F].width-X-4>f[J-1].x+f[J-1].width&&(ba=f[F].order,N=x,E=f[F].width,aa+=16):(ba=f[F].order,N=x,E=f[F].width,aa+=16)),ia=X=0,f[F].marginLeft&&(X=f[F].marginLeft),f[F].marginRight&&(ia=f[F].marginRight),"{{ check }}"==f[F].field?visibleItemSelectAll?drawCheckBox(r,{left:f[F].x+f[F].width/4,top:V/2,width:.5*f[F].width,height:.5*f[F].height},!0,1,q.header.color,"transparent",q.header.color):drawCheckBox(r,{left:f[F].x+
f[F].width/4,top:V/2,width:.5*f[F].width,height:.5*f[F].height},!1,1,q.header.color,"transparent",q.header.color):(T=f[F].title,f[F].format&&(T=getValueFormatString(T,f[F].valueType,f[F].format,null)),"right"==f[F].textAlign?r.fillText(T,L+M-aa-ia,V,M-2-aa):"left"==f[F].textAlign?r.fillText(T,L+X,V,M-2):r.fillText(T,L+M/2,V,M-2));if(!f[F].plugs||f[F].plugs&&!f[F].plugs.status)if(0==J||x>f[J-1].x)r.beginPath(),r.moveTo(x+f[F].width,0),r.lineTo(x+f[F].width,0+B-0),r.stroke(),r.closePath()}if(0<J){r.beginPath();
r.fillStyle=q.header.backgroundColor;f[J]&&r.fillRect(0,0,f[J].x,B);r.fillStyle=q.header.color;for(F=0;F<J;F++){if(f[F]){if(x=f[F].x,x>=G)break}else break;L=x;M=f[F].width;q.header.paddingLeft&&(L+=parseInt(q.header.paddingLeft),M-=parseInt(q.header.paddingLeft));q.header.paddingRight&&(M-=parseInt(q.header.paddingRight));r.textAlign=f[F].textAlign?f[F].textAlign:q.header.textAlign?q.header.textAlign:"center";X=aa=0;f[F].marginLeft&&(aa=f[F].marginLeft);f[F].marginRight&&(X=f[F].marginRight);null!=
f[F].titleProperty&&null!=xLanguage.langMap[f[F].titleProperty]&&(f[F].title=xLanguage.langMap[f[F].titleProperty]);ia=r.font;q.header&&q.header.fontBold&&(r.font="bold "+ia);"right"==r.textAlign?r.fillText(f[F].title,L+M-X,V,M-2):"left"==r.textAlign?r.fillText(f[F].title,L+aa,V,M-2):r.fillText(f[F].title,L+M/2,V,M-2);r.moveTo(x+f[F].width,3);r.lineTo(x+f[F].width,0+q.header.height-3);null!=f[F].order&&0!=f[F].order&&(ba=f[F].order,N=f[F].x,E=f[F].width);r.font=ia}r.stroke();r.closePath()}q.header.borderColor&&
(r.beginPath(),r.strokeStyle=q.header.borderColor,r.moveTo(0,1),r.lineTo(0+G-1,1),r.lineTo(0+G-1,0+B-1),r.lineTo(0,0+B-1),r.lineTo(0,1),r.stroke(),r.closePath());null!=N&&(r.globalAlpha=1,X=.3*q.header.height,8>X&&(X=8),aa={left:N+E-X-4,top:(B-.8*X)/2,width:.8*X,height:.8*X},q.orderByType==ba&&"desc"==ba?drawTriangleDown(r,aa,q.header.color,q.header.color):q.orderByType==ba&&"asc"==ba&&drawTriangleUp(r,aa,q.header.color,q.header.color))}}}}
function xListMobileRow(a,b,c,g){var k,q,f=0,p=0,v=!1,A,r=a.document.createElement("div"),u=a.document.createElement("canvas");r.style="position:absolute;margin:0px;padding:0px;z-index:0";u.style="position:absolute;margin:0px;padding:0px;";c.appendChild(r);r.appendChild(u);var z,H=0;r.addEventListener("onselectstart",function(C){return!1});this.destroy=function(){u.width=1;u.height=1;r.removeChild(u);c.removeChild(r)};this.setPosition=function(C,U,J,G){r.style.left=C+"px";r.style.top=U+"px";r.style.width=
"100%";r.style.height=G+"px"};this.setOption=function(C){k=C};this.getCanvas=function(){return u};this.setHeader=function(C){q=C};this.setRowIndex=function(C,U){z=C};this.setOffsetX=function(C){H=C};this.draw=function(C){if(null!=u&&null!=u.parentElement){var U=u.parentElement.offsetWidth,J=u.parentElement.offsetHeight;if(null!=u&&0!=U&&(1==C||1!=v||f!=U||p!=J)){f!=U&&(isCalcRowsHeight=!0);f=U;p=J;null==A&&(A=u.getContext("2d"));pixelRatio=getPixelRatio(A);u.width=U*pixelRatio;u.height=J*pixelRatio;
u.style.left=0;u.style.top=0;u.style.width=U+"px";u.style.height=J+"px";1<pixelRatio&&A.setTransform(pixelRatio,0,0,pixelRatio,0,0);A.translate(.5,.5);A.lineWidth=1;viewWidth=U;A.beginPath();A.strokeStyle="";A.fillStyle=null!=q.cursorIndex&&q.cursorIndex==z?k.cursorColor:1==z%2&&1==k.showCrossBackground?k.crossBackgroundColor:k.backgroundColor;1==k.showRowSplitLine?A.fillRect(-.5,-.5,0+U+1,0+J):A.fillRect(-.5,-1,0+U+1,0+J+1);A.closePath();C=0;1==k.frozenColumn&&0<k.frozenColumns&&(C=k.frozenColumns);
A.save();A.font="14px "+xGlobal.systemFont;if(q){A.beginPath();A.textBaseline="top";var G=z-q.begin;if(0<=G)for(var B=0;2>B&&0<q.length;B++){var L=C,ba=q.length;1==B&&(L=0,ba=C,1==z%2&&1==k.showCrossBackground?(A.fillStyle=k.frozenColumnCrossBackgroundColor,A.fillRect(0,0,q[C].x,J)):(q[C]&&(A.strokeStyle=k.frozenSplitLineColor,A.beginPath(),A.moveTo(q[C].x+1,-1),A.lineTo(q[C].x+1,J+1),A.stroke()),A.fillStyle=q.cursorIndex==z?k.cursorColor:k.frozenColumnBackgroundColor,q[C]&&A.fillRect(-.5,-1,q[C].x+
.5,J+1)),A.fillStyle=k.cell.color);for(;L<ba&&q[L];L++){var N=q[L].x+0+0;L>=C&&(N-=H);var E=q[L].width;null==q[L].width&&(E=viewWidth);if(1==B||N+E>q[C].x){if(null!=q[L].graph&&"progress"==q[L].graph.type&&(E=getDataFromFieldName(q[L].graph.index,G),void 0!=E)){A.beginPath();var V=E.value;0<E.value?A.fillStyle=k.cell.colors[1]:(A.fillStyle=k.cell.colors[2],V*=-1);A.globalAlpha=q[L].graph.alpha?q[L].graph.alpha:.5;null!=q[L].graph.value.factor&&(V*=q[L].graph.value.factor);V=q[L].width*V/100;V>q[L].width&&
(V=q[L].width);A.fillRect(N,0,V,J);A.fill();A.closePath();A.globalAlpha=1}E=q[L].width;q[L].objects&&q[L].objects[G]?(E={left:N,top:0,width:E,height:J},q[L].objects[G].setCellsPosition(E),q[L].objects[G].draw(A,k.cell,N,0,E),v=!0):v=!1}}if(0==C)break}1==k.showRowSplitLine&&(A.beginPath(),A.setLineDash(k.rowSplitLineDash),A.strokeStyle=k.rowSplitLineColor,A.lineWidth=k.rowSplitLineHeight,A.moveTo(0,0+J-1),A.lineTo(0+U,0+J-1),A.stroke(),A.closePath());if(1==k.showColSplitLine){A.beginPath();A.setLineDash(k.colSplitLineDash);
A.strokeStyle=k.colSplitLineColor;for(L=0;L<q.length;L++){N=q[L].x+q[L].width+0;L>=C&&(N-=H);if(N>=U)break;L>=C&&N<q[C].x||(A.moveTo(N,0),A.lineTo(N,0+J))}A.stroke();A.closePath()}}A.restore()}}}}
function xListMobile(a,b,c,g,k,q,f,p,v,A){function r(va){var Qa=va.offsetLeft;null!=va.offsetParent&&(Qa+=r(va.offsetParent));return Qa}function u(va){var Qa=va.offsetTop;null!=va.offsetParent&&(Qa+=u(va.offsetParent));return Qa}function z(va){var Qa=localStorage.getItem("G_localHttp");null!=va&&va.http&&(va.http.startsWith("http://")||va.http.startsWith("https://"))||(va.query.server=Qa+va.http)}function H(va){if(ca){var Qa=va;1==Ra.orderReverse&&0>Ra.initCursorPos&&(Qa=ca.length-1-va);if(ca[Qa])return{y:-Aa+
ca[Qa][1]+za.top,height:ca[Qa][0]}}else return{y:va*Ra.rowHeight-Gb,height:Ra.rowHeight}}function C(va,Qa){Qa=void 0===Qa?!0:Qa;ob();var Ua=G.callInfo?G.callInfo[va]:void 0;if(void 0!=Ua)for(var Sa=0;Sa<Ua.length;Sa++)if("page"==Ua[Sa].id)if("setActivePageWithBounds"==Ua[Sa].action.substr(0,23)){var db=Ua[Sa].action.split("'");if(null==db)return;G.page.setActivePageWithBounds(va,db[1],["code"],getBoundValues(fb,aa,Y,pa.index,wb()))}else{db=Ua[Sa].action.indexOf("(");var vb=Ua[Sa].action.indexOf(")");
vb=eval(Ua[Sa].action.slice(db+1,vb));db=Ua[Sa].action.slice(0,db);if(null!=G.funcNameMap.thisPage[db])G.funcNameMap.thisPage[db](vb)}else if(null!=Ua[Sa].id){if(db=globalPage.getActivePage())if(db=db.getObjectByElementId(Ua[Sa].id))if(Ua[Sa].param){if(G.page.getObjectByElementId(Ua[Sa].id)){db="obj."+Ua[Sa].action+"("+Ua[Sa].param+")";try{eval(db)}catch(Ha){console.log(Ha)}}}else"doOpenNewsDetails"!=va&&("setVariablesValue"==va?K&&db.setVariablesValue(K.field,K.data[pa.index-Wa]):"setExternalTable"==
va?K&&db.setVariablesValue(K):"setVariablesValue"==Ua[Sa].function&&K&&db.setVariablesValue(K.field,K.data[pa.index-Wa]))}else Ua[Sa].callback?(db={target:G,data:U(pa.index),row:pa.index,col:oa.col,colObject:Ma[oa.col]},Ua[Sa].callback(db)):Ua[Sa].action&&(getBoundValues(fb,aa,Y,pa.index,wb()),G.doAction(Ua[Sa].action));else if(G.callInfo)for(Ua=0;Ua<G.callInfo.length;Ua++)for(Sa in G.callInfo[Ua])switch(db=G.callInfo[Ua][Sa][0],Sa){case "doClickOnRow":if(null!=db.field&&null!=db.callback)for(vb=
0;vb<Ma.length;vb++)if(Ma[vb].objects){var ub=Ma[vb].objects[pa.index].getCells(),R={};if(ub){for(var ka=0;ka<ub.length;ka++)ub[ka].field&&ub[ka].object.value&&(R[ub[ka].field]=ub[ka].object.value);for(ka=0;ka<ub.length;ka++){var qa=ub[ka].object.rect;qa&&clickEvent.offsetX>=qa.x&&clickEvent.offsetX<=qa.x+qa.width&&clickEvent.offsetY>=qa.y-qa.height&&clickEvent.offsetY<=qa.y+qa.height&&ub[ka].field==db.field&&db.callback(R,G,ub)}}}}Qa&&(0==Ra.enterConfirmation||1==Ra.enterConfirmation&&"doEnter"==
va)&&G.synchPageBoundValue(va,0,va)}function U(va){if(null==va)return null;for(var Qa={},Ua=0;Ua<Ma.length;Ua++)if(Ma[Ua].objects){var Sa=Ma[Ua].objects[va].getCells();if(Sa)for(var db=0;db<Sa.length;db++)Sa[db].field&&Sa[db].object.value&&(Qa[Sa[db].field]=Sa[db].object.value)}return Qa}function J(va){if(null!=K&&null!=K.data)if("row"==K.info.rank){if(K.data[pa.index-da]||null!=Ab&&K.data&&K.data[Ab])pa.preIndex=pa.index,C("doSelectChanged")}else"col"==K.info.rank&&(K.data[0]&&K.data[0][pa.index-
da]||null!=Ab&&K.data[0]&&K.data[0][Ab])&&(pa.preIndex=pa.index,C("doSelectChanged"))}var G=this;this.page=b;var B=c,L,ba=[],N,E=0,V=null;this.enableActive=!0;var F=xDeepCopy(g),M=xDeepCopy(k);xDeepCopy(q);var X=!1,aa=xDeepCopy(f);null==aa&&(aa={});aa.totalPages=0;aa.pageNo=0;aa.totalRows=0;if(A)for(var ia in aa)for(var fa in A)if(ia==fa){aa[ia]=A[fa];break}this.callInfo=p;if(this.callbacks=v)this.queryIndex=this.callbacks.getQueryIndex(this);var T=[],Y,O,K,Z=!0,pa={index:0,preIndex:-1,locateValue:null,
rect:{left:0,top:0,width:0,height:0}},oa={data:void 0,multiSelected:[],beginSelectedIndex:0,lastCursorIndex:null,col:null},Aa=0,ta=0,Q,sa,ra,la,Na=!1,Wa=0,na=0,ha=0,ea=!1,ja=!1,da,Oa,Pa=0,hb=!0,Ma,rb,zb=[],Jb="",Cb,Db,cb,Ab,Gb=0,Ra={marginLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginBackgroundColor:"",active:{type:""},header:{show:!0,height:36,backgroundColor:"#ddd",color:"#222",fontFamily:xGlobal.systemFont,splitColor:"#cacaca",splitLineHeight:36,borderColor:"#cacaca",textAlign:"center",
paddingLeft:"3px",paddingRight:"3px",fontSize:16,shadowColor:"#000000",fullWidth:!1,fontBold:!1,full:!1,group:""},rotate:{rotate:!1,field:"code",name:"\u62a5\u4ef7\u9879\u76ee",nameWidth:120,titleCell:{},dataWidth:90,dataCell:{}},title:{show:!1,height:36,backgroundColor:"#ddd",color:"#222",position:"top",font:"14px DINPro-Medium,DINPro",text:" {{ result information }} \uff01",splitColor:"",textAlign:"left",paddingLeft:"3px",paddingRight:"3px"},cell:{backgroundColor:"#fefefe",borderColor:"#bbb",color:"#111",
colors:["#333","#f33","#090","#000"],fontFamily:xGlobal.systemFont,fontSize:13,fontBold:!1,top:0,left:0,paddingLeft:3,paddingRight:3,default:null},onlyOnePage:!1,paging:!1,localPaging:!1,isFocus:!1,rowHeight:26,rowHeightField:"",rowLineHeight:18,wheelOnFocus:!1,cursorOnWheel:!1,queryResetX:!0,initOffsetX:0,showCrossBackground:!0,showContentHeight:!1,backgroundColor:"#fefefe",crossBackgroundColor:"#eee",frozenColumnBackgroundColor:"#f0f0f0",frozenColumnCrossBackgroundColor:"#e0e0e0",showRowSplitLine:!0,
rowSplitLineDash:[0],rowSplitLineColor:"#E9EAEC",rowSplitLineHeight:1,showColSplitLine:!0,colSplitLineDash:[0],colSplitLineColor:"#ddd",frozenColumn:!1,frozenColumns:0,showFrozenSplitLine:!1,frozenSplitLineDash:[0],frozenSplitLineColor:"#aaa",scrollerFrozenSplitLineColor:"#dbdbdb",borderColor:"#transparent",cursorColor:"#ccc",selectedColor:"#aaa",frozenColumnSelectedColor:"#999",overBackgroundColor:"",focusSelectCursorColor:{type:"",width:3,backgroundColor:"#b40"},toolbarSplitLineColor:"",expandColor:"#888",
alwaysShowSelected:!1,selectedIsCursor:!0,enableMultiSelected:!1,showMultiSelectedBackground:!0,initCursorPos:"",enableTouchOrder:!0,enableOrderBy:!1,orderBy:"",orderByType:"",orderByLocal:!1,orderBy3S:!1,orderByDont:[""],orderReverse:!1,adjustDataOrder:{enable:!1,model:"timely",field:"",backgroundColor:"rgb(128,0,0,0.6)",callback_adjustOrder:null},scroller:{scrollerV:"show",scrollerH:"show",model:"apple",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"},listBoxShadow:{show:!1,hShadow:0,
vShadow:0,blur:0,spread:0,color:"#333"},toolBarPos:"top",popupMenu:"",popupMenuPrepareAction:"",slidingShadow:!0,dynamicSynchBound:{onceOnCursor:"",alwaysOnCursor:"",setExtenalTableTo:[{target:"",tableName:"",keyName:""}]},showGrid:{top:!0,bottom:!0,left:!0,right:!0},branchSend:!0,autoCursor:!1,enterConfirmation:!1,dragX:!1,dragDropCallback:!1,hasCheckBox:!1,checkboxColumnNo:0,firstRowHeight:0,moveCallback:"",plugsColors:["#000000","#666666","transparent","#DBE3E1"],callback_onKeydown:null,callback_enter:null,
callback_queryBefore:null,treeModel:"normal",treeItemBackground:""},Sb=!1,Ub,Ob=[],Fb,Ya,fb,$a=0,za={left:0,top:0,right:0,bottom:0},Ka=0,ab=0,W=1,Ca=!1,ca,ya=!0,bb=null,ib=0;1==Ra.paging&&(null==aa&&(aa={}),aa.pageNo=0);this.getPage=function(){return this.page};this.getOption=function(){return Ra};this.getQueryInfo=function(){return F};this.getVariables=function(){return aa};this.getParentDiv=function(){return B};this.getObjectClassName=function(){return"xListMobile"};this.getObjectId=function(){return B.id};
this.getContext=function(){if(L)return L.getContext()};this.setQueryInfo=function(va){F=xDeepCopy(va);G.query();1==hb&&(Ma=null,Na=!1)};var gb,Bb,Hb;this.setGid=function(va,Qa,Ua){gb=va;Bb=Qa;Hb=Ua};this.setOffsetY=function(va){Aa+=va;G.draw()};this.getOffsetY=function(){return Aa};this.touchMove=function(va){this.setOffsetX(va)};this.moveToBottom=function(){Ra.rowHeight&&Pa&&Q&&(Aa=Ra.rowHeight*Pa-Q,G.draw())};this.setOffsetX=function(va){ta+=va;0>ta&&(ta=0);ta>la-sa&&(ta=la-sa);la<sa&&(ta=0);for(va=
0;va<ba.length;va++)ba[va]&&(ba[va].setOffsetX(ta),ba[va].draw(!0));L&&(L.setOffsetX(ta),L.draw(!0))};this.getOffsetX=function(){return ta};var nb=function(va,Qa){if(ca){for(va=0;va<ca.length;va++)if(Qa>ca[va][1]&&Qa<ca[va][1]+ca[va][0])return 1==Ra.orderReverse&&0>Ra.initCursorPos&&(va=K.info.totalRows-K.info.dataBegin-1-va),va;return null}return Math.floor(Qa/Ra.rowHeight)},Pb=function(){if(ba&&ba[Ma.cursorIndex]){var va=Ma.cursorIndex;Ma.cursorIndex=null;ba[va].draw(!0)}},bc=function(va){E=va.targetTouches[0].pageX-
r(Lb);bb=va.targetTouches[0].pageY;var Qa=Lb;for(var Ua=0;Qa&&Qa!=document.body.parentElement;)Ua+=Qa.scrollTop,Qa=Qa.parentElement;Qa=Ua;Qa=va.targetTouches[0].pageY-u(Lb)+Qa;va=va.targetTouches[0].pageX;Pb();Ma.cursorIndex=nb(va,Qa);ba&&ba[Ma.cursorIndex]&&ba[Ma.cursorIndex].draw(!0)},Tb=function(va){Ra.touch&&null!=Ma.cursorIndex&&!va.targetTouches[0]&&bb==va.changedTouches[0].pageY&&E==va.changedTouches[0].pageX-r(Lb)&&Xb(Ra.touch.enter);va.targetTouches[0]||bb!=va.changedTouches[0].pageY||E!=
va.changedTouches[0].pageX-r(Lb)||Xb();Pb()},Xb=function(va){if(null!=Ma.cursorIndex){if(boundValue=getBoundValues(fb,aa,Y,Ma.cursorIndex,wb()))for(var Qa in aa)for(var Ua=0;Ua<boundValue.length;Ua++)if(Qa==boundValue[Ua].bound.id){aa[Qa]=boundValue[Ua].value;break}setCallback_VariablesValue(fb,aa,wb());if(va&&"openSubPage"==va.behaviour){Qa=wb();var Sa;va.pageSet?Sa=G.page.pushSubPage(va.pageSet,Qa):va.callback_pageSet&&(Sa=G.page.pushSubPage(va.callback_pageSet(Qa),Qa));Sa.synchBoundValue("pushSubPage",
0,boundValue,G)}Ra.callback_enter&&null!=Ma.cursorIndex&&Ra.callback_enter(wb())}},ma=function(va){var Qa=va.targetTouches[0].pageX-r(Lb)-E;0!=Qa&&G.setOffsetX(-Qa);E=va.targetTouches[0].pageX-r(Lb);Z=!1;Ra.callback_onTouchMove&&Ra.callback_onTouchMove(-Qa,va)},fc=function(va){Ra.popupMenu&&(null==cb&&(cb=new xSaftButton),cb.popupRMenu(va.clientX,va.clientY,Ra.popupMenu,G));va.preventDefault();Pb();return!1},wa=function(va){Ra.callback_onScroll&&Ra.callback_onScroll(va);G.draw()};this.scrollTo=function(va){Lb.scrollTop=
va;G.draw(!0)};this.destroy=function(){L&&(L.destroy(),L=null);if(ba){for(var va=0;va<ba.length;va++)ba[va]&&(ba[va].destroy(),delete ba[va]);ba=null}Lb.removeEventListener("contextmenu",fc);Lb.removeEventListener("touchstart",bc);Lb.removeEventListener("touchend",Tb);Lb.removeEventListener("touchmove",ma);Lb.removeEventListener("scroll",wa);Vb.removeChild(Lb);B.removeChild(Vb);G.callbacks.sendCancelQuery(G.queryIndex);B=null};this.show=function(){if(1!=V){null!=V&&G.callbacks&&G.callbacks.sendRestartQuery(G.queryIndex);
V=!0;for(var va=0;6>va;va++);G.draw()}};this.hidden=function(va){if(0!=V){V=!1;1!=va&&G.callbacks.sendPauseQuery(G.queryIndex);for(va=0;6>va;va++);$a=0}};this.isShow=function(){return V};this.clearQueryData=function(){var va=F;-1!=va.indexOf("{{")&&(va=replaceVariablesValue(va,aa,Y));for(var Qa=0;Qa<va.length;Qa++)va[Qa]&&va[Qa].query&&(va[Qa].query.script=null);K=Y=null;clearFlag=!0;pa.preIndex=null;Aa=pa.index=0};this.initOffSet=function(){Aa=ta=0;G.draw()};var Ea=function(va,Qa){if(""==va||0<=
va.indexOf("{{ "))if(Qa.callback_errorCondition){if(va=Qa.callback_errorCondition(Qa,va,wb()),typeof va!=va==null)return!1}else if(1==Qa.filterNull){var Ua=va.split("and");va=[];Qa="";for(var Sa=0;Sa<Ua.length;Sa++)-1==Ua[Sa].indexOf("{{")&&va.push(Ua[Sa]);for(Ua=0;Ua<va.length;Ua++)Qa=0==Ua||Ua==Qa.length-1?Qa+va[Ua]:Qa+("and "+va[Ua]);va=Qa}else return;return va},Va=function(va,Qa){var Ua=null;if("none"==va.limit&&Ra.enableOrderBy&&Ra.orderByLocal)Ua=null;else{if(1==Z&&""!=Ra.initCursorPos)Ua=va.limit?
va.limit:[Ra.initCursorPos,ha];else if(void 0!=Wa)if(1==Ra.paging){if(null==va.query||va.query.script!=Qa)Wa=Gb=Aa=ta=0;Ua=[Wa+1,ha]}else if(0>Ra.initCursorPos&&1==Ra.orderReverse)if(va=K.info.begin-ha,Qa=ha+1,Ua=Wa+ha+1,K.info.begin>Pa-Ua)Qa>Pa-Ua&&(va=1,Qa=Pa),Ua=[va,Qa];else return;else{if(null==va.query||va.query.script!=Qa)1==Sb?Sb=!1:(1==Ra.queryResetX&&(ta=0),Wa=Gb=Aa=0);Ua=[Wa+1,ha+1];va.limit&&va.limit.init&&(Ua=[va.limit.begin,va.limit.items],Aa=Ua[0]*Ra.rowLineHeight,Wa=va.limit.begin)}xGlobal.isMobile&&
(Ua[0]=1>Ua[0]-ha/2?1:Ua[0]-ha/2,Ua[1]+=ha)}return Ua};this.query=function(va){var Qa=F;-1!=Qa.indexOf("{{")&&(Qa=replaceVariablesValue(Qa,aa,Y));if(!(null==Qa||Qa[0]&&Qa[0].callback_object||!G.callbacks&&!gb)){xb();W++;if(1!=va){if(0==V||0==ha)return;G.page&&G.page.setPageBoundStatusForObject(G);if(null==B||0==B.offsetHeight||0==B.offsetWidth)return}va=!1;if(null==Wa||1==ja)ja=!1,va=!0;for(var Ua={},Sa=0;Sa<Qa.length;Ua={$jscomp$loop$prop$_time$537:Ua.$jscomp$loop$prop$_time$537},Sa++)if(null==Qa[Sa]||
Qa[Sa].queryStatus)Qa[Sa]&&1==Qa[Sa].queryStatus&&(Qa[Sa].queryStatus=2);else{var db=null,vb=null,ub=null;Qa[Sa].server&&""!=Qa[Sa].server&&(db=Qa[Sa].server.slice(10),aa&&aa[db]&&""!=aa[db]&&(ub=aa[db]));var R=null;Qa[Sa].http&&(R=replaceVariablesValue(Qa[Sa].http,aa,Y));if(Qa[Sa].sql&&(null==R||"http"!=R.substr(0,4).toLowerCase())){db=null;Qa[Sa].limit&&Qa[Sa].limit.mode&&"window"==Qa[Sa].limit.mode&&void 0!=Wa&&(db=[Wa,na+Wa+2]);db=replaceVariablesValue(Qa[Sa].sql,aa,Y,null,db);T[Sa]=parseTableName(db);
if(0==Sa||1==Qa[Sa].mainOrder){if(1==Ra.enableOrderBy&&""!=Ra.orderBy&&0==Ra.orderByLocal&&Ma)for(vb=0;vb<Ma.length;vb++){R=null!=Ma[vb].cells[0].orderByAlias?Ma[vb].cells[0].orderByAlias:Ma[vb].cells[0].field;if(Ma[vb].cells&&Ra.orderBy.toLowerCase()==R.toLowerCase()){Ra.orderByType&&(db+=" order by "+Ra.orderBy+" "+Ra.orderByType);Ma[vb].order=Ra.orderByType;for(vb++;vb<Ma.length;vb++)Ma[vb].order=0;break}Ma[vb].order=0}if(0<zb.length){db+=" expand(";vb="";for(R=0;R<zb.length;R++)zb[R]&&(vb+=zb[R]+
",");db+=vb.slice(0,-1)+")"}db=Ea(db,Qa[Sa]);if(null==db)continue;vb=Va(Qa[Sa],db)}else{db=Ea(db,Qa[Sa]);if(null==db)continue;vb=Qa[Sa].limit&&"synch"==Qa[Sa].limit.mode?Va(Qa[Sa],db):null}if(!(null==db||""==db||0<=db.indexOf("{{ "))){if(null==Qa[Sa].query||Qa[Sa].query.script!=db)va=isSynBound=!0,Qa[Sa].queryStatus=1,1==hb&&(Ma=null,Na=!1);if(null==Qa[Sa].query||Qa[Sa].query.limit&&vb&&(Qa[Sa].query.limit[0]!=vb[0]||Qa[Sa].query.limit[1]!=vb[1]))va=!0,Qa[Sa].queryStatus=1;1==Qa[Sa].queryStatus&&
(Qa[Sa].query={script:db,limit:vb,server:ub})}}else if(Qa[Sa].http&&R&&""!=R){Qa[Sa].field&&replaceVariablesValue(Qa[Sa].field,aa,Y);var ka=Qa[Sa].script?replaceVariablesValue(Qa[Sa].script,aa,Y):replaceVariablesValue(Qa[Sa].condition,aa,Y);ub=Ea(ka,Qa[Sa]);if(null!=ub){ka=ub;ub=ha;1==Ra.paging?(ub=na,null==aa.pageNo&&(null==aa&&(aa={}),aa.pageNo=0)):(aa.pageNo=Math.trunc(Wa/ub),K&&Y[Sa]&&Y[Sa].table&&Y[Sa].table.info&&Wa+ub>K.info.begin+K.info.rows&&Wa+ub<=Y[Sa].table.info.totalRows&&Wa>=Y[Sa].table.info.begin&&
aa.pageNo++);if(Y&&Y[Sa]&&Y[Sa].table&&Y[Sa].table.info&&1!=Ra.paging)if(Wa>=Y[Sa].table.info.begin&&Wa+ub<=Y[Sa].table.info.begin+Y[Sa].table.info.rows){if(Jb==ka)if(0==ea)continue;else ea=!1}else if(Y[Sa].table.info.dataLength&&Wa+ub<=Y[Sa].table.info.begin+Y[Sa].table.info.dataLength&&Wa>=Y[Sa].table.info.begin&&Y[Sa].table.info.dataRows-Y[Sa].table.info.begin==Y[Sa].table.info.dataLength&&Jb==ka&&0==ea)continue;Qa[Sa].query&&Qa[Sa].query.condition!=ka&&1==Ra.autoCursor&&(Aa=0,1==Ra.queryResetX&&
(ta=0),pa.preIndex=null,pa.index=0,aa.pageNo=0);db=void 0;1==Z&&""!=Ra.initCursorPos?0>Ra.initCursorPos?db=[-1,ub]:aa.pageNo&&(db=[aa.pageNo,ub]):void 0!=Wa&&(db=[aa.pageNo,ub]);null!=Qa[Sa].limit?Qa[Sa].limit.mode&&"main"==Qa[Sa].limit.mode?vb=db:null!=Qa[Sa].limit.begin&&null!=Qa[Sa].limit.items&&(vb=[Qa[Sa].limit.begin,Qa[Sa].limit.items]):vb=0==Sa?db:[];if(!(null==ka||""==ka||0<=ka.indexOf("{{ "))&&(db=";"+ka,null!=Wa&&(null==Qa[Sa].query||Y&&Y[Sa]&&Y[Sa].table&&Wa<Y[Sa].table.info.begin||db!=
Qa[Sa].query.script||Qa[Sa].query.limit&&vb&&(Qa[Sa].query.limit[0]!=vb[0]||Qa[Sa].query.limit[1]!=vb[1])))){1==hb&&(Ma=null,Na=!1);if(null==Qa[Sa].query||db!=Qa[Sa].query.script)0<Sa&&Qa[0].http||Ka++;Qa[Sa].queryStatus=1;Qa[Sa].query={script:db,limit:vb,field:"",condition:ka,id:Ka,server:R};"undefined"!=typeof GLink_client?(Ua.$jscomp$loop$prop$_time$537=void 0,ub="",(ub=localStorage.getItem("G_localHttp"))?(z(Qa[Sa]),G.callbacks.sendHttpQuery(G.queryIndex,Qa,Sa,G.setTable),clearInterval(Ua.$jscomp$loop$prop$_time$537)):
Ua.$jscomp$loop$prop$_time$537=setInterval(function(qa){return function(){localStorage.getItem("G_localHttp")&&(z(Qa[Sa]),G.callbacks.sendHttpQuery(G.queryIndex,Qa,Sa,G.setTable),clearInterval(qa.$jscomp$loop$prop$_time$537))}}(Ua),1)):GLink_client.sharedInstance().postHttpMessage("query",gb,Bb,Hb,F,Sa,G.setTable);Jb=ka}}}}va&&(G.callbacks?G.callbacks.sendQuery(G.queryIndex,Qa,G.setTable):GLink_client.sharedInstance().sendMessage("query",gb,Bb,Hb,F,G.setTable),Jb=ka);W=0}};this.submitData=function(va,
Qa,Ua){G.sendSubmit([va],Qa,Ua)};this.submit=function(va){"String"==va.constructor.name&&(va=[{submit:va,callback:null}]);for(var Qa={},Ua=0;Ua<va.length;Qa={$jscomp$loop$prop$state$539:Qa.$jscomp$loop$prop$state$539},Ua++){var Sa=getSubmissionContents(M,va[Ua].submit);Qa.$jscomp$loop$prop$state$539=!0;Sa.map(function(vb){return function(ub){if(ub.beforeSubmit){var R=wb();R.query=ub;1!=ub.beforeSubmit(R)&&(vb.$jscomp$loop$prop$state$539=!1)}}}(Qa));if(0==Qa.$jscomp$loop$prop$state$539)break;var db=
null;1==va[Ua].row&&(db=U(pa.index));1==va[Ua].query&&(va[Ua].callback=G.reload);G.sendSubmit(Sa,va[Ua].callback,db)}};this.sendSubmit=function(va,Qa,Ua){for(var Sa=0;Sa<va.length;Sa++)if(null!=va[Sa])if(va[Sa].sql){var db=replaceVariablesValue(va[Sa].sql,aa,Y);var vb;va[Sa].server&&aa&&aa[va[Sa].server.slice(10)]&&(vb=aa[va[Sa].server.slice(10)]);va[Sa].query={script:db,limit:void 0,server:vb};G.callbacks.sendSubmit(G.queryIndex,va,Qa)}else if(va[Sa].http){var ub=replaceVariablesValue(va[Sa].field,
aa,Y,Ua),R=replaceVariablesValue(va[Sa].condition,aa,Y,Ua);db=ub+";"+R;null!=va[Sa].query&&db==va[Sa].query.script||ab++;va[Sa].query={script:db,limit:null,field:ub,condition:R,id:Ka};G.callbacks.sendHttpSubmit(G.queryIndex,va,Sa,Qa)}};this.setSubmitList=function(va){M=xDeepCopy(va)};this.getTableName=function(va){null==va&&(va=0);return T[va]};this.getCursorValue=function(){return K.data[pa.index]};this.setVariablesValue=function(va,Qa,Ua){var Sa=!1;if("Object"==va.constructor.name&&null==Qa)for(var db in va)aa[db]!=
va[db]&&(aa[db]=va[db],Sa=!0);else if(Qa)for(db in aa)for(var vb=0;vb<va.length;vb++)va[vb][0]==db&&aa[db]!=Qa[vb]&&(aa[db]=Qa[vb],Sa=!0);null!=Ua&&(Sa=Ua);1==Sa&&(Z=!0,F&&F[0]&&F[0].callback_object?(Qa=G.onDoCallback(F[0].callback_object),G.setTable(Qa)):G.query())};this.setQuery=function(va){F.sql=[{name:"query",sql:va,prop:null}];G.query();1==hb&&(Ma=null,Na=!1)};this.setIgnoreOverlap=function(va){ea=va};this.getTable=function(){return K};this.synchBoundValue=function(va,Qa,Ua,Sa){if(Sa!=G&&void 0!=
fb&&0<fb.length&&Ua){va=!1;for(Qa=0;Qa<Ua.length;Qa++)if(null!=Ua[Qa]&&null!=Ua[Qa].bound)for(Sa=0;Sa<fb.length;Sa++)if((null==fb[Sa].type||"synch"==fb[Sa].type||"receive"==fb[Sa].type)&&fb[Sa].id==Ua[Qa].bound.id&&fb[Sa].variable==Ua[Qa].bound.variable){if("variables."==Ua[Qa].bound.variable.slice(0,10)){Sa=Ua[Qa].bound.variable.slice(10);try{if(-1!=Sa.indexOf(".")){var db=Sa.split(".");if(2==db.length){var vb=db[0],ub=db[1];"Object"==aa[vb].constructor.name&&aa[vb][ub]!=Ua[Qa].value&&(aa[vb][ub]=
Ua[Qa].value,Ca=va=!0)}}else aa[Sa]!=Ua[Qa].value&&(aa[Sa]&&"Array"==aa[Sa].constructor.name?filterMatch(Ua[Qa].value,aa,Sa,G):aa[Sa]=Ua[Qa].value,Ca=va=!0)}catch(R){console.log(R)}}else if(Ua[Qa].bound.variable)try{eval(Ua[Qa].bound.variable)!=Ua[Qa].value&&(eval(Ua[Qa].bound.variable+"=boundValue[i].value"),va=!0)}catch(R){console.log(R)}break}if(1==va)for(Sa=0;Sa<fb.length;Sa++)if("cursor"==fb[Sa].type){for(db=0;db<Ua.length;db++)if(fb[Sa].id==Ua[db].bound.id){pa.locateValue=Ua[db].value;I(Sa);
break}break}Z=!0;F&&F[0]&&F[0].callback_object?(Ua=G.onDoCallback(F[0].callback_object),G.setTable(Ua)):G.query()}};this.setCursorIndexTo=function(va,Qa){Qa=void 0===Qa?!1:Qa;for(var Ua=0;Ua<fb.length;Ua++)if("cursor"==fb[Ua].type){pa.locateValue=va;Ub=1==Qa||0==I(Ua)?va:null;break}};var I=function(va){if(K&&K.field)for(var Qa=0;Qa<K.field.length;Qa++)if(K.field[Qa][0].toLowerCase()==fb[va].field.toLowerCase()){if("row"==K.info.rank)for(va=0;va<K.data.length;va++){if(K.data[va]&&pa.locateValue==K.data[va][Qa])return pa.index!=
da+va&&(pa.index=da+va,1==Ra.enableMultiSelected&&(oa.multiSelected=[],oa.multiSelected[0]=da+va),va>=Wa+na?(Wa=va-na+1,Aa=Wa*Ra.rowHeight,G.query()):va<Wa||pa.index==K.info.begin&&0<K.info.begin?(Wa=va,Aa=Wa*Ra.rowHeight,G.query()):(va==Wa&&(Aa=Wa*Ra.rowHeight),G.draw(!0))),!0}else if("col"==K.info.rank)for(va=0;va<K.data[Qa].length;va++)if(K.data[Qa][va]&&pa.locateValue==K.data[Qa][va])return pa.index!=da+va&&(pa.index=da+va,1==Ra.enableMultiSelected&&(oa.multiSelected=[],oa.multiSelected[0]=da+
va),va>=na?(Wa=va-na+1,Aa=Wa*Ra.rowHeight,G.query()):va<Wa||pa.index==K.info.begin&&0<K.info.begin?(Wa=va,Aa=Wa*Ra.rowHeight,G.query()):G.draw(!0)),!0;break}return!1};this.setScheme=function(va,Qa){if(Cb!=va||Db!=Qa){if(va.xList){var Ua;(Ua=va.xList[Qa]?va.xList[Qa]:va.xList.normal)&&G.setOption(Ua)}for(Ua=0;6>Ua;Ua++);Cb=va;Db=Qa;0==setControlSchemeWithWidget(va,Ma)?(G.draw(!0),setControlSchemeWithWidget(va,Ma)):G.draw(!0)}};this.setParentDiv=function(va){B=va};this.setOption=function(va){xCopyTo(va,
Ra);va.margin&&(Ra.marginLeft=va.margin,Ra.marginTop=va.margin,Ra.marginRight=va.margin,Ra.marginBottom=va.margin);va.marginLeft&&(Ra.marginLeft=va.marginLeft);va.marginTop&&(Ra.marginTop=va.marginTop);va.marginRight&&(Ra.marginRight=va.marginRight);va.marginBottom&&(Ra.marginBottom=va.marginBottom);va.marks&&(Ra.marks=xDeepCopy(va.marks));va.init&&(Ra.init=xDeepCopy(va.init));va.initOffsetX&&(G.setOffsetX(va.initOffsetX),va.initOffsetX=0);va.rotate&&(va.rotate.dataCell&&(Ra.rotate.dataCell=xDeepCopy(va.rotate.dataCell)),
va.rotate.titleCell&&(Ra.rotate.titleCell=xDeepCopy(va.rotate.titleCell)));Lb.style.overflow=Ra.onlyOnePage?"hidden":"auto";Fa(!0);va.cell&&va.cell.default&&(Ra.cell.default=va.cell.default);va.callback_onKeydown&&(Ra.callback_onKeydown=va.callback_onKeydown);va.callback_enter&&(Ra.callback_enter=va.callback_enter);va.callback_queryBefore&&(Ra.callback_queryBefore=va.callback_queryBefore);va.callback_onTouchMove&&(Ra.callback_onTouchMove=va.callback_onTouchMove);va.callback_onScroll&&(Ra.callback_onScroll=
va.callback_onScroll);va.touch&&(Ra.touch=va.touch);1==Ra.listBoxShadow.show&&G.initListBoxShadow();for(var Qa=Object.keys(va),Ua=!1,Sa=0;Sa<Qa.length;Sa++)if(-1<Qa[Sa].indexOf("header")||-1<Qa[Sa].indexOf("order"))Ua=!0;Ua&&L&&(L.destroy(),L=null,Ra.header.show&&0<Ra.header.height&&S(),ta&&(L.setOffsetX(ta),L.draw(!0)));if((va.cell||va.rowHeight)&&ba)for(va=Wa-1,va++;va<ba.length;va++)ba[va]&&(ba[va].destroy(),delete ba[va]);this.draw(!0)};this.setListData=function(va){O=va};this.setBounds=function(va){fb=
va};this.setHeader=function(va,Qa){hb=!1;Da();rb=xDeepCopy(va);Ma=xDeepCopy(va);Qa&&(Ob=xDeepCopy(Qa));if(1==Ra.header.full)for(va=0;va<Ma.length;va++)Ma[va].initWidth=Ma[va].width;if(1==Ra.enableOrderBy)for(va=0;va<Ma.length;va++)if(Ma[va].cells&&Ma[va].cells[0].field&&Ra.orderBy.toLowerCase()==Ma[va].cells[0].field.toLowerCase()){Ma[va].order=Ra.orderByType;break}Na=!1;L&&(L.destroy(),L=null);S();if(ba)for(va=Wa-1,va++;va<ba.length;va++)ba[va]&&(ba[va].destroy(),delete ba[va]);G.draw(!0)};var D=
function(va,Qa){var Ua={title:va[2]?va[2]:va[0],width:72,cells:[{field:va[0],textAlign:"right",refreshMode:globalSet.refreshMode}]};if("tm"==va[1]||"tms"==va[1]||"ts"==va[1]||"th"==va[1])Ua.width=130;else if("ti"==va[1])Ua.width=156;else switch(va[1].substr(0,1)){case "i":case "x":Ua.width=92,Ua.cells[0].format="%,";case "f":case "l":Ua.cells[0].textAlign="right";Ua.cells[0].format="%,";if("row"==K.info.rank)for(var Sa=K.info.begin;Sa<K.info.begin+K.info.rows&&Sa<Pa;Sa++)K.data[Sa][Qa]&&(width=8*
(""+K.data[Sa][Qa]).length+6,width>Ua.width&&(Ua.width=width));else for(Sa=K.info.begin;Sa<K.info.begin+K.info.rows&&Sa<Pa;Sa++)K.data[Qa][Sa]?(width=8*(""+K.data[Qa][Sa]).length+6,isChina(K.data[Qa][Sa])&&(width*=2)):width=0,width+=6,width>Ua.width&&(Ua.width=width);break;case "d":Ua.width="t"==K.field[1]?136:78;Ua.cells[0].textAlign="center";break;case "t":case "c":if("row"==K.info.rank)for(Sa=K.info.begin;Sa<K.info.begin+K.info.rows&&Sa<Pa;Sa++)width=0,K.data[Sa][Qa]&&(width=8*K.data[Sa][Qa].length,
isChina(K.data[Sa][Qa])&&(width*=2)),width+=6,width>Ua.width&&(Ua.width=width);else for(Sa=K.info.begin;Sa<K.info.begin+K.info.rows&&Sa<Pa;Sa++)width=0,K.data[Qa][Sa]&&(width=8*K.data[Qa][Sa].length,isChina(K.data[Qa][Sa])&&(width*=2)),width+=6,width>Ua.width&&(Ua.width=width);Ua.cells[0].textAlign="left";Ua.cells[0].maxLines=1;if(Ra.rowHeightField&&Y)for(Qa="Array"==Ra.rowHeightField.constructor.name?Ra.rowHeightField:[Ra.rowHeightField],Sa=0;Sa<Qa.length;Sa++)if(Qa[Sa].toLowerCase()==va[0].toLowerCase()){Ua.cells[0].textBaseline=
"top";Ua.cells[0].maxLines=-1;Ua.cells[0].lineHeight=Ra.rowLineHeight;Ua.cells[0].marginLeft=8;Ua.cells[0].marginRight=8;Ua.cells[0].marginTop=8;Ua.cells[0].marginBottom=8;break}break;default:Ua.width=78}if(Ra.init&&Ra.init.cells)for(Qa=0;Qa<Ra.init.cells.length;Qa++)if(Ra.init.cells[Qa].field.toLowerCase()==va[0].toLowerCase()){Ua.cells[0]=xDeepCopy(Ra.init.cells[Qa]);break}return Ua};this.resetList=function(){if(0==Na||1==hb)1==hb&&(Ma=null),S();ya=!0;Fa(!0);G.draw(!0)};var S=function(){if(K&&K.field&&
(Na=!0,null==Ma)){Ma=null;hb=!0;Ma=[];var va=K.field;Ob&&0<Ob.length&&(Ob=[]);for(var Qa=0;Qa<va.length;Qa++)Ma[Qa]=D(va[Qa],Qa),Ob&&0<Ob.length&&(Ob[Qa]=D(va[Qa],Qa));if(K.info.name&&Y&&1<Y.length&&null!=Ra.init.tableAlignField)for(var Ua=K.info.name+"."+Ra.init.tableAlignField,Sa=1;Sa<Y.length;Sa++)if(Y[Sa].table&&Y[Sa].table.field&&Y[Sa].table.info&&Y[Sa].table.info.name)for(va=Y[Sa].table.field,Qa=0;Qa<va.length;Qa++)if(va[Qa][0].toLowerCase()==Ra.init.tableAlignField.toLowerCase()){for(var db=
0;db<va.length;db++)db!=Qa&&(Ma[Ma.length]=D(va[db],db),Ma[Ma.length-1].cells[0].field=Y[Sa].table.info.name+"."+va[db][0]+"["+Ra.init.tableAlignField+"="+Ua+"]");break}if(1==Ra.header.fullWidth&&(va=sa/Ma.length))for(Qa=0;Qa<Ma.length;Qa++)Ma[Qa].width=va;"tree"==K.info.mode&&(Ma[0].width=220)}if(Ma){for(va=Qa=0;va<Ma.length;va++)Ma[va].x=Qa,Ma[va].index=[],Qa+=Ma[va].width;if(Ob&&0<Ob.length)for(va=Qa=0;va<Ob.length;va++)Ob[va].x=Qa,Ob[va].index=[],Qa+=Ob[va].width}null==L&&Ra.header.show&&Ra.header.height&&
(L=new xListMobileHeader(a,G.page,Vb,G),L.getContext().canvas.parentNode.addEventListener("touchstart",Ba),L.getContext().canvas.parentNode.addEventListener("touchend",xa),L.getContext().canvas.parentNode.addEventListener("touchmove",Ia),L.setHeader(Ma),L.setOption(Ra))};this.resize=function(){this.draw(!0);L&&L.draw(!0);if(ba&&ba.length)for(var va=0;va<ba.length;va++)ba[va]&&ba[va].draw(!0)};var xa=function(va){va=!0;for(var Qa=null!=Ma[Ya].cells[0].orderByAlias?Ma[Ya].cells[0].orderByAlias:Ma[Ya].cells[0].field,
Ua=0;Ua<Ra.orderByDont.length;Ua++)if(Qa.toLowerCase()==Ra.orderByDont[Ua].toLowerCase()){va=!1;break}if(1==Ra.enableTouchOrder&&1==Ra.enableOrderBy&&"{{ order number }}"!=Qa&&1==va){Ra.orderBy!=Qa?(Ra.orderBy=Qa,"desc"!=Ra.orderByType&&"asc"!=Ra.orderByType&&(Ra.orderByType="desc")):1==Ra.orderBy3S?""==Ra.orderByType?Ra.orderByType="desc":"desc"==Ra.orderByType?Ra.orderByType="asc":"asc"==Ra.orderByType&&(Ra.orderByType=""):"desc"==Ra.orderByType?Ra.orderByType="asc":"asc"==Ra.orderByType&&(Ra.orderByType=
"desc");if(1==Ra.orderByLocal&&("desc"==Ra.orderByType||"asc"==Ra.orderByType)&&1==sortTable(Y,Ra.orderBy,Ra.orderByType))for(va=0;va<Ma.length;va++)Ra.orderBy.toLocaleLowerCase()==Ma[va].cells[0].field.toLowerCase()?Ma[va].order=Ra.orderByType:Ma[va].order=null;G.query()}},Ba=function(va){for(var Qa=Nb(),Ua=0,Sa=0;Sa<Qa;Sa++)Ua+=Ma[Sa].width;E=va.targetTouches[0].pageX-r(Lb);if(Qa&&0!=Qa)if(E<Ua)for(va=0;va<Ma.length;va++){if(x=Ma[va].x+Ma[va].width,E>Ma[va].x&&E<x){Ya=va;adjustHeaderIndexOffsetX=
E-Ma[va].x;break}}else for(va=0;va<Ma.length;va++){if(x=Ma[va].x+Ma[va].width-ta,E>Ma[va].x-ta&&E<x){Ya=va;adjustHeaderIndexOffsetX=E-Ma[va].x;break}}else for(va=0;va<Ma.length;va++)if(x=Ma[va].x+Ma[va].width-ta,E>Ma[va].x-ta&&E<x){Ya=va;adjustHeaderIndexOffsetX=E-Ma[va].x;break}},Ia=function(va){var Qa=va.targetTouches[0].pageX-r(Lb)-E;0!=Qa&&G.setOffsetX(-Qa);E=va.targetTouches[0].pageX-r(Lb);Ra.callback_onTouchMove&&Ra.callback_onTouchMove(-Qa,va)},Da=function(){if(Ma)for(var va=0;va<Ma.length;va++)if(Ma[va].cell){for(var Qa=
0;Qa<Ma[va].cell.length;Qa++)for(var Ua=0;Ua<Ma[va].cell[Qa].length;Ua++)delete Ma[va].cell[Qa][Ua];Ma[va].cell=void 0}if(Ob&&0<Ob.length)for(va=0;va<Ob.length;va++)if(Ob[va].cell){for(Qa=0;Qa<Ob[va].cell.length;Qa++)for(Ua=0;Ua<Ob[va].cell[Qa].length;Ua++)delete Ob[va].cell[Qa][Ua];Ob[va].cell=void 0}};this.getQueryData=function(){return Y};var lb=function(va,Qa,Ua,Sa){if(0<=va&&va<Ma.length){null==Ma[va].objects&&(Ma[va].objects=[]);Sa=Qa;if(null==Ma[va].objects[Ua])if(K&&K.rotate){if(0==va)Ma[va].objects[Sa]=
new xCells(G,[{field:Ra.rotate.field,marginLeft:10,fontSize:parseFloat(Ra.header.fontSize),textAlign:"left"}],null,aa);else{a:{Ua=K.rotate.data[Qa][0];if(rb)for(var db=0;db<K.rotate.data.length;db++)for(var vb=0;vb<rb.length;vb++)for(var ub=0;ub<rb[vb].cells.length;ub++)if(rb[vb].cells[ub].field&&rb[vb].cells[ub].field.toLowerCase()==Ua.toLowerCase()){Ua=rb[vb].cells[ub];break a}Ua=void 0}Ua?(Ua=xDeepCopy(Ua),Ua.field=K.rotate.data[Qa][0],Ma[va].objects[Sa]=new xCells(G,[Ua],null,aa)):Ma[va].objects[Sa]=
new xCells(G,[{field:K.rotate.data[Qa][0],textAlign:isTextType(K.rotate.data[Qa][1])?"left":"right",refreshMode:Ra.rotate.refreshMode}],null,aa)}Ua=Ma[va].objects[Sa];Qa=va-1}else Ma[va].objects[Ua]=new xCells(G,Ma[va].cells,null,aa),Ua=Ma[va].objects[Ua];else Ua=Ma[va].objects[Ua],K&&K.rotate&&(Qa=va-1);setSelectorValue=!1;if(db=Ua.getCells())for(vb=0;vb<db.length;vb++)if(ub=db[vb],"xSaftButton"==ub.type&&ub.option&&null!=ub.option.selector){setSelectorValue=!0;break}db=!1;1==Ra.enableMultiSelected&&
oa.multiSelected.includes(Qa)&&(db=!0);K&&K.rotate&&0==va?(va=K.rotate.data[Sa][2]?K.rotate.data[Sa][2]:K.rotate.data[Sa][0],-1!=va.indexOf("$r$")&&"rotate_tree"==Ra.header.group?(Qa=va.split("$r$"),va=Qa[Qa.length-1],Ua.getCells()[0].marginLeft=10*Qa.length):"rotate_addrow"==Ra.header.group&&(-1!=va.indexOf("$r$")?(va=va.split("$r$"),va=va[va.length-1]):-1!=va.indexOf("$Add$")&&(va=va.split("$Add$")[0],Ua.getCells()[0].fontBold=!0)),Ua.setValueText(va)):null!=O?Ua.setValue(Qa,Y,aa,db,O,null,Ra.orderReverse):
1==setSelectorValue?Ua.setValue(Qa,Y,aa,db,null,setSelectorValue,Ra.orderReverse):1==Ra.orderReverse?Ua.setValue(Oa-Qa-1+K.info.dataBegin,Y,aa,db,null,null,Ra.orderReverse):Ua.setValue(Qa,Y,aa,db,null,null,Ra.orderReverse);if(Ra.marks){va=[];for(Qa=0;Qa<Ra.marks.length;Qa++){Sa=Ra.marks[Qa].variable.indexOf("[");db=Ra.marks[Qa].variable.indexOf("]");if(-1!=Sa&&-1!=db&&(Sa=Ra.marks[Qa].variable.slice(0,Sa),(db=aa[Sa])&&"Array"==db.constructor.name)){va[Qa]=replaceFilter(Ra.marks[Qa].variable,db,Sa);
continue}null!=aa[Ra.marks[Qa].variable]?va[Qa]=aa[Ra.marks[Qa].variable]:null!=aa[Ra.marks[Qa].value]&&(va[Qa]=aa[Ra.marks[Qa].value])}0<va.length&&Ua.setMarkValues(va)}}},wb=function(){return{option:Ra,variables:aa,target:G,page:G.page,callbacks:{openWidthBrowseCenter:function_openWithBrowseCenter}}};this.setTable=function(va,Qa,Ua,Sa){if(1!=X)if(X=!0,null!=Sa)Sa.errorCode==ERRORHTTP.NULL_MUST_PARAM?"Array"==F.constructor.name?F[Sa.queryIndex].queryStatus=null:"String"==F.constructor.name&&-1!=
F.indexOf("{{")&&(va=F,va=replaceVariablesValue(va,aa,Y),va[Sa.queryIndex].queryStatus=null):"Array"==F.constructor.name&&(F[Sa.queryIndex].queryStatus=null),X=!1;else{1==Ua&&(ja=!0);K&&K.info&&(preBeginIndex=K.info.begin);Sa=function(Ha){return Y=xDeepCopy(Ha)};var db=!1;va&&va[0]&&va[0].table&&va[0].table.data?(0>Ra.initCursorPos&&Pa*Ra.rowHeight-Aa<ha*Ra.rowHeight&&(Z=!0),Y=Sa(va),db=!0,1==Ra.rotate.rotate&&"rotate_addrow"==Ra.header.group&&Y[0].table.rotate&&kb(Y),K=Y[0].table,Pa=K.info.totalRows?
K.info.totalRows:0,aa.totalRows=Pa,0>K.info.begin&&(K.info.begin=0)):(K=Y=null,Wa=Pa=0,Aa=pa.index=0,Da());if(0==db&&va)for(db=0;db<va.length;db++)if(null!=va[db]&&va[db].table){Y=Sa(va);break}1!=Ra.orderByLocal||"asc"!=Ra.orderByType&&"desc"!=Ra.orderByType||sortTable(Y,Ra.orderBy,Ra.orderByType);va=F;X=!1;if(F&&Y)for("String"==F.constructor.name&&-1!=F.indexOf("{{")&&(va=replaceVariablesValue(va,aa,Y)),Sa=0;Sa<va.length;Sa++)va[Sa]&&Y[Sa]&&Y[Sa].updateCounter!=va[Sa].updateCounter&&(va[Sa].callback_onMessage&&
va[Sa].callback_onMessage(Y[Sa],Qa,Ua,wb(),Y),va[Sa].queryStatus=null,ib=xGlobal.refreshCounter);var vb=0;1==Z&&(0>Ra.initCursorPos&&1==Ra.orderReverse?(Wa=0,Aa=pa.index=0):0>Ra.initCursorPos&&(Wa=Pa-na,pa.index=Pa-1,Aa=(Pa+2)*Ra.rowHeight-za.height,Qa=Math.ceil(Aa/15E6),15E6<Aa&&Aa<15E6*Qa?(Gb=15E6*(Qa-1),Aa-=15E6):Gb=0),vb=Aa);if(0==Na||1==hb)1==hb&&(Ma=null),S();K&&K.rotate?(Pa=K.rotate.data.length,da=0,Oa=Pa):K&&K.info?(da=K.info.dataBegin,Oa=K.info.dataRows):Oa=da=0;ya=!0;Fa(!0);va&&va[0].callback_object?
va[0].callback_object.callback_query&&G.draw(!0):(G.draw(!0),G.query());if(1==Z&&Lb.scrollTop!=vb)if(Ra.animation){var ub=function(){scrollTop=Lb.scrollTop+R;0<R?scrollTop>=vb&&(scrollTop=vb):scrollTop<=vb&&(scrollTop=vb);Lb.scrollTop=scrollTop;vb!=scrollTop&&setTimeout(ub,10)},R=(vb-Lb.scrollTop)/10;setTimeout(ub,5)}else Lb.scrollTop=vb;Qa=function(Ha,Za){if("String"==Ha.constructor.name){if(Ha=Ha.toLowerCase(),Y)for(var eb=0;eb<Y.length;eb++)if(Za[eb]&&Y[eb]&&Y[eb].updateCounter!=Za[eb].updateCounter&&
Y[eb].table&&Y[eb].table.info&&Ha&&Ha==Y[eb].table.info.name.toLowerCase())return Y[eb].table}else if(Y&&(eb=Ha,Za[eb]&&Y[eb]&&Y[eb].updateCounter!=Za[eb].updateCounter&&Y[eb].table&&Y[eb].table.info))return Y[eb].table};Ub&&G.setCursorIndexTo(Ub);if(Ra.dynamicSynchBound){if(Ra.dynamicSynchBound.onceOnCursor&&Qa(Ra.dynamicSynchBound.onceOnCursor,va)){var ka=Ra.dynamicSynchBound.onceOnCursor;Y.forEach(function(Ha,Za){Ha&&Ha.table&&Ha.table.info.name==ka&&0<Ha.table.data.length&&(Ra.dynamicSynchBound.onceOnCursor=
"",J())})}null!=Ra.dynamicSynchBound.alwaysOnCursor&&Qa(Ra.dynamicSynchBound.alwaysOnCursor,va)&&(pa.preIndex=null,J());if(Ra.dynamicSynchBound.setExtenalTableTo)for(Sa=0;Sa<Ra.dynamicSynchBound.setExtenalTableTo.length;Sa++)if(Ra.dynamicSynchBound.setExtenalTableTo[Sa].target&&(Ua=Qa(Ra.dynamicSynchBound.setExtenalTableTo[Sa].tableName,va))){db=this.page;var qa=Ra.dynamicSynchBound.setExtenalTableTo[Sa].target.split(".");1==qa.length?(qa[1]=qa[0],qa[0]=""):db=G.page.getPageById(qa[0]);db&&(db=db.getObjectByElementId(qa[1]))&&
db.setExternalTable&&db.setExternalTable(Ua,Ra.dynamicSynchBound.setExtenalTableTo[Sa].keyName)}}if(F&&Y)for(Sa=0;Sa<va.length;Sa++)va[Sa]&&Y[Sa]&&(va[Sa].updateCounter=Y[Sa].updateCounter)}};var Fa=function(va){va=void 0===va?!1:va;if(Ma&&Y&&Y[0]&&Y[0].table){1==va&&yb();for(var Qa=Wa,Ua,Sa=0;Sa<Ma.length;Sa++){var db=0;Ua=Qa;if(!Y[0].table.info)return;var vb=Y[0].table.info.dataBegin+Y[0].table.info.dataRows;if(null==Ma[Sa].objects)Ma[Sa].objects=[];else if(Ma.begin<Ua)Ma[Sa].objects.splice(0,Ua-
Ma.begin);else if(Ma.begin>Ua){var ub=Ma.begin-Ua;Ma[Sa].objects.splice(Ma.rows-ub,ub);ub=Array(ub).fill(null);Ma[Sa].objects=ub.concat(Ma[Sa].objects)}for(;Ua<vb&&db<na+1;Ua++,db++){lb(Sa,Ua,db,va);ub=H(Ua);var R=za.height;if(null==ub||ub.y>Aa+za.top+R+R/2)break}}Ma.begin=Qa}};this.setInSetTable=function(va){X=va};this.setCursorIndex=function(va){pa.index=va;0>pa.index&&(pa.index=0);pa.index>Pa-1&&(pa.index=Pa-1);ca?1==Ra.orderReverse&&0>Ra.initCursorPos?(va=ca.length-1-pa.index,0>ca[va][1]-Aa?Aa=
ca[va][1]:ca[va][1]+ca[va][0]-Aa>za.height&&(Aa=ca[va][1]-(za.height-ca[va][0])-1)):ca[pa.index]&&(ca[pa.index][1]+ca[pa.index][0]-za.height>Aa?Aa=ca[pa.index][1]-(za.height-ca[pa.index][0]):ca[pa.index][1]<Aa&&(Aa=ca[pa.index][1])):1==Ra.paging?(null==aa.pageNo&&(aa.pageNo=0),aa.pageNo*na>Pa&&(aa.pageNo=0,pa.index=0),Aa=aa.pageNo*na*Ra.rowHeight):(pa.index*Ra.rowHeight<Aa&&(Aa=pa.index*Ra.rowHeight),pa.index>=Wa+na&&Q&&(Aa=(pa.index+1)*Ra.rowHeight-Q-Gb,0>Aa&&(Aa=0)));G.draw(!0)};var Nb=function(){var va=
0;1==Ra.frozenColumn&&0<Ra.frozenColumns&&(va=Ra.frozenColumns);return va};this.refresh=function(){4>xGlobal.refreshCounter-ib&&this.draw(!0)};this.getHeader=function(){return Ma};this.getGridCells=function(va){return(void 0)[va]};this.getGrid=function(va){switch(va){case 0:case "top":if(Ra.grid&&Ra.grid.init&&Ra.grid.init.vBox&&1==Ra.showGrid.top)var Qa=Ra.grid;break;case 1:case "bottom":Ra.gridBottom&&Ra.gridBottom.init&&Ra.gridBottom.init.vBox&&1==Ra.showGrid.bottom&&(Qa=Ra.gridBottom);break;case 2:case "left":Ra.gridLeft&&
Ra.gridLeft.init&&Ra.gridLeft.init.vBox&&1==Ra.showGrid.left&&(Qa=Ra.gridLeft);break;case 3:case "right":Ra.gridRight&&Ra.gridRight.init&&Ra.gridRight.init.vBox&&1==Ra.showGrid.right&&(Qa=Ra.gridRight);break;case 4:Ra.headerBottom&&Ra.headerBottom.init&&Ra.headerBottom.init.vBox&&(Qa=Ra.headerBottom);break;case 5:Ra.containCell&&Ra.containCell.init&&Ra.containCell.init.vBox&&1==Ra.containCell.show&&(Qa=Ra.containCell)}return Qa};this.modifyGridCellSetById=function(va,Qa,Ua){var Sa=this.getGrid(va);
if(Sa){a:{Sa=Sa.init.vBox;for(var db=0;db<Sa.length;db++)for(var vb=0;vb<Sa[db].length;vb++)if(Sa[db]&&Sa[db][vb]&&Sa[db][vb].id==Qa){Sa=Sa[db][vb];break a}Sa=void 0}Sa&&(xCopyTo(Ua,Sa),(void 0)[va]&&((void 0)[va].modifyGridCellSetById(Qa,Ua),(void 0)[va].setValue(0,Y,aa)))}};this.draw=function(va){va=void 0===va?null:va;if(null!=B&&null!=B.parentElement){var Qa=B.offsetWidth,Ua=B.offsetHeight;if(!(null==B||0==Qa||0==Ua||!Ma||1>Ma.length||0==va&&Aa==Lb.scrollTop)){$a!=Qa&&(ya=!0);Aa=Lb.scrollTop+
Gb;$a=Qa;za.top=0;za.left=0;za.width=Qa;za.height=Ua;var Sa=xDeepCopy(za);Ra.marginLeft&&(za.left+=Ra.marginLeft,za.width-=Ra.marginLeft);Ra.marginTop&&(za.top+=Ra.marginTop,za.height-=Ra.marginTop);Ra.marginRight&&(za.width-=Ra.marginRight);Ra.marginBottom&&(za.height-=Ra.marginBottom);var db=xDeepCopy(za);1==Ra.header.show&&Ra.header.height?(rectHeader={left:za.left,top:za.top,width:Qa,height:Ra.header.height},ra=Ra.header.height,L.setPosition(za.left,za.top,Qa,Ra.header.height),L.draw(va)):(ra=
0,L&&(L.destroy(),L=null));za.top+=ra;za.height-=ra;sa=za.width;Q=za.height;Lb.style.left=za.left+"px";Lb.style.top=za.top+"px";Lb.style.width=za.width+"px";Lb.style.height=za.height+"px";ha=Math.ceil(za.height/Ra.rowHeight);G.normalDraw(Qa,Ua,Sa,db,va)}}};var yb=function(){if(Ra.rowHeightField&&Y){ca=[];var va="Array"==Ra.rowHeightField.constructor.name?Ra.rowHeightField:[Ra.rowHeightField];for(var Qa=0;Qa<va.length;Qa++){var Ua=Y[0].table,Sa=va[Qa].split(".");if(1<Sa.length)for(var db=0;db<Y.length;db++){if(Y[db]&&
Y[db].table&&Sa[0].toLowerCase()==Y[db].table.info.name.toLowerCase()){Ua=Y[db].table;break}}else Sa[1]=Sa[0];if(null==Ua||null==Ua.field){ca=null;return}a:{var vb=Ua;db=Sa[1];for(var ub=vb.info.dataRows,R=0;R<vb.field.length;R++)if(vb.field[R][0].toLowerCase()==db.toLowerCase()){for(Sa=0;Sa<Ma.length;Sa++)if(Ma[Sa].cells)for(Ua=0;Ua<Ma[Sa].cells.length;Ua++)if(db.toLowerCase()==Ma[Sa].cells[Ua].field.toLowerCase()){var ka=Ma[Sa].width;db=Ra.rowLineHeight;Ma[Sa].cells[Ua].lineHeight&&(db=Ma[Sa].cells[Ua].lineHeight);
var qa=null!=Ma[Sa].cells[Ua].marginLeft?Ma[Sa].cells[Ua].marginLeft:Ma[Sa].cells[Ua].margin?Ma[Sa].cells[Ua].margin:0,Ha=null!=Ma[Sa].cells[Ua].marginRight?Ma[Sa].cells[Ua].marginRight:Ma[Sa].cells[Ua].margin?Ma[Sa].cells[Ua].margin:0,Za=null!=Ma[Sa].cells[Ua].marginTop?Ma[Sa].cells[Ua].marginTop:Ma[Sa].cells[Ua].margin?Ma[Sa].cells[Ua].margin:0,eb=null!=Ma[Sa].cells[Ua].marginBottom?Ma[Sa].cells[Ua].marginBottom:Ma[Sa].cells[Ua].margin?Ma[Sa].cells[Ua].margin:0;qa&&(ka-=qa);Ha&&(ka-=Ha);validate=
!0;Ha=L.getContext();var pb=Ma[Sa].cells[Ua].fontSize+"px "+xGlobal.systemFont;if("row"==vb.info.rank)for(qa=0;qa<ub;qa++)if(null==ca[qa])ca[qa]=[getHeight(Ha,vb.data[qa][R],pb,db,ka-6-6)],Za&&(ca[qa][0]+=Za),eb&&(ca[qa][0]+=eb);else{var mb=getHeight(Ha,vb.data[qa][R],pb,db,ka-6-6);Za&&(mb+=Za);eb&&(mb+=eb);mb>ca[qa][0]&&(ca[qa]=[mb])}else for(qa=0;qa<ub;qa++)ca[qa]?(ca[qa]=[getHeight(Ha,vb.data[R][qa],pb,db,ka)],Za&&(ca[qa][0]+=Za),eb&&(ca[qa][0]+=eb)):(mb=getHeight(Ha,vb.data[R][qa],pb,db,ka),Za&&
(mb+=Za),eb&&(mb+=eb),mb>ca[qa][0]&&(ca[qa]=[mb]));ca.begin=vb.info.dataBegin;if(0<Ma[Sa].cells.length){for(R=ub=vb=0;R<Ma[Sa].cells.length;R++)R!=Ua&&(0<Ma[Sa].cells[R].top?Ma[Sa].cells[R].top+db>vb&&(vb=Ma[Sa].cells[R].top+db):Ma[Sa].cells[R].top<ub&&(ub=Ma[Sa].cells[R].top));if(vb||ub)for(qa=0;qa<ca.length;qa++)ca[qa][0]<vb&&(ca[qa][0]=vb),ub&&(ca[qa][0]-=ub);Sa=0;if(1==Ra.orderReverse)for(qa=ca.length-1;0<=qa;qa--)ca[qa][1]=Sa,Sa+=ca[qa][0];else for(qa=0;qa<ca.length;qa++)ca[qa][1]=Sa,Sa+=ca[qa][0]}break a}break}}}0==
ca.length&&(ca=null)}};this.normalDraw=function(va,Qa,Ua,Sa,db){if(Ra.header&&1==Ra.header.full){Ua=sa;Qa=Ma;if(1==Ra.header.full&&null!=Qa){for(var vb=db=Sa=0;vb<Qa.length;vb++)null!=Qa[vb].initWidth&&(Sa+=Qa[vb].initWidth,db++);if(db==Qa.length)for(Ua/=Sa,Sa=0;Sa<Qa.length;Sa++)Qa[Sa].width=Qa[Sa].initWidth*Ua;else for(vb=0;vb<Qa.length;vb++)null==Qa[vb].initWidth&&(Qa[vb].width=(Ua-Sa)/(Qa.length-db),0>Qa[vb].width&&(Qa[vb].width=0));if(Ma)for(Ua=Qa=0;Ua<Ma.length;Ua++)Ma[Ua].x=Qa,Qa+=Ma[Ua].width;
S()}1==ya&&(ya=!1,yb())}Nb();Qa=G.checkNextQuery();null==ba&&(ba=[]);if(K&&K.data&&Ma&&ba){Wa=Qa;Qa=0;Sa=Wa;0>Sa&&(Sa=0);if(Ma.begin<Wa)for(;Ma.begin+Qa!=Wa;Qa++);else if(Ma.begin>Wa)for(;Ma.begin!=Sa;Sa++);for(Ua=0;Ua<Sa;Ua++)ba[Ua]&&(ba[Ua].destroy(),delete ba[Ua]);if(ba.length>K.data.length)for(Ua=ba.length-1;Ua>K.data.length-1;Ua--)ba[Ua]&&(ba[Ua].destroy(),delete ba[Ua],ba.length--);for(Ua=Sa;Ua<Pa;Ua++,Qa++){db=H(Ua);if(null==db)break;Sa=db.y;if(null==ba[Ua]){for(vb=0;vb<Ma.length;vb++)lb(vb,
Ua,Ua-Ma.begin);ba[Ua]=new xListMobileRow(a,G.page,Lb,G)}ba[Ua].setOption(Ra);ba[Ua].setHeader(Ma);ba[Ua].setOffsetX(ta);ba[Ua].setRowIndex(Ua,K.info.dataBegin);ba[Ua].setPosition(za.left,Sa,za.left+za.width,db.height);ba[Ua].draw(!0);if(Qa==K.info.dataRows-1)break;db=H(Ua+1);if(null==db)break;Sa=db.y;if(Sa>=Aa+za.top+Q||1==Ra.paging&&rowCount>=na)break}for(Ua++;Ua<ba.length;Ua++)ba[Ua]&&(ba[Ua].destroy(),delete ba[Ua]);if(db=H(Pa))null==N&&(N=a.document.createElement("div"),N.style="display:block;height:0px;position:absolute;margin:0px;padding:0px;z-index:0;width:"+
va+"px",Lb.appendChild(N)),N.style="display:block;height:1px;background-color:transparent;position:absolute;margin:0px;padding:0px;z-index:0;width:"+va+"px;top:"+db.y+"px;"}la=0;if(Ma)for(vb=0;vb<Ma.length;vb++)la+=Ma[vb].width};this.checkNextQuery=function(){0>Aa&&(Aa=0);var va=0;if(ca)for(var Qa=0;Qa<ca.length;Qa++){if(Aa>=ca[Qa][1]&&Aa<ca[Qa][1]+ca[Qa][0]){va=Qa;1==Ra.orderReverse&&0>Ra.initCursorPos&&(va=ca.length-1-Qa);break}}else Ra.rowHeight&&(va=Math.floor((Lb.scrollTop+Gb)/Ra.rowHeight)),
Ob&&0<Ob.length&&(va=Ra.firstRowHeight>Aa?0:Math.floor((Aa-Ra.firstRowHeight)/Ra.rowHeight)+1);Qa=ha;na=parseInt(Q/Ra.rowHeight);ha=Math.ceil(Q/Ra.rowHeight);aa.totalPages=Math.ceil(Pa/na);pa.index>Pa-1&&(pa.index=Pa-1,va=Pa-1-na,0>va&&(va=0));0>pa.index&&(pa.index=0);va+na>Pa&&(va=Pa-na,0>va&&(Aa=va=0));if(F&&0<F.length&&F[0].callback_object)null==F[0].callback_object.callback_query&&G.setTable(G.onDoCallback(F[0].callback_object));else{a:{if(F){var Ua=F;-1!=Ua.indexOf("{{")&&(Ua=replaceVariablesValue(Ua,
aa,Y));for(var Sa=0;Sa<Ua.length;Sa++){var db=Ua[Sa];if(db.limit&&db.limit.mode&&("window"==db.limit.mode||"synch"==db.limit.mode)){Ua=!0;break a}}}Ua=void 0}if(1==Ua)Wa=va,G.query(),Fa(!1);else if(Wa!=va||ha!=Qa||0!=W){if(null==K||va<K.info.begin||ha!=Qa||K.info.begin+K.info.rows<K.info.totalRows&&Wa+ha>=K.info.begin+K.info.rows-1&&1!=Ra.localPaging||1==Ca)Wa=va,Ca=!1,G.query();Wa=va;Fa(!1)}}return va};this.onMouseOut=function(va){null!=Fb&&(Fb=null,G.draw(!0))};nb=function(va,Qa){if(ca){for(var Ua=
va=0;Ua<ba.length;Ua++)if(ba[Ua]){va=Ua;break}Qa+=ca[va][1];va=Number(ba[va].getCanvas().offsetParent.style.top.split("px")[0]);Qa-=va;for(Ua=0;Ua<ca.length;Ua++)if(Qa>ca[Ua][1]&&Qa<ca[Ua][1]+ca[Ua][0])return 1==Ra.orderReverse&&0>Ra.initCursorPos&&(Ua=K.info.totalRows-K.info.dataBegin-1-Ua),Ua;return null}return 1>Pa||Qa/Ra.rowHeight>ba.length?null:Math.floor(Qa/Ra.rowHeight)};var xb=function(){var va=B.offsetWidth,Qa=B.offsetHeight;ra=1==Ra.header.show&&Ra.header.height?Ra.header.height:0;za.width=
va;za.height=Qa-ra;Lb.style.left=za.left+"px";Lb.style.top=za.top+"px";Lb.style.width=za.width+"px";Lb.style.height=za.height+"px";sa=za.width;Q=za.height;ha=Math.ceil(Q/Ra.rowHeight)};this.isMyCanvas=function(va){return!1};this.onContextMenu=function(va){1!=xGlobal.passiveSupported&&va.preventDefault()};this.getSelected=function(va){if(va){var Qa=[];if(1==Ra.enableMultiSelected&&1<oa.multiSelected.length)for(var Ua=0;Ua<oa.multiSelected.length;Ua++){var Sa=G.getFieldData(va,oa.multiSelected[Ua]-
da);Qa[Ua]=Sa.value}else Sa=G.getFieldData(va,pa.index-da),Qa[0]=Sa.value;Ua={queryInfo:G.queryInfo,data:{}};Ua.data=[Qa]}else{Qa=[];if(1==Ra.enableMultiSelected&&0<oa.multiSelected.length)for(Ua=0;Ua<oa.multiSelected.length;Ua++)for(Qa[Ua]=[],va=0;va<Ma.length;va++)Sa=Ma[va].objects[oa.multiSelected[Ua]-da].getValue(),Qa[Ua][Qa[Ua].length]=Sa;else for(Qa[0]=[],va=0;va<Ma.length;va++)Sa=Ma[va].objects[pa.index-da].getValue(),Qa[0][Qa[0].length]=Sa;Ua={queryInfo:G.queryInfo};Ua.data=Qa}return Ua};
this.getFieldData=function(va,Qa){va=getFieldIndex(va,Y,aa);return getFieldDataFromIndex(va,Qa,Y)};var ob=function(va,Qa){va=null!=va?va:fb;if(Y&&Y[0]&&Y[0].table&&Y[0].table.data&&va){var Ua=Y[0].table,Sa=pa.index-Ua.info.dataBegin;null!=Ab&&(Sa=Ab+Ua.info.dataBegin);Sa=null!=Qa?Qa:Sa;for(Qa=0;Qa<va.length;Qa++)if(va[Qa].field&&va[Qa].variable){var db=G.getFieldData(va[Qa].field,Sa);Ua=va[Qa].variable.split(".");Ua=Ua[1];if(null!=aa[Ua])aa[Ua]=db.value;else for(var vb in aa)if(vb==Ua){aa[Ua]=db.value;
break}}}};this.getBegin=function(){return Wa};this.synchPageBoundValue=function(va,Qa){va=void 0===va?"":va;Qa=void 0===Qa?0:Qa;var Ua=Ra.branchSend;if(null!=fb&&K&&K.field&&K.data){var Sa=null!=Ab?getBoundValues(fb,aa,Y,Ab+K.info.dataBegin,wb()):getBoundValues(fb,aa,Y,pa.index,wb());0<Sa.length&&(Ua?null==G.page?globalPage.getActivePage().synchBoundValue(va,Qa+1,Sa,G):G.page.synchBoundValue(va,Qa+1,Sa,G):isBranch(Y,pa.index)||(null==G.page?globalPage.getActivePage().synchBoundValue(va,Qa+1,Sa,G):
G.page.synchBoundValue(va,Qa+1,Sa,G)))}};this.createDialog=function(va){createDialogForParent(a,va,G)};this.viewWillAppear=function(){ha=0;initFinish=!0};this.getWin=function(){return a};this.getCursor=function(){return pa};this.reload=function(){G.clearQueryData();G.query()};var kb=function(va){for(var Qa={},Ua,Sa=[],db=0;db<va[0].table.rotate.data.length;db++)if(-1!=va[0].table.rotate.data[db][2].indexOf("$r$")){var vb=va[0].table.rotate.data[db][2].split("$r$")[0];Ua!=vb&&(Ua=vb,Qa[db]=vb)}Ua=
0;for(var ub in Qa){ub=parseFloat(ub);db=["field"+ub+"$Add$","t",Qa[ub]+"$Add$"];if(0!=ub)for(Sa[ub+Ua]=db,db=ub-R,vb=0;vb<db;vb++)Sa[vb+Ua+R]=va[0].table.rotate.data[vb+R];else Sa[ub]=db;var R=ub;Ua++}ub=va[0].table.rotate.data.length-R;for(db=0;db<ub;db++)Sa[db+Ua+R]=va[0].table.rotate.data[db+R];va[0].table.rotate.data=Sa;return Qa};G.funcNameMap={goPage:G.goPage,goPrePage:G.goPrePage,goNextPage:G.goNextPage,setVariablesValue:G.setVariablesValue,doEnter:G.doEnter,thisPage:G.page};var Vb=a.document.createElement("div");
Vb.style="display;block;position:relative;margin:0px;padding:0px;width:100%;height:100%;z-index:0;overflow:auto;";B.appendChild(Vb);var Lb=a.document.createElement("div");Lb.style="display:block;position:absolute;margin:0px;padding:0px;height:0;z-index:0;overflow:auto;";Vb.appendChild(Lb);Lb.innerHTML='<div style="margin-top:-32px;color:#f00;font-size:16px;">\u6ca1\u6709\u4e86</div>';Lb.addEventListener("contextmenu",fc);Lb.addEventListener("touchstart",bc,xGlobal.passiveSupported?{passive:!0}:!1);
Lb.addEventListener("touchend",Tb,xGlobal.passiveSupported?{passive:!0}:!1);Lb.addEventListener("touchmove",ma,xGlobal.passiveSupported?{passive:!0}:!1);Lb.addEventListener("scroll",wa);F&&F[0]&&F[0].callback_object&&F[0].callback_object.callback_query&&F[0].callback_object.callback_query(G,G.setTable)};var lastClickHeaderPlugs;
function xListPlugs(a,b,c,g){a=a.currentTarget.parentElement;var k={x:b.x,y:c.header.height};"screen"==b.plugs.type&&screenPlugs(a,k,b,c,g);"checkboxList"==b.plugs.type&&(document.getElementById(b.plugs.id)?"none"==document.getElementById(b.plugs.id).style.display?document.getElementById(b.plugs.id).style.display="block":document.getElementById(b.plugs.id).style.display="none":(window.checkboxLists||(window.checkboxLists={}),checkboxLists[b.plugs.id]=new getCheckboxList(a,k,b,c,g)))}
function screenPlugs(a,b,c,g,k){function q(K,Z){K=document.getElementById(K);O.style.display="none";K.style.boxShadow="";"sub"==Z?""==K.value?K.value=J+C:(Z=v(K.value),parseFloat(K.value)<=parseFloat(U)||!Z||(Z=f(K.value),Z=p(Z-1E-4),K.value=Z)):"add"==Z&&(""==K.value?K.value=U+C:(Z=v(K.value),parseFloat(K.value)>=parseFloat(J)||!Z||(Z=f(K.value),Z=p(Z+1E-4),K.value=Z)))}function f(K){return K.replace(C,"")/100}function p(K){K=Number(100*K).toFixed(2);return K+=C}function v(K){K=K.replace(C,"");""==
K&&(K=U);var Z=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return/^\d+(\.\d+)?$/.test(K)||Z.test(K)?!0:!1}function A(K){if(null!=K.data){O.style.display="none";K.currentTarget.style.boxShadow="";var Z=v(K.data),pa=K.target.value.indexOf("-");0==pa&&(Z=!0);pa=K.target.value.split("-");2<pa.length&&(Z=!1);pa=K.target.value.split(".");"."==K.data&&2>=pa.length&&""!=pa[0]&&(Z=!0);pa=K.target.value.replace("%","");pa=pa.replace("-","");pa=pa.split(".");2>=pa.length&&
(null!=pa[0]&&3<pa[0].length&&(Z=!1),null!=pa[1]&&2<pa[1].length&&(Z=!1));pa=K.target.value.split("%");if(K.data==C)if(2>=pa.length){if(""==pa[0]||""!=pa[1]&&null!=pa[1])Z=!1}else Z=!1;2<=pa.length&&""!=pa[1]&&null!=pa[1]&&(Z=!1);if(parseFloat(K.target.value)>parseFloat(J)||parseFloat(K.target.value)<parseFloat(U))Z=!1;if(!Z){Z=K.target;var oa=K.target.value,Aa=K.target.selectionStart-1;0>Aa||Aa>=oa.length||0==oa.length?pa="":(pa=oa.substr(0,Aa),oa=oa.substr(Aa+1,oa.length),pa=pa+""+oa);Z.value=pa;
K.target.value=K.target.value.replace(/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[a-zA-Z']/g,"")}}}function r(){return{screenPlugsParent:document.getElementById("parentScreenDivId"),screenPlugsDiv:document.getElementById("screenPlugsDiv"),screenTitleLable:document.getElementById("screenTitleLable"),screenConditionDiv:document.getElementById("screenConditionDiv"),screenSelect:document.getElementById("screenSelectId"),screenRangeDiv:document.getElementById("screenRangeDiv"),screenSingleDiv:document.getElementById("screenSingleDiv"),
screenSelectParent:document.getElementById("screenSelectParent"),singleInputDom:document.getElementById("singleInputId"),beginRangeInputDom:document.getElementById("beginRangeInputId"),endRangeInputDom:document.getElementById("endRangeInputId"),submitScreenDiv:document.getElementById("submitScreenDiv"),screenSingleSub:document.getElementById("screenSingleSub"),screenSingleAdd:document.getElementById("screenSingleAdd"),screenBeginMutSub:document.getElementById("screenBeginMutSub"),screenBeginMutAdd:document.getElementById("screenBeginMutAdd"),
screenEndMutSub:document.getElementById("screenEndMutSub"),screenEndMutAdd:document.getElementById("screenEndMutAdd"),errorLabel:document.getElementById("errorLabel"),screenSubmitBtn:document.getElementById("screenSubmitBtn")}}function u(){var K=V.options[V.selectedIndex].value;if("<>"==K){if(""==T.value){T.style.boxShadow="inset 0px 0px 5px orangered";return}T.value=p(f(T.value));if(""==Y.value){Y.style.boxShadow="inset 0px 0px 5px orangered";return}Y.value=p(f(Y.value));if(parseFloat(T.value)>parseFloat(Y.value)){O.style.display=
"block";O.className="errorLabelAnimation";setTimeout(function(){O.className=""},500);return}var Z=[T.value.replace(C,""),Y.value.replace(C,"")]}else{if(""==fa.value){fa.style.boxShadow="inset 0px 0px 5px orangered";return}fa.value=p(f(fa.value));Z=fa.value.replace(C,"")}var pa=[],oa;for(oa in L){var Aa=void 0,ta=L[oa],Q;for(Q in ta)Aa=ta[Q];"result"==oa&&(ta=void 0,ta="<>"==K?ba+">="+Z[0]+" and "+ba+"<="+Z[1]:ba+K+Z,pa.push({id:Aa,variable:"variables."+Aa,value:ta}))}0<pa.length&&(k.setIgnoreOverlap(!0),
k.synchBoundValue(1,pa));N.screenPlugsParent.style.display="none"}var z=c.plugs,H=z.style,C=z.unit,U=z.minValue,J=z.maxValue;g=z.selectValue;var G=c.title,B=z.errorLabel,L=z.bindMap,ba=z.screenField;C||(C="%");U||(U=-100);J||(J=100);g||(g=[{name:"\u5927\u4e8e",value:0},{name:"\u5c0f\u4e8e",value:1},{name:"\u7b49\u4e8e",value:2},{name:"\u533a\u95f4",value:3}]);B||(B="\u5f00\u59cb\u503c\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u503c!");L||console.error("\u8bf7\u7ed1\u5b9a\u6307\u5b9a\u53d1\u9001\u6570\u636e\u6e90Bounds.id");
ba||console.error("\u8bf7\u6307\u5b9a\u7b5b\u9009\u5b57\u6bb5");z=r();if(lastClickHeaderPlugs==c&&null!=z.screenPlugsParent)"none"!=z.screenPlugsParent.style.display?z.screenPlugsParent.style.display="none":z.screenPlugsParent.style.display="block",z.screenPlugsDiv.style.left=b.x+"px";else{lastClickHeaderPlugs=c;null!=z.screenPlugsParent&&z.screenPlugsParent.remove();H=getOptionStyle("position: absolute;width: 350px;height: 130px;background-color:#E8F5F1;",H?H:"");H='<div id="screenPlugsDiv" style="'+
H+'"><div id="screenTitleDiv" style="position: absolute;height: 35px;width: 94%;left: 3%;"><label id="screenTitleLable" style="position: absolute;height: 50%;top: 20%;width: 70%;">'+(G+"</label>");H+='<div style="position: absolute;width: 100%;height: 5%;background-color: #48B181;bottom: 0px;"></div>';H+="</div>";H+='<div id="screenConditionDiv" style="position: absolute;width: 90%;height: 45%;top: 27%;left: 5%;">';H+='<div id="screenSelectParent" style="position: absolute;height: 70%;width: 55%; top: 15%;">';
H+='<select id="screenSelectId" class="select-pointOfInterest">';for(G=0;G<g.length;G++)z=g[G].nameProperty,H=null!=z&&null!=xLanguage.langMap[z]?H+('<option value="'+g[G].value+'" data-lang="'+z+">"+xLanguage.langMap[z]+"</option>"):H+('<option value="'+g[G].value+'">'+g[G].name+"</option>");H+="</select>";H+='<div class="scrren-after-select-parent">';H+='<label  class="screen-type-select">\u25bc</label>';H+="</div>";H+="</div>";H+='<div id="screenSingleDiv" style="position: absolute;height: 70%;width: 40%; top: 15%;left: 60%;">';
H+='<div class="scrren-before-parent">';H+='<label class="scrren-number-select-before" id="screenSingleSub">-</label>';H+="</div>";H+='<input type="text" style="position: absolute;height:calc(100% - 2px);width: 60%;left: 19%; text-align: center;border:1px solid #48B181;background-color: transparent;" id="singleInputId" />';H+='<div class="scrren-after-parent">';H+='<label class="scrren-number-select-after" id="screenSingleAdd">+</label>';H+="</div>";H+="</div>";H+="</div>";H+='<div id="screenRangeDiv" style="position: absolute;width: 100%;height: 30%;top: 41%;background-color: transparent; display: none;">';
H+='<label style="position: absolute;height: 30%;width: 40%;top: 0;left: 5%;text-align: center;font-size: 15px;">\u5f00\u59cb</label>';H+='<div style="position: absolute;height: 60%;width: 40%; top: 30%;left:5%">';H+='<div class="scrren-before-parent">';H+='<label  class="scrren-number-select-before"  id="screenBeginMutSub">-</label>';H+="</div>";H+='<input type="text" style="position: absolute;height:calc(100% - 2px);width: 60%;left: 19%; text-align: center;border:1px solid #48B181;background-color: transparent;" id="beginRangeInputId" />';
H+='<div class="scrren-after-parent">';H+='<label class="scrren-number-select-after" id="screenBeginMutAdd">+</label>';H+="</div>";H+="</div>";H+='<label style="position: absolute;height: 30%;width: 40%;top: 0;right:5%;text-align: center;font-size: 15px;">\u7ed3\u675f</label>';H+='<div style="position: absolute;height: 60%;width: 40%; top: 30%;right: 5%;">';H+='<div class="scrren-before-parent">';H+='<label  class="scrren-number-select-before" id="screenEndMutSub">-</label>';H+="</div>";H+='<input type="text" style="position: absolute;height:calc(100% - 2px);width: 60%;left: 19%; text-align: center;border:1px solid #48B181;background-color: transparent;" id="endRangeInputId"/>';
H+='<div class="scrren-after-parent">';H+='<label class="scrren-number-select-after"  id="screenEndMutAdd">+</label>';H+="</div>";H+="</div>";H+="</div>";H+='<div style="position: absolute;height: 10%;top: 70%;width: 100%;background-color: transparent;pointer-events:none;">';H+='<label style="text-align: center;position: absolute;width: 80%;left: 10%;height: 100%;font-size: 13px;user-select: none;color: red;display: none;" id="errorLabel">'+B+"</label>";H+="</div>";H+='<div style="position: absolute;height: 30%;top: 71%;width: 100%;background-color:transparent;" id="submitScreenDiv">';
H=null!=xLanguage.langMap.listPulgsOKBtn?H+('<button class="screen-submit-btn"  data-lang="listPulgsOKBtn" id="screenSubmitBtn">'+xLanguage.langMap.listPulgsOKBtn+"</button>"):H+'<button class="screen-submit-btn"  data-lang="listPulgsOKBtn" id="screenSubmitBtn">\u786e\u5b9a</button>';H+="</div>";H+="</div>";g=document.createElement("div");g.id="parentScreenDivId";g.innerHTML=H;a.appendChild(g);var N=r(),E=N.screenPlugsDiv;E.style.left=b.x+"px";E.style.top=b.y+"px";var V=N.screenSelect,F=N.screenRangeDiv,
M=N.screenSingleDiv,X=N.screenSelectParent,aa=N.submitScreenDiv,ia=N.screenConditionDiv,fa=N.singleInputDom,T=N.beginRangeInputDom,Y=N.endRangeInputDom;fa.oninput=function(K){A(K)};T.oninput=function(K){A(K)};Y.oninput=function(K){A(K)};fa.value=p(f(U.toString()));T.value=p(f(U.toString()));Y.value=p(f(J.toString()));a=N.screenSingleAdd;N.screenSingleSub.onclick=function(){q("singleInputId","sub")};a.onclick=function(){q("singleInputId","add")};a=N.screenBeginMutAdd;N.screenBeginMutSub.onclick=function(){q("beginRangeInputId",
"sub")};a.onclick=function(){q("beginRangeInputId","add")};a=N.screenEndMutAdd;N.screenEndMutSub.onclick=function(){q("endRangeInputId","sub")};a.onclick=function(){q("endRangeInputId","add")};var O=N.errorLabel;N.screenSubmitBtn.onclick=function(){u()};V.onchange=function(){"<>"==this.value?(F.style.display="block",M.style.display="none",X.style.width="100%",E.style.height=1.7*E.style.height.replace("px","")+"px",ia.style.height="25%",ia.style.top="15%",aa.style.top="80%",aa.style.height="18%"):
"block"==F.style.display&&(F.style.display="none",M.style.display="block",X.style.width="55%",E.style.height=E.style.height.replace("px","")/1.7+"px",ia.style.top="27%",ia.style.height="45%",aa.style.top="71%",aa.style.height="30%")};fa.onkeydown=T.onkeydown=Y.onkeydown=function(K){var Z=K.currentTarget.id;13==K.which&&u();40==K.which&&q(Z,"sub");38==K.which&&q(Z,"add");xGlobal.keyDown=!0};fa.onkeyup=T.onkeyup=Y.onkeyup=function(){xGlobal.keyDown=!1};document.body.addEventListener("mousedown",function(K){var Z=
r(),pa=c.plugs.rect;if(!("xList"==K.toElement.className&&K.offsetX>=pa.left&&K.offsetX<=pa.left+pa.width&&K.offsetY>=pa.top&&K.offsetY<=pa.top+pa.height)&&Z.screenPlugsParent){for(var oa in Z)if(Z[oa]==K.target)return;Z.screenPlugsParent.style.display="none"}})}}
function getCheckboxList(a,b,c,g,k){function q(v,A){return A.parentNode.id==v?!0:A.parentNode==document.body||null==A.parentNode?!1:q(v,A.parentNode)}g=document.createElement("div");g.style=c.plugs.option.style+"z-index: 10001; position: absolute; left: "+b.x+"px; top: "+b.y+"px;";a.appendChild(g);g.id=c.plugs.id;a=c.plugs.option.element;b=document.createElement("canvas");b.id=a.id||"gangtise";b.className=a.class||"xList";attr=document.createAttribute("style");attr.value=c.plugs.option.style+";position:absolute;margin:0px;padding:0px";
b.setAttributeNode(attr);g.appendChild(b);var f=this;this.id=b.id;this.wrapperId=g.id;k=globalPage.getActivePage();var p=new xList(window,k,b,a.query,null,null,a.variables,a.calls,k.callbacks);a.init&&p.setHeader(a.init.cells);a.toolbars&&p.initToolbars&&p.initToolbars(g,a.toolbars);a.option&&p.setOption(a.option);a.bounds&&p.setBounds(a.bounds);a.initAction&&p.query()&&p.query();k.childList[k.childList.length]={type:"canvas",object:p,container:b,bounds:a.bounds,id:a.id};document.body.addEventListener("mousedown",
function(){var v=c.plugs.rect;"xList"==event.target.className&&event.offsetX>=v.left&&event.offsetX<=v.left+v.width&&event.offsetY>=v.top&&event.offsetY<=v.top+v.height||q(f.wrapperId,event.target)||event.target==document.getElementById(c.plugs.option.element.id||"")||(document.getElementById(c.plugs.id).style.display="none")});this.doConfirm=function(v,A,r){var u=globalPage.getActivePage(),z=u.getObjectByElementId(f.id);v=u.getObjectByElementId(v);z=(z=z.getSelected(A))&&z.data?z.data[A]:[];A={};
A[r]=z;v.setVariablesValue(A);document.getElementById(f.wrapperId).style.display="none"}};function xRichEditor(a,b,c,g,k,q,f){function p(){(new xDialog(window,"\u65b0\u5efa\u7f51\u7edc\u56fe\u7247\u94fe\u63a5",this,500,112)).doInput([{name:"\u94fe\u63a5",labelWidth:56,width:360,value:"http://",operator:"insertimage"}],A)}function v(){(new xDialog(window,"\u65b0\u5efa\u7f51\u7edc\u94fe\u63a5",this,500,112)).doInput([{name:"\u94fe\u63a5",labelWidth:56,width:360,value:"http://",operator:"createlink"}],A)}function A(ta){ba.contentDocument.execCommand(ta[0].operator,!1,ta[0].value)}function r(){E.style.display=
"none";ba.contentDocument.execCommand(this.getAttribute("data-name"),!1,this.getAttribute("data-value"))}function u(){B&&B.callback_onSubmit&&B.callback_onSubmit(oa())}var z=this;this.page=b;var H=!1;this.callbacks=q;this.queryIndex=this.callbacks.getQueryIndex(this);var C=xDeepCopy(g),U,J=0,G=xDeepCopy(k);null==G&&(G={});var B={readOnly:!1,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,backgroundColor:"#fff",border:"1px solid #888",
callback_onSubmit:null,addationButton:null},L,ba,N,E,V,F=function(){ba=a.document.createElement("iframe");c.appendChild(ba);var ta=ba.contentDocument;N=ta.body;ba.frameborder="0";var Q="position:absolute;display:block;top:1px;bottom:1px;left:1px;right:1px;margin:0px;padding:0px;border:0px solid #000;background-color:"+(B.backgroundColor+";");ba.style=Q;ba.onmouseover=z.onMouseOver;ba.onmouseout=z.onMouseOut;ta=ta.head;Q=document.createElement("style");Q.type="text/css";ta.appendChild(Q);ta=document.createTextNode("\n        .button{\n            border: none;\n            background: transparent;\n            padding: 1px;\n            border-radius: 2px;\n            font-size:11px;\n            outline: none;\n        }\n        .button:focus,\n        .button:active,\n        .button:active:focus,\n        {\n            border: none;\n            background: rgba(220,220,220,0.88);\n            padding: 1px;\n            border-radius: 2px;\n            font-size:11px;\n            outline: none;\n        }\n        .button:hover{\n            background: rgba(220,220,220,0.88);\n            color:#000;\n            font-size:10px;\n        }\n\n        ");
Q.appendChild(ta);ta=[[{title:"\u5b57\u4f53",width:48,option:{popupMenu:{boxWidth:128,callback_popup:ia}}},{title:"Aa",width:32,option:{popupMenu:{boxWidth:48,callback_popup:fa}}},{title:"\u270e",width:24,dataset:{name:"forecolor"}},{title:"\u25a8",width:24,dataset:{name:"backcolor"}},{title:"B",width:24,dataset:{name:"bold"},callback:r},{title:"I",width:24,dataset:{name:"italic"},callback:r},{title:"U",width:24,dataset:{name:"underline"},callback:r},{title:"\u2632",width:24,option:{popupMenu:{boxWidth:80,
callback_popup:T}}},{title:"\u2630",width:24,option:{popupMenu:{boxWidth:80,callback_popup:Y}}},{title:"\u33a1",width:24,option:{popupMenu:{boxWidth:80,callback_popup:O}}},{title:"\u21e5",width:24,dataset:{name:"indent"},callback:r},{title:"\u21e4",width:24,dataset:{name:"outdent"},callback:r},{title:"\u21bb",width:24,dataset:{name:"removeformat"},callback:r},{title:"\u2026",width:24,option:{popupMenu:{boxWidth:120,callback_popup:K}}},{title:"\u4fdd\u5b58",width:40,callback:u}]];for(Q=0;Q<ta[0].length;Q++)ta[0][Q].title&&
(ta[0][Q].type="xSaftButton");L=document.createElement("div");L.id="richedit";Q="position:absolute;left:0px;right:0.5px;bottom:1px;top:0px;display:block;overflow:auto;margin-left:"+(B.marginLeft+"px;");Q+="margin-right:"+B.marginRight+"px;";Q+="margin-top:"+B.marginTop+"px;";Q+="margin-bottom:"+B.marginBottom+"px;";Q+="padding-left:"+B.paddingLeft+"px;";Q+="padding-right:"+B.paddingRight+"px;";Q+="padding-top:"+B.paddingTop+"px;";Q+="padding-bottom:"+B.paddingBottom+"px;";Q+="background-color:"+B.backgroundColor+
";";Q+="border:"+B.border+";";L.style=Q;N.appendChild(L);if(B&&1!=B.readOnly){L.contentEditable=!0;L.style.top="26px";var sa=4;for(Q=0;Q<ta[0].length;Q++){var ra=document.createElement("button");ra.className="button";ra.innerText=ta[0][Q].title;ta[0][Q].dataset&&(ra.dataset.name=ta[0][Q].dataset.name,ra.dataset.value=ta[0][Q].dataset.value);if(ta[0][Q].callback)ra.onclick=ta[0][Q].callback;else if(ta[0][Q].option&&ta[0][Q].option.popupMenu&&ta[0][Q].option.popupMenu.callback_popup){var la=ta[0][Q].option.popupMenu.callback_popup();
ra.dataset.menu=JSON.stringify(la);ta[0][Q].option.popupMenu.boxWidth&&(ra.dataset.menuWidth=ta[0][Q].option.popupMenu.boxWidth)}ra.onmousemove=Z;ra.style="position:absolute;top:1px;left:"+sa+"px;width:"+(ta[0][Q].width-4)+"px;height:23px";N.appendChild(ra);sa+=ta[0][Q].width-4}}B.addationButton&&(ra=document.createElement("button"),ra.innerText=B.addationButton.option.title,Q=ra.style="position:absolute;top:1px;right:8px;width:24px;height:23px;border:0px solid #aaa;",B.addationButton.option.icon&&
"Down"==B.addationButton.option.icon&&(Q+="top:3px;height:20px;width:20px;font:16px Arial Hebrew;background-color:#FFF;font-weight:500;",ra.innerText="\u2228"),ra.className="button",ra.dataset.name="addation",ra.onclick=M,ra.style=Q,N.appendChild(ra));E=document.createElement("div");E.style.display="none";N.appendChild(E)};this.setOption=function(ta){xCopyAllTo(ta,B);if(L){var Q=L.innerHTML;c.removeChild(ba)}F();Q&&(L.innerHTML=Q)};this.resize=function(){var ta=c.offsetWidth,Q=c.offsetHeight;ba.style.left=
"0px";ba.style.top="0px";ba.style.height=Q+"px";ba.style.width=ta+"px"};F();var M=function(){X(this.offsetLeft,this.offsetTop)},X=function(ta,Q){if(B.addationButton&&B.addationButton.option&&B.addationButton.option)if(B.addationButton.option.option.callback)B.addationButton.option.option.callback(B.addationButton);else{var sa;if(sa=B.addationButton.option.option.popupMenu.callback_popup?B.addationButton.option.option.popupMenu.callback_popup(B.addationButton):B.addationButton.option.option.popupMenu.vBox){E.innerHTML=
"";for(var ra=0,la=0;la<sa.length;la++)if("splitLine"!=sa[la][0].type&&0!=sa[la][0].enable){var Na=document.createElement("button");Na.className="button";Na.innerText=sa[la][0].title;0==sa[la][0].enable&&(Na.disabled="disabled");Na.dataset.addationIndex=la;Na.onclick=aa;Na.onmousemove=Z;Na.onmouseout=pa;Na.style="position:absolute;top:"+ra+"px;height:24px;left:0px;width:180px;border:none;padding-left:16px;text-align:left;";E.appendChild(Na);ra+=24}ra>c.offsetHeight-36&&(ra=c.offsetHeight-36);ta+180>
c.offsetWidth-6&&(ta=c.offsetWidth-6-180);E.style="display:block;position:absolute;background-color:#fff;overflow:auto;left:"+ta+"px;top:"+(Q+20)+"px;height:"+ra+"px;width:180px;border:1px solid #ddd;box-shadow:0px 3px 6px #888"}}},aa=function(){var ta=this.getAttribute("data-addation-index");if(B.addationButton&&B.addationButton.option&&B.addationButton.option){var Q=B.addationButton.option.option.popupMenu.callback_popup?B.addationButton.option.option.popupMenu.callback_popup(B.addationButton):
B.addationButton.option.option.popupMenu.vBox;ta<Q.length&&Q[ta][0].callback&&Q[ta][0].callback({option:Q[ta][0]})}},ia=function(){return[[{title:"\u5b8b\u4f53",dataset:{name:"fontname",value:"\u5b8b\u4f53-\u7b80"},callback:r}],[{title:"\u6977\u4f53",dataset:{name:"fontname",value:"\u6977\u4f53-\u7b80"},callback:r}],[{title:"\u9ed1\u4f53",dataset:{name:"fontname",value:"\u9ed1\u4f53-\u7b80"},callback:r}],[{title:"\u5fae\u8f6f\u96c5\u9ed1",dataset:{name:"fontname",value:"Microsoft YaHei"},callback:r}],
[{title:"Arial",dataset:{name:"fontsname",value:"Arial"},callback:r}],[{title:"sans-serif",dataset:{name:"fontsname",value:"sans-serif"},callback:r}],[{title:"Tahoma",dataset:{name:"fontsname",value:"Tahoma"},callback:r}],[{title:"Verdana",dataset:{name:"fontsname",value:"Verdana"},callback:r}],[{title:"Helvetica Neue",dataset:{name:"fontsname",value:"Helvetica Neue"},callback:r}]]},fa=function(){return[[{title:"1",dataset:{name:"fontsize",value:0},callback:r}],[{title:"2",dataset:{name:"fontsize",
value:1},callback:r}],[{title:"3",dataset:{name:"fontsize",value:2},callback:r}],[{title:"4",dataset:{name:"fontsize",value:3},callback:r}],[{title:"5",dataset:{name:"fontsize",value:4},callback:r}],[{title:"6",dataset:{name:"fontsize",value:5},callback:r}],[{title:"7",dataset:{name:"fontsize",value:6},callback:r}],[{title:"8",dataset:{name:"fontsize",value:7},callback:r}],[{title:"9",dataset:{name:"fontsize",value:8},callback:r}]]},T=function(){return[[{title:"\u5de6\u5bf9\u9f50",dataset:{name:"justifyLeft"},
callback:r}],[{title:"\u5c45\u4e2d",dataset:{name:"justifyCenter"},callback:r}],[{title:"\u53f3\u5bf9\u9f50",dataset:{name:"justifyRight"},callback:r}]]},Y=function(){return[[{title:"\u6709\u5e8f\u53f7",dataset:{name:"insertorderedlist"},callback:r}],[{title:"\u65e0\u5e8f\u53f7",dataset:{name:"insertunorderedlist"},callback:r}]]},O=function(){return[[{title:"\u4e0a\u6807",dataset:{name:"superscript"},callback:r}],[{title:"\u4e0b\u6807",dataset:{name:"subscript"},callback:r}]]},K=function(){return[[{title:"\u63d2\u5165\u6bb5\u843d",
dataset:{name:"insertparagraph"},callback:r}],[{title:"\u63d2\u5165\u7f51\u7edc\u56fe\u7247",dataset:{name:"insertimage"},callback:p}],[{title:"\u63d2\u5165\u94fe\u63a5",dataset:{name:"createlink"},callback:v}]]},Z=function(ta){if(V!=ta.target&&ta.target!=E&&ta.target.parentElement!=E){var Q=this.getAttribute("data-name"),sa=this.getAttribute("data-menu");if(sa){sa=JSON.parse(sa);var ra=JSON.parse(this.getAttribute("data-menu-width"));V=ta.target;Q=sa;sa=ta.target.offsetLeft;ta=ta.target.offsetTop;
E.innerHTML="";if(null==ra||48>ra)ra=48;for(var la=0,Na=0;Na<Q.length;Na++){var Wa=document.createElement("button");Wa.className="button";Wa.innerText=Q[Na][0].title;Q[Na][0].dataset&&(Wa.dataset.name=Q[Na][0].dataset.name,Wa.dataset.value=Q[Na][0].dataset.value);Wa.onclick=Q[Na][0].dataset&&"createlink"==Q[Na][0].dataset.name?v:Q[Na][0].dataset&&"insertimage"==Q[Na][0].dataset.name?p:r;Wa.onmousemove=Z;Wa.onmouseout=pa;Wa.style="position:absolute;top:"+la+"px;height:24px;left:0px;width:"+(ra-0)+
"px;border:none;padding-left:16px;text-align:left;";E.appendChild(Wa);la+=24}la>c.offsetHeight-36&&(la=c.offsetHeight-36);E.style="display:block;position:absolute;background-color:#fff;overflow:auto;left:"+sa+"px;top:"+(ta+24)+"px;height:"+la+"px;width:"+ra+"px;border:1px solid #ddd;box-shadow:0px 3px 6px #555"}else if("forecolor"==Q||"backcolor"==Q){sa=ta.target.offsetLeft;ta=ta.target.offsetTop;ra=[[{dataset:{value:"#f00"}},{dataset:{value:"#0f0"}},{dataset:{value:"#00f"}},{dataset:{value:"#ff0"}},
{dataset:{value:"#0ff"}},{dataset:{value:"#f0f"}},{dataset:{value:"#fff"}}],[{dataset:{value:"#b00"}},{dataset:{value:"#0b0"}},{dataset:{value:"#00b"}},{dataset:{value:"#bb0"}},{dataset:{value:"#0bb"}},{dataset:{value:"#b0b"}},{dataset:{value:"#bbb"}}],[{dataset:{value:"#800"}},{dataset:{value:"#080"}},{dataset:{value:"#008"}},{dataset:{value:"#880"}},{dataset:{value:"#088"}},{dataset:{value:"#808"}},{dataset:{value:"#888"}}],[{dataset:{value:"#400"}},{dataset:{value:"#040"}},{dataset:{value:"#004"}},
{dataset:{value:"#440"}},{dataset:{value:"#044"}},{dataset:{value:"#404"}},{dataset:{value:"#000"}}]];for(la=0;la<ra.length;la++)for(Na=0;Na<ra[la].length;Na++)ra[la][Na].dataset.name=Q,ra[la][Na].callback=r;E.innerHTML="";var na=5;for(la=0;la<ra.length;la++){Wa=3;for(Na=0;Na<ra[la].length;Na++){var ha=document.createElement("button");ha.className="button";ha.dataset.name=Q;ha.dataset.value=ra[la][Na].dataset.value;ha.onclick=r;ha.onmousemove=Z;ha.onmouseout=pa;ha.style="position:absolute;top:"+na+
"px;height:14px;left:"+Wa+"px;width:14px;margin:0px;padding:0px;border:1px solid #ddd;background-color:"+ra[la][Na].dataset.value+";";E.appendChild(ha);Wa+=20}na+=20}na>c.offsetHeight-36&&(na=c.offsetHeight-36);E.style="display:block;position:absolute;background-color:#fff;overflow:auto;left:"+sa+"px;top:"+(ta+24)+"px;height:"+na+"px;width:140px;border:1px solid #ddd;box-shadow:0px 3px 6px #555";E.onmouseout=pa}else"addation"==Q&&B.addationButton&&B.addationButton.option&&B.addationButton.option?
X(ta.target.offsetLeft,ta.target.offsetTop):(V=null,E.style.display="none")}},pa=function(ta){if(!ta.toElement||ta.toElement!=E&&ta.toElement.parentElement!=E)V=null,E.style.display="none"};L.onclick=function(){E.style.display="none"};var oa=function(){return{option:B,variables:G,target:L,page:z.page}},Aa=function(ta,Q){if(""==ta||0<=ta.indexOf("{{ "))if(Q.callback_errorCondition){if(ta=Q.callback_errorCondition(Q,ta,oa()),typeof ta!=ta==null)return!1}else if(1==Q.filterNull){var sa=ta.split("and");
ta=[];Q="";for(var ra=0;ra<sa.length;ra++)-1==sa[ra].indexOf("{{")&&ta.push(sa[ra]);for(sa=0;sa<ta.length;sa++)Q=0==sa||sa==Q.length-1?Q+ta[sa]:Q+("and "+ta[sa]);ta=Q}else return;return ta};this.query=function(ta){if(null!=C){var Q=C;-1!=Q.indexOf("{{")&&(Q=replaceVariablesValue(Q,G,U));if(!(null==Q||Q[0]&&Q[0].callback_object||1!=ta&&0==H)){ta=!1;for(var sa=0;sa<Q.length;sa++)if(null==Q[sa]||Q[sa].queryStatus)Q[sa]&&1==Q[sa].queryStatus&&(Q[sa].queryStatus=2);else{var ra=null;if(Q[sa].server&&""!=
Q[sa].server){var la=Q[sa].server.slice(10);G&&G[la]&&""!=G[la]&&(ra=G[la])}la=null;Q[sa].http&&(la=replaceVariablesValue(Q[sa].http,G,U));if(Q[sa].sql&&(null==la||"http"!=la.substr(0,4).toLowerCase())){var Na=replaceVariablesValue(Q[sa].sql,G,U,null,windowLimit);tableName[sa]=parseTableName(Na);la=Aa(Na,Q[sa]);if(null!=la&&(Na=la,!(null==Na||""==Na||0<=Na.indexOf("{{ ")))){if(null==Q[sa].query||Q[sa].query.script!=Na)ta=isSynBound=!0,Q[sa].queryStatus=1,1==noDefinedHeader&&(header=null,isInitHeader=
!1);null==Q[sa].query&&(ta=!0,Q[sa].queryStatus=1);1==Q[sa].queryStatus&&(Q[sa].query={script:Na,limit:limit,server:ra})}}else if(Q[sa].http&&la&&""!=la){Q[sa].field&&replaceVariablesValue(Q[sa].field,G,U);var Wa=Q[sa].script?replaceVariablesValue(Q[sa].script,G,U):replaceVariablesValue(Q[sa].condition,G,U);ra=Aa(Wa,Q[sa]);if(null!=ra&&(Wa=ra,!(null==Wa||""==Wa||0<=Wa.indexOf("{{ "))&&(Na=";"+Wa,null==Q[sa].query||Na!=Q[sa].query.script))){if(null==Q[sa].query||Na!=Q[sa].query.script)0<sa&&Q[0].http||
J++;Q[sa].queryStatus=1;Q[sa].query={script:Na,limit:null,field:"",condition:Wa,id:J,server:la};z.callbacks.sendHttpQuery(z.queryIndex,Q,sa,z.setTable);_condition=Wa}}}ta&&(z.callbacks.sendQuery(z.queryIndex,Q,z.setTable),_condition=Wa)}}};this.setTable=function(ta,Q,sa,ra){U=xDeepCopy(ta);if((ta=C)&&U)for("String"==C.constructor.name&&-1!=C.indexOf("{{")&&(ta=replaceVariablesValue(ta,G,U)),ra=0;ra<ta.length;ra++)ta[ra]&&U[ra]&&U[ra].updateCounter!=ta[ra].updateCounter&&(ta[ra].callback_onMessage&&
ta[ra].callback_onMessage(U[ra],Q,sa,oa(),U),ta[ra].queryStatus=null)};this.show=function(){1!=H&&(H=!0)};this.hidden=function(ta){0!=H&&(H=!1)};this.isShow=function(){return H};this.draw=function(){};this.onMouseOver=function(ta){B.callback_mouseOver&&B.callback_mouseOver(ta,oa())};this.onMouseOut=function(ta){B.callback_mouseOut&&B.callback_mouseOut(ta,oa())};this.destroy=function(){c.removeChild(ba)}};function xFootStatus(a,b,c){var g=this,k,q,f,p,v,A=0;this.insertStatusDiv=function(r,u){u=void 0===u?!1:u;if(null!=r)return null==p&&(p=[]),p[p.length]=r,k.appendChild(r),f.style.right=A+32*p.length,1==u&&globalPage.addNetInformationDiv(r),r};this.removeStatusDiv=function(r){if(p)for(var u=0;u<p.length;u++)if(p[u]==r){for(var z=[],H=0;H<p.length;H++)u!=H&&(z[z.length]=p[H]);k.removeChild(r);p=z;f.style.right=A+32*p.length;return!0}return!1};this.newStatusCanvas=function(r,u,z){null==v&&(v=[]);var H=
a.document.createElement("div"),C=a.document.createAttribute("style");C.value="position:absolute;"+r;H.setAttributeNode(C);f.appendChild(H);r=a.document.createElement("canvas");C=a.document.createAttribute("style");C.value="position:absolute;margin:0px;padding:0px;top:0px;left:0px;bottom:0px;right:0px";r.setAttributeNode(C);r.className="xStatus";H.appendChild(r);C=u.scheme?u.scheme:"normal";if(z)switch(z){case "xGrid":r=new xGrid(a,g,r,u.query,u.submit,u.variables,u.calls,b.getCallbacks(),null);r.setOption(u.option);
r.setBounds(u.bounds);r.setGrid(u.init);break;default:console.error("\u672a\u5b9e\u73b0\u7684\u88c5\u8f7d\u7c7b\u578b, "+widgetType);return}else r=new xStatus(a,r,b,u.query,u.variables,u.calls,b.getCallbacks()),r.setHeader(u.init.cells),r.setBounds(u.bounds),z="xStatus";v[v.length]={div:H,canvas:r,scheme:C,class:z};g.refresh();return r};this.deleteStatusCanvas=function(r){if(v)for(var u=0;u<v.length;u++)if(v[u].status==r){r=[];for(var z=0;z<v.length;z++)u!=z?r[r.length]=v[z]:f.removeChild(v[z].div);
v=r;return!0}return!1};this.refresh=function(){if(v)for(var r=0;r<v.length;r++)v[r].canvas.refresh()};this.redraw=function(r){if(v)for(var u=0;u<v.length;u++)v[u].canvas.draw(r)};this.setOption=function(r){r&&(k.style.backgroundColor=r.backgroundColor?r.backgroundColor:k.style.backgroundColor,k.style.borderTop=r.borderTop?r.borderTop:k.style.borderTop,k.style.top=r.top?r.top:k.style.top,k.style.right=r.right?r.right:k.style.right,k.style.bottom=r.bottom?r.bottom:k.style.bottom,k.style.left=r.left?
r.left:k.style.left)};this.setStatusOption=function(r){if(v)for(var u=0;u<v.length;u++)v[u].canvas.setOption(r);q&&r.cell.color&&(q.style.color=r.cell.color)};this.setScheme=function(r){var u=r.xFootStatus.normal;u&&g.setOption(u);if(u=r.xStatus.normal){if(v)for(var z=0;z<v.length;z++){var H=v[z],C=H.class;H=H.scheme;"xStatus"==C?v[z].canvas.setScheme(u):null!=C&&null!=H&&v[z].canvas.setScheme(r,H)}u=r.xStatus.normal;q&&u.cell.color&&(q.style.color=u.cell.color)}};this.getCanvasList=function(){return v};
(function(r){k=a.document.createElement("div");b.getMainBody().appendChild(k);var u=a.document.createAttribute("style");u.value="border-top:1px #4D4D4D solid;z-index:1000;background-color:#000;color:#111;margin:0px;padding:0px;position:absolute;left:0px;bottom:0px;right:0px;height:"+b.getBorderBottomPos()+"px;";k.setAttributeNode(u);xGlobal.pageMinWidth&&(k.style.minWidth=xGlobal.pageMinWidth+"px",xGlobal.minPageList.frame.push(k));1==r&&(q=a.document.createElement("div"),k.appendChild(q),u=a.document.createAttribute("style"),
r="position:absolute;right:0px;top:0;bottom:0px;width:80px;margin:0px;padding:0px;opacity:1;color:#111;text-align:center;line-height:"+(b.getBorderBottomPos()+"px;font-size:12px;"),u.value=r+"font-family:Helvetica Neue;cursor:default",q.setAttributeNode(u),q.addEventListener("click",popupCalendar),A=80,null==clockList&&(clockList=[]),clockList[clockList.length]=q);f=a.document.createElement("div");u=a.document.createAttribute("style");u.value="position:absolute;left:2px;top:3px;bottom:0px;right:"+
A+"px;";f.setAttributeNode(u);k.appendChild(f)})(void 0===c?!0:c)};var getEqumentInformation=function(a){};
function xStatus(a,b,c,g,k,q,f){function p(ia,fa){if(C.field&&C.data&&0<C.data.length&&0<=ia&&ia<C.field.length&&0<=fa)if("row"==C.info.rank){if(fa<C.info.rows){var T=C.field[ia][0].toLowerCase();return{type:C.field[ia][1],value:C.data[fa][ia],flags:C.flags&&C.flags[T]?C.flags[T][fa]:null,status:C.dataStatus?C.dataStatus[fa]:null}}}else if(fa<C.data[ia].length)return T=C.field[ia][0].toLowerCase(),{type:C.field[ia][1],value:C.data[ia][fa],flags:C.flags&&C.flags[T]?C.flags[T][fa]:null,status:C.dataStatus?
C.dataStatus[fa]:null};return{type:"c",value:void 0}}var v=this;this.canvas=b;var A;this.enableActive=!1;var r=xDeepCopy(g),u=xDeepCopy(k);this.callInfo=q;this.callbacks=f;this.queryIndex=this.callbacks.getQueryIndex();var z,H,C,U,J=!0,G=0,B=0,L=0,ba={cell:{backgroundColor:"transparent",borderColor:"#bbb",color:"#000",colors:xGlobal.colors,fontFamily:xGlobal.systemFont,fontSize:13},rowHeight:26,backgroundColor:"transparent",borderColor:"#ddd",colSplitLineColor:"#ddd"},N,E=!1,V=360;L=0;this.getParentDiv=
function(){return b};this.setBounds=function(ia){z=ia};this.query=function(){for(var ia=0;ia<r.length;ia++){var fa=replaceVariablesValue(r[ia].sql,u,H),T;r[ia].server&&u&&u[r[ia].server.slice(10)]&&(T=u[r[ia].server.slice(10)]);r[ia].queryStatus=1;r[ia].query={script:fa,server:T}}"undefined"!==typeof GLink_client?GLink_client.sharedInstance().sendMessage("query","footer","foot",0,r,v.setTable):v.callbacks.sendQuery(v.queryIndex,r,v.setTable)};this.setVariablesValue=function(ia,fa){var T=!1,Y;for(Y in u)for(var O=
0;O<ia.length;O++)if(ia[O][0]==Y){u[Y]=fa[O];T=!0;break}1==T&&v.query()};this.setOption=function(ia){xCopyTo(ia,ba);aa(!0)};this.setHeader=function(ia){if(N)for(var fa=0;fa<N.length;fa++)if(N[fa].cell){for(var T=0;T<N[fa].cell.length;T++)for(var Y=0;Y<N[fa].cell[T].length;Y++)delete N[fa].cell[T][Y];N[fa].cell=void 0}N=[];for(fa=0;fa<ia.length;fa++)N[fa]=ia[fa];E=!1;F()};var F=function(){if(C&&N){E=!0;for(var ia=0,fa=V=0;fa<N.length;fa++){N[fa].x=ia;N[fa].xCell=[];N[fa].yCell=[];N[fa].index=[];for(var T=
0;T<N[fa].cells.length;T++)N[fa].index[T]=X(C,N[fa].cells[T].field),N[fa].xCell[T]=2,N[fa].yCell[T]=16*T;null!=N[fa].graph&&(N[fa].graph.index=X(C,N[fa].graph.value.field));ia+=N[fa].width}V=ia+6}},M=function(ia,fa,T){if(0<=ia&&ia<N.length){void 0==N[ia].cell&&(N[ia].cell=[]);void 0==N[ia].cell[fa]&&(N[ia].cell[fa]=[]);var Y=0,O=ba.rowHeight,K=0;if(1<N[ia].cells.length){for(var Z=K=0;Z<N[ia].cells.length;Z++)K=void 0==N[ia].cells[Z].fontSize?K+14:K+parseInt(N[ia].cells[Z].fontSize),K+=2;K=(ba.rowHeight-
K)/2}for(Z=0;Z<N[ia].cells.length;Z++){var pa=!1;void 0==N[ia].cell[fa][Z]&&(N[ia].cell[fa][Z]=new xCell(v,N[ia].cells[Z]),pa=!0);if(1==T||1==pa){1<N[ia].cells.length&&void 0==N[ia].cells[Z].height&&(O=void 0==N[ia].cells[Z].fontSize?14:parseInt(N[ia].cells[Z].fontSize));N[ia].cell[fa][Z].geometry={left:0,top:Y+K,width:N[ia].width,height:O};for(var oa in N[ia].cells[Z])pa=N[ia].cells[Z][oa],"border"==oa?N[ia].cell[fa][Z].borderLeft=N[ia].cell[fa][Z].borderTop=N[ia].cell[fa][Z].borderRight=N[ia].cell[fa][Z].borderBottom=
N[ia].cells[Z].border:N[ia].cell[fa][Z][oa]=pa}pa=p(N[ia].index[Z],fa);N[ia].cell[fa][Z].setValue(pa);Y+=O+2}}},X=function(ia,fa){if(ia&&ia.field)for(var T=0;T<ia.field.length;T++)if(ia.field[T][0].toLowerCase()==fa.toLowerCase())return T;return-1};this.setTable=function(ia,fa){null!=ia&&null!=ia[0]&&null!=ia[0].table&&(H=xDeepCopy(ia),L=xGlobal.refreshCounter,C=H[0].table,U=C.info.totalRows,C.info.begin--,0>C.info.begin&&(C.info.begin=0),0==E&&F(),aa(),J=!0,v.draw())};this.setScheme=function(ia){xCopyAllTo(ia,
ba);if(N)for(var fa=0;fa<N.length;fa++)if(void 0!=N[fa].cell)for(var T=0;T<N[fa].cell.length;T++)for(var Y=0;Y<N[fa].cell[T].length;Y++)N[fa].cell[T][Y]&&N[fa].cell[T][Y].setScheme(ia);v.draw(!0)};var aa=function(ia){ia=void 0===ia?!1:ia;if(N)for(var fa=0;fa<N.length;fa++)if(void 0!=N[fa].cell)for(var T=0;T<N[fa].cell.length;T++)M(fa,T,ia)};this.refresh=function(){4>xGlobal.refreshCounter-L&&this.draw(!0)};this.draw=function(ia){var fa=b.parentElement.offsetWidth,T=b.parentElement.offsetHeight;1==
(void 0===ia?!1:ia)&&(J=!0);if(null!=b&&(0!=J||G!=fa||B!=T)&&(getEqumentInformation(b),G=fa,B=T,J=!1,null==A&&(A=b.getContext("2d")),ia=getPixelRatio(A),b.width=fa*ia,b.height=T*ia,b.style.left=0,b.style.top=0,b.style.width=fa+"px",b.style.height=T+"px",1<ia&&A.setTransform(ia,0,0,ia,0,0),A.translate(.5,.5),A.lineWidth=1,A.beginPath(),A.fillStyle=ba.backgroundColor,A.strokeStyle=ba.borderColor,A.fillRect(-.5,-.5,fa+1,T+1),A.closePath(),null!=C&&void 0!=C.data&&void 0!=N)){A.beginPath();A.fillStyle=
ba.cell.color;A.font="14px "+xGlobal.systemFont;A.textBaseline="top";for(var Y=0;Y<U;Y++){for(var O=0;O<N.length;O++){ia=N[O].x+V*Y;if(null!=N[O].graph&&"progress"==N[O].graph.type){var K=p(N[O].graph.index,Y-C.info.begin);if(void 0!=K){A.beginPath();var Z=K.value;0<K.value?A.fillStyle=ba.cell.colors[1]:(A.fillStyle=ba.cell.colors[2],Z*=-1);A.globalAlpha=N[O].graph.alpha?N[O].graph.alpha:.5;null!=N[O].graph.value.factor&&(Z*=N[O].graph.value.factor);Z=N[O].width*Z/100;Z>N[O].width&&(Z=N[O].width);
A.fillRect(ia,0,Z,ba.rowHeight);A.fill();A.closePath();A.globalAlpha=1}}for(K=0;K<N[O].index.length;K++)if(0<=N[O].index[K]){Z=ia+N[O].xCell[K];if(Z>=fa)break;var pa=Y-C.info.begin;0<=pa&&pa<C.info.rows&&(void 0!=N[O].cell&&void 0!=N[O].cell[Y]&&void 0!=N[O].cell[Y][K]||M(O,pa),N[O].cell[pa][K].setOffset(Z,0),N[O].cell[pa][K].draw(A,ba.cell,!1))}}ia=N[0].x+V*Y;ba.colSplitLineColor&&(A.beginPath(),A.strokeStyle=ba.colSplitLineColor,A.moveTo(ia-3,5),A.lineTo(ia-3,T-7),A.stroke(),A.closePath());if(ia>=
fa)break}A.closePath()}};this.onDblClick=function(ia){for(var fa=0;fa<U;fa++){var T=V*fa;if(ia.offsetX>=T&&ia.offsetX<T+V){ia=v.callInfo?v.callInfo.doDblClick:void 0;if(void 0!=ia)for(fa=getBoundValues(z,u,H,fa),v.setSynchBoundValue(fa),fa=q.doDblClick,ia=0;ia<fa.length;ia++)fa[ia].action?v.doAction(fa[ia].action):fa[ia].callback&&fa[ia].callback({variables:u,target:v});break}}};this.doAction=function(ia){doWidgetAction(ia,null,parent,u,v)};this.setSynchBoundValue=function(ia){if(void 0!=z&&0<z.length&&
ia)for(var fa=0;fa<ia.length;fa++)for(var T=0;T<z.length;T++)if((null==z[T].type||"synch"==z[T].type||"receive"==z[T].type)&&z[T].id==ia[fa].bound.id&&z[T].variable==ia[fa].bound.variable){if("variables."==ia[fa].bound.variable.slice(0,10)){T=ia[fa].bound.variable.slice(10);try{if(-1!=T.indexOf(".")){var Y=T.split(".");if(2==Y.length){var O=Y[0],K=Y[1];"Object"==u[O].constructor.name&&u[O][K]!=ia[fa].value&&(u[O][K]=ia[fa].value,variablesChangeQuery=!0)}}else u[T]!=ia[fa].value&&(u[T]=ia[fa].value,
variablesChangeQuery=!0)}catch(Z){console.log(Z)}}else if(ia[fa].bound.variable)try{eval(ia[fa].bound.variable)!=ia[fa].value&&eval(ia[fa].bound.variable+"=boundValue[i].value")}catch(Z){console.log(Z)}break}};b.addEventListener("dblclick",v.onDblClick);v.query()};function xMessageTip(a,b,c,g,k){function q(E,V,F){F=[{type:"xSaftButton",icon:"Up",title:"",height:25,lineHeight:20,width:220,callback:function(){f(E,V)},option:{schemeName:U.showMoreSchemeName,borderRadius:0}}];r.style.height=E.totalHeight+"px";V[V.length-1]=F;V.forEach(function(M,X){0!=X&&1!=X&&X!=V.length-1&&J.forEach(function(aa,ia){M[0].height=aa})});z.setGrid({vBox:V});v.draw();p()}function f(E,V,F){F=[{type:"xSaftButton",icon:"Down",title:"",height:25,lineHeight:20,width:220,callback:function(){q(E,
V)},option:{schemeName:U.showMoreSchemeName,borderRadius:0}}];r.style.height=E.showHeight+"px";V[V.length-1]=F;V.forEach(function(M,X){0!=X&&1!=X&&X!=V.length-1&&G.forEach(function(aa,ia){M[0].height=aa})});z.setGrid({vBox:V});v.draw();p()}function p(){for(var E,V=0;V<xGlobal.xMessageTipList.length;V++)0==V?xGlobal.xMessageTipList[0].getPosition():(E=xGlobal.xMessageTipList[V-1].getPosition(),E=E.top+E.height+8,xGlobal.xMessageTipList[V].setPosition({top:E}))}var v=this,A,r,u,z,H,C,U={wheelOnFocus:!1,
isFocus:!0,isClick:!1,isWheel:!1,isKeyDown:!1,schemeName:C,canMouseSelected:!1,showMoreSchemeName:"noBorderNoBackground",backgroundColor:"transparent",borderColor:"#444",color:"#999",colors:["rgba(255,255,255,1)","#FF503B","#72FFBE","#fff"],cursor:{backgroundColor:"transparent"},fontFamily:xGlobal.systemFont,fontSize:10,lineHeight:25,dragable:!1,marginLeft:10,marginRight:5,marginTop:4,marginBottom:0,enableFocus:!1,setDefaultFocusObject:!1,splitLineColor:"#2F2F2F",keyEnenterTab:!1,tabKey:"",enterOrder:[],
tabOrder:[],closePosition:{top:12,right:30,width:12,height:12,color:"#777"},scroller:{scrollerV:"hidden",scrollerH:"hidden",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"}},J=[],G=[],B,L;this.destroy=function(){z&&z.destroy();u.removeEventListener("mousemove",v.onMouseDown);u.removeEventListener("mousedown",v.onMouseMove);u.removeEventListener("mouseup",v.onMouseUp);parentDiv.removeChild(r)};var ba=function(){var E=function(X){10>X&&(X="0"+X);return X},V=new Date,F=V.getHours(),
M=V.getMinutes();V=V.getSeconds();M=E(M);V=E(V);return F+":"+M+":"+V};this.onMouseOut=function(E){B&&(L=setTimeout(function(){N()},B))};this.onMouseOver=function(){L&&clearTimeout(L)};this.setMessage=function(E,V,F){z&&z.destroy();var M="",X=ba();F&&(F.width&&(r.style.width=F.width+"px"),F.height&&(r.style.height=F.height+"px"),F.borderRadius&&(r.style.borderRadius=F.borderRadius),F.boxShadow&&(r.style.boxShadow=F.boxShadow),F.time&&(X=F.time),F.title&&(M=F.title),F.option&&z.setOption(F.option));
z.showCloseButton(N);var aa=[[{title:V,width:20,fontSize:12},{title:X,width:60,layerType:"normal",fontSize:12},{title:M,width:80,layerType:"normal",fontSize:12}],[{type:"splitLine",height:3,marginTop:5}]];V||(aa=[[{title:X,width:"auto",fontSize:12},{title:M,width:"auto",fontSize:12}],[{type:"splitLine",height:3,marginTop:5}]]);for(V=0;V<E.length;V++)aa.push([E[V]]);J=[];G=[];var ia=26,fa=26;E.forEach(function(Y,O){var K;Y.title&&(K=getHeight(A,Y.title,Y.fontSize?Y.fontSize+"px "+U.fontFamily:U.fontSize+
"px",Y.lineHeight?Y.lineHeight:U.lineHeight,220));Y=Y.height?Y.height:U.lineHeight;J.push(K);G.push(Y)});J.forEach(function(Y,O){ia+=Y});G.forEach(function(Y){fa+=Y});if(ia==fa)ia+=25,fa+=25;else if(fa<ia){ia=ia+25+5;fa=fa+25+5;var T={totalHeight:ia,showHeight:fa,heightList:J,showHeightList:G};aa.push([{type:"xSaftButton",icon:"Down",title:"",height:25,lineHeight:20,width:225,callback:function(Y){q(T,aa,Y)},option:{schemeName:U.showMoreSchemeName,borderRadius:0}}])}r.style.height=50*aa.length+12+
"px";r.style.height=fa+"px";z.setGrid({vBox:aa});this.draw()};this.setOption=function(E){xCopyAllTo(E,U)};this.close=function(E){E?(B=E,L=setTimeout(function(){N()},E)):N()};var N=function(){r.className="xMessageTip-Hidden";v.hidden();g&&g();for(var E=0;E<xGlobal.xMessageTipList.length;E++)if(xGlobal.xMessageTipList[E]==v){var V=xGlobal.xMessageTipList[E].getPosition();xGlobal.xMessageTipList.splice(E,1);if(E<xGlobal.xMessageTipList.length){var F=xGlobal.xMessageTipList[E].getPosition();for(V=F.top-
V.top;E<xGlobal.xMessageTipList.length;E++)F=xGlobal.xMessageTipList[E].getPosition(),xGlobal.xMessageTipList[E].setPosition({top:F.top-V})}break}a.document.getElementById("mainBody").removeChild(r)};this.hidden=function(){r.style.display="none"};this.draw=function(){"none"==r.style.display&&(r.style.display="block");z.draw(!0)};this.getPosition=function(){return{top:parseFloat(r.style.top),height:parseFloat(r.style.height),width:parseFloat(r.style.width)}};this.setPosition=function(E){r.style.top=
E.top+"px"};this.getGrid=function(){return z};this.setScheme=function(E,V){if(E!=H||V!=C)if(H=E,C=V,E.xMessageTip)null==k&&(k=E.xMessageTip.normal),k&&xCopyAllTo(k,U);else return;V=JSON.parse(JSON.stringify(E));V.xGrid=JSON.parse(JSON.stringify(V.xMessageTip));var F=E.xMessageTip.normal;u.style.border="1px solid "+(void 0===F.borderColor?"#000":F.borderColor);z.setOption(E.xMessageTip.normal);z.setScheme(V,"normal",!0)};(function(){xCopyAllTo(k,U);null==xGlobal.xMessageTipList&&(xGlobal.xMessageTipList=
[]);4<=xGlobal.xMessageTipList.length&&xGlobal.xMessageTipList[0].close();for(var E=48,V=0;V<xGlobal.xMessageTipList.length;V++)E=xGlobal.xMessageTipList[V].getPosition(),E=E.top+E.height+8;V=xGlobal.xMessageTipList.length;xGlobal.xMessageTipList[V]=v;r=document.createElement("div");V=document.createAttribute("style");V.value="display:none; position:absolute; top:"+E+"px; right:8px; width:240px; height:80px; z-index:1001;background-color:rgba(64,64,64,0.9);";r.className="xMessageTipBox";r.setAttributeNode(V);
a.document.getElementById("mainBody").appendChild(r);u=a.document.createElement("canvas");null==A&&(A=u.getContext("2d"));u.className="xMessageTip";V=a.document.createAttribute("style");V.value="position:absolute;margin:0px;padding:0px;left:0px; top:0px; right:0px; bottom:0px;border:1px solid "+U.borderColor;u.setAttributeNode(V);r.appendChild(u);u.addEventListener("mousedown",v.onMouseDown);u.addEventListener("mousemove",v.onMouseMove);u.addEventListener("mouseup",v.onMouseUp);u.addEventListener("mouseover",
v.onMouseOver);u.addEventListener("mouseout",v.onMouseOut);z=new xGrid(a,null,u);z.setOption(U);(E=globalSet.systemSchemeSelected)&&E.option&&v.setScheme(E.option,E.name)})();this.setMessage(b,c,k)};function xStatisticTip(a,b,c){var g=this,k=0,q=0,f=0,p=0;this.destroy=function(){u&&u.destroy();r.removeEventListener("mousemove",g.onMouseDown);r.removeEventListener("mousedown",g.onMouseMove);r.removeEventListener("mouseup",g.onMouseUp);b.removeChild(A);r.width=r.height=1};this.setPointerEvent=function(z){A.style.pointerEvents=z;r.style.pointerEvents=z};this.onMouseDown=function(z){u&&u.isInCloseButton(z.offsetX,z.offsetY)?q=k=null:(k=z.clientX,q=z.clientY,f=parseFloat(A.style.left),p=parseFloat(A.style.top),
xGlobal.ObjectMouseMove=g.onMouseMove)};this.onMouseMove=function(z){if(void 0!=k&&1==z.buttons){var H=f+(z.clientX-k);z=p+(z.clientY-q);var C=parseFloat(A.style.height),U=parseFloat(A.style.width),J=getScreenXY(b),G=-J.x;J=-J.y;H+U>window.innerWidth+G-3&&(H=window.innerWidth+G-U-3);z+C>window.innerHeight+J-3&&(z=window.innerHeight+J-C-3);H<G+3&&(H=G+3);z<J+3&&(z=J+3);A.style.left=H+"px";A.style.top=z+"px"}};this.onMouseUp=function(z){"closeDialog"==z.srcElement.className&&k==z.clientX&&q==z.clientY&&
g.closeStat();q=k=void 0};this.setGrid=function(z,H){u&&u.destroy();H.width&&(A.style.width=H.width+"px");H.height&&(A.style.height=H.height+"px");H.backgroundColor&&(A.style.backgroundColor=H.backgroundColor);H.borderRadius&&(A.style.borderRadius=H.borderRadius);H.boxShadow&&(A.style.boxShadow=H.boxShadow);H.border&&(A.style.border=H.border);H.option&&u.setOption(H.option);u.showCloseButton(v);u.setGrid({vBox:z})};var v=function(){g.hidden();c&&c()};this.hidden=function(){A.style.display="none";
u.hidden()};this.draw=function(){"none"==A.style.display&&(A.style.display="block",u.show());u.draw(!0)};var A=document.createElement("div");A.className="xStatisticTipBox";b.appendChild(A);var r=a.document.createElement("canvas");r.className="xStatusticTip";A.appendChild(r);A.style="display:block; position:absolute; left:0px; top:30px; width:260px; height:140px; z-index:1001;background-color:rgba(64,64,64,0.85);border-radius:3px;";A.style.boxShadow="0px 0px 6px #000";r.addEventListener("mousedown",
g.onMouseDown);r.addEventListener("mousemove",g.onMouseMove);r.addEventListener("mouseup",g.onMouseUp);var u=new xGrid(a,null,r);u.setOption({wheelOnFocus:!1,isFocus:!0,isClick:!1,isWheel:!1,isKeyDown:!1,canMouseSelected:!1,backgroundColor:"transparent",borderColor:"transparent",color:"#eee",colors:["rgba(255,255,255,1)","#FF503B","#72FFBE","#fff"],cursor:{backgroundColor:"transparent"},fontFamily:xGlobal.systemFont,fontSize:10,lineHeight:16,dragable:!1,marginLeft:6,marginRight:6,marginTop:6,marginBottom:6,
enableFocus:!1,setDefaultFocusObject:!1,keyEnenterTab:!1,tabKey:"",enterOrder:[],tabOrder:[],scroller:{scrollerV:"hidden",scrollerH:"hidden",backgroundColor:"#ddd",sliderColor:"#444",activeSliderColor:"#000"}})};function xTip(a){var b,c=document.createElement("div"),g=document.createAttribute("style");g.value="display:none; position:absolute; left:0px; top:0px; width:0px; height:0px;z-index:1001;background-color:transparent;border-radius:3px;pointer-events:none;";c.className="xTipBox";c.setAttributeNode(g);a.document.getElementById("mainBody").appendChild(c);var k=a.document.createElement("canvas");k.className="xTip";g=a.document.createAttribute("style");g.value="position:absolute;margin:0px;padding:0px;left:0px; top:0px; right:0px; bottom:0px;pointer-events:none;";
k.setAttributeNode(g);c.appendChild(k);this.destroy=function(){page&&(page=null);a.document.getElementById("mainBody").removeChild(c);k.width=k.height=1};this.tip=function(q,f,p,v,A,r){if(null==v)"none"!=c.style.display&&(c.style.display="none");else{var u=p;null==b&&(b=k.getContext("2d"));b.font=r.font;var z=0;var H=0;var C=parseInt(b.font.substr(0,2))+8;p=0;var U=8;if("string"==typeof v)p=b.measureText(v).width,z=p+12,H=C+6;else if("[object Array]"===Object.prototype.toString.apply(v)){for(H=0;H<
v.length;H++)if(v[H][0].title){z=b.measureText(v[H][0].title).width;var J=getValueFormatStringWithProp(v[H][0].data[A],v[H][0].type,v[H][0].format,v[H][0].flags,v[H][0].prop);p<z&&(p=z);z=b.measureText(J).width;U<z&&(U=z)}z=16+p+U+12+8;H=v.length*C+6}q=getScreenXY(q.getParentDiv());C=q.x+f+8;u=q.y+u+8;u+H>window.innerHeight-3&&(u=window.innerHeight-H-3,0>u&&(u=0));C+z>window.innerWidth-3&&(C=q.x+f-z-8,0>C&&(C=0));c.style.left=""+C+"px";c.style.top=""+u+"px";c.style.width=z+"px";c.style.height=H+"px";
c.style.backgroundColor=r.backgroundColor;c.style.border=r.border;c.style.boxShadow=r.boxShadow;"none"==c.style.display&&(c.style.display="inline-block");f=z;null==b&&(b=k.getContext("2d"));z=getPixelRatio(b);u=parseInt(b.font.substr(0,2))+8;C=q=0;k.width=f*z;k.height=H*z;k.style.left=0;k.style.top=0;k.style.width=f+"px";k.style.height=H+"px";1<z&&b.setTransform(z,0,0,z,0,0);b.translate(.5,.5);b.lineWidth=1;b.font=r.font;q+=6;H=C+6+u/2;b.fillStyle=r.color;if("string"==typeof v)b.textBaseLine="middle",
b.fillText(v,q,H);else if("[object Array]"===Object.prototype.toString.apply(v))for(z=0;z<v.length;z++){C=q;if(v[z][0].draw){J=b;var G=v[z][0].draw,B=v[z][0].color,L=C,ba=H-u/2-4,N=u;switch(G){case "linePointDot":J.beginPath();G=ba+N/2+0;J.strokeStyle=B;J.lineWidth=2;J.moveTo(L+0,G);J.lineTo(L+12+0,G);J.stroke();J.closePath();J.beginPath();J.fillStyle=B;J.lineWidth=1;J.arc(L+N/4+1+0,G,2,0,2*Math.PI);J.fill();J.stroke();J.closePath();break;case "line":J.beginPath();G=ba+N/2+0;J.strokeStyle=B;J.lineWidth=
2;J.moveTo(L+0,G);J.lineTo(L+12+0,G);J.stroke();J.closePath();break;case "null":break;case "bar":fillRoundRect(J,L+0,ba+N/2-6,12,12,2,B);break;default:J.beginPath(),J.fillStyle=B,J.textBaseline="middle",J.textAlign="left",J.fillText(G,L+0+1,ba+N/2+0),J.closePath()}C+=18}b.fillStyle=r.color;v[z][0].title&&(b.textAlign="left",b.fillText(v[z][0].title,C,H),C=p);"left"==v[z][0].dataAlign?b.textAlign="left":"center"==v[z][0].dataAlign?(b.textAlign="center",C+=(f-(C-q))/2):(C=q+16+p+8+U,b.textAlign="right");
J=getValueFormatStringWithProp(v[z][0].data[A],v[z][0].type,v[z][0].format,v[z][0].flags,v[z][0].prop);v[z][0].format&&0<=v[z][0].format.indexOf("%z")?b.fillStyle=0<v[z][0].data[A]?r.colors[1]:0>v[z][0].data[A]?r.colors[2]:r.colors[0]:v[z][0].dynamicColor?v[z][0].dynamicColor.compare&&null!=v[z][0].dynamicColor.compare[A]&&(b.fillStyle=0<v[z][0].data[A]-v[z][0].dynamicColor.compare[A]?r.colors[1]:0>v[z][0].data[A]-v[z][0].dynamicColor.compare[A]?r.colors[2]:r.colors[0]):v[z][0].color&&(b.fillStyle=
v[z][0].color);b.fillText(J,C,H);H+=u}}};this.hidden=function(){c.style.display="none";k.width=k.height=1}};var doToolbarButton=function(a){if(xGlobal.actionToolbar){for(var b=0;b<xGlobal.actionToolbar.buttonsDiv.length;b++)if("toolbarButton active"==xGlobal.actionToolbar.buttonsDiv[b].className){var c=xGlobal.actionToolbar.buttonsDiv[b].getAttribute("onclick");if(c&&(c=trimBracket(c.slice(15)),c=trimBracket(c),c==a))return}eval("xGlobal.actionToolbar.doButtonAction('"+a+"')")}},doToolbarActions=function(a,b){if("true"==a.getAttribute("select-active")){var c=a.getAttribute("normal-capture");null!=c&&(a.innerHTML=
c);a.setAttribute("select-active","false");doToolbarButton(b[b.length-1])}else c=a.getAttribute("select-capture"),null!=c&&(a.innerHTML=c),a.setAttribute("select-active","true"),doToolbarButton(b[0])},doToolbarMenu=function(a){xGlobal.actionToolbar&&eval("xGlobal.actionToolbar.doPopupMenu('"+a+"')")},getOptionStyle=function(a,b){if(null==b)return a;var c=!1;if(b.style){var g=(a+";"+b.style).split(";");c=!0}else g=null!=b&&"string"==typeof b?(a+";"+b).split(";"):(a+";").split(";");a={};for(var k=0;k<
g.length;k++){var q=g[k].split(":");""!=q[0]&&(a[q[0]]=q[1])}if(1==c)for(var f in b)"style"!=f&&"cellPadding"!=f&&"cellSpacing"!=f&&(c=f.replace(/([A-Z]{1})/g,"-$1"),a[c.toLowerCase()]=b[f]);b="";for(f in a)b+=f+":"+a[f]+";";return b};function calendarTimeFormat(a,b){var c=b.substring(0,4),g=b.substring(4,6);b=b.substring(6,8);a=a.replace(/yyyy/i,c);a=a.replace(/mm/i,g);return a=a.replace(/dd/i,b)}
var domCalendars=null,createCalendar=function(a,b,c,g){b=void 0===b?"chooseDatesId":b;c=void 0===c?"":c;domCalendars?"single"==a?(domCalendars.setPickMode(a),domCalendars.setYear(c).setMonth(c).setDate(c)._setYears(c).update()):"range"==a&&(domCalendars.setPickMode(a),domCalendars.setPickedData(c),a=domCalendars.data.picked[0],domCalendars.setYear(a).setMonth(a).setDate(a)._setYears(a).update()):domCalendars=new DomCalendar({parent:b,time:c,viewMode:0,pickMode:"range",onDatePick:function(k,q,f,p,
v){if(p){q=document.getElementById(v.id);f=q.getAttribute("format");v=v.action;if("object"==typeof k)for(p=0;p<k.length;p++){var A=k[p].replace(/-/g,"");f=calendarTimeFormat(f,A);v&&(v=v.replace(0==p?/{{ startDateValue }}/g:/{{ endDateValue }}/g,A))}else k=k.replace(/-/g,""),f=calendarTimeFormat(f,k),v&&(v=v.replace(/{{ dateTime }}/g,k));q.value=f;document.getElementById("chooseDatesId").style.display="none";0<v.length&&doToolbarButton(v)}}});domCalendars.setChooseMap(g)},domMultipleCalendars=new Map,
createMultipleCalendar=function(a,b,c,g){if(a&&g&&!b&&!c){domMultipleCalendars.set("page",g.getPage().domId);var k=new DomCalendar({parent:a.childrenId[0],hasToday:!0,hasClock:!0,hasFinishBtn:!1,viewMode:0,onDatePick:function(r,u,z,H,C){u=q.getDate().text;u=new Date(u);(new Date(r)).getTime()>u.getTime()?(r=document.getElementById(a.childrenTitleId[0]).innerHTML,r=r.replace("Start date: ",""),k.setYear(r).setMonth(r).setDate(r)._setYears(r).update()):document.getElementById(a.childrenTitleId[0]).innerHTML=
"Start date: "+r}}),q=new DomCalendar({parent:a.childrenId[1],viewMode:0,hasToday:!1,hasFinishBtn:!0,onDatePick:function(r,u,z,H,C){if(H){u=document.getElementById(C.id);z=u.getAttribute("format");H=C.action;for(var U=0;U<r.length;U++){var J=r[U].replace(/-/g,"");z=calendarTimeFormat(z,J);null!=C.callFormat&&(J=calendarTimeFormat(C.callFormat,J));H&&(H=H.replace(0==U?/{{ startDateValue }}/g:/{{ endDateValue }}/g,J))}document.getElementById(a.windowId).style.display="none";u.value=z;C.action&&doToolbarButton(H)}else document.getElementById(a.childrenTitleId[1]).innerHTML=
"End date: "+r}});k&&(k.set({linkageDate:!0}),k.set({linkageElement:[q]}));q&&(q.set({linkageFinishBtn:!0}),q.set({linkageElement:[k]}));var f=!0;b=function(r){function u(){1==f&&(f=!1,H.nextAnimation(),H.next(),setTimeout(function(){f=!0},600))}function z(){1==f&&(f=!1,H.prevAnimation(),H.prev(),setTimeout(function(){f=!0},600))}var H=domMultipleCalendars.get(r.currentTarget.id);r=r||window.event;r.stopPropagation?r.stopPropagation():r.cancelBubble=!0;1!=r.preventDefault?r.preventDefault():r.returnValue=
!1;r.wheelDelta?(0<r.wheelDelta&&z(),0>r.wheelDelta&&u()):r.detail&&(120==r.detail&&z(),-120==r.detail&&u())};domMultipleCalendars.set(a.childrenId[0],k);domMultipleCalendars.set(a.childrenId[1],q);domMultipleCalendars.set("dateOption_"+g.getPage().domId,a);document.getElementById(a.childrenId[0]).onmousewheel=b;document.getElementById(a.childrenId[1]).onmousewheel=b}else if(g&&g.getPage().domId!=domMultipleCalendars.get("page"))createMultipleCalendar(a,b,c,g);else{g=$jscomp.makeIterator(domMultipleCalendars);
for(var p=g.next();!p.done;p=g.next()){var v=$jscomp.makeIterator(p.value);p=v.next().value;v=v.next().value;if("page"!=p)if(p.startsWith("dateOption"))document.getElementById(v.childrenTitleId[0]).innerHTML="Start date: "+b[0],document.getElementById(v.childrenTitleId[1]).innerHTML="End date: "+b[1];else{v.setChooseMap(c);var A;p.startsWith("pkBeginDate")?A=b[0]:p.startsWith("pkEndDate")&&(A=b[1]);v.set({currentTime:A});v.setYear(A).setMonth(A).setDate(A)._setYears(A).update()}}}},lastTimeChooseDateId=
null,showDateForId=function(a){function b(){var H=v.offsetWidth;u+H>z.width&&(u=u-(u+H-z.width)-5);v.style.left=u+"px"}xGlobal.actionToolbar&&eval("xGlobal.actionToolbar.setActiveButton(null)");var c=a.id,g=document.getElementById(c),k=g.getAttribute("format"),q=g.getAttribute("show-type"),f,p=g.value;if("multipleDate"==q){var v=document.getElementById("chooseMultipleDatesId_"+c);var A=getMuDate(p,k)}else if(v=document.getElementById("chooseDatesId"),"date"==q?f="single":f="range","single"==f){var r=
k.toLowerCase().lastIndexOf("yyyy");A=k.toLowerCase().lastIndexOf("mm");k=k.toLowerCase().lastIndexOf("dd");r=p.substring(r,r+4);A=p.substring(A,A+2);p=p.substring(k,k+2);A=r+"-"+A+"-"+p}else"range"==f&&(A=getMuDate(p,k));var u=g.offsetParent.offsetLeft,z=g.offsetParent.offsetParent.getBoundingClientRect();lastTimeChooseDateId==c?v.style.display="none"==v.style.display?"block":"none":(lastTimeChooseDateId?"none"==v.style.display&&(v.style.display="block"):v.style.display="none"==v.style.display?"block":
"none","multipleDate"!=q&&b());lastTimeChooseDateId=c;"multipleDate"==q?createMultipleCalendar(null,A,a):createCalendar(f,null,A,a)};function getMuDate(a,b){for(var c=[],g=function(u,z,H){return u.substr(0,z)+H+u.substr(z+H.length)},k=0;2>k;k++){var q=b.toLowerCase().indexOf("yyyy"),f=b.toLowerCase().indexOf("mm"),p=b.toLowerCase().indexOf("dd"),v=a.substring(q,q+4),A=a.substring(f,f+2),r=a.substring(p,p+2);b=g(b,q,v);b=g(b,f,A);b=g(b,p,r);c.push(v+"-"+A+"-"+r)}return c}
function xToolbar(a,b,c,g,k,q,f,p){function v(Q,sa){return Q.parentNode.tagName.toLowerCase()==sa?Q.parentNode:""==Q.parentNode.tagName?null:v(Q.parentNode,sa)}function A(Q,sa,ra,la){function Na(ha){if(null!=na.children){for(var ea=null,ja,da=0;da<na.children.length;da++)if(ja=na.children[da].getAttribute("style"),""!=ja&&null!=ja){ea=da;break}"up"==ha?null!=ea?ea--:ea=0:null!=ea?ea++:ea=0;for(da=0;da<na.children.length;da++)ea==da?na.children[ea].style.backgroundColor="#F1F1F1":na.children[da].style.backgroundColor=
null}}var Wa=document.getElementById(Q);ra=document.getElementById(ra);var na=document.getElementById(sa);Wa.onkeydown=function(ha){if(13==ha.which){var ea=!1;if("block"==na.style.display)for(var ja=0;ja<na.children.length;ja++){var da=na.children[ja].getAttribute("style");if(""!=da&&null!=da){ea=!0;var Oa=ja;break}}if(ea){Wa.value=na.children[Oa].innerHTML;na.children[Oa].style.backgroundColor=null;na.style.display="none";ea=Wa.getAttribute("action");Wa.getAttribute("data-bound-variable");ja=Wa.getAttribute("data-bound-value");
if(-1!=ea.indexOf(ja)){da=ja.indexOf("{");var Pa=ja.indexOf("}");if(-1!=da&&-1!=Pa){var hb=ja.substring(da+2,Pa);hb=hb.replace(/\s*/g,"")}}Oa=L.get(Q)[Oa];if(!Oa)return;hb=ea.replace(new RegExp(ja,"g"),Oa.get(hb));doToolbarButton(hb)}else{na.style.display="none";if(null!=Wa.getAttribute("data-blankcall")){Wa.onkeyup(!0);xGlobal.keyDown=!0;return}ea=Wa.getAttribute("action");ja=Wa.getAttribute("data-bound-value");-1!=ea.indexOf(ja)&&(da=ja.indexOf("{"),Pa=ja.indexOf("}"),-1!=da&&-1!=Pa&&(hb=ja.substring(da+
2,Pa),hb.replace(/\s*/g,"")));hb=ea.replace(ja,"");doToolbarButton(hb);Wa.onkeyup(!0)}}40==ha.which&&Na("down");38==ha.which&&Na("up");xGlobal.keyDown=!0};Wa.onkeyup=function(ha){xGlobal.keyDown=!1;if(1==la&&40!=ha.which&&38!=ha.which||1==ha&&0==la)na.innerHTML="",this.value&&r.query(u.SEARCHQUERY,function(ea){B=ea;var ja=B[0].table.data,da=B[0].table.field;ea=[];for(var Oa=0;Oa<ja.length;Oa++){for(var Pa=new Map,hb=0;hb<da.length;hb++){var Ma=da[hb][0];Pa.set(Ma,ja[Oa][hb])}ea.push(Pa)}L.set(Q,ea);
if(Oa=Wa.getAttribute("listFormat")){Pa=[];for(ja=ja=0;ja<da.length;ja++)Ma=da[ja][0],Pa.push(Ma);da=[];for(ja=0;ja<ea.length;ja++){hb=Oa;for(Ma in Pa){var rb=ea[ja].get(Pa[Ma]);hb=hb.replace("{{ "+Pa[Ma]+" }}",rb)}da.push(hb)}for(ja=0;ja<da.length;ja++){Ma=document.createElement("li");ea=void 0;for(Oa=0;Oa<na.childNodes.length;Oa++)if(na.childNodes[Oa].innerText==da[ja]){ea=!0;break}if(ea)break;Ma.innerHTML=da[ja];na.style.display="block";na.appendChild(Ma);Ma.onmouseover=function(){this.defaultColor=
this.style.backgroundColor;this.style.backgroundColor="#F1F1F1"};Ma.onmouseout=function(){this.style.backgroundColor=this.defaultColor};Ma.onclick=function(){Wa.onkeydown({which:13})}}}else console.error("\u672a\u8bbe\u7f6e\u8f93\u51fa\u683c\u5f0flistFormat!")})};ra.onclick=function(){Wa.onkeyup(!0)};Wa.onclick=function(){na.style.display="none"==na.style.display&&""!=na.innerHTML?"block":"none"}}var r=this,u={NOTQUERY:1,SEARCHQUERY:2,INITQUERY:3},z,H,C,U,J,G=0,B,L=new Map,ba="100%",N="100%";this.queryInfo=
J;this.buttons=k&&k.buttons?k.buttons:k&&k.dynamicButtons?k.dynamicButtons:[];q&&(U=xDeepCopy(q));k&&k.rightMouseClickCB&&(this.rightMouseClickCB=k.rightMouseClickCB);this.dragElem=this.dragCallback=null;k&&k.dragCallback&&(this.dragCallback=k.dragCallback);this.getPage=function(){return b};this.httpManages=p;var E={splitLineColor:"",closeBtn:!1,toolbar:{style:"position:absolute;overflow:hidden;white-space:nowrap;left:0px;top:0px;right:0px;bottom:0px;line-height:12px;cursor:default;margin:0px;text-align:center;font-size:12px;font-family:"+
xGlobal.systemFont,cellPadding:"0",cellSpacing:"0"},normalButton:{style:"padding:2px 8px 0px 8px;border-bottom:2px solid transparent;background-color:#fff;height:22px"},pushButton:{style:"padding:2px 8px 0px 8px;border-bottom:2px solid #f00;background-color:#fff;height:22px"},overButton:{style:"padding:2px 8px 0px 8px;border-bottom:2px solid transparent;background-color:#444;height:22px"},overPushButton:{style:"padding:2px 8px 0px 8px;border-bottom:2px solid #f00;color:#ff0; background-color:#111;height:22px"},
datePickers:{style:"position:absolute;overflow:hidden;height:250px;width:250px;z-index: 999;display:none;"},multipleDatePickers:{style:"position:absolute;width: 550px;height: 255px;top:45px;z-index: 999;overflow:hidden;display:none;"},searchList:{style:"position: absolute;top: 50px;background-color:white;border: 1px solid #CCCCCC;border-top: none;list-style: none;margin: 0;padding: 0;width: 150px;display: none;"}},V,F,M,X,aa,ia,fa,T,Y=xDeepCopy(g);Y&&(Y.type&&""!=Y.type&&(E.type=Y.type),Y.page&&(E.page=
xDeepCopy(Y.page)));if(!xGlobal.closeElementMap){k=new Map;q=new Map;p=new Map;var O=[],K=[],Z=[],pa=[];k.set("search",q);k.set("time",p);q.set("closeArrId",O);q.set("closeInvalid",K);p.set("closeArrId",Z);p.set("closeInvalid",pa);xGlobal.closeElementMap=k}O=xGlobal.closeElementMap.get("search").get("closeArrId");K=xGlobal.closeElementMap.get("search").get("closeInvalid");Z=xGlobal.closeElementMap.get("time").get("closeArrId");pa=xGlobal.closeElementMap.get("time").get("closeInvalid");this.height=
28;g&&g.height&&(this.height=g.height);g&&g.position&&(this.position=g.position);g&&g.page&&(this.page=xDeepCopy(g.page));this.isPageToolbar=function(){if(E.page)return!0};this.getToolbarType=function(){return E.type};var oa=function(Q,sa,ra,la,Na,Wa){r.buttons=[];if(null!=E.page.pageInfo){Q=E.page.pageInfo;for(var na=["pageNo","totalPages","beginRecord","endRecord","totalRecords"],ha,ea=0;ea<na.length;ea++){switch(ea){case 0:ha=sa+1;break;case 1:ha=ra;break;case 2:ha=sa*la+1;break;case 3:ha=sa*la+
la;break;case 4:ha=Na}Q=eval("arguments[0].replace(/{{ "+(na[ea]+" }}/g,'")+ha+"')")}}ea=0;"right"==E.page.align&&(Q&&(r.buttons[r.buttons.length]={capture:Q,type:"text"}),r.buttons[r.buttons.length]={capture:"---"},ea=2);if(ra>g.page.maxButtons){r.buttons[r.buttons.length]={capture:E.page.previous?E.page.previous:"<",radioGroupId:1,action:"goPrePage()"};r.buttons[r.buttons.length]={capture:"1",radioGroupId:1,action:"goPage(0)",bound:{variable:"pageNo",value:0}};la=E.page.maxButtons-(r.buttons.length-
ea)-2;sa>=g.page.maxButtons-5?(r.buttons[r.buttons.length]={capture:"...",type:"text"},sa+g.page.maxButtons-5<ra?(ea=sa-parseInt((E.page.maxButtons-6)/2),la=ea+(E.page.maxButtons-6)):(ea=ra-(E.page.maxButtons-5),la=ra)):ea=1;for(;ea<la;ea++)r.buttons[r.buttons.length]={capture:""+(ea+1),radioGroupId:1,action:"goPage("+ea+")",bound:{variable:"pageNo",value:ea}};la<ra&&(r.buttons[r.buttons.length]={capture:"...",type:"text"},ea=ra-1,r.buttons[r.buttons.length]={capture:""+(ea+1),radioGroupId:1,action:"goPage("+
ea+")",bound:{variable:"pageNo",value:ea}});r.buttons[r.buttons.length]={capture:E.page.next?E.page.next:">",action:"goNextPage()"}}else for(ea=0;ea<g.page.maxButtons&&ea<ra;ea++)r.buttons[r.buttons.length]={capture:""+(ea+1),radioGroupId:1,action:"goPage("+ea+")",bound:{variable:"pageNo",value:ea}};E.page&&E.page.input&&1==E.page.input.show&&null!=E.page.input.prefix&&(r.buttons[r.buttons.length]={capture:E.page.input.prefix,type:"text"});E.page&&E.page.input&&1==E.page.input.show&&(r.buttons[r.buttons.length]=
{capture:"",type:"input",style:null==E.page.input.style?"":E.page.input.style});E.page&&E.page.input&&1==E.page.input.show&&null!=E.page.input.suffix&&(r.buttons[r.buttons.length]={capture:E.page.input.suffix,type:"text"});"right"!=E.page.align&&Q&&(r.buttons[r.buttons.length]={capture:Q,type:"text"});ta(Wa)};this.setPageButtons=function(Q,sa,ra,la,Na){oa(E.page.pageInfo,Q,sa,ra,la,Na)};this.destroy=function(){};var Aa=function(){Y&&void 0!==Y.width&&(ba=Y.width);Y&&void 0!==Y.height&&(N=Y.height);
V=getOptionStyle(E.toolbar.style,Y?Y.toolbar:"");F=getOptionStyle(E.normalButton.style,Y?Y.normalButton:"");M=getOptionStyle(E.pushButton.style,Y?Y.pushButton:"");X=getOptionStyle(E.overButton.style,Y?Y.overButton:"");aa=getOptionStyle(E.overPushButton.style,Y?Y.overPushButton:"");ia=getOptionStyle(E.datePickers.style,Y?Y.datePickers:"");T=getOptionStyle(E.searchList.style,Y?Y.searchList:"");fa=getOptionStyle(E.multipleDatePickers.style,Y?Y.multipleDatePickers:"");E.toolbar.style=V;E.normalButton.style=
F;E.pushButton.style=M;E.overButton.style=X;E.overPushButton.style=aa;E.datePickers.style=ia;E.searchList.style=T;E.multipleDatePickers.style=fa;ta(U)},ta=function(Q){var sa,ra=[],la,Na,Wa={windowId:"chooseMultipleDatesId",childrenId:["pkBeginDate","pkEndDate"],childrenTitleId:["pkBeginDateTitle","pkEndDateTitle"],childrenTitleArr:[],childrenLanguage:{CN:{beginTitle:"\u5f00\u59cb\u65e5\u671f: ",enTitle:"\u7ed3\u675f\u65e5\u671f: ",days:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),todayTitle:"\u4eca\u5929:",
finishBtn:"\u786e\u8ba4"},EN:{beginTitle:"Start date: ",enTitle:"End date: ",days:"Day one two three four five six".split(" "),todayTitle:"today:",finishBtn:"OK"}}},na="";xGlobal.isMobile?(na+='<table width="'+ba+'" height="'+N+'" ',na+='style="'+V+'">',na+='<tr style="top:0px">'):(na=na+'<table style="'+(V+'">'),na+='<tr style="top:2px">');for(var ha=0;ha<r.buttons.length;ha++){var ea=sa=null;if("---"==r.buttons[ha].capture)na+='<td class="toolbarFill" style="width:100%;"></td>';else if("|"==r.buttons[ha].capture)na+=
'<td class="toolbarSplit">',sa="background-color: #E2E2E2;position: absolute;height: 100%;top: 0;width: 1px;",sa=getOptionStyle(sa,r.buttons[ha].style),na+='<label style="'+sa+'"></label>',na+="</td>";else if("text"==r.buttons[ha].type){na+='<td class="toolbarTitle" ';null!=r.buttons[ha].getVariable&&(na+='get-variable="'+r.buttons[ha].getVariable+'"');sa="";xGlobal.isMobile||(sa="padding:8px 2px;");ea=r.buttons[ha].captureProperty;null!=ea&&null!=xLanguage.langMap[ea]&&(r.buttons[ha].capture=xLanguage.langMap[ea],
na+='data-lang="'+ea+'"');sa=getOptionStyle(sa,r.buttons[ha].style);ea=r.buttons[ha].capture;for(var ja in Q){var da=Q[ja],Oa="{{ "+ja+" }}";ea=ea.replace(Oa,da);ea=ea.replace(Oa,da)}na+='style="'+sa+'">'+ea+"</td>"}else if("input"==r.buttons[ha].type)na+='<td class="toolbarInput">',na+="<input",""!=r.buttons[ha].style&&null!=r.buttons[ha].style&&(na+=' style="'+r.buttons[ha].style+'"'),na+="></input> </td>";else if("date"==r.buttons[ha].type||"dates"==r.buttons[ha].type||"multipleDate"==r.buttons[ha].type){"multipleDate"==
r.buttons[ha].type?Na=!0:la=!0;(da=r.buttons[ha].format)||(da="MM DD, YYYY");na+='<td class="toolbarDate">';if(r.buttons[ha].id)Wa.windowId+="_"+r.buttons[ha].id,Wa.childrenId[0]+="_"+r.buttons[ha].id,Wa.childrenId[1]+="_"+r.buttons[ha].id,Wa.childrenTitleId[0]+="_"+r.buttons[ha].id,Wa.childrenTitleId[1]+="_"+r.buttons[ha].id,na+='<form> <input type="button" id="'+r.buttons[ha].id+'"',na+='show-type="'+r.buttons[ha].type+'"',na+=" onclick=\"showDateForId({id:'"+r.buttons[ha].id+"'",r.buttons[ha].action&&
""!=r.buttons[ha].action&&(Oa=r.buttons[ha].action.replace(/'/g,"__1__"),Oa=Oa.replace(/"/g,"__2__"),na+=",action:'"+Oa+"'"),r.buttons[ha].callFormat&&""!=r.buttons[ha].callFormat&&(na+=",callFormat:'"+r.buttons[ha].callFormat+"'"),na+='})"',pa.push(r.buttons[ha].id);else{console.error("\u672a\u8bbe\u7f6e\u65e5\u671fID!");break}da&&(na+='format="'+da+'" ');r.buttons[ha].mutableFormat&&(na+='mutable-format="'+r.buttons[ha].mutableFormat+'" ');if(r.buttons[ha].capture)if("dates"!=r.buttons[ha].type&&
"multipleDate"!=r.buttons[ha].type||"object"!=typeof r.buttons[ha].capture)sa=r.buttons[ha].capture,sa=calendarTimeFormat(da,sa),na+='value="'+sa+'"';else{sa=da;da=r.buttons[ha].capture;for(Oa=0;Oa<da.length;Oa++)sa=calendarTimeFormat(sa,da[Oa]);na+='value="'+sa+'"';if("multipleDate"==r.buttons[ha].type)for(Oa=0;Oa<da.length;Oa++){sa=da[Oa].substring(0,4);ea=da[Oa].substring(4,6);var Pa=da[Oa].substring(6,8);sa=sa+"-"+ea+"-"+Pa;Wa.childrenTitleArr.push(sa)}}else Oa=new Date,sa=Oa.getFullYear(),ea=
Oa.getMonth()+1,Oa=Oa.getDate(),sa=sa+ea+Oa,sa=calendarTimeFormat(da,sa),na+='value="'+sa+'"';r.buttons[ha].style?(sa=getOptionStyle(F,r.buttons[ha].style),na+='style="cursor:pointer;'+sa+'"'):na+='style="cursor:pointer;'+F+'"';na+="/></form>";na+="</td>"}else if("search"==r.buttons[ha].type){na+='<td class="toolbarSearch">';na+="<div ";r.buttons[ha].style?(sa=getOptionStyle(F,r.buttons[ha].style),na+='style="'+sa+'">'):na+='style="'+F+'">';if(r.buttons[ha].id){var hb=r.buttons[ha].id;na+='<input type="text" id="'+
r.buttons[ha].id+'"';K.push(hb)}else console.error("\u672a\u8bbe\u7f6e\u8f93\u5165\u6846ID\uff0c\u65e0\u6cd5\u627e\u5230\u8f93\u5165\u6e90!");r.buttons[ha].bound&&(r.buttons[ha].bound.variable&&(na+='data-bound-variable="'+r.buttons[ha].bound.variable+'" '),null!=r.buttons[ha].bound.value&&(na+='data-bound-value="'+r.buttons[ha].bound.value+'" ',Q&&(ea=Q[r.buttons[ha].bound.variable])));r.buttons[ha].action&&""!=r.buttons[ha].action&&(Oa=r.buttons[ha].action.replace(/'/g,"__1__"),Oa=Oa.replace(/"/g,
"__2__"),na+="action='"+Oa+"'");r.buttons[ha].capture&&(na+=' placeholder="'+r.buttons[ha].capture+'"');sa=r.buttons[ha].captureProperty;null!=sa&&null!=xLanguage.langMap[sa]&&(r.buttons[ha].capture=xLanguage.langMap[sa],na+='data-lang="'+sa+'"');if(r.buttons[ha].option){var Ma=r.buttons[ha].option.isAutoRequest;var rb=r.buttons[ha].option.isBlankEnterCall;null!=rb&&0==rb&&(na+=' data-blankcall="false" ');null==Ma&&(Ma=!0);sa=r.buttons[ha].option.handworkClick;rb=r.buttons[ha].option.listId;(ea=r.buttons[ha].option.listFormat)&&
(na+=" listFormat='"+ea+"' ");na=sa?na+'style="outline: none;font-family: Roboto-Regular;border: 0;margin-top: 1px;float: left;width: 80%;height: 90%;background-color: transparent;"></input>':na+'style="outline: none;font-family: Roboto-Regular;border: 0;margin-top: 1px;float: left;width: 96%;height: 90%;background-color: transparent;"></input>';if(0==Ma&&sa||1==Ma&&sa){ea=sa.img;da=sa.width;Oa=sa.height;Pa=sa.top;imgLeft=sa.left;imgRight=sa.right;var zb=sa.clickId;na+='<img src="'+ea+'"style="';
na+=da?"width:"+da+"px;":"width:10px;";na+=Oa?"height:"+Oa+"px;":"height:10px;";na+=Pa?"margin-top:"+Pa+"px;":"margin-top:0px;";na+=imgLeft?"margin-left:"+imgLeft+"px;":"margin-left:0px;";na+=imgRight?"margin-right:"+imgRight+'px;"':'margin-right:0px;"';na+=' id="'+zb+'"';na+="/>";K.push(zb)}na+="</div>";na+="</td>"}r.buttons[ha].query&&(J=r.buttons[ha].query)}else if("html"==r.buttons[ha].type)na=xGlobal.isMobile?r.buttons[ha].dragable?na+('<td draggable="true" class="toolbarHtml toolbarButton" style="">'+
r.buttons[ha].capture+"</td>"):na+('<td class="toolbarHtml" style="">'+r.buttons[ha].capture+"</td>"):r.buttons[ha].dragable?na+('<td draggable="true" class="toolbarHtml toolbarButton" style="padding:8px 2px;">'+r.buttons[ha].capture+"</td>"):na+('<td class="toolbarHtml" style="padding:8px 2px;">'+r.buttons[ha].capture+"</td>");else{da=r.buttons[ha].activeId;void 0==da&&(da="");na=r.buttons[ha].dragable?na+('<td draggable="true" class="toolbarButton" data-activeId="'+da+'"'):na+('<td class="toolbarButton" data-activeId="'+
da+'"');da=r.buttons[ha].captureProperty;null!=da&&null!=xLanguage.langMap[da]&&(r.buttons[ha].capture='<lable data-lang="'+da+'" style="pointer-events:none;">'+xLanguage.langMap[da]+"</lable>");r.buttons[ha].radioGroupId&&(na+='data-radio="'+r.buttons[ha].radioGroupId+'" ');r.buttons[ha].boundTabId&&(na+='data-tabid="'+r.buttons[ha].boundTabId+'" ');if(f&&"xTab"==f.constructor.name)r.buttons[ha].action?(Oa=r.buttons[ha].action.replace(/'/g,"__1__"),Oa=Oa.replace(/"/g,"__2__"),na+="onclick=\"doToolbarButton('doActivePageTab(this);"+
Oa+"')\""):na+='onclick="doActivePageTab(this)"';else if(f&&"xPageManager"==f.constructor.name)na+='onclick="doActiveFrameTab(this)"';else if(r.buttons[ha].bound&&(r.buttons[ha].bound.variable&&(na+='data-bound-variable="'+r.buttons[ha].bound.variable+'" '),null!=r.buttons[ha].bound.value&&(na+='data-bound-value="'+r.buttons[ha].bound.value+'" ',Q&&(ea=Q[r.buttons[ha].bound.variable]))),r.buttons[ha].action&&""!=r.buttons[ha].action){if(Oa=r.buttons[ha].action.replace(/'/g,"__1__"),Oa=Oa.replace(/"/g,
"__2__"),na+="onclick=\"doToolbarButton('"+Oa+"'",r.buttons[ha].preAction&&(na+=",'"+r.buttons[ha].preAction+"'"),na+=')" ',r.buttons[ha].id&&(na+='id="'+r.buttons[ha].id+'"'),r.buttons[ha].subMenu||r.buttons[ha].popupMenu)na+='data-synch-menu-index="'+ha+'" ',sa="<td ",r.buttons[ha].synchFromSubMenu&&(sa+='data-synch-capture="'+r.buttons[ha].synchFromSubMenu.capture+'" ',sa+='data-synch-action="'+r.buttons[ha].synchFromSubMenu.action+'" '),sa+='class="toolbarButton" onclick="doToolbarMenu('+ha+')" ',
r.buttons[ha].id&&(sa+='id="'+r.buttons[ha].id+ha+'"'),sa+='style=";font-family:Webdings;">\uf036</td>'}else if(r.buttons[ha].subMenu||r.buttons[ha].popupMenu)na+='data-dropdown="true" ',na+='data-synch-menu-index="'+ha+'" ',r.buttons[ha].synchFromSubMenu&&(na+='data-synch-capture="'+r.buttons[ha].synchFromSubMenu.capture+'" ',na+='data-synch-action="'+r.buttons[ha].synchFromSubMenu.action+'" '),na+='onclick="doToolbarMenu('+ha+')" ';null!=ea&&""+ea==""+r.buttons[ha].bound.value?(na+=' style="'+M+
'"',ra[ra.length]=ha):na+=' style="'+F+'"';0==ha||null==E.splitLineColor||""==E.splitLineColor?null!=r.buttons[ha].icon&&null!=r.buttons[ha].icon.src?(na+='">',na+='<img src="'+r.buttons[ha].icon.src+'"',na+='style="pointer-events:none;'+r.buttons[ha].icon.style+'"> </img>',na+=r.buttons[ha].capture):na+='">'+r.buttons[ha].capture:na+="border-left:1px solid "+E.splitLineColor+'">'+r.buttons[ha].capture;sa&&(na+=sa);na+="</td>"}}na+="</tr></table>";rb&&(na=na+('<ul id="'+rb+'"style="z-index: 999;')+
(T+'"'),na+="></ul>",O.push(rb));la&&(na=na+'<div id="chooseDatesId" style="'+(ia+'"'),na+="></div>",Z.push("chooseDatesId"));Na&&(na+='<div id="'+Wa.windowId+'" ',na+='style="'+fa+'">',na=na+'<div style="position: absolute;width: 100%;height: 13.6%;background-color: #FFF;color: #666;border-bottom: 1px solid #EEE;font-family: Roboto-Regular;font-size: 14px;"><label id="'+(Wa.childrenTitleId[0]+'" style="position:absolute;width: 49.8%;top: 25%;text-align: center;"></label>'),na+='<label id="'+Wa.childrenTitleId[1]+
'"style="position:absolute;width: 49.8%;left: 50.2%;top: 25%;text-align: center;"></label>',na=na+'</div><div id="'+(Wa.childrenId[0]+'" style="width: 49.8%;height: 85.4%;position:absolute;top: 14.6%;">'),na=na+'</div><div style="position: absolute;top: 14.6%;left: 50%;width: 0.4%;height: 76%;background-color:#E9EAEC"></div><div id="'+(Wa.childrenId[1]+'" style="width: 49.8%;height: 85.4%;position:absolute;left: 50.2%;top: 14.6%;">'),na+="</div></div>",Z.push(Wa.windowId));c.innerHTML=na;c.children[0].style=
V;c.style.backgroundColor=c.children[0].style.backgroundColor;c.children[0].cellPadding=Y&&Y.toolbar&&null!=Y.toolbar.cellPadding?Y.toolbar.cellPadding:"0";c.children[0].cellSpacing=Y&&Y.toolbar&&null!=Y.toolbar.cellSpacing?Y.toolbar.cellSpacing:"0";c.addEventListener("mousemove",r.onMouseMove);c.addEventListener("mouseout",r.onMouseOut);r.buttonsDiv=c.children[0].children[0].children[0].children;for(ha=0;ha<r.buttons.length;ha++)1==r.buttons[ha].pushed&&(r.buttonsDiv[ha].className="toolbarButton active",
r.buttonsDiv[ha].style=M),r.buttonsDiv[ha].addEventListener("mousedown",r.onMouseDown);if(0<ra.length)for(ha=0;ha<ra.length;ha++)r.buttonsDiv[ra[ha]].className="toolbarButton active",r.buttonsDiv[ra[ha]].style=M;la&&createCalendar();Na&&createMultipleCalendar(Wa,null,null,r);rb&&hb&&A(hb,rb,zb,Ma);(0<K.length&&0<O.length||0<pa.length&&0<Z.length)&&r.initCloseDom();Q=c.querySelectorAll('td[draggable="true"]');for(ra=0;ra<Q.length;ra++)Q[ra].addEventListener("dragstart",function(Jb){r.dragElem=Jb.target;
Jb=r.dragElem.parentNode.getElementsByTagName("td");for(var Cb=0;Cb<Jb.length;Cb++)Jb[Cb]==r.dragElem&&(dragIndex=Cb)}),Q[ra].addEventListener("dragover",function(Jb){Jb.preventDefault();var Cb=r.dragElem.parentNode,Db=Cb.getElementsByTagName("td"),cb=Jb.target,Ab=null;"td"!=cb.tagName.toLowerCase()&&(cb=v(cb,"td"));if(Db[Db.length-1]!=cb)for(var Gb=0;Gb<Db.length;Gb++)Db[Gb]==cb&&(Ab=Db[Gb+1]);0<Jb.offsetX?.5*Jb.target.offsetWidth>Math.abs(Jb.offsetX)?Cb.insertBefore(r.dragElem,cb):Db[Db.length-
1]==cb?Cb.appendChild(r.dragElem):Cb.insertBefore(r.dragElem,Ab):.5*Jb.target.offsetWidth<Math.abs(Jb.offsetX)?Cb.insertBefore(r.dragElem,cb):Db[Db.length-1]==cb?Cb.appendChild(r.dragElem):Cb.insertBefore(r.dragElem,Ab)}),Q[ra].addEventListener("dragend",function(Jb){Jb.preventDefault();Jb=r.dragElem.parentNode.getElementsByTagName("td");for(var Cb=0,Db=0;Db<Jb.length;Db++)Jb[Db]==r.dragElem&&(Cb=Db);dragIndex!=Cb&&r.dragCallback&&r.dragCallback(r.dragElem,Cb)})};this.tabsAlert=function(Q){var sa=
a.document.getElementById("newsTelegram"),ra=a.document.getElementById("newsDepth");2==Q?(sa.style.display="block",ra.style.display="none"):1==Q&&(ra.style.display="block",sa.style.display="none")};this.synchBoundValue=function(Q,sa,ra,la){if(la!=r&&void 0!=H&&0<H.length){Q=!1;for(sa=0;sa<ra.length;sa++)if(null!=ra[sa]&&null!=ra[sa].bound)for(la=0;la<H.length;la++)if((null==H[la].type||"synch"==H[la].type||"receive"==H[la].type)&&H[la].id==ra[sa].bound.id&&H[la].variable==ra[sa].bound.variable){if("variables."==
ra[sa].bound.variable.slice(0,10)){var Na=ra[sa].bound.variable.slice(10);try{U[Na]!=ra[sa].value&&(U[Na]=ra[sa].value,Q=!0)}catch(ea){console.log(ea)}}else if(ra[sa].bound.variable)try{eval(ra[sa].bound.variable)!=ra[sa].value&&(eval(ra[sa].bound.variable+"=boundValue[i].value"),Q=!0)}catch(ea){console.log(ea)}for(la=0;la<r.buttons.length;la++)if(-1!=r.buttons[la].capture.indexOf("{{ ")){var Wa=r.buttons[la].capture;for(Na in U){var na=U[Na],ha="{{ "+Na+" }}";Wa=Wa.replace(ha,na);Wa=Wa.replace(ha,
na);r.buttonsDiv[la].textContent=Wa}}break}1==Q&&r.query(u.NOTQUERY,null,ra)}};this.setVariablesValue=function(Q,sa,ra){var la=!1;if("Object"==Q.constructor.name&&(null==sa||void 0==sa))Object.keys(Q).map(function(na){U&&null!=U[na]&&U[na]!=Q[na]&&(U[na]=Q[na],"buttons"==na&&(r.buttons=Q[na],ra=!0),la=!0)});else if(sa)for(var Na in U)for(var Wa=0;Wa<Q.length;Wa++)Q[Wa][0]==Na&&null!=U[Na]&&U[Na]!=sa[Wa]&&(U[Na]=sa[Wa],la=!0);1==la&&r.query();ra&&Aa()};this.doClick=function(Q,sa,ra,la){if(la=Q.parentElement.className){la=
document.getElementsByClassName(la);for(var Na=0;Na<la.length;Na++){var Wa=la[Na].children;if(Wa)for(var na=0;na<Wa.length;na++)Wa[na].getAttribute("actionId")&&Wa[na].getAttribute("actionId")==Q.getAttribute("actionId")?(Wa[na].style.backgroundColor=ra,Wa[na].style.borderBottom=sa):(Wa[na].style.backgroundColor=E.color.backgroundColor,Wa[na].style.borderBottom=E.button.border)}}la=$jscomp.makeIterator(Q.parentNode.childNodes);for(Na=la.next();!Na.done;Na=la.next())Na=Na.value,Na.className&&""!=Na.className&&
!Na.getAttribute("data-dropdown")&&(Na.style.backgroundColor=E.color.backgroundColor,Na.style.borderBottom=E.button.border);Q.style.backgroundColor=ra;Q.style.borderBottom=sa};this.doButtonAction=function(Q,sa){var ra=Q.split(";");if(1<ra.length)ra.map(function(ha){r.doButtonAction(ha,sa)});else{ra=C;for(var la=0;la<Q.length&&"."!=Q[la];la++)if("("==Q[la]){la=0;break}if(0<la){var Na=Q.substr(0,la),Wa=globalPage.getActivePage().getWidgetByElementId(Na);if(null!=Wa){null!=sa&&(Na=sa.replace("this",
"button"),eval(Na));Na=Q.substr(la+1);Na=Na.replace(/__1__/g,"'");Na=Na.replace(/__2__/g,'"');for(var na in U)Q=U[na],la="{{ "+na+" }}",Na=Na.replace(la,Q),Na=Na.replace(la,Q);Wa.doAction&&Wa.doAction(Na);null!=ra&&(ra.dataset.tabid&&(na=globalPage.getActivePage().getTabTdByTabId(ra.dataset.tabid),doActivePageTab(na)),r.setActiveButton(ra))}else 1==Na.startsWith("page")?(ra=Q.substr(la+1),ra=ra.replace(/__1__/g,"'"),ra=ra.replace(/__2__/g,'"'),b.doAction(ra)):"button"==Na?(Na=Q.replace("button","_this"),
eval(Na)):eval(Q)}else if(null==b){if(f){ra=Q.replace(/__1__/g,"'");ra=ra.replace(/__2__/g,'"');na=ra.indexOf("(");Wa=ra.substring(0,na);na=f.funcNameMap[Wa];Wa=ra.slice(Wa.length);Wa=Wa.slice(1,-1);0<Wa.length&&(Wa=eval("("+Wa+")"));try{na(Wa)}catch(ha){console.log("An error happened!\n"+ra)}}}else if(1==Q.startsWith("doActivePageTab"))doActivePageTab(ra);else{Na=("globalPage.getActivePage()."+Q).replace(/__1__/g,"'");Na=Na.replace(/__2__/g,'"');for(na in U)Q=U[na],la="{{ "+na+" }}",Na=Na.replace(la,
Q),Na=Na.replace(la,Q);try{eval(Na)}catch(ha){console.log("An error happened!\n"+Na)}}}};this.doPopupMenu=function(Q){r.dropDownMenuAt(C);if(Q=r.getSubMenu(Q)){var sa=getClientPos(C),ra;if(ra=globalPage.getActivePage())ra="string"==typeof f?ra.getObjectByElementId(f):f,globalPage.getActivePage().boundMenuStatus(Q.subMenu),xPopupMenu.popupMenu(Q,sa.x,sa.y+C.clientHeight,ra)}};this.resetBtn=function(){Aa()};this.onMouseMove=function(Q){if(C&&C!=Q.srcElement){var sa="";"\uf036"==C.textContent&&(sa=";font-family:Webdings; padding:0px 0px");
"toolbarButton"==C.className?C.style=F+sa:"toolbarButton active"==C.className&&(C.style=M+sa)}"TD"==Q.srcElement.tagName&&(sa="","\uf036"==Q.srcElement.textContent&&(sa=";font-family:Webdings; padding:0px 0px"),"toolbarButton"==Q.srcElement.className?(Q.srcElement.style=X+sa,C=Q.srcElement,xGlobal.actionToolbar=r):"toolbarHtml"==Q.srcElement.className?xGlobal.actionToolbar=r:"toolbarButton active"==Q.srcElement.className&&(Q.srcElement.style=aa+sa,C=Q.srcElement,xGlobal.actionToolbar=r));"INPUT"==
Q.srcElement.tagName&&(xGlobal.actionToolbar=r);if(xGlobal.isMobile){for(sa=0;sa<r.buttonsDiv.length;sa++)-1!==r.buttonsDiv[sa].className.indexOf("active")&&(r.buttonsDiv[sa].className=r.buttonsDiv[sa].className.replace("active",""));Q.srcElement.className+=" active"}};this.onMouseDown=function(Q){2==Q.button&&r.rightMouseClickCB&&r.rightMouseClickCB(Q)};this.onMouseOut=function(Q){C&&(Q="","\uf036"==C.textContent&&(Q=";font-family:Webdings; padding:0px 0px"),"toolbarButton"==C.className?C.style=
F+Q:"toolbarButton active"==C.className&&(C.style=M+Q),C=null,xGlobal.actionToolbar=null)};this.openDialog=function(){pagePKLogin()};this.dropDownMenuAt=function(Q){toolbarDropDownMenu=this;z=Q;Q.className="toolBarButtonDropDown"};this.setBounds=function(Q){H=Q};this.close=function(Q){a:{for(var sa=0;sa<r.buttons.length;sa++)if(r.buttons[sa].capture==Q){Q=sa;break a}Q=-1}-1!=Q&&r.buttons.splice(Q,1);Aa()};this.releaseDropDownMenu=function(Q,sa,ra){if(z){var la=z;la.className="toolbarButton";var Na=
"";"\uf036"==la.textContent&&(Na=";font-family:Webdings; padding:0px 0px");la.style=F+Na;z=null;if(null!=Q&&ra&&sa&&(null==sa.synchCapture||sa.synchCapture&&1==sa.synchCapture)){var Wa=!1;Na=!1;la.dataset.synchCapture&&"true"==la.dataset.synchCapture&&(Wa=!0);la.dataset.synchAction&&"true"==la.dataset.synchAction&&(Na=!0);"\uf036"==la.innerHTML&&(la=la.previousElementSibling);1==Wa&&(null!=sa.icon&&null!=sa.icon.src?(Wa='<img src="'+sa.icon.src+'"',Wa+='style="pointer-events:none;'+sa.icon.style+
'"> </img>',Wa+=Q):Wa=Q,la.innerHTML=Wa);1==Na&&(Q=ra.replace(/'/g,"__1__"),la.onclick=eval("(function onclick(event) { doToolbarButton('"+(Q+"');})")))}}};this.getSubMenu=function(Q){if(r.buttons[Q].popupMenu){Q=r.buttons[Q].popupMenu;var sa=Q.indexOf(".");if(0<sa)try{var ra=Q.substr(0,sa);if(null!=globalPage.getActivePage().getObjectByElementId(ra)){var la="elem."+Q.substr(sa+1);la=la.replace(/__1__/g,"'");la=la.replace(/__2__/g,'"');return eval("("+la+")")}return eval("("+Q+")")}catch(Na){console.log(Na)}}else return r.buttons[Q]};
this.setActiveButtonById=function(Q){for(var sa=0,ra=0;ra<r.buttons.length;ra++)if(r.buttons[ra].boundTabId==Q){r.setActiveButton(r.buttonsDiv[ra]);sa=1;break}sa||r.setActiveButton()};this.setActiveButton=function(Q){if(!Q)for(var sa=0;sa<r.buttonsDiv.length;sa++){if("toolbarDate"!=r.buttonsDiv[sa].className&&"toolbarSearch"!=r.buttonsDiv[sa].className){var ra="";r.buttonsDiv[sa].style=F+ra;r.buttonsDiv[sa].className="toolbarButton"}}else if(Q.dataset.radio)for(sa=0;sa<r.buttonsDiv.length;sa++)r.buttonsDiv[sa].dataset.radio&&
r.buttonsDiv[sa].dataset.radio==Q.dataset.radio&&(ra="","\uf036"==r.buttonsDiv[sa].textContent&&(ra=";font-family:Webdings; padding:0px 0px"),Q==r.buttonsDiv[sa]||Q.dataset.activeid&&r.buttonsDiv[sa].dataset.activeid&&Q.dataset.activeid==r.buttonsDiv[sa].dataset.activeid?(r.buttonsDiv[sa].style=M+ra,r.buttonsDiv[sa].className="toolbarButton active"):(r.buttonsDiv[sa].style=F+ra,r.buttonsDiv[sa].className="toolbarButton"))};this.getActiveButton=function(){for(var Q=0;Q<r.buttonsDiv.length;Q++)if("toolbarButton active"==
r.buttonsDiv[Q].className)return r.buttonsDiv[Q];return null};this.setDomHidden=function(Q){if(null==r.chooseTd){var sa=Q.getAttribute("select-hiddenIds");if(null!=sa)for(sa=sa.split(","),r.chooseTd=Q,Q=0;Q<sa.length;Q++){var ra=a.document.getElementById(sa[Q]);ra&&(ra.className+=" document-Hiddens",-1!=ra.nextSibling.id.indexOf(sa[Q])&&(ra.nextSibling.className=ra.className))}}else if(r.chooseTd!=Q){sa=r.chooseTd.getAttribute("select-hiddenIds");if(null!=sa)for(sa=sa.split(","),Q=0;Q<sa.length;Q++)if(ra=
a.document.getElementById(sa[Q]))ra.className=ra.className.replace(/ document-Hiddens/g,""),-1!=ra.nextSibling.id.indexOf(sa[Q])&&(ra.nextSibling.className=ra.className);r.chooseTd=null}};this.setBoundStatus=function(){var Q="";if(0!=r.buttonsDiv.length)for(var sa=r.buttonsDiv,ra=0;ra<sa.length;ra++){var la=sa[ra];if(la.dataset.boundVariable){if(la.dataset.boundVariable!=Q){Q=la.dataset.boundVariable;var Na=b.getBoundVariableValue(la.dataset.boundVariable)}if(null!=la.dataset.synchMenuIndex)for(var Wa=
parseInt(la.dataset.synchMenuIndex),na=r.buttons[Wa].subMenu,ha=0;ha<na.length;ha++)if(na[ha].bound&&Na==na[ha].bound.value){1==r.buttons[Wa].synchFromSubMenu.capture&&(la.innerHTML=na[ha].capture);1==r.buttons[Wa].synchFromSubMenu.action&&(la.dataset.boundValue=na[ha].bound.value,Wa="function onclick(event) { doToolbarButton('"+na[ha].action.replace(/'/g,"__1__")+"');}",la.onclick=eval("("+Wa+")"));break}Wa="";"\uf036"==la.textContent&&(Wa=";font-family:Webdings; padding:0px 0px");Na==la.dataset.boundValue?
(la.className="toolbarButton active",r.setDomHidden(la),la!=C&&(la.style=M+Wa)):-1==la.className.indexOf("document-Hiddens")&&(la.className="toolbarButton",la.style=C==la?X+Wa:F+Wa);if("true"==la.dataset.synchCapture)for(Wa=la.dataset.synchMenuIndex,na=r.buttons[Wa].subMenu,ha=0;ha<na.length;ha++)if(na[ha].bound&&Na==na[ha].bound.value&&1==r.buttons[Wa].synchFromSubMenu.capture){la.innerHTML=na[ha].capture;break}}}};this.boundStatus=function(Q){for(var sa,ra=r.buttonsDiv,la=0;la<ra.length;la++){var Na=
ra[la];if(Na.dataset.boundVariable){sa="variables."==Na.dataset.boundVariable.substr(0,10)?Q[Na.dataset.boundVariable.substr(11)]:"option."==Na.dataset.boundVariable.substr(0,7)?E[Na.dataset.boundVariable.substr(7)]:Q[Na.dataset.boundVariable];if(null!=Na.dataset.synchMenuIndex)for(var Wa=parseInt(Na.dataset.synchMenuIndex),na=r.buttons[Wa].subMenu,ha=0;ha<na.length;ha++)if(na[ha].bound&&sa==na[ha].bound.value){1==r.buttons[Wa].synchFromSubMenu.capture&&(Na.innerHTML=na[ha].capture);1==r.buttons[Wa].synchFromSubMenu.action&&
(Na.dataset.boundValue=na[ha].bound.value,Wa="globalPage.getActivePage().getObjectByElementId('"+c.id+"').",na=na[ha].action.replace(/'/g,"__1__"),Na.onclick=eval("(function onclick(event) { "+(Wa+"doAction(this, '"+na+"');})")));break}""+sa==Na.dataset.boundValue?(Na.className="toolbarButton active",Na!=C&&(Na.style=M)):(Na.className="toolbarButton",Na.style=F)}}};this.setScheme=function(Q,sa){Q.xToolbar&&Q.xToolbar[sa]&&r.setOption(Q.xToolbar[sa])};this.setOption=function(Q){Q.div&&(c.style=getOptionStyle(c.style.cssText,
Q.div.style));V="";xGlobal.isMobile||(V=getOptionStyle(null!=c.children[0].style.cssText?c.children[0].style.cssText:E.toolbar.style,Q.toolbar));c.children[0].style=V;c.style.backgroundColor=c.children[0].style.backgroundColor;F=getOptionStyle(E.normalButton.style,Q.normalButton);M=getOptionStyle(E.pushButton.style,Q.pushButton);X=getOptionStyle(E.overButton.style,Q.overButton);aa=getOptionStyle(E.overPushButton.style,Q.overPushButton);for(Q=0;Q<r.buttonsDiv.length;Q++){var sa="";"\uf036"==r.buttonsDiv[Q].textContent&&
(sa=";font-family:Webdings; padding:0px 0px");"toolbarButton active"==r.buttonsDiv[Q].className?r.buttonsDiv[Q].style=M+sa:"toolbarButton"==r.buttonsDiv[Q].className&&(r.buttonsDiv[Q].style=F+sa)}};this.query=function(Q,sa,ra,la){if(Q==u.NOTQUERY)for(var Na=0;Na<ra.length;Na++)for(var Wa=ra[Na].bound.id,na=0;na<H.length;na++)if((null==H[na].type||"synch"==H[na].type)&&Wa==H[na].id&&H[na].variable==ra[Na].bound.variable){if(Wa=a.document.getElementById(H[na].id))if(na=Wa.getAttribute("format"),null!=
na&&null!=Wa.getAttribute("mutable-format")){for(var ha=na.toLowerCase().indexOf("yyyy"),ea=na.toLowerCase().indexOf("mm"),ja=na.toLowerCase().indexOf("dd"),da=[ha,ea,ja],Oa=[],Pa=[],hb=0;hb<da.length;hb++)Oa.push(da[hb]),Pa.push(da[hb]);Oa=Oa.sort(function(zb,Jb){return Jb-zb});Pa=Pa.sort(function(zb,Jb){return zb-Jb});var Ma;Oa[0]==ha&&(Ma=ha+4);Oa[0]==ea&&(Ma=ea+2);Oa[0]==ja&&(Ma=ja+2);na=na.substring(Pa[0],Ma);13==ra[Na].value.length&&(ha=new Date,ha.setTime(ra[Na].value),ra[Na].value=ha.getUTCFullYear()+
""+getValidDateTime(ha.getUTCMonth()+1)+getValidDateTime(ha.getUTCDate()));ja=calendarTimeFormat(na,""+ra[Na].value);ea=Wa.getAttribute("mutable-format");na=Wa.getAttribute("value");ha=ra[Na].variable.slice(10);ea=ea.replace("{{ "+ha+" }}",ja);ha=ea.indexOf("{");ja=ea.indexOf("}")+2;0<ha?(ea=ea.substring(0,ha),na=na.substring(ha,na.length),na=ea+na):0>=ha&&(ea=ea.substring(ja,ea.length),na=na.substring(ha,na.length-ea.length),na+=ea);Wa.value=na;ha=Wa.getAttribute("onclick");ea=ha.indexOf("(");ja=
ha.lastIndexOf(")");ha=ha.substring(ea+1,ja);var rb=eval("("+ha+")");(function(zb,Jb,Cb){Jb=getMuDate(Jb,Cb);for(Cb=0;Cb<Jb.length;Cb++){var Db=Jb[Cb].replace(/-/g,"");null!=rb.callFormat&&(Db=calendarTimeFormat(rb.callFormat,Db));zb&&(zb=zb.replace(0==Cb?/{{ startDateValue }}/g:/{{ endDateValue }}/g,Db))}xGlobal.actionToolbar=r;doToolbarButton(zb)})(rb.action,na,Wa.getAttribute("format"))}else null!=na?(ja=calendarTimeFormat(na,""+ra[Na].value),Wa.value=ja):Wa.value=ra[Na].value;else for(Wa=this.buttonsDiv,
na=0;na<Wa.length;na++)if(ha=Wa[na].getAttribute("get-variable"),null!=ha&&ha==ra[Na].bound.variable){Wa[na].innerHTML=ra[Na].value;break}break}if(Q==u.SEARCHQUERY&&sa)for(Na=0;Na<J.length;Na++)J[Na].http&&(ra=J[Na].field,Ma=J[Na].condition,Wa=Ma.indexOf("{"),na=Ma.indexOf("}"),ha=Ma.substring(Wa+3,na-1),Wa=a.document.getElementById(ha).value,Ma=Ma.replace("{{ "+ha+" }}",Wa),Wa=[0,10],na=ra+";"+Ma,null!=J[Na].query&&na==J[Na].query.script||G++,J[Na].query={script:na,limit:Wa,field:ra,condition:Ma,
id:G},r.httpManages.sendHttpQuery(this.httpManages.getQueryIndex(),J,Na,sa));if(Q==u.INITQUERY)for(Na=0;Na<la.length;Na++)la[Na].http&&(ra=replaceVariablesValue(la[Na].field,U,null),Ma=replaceVariablesValue(la[Na].condition,U,null),Wa=[0,10],na=ra+";"+Ma,null!=la[Na].query&&na==la[Na].query.script||G++,la[Na].query={script:na,limit:Wa,field:ra,condition:Ma,id:G},r.httpManages.sendHttpQuery(this.httpManages.getQueryIndex(),la,Na,sa))};this.sendHttpQuery=function(Q,sa){for(var ra=0;ra<Q.length;ra++){var la=
replaceVariablesValue(Q[ra].field,U,null),Na=replaceVariablesValue(Q[ra].condition,U,null),Wa=la+";"+Na;null!=Q[ra].query&&Wa==Q[ra].query.script||G++;Q[ra].query={script:Wa,limit:[0,10],field:la,condition:Na,id:G};r.httpManages.sendHttpQuery(this.httpManages.getQueryIndex(),Q,ra,sa)}};this.initCloseDom=function(){document.onclick=function(Q){Q=Q||window.event;var sa=Q.target?Q.target.id:Q.srcElement.id;if("cal-text"!=Q.target.className&&"icon-angle-down"!=Q.target.className&&"icon-angle-up"!=Q.target.className){Q=
$jscomp.makeIterator(xGlobal.closeElementMap);for(var ra=Q.next();!ra.done;ra=Q.next()){ra=$jscomp.makeIterator(ra.value);ra.next();var la=ra.next().value;ra=la.get("closeArrId");la=la.get("closeInvalid");if(!(0>=ra.length&&0>=la.length)){for(var Na="if(",Wa=0;Wa<la.length;Wa++)Na=0==Wa?Na+("'"+sa+"' != '"+la[Wa]+"'"):Na+("&& '"+sa+"' != '"+la[Wa]+"'");Na+="){";for(Wa=0;Wa<ra.length;Wa++)Na+="document.getElementById('"+ra[Wa]+'\').style.display = "none";';Na+="}";eval(Na)}}}}};this.doAction=function(Q){Q=
trim(Q);var sa=Q.indexOf("setVariablesValue");0==sa?(Q=trimBracket(Q.slice(17)),Q=eval("("+Q+")"),r.setVariablesValue(Q)):(sa=Q.indexOf("setOption"),0==sa?(Q=trimBracket(Q.slice(9)),Q=eval("("+Q+")"),r.setOption(Q)):(Q=Q.slice(9,-1),eval(Q)))};Aa()};function formatDate(a,b,c){var g=!1,k=new Date;"dd"==b||"dm"==b||"dq"==b||"dy"==b?(k.setFullYear(parseInt(a/1E4),parseInt(a/100%100)-1,parseInt(a%100)),g=!0):k.setTime(a);0==g&&xGlobal.utcTime?(a=k.getUTCFullYear()+"/"+getValidDateTime(k.getUTCMonth()+1)+"/"+getValidDateTime(k.getUTCDate()),b=getValidDateTime(k.getUTCHours())+":"+getValidDateTime(k.getUTCMinutes())+":"+getValidDateTime(k.getUTCSeconds())):(a=k.getFullYear()+"/"+getValidDateTime(k.getMonth()+1)+"/"+getValidDateTime(k.getDate()),b=
getValidDateTime(k.getHours())+":"+getValidDateTime(k.getMinutes())+":"+getValidDateTime(k.getSeconds()));"YYYY/MM/DD"==c?c=a:"YYYY/MM"==c?c=a.slice(7):"YYYY"==c?c=a.slice(0,5):"MM"==c?c=""+parseInt(a.slice(5,7)):"DD"==c?c=""+parseInt(a.slice(8,10)):"MM/DD"==c?c=a.slice(5,10):"MM/DD, HH:mm:SS"==c?c=a.slice(5)+", "+b:"MM/DD, HH:mm"==c?c=a.slice(5)+", "+b.slice(0,5):"YYYY/MM/DD, HH:mm"==c?c=a+", "+b.slice(0,5):"YYYY.MM.DD HH:mm"==c?(c=a+" "+b.slice(0,5),c=c.replace(/\//g,".")):c="HH:mm:SS"==c?b:"HH:mm"==
c?b.slice(0,5):null!=c&&"month"==c.toLowerCase()?xGlobal.monthString[k.getMonth()]:null!=c&&"month."==c.toLowerCase()?xGlobal.monthString_short[k.getMonth()]:null!=c&&"week"==c.toLowerCase()?xGlobal.weekString[k.getDay()]:null!=c&&"week."==c.toLowerCase()?xGlobal.weekString_short[k.getDay()]:null!=c&&"month_local"==c.toLowerCase()?xGlobal.monthString_local[k.getMonth()]:null!=c&&"week_local"==c.toLowerCase()?xGlobal.weekString_local[k.getDay()]:g?a:a+", "+b;return c}
function getTableForMap(a){var b=null;if(a&&a.data&&"row"==a.info.rank&&0<a.data.length&&a.field&&a.field.length==a.data[0].length)for(var c=0;c<a.field.length;c++)b||(b={}),b[a.field[c][0]]={value:a.data[0][c],valueType:a.field[c][1]};else if(a&&a.data&&"col"==a.info.rank&&0<a.data.length&&a.field&&a.field.length==a.data.length)for(c=0;c<a.field.length;c++)b||(b={}),b[a.field[c][0]]={value:a.data[c][0],valueType:a.field[c][1]};return b}
function getTableMuRowForMap(a){var b=[];if(a&&a.field.length==a.data[0].length)for(var c=0;c<a.data.length;c++){for(var g=null,k=0;k<a.field.length;k++)g||(g={}),g[a.field[k][0]]={value:a.data[c][k],valueType:a.field[k][1]};b.push(g)}return b}function getSubmissionContents(a,b){for(var c=[],g=0;g<a.length;g++){var k=a[g];k.name==b&&c.push(k)}return c}
function getAbsolute(a,b){for(var c={left:-b.clientLeft,top:-b.clientTop};b!=a&&b!=document&&null!=b;)c.left=c.left+b.offsetLeft+b.clientLeft,c.top=c.top+b.offsetTop+b.clientTop,b=b.parentNode;isNaN(a.scrollLeft)?(c.right=document.documentElement.scrollWidth-c.left,c.bottom=document.documentElement.scrollHeight-c.top):(c.right=a.scrollWidth-c.left,c.bottom=a.scrollHeight-c.top);return c}
function getViewport(a){var b=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,g=window.innerHeight||document.documentElement.offsetHeight,k=window.innerWidth||document.documentElement.offsetWidth;a=getAbsolute(document,a);return{left:a.left-c,top:a.top-b,width:k-(a.left-c),bottom:g-(a.top-b)}}
function isViewport(a){var b=getViewport(a);return 0>b.left+a.offsetWidth||0>b.top+a.offsetHeight||0>b.bottom||0>b.right?!1:!0}function getViewportWidgetForId(a){var b;if(xGlobal.refreshDialogList)for(b=0;b<xGlobal.refreshDialogList.length;b++){var c=xGlobal.refreshDialogList[b].getObjectByElementId(a);if(null!=c)return c}if(xGlobal.refreshPageList)for(b=0;b<xGlobal.refreshPageList.length;b++)if(c=xGlobal.refreshPageList[b].getObjectByElementId(a),null!=c)return c}
function refreshWidget(a){(a=getViewportWidgetForId(a))&&null!=a.reload&&a.reload()}function synchBoundsOfWidget(a,b){a=getViewportWidgetForId(a);b=getViewportWidgetForId(b);a&&b&&a.getVariables&&(a=a.getVariables(),b.setVariablesValue(a))}
function createDialogForParent(a,b,c){var g=b.title,k=b.width,q=b.height,f=b.closeStyle,p=b.titleStyle,v=b.contentStyle,A=b.page;null!=a&&null!=b&&null!=c&&(a=new xDialog(a,g,c,k,q,null,null,p,f),b=document.createElement("div"),a.setDlg(b,v),a.createLayer(A,c))}function filterMatch(a,b,c,g){b[c]=a;g&&g.reCreateGrid&&g.reCreateGrid()}
function setControlSchemeWithWidget(a,b){if(a.xControl&&b&&0<b.length){for(var c=!1,g=0;g<b.length;g++)c=checkControlScheme(b[g],a);if(1==c)for(c=0;c<b.length;c++)if(b[c].objects)setControlSchemeWithCells(b[c].objects,a);else return!1;return!0}return!1}
function checkControlScheme(a,b){var c=a.cells;if(null==c)return!1;for(var g=!1,k=0;k<c.length;k++){var q=c[k];if(q.type&&"img"!=q.type)if(q.option&&q.option.schemeName){var f=b.xControl[q.type][q.option.schemeName];if(f&&(g=!0,xCopyAllTo(f,q),a.objects))for(q=0;q<a.objects.length;q++){var p=a.objects[q].getCells();if(p[k].object){var v=p[k].object.getOption(),A={},r;for(r in v)"object"!=r&&"callback"!=r&&(A[r]=v[r]);xCopyAllTo(f,A);p[k].object.setOption(A)}}}else b.xControl&&b.xControl[q.type]&&
(f=b.xControl[q.type].normal)&&(g=!0,xCopyAllTo(f,q))}return g}function setControlSchemeWithCells(a,b){for(var c=0;c<a.length;c++)if(a[c])for(var g=a[c].getCells(),k=0;k<g.length;k++)if(g[k].type&&(g[k].type.startsWith("xSaft")||g[k].type.startsWith("xDraw"))){var q=g[k].option.schemeName,f=b.xControl;g[k].object&&g[k].object.setScheme&&g[k].object.setScheme(f,q)}}
function setControlSchemeWithCollection(a,b){for(var c=!1,g=0;g<b.length;g++)c=b[g].getCells(),c=checkControlScheme(c,a);1==c&&setControlSchemeWithCells(b,a)}function getShowStatu(a){return 0==a.parentElement.offsetWidth||0==a.parentElement.offsetHeight?!1:!0}
function getNowSaftTime(){var a=new Date;this.year=a.getFullYear();this.month=a.getMonth()+1;this.date=a.getDate();this.hour=10>a.getHours()?"0"+a.getHours():a.getHours();this.minute=10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes();this.second=10>a.getSeconds()?"0"+a.getSeconds():a.getSeconds();this.milliSeconds=a.getMilliseconds();return this.year+"-"+this.month+"-"+this.date+" "+this.hour+":"+this.minute+":"+this.second+"."+this.milliSeconds}
function getFontSizeWithFont(a,b){null==b&&(b=xGlobal.systemFont);a=null!=a?a:14;return a=""!=b?a+("px "+b):a+("px "+xGlobal.systemFont)}function getHeight(a,b,c,g,k){if(null==b||""==b||0>k||"String"!=b.constructor.name)return g;a.font=c;c=0;for(var q=1,f=0;f<b.length;f++)if(c+=a.measureText(b[f]).width,c>k||"\n"==b[f]){if(c>k){if(250<=q){q=1;break}f--}f!=b.length-1&&(q++,c=0)}return q*g}
function RgbToHex(a){if(/^(rgb|RGB)/.test(a)){var b="#";a=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",");for(var c=0;c<a.length;c++){var g=Number(a[c]).toString(16);"0"===g&&(g+=g);b+=g}return b}return String(a)}function getRgbNum(a){if(4===a.length){for(var b="#",c=1;4>c;c+=1)b+=a.slice(c,c+1).concat(a.slice(c,c+1));a=b}b=[];for(c=1;7>c;c+=2)b.push(parseInt("0x"+a.slice(c,c+2)));return b}
function lightDarkenColor(a,b,c){a=getRgbNum(a);for(var g=[],k=0;k<a.length;k++){var q=a[k]+b;0>q&&(q=0);255<q&&(q=255);g.push(q)}return"rgb("+g.join(",")+","+c+")"}function loadJS(a,b){var c=document.createElement("script"),g=b||function(){};c.type="text/javascript";c.readyState?c.onreadystatechange=function(){if("loaded"==c.readyState||"complete"==c.readyState)c.onreadystatechange=null,g()}:c.onload=function(){g()};c.src=a;document.getElementsByTagName("head")[0].appendChild(c)}
function UrlGetParams(){var a=window.document.location.href.toString().split("?");if("string"==typeof a[1]){a=a[1].split("&");var b={},c;for(c in a){var g=a[c].split("=");b[g[0]]=g[1]}return b}return{}}function getWidgetForPath(a,b,c){if(xGlobal)if(xGlobal.frame){if(a=xGlobal.frame.getPageManager().getPageSet()){var g=null;a.forEach(function(k,q){k.page&&b==k.page.getPageId()&&(g=q)});if(a[g]&&a[g].page&&(c=a[g].page.getWidgetForQueryId(c)))return c}}else return GUI.getWidgetForPath(b,c)}
function getHttpIsMap(a){var b=!1;if(null!=xGlobal.HttpNoMerge)for(var c=0;c<xGlobal.HttpNoMerge.length;c++){var g=a;if(g&&g.toLowerCase()==xGlobal.HttpNoMerge[c].toLowerCase()){b=!0;break}}return b}function getTypeString(a){a=Object.prototype.toString.call(a);return a.slice(8,a.length-1)}function xADeepCopy(a){return JSON.parse(JSON.stringify(a))}function Gtype(a){return Object.prototype.toString.call(a).match(/\[object (.*?)\]/)[1].toLowerCase()}
"Null Undefined Object Array String Number Boolean Function RegExp".split(" ").forEach(function(a){Gtype["is"+a]=function(b){return Gtype(b)===a.toLowerCase()}});function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function ltrim(a){return a.replace(/(^\s*)/g,"")}function rtrim(a){return a.replace(/(\s*$)/g,"")}function trimSingle(a){return a.replace(/(^'*)|('*$)/g,"")}function trimDbSingle(a){return a.replace(/(^"*)|("*$)/g,"")}
function xIsSame0(a,b){if(null==a&&null==b)return!0;if(null!=a&&null==b||null==a&&null!=b||a.constructor.name!=b.constructor.name)return!1;if("Array"==a.constructor.name){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(0==xIsSame0(a[c],b[c]))return!1}else if("Object"==a.constructor.name)for(c in a){if(null==b[c]&&a[c]!=b[c]||0==xIsSame0(a[c],b[c]))return!1}else if(a!=b)return!1;return!0}
function xIsSame(a,b){if(null==a&&null==b)return!0;if(null!=a&&null==b||null==a&&null!=b||a.constructor.name!=b.constructor.name)return!1;if("Array"==a.constructor.name){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(0==xIsSame(a[c],b[c]))return!1}else if("Object"==a.constructor.name)for(c in a){if(null==b[c]&&a[c]!=b[c]||0==xIsSame(a[c],b[c]))return!1}else if(a!=b)return!1;return xIsSame0(b,a)};
